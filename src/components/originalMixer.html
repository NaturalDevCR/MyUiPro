<!DOCTYPE html>
<html>
<!-- <html manifest="offline2.manifest"> -->
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <meta name="apple-mobile-web-app-title" content="Ui" />

  <!-- <meta http-equiv='cache-control' content='no-cache'> -->
  <!-- <meta http-equiv='expires' content='0'> -->
  <!-- <meta http-equiv='pragma' content='no-cache'> -->

  <link rel="icon" href="favicon.png" type="image/gif" sizes="16x16" />
  <link rel="apple-touch-icon" sizes="40x40" href="AppIcon40x40.png" />
  <link rel="apple-touch-icon" sizes="80x80" href="AppIcon40x40@2x.png" />
  <link rel="apple-touch-icon" sizes="50x50" href="AppIcon50x50.png" />
  <link rel="apple-touch-icon" sizes="60x60" href="AppIcon60x60.png" />
  <link rel="apple-touch-icon" sizes="120x120" href="AppIcon60x60@2x.png" />
  <link rel="apple-touch-icon" sizes="76x76" href="AppIcon76x76.png" />
  <link rel="apple-touch-icon" sizes="152x152" href="AppIcon76x76@2x.png" />

  <meta name="description" content="Soundcraft Ui Digital Mixer Web GUI" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no" />

  <style>
    * {
      margin: 0;
      padding: 0;
    }
    html,
    body {
      position: relative;
      overflow-x: hidden;
      overflow-y: hidden;
      width: 100%;
      height: 100%;
      -webkit-user-select: none;
      -khtml-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
      -ms-touch-action: none;
      touch-action: none;
    }
    canvas {
      display: block;
      width: 100%;
      height: 100%;
    }
    input[type="radio"] {
      margin-right: 4px;
      margin-left: 4px;
      width: 18px;
      height: 18px;
    }
    #DIM_CAPTURE,
    .DIM_CAPTURE {
      position: absolute;
      z-index: 3;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      display: none;
      background-color: rgba(0, 0, 0, 0.4);
      text-align: center;
      color: #f9f9f9;
      text-shadow: 4px 4px #111;
      font-family: "open_sans_condensedbold";
      font-size: 9mm;
    }
    .DIM_DIALOG,
    .DIM_DIALOG_PHONE {
      position: absolute;
      z-index: 3000;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      background-color: rgba(0, 0, 0, 0.7);
      text-align: center;
      color: #f9f9f9;
      text-shadow: 4px 4px #111;
      font-family: "open_sans_condensedbold";
      font-size: 6mm;
    }
    .DIM_DIALOG div,
    .DIM_DIALOG_PHONE div {
      z-index: 1000;
      display: table;
      width: 100%;
      height: 100%;
      text-align: center;
    }
    .DIM_DIALOG div div,
    .DIM_DIALOG_PHONE div div {
      display: table-cell;
      vertical-align: middle;
    }
    .DIM_DIALOG_PHONE {
      font-size: 3.5mm;
    }
    #audio {
      display: none;
      position: absolute;
      z-index: 2000;
      bottom: 36px;
      right: 5px;
      width: auto;
      height: auto;
      background-color: rgba(0, 0, 0, 0);
    }
    #PORTRAIT_PAGE {
      position: absolute;
      z-index: 2000;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      display: none;
      text-align: center;
      color: #fff;
      background-color: rgba(0, 0, 0, 1);
      font-family: "Helvetica", "Droid Sans", "Lucida Grande", "Roboto", "Microsoft Sans Serif", "Arial", "sans serif", "sans";
      font-size: 10mm;
    }
    #noConnectMessage {
      position: absolute;
      z-index: 20000;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      visibility: hidden;
      color: #fff;
      background-color: rgba(0, 0, 0, 0.5);
      text-shadow: -2px -2px #000;
      font-family: "Helvetica", "Droid Sans", "Lucida Grande", "Roboto", "Microsoft Sans Serif", "Arial", "sans serif", "sans";
      font-size: 10mm;
    }
    #noConnectMessage div {
      display: table;
      width: 100%;
      height: 100%;
      text-align: center;
      vertical-align: middle;
    }
    #noConnectMessage div div {
      display: table-cell;
      vertical-align: middle;
    }
    #MSG_CONTAINER,
    #EDIT_CONTAINER,
    #CONF_CONTAINER,
    .MSG_CONTAINER {
      position: absolute;
      z-index: 1000;
      top: 30%;
      left: 50%;
      width: auto;
      min-width: 300px;
      -webkit-transform: translate(-50%, -50%);
      transform: translate(-50%, -50%);
      padding-top: 20px;
      padding-bottom: 20px;
      padding-left: 20px;
      padding-right: 20px;
      -webkit-transition: opacity 300ms ease-in;
      -moz-transition: opacity 300ms ease-in;
      -ms-transition: opacity 300ms ease-in;
      -o-transition: opacity 300ms ease-in;
      transition: opacity 300ms ease-in;
      border: 0 solid;
      -webkit-border-radius: 10px;
      -moz-border-radius: 10px;
      border-radius: 12px;
      background-color: rgba(0, 0, 0, 0.8);
    }
    #MSG_CONTAINER {
      pointer-events: none;
      opacity: 0;
    }
    #EDIT_CONTAINER,
    #CONF_CONTAINER {
      display: none;
      background-color: rgba(0, 0, 0, 0.9);
    }
    #MSG_CONTAINER div,
    #EDIT_CONTAINER div,
    #CONF_CONTAINER div {
      z-index: 1000;
      display: table;
      width: 100%;
      height: 100%;
      text-align: center;
    }
    #MSG_BODY,
    #EDIT_BODY,
    #CONF_BODY {
      display: table-cell;
      vertical-align: middle;
      color: #f9f9f9;
      text-shadow: 2px 2px #222;
      font-family: "open_sans_condensedbold";
      font-size: 10mm;
    }
    #MSG_BODY {
      color: #f9f9f9;
      text-shadow: 2px 2px #222;
      font-family: "open_sans_condensedbold";
      font-size: 10mm;
    }
    #eb {
      position: absolute;
      top: 0;
      left: 0;
      display: none;
      width: 110px;
      height: 31px;
      text-align: center;
      color: #f0f0f0;
      border-width: 1px;
      border-color: #000;
      background: #444;
      font: bold 14pt open_sans_condensedbold;
    }
    #eb2 {
      width: 180px;
      height: 31px;
      margin-top: 10px;
      margin-bottom: 12px;
      text-align: center;
      color: #c4c4c4;
      border-width: 2px;
      border-style: solid;
      border-color: #777;
      outline: 0;
      background: #0e0f11;
      font: bold 14pt open_sans_condensedbold;
    }
    #EDIT_OK,
    #EDIT_CANCEL,
    #CONF_OK,
    #CONF_CANCEL {
      width: 100px;
      height: 30px;
      color: #c4c4c4;
      border: solid 1px #3c6d3e;
      outline: 0;
      text-align: center;
      background: #294a2a;
      font: bold 14pt open_sans_condensedbold;
    }
    .BTN {
      width: 100px;
      height: 36px;
      color: #232323;
      border: solid 1px #eee;
      outline: 0;
      text-align: center;
      background: #d0cdd0;
      text-shadow: 1px 1px #ddd;
      font: bold 14pt open_sans_condensedbold;
    }
    .BTN_SM {
      width: 70px;
      height: 36px;
      outline: 0;
      text-align: center;
      border: solid 1px #3c606d;
      background: #29414a;
      color: #c4c4c4;
      font: bold 14pt open_sans_condensedbold;
    }
    #CONF_OK,
    #EDIT_OK {
      border-color: #3c6d3e;
      background: #294a2a;
    }
    #CONF_CANCEL,
    #EDIT_CANCEL {
      border-color: #6d3c3c;
      background: #4a2929;
    }
    #CONF_LABEL,
    #EDIT_LABEL {
      margin-right: 5px;
      margin-left: 5px;
      font-size: 24px;
    }
    @font-face {
      font-family: "umixled";
      font-weight: normal;
      font-style: normal;
      src: url("fonts/umix_led/umix_led.eot");
      src: url("fonts/umix_led/umix_led.eot?#iefix") format("embedded-opentype"), url("fonts/umix_led/umix_led.woff") format("woff"), url("fonts/umix_led/umix_led.ttf") format("truetype");
    }
    @font-face {
      font-family: "open_sans_condensedbold";
      font-weight: normal;
      font-style: normal;
      src: url("fonts/opensans_condbold/OpenSans-CondBold-webfont.eot");
      src: url("fonts/opensans_condbold/OpenSans-CondBold-webfont.eot?#iefix") format("embedded-opentype"), url("fonts/opensans_condbold/OpenSans-CondBold-webfont.woff") format("woff"),
      url("fonts/opensans_condbold/OpenSans-CondBold-webfont.ttf") format("truetype"), url("fonts/opensans_condbold/OpenSans-CondBold-webfont.svg#open_sans_condensedbold");
    }
    @font-face {
      font-family: "open_sansbold";
      font-weight: normal;
      font-style: normal;
      src: url("fonts/opensans_bold/OpenSans-Bold-webfont.eot");
      src: url("fonts/opensans_bold/OpenSans-Bold-webfont.eot?#iefix") format("embedded-opentype"), url("fonts/opensans_bold/OpenSans-Bold-webfont.woff") format("woff"),
      url("fonts/opensans_bold/OpenSans-Bold-webfont.ttf") format("truetype"), url("fonts/opensans_bold/OpenSans-Bold-webfont.svg#open_sansbold") format("svg");
    }
    .ui-keyboard {
      font-size: 14px;
      text-align: center;
      background: #282828;
      border: 1px solid #484848;
      padding: 4px;
      width: 100%;
      height: auto;
      left: 0;
      top: auto;
      bottom: 0;
      position: fixed;
      white-space: nowrap;
      overflow-x: auto;
      -ms-touch-action: manipulation;
      touch-action: manipulation;
    }
    .ui-keyboard-has-focus {
      z-index: 16001;
    }
    .ui-keyboard-button {
      border: 1px solid #404040;
      padding: 0 0.5em;
      margin: 1px;
      min-width: 3em;
      height: 3em;
      line-height: 3em;
      vertical-align: top;
      font-family: Helvetica, Arial, sans-serif;
      color: #eee;
      text-align: center;
      border-radius: 5px;
      -webkit-box-shadow: 1px 1px 3px 0 rgba(0, 0, 0, 0.5);
      box-shadow: 1px 1px 3px 0 rgba(0, 0, 0, 0.5);
      background: #444;
      background-image: -webkit-linear-gradient(-90deg, #444 0, #333 100%);
      background-image: linear-gradient(-90deg, #444 0, #333 100%);
      cursor: pointer;
      overflow: hidden;
      -moz-user-focus: ignore;
    }
    .ui-keyboard-button:not([disabled]):hover {
      background: #eee;
      background-image: -webkit-linear-gradient(-90deg, #4f4f4f 0, #444 100%);
      background-image: linear-gradient(-90deg, #4f4f4f 0, #444 100%);
    }
    .ui-keyboard-button:not([disabled]):active {
      background: #ddd;
      background-image: -webkit-linear-gradient(-90deg, #555 0, #5f5f5f 100%);
      background-image: linear-gradient(-90deg, #555 0, #5f5f5f 100%);
    }
    .ui-keyboard-button span {
      display: block;
      width: 100%;
      font-size: 1.2em;
      text-align: center;
    }
    .ui-keyboard-actionkey:not(.ui-keyboard-dec):not(.ui-keyboard-combo) {
      min-width: 6em;
    }
    .ui-keyboard-space {
      width: 15em;
    }
    .ui-keyboard-actionkey:not(.ui-keyboard-dec):not(.ui-keyboard-combo) span {
      font-size: 0.8em;
      position: relative;
      top: -1em;
      left: -1.6em;
    }
    .ui-keyboard-placeholder {
      color: #888;
    }
    .ui-keyboard-nokeyboard {
      color: #888;
      border-color: #888;
    }
    .ui-keyboard-spacer {
      display: inline-block;
      width: 1px;
      height: 0;
      cursor: default;
    }
    .ui-keyboard-NBSP span,
    .ui-keyboard-ZWSP span,
    .ui-keyboard-ZWNJ span,
    .ui-keyboard-ZWJ span,
    .ui-keyboard-LRM span,
    .ui-keyboard-RLM span {
      font-size: 0.5em;
      line-height: 1.5em;
      white-space: normal;
    }
    .ui-keyboard-button.ui-keyboard-combo.ui-state-default {
      -webkit-box-shadow: 1px 1px 3px 0 rgba(213, 133, 18, 0.5);
      box-shadow: 1px 1px 3px 0 rgba(213, 133, 18, 0.5);
      border-color: #d58512;
    }
    .ui-keyboard-button.ui-keyboard-combo.ui-state-active {
      -webkit-box-shadow: 1px 1px 3px 0 rgba(38, 154, 188, 0.5);
      box-shadow: 1px 1px 3px 0 rgba(38, 154, 188, 0.5);
      border-color: #269abc;
    }
    button.ui-keyboard-accept.ui-keyboard-valid-input {
      -webkit-box-shadow: 1px 1px 3px 0 rgba(57, 132, 57, 0.5);
      box-shadow: 1px 1px 3px 0 rgba(57, 132, 57, 0.5);
      border-color: #398439;
    }
    button.ui-keyboard-accept.ui-keyboard-valid-input:not([disabled]):hover {
      border-color: #4cae4c;
    }
    button.ui-keyboard-accept.ui-keyboard-invalid-input {
      -webkit-box-shadow: 1px 1px 3px 0 rgba(172, 41, 37, 0.5);
      box-shadow: 1px 1px 3px 0 rgba(172, 41, 37, 0.5);
      border-color: #ac2925;
    }
    button.ui-keyboard-accept.ui-keyboard-invalid-input:not([disabled]):hover {
      border-color: #d43f3a;
    }
    button.ui-keyboard-toggle span {
      width: 0.9em;
      height: 0.9em;
      display: inline-block;
      background-repeat: no-repeat;
      background-position: center center;
      background-size: contain;
      background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMCIgaGVpZ2h0PSIxMCIgZmlsbD0iI2VlZSI+PHBhdGggZD0iTTguNyw0LjRINy41SDUuMHYtMS45YzAtMS40LTEuMS0yLjUtMi41LTIuNWMtMS40LDAtMi41LDEuMS0yLjUsMi41djEuOWgxLjIgdi0xLjljMC0wLjcsMC42LTEuMiwxLjItMS4yczEuMiwwLjYsMS4yLDEuMnYxLjljLTAuNywwLTEuMiwwLjYtMS4yLDEuMlY4LjggYzAsMC43LDAuNiwxLjIsMS4yLDEuMmg1LjBDOS40LDEwLDEwLDkuNCwxMCw4LjhWNS42QzEwLDUuMCw5LjQsNC40LDguOCw0LjR6IE02LjYsNy40djEuMCBjMCwwLjItMC4xLDAuMy0wLjMsMC4zUzYuMCw4LjYsNi4wLDguNFY3LjRjLTAuMi0wLjEtMC4zLTAuMy0wLjMtMC41YzAtMC4zLDAuMy0wLjYsMC42LTAuNiBTNi45LDYuNiw2LjksNi45QzYuOSw3LjEsNi44LDcuMyw2LjYsNy40eiIvPjwvc3ZnPg==");
    }
    button.ui-keyboard-toggle.ui-keyboard-disabled span {
      background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMCIgaGVpZ2h0PSIxMCIgZmlsbD0iI2VlZSI+PHBhdGggZD0iTTcuNCA0LjRWMi41YzAtMS40LTEuMS0yLjUtMi41LTIuNWMtMS40IDAtMi41IDEuMS0yLjUgMi41djEuOSBjLTAuNyAwLTEuMiAwLjUtMS4yIDEuMnYzLjFDMS4zIDkuNCAxLjggMTAgMi41IDEwaDQuOWMwLjcgMCAxLjItMC42IDEuMi0xLjJWNS42IEM4LjcgNC45IDguMSA0LjQgNy40IDQuNHogTTUuMyA3LjR2MS4wYzAgMC4yLTAuMSAwLjMtMC4zIDAuM2MtMC4yIDAtMC4zLTAuMS0wLjMtMC4zVjcuNCBjLTAuMi0wLjEtMC4zLTAuMy0wLjMtMC41YzAtMC4zIDAuMy0wLjYgMC42LTAuNmMwLjMgMCAwLjYgMC4zIDAuNiAwLjYgQzUuNiA3LjEgNS41IDcuMyA1LjMgNy40eiBNNi4yIDQuNEgzLjdWMi41YzAtMC43IDAuNS0xLjIgMS4yLTEuMmMwLjcgMCAxLjIgMC42IDEuMiAxLjIgVjQuNHoiLz48L3N2Zz4=");
    }
    .ui-keyboard.ui-keyboard-disabled button:not(.ui-keyboard-toggle),
    .ui-keyboard.ui-keyboard-disabled input {
      opacity: 0.5;
    }
    .ui-keyboard-overlay {
      position: absolute;
      top: 0;
      left: 0;
      bottom: 0;
      right: 0;
      background: rgba(0, 0, 0, 0.5);
    }
    .ui-keyboard-popup {
      display: inline-block;
      max-width: 22em;
    }
    .ui-keyboard-caret {
      background: #c00;
      width: 1px;
      margin-top: 3px;
    }
    div.ui-keyboard-extender {
      margin-left: 5px;
      margin-right: 10px;
    }
    button.ui-keyboard-extender span {
      width: 0.9em;
      height: 0.9em;
      display: inline-block;
      margin-bottom: 3px;
      background-repeat: no-repeat;
      background-position: center center;
      background-size: contain;
      background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgc3R5bGU9ImZpbGw6I2VlZSI+PGc+PHBhdGggc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6I2VlZSIgZD0iTSAwLjUsNC41IDE1LjUsNC41IDE1LjUsMTUuNSAwLjUsMTUuNSBaIj48L3BhdGg+PHJlY3Qgd2lkdGg9IjIiIGhlaWdodD0iMiIgeD0iMiIgeT0iNiI+PC9yZWN0PjxyZWN0IHdpZHRoPSIyIiBoZWlnaHQ9IjIiIHg9IjUiIHk9IjYiPjwvcmVjdD48cmVjdCB3aWR0aD0iMiIgaGVpZ2h0PSIyIiB4PSI4IiB5PSI2Ij48L3JlY3Q+PHBhdGggZD0ibSAxMSw2IDMsMCAwLDUgLTIsMCAwLC0zIC0xLDAgeiI+PC9wYXRoPjxyZWN0IHdpZHRoPSIyIiBoZWlnaHQ9IjIiIHg9IjEyIiB5PSIxMiI+PC9yZWN0PjxyZWN0IHdpZHRoPSI2IiBoZWlnaHQ9IjIiIHg9IjUiIHk9IjEyIj48L3JlY3Q+PHJlY3Qgd2lkdGg9IjIiIGhlaWdodD0iMiIgeD0iOSIgeT0iOSI+PC9yZWN0PjxyZWN0IHdpZHRoPSIyIiBoZWlnaHQ9IjIiIHg9IjYiIHk9IjkiPjwvcmVjdD48cmVjdCB3aWR0aD0iMiIgaGVpZ2h0PSIyIiB4PSIyIiB5PSIxMiI+PC9yZWN0PjxyZWN0IHdpZHRoPSIzIiBoZWlnaHQ9IjIiIHg9IjIiIHk9IjkiPjwvcmVjdD48L2c+PC9zdmc+");
    }
  </style>
  <script type="text/javascript" src="js/initparams.js"></script>
  <script type="text/javascript">
    var $jscomp = {
      scope: {},
      findInternal: function (a, b, c) {
        a instanceof String && (a = String(a));
        for (var d = a.length, f = 0; f < d; f++) {
          var e = a[f];
          if (b.call(c, e, f, a)) return { i: f, v: e };
        }
        return { i: -1, v: void 0 };
      },
    };
    $jscomp.defineProperty =
      "function" == typeof Object.defineProperties
        ? Object.defineProperty
        : function (a, b, c) {
          if (c.get || c.set) throw new TypeError("ES3 does not support getters and setters.");
          a != Array.prototype && a != Object.prototype && (a[b] = c.value);
        };
    $jscomp.getGlobal = function (a) {
      return "undefined" != typeof window && window === a ? a : "undefined" != typeof global && null != global ? global : a;
    };
    $jscomp.global = $jscomp.getGlobal(this);
    $jscomp.polyfill = function (a, b, c, d) {
      if (b) {
        c = $jscomp.global;
        a = a.split(".");
        for (d = 0; d < a.length - 1; d++) {
          var f = a[d];
          f in c || (c[f] = {});
          c = c[f];
        }
        a = a[a.length - 1];
        d = c[a];
        b = b(d);
        b != d && null != b && $jscomp.defineProperty(c, a, { configurable: !0, writable: !0, value: b });
      }
    };
    $jscomp.polyfill(
      "Array.prototype.find",
      function (a) {
        return a
          ? a
          : function (a, c) {
            return $jscomp.findInternal(this, a, c).v;
          };
      },
      "es6-impl",
      "es3"
    );
    $jscomp.SYMBOL_PREFIX = "jscomp_symbol_";
    $jscomp.initSymbol = function () {
      $jscomp.initSymbol = function () {};
      $jscomp.global.Symbol || ($jscomp.global.Symbol = $jscomp.Symbol);
    };
    $jscomp.symbolCounter_ = 0;
    $jscomp.Symbol = function (a) {
      return $jscomp.SYMBOL_PREFIX + (a || "") + $jscomp.symbolCounter_++;
    };
    $jscomp.initSymbolIterator = function () {
      $jscomp.initSymbol();
      var a = $jscomp.global.Symbol.iterator;
      a || (a = $jscomp.global.Symbol.iterator = $jscomp.global.Symbol("iterator"));
      "function" != typeof Array.prototype[a] &&
      $jscomp.defineProperty(Array.prototype, a, {
        configurable: !0,
        writable: !0,
        value: function () {
          return $jscomp.arrayIterator(this);
        },
      });
      $jscomp.initSymbolIterator = function () {};
    };
    $jscomp.arrayIterator = function (a) {
      var b = 0;
      return $jscomp.iteratorPrototype(function () {
        return b < a.length ? { done: !1, value: a[b++] } : { done: !0 };
      });
    };
    $jscomp.iteratorPrototype = function (a) {
      $jscomp.initSymbolIterator();
      a = { next: a };
      a[$jscomp.global.Symbol.iterator] = function () {
        return this;
      };
      return a;
    };
    $jscomp.array = $jscomp.array || {};
    $jscomp.iteratorFromArray = function (a, b) {
      $jscomp.initSymbolIterator();
      a instanceof String && (a += "");
      var c = 0,
        d = {
          next: function () {
            if (c < a.length) {
              var f = c++;
              return { value: b(f, a[f]), done: !1 };
            }
            d.next = function () {
              return { done: !0, value: void 0 };
            };
            return d.next();
          },
        };
      d[Symbol.iterator] = function () {
        return d;
      };
      return d;
    };
    $jscomp.polyfill(
      "Array.prototype.keys",
      function (a) {
        return a
          ? a
          : function () {
            return $jscomp.iteratorFromArray(this, function (a) {
              return a;
            });
          };
      },
      "es6-impl",
      "es3"
    );
    $jscomp.checkStringArgs = function (a, b, c) {
      if (null == a) throw new TypeError("The 'this' value for String.prototype." + c + " must not be null or undefined");
      if (b instanceof RegExp) throw new TypeError("First argument to String.prototype." + c + " must not be a regular expression");
      return a + "";
    };
    $jscomp.polyfill(
      "String.prototype.startsWith",
      function (a) {
        return a
          ? a
          : function (a, c) {
            var b = $jscomp.checkStringArgs(this, a, "startsWith");
            a += "";
            for (var f = b.length, e = a.length, g = Math.max(0, Math.min(c | 0, b.length)), h = 0; h < e && g < f; ) if (b[g++] != a[h++]) return !1;
            return h >= e;
          };
      },
      "es6-impl",
      "es3"
    );
    $jscomp.polyfill(
      "String.prototype.endsWith",
      function (a) {
        return a
          ? a
          : function (a, c) {
            var b = $jscomp.checkStringArgs(this, a, "endsWith");
            a += "";
            void 0 === c && (c = b.length);
            for (var f = Math.max(0, Math.min(c | 0, b.length)), e = a.length; 0 < e && 0 < f; ) if (b[--f] != a[--e]) return !1;
            return 0 >= e;
          };
      },
      "es6-impl",
      "es3"
    );
    $jscomp.polyfill(
      "Array.prototype.entries",
      function (a) {
        return a
          ? a
          : function () {
            return $jscomp.iteratorFromArray(this, function (a, c) {
              return [a, c];
            });
          };
      },
      "es6-impl",
      "es3"
    );
    $jscomp.polyfill(
      "Array.prototype.values",
      function (a) {
        return a
          ? a
          : function () {
            return $jscomp.iteratorFromArray(this, function (a, c) {
              return c;
            });
          };
      },
      "es6",
      "es3"
    );
    $jscomp.polyfill(
      "Array.prototype.fill",
      function (a) {
        return a
          ? a
          : function (a, c, d) {
            var b = this.length || 0;
            0 > c && (c = Math.max(0, b + c));
            if (null == d || d > b) d = b;
            d = Number(d);
            0 > d && (d = Math.max(0, b + d));
            for (c = Number(c || 0); c < d; c++) this[c] = a;
            return this;
          };
      },
      "es6-impl",
      "es3"
    );
    (function (a, b) {
      function c(a) {
        var b = a.length,
          c = l.type(a);
        return l.isWindow(a) ? !1 : 1 === a.nodeType && b ? !0 : "array" === c || ("function" !== c && (0 === b || ("number" === typeof b && 0 < b && b - 1 in a)));
      }
      function d(a) {
        var b = (R[a] = {});
        l.each(a.match(ra) || [], function (a, c) {
          b[c] = !0;
        });
        return b;
      }
      function f(a, c, d, e) {
        if (l.acceptData(a)) {
          var f = l.expando,
            g = a.nodeType,
            h = g ? l.cache : a,
            t = g ? a[f] : a[f] && f;
          if ((t && h[t] && (e || h[t].data)) || d !== b || "string" !== typeof c) {
            t || (t = g ? (a[f] = fa.pop() || l.guid++) : f);
            h[t] || (h[t] = g ? {} : { toJSON: l.noop });
            if ("object" === typeof c || "function" === typeof c) e ? (h[t] = l.extend(h[t], c)) : (h[t].data = l.extend(h[t].data, c));
            a = h[t];
            e || (a.data || (a.data = {}), (a = a.data));
            d !== b && (a[l.camelCase(c)] = d);
            "string" === typeof c ? ((d = a[c]), null == d && (d = a[l.camelCase(c)])) : (d = a);
            return d;
          }
        }
      }
      function e(a, b, c) {
        if (l.acceptData(a)) {
          var d,
            e,
            f = a.nodeType,
            g = f ? l.cache : a,
            t = f ? a[l.expando] : l.expando;
          if (g[t]) {
            if (b && (d = c ? g[t] : g[t].data)) {
              l.isArray(b) ? (b = b.concat(l.map(b, l.camelCase))) : b in d ? (b = [b]) : ((b = l.camelCase(b)), (b = b in d ? [b] : b.split(" ")));
              for (e = b.length; e--; ) delete d[b[e]];
              if (c ? !h(d) : !l.isEmptyObject(d)) return;
            }
            if (!c && (delete g[t].data, !h(g[t]))) return;
            f ? l.cleanData([a], !0) : l.support.deleteExpando || g != g.window ? delete g[t] : (g[t] = null);
          }
        }
      }
      function g(a, c, d) {
        if (d === b && 1 === a.nodeType)
          if (((d = "data-" + c.replace(da, "-$1").toLowerCase()), (d = a.getAttribute(d)), "string" === typeof d)) {
            try {
              d = "true" === d ? !0 : "false" === d ? !1 : "null" === d ? null : +d + "" === d ? +d : Q.test(d) ? l.parseJSON(d) : d;
            } catch (Ba) {}
            l.data(a, c, d);
          } else d = b;
        return d;
      }
      function h(a) {
        for (var b in a) if (("data" !== b || !l.isEmptyObject(a[b])) && "toJSON" !== b) return !1;
        return !0;
      }
      function k() {
        return !0;
      }
      function m() {
        return !1;
      }
      function p() {
        try {
          return z.activeElement;
        } catch (t) {}
      }
      function q(a, b) {
        do a = a[b];
        while (a && 1 !== a.nodeType);
        return a;
      }
      function r(a, b, c) {
        if (l.isFunction(b))
          return l.grep(a, function (a, d) {
            return !!b.call(a, d, a) !== c;
          });
        if (b.nodeType)
          return l.grep(a, function (a) {
            return (a === b) !== c;
          });
        if ("string" === typeof b) {
          if (Mb.test(b)) return l.filter(b, a, c);
          b = l.filter(b, a);
        }
        return l.grep(a, function (a) {
          return 0 <= l.inArray(a, b) !== c;
        });
      }
      function n(a) {
        var b = qb.split("|");
        a = a.createDocumentFragment();
        if (a.createElement) for (; b.length; ) a.createElement(b.pop());
        return a;
      }
      function u(a, b) {
        return l.nodeName(a, "table") && l.nodeName(1 === b.nodeType ? b : b.firstChild, "tr") ? a.getElementsByTagName("tbody")[0] || a.appendChild(a.ownerDocument.createElement("tbody")) : a;
      }
      function v(a) {
        a.type = (null !== l.find.attr(a, "type")) + "/" + a.type;
        return a;
      }
      function I(a) {
        var b = Nb.exec(a.type);
        b ? (a.type = b[1]) : a.removeAttribute("type");
        return a;
      }
      function Y(a, b) {
        for (var c, d = 0; null != (c = a[d]); d++) l._data(c, "globalEval", !b || l._data(b[d], "globalEval"));
      }
      function O(a, b) {
        if (1 === b.nodeType && l.hasData(a)) {
          var c, d, e;
          d = l._data(a);
          var f = l._data(b, d),
            g = d.events;
          if (g) for (c in (delete f.handle, (f.events = {}), g)) for (d = 0, e = g[c].length; d < e; d++) l.event.add(b, c, g[c][d]);
          f.data && (f.data = l.extend({}, f.data));
        }
      }
      function w(a, c) {
        var d,
          e,
          f = 0,
          g = typeof a.getElementsByTagName !== M ? a.getElementsByTagName(c || "*") : typeof a.querySelectorAll !== M ? a.querySelectorAll(c || "*") : b;
        if (!g) for (g = [], d = a.childNodes || a; null != (e = d[f]); f++) !c || l.nodeName(e, c) ? g.push(e) : l.merge(g, w(e, c));
        return c === b || (c && l.nodeName(a, c)) ? l.merge([a], g) : g;
      }
      function F(a) {
        gb.test(a.type) && (a.defaultChecked = a.checked);
      }
      function J(a, b) {
        if (b in a) return b;
        for (var c = b.charAt(0).toUpperCase() + b.slice(1), d = b, e = rb.length; e--; ) if (((b = rb[e] + c), b in a)) return b;
        return d;
      }
      function B(a, b) {
        a = b || a;
        return "none" === l.css(a, "display") || !l.contains(a.ownerDocument, a);
      }
      function E(a, b) {
        for (var c, d, e, f = [], g = 0, h = a.length; g < h; g++)
          (d = a[g]),
          d.style &&
          ((f[g] = l._data(d, "olddisplay")),
            (c = d.style.display),
            b
              ? (f[g] || "none" !== c || (d.style.display = ""), "" === d.style.display && B(d) && (f[g] = l._data(d, "olddisplay", la(d.nodeName))))
              : f[g] || ((e = B(d)), ((c && "none" !== c) || !e) && l._data(d, "olddisplay", e ? c : l.css(d, "display"))));
        for (g = 0; g < h; g++) (d = a[g]), !d.style || (b && "none" !== d.style.display && "" !== d.style.display) || (d.style.display = b ? f[g] || "" : "none");
        return a;
      }
      function oa(a, b, c) {
        return (a = Ob.exec(b)) ? Math.max(0, a[1] - (c || 0)) + (a[2] || "px") : b;
      }
      function V(a, b, c, d, e) {
        b = c === (d ? "border" : "content") ? 4 : "width" === b ? 1 : 0;
        for (var f = 0; 4 > b; b += 2)
          "margin" === c && (f += l.css(a, c + Ka[b], !0, e)),
            d
              ? ("content" === c && (f -= l.css(a, "padding" + Ka[b], !0, e)), "margin" !== c && (f -= l.css(a, "border" + Ka[b] + "Width", !0, e)))
              : ((f += l.css(a, "padding" + Ka[b], !0, e)), "padding" !== c && (f += l.css(a, "border" + Ka[b] + "Width", !0, e)));
        return f;
      }
      function sa(a, b, c) {
        var d = !0,
          e = "width" === b ? a.offsetWidth : a.offsetHeight,
          f = La(a),
          g = l.support.boxSizing && "border-box" === l.css(a, "boxSizing", !1, f);
        if (0 >= e || null == e) {
          e = Ma(a, b, f);
          if (0 > e || null == e) e = a.style[b];
          if (ab.test(e)) return e;
          d = g && (l.support.boxSizingReliable || e === a.style[b]);
          e = parseFloat(e) || 0;
        }
        return e + V(a, b, c || (g ? "border" : "content"), d, f) + "px";
      }
      function la(a) {
        var b = z,
          c = sb[a];
        c ||
        ((c = ha(a, b)),
        ("none" !== c && c) ||
        ((Wa = (Wa || l("<iframe frameborder='0' width='0' height='0'/>").css("cssText", "display:block !important")).appendTo(b.documentElement)),
          (b = (Wa[0].contentWindow || Wa[0].contentDocument).document),
          b.write("<!doctype html><html><body>"),
          b.close(),
          (c = ha(a, b)),
          Wa.detach()),
          (sb[a] = c));
        return c;
      }
      function ha(a, b) {
        var c = l(b.createElement(a)).appendTo(b.body),
          d = l.css(c[0], "display");
        c.remove();
        return d;
      }
      function ma(a, b, c, d) {
        var e;
        if (l.isArray(b))
          l.each(b, function (b, e) {
            c || Pb.test(a) ? d(a, e) : ma(a + "[" + ("object" === typeof e ? b : "") + "]", e, c, d);
          });
        else if (c || "object" !== l.type(b)) d(a, b);
        else for (e in b) ma(a + "[" + e + "]", b[e], c, d);
      }
      function S(a) {
        return function (b, c) {
          "string" !== typeof b && ((c = b), (b = "*"));
          var d,
            e = 0,
            f = b.toLowerCase().match(ra) || [];
          if (l.isFunction(c)) for (; (d = f[e++]); ) "+" === d[0] ? ((d = d.slice(1) || "*"), (a[d] = a[d] || []).unshift(c)) : (a[d] = a[d] || []).push(c);
        };
      }
      function N(a, b, c, d) {
        function e(h) {
          var t;
          f[h] = !0;
          l.each(a[h] || [], function (a, h) {
            var k = h(b, c, d);
            if ("string" === typeof k && !g && !f[k]) return b.dataTypes.unshift(k), e(k), !1;
            if (g) return !(t = k);
          });
          return t;
        }
        var f = {},
          g = a === hb;
        return e(b.dataTypes[0]) || (!f["*"] && e("*"));
      }
      function C(a, c) {
        var d,
          e,
          f = l.ajaxSettings.flatOptions || {};
        for (e in c) c[e] !== b && ((f[e] ? a : d || (d = {}))[e] = c[e]);
        d && l.extend(!0, a, d);
        return a;
      }
      function K() {
        try {
          return new a.XMLHttpRequest();
        } catch (t) {}
      }
      function P() {
        setTimeout(function () {
          Sa = b;
        });
        return (Sa = l.now());
      }
      function x(a, b, c) {
        for (var d, e = (Xa[b] || []).concat(Xa["*"]), f = 0, g = e.length; f < g; f++) if ((d = e[f].call(c, b, a))) return d;
      }
      function A(a, b, c) {
        var d,
          e = 0,
          f = bb.length,
          g = l.Deferred().always(function () {
            delete h.elem;
          }),
          h = function () {
            if (d) return !1;
            for (var b = Sa || P(), b = Math.max(0, t.startTime + t.duration - b), c = 1 - (b / t.duration || 0), e = 0, f = t.tweens.length; e < f; e++) t.tweens[e].run(c);
            g.notifyWith(a, [t, c, b]);
            if (1 > c && f) return b;
            g.resolveWith(a, [t]);
            return !1;
          },
          t = g.promise({
            elem: a,
            props: l.extend({}, b),
            opts: l.extend(!0, { specialEasing: {} }, c),
            originalProperties: b,
            originalOptions: c,
            startTime: Sa || P(),
            duration: c.duration,
            tweens: [],
            createTween: function (b, c) {
              var d = l.Tween(a, t.opts, b, c, t.opts.specialEasing[b] || t.opts.easing);
              t.tweens.push(d);
              return d;
            },
            stop: function (b) {
              var c = 0,
                e = b ? t.tweens.length : 0;
              if (d) return this;
              for (d = !0; c < e; c++) t.tweens[c].run(1);
              b ? g.resolveWith(a, [t, b]) : g.rejectWith(a, [t, b]);
              return this;
            },
          });
        c = t.props;
        for (T(c, t.opts.specialEasing); e < f; e++) if ((b = bb[e].call(t, a, c, t.opts))) return b;
        l.map(c, x, t);
        l.isFunction(t.opts.start) && t.opts.start.call(a, t);
        l.fx.timer(l.extend(h, { elem: a, anim: t, queue: t.opts.queue }));
        return t.progress(t.opts.progress).done(t.opts.done, t.opts.complete).fail(t.opts.fail).always(t.opts.always);
      }
      function T(a, b) {
        var c, d, e, f, g;
        for (c in a)
          if (((d = l.camelCase(c)), (e = b[d]), (f = a[c]), l.isArray(f) && ((e = f[1]), (f = a[c] = f[0])), c !== d && ((a[d] = f), delete a[c]), (g = l.cssHooks[d]) && "expand" in g))
            for (c in ((f = g.expand(f)), delete a[d], f)) c in a || ((a[c] = f[c]), (b[c] = e));
          else b[d] = e;
      }
      function D(a, b, c, d, e) {
        return new D.prototype.init(a, b, c, d, e);
      }
      function ga(a, b) {
        var c,
          d = { height: a },
          e = 0;
        for (b = b ? 1 : 0; 4 > e; e += 2 - b) (c = Ka[e]), (d["margin" + c] = d["padding" + c] = a);
        b && (d.opacity = d.width = a);
        return d;
      }
      function aa(a) {
        return l.isWindow(a) ? a : 9 === a.nodeType ? a.defaultView || a.parentWindow : !1;
      }
      var ia,
        Ca,
        M = typeof b,
        ua = a.location,
        z = a.document,
        ba = z.documentElement,
        ca = a.jQuery,
        ea = a.$,
        W = {},
        fa = [],
        Na = fa.concat,
        wa = fa.push,
        pa = fa.slice,
        Oa = fa.indexOf,
        Fa = W.toString,
        X = W.hasOwnProperty,
        ja = "1.10.2".trim,
        l = function (a, b) {
          return new l.fn.init(a, b, Ca);
        },
        Aa = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,
        ra = /\S+/g,
        Pa = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
        xa = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,
        Da = /^<(\w+)\s*\/?>(?:<\/\1>|)$/,
        Ha = /^[\],:{}\s]*$/,
        H = /(?:^|:|,)(?:\s*\[)+/g,
        ta = /\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,
        Z = /"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,
        ya = /^-ms-/,
        ka = /-([\da-z])/gi,
        va = function (a, b) {
          return b.toUpperCase();
        },
        L = function (a) {
          if (z.addEventListener || "load" === a.type || "complete" === z.readyState) y(), l.ready();
        },
        y = function () {
          z.addEventListener ? (z.removeEventListener("DOMContentLoaded", L, !1), a.removeEventListener("load", L, !1)) : (z.detachEvent("onreadystatechange", L), a.detachEvent("onload", L));
        };
      l.fn = l.prototype = {
        jquery: "1.10.2",
        constructor: l,
        init: function (a, c, d) {
          var e;
          if (!a) return this;
          if ("string" === typeof a) {
            e = "<" === a.charAt(0) && ">" === a.charAt(a.length - 1) && 3 <= a.length ? [null, a, null] : xa.exec(a);
            if (!e || (!e[1] && c)) return !c || c.jquery ? (c || d).find(a) : this.constructor(c).find(a);
            if (e[1]) {
              if (((c = c instanceof l ? c[0] : c), l.merge(this, l.parseHTML(e[1], c && c.nodeType ? c.ownerDocument || c : z, !0)), Da.test(e[1]) && l.isPlainObject(c)))
                for (e in c)
                  if (l.isFunction(this[e])) this[e](c[e]);
                  else this.attr(e, c[e]);
            } else {
              if ((c = z.getElementById(e[2])) && c.parentNode) {
                if (c.id !== e[2]) return d.find(a);
                this.length = 1;
                this[0] = c;
              }
              this.context = z;
              this.selector = a;
            }
            return this;
          }
          if (a.nodeType) return (this.context = this[0] = a), (this.length = 1), this;
          if (l.isFunction(a)) return d.ready(a);
          a.selector !== b && ((this.selector = a.selector), (this.context = a.context));
          return l.makeArray(a, this);
        },
        selector: "",
        length: 0,
        toArray: function () {
          return pa.call(this);
        },
        get: function (a) {
          return null == a ? this.toArray() : 0 > a ? this[this.length + a] : this[a];
        },
        pushStack: function (a) {
          a = l.merge(this.constructor(), a);
          a.prevObject = this;
          a.context = this.context;
          return a;
        },
        each: function (a, b) {
          return l.each(this, a, b);
        },
        ready: function (a) {
          l.ready.promise().done(a);
          return this;
        },
        slice: function () {
          return this.pushStack(pa.apply(this, arguments));
        },
        first: function () {
          return this.eq(0);
        },
        last: function () {
          return this.eq(-1);
        },
        eq: function (a) {
          var b = this.length;
          a = +a + (0 > a ? b : 0);
          return this.pushStack(0 <= a && a < b ? [this[a]] : []);
        },
        map: function (a) {
          return this.pushStack(
            l.map(this, function (b, c) {
              return a.call(b, c, b);
            })
          );
        },
        end: function () {
          return this.prevObject || this.constructor(null);
        },
        push: wa,
        sort: [].sort,
        splice: [].splice,
      };
      l.fn.init.prototype = l.fn;
      l.extend = l.fn.extend = function () {
        var a,
          c,
          d,
          e,
          f,
          g = arguments[0] || {},
          h = 1,
          k = arguments.length,
          m = !1;
        "boolean" === typeof g && ((m = g), (g = arguments[1] || {}), (h = 2));
        "object" === typeof g || l.isFunction(g) || (g = {});
        k === h && ((g = this), --h);
        for (; h < k; h++)
          if (null != (f = arguments[h]))
            for (e in f)
              (a = g[e]),
                (d = f[e]),
              g !== d &&
              (m && d && (l.isPlainObject(d) || (c = l.isArray(d)))
                ? (c ? ((c = !1), (a = a && l.isArray(a) ? a : [])) : (a = a && l.isPlainObject(a) ? a : {}), (g[e] = l.extend(m, a, d)))
                : d !== b && (g[e] = d));
        return g;
      };
      l.extend({
        expando: "jQuery" + ("1.10.2" + Math.random()).replace(/\D/g, ""),
        noConflict: function (b) {
          a.$ === l && (a.$ = ea);
          b && a.jQuery === l && (a.jQuery = ca);
          return l;
        },
        isReady: !1,
        readyWait: 1,
        holdReady: function (a) {
          a ? l.readyWait++ : l.ready(!0);
        },
        ready: function (a) {
          if (!0 === a ? !--l.readyWait : !l.isReady) {
            if (!z.body) return setTimeout(l.ready);
            l.isReady = !0;
            (!0 !== a && 0 < --l.readyWait) || (ia.resolveWith(z, [l]), l.fn.trigger && l(z).trigger("ready").off("ready"));
          }
        },
        isFunction: function (a) {
          return "function" === l.type(a);
        },
        isArray:
          Array.isArray ||
          function (a) {
            return "array" === l.type(a);
          },
        isWindow: function (a) {
          return null != a && a == a.window;
        },
        isNumeric: function (a) {
          return !isNaN(parseFloat(a)) && isFinite(a);
        },
        type: function (a) {
          return null == a ? String(a) : "object" === typeof a || "function" === typeof a ? W[Fa.call(a)] || "object" : typeof a;
        },
        isPlainObject: function (a) {
          var c;
          if (!a || "object" !== l.type(a) || a.nodeType || l.isWindow(a)) return !1;
          try {
            if (a.constructor && !X.call(a, "constructor") && !X.call(a.constructor.prototype, "isPrototypeOf")) return !1;
          } catch (na) {
            return !1;
          }
          if (l.support.ownLast) for (c in a) return X.call(a, c);
          for (c in a);
          return c === b || X.call(a, c);
        },
        isEmptyObject: function (a) {
          for (var b in a) return !1;
          return !0;
        },
        error: function (a) {
          throw Error(a);
        },
        parseHTML: function (a, b, c) {
          if (!a || "string" !== typeof a) return null;
          "boolean" === typeof b && ((c = b), (b = !1));
          b = b || z;
          var d = Da.exec(a);
          c = !c && [];
          if (d) return [b.createElement(d[1])];
          d = l.buildFragment([a], b, c);
          c && l(c).remove();
          return l.merge([], d.childNodes);
        },
        parseJSON: function (b) {
          if (a.JSON && a.JSON.parse) return a.JSON.parse(b);
          if (null === b) return b;
          if ("string" === typeof b && (b = l.trim(b)) && Ha.test(b.replace(ta, "@").replace(Z, "]").replace(H, ""))) return new Function("return " + b)();
          l.error("Invalid JSON: " + b);
        },
        parseXML: function (c) {
          var d, e;
          if (!c || "string" !== typeof c) return null;
          try {
            a.DOMParser ? ((e = new DOMParser()), (d = e.parseFromString(c, "text/xml"))) : ((d = new ActiveXObject("Microsoft.XMLDOM")), (d.async = "false"), d.loadXML(c));
          } catch (Ba) {
            d = b;
          }
          (d && d.documentElement && !d.getElementsByTagName("parsererror").length) || l.error("Invalid XML: " + c);
          return d;
        },
        noop: function () {},
        globalEval: function (b) {
          b &&
          l.trim(b) &&
          (
            a.execScript ||
            function (b) {
              a.eval.call(a, b);
            }
          )(b);
        },
        camelCase: function (a) {
          return a.replace(ya, "ms-").replace(ka, va);
        },
        nodeName: function (a, b) {
          return a.nodeName && a.nodeName.toLowerCase() === b.toLowerCase();
        },
        each: function (a, b, d) {
          var e,
            f = 0,
            g = a.length;
          e = c(a);
          if (d)
            if (e) for (; f < g && ((e = b.apply(a[f], d)), !1 !== e); f++);
            else
              for (f in a) {
                if (((e = b.apply(a[f], d)), !1 === e)) break;
              }
          else if (e) for (; f < g && ((e = b.call(a[f], f, a[f])), !1 !== e); f++);
          else for (f in a) if (((e = b.call(a[f], f, a[f])), !1 === e)) break;
          return a;
        },
        trim:
          ja && !ja.call("﻿ ")
            ? function (a) {
              return null == a ? "" : ja.call(a);
            }
            : function (a) {
              return null == a ? "" : (a + "").replace(Pa, "");
            },
        makeArray: function (a, b) {
          var d = b || [];
          null != a && (c(Object(a)) ? l.merge(d, "string" === typeof a ? [a] : a) : wa.call(d, a));
          return d;
        },
        inArray: function (a, b, c) {
          var d;
          if (b) {
            if (Oa) return Oa.call(b, a, c);
            d = b.length;
            for (c = c ? (0 > c ? Math.max(0, d + c) : c) : 0; c < d; c++) if (c in b && b[c] === a) return c;
          }
          return -1;
        },
        merge: function (a, c) {
          var d = c.length,
            e = a.length,
            f = 0;
          if ("number" === typeof d) for (; f < d; f++) a[e++] = c[f];
          else for (; c[f] !== b; ) a[e++] = c[f++];
          a.length = e;
          return a;
        },
        grep: function (a, b, c) {
          var d,
            e = [],
            f = 0,
            g = a.length;
          for (c = !!c; f < g; f++) (d = !!b(a[f], f)), c !== d && e.push(a[f]);
          return e;
        },
        map: function (a, b, d) {
          var e,
            f = 0,
            g = a.length,
            h = [];
          if (c(a)) for (; f < g; f++) (e = b(a[f], f, d)), null != e && (h[h.length] = e);
          else for (f in a) (e = b(a[f], f, d)), null != e && (h[h.length] = e);
          return Na.apply([], h);
        },
        guid: 1,
        proxy: function (a, c) {
          var d, e;
          "string" === typeof c && ((e = a[c]), (c = a), (a = e));
          if (!l.isFunction(a)) return b;
          d = pa.call(arguments, 2);
          e = function () {
            return a.apply(c || this, d.concat(pa.call(arguments)));
          };
          e.guid = a.guid = a.guid || l.guid++;
          return e;
        },
        access: function (a, c, d, e, f, g, h) {
          var k = 0,
            t = a.length,
            m = null == d;
          if ("object" === l.type(d)) for (k in ((f = !0), d)) l.access(a, c, k, d[k], !0, g, h);
          else if (
            e !== b &&
            ((f = !0),
            l.isFunction(e) || (h = !0),
            m &&
            (h
              ? (c.call(a, e), (c = null))
              : ((m = c),
                (c = function (a, b, c) {
                  return m.call(l(a), c);
                }))),
              c)
          )
            for (; k < t; k++) c(a[k], d, h ? e : e.call(a[k], k, c(a[k], d)));
          return f ? a : m ? c.call(a) : t ? c(a[0], d) : g;
        },
        now: function () {
          return new Date().getTime();
        },
        swap: function (a, b, c, d) {
          var e,
            f = {};
          for (e in b) (f[e] = a.style[e]), (a.style[e] = b[e]);
          c = c.apply(a, d || []);
          for (e in b) a.style[e] = f[e];
          return c;
        },
      });
      l.ready.promise = function (b) {
        if (!ia)
          if (((ia = l.Deferred()), "complete" === z.readyState)) setTimeout(l.ready);
          else if (z.addEventListener) z.addEventListener("DOMContentLoaded", L, !1), a.addEventListener("load", L, !1);
          else {
            z.attachEvent("onreadystatechange", L);
            a.attachEvent("onload", L);
            var c = !1;
            try {
              c = null == a.frameElement && z.documentElement;
            } catch (na) {}
            c &&
            c.doScroll &&
            (function Ba() {
              if (!l.isReady) {
                try {
                  c.doScroll("left");
                } catch (fb) {
                  return setTimeout(Ba, 50);
                }
                y();
                l.ready();
              }
            })();
          }
        return ia.promise(b);
      };
      l.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function (a, b) {
        W["[object " + b + "]"] = b.toLowerCase();
      });
      Ca = l(z);
      (function (a, b) {
        function c(a, b, c, d) {
          var e, f, g, h, k;
          (b ? b.ownerDocument || b : O) !== w && D(b);
          b = b || w;
          c = c || [];
          if (!a || "string" !== typeof a) return c;
          if (1 !== (h = b.nodeType) && 9 !== h) return [];
          if (K && !d) {
            if ((e = ib.exec(a)))
              if ((g = e[1]))
                if (9 === h)
                  if ((f = b.getElementById(g)) && f.parentNode) {
                    if (f.id === g) return c.push(f), c;
                  } else return c;
                else {
                  if (b.ownerDocument && (f = b.ownerDocument.getElementById(g)) && P(b, f) && f.id === g) return c.push(f), c;
                }
              else {
                if (e[2]) return ia.apply(c, b.getElementsByTagName(a)), c;
                if ((g = e[3]) && y.getElementsByClassName && b.getElementsByClassName) return ia.apply(c, b.getElementsByClassName(g)), c;
              }
            if (y.qsa && (!qa || !qa.test(a))) {
              f = e = U;
              g = b;
              k = 9 === h && a;
              if (1 === h && "object" !== b.nodeName.toLowerCase()) {
                h = G(a);
                (e = b.getAttribute("id")) ? (f = e.replace(X, "\\$&")) : b.setAttribute("id", f);
                f = "[id='" + f + "'] ";
                for (g = h.length; g--; ) h[g] = f + q(h[g]);
                g = (ua.test(a) && b.parentNode) || b;
                k = h.join(",");
              }
              if (k)
                try {
                  return ia.apply(c, g.querySelectorAll(k)), c;
                } catch (uc) {
                } finally {
                  e || b.removeAttribute("id");
                }
            }
          }
          var t;
          a: {
            a = a.replace(Ua, "$1");
            f = G(a);
            if (!d && 1 === f.length) {
              e = f[0] = f[0].slice(0);
              if (2 < e.length && "ID" === (t = e[0]).type && y.getById && 9 === b.nodeType && K && A.relative[e[1].type]) {
                b = (A.find.ID(t.matches[0].replace(ca, W), b) || [])[0];
                if (!b) {
                  t = c;
                  break a;
                }
                a = a.slice(e.shift().value.length);
              }
              for (h = Ia.needsContext.test(a) ? 0 : e.length; h--; ) {
                t = e[h];
                if (A.relative[(g = t.type)]) break;
                if ((g = A.find[g]))
                  if ((d = g(t.matches[0].replace(ca, W), (ua.test(e[0].type) && b.parentNode) || b))) {
                    e.splice(h, 1);
                    a = d.length && q(e);
                    if (!a) {
                      ia.apply(c, d);
                      t = c;
                      break a;
                    }
                    break;
                  }
              }
            }
            Q(a, f)(d, b, !K, c, ua.test(a));
            t = c;
          }
          return t;
        }
        function d() {
          function a(c, d) {
            b.push((c += " ")) > A.cacheLength && delete a[b.shift()];
            return (a[c] = d);
          }
          var b = [];
          return a;
        }
        function e(a) {
          a[U] = !0;
          return a;
        }
        function f(a) {
          var b = w.createElement("div");
          try {
            return !!a(b);
          } catch (sc) {
            return !1;
          } finally {
            b.parentNode && b.parentNode.removeChild(b);
          }
        }
        function g(a, b) {
          for (var c = a.split("|"), d = a.length; d--; ) A.attrHandle[c[d]] = b;
        }
        function h(a, b) {
          var c = b && a,
            d = c && 1 === a.nodeType && 1 === b.nodeType && (~b.sourceIndex || -2147483648) - (~a.sourceIndex || -2147483648);
          if (d) return d;
          if (c) for (; (c = c.nextSibling); ) if (c === b) return -1;
          return a ? 1 : -1;
        }
        function k(a) {
          return function (b) {
            return "input" === b.nodeName.toLowerCase() && b.type === a;
          };
        }
        function t(a) {
          return function (b) {
            var c = b.nodeName.toLowerCase();
            return ("input" === c || "button" === c) && b.type === a;
          };
        }
        function m(a) {
          return e(function (b) {
            b = +b;
            return e(function (c, d) {
              for (var e, f = a([], c.length, b), g = f.length; g--; ) c[(e = f[g])] && (c[e] = !(d[e] = c[e]));
            });
          });
        }
        function p() {}
        function G(a, b) {
          var d, e, f, g, h, k, t;
          if ((h = B[a + " "])) return b ? 0 : h.slice(0);
          h = a;
          k = [];
          for (t = A.preFilter; h; ) {
            if (!d || (e = Za.exec(h))) e && (h = h.slice(e[0].length) || h), k.push((f = []));
            d = !1;
            if ((e = N.exec(h))) (d = e.shift()), f.push({ value: d, type: e[0].replace(Ua, " ") }), (h = h.slice(d.length));
            for (g in A.filter) !(e = Ia[g].exec(h)) || (t[g] && !(e = t[g](e))) || ((d = e.shift()), f.push({ value: d, type: g, matches: e }), (h = h.slice(d.length)));
            if (!d) break;
          }
          return b ? h.length : h ? c.error(a) : B(a, k).slice(0);
        }
        function q(a) {
          for (var b = 0, c = a.length, d = ""; b < c; b++) d += a[b].value;
          return d;
        }
        function n(a, b, c) {
          var d = b.dir,
            e = c && "parentNode" === d,
            f = ga++;
          return b.first
            ? function (b, c, f) {
              for (; (b = b[d]); ) if (1 === b.nodeType || e) return a(b, c, f);
            }
            : function (b, c, g) {
              var h,
                k,
                t,
                m = ya + " " + f;
              if (g)
                for (; (b = b[d]); ) {
                  if ((1 === b.nodeType || e) && a(b, c, g)) return !0;
                }
              else
                for (; (b = b[d]); )
                  if (1 === b.nodeType || e)
                    if (((t = b[U] || (b[U] = {})), (k = t[d]) && k[0] === m)) {
                      if (!0 === (h = k[1]) || h === v) return !0 === h;
                    } else if (((k = t[d] = [m]), (k[1] = a(b, c, g) || v), !0 === k[1])) return !0;
            };
        }
        function H(a) {
          return 1 < a.length
            ? function (b, c, d) {
              for (var e = a.length; e--; ) if (!a[e](b, c, d)) return !1;
              return !0;
            }
            : a[0];
        }
        function r(a, b, c, d, e) {
          for (var f, g = [], h = 0, k = a.length, t = null != b; h < k; h++) if ((f = a[h])) if (!c || c(f, d, e)) g.push(f), t && b.push(h);
          return g;
        }
        function L(a, b, d, f, g, h) {
          f && !f[U] && (f = L(f));
          g && !g[U] && (g = L(g, h));
          return e(function (e, h, k, t) {
            var m,
              l,
              p = [],
              G = [],
              na = h.length,
              q;
            if (!(q = e)) {
              q = b || "*";
              for (var n = k.nodeType ? [k] : k, H = [], Ba = 0, L = n.length; Ba < L; Ba++) c(q, n[Ba], H);
              q = H;
            }
            q = !a || (!e && b) ? q : r(q, p, a, k, t);
            n = d ? (g || (e ? a : na || f) ? [] : h) : q;
            d && d(q, n, k, t);
            if (f) for (m = r(n, G), f(m, [], k, t), k = m.length; k--; ) if ((l = m[k])) n[G[k]] = !(q[G[k]] = l);
            if (e) {
              if (g || a) {
                if (g) {
                  m = [];
                  for (k = n.length; k--; ) (l = n[k]) && m.push((q[k] = l));
                  g(null, (n = []), m, t);
                }
                for (k = n.length; k--; ) (l = n[k]) && -1 < (m = g ? Ga.call(e, l) : p[k]) && (e[m] = !(h[m] = l));
              }
            } else (n = r(n === h ? n.splice(na, n.length) : n)), g ? g(null, h, n, t) : ia.apply(h, n);
          });
        }
        function ta(a) {
          var b,
            c,
            d,
            e = a.length,
            f = A.relative[a[0].type];
          c = f || A.relative[" "];
          for (
            var g = f ? 1 : 0,
              h = n(
                function (a) {
                  return a === b;
                },
                c,
                !0
              ),
              k = n(
                function (a) {
                  return -1 < Ga.call(b, a);
                },
                c,
                !0
              ),
              t = [
                function (a, c, d) {
                  return (!f && (d || c !== I)) || ((b = c).nodeType ? h(a, c, d) : k(a, c, d));
                },
              ];
            g < e;
            g++
          )
            if ((c = A.relative[a[g].type])) t = [n(H(t), c)];
            else {
              c = A.filter[a[g].type].apply(null, a[g].matches);
              if (c[U]) {
                for (d = ++g; d < e && !A.relative[a[d].type]; d++);
                return L(1 < g && H(t), 1 < g && q(a.slice(0, g - 1).concat({ value: " " === a[g - 2].type ? "*" : "" })).replace(Ua, "$1"), c, g < d && ta(a.slice(g, d)), d < e && ta((a = a.slice(d))), d < e && q(a));
              }
              t.push(c);
            }
          return H(t);
        }
        function u(a, b) {
          var d = 0,
            f = 0 < b.length,
            g = 0 < a.length,
            h = function (e, h, k, t, m) {
              var l,
                p,
                G = [],
                na = 0,
                q = "0",
                n = e && [],
                H = null != m,
                Ba = I,
                L = e || (g && A.find.TAG("*", (m && h.parentNode) || h)),
                fb = (ya += null == Ba ? 1 : Math.random() || 0.1);
              H && ((I = h !== w && h), (v = d));
              for (; null != (m = L[q]); q++) {
                if (g && m) {
                  for (l = 0; (p = a[l++]); )
                    if (p(m, h, k)) {
                      t.push(m);
                      break;
                    }
                  H && ((ya = fb), (v = ++d));
                }
                f && ((m = !p && m) && na--, e && n.push(m));
              }
              na += q;
              if (f && q !== na) {
                for (l = 0; (p = b[l++]); ) p(n, G, h, k);
                if (e) {
                  if (0 < na) for (; q--; ) n[q] || G[q] || (G[q] = M.call(t));
                  G = r(G);
                }
                ia.apply(t, G);
                H && !e && 0 < G.length && 1 < na + b.length && c.uniqueSort(t);
              }
              H && ((ya = fb), (I = Ba));
              return n;
            };
          return f ? e(h) : h;
        }
        var R,
          y,
          v,
          A,
          Z,
          C,
          Q,
          I,
          T,
          D,
          w,
          da,
          K,
          qa,
          Y,
          x,
          P,
          U = "sizzle" + -1 * new Date(),
          O = a.document,
          ya = 0,
          ga = 0,
          F = d(),
          B = d(),
          db = d(),
          aa = !1,
          Qa = function (a, b) {
            a === b && (aa = !0);
            return 0;
          },
          z = typeof b,
          J = {}.hasOwnProperty,
          ka = [],
          M = ka.pop,
          Ca = ka.push,
          ia = ka.push,
          E = ka.slice,
          Ga =
            ka.indexOf ||
            function (a) {
              for (var b = 0, c = this.length; b < c; b++) if (this[b] === a) return b;
              return -1;
            },
          Ea = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w", "w#"),
          Ya = "\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|(" + Ea + ")|)|)[\\x20\\t\\r\\n\\f]*\\]",
          va = ":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|" + Ya.replace(3, 8) + ")*)|.*)\\)|)",
          Ua = RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$", "g"),
          Za = /^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,
          N = /^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,
          ua = /[\x20\t\r\n\f]*[+~]/,
          ea = RegExp("=[\\x20\\t\\r\\n\\f]*([^\\]'\"]*)[\\x20\\t\\r\\n\\f]*\\]", "g"),
          Ta = new RegExp(va),
          ba = new RegExp("^" + Ea + "$"),
          Ia = {
            ID: /^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,
            CLASS: /^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,
            TAG: new RegExp("^(" + "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w", "w*") + ")"),
            ATTR: new RegExp("^" + Ya),
            PSEUDO: new RegExp("^" + va),
            CHILD: /^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,
            bool: /^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,
            needsContext: /^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i,
          },
          S = /^[^{]+\{\s*\[native \w/,
          ib = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,
          fa = /^(?:input|select|textarea|button)$/i,
          V = /^h\d$/i,
          X = /'|\\/g,
          ca = RegExp("\\\\([\\da-f]{1,6}[\\x20\\t\\r\\n\\f]?|([\\x20\\t\\r\\n\\f])|.)", "ig"),
          W = function (a, b, c) {
            a = "0x" + b - 65536;
            return a !== a || c ? b : 0 > a ? String.fromCharCode(a + 65536) : String.fromCharCode((a >> 10) | 55296, (a & 1023) | 56320);
          };
        try {
          ia.apply((ka = E.call(O.childNodes)), O.childNodes), ka[O.childNodes.length].nodeType;
        } catch (rc) {
          ia = {
            apply: ka.length
              ? function (a, b) {
                Ca.apply(a, E.call(b));
              }
              : function (a, b) {
                for (var c = a.length, d = 0; (a[c++] = b[d++]); );
                a.length = c - 1;
              },
          };
        }
        C = c.isXML = function (a) {
          return (a = a && (a.ownerDocument || a).documentElement) ? "HTML" !== a.nodeName : !1;
        };
        y = c.support = {};
        D = c.setDocument = function (a) {
          var b = a ? a.ownerDocument || a : O;
          a = b.defaultView;
          if (b === w || 9 !== b.nodeType || !b.documentElement) return w;
          w = b;
          da = b.documentElement;
          K = !C(b);
          a &&
          a.attachEvent &&
          a !== a.top &&
          a.attachEvent("onbeforeunload", function () {
            D();
          });
          y.attributes = f(function (a) {
            a.className = "i";
            return !a.getAttribute("className");
          });
          y.getElementsByTagName = f(function (a) {
            a.appendChild(b.createComment(""));
            return !a.getElementsByTagName("*").length;
          });
          y.getElementsByClassName = f(function (a) {
            a.innerHTML = "<div class='a'></div><div class='a i'></div>";
            a.firstChild.className = "i";
            return 2 === a.getElementsByClassName("i").length;
          });
          y.getById = f(function (a) {
            da.appendChild(a).id = U;
            return !b.getElementsByName || !b.getElementsByName(U).length;
          });
          y.getById
            ? ((A.find.ID = function (a, b) {
              if (typeof b.getElementById !== z && K) {
                var c = b.getElementById(a);
                return c && c.parentNode ? [c] : [];
              }
            }),
              (A.filter.ID = function (a) {
                var b = a.replace(ca, W);
                return function (a) {
                  return a.getAttribute("id") === b;
                };
              }))
            : (delete A.find.ID,
              (A.filter.ID = function (a) {
                var b = a.replace(ca, W);
                return function (a) {
                  return (a = typeof a.getAttributeNode !== z && a.getAttributeNode("id")) && a.value === b;
                };
              }));
          A.find.TAG = y.getElementsByTagName
            ? function (a, b) {
              if (typeof b.getElementsByTagName !== z) return b.getElementsByTagName(a);
            }
            : function (a, b) {
              var c,
                d = [],
                e = 0,
                f = b.getElementsByTagName(a);
              if ("*" === a) {
                for (; (c = f[e++]); ) 1 === c.nodeType && d.push(c);
                return d;
              }
              return f;
            };
          A.find.CLASS =
            y.getElementsByClassName &&
            function (a, b) {
              if (typeof b.getElementsByClassName !== z && K) return b.getElementsByClassName(a);
            };
          Y = [];
          qa = [];
          if ((y.qsa = S.test(b.querySelectorAll)))
            f(function (a) {
              a.innerHTML = "<select><option selected=''></option></select>";
              a.querySelectorAll("[selected]").length ||
              qa.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");
              a.querySelectorAll(":checked").length || qa.push(":checked");
            }),
              f(function (a) {
                var c = b.createElement("input");
                c.setAttribute("type", "hidden");
                a.appendChild(c).setAttribute("t", "");
                a.querySelectorAll("[t^='']").length && qa.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");
                a.querySelectorAll(":enabled").length || qa.push(":enabled", ":disabled");
                a.querySelectorAll("*,:x");
                qa.push(",.*:");
              });
          (y.matchesSelector = S.test((x = da.webkitMatchesSelector || da.mozMatchesSelector || da.oMatchesSelector || da.msMatchesSelector))) &&
          f(function (a) {
            y.disconnectedMatch = x.call(a, "div");
            x.call(a, "[s!='']:x");
            Y.push("!=", va);
          });
          qa = qa.length && new RegExp(qa.join("|"));
          Y = Y.length && new RegExp(Y.join("|"));
          P =
            S.test(da.contains) || da.compareDocumentPosition
              ? function (a, b) {
                var c = 9 === a.nodeType ? a.documentElement : a,
                  d = b && b.parentNode;
                return a === d || !!(d && 1 === d.nodeType && (c.contains ? c.contains(d) : a.compareDocumentPosition && a.compareDocumentPosition(d) & 16));
              }
              : function (a, b) {
                if (b) for (; (b = b.parentNode); ) if (b === a) return !0;
                return !1;
              };
          Qa = da.compareDocumentPosition
            ? function (a, c) {
              if (a === c) return (aa = !0), 0;
              var d = c.compareDocumentPosition && a.compareDocumentPosition && a.compareDocumentPosition(c);
              return d
                ? d & 1 || (!y.sortDetached && c.compareDocumentPosition(a) === d)
                  ? a === b || P(O, a)
                    ? -1
                    : c === b || P(O, c)
                      ? 1
                      : T
                        ? Ga.call(T, a) - Ga.call(T, c)
                        : 0
                  : d & 4
                    ? -1
                    : 1
                : a.compareDocumentPosition
                  ? -1
                  : 1;
            }
            : function (a, c) {
              var d,
                e = 0;
              d = a.parentNode;
              var f = c.parentNode,
                g = [a],
                k = [c];
              if (a === c) return (aa = !0), 0;
              if (!d || !f) return a === b ? -1 : c === b ? 1 : d ? -1 : f ? 1 : T ? Ga.call(T, a) - Ga.call(T, c) : 0;
              if (d === f) return h(a, c);
              for (d = a; (d = d.parentNode); ) g.unshift(d);
              for (d = c; (d = d.parentNode); ) k.unshift(d);
              for (; g[e] === k[e]; ) e++;
              return e ? h(g[e], k[e]) : g[e] === O ? -1 : k[e] === O ? 1 : 0;
            };
          return b;
        };
        c.matches = function (a, b) {
          return c(a, null, null, b);
        };
        c.matchesSelector = function (a, b) {
          (a.ownerDocument || a) !== w && D(a);
          b = b.replace(ea, "='$1']");
          if (!(!y.matchesSelector || !K || (Y && Y.test(b)) || (qa && qa.test(b))))
            try {
              var d = x.call(a, b);
              if (d || y.disconnectedMatch || (a.document && 11 !== a.document.nodeType)) return d;
            } catch (tc) {}
          return 0 < c(b, w, null, [a]).length;
        };
        c.contains = function (a, b) {
          (a.ownerDocument || a) !== w && D(a);
          return P(a, b);
        };
        c.attr = function (a, c) {
          (a.ownerDocument || a) !== w && D(a);
          var d = A.attrHandle[c.toLowerCase()],
            d = d && J.call(A.attrHandle, c.toLowerCase()) ? d(a, c, !K) : b;
          return d === b ? (y.attributes || !K ? a.getAttribute(c) : (d = a.getAttributeNode(c)) && d.specified ? d.value : null) : d;
        };
        c.error = function (a) {
          throw Error("Syntax error, unrecognized expression: " + a);
        };
        c.uniqueSort = function (a) {
          var b,
            c = [],
            d = 0,
            e = 0;
          aa = !y.detectDuplicates;
          T = !y.sortStable && a.slice(0);
          a.sort(Qa);
          if (aa) {
            for (; (b = a[e++]); ) b === a[e] && (d = c.push(e));
            for (; d--; ) a.splice(c[d], 1);
          }
          return a;
        };
        Z = c.getText = function (a) {
          var b,
            c = "",
            d = 0;
          b = a.nodeType;
          if (!b) for (; (b = a[d]); d++) c += Z(b);
          else if (1 === b || 9 === b || 11 === b) {
            if ("string" === typeof a.textContent) return a.textContent;
            for (a = a.firstChild; a; a = a.nextSibling) c += Z(a);
          } else if (3 === b || 4 === b) return a.nodeValue;
          return c;
        };
        A = c.selectors = {
          cacheLength: 50,
          createPseudo: e,
          match: Ia,
          attrHandle: {},
          find: {},
          relative: { ">": { dir: "parentNode", first: !0 }, " ": { dir: "parentNode" }, "+": { dir: "previousSibling", first: !0 }, "~": { dir: "previousSibling" } },
          preFilter: {
            ATTR: function (a) {
              a[1] = a[1].replace(ca, W);
              a[3] = (a[4] || a[5] || "").replace(ca, W);
              "~=" === a[2] && (a[3] = " " + a[3] + " ");
              return a.slice(0, 4);
            },
            CHILD: function (a) {
              a[1] = a[1].toLowerCase();
              "nth" === a[1].slice(0, 3) ? (a[3] || c.error(a[0]), (a[4] = +(a[4] ? a[5] + (a[6] || 1) : 2 * ("even" === a[3] || "odd" === a[3]))), (a[5] = +(a[7] + a[8] || "odd" === a[3]))) : a[3] && c.error(a[0]);
              return a;
            },
            PSEUDO: function (a) {
              var c,
                d = !a[5] && a[2];
              if (Ia.CHILD.test(a[0])) return null;
              a[3] && a[4] !== b ? (a[2] = a[4]) : d && Ta.test(d) && (c = G(d, !0)) && (c = d.indexOf(")", d.length - c) - d.length) && ((a[0] = a[0].slice(0, c)), (a[2] = d.slice(0, c)));
              return a.slice(0, 3);
            },
          },
          filter: {
            TAG: function (a) {
              var b = a.replace(ca, W).toLowerCase();
              return "*" === a
                ? function () {
                  return !0;
                }
                : function (a) {
                  return a.nodeName && a.nodeName.toLowerCase() === b;
                };
            },
            CLASS: function (a) {
              var b = F[a + " "];
              return (
                b ||
                ((b = new RegExp("(^|[\\x20\\t\\r\\n\\f])" + a + "([\\x20\\t\\r\\n\\f]|$)")),
                  F(a, function (a) {
                    return b.test(("string" === typeof a.className && a.className) || (typeof a.getAttribute !== z && a.getAttribute("class")) || "");
                  }))
              );
            },
            ATTR: function (a, b, d) {
              return function (e) {
                e = c.attr(e, a);
                if (null == e) return "!=" === b;
                if (!b) return !0;
                e += "";
                return "=" === b
                  ? e === d
                  : "!=" === b
                    ? e !== d
                    : "^=" === b
                      ? d && 0 === e.indexOf(d)
                      : "*=" === b
                        ? d && -1 < e.indexOf(d)
                        : "$=" === b
                          ? d && e.slice(-d.length) === d
                          : "~=" === b
                            ? -1 < (" " + e + " ").indexOf(d)
                            : "|=" === b
                              ? e === d || e.slice(0, d.length + 1) === d + "-"
                              : !1;
              };
            },
            CHILD: function (a, b, c, d, e) {
              var f = "nth" !== a.slice(0, 3),
                g = "last" !== a.slice(-4),
                h = "of-type" === b;
              return 1 === d && 0 === e
                ? function (a) {
                  return !!a.parentNode;
                }
                : function (b, c, k) {
                  var t, m, l, p, G;
                  c = f !== g ? "nextSibling" : "previousSibling";
                  var na = b.parentNode,
                    q = h && b.nodeName.toLowerCase();
                  k = !k && !h;
                  if (na) {
                    if (f) {
                      for (; c; ) {
                        for (m = b; (m = m[c]); ) if (h ? m.nodeName.toLowerCase() === q : 1 === m.nodeType) return !1;
                        G = c = "only" === a && !G && "nextSibling";
                      }
                      return !0;
                    }
                    G = [g ? na.firstChild : na.lastChild];
                    if (g && k)
                      for (k = na[U] || (na[U] = {}), t = k[a] || [], p = t[0] === ya && t[1], l = t[0] === ya && t[2], m = p && na.childNodes[p]; (m = (++p && m && m[c]) || (l = p = 0) || G.pop()); ) {
                        if (1 === m.nodeType && ++l && m === b) {
                          k[a] = [ya, p, l];
                          break;
                        }
                      }
                    else if (k && (t = (b[U] || (b[U] = {}))[a]) && t[0] === ya) l = t[1];
                    else for (; (m = (++p && m && m[c]) || (l = p = 0) || G.pop()) && ((h ? m.nodeName.toLowerCase() !== q : 1 !== m.nodeType) || !++l || (k && ((m[U] || (m[U] = {}))[a] = [ya, l]), m !== b)); );
                    l -= e;
                    return l === d || (0 === l % d && 0 <= l / d);
                  }
                };
            },
            PSEUDO: function (a, b) {
              var d,
                f = A.pseudos[a] || A.setFilters[a.toLowerCase()] || c.error("unsupported pseudo: " + a);
              return f[U]
                ? f(b)
                : 1 < f.length
                  ? ((d = [a, a, "", b]),
                    A.setFilters.hasOwnProperty(a.toLowerCase())
                      ? e(function (a, c) {
                        for (var d, e = f(a, b), g = e.length; g--; ) (d = Ga.call(a, e[g])), (a[d] = !(c[d] = e[g]));
                      })
                      : function (a) {
                        return f(a, 0, d);
                      })
                  : f;
            },
          },
          pseudos: {
            not: e(function (a) {
              var b = [],
                c = [],
                d = Q(a.replace(Ua, "$1"));
              return d[U]
                ? e(function (a, b, c, e) {
                  e = d(a, null, e, []);
                  for (var f = a.length; f--; ) if ((c = e[f])) a[f] = !(b[f] = c);
                })
                : function (a, e, f) {
                  b[0] = a;
                  d(b, null, f, c);
                  return !c.pop();
                };
            }),
            has: e(function (a) {
              return function (b) {
                return 0 < c(a, b).length;
              };
            }),
            contains: e(function (a) {
              return function (b) {
                return -1 < (b.textContent || b.innerText || Z(b)).indexOf(a);
              };
            }),
            lang: e(function (a) {
              ba.test(a || "") || c.error("unsupported lang: " + a);
              a = a.replace(ca, W).toLowerCase();
              return function (b) {
                var c;
                do if ((c = K ? b.lang : b.getAttribute("xml:lang") || b.getAttribute("lang"))) return (c = c.toLowerCase()), c === a || 0 === c.indexOf(a + "-");
                while ((b = b.parentNode) && 1 === b.nodeType);
                return !1;
              };
            }),
            target: function (b) {
              var c = a.location && a.location.hash;
              return c && c.slice(1) === b.id;
            },
            root: function (a) {
              return a === da;
            },
            focus: function (a) {
              return a === w.activeElement && (!w.hasFocus || w.hasFocus()) && !!(a.type || a.href || ~a.tabIndex);
            },
            enabled: function (a) {
              return !1 === a.disabled;
            },
            disabled: function (a) {
              return !0 === a.disabled;
            },
            checked: function (a) {
              var b = a.nodeName.toLowerCase();
              return ("input" === b && !!a.checked) || ("option" === b && !!a.selected);
            },
            selected: function (a) {
              a.parentNode && a.parentNode.selectedIndex;
              return !0 === a.selected;
            },
            empty: function (a) {
              for (a = a.firstChild; a; a = a.nextSibling) if ("@" < a.nodeName || 3 === a.nodeType || 4 === a.nodeType) return !1;
              return !0;
            },
            parent: function (a) {
              return !A.pseudos.empty(a);
            },
            header: function (a) {
              return V.test(a.nodeName);
            },
            input: function (a) {
              return fa.test(a.nodeName);
            },
            button: function (a) {
              var b = a.nodeName.toLowerCase();
              return ("input" === b && "button" === a.type) || "button" === b;
            },
            text: function (a) {
              var b;
              return "input" === a.nodeName.toLowerCase() && "text" === a.type && (null == (b = a.getAttribute("type")) || b.toLowerCase() === a.type);
            },
            first: m(function () {
              return [0];
            }),
            last: m(function (a, b) {
              return [b - 1];
            }),
            eq: m(function (a, b, c) {
              return [0 > c ? c + b : c];
            }),
            even: m(function (a, b) {
              for (var c = 0; c < b; c += 2) a.push(c);
              return a;
            }),
            odd: m(function (a, b) {
              for (var c = 1; c < b; c += 2) a.push(c);
              return a;
            }),
            lt: m(function (a, b, c) {
              for (b = 0 > c ? c + b : c; 0 <= --b; ) a.push(b);
              return a;
            }),
            gt: m(function (a, b, c) {
              for (c = 0 > c ? c + b : c; ++c < b; ) a.push(c);
              return a;
            }),
          },
        };
        A.pseudos.nth = A.pseudos.eq;
        for (R in { radio: !0, checkbox: !0, file: !0, password: !0, image: !0 }) A.pseudos[R] = k(R);
        for (R in { submit: !0, reset: !0 }) A.pseudos[R] = t(R);
        p.prototype = A.filters = A.pseudos;
        A.setFilters = new p();
        Q = c.compile = function (a, b) {
          var c,
            d = [],
            e = [],
            f = db[a + " "];
          if (!f) {
            b || (b = G(a));
            for (c = b.length; c--; ) (f = ta(b[c])), f[U] ? d.push(f) : e.push(f);
            f = db(a, u(e, d));
          }
          return f;
        };
        y.sortStable = U.split("").sort(Qa).join("") === U;
        y.detectDuplicates = aa;
        D();
        y.sortDetached = f(function (a) {
          return a.compareDocumentPosition(w.createElement("div")) & 1;
        });
        f(function (a) {
          a.innerHTML = "<a href='#'></a>";
          return "#" === a.firstChild.getAttribute("href");
        }) ||
        g("type|href|height|width", function (a, b, c) {
          if (!c) return a.getAttribute(b, "type" === b.toLowerCase() ? 1 : 2);
        });
        (y.attributes &&
          f(function (a) {
            a.innerHTML = "<input/>";
            a.firstChild.setAttribute("value", "");
            return "" === a.firstChild.getAttribute("value");
          })) ||
        g("value", function (a, b, c) {
          if (!c && "input" === a.nodeName.toLowerCase()) return a.defaultValue;
        });
        f(function (a) {
          return null == a.getAttribute("disabled");
        }) ||
        g("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped", function (a, b, c) {
          var d;
          if (!c) return (d = a.getAttributeNode(b)) && d.specified ? d.value : !0 === a[b] ? b.toLowerCase() : null;
        });
        l.find = c;
        l.expr = c.selectors;
        l.expr[":"] = l.expr.pseudos;
        l.unique = c.uniqueSort;
        l.text = c.getText;
        l.isXMLDoc = c.isXML;
        l.contains = c.contains;
      })(a);
      var R = {};
      l.Callbacks = function (a) {
        a = "string" === typeof a ? R[a] || d(a) : l.extend({}, a);
        var c,
          e,
          f,
          g,
          h,
          k,
          t = [],
          m = !a.once && [],
          p = function (b) {
            e = a.memory && b;
            f = !0;
            h = k || 0;
            k = 0;
            g = t.length;
            for (c = !0; t && h < g; h++)
              if (!1 === t[h].apply(b[0], b[1]) && a.stopOnFalse) {
                e = !1;
                break;
              }
            c = !1;
            t && (m ? m.length && p(m.shift()) : e ? (t = []) : q.disable());
          },
          q = {
            add: function () {
              if (t) {
                var b = t.length;
                (function cb(b) {
                  l.each(b, function (b, c) {
                    var d = l.type(c);
                    "function" === d ? (a.unique && q.has(c)) || t.push(c) : c && c.length && "string" !== d && cb(c);
                  });
                })(arguments);
                c ? (g = t.length) : e && ((k = b), p(e));
              }
              return this;
            },
            remove: function () {
              t &&
              l.each(arguments, function (a, b) {
                for (var d; -1 < (d = l.inArray(b, t, d)); ) t.splice(d, 1), c && (d <= g && g--, d <= h && h--);
              });
              return this;
            },
            has: function (a) {
              return a ? -1 < l.inArray(a, t) : !(!t || !t.length);
            },
            empty: function () {
              t = [];
              g = 0;
              return this;
            },
            disable: function () {
              t = m = e = b;
              return this;
            },
            disabled: function () {
              return !t;
            },
            lock: function () {
              m = b;
              e || q.disable();
              return this;
            },
            locked: function () {
              return !m;
            },
            fireWith: function (a, b) {
              !t || (f && !m) || ((b = b || []), (b = [a, b.slice ? b.slice() : b]), c ? m.push(b) : p(b));
              return this;
            },
            fire: function () {
              q.fireWith(this, arguments);
              return this;
            },
            fired: function () {
              return !!f;
            },
          };
        return q;
      };
      l.extend({
        Deferred: function (a) {
          var b = [
              ["resolve", "done", l.Callbacks("once memory"), "resolved"],
              ["reject", "fail", l.Callbacks("once memory"), "rejected"],
              ["notify", "progress", l.Callbacks("memory")],
            ],
            c = "pending",
            d = {
              state: function () {
                return c;
              },
              always: function () {
                e.done(arguments).fail(arguments);
                return this;
              },
              then: function () {
                var a = arguments;
                return l
                  .Deferred(function (c) {
                    l.each(b, function (b, f) {
                      var g = f[0],
                        h = l.isFunction(a[b]) && a[b];
                      e[f[1]](function () {
                        var a = h && h.apply(this, arguments);
                        if (a && l.isFunction(a.promise)) a.promise().done(c.resolve).fail(c.reject).progress(c.notify);
                        else c[g + "With"](this === d ? c.promise() : this, h ? [a] : arguments);
                      });
                    });
                    a = null;
                  })
                  .promise();
              },
              promise: function (a) {
                return null != a ? l.extend(a, d) : d;
              },
            },
            e = {};
          d.pipe = d.then;
          l.each(b, function (a, f) {
            var g = f[2],
              h = f[3];
            d[f[1]] = g.add;
            h &&
            g.add(
              function () {
                c = h;
              },
              b[a ^ 1][2].disable,
              b[2][2].lock
            );
            e[f[0]] = function () {
              e[f[0] + "With"](this === e ? d : this, arguments);
              return this;
            };
            e[f[0] + "With"] = g.fireWith;
          });
          d.promise(e);
          a && a.call(e, e);
          return e;
        },
        when: function (a) {
          var b = 0,
            c = pa.call(arguments),
            d = c.length,
            e = 1 !== d || (a && l.isFunction(a.promise)) ? d : 0,
            f = 1 === e ? a : l.Deferred(),
            g = function (a, b, c) {
              return function (d) {
                b[a] = this;
                c[a] = 1 < arguments.length ? pa.call(arguments) : d;
                c === h ? f.notifyWith(b, c) : --e || f.resolveWith(b, c);
              };
            },
            h,
            k,
            t;
          if (1 < d) for (h = Array(d), k = Array(d), t = Array(d); b < d; b++) c[b] && l.isFunction(c[b].promise) ? c[b].promise().done(g(b, t, c)).fail(f.reject).progress(g(b, k, h)) : --e;
          e || f.resolveWith(t, c);
          return f.promise();
        },
      });
      l.support = (function (b) {
        var c,
          d,
          e,
          f,
          g,
          h,
          k = z.createElement("div");
        k.setAttribute("className", "t");
        k.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";
        c = k.getElementsByTagName("*") || [];
        d = k.getElementsByTagName("a")[0];
        if (!d || !d.style || !c.length) return b;
        e = z.createElement("select");
        f = e.appendChild(z.createElement("option"));
        c = k.getElementsByTagName("input")[0];
        d.style.cssText = "top:1px;float:left;opacity:.5";
        b.getSetAttribute = "t" !== k.className;
        b.leadingWhitespace = 3 === k.firstChild.nodeType;
        b.tbody = !k.getElementsByTagName("tbody").length;
        b.htmlSerialize = !!k.getElementsByTagName("link").length;
        b.style = /top/.test(d.getAttribute("style"));
        b.hrefNormalized = "/a" === d.getAttribute("href");
        b.opacity = /^0.5/.test(d.style.opacity);
        b.cssFloat = !!d.style.cssFloat;
        b.checkOn = !!c.value;
        b.optSelected = f.selected;
        b.enctype = !!z.createElement("form").enctype;
        b.html5Clone = "<:nav></:nav>" !== z.createElement("nav").cloneNode(!0).outerHTML;
        b.inlineBlockNeedsLayout = !1;
        b.shrinkWrapBlocks = !1;
        b.pixelPosition = !1;
        b.deleteExpando = !0;
        b.noCloneEvent = !0;
        b.reliableMarginRight = !0;
        b.boxSizingReliable = !0;
        c.checked = !0;
        b.noCloneChecked = c.cloneNode(!0).checked;
        e.disabled = !0;
        b.optDisabled = !f.disabled;
        try {
          delete k.test;
        } catch (oc) {
          b.deleteExpando = !1;
        }
        c = z.createElement("input");
        c.setAttribute("value", "");
        b.input = "" === c.getAttribute("value");
        c.value = "t";
        c.setAttribute("type", "radio");
        b.radioValue = "t" === c.value;
        c.setAttribute("checked", "t");
        c.setAttribute("name", "t");
        d = z.createDocumentFragment();
        d.appendChild(c);
        b.appendChecked = c.checked;
        b.checkClone = d.cloneNode(!0).cloneNode(!0).lastChild.checked;
        k.attachEvent &&
        (k.attachEvent("onclick", function () {
          b.noCloneEvent = !1;
        }),
          k.cloneNode(!0).click());
        for (h in { submit: !0, change: !0, focusin: !0 }) k.setAttribute((d = "on" + h), "t"), (b[h + "Bubbles"] = d in a || !1 === k.attributes[d].expando);
        k.style.backgroundClip = "content-box";
        k.cloneNode(!0).style.backgroundClip = "";
        b.clearCloneStyle = "content-box" === k.style.backgroundClip;
        for (h in l(b)) break;
        b.ownLast = "0" !== h;
        l(function () {
          var c,
            d,
            e = z.getElementsByTagName("body")[0];
          e &&
          ((c = z.createElement("div")),
            (c.style.cssText = "border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px"),
            e.appendChild(c).appendChild(k),
            (k.innerHTML = "<table><tr><td></td><td>t</td></tr></table>"),
            (d = k.getElementsByTagName("td")),
            (d[0].style.cssText = "padding:0;margin:0;border:0;display:none"),
            (g = 0 === d[0].offsetHeight),
            (d[0].style.display = ""),
            (d[1].style.display = "none"),
            (b.reliableHiddenOffsets = g && 0 === d[0].offsetHeight),
            (k.innerHTML = ""),
            (k.style.cssText = "box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;"),
            l.swap(e, null != e.style.zoom ? { zoom: 1 } : {}, function () {
              b.boxSizing = 4 === k.offsetWidth;
            }),
          a.getComputedStyle &&
          ((b.pixelPosition = "1%" !== (a.getComputedStyle(k, null) || {}).top),
            (b.boxSizingReliable = "4px" === (a.getComputedStyle(k, null) || { width: "4px" }).width),
            (d = k.appendChild(z.createElement("div"))),
            (d.style.cssText = k.style.cssText = "padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;"),
            (d.style.marginRight = d.style.width = "0"),
            (k.style.width = "1px"),
            (b.reliableMarginRight = !parseFloat((a.getComputedStyle(d, null) || {}).marginRight))),
          typeof k.style.zoom !== M &&
          ((k.innerHTML = ""),
            (k.style.cssText = "padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;width:1px;padding:1px;display:inline;zoom:1"),
            (b.inlineBlockNeedsLayout = 3 === k.offsetWidth),
            (k.style.display = "block"),
            (k.innerHTML = "<div></div>"),
            (k.firstChild.style.width = "5px"),
            (b.shrinkWrapBlocks = 3 !== k.offsetWidth),
          b.inlineBlockNeedsLayout && (e.style.zoom = 1)),
            e.removeChild(c),
            (c = k = d = d = null));
        });
        c = e = d = f = d = c = null;
        return b;
      })({});
      var Q = /(?:\{[\s\S]*\}|\[[\s\S]*\])$/,
        da = /([A-Z])/g;
      l.extend({
        cache: {},
        noData: { applet: !0, embed: !0, object: "clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" },
        hasData: function (a) {
          a = a.nodeType ? l.cache[a[l.expando]] : a[l.expando];
          return !!a && !h(a);
        },
        data: function (a, b, c) {
          return f(a, b, c);
        },
        removeData: function (a, b) {
          return e(a, b);
        },
        _data: function (a, b, c) {
          return f(a, b, c, !0);
        },
        _removeData: function (a, b) {
          return e(a, b, !0);
        },
        acceptData: function (a) {
          if (a.nodeType && 1 !== a.nodeType && 9 !== a.nodeType) return !1;
          var b = a.nodeName && l.noData[a.nodeName.toLowerCase()];
          return !b || (!0 !== b && a.getAttribute("classid") === b);
        },
      });
      l.fn.extend({
        data: function (a, c) {
          var d,
            e,
            f = null,
            h = 0,
            k = this[0];
          if (a === b) {
            if (this.length && ((f = l.data(k)), 1 === k.nodeType && !l._data(k, "parsedAttrs"))) {
              for (d = k.attributes; h < d.length; h++) (e = d[h].name), 0 === e.indexOf("data-") && ((e = l.camelCase(e.slice(5))), g(k, e, f[e]));
              l._data(k, "parsedAttrs", !0);
            }
            return f;
          }
          return "object" === typeof a
            ? this.each(function () {
              l.data(this, a);
            })
            : 1 < arguments.length
              ? this.each(function () {
                l.data(this, a, c);
              })
              : k
                ? g(k, a, l.data(k, a))
                : null;
        },
        removeData: function (a) {
          return this.each(function () {
            l.removeData(this, a);
          });
        },
      });
      l.extend({
        queue: function (a, b, c) {
          var d;
          if (a) return (b = (b || "fx") + "queue"), (d = l._data(a, b)), c && (!d || l.isArray(c) ? (d = l._data(a, b, l.makeArray(c))) : d.push(c)), d || [];
        },
        dequeue: function (a, b) {
          b = b || "fx";
          var c = l.queue(a, b),
            d = c.length,
            e = c.shift(),
            f = l._queueHooks(a, b),
            g = function () {
              l.dequeue(a, b);
            };
          "inprogress" === e && ((e = c.shift()), d--);
          e && ("fx" === b && c.unshift("inprogress"), delete f.stop, e.call(a, g, f));
          !d && f && f.empty.fire();
        },
        _queueHooks: function (a, b) {
          var c = b + "queueHooks";
          return (
            l._data(a, c) ||
            l._data(a, c, {
              empty: l.Callbacks("once memory").add(function () {
                l._removeData(a, b + "queue");
                l._removeData(a, c);
              }),
            })
          );
        },
      });
      l.fn.extend({
        queue: function (a, c) {
          var d = 2;
          "string" !== typeof a && ((c = a), (a = "fx"), d--);
          return arguments.length < d
            ? l.queue(this[0], a)
            : c === b
              ? this
              : this.each(function () {
                var b = l.queue(this, a, c);
                l._queueHooks(this, a);
                "fx" === a && "inprogress" !== b[0] && l.dequeue(this, a);
              });
        },
        dequeue: function (a) {
          return this.each(function () {
            l.dequeue(this, a);
          });
        },
        delay: function (a, b) {
          a = l.fx ? l.fx.speeds[a] || a : a;
          return this.queue(b || "fx", function (b, c) {
            var d = setTimeout(b, a);
            c.stop = function () {
              clearTimeout(d);
            };
          });
        },
        clearQueue: function (a) {
          return this.queue(a || "fx", []);
        },
        promise: function (a, c) {
          var d,
            e = 1,
            f = l.Deferred(),
            g = this,
            h = this.length,
            k = function () {
              --e || f.resolveWith(g, [g]);
            };
          "string" !== typeof a && ((c = a), (a = b));
          for (a = a || "fx"; h--; ) (d = l._data(g[h], a + "queueHooks")) && d.empty && (e++, d.empty.add(k));
          k();
          return f.promise(c);
        },
      });
      var U,
        qa,
        Qa = /[\t\r\n\f]/g,
        db = /\r/g,
        Ya = /^(?:input|select|textarea|button|object)$/i,
        Ga = /^(?:a|area)$/i,
        Za = /^(?:checked|selected)$/i,
        Ea = l.support.getSetAttribute,
        Ta = l.support.input;
      l.fn.extend({
        attr: function (a, b) {
          return l.access(this, l.attr, a, b, 1 < arguments.length);
        },
        removeAttr: function (a) {
          return this.each(function () {
            l.removeAttr(this, a);
          });
        },
        prop: function (a, b) {
          return l.access(this, l.prop, a, b, 1 < arguments.length);
        },
        removeProp: function (a) {
          a = l.propFix[a] || a;
          return this.each(function () {
            try {
              (this[a] = b), delete this[a];
            } catch (G) {}
          });
        },
        addClass: function (a) {
          var b,
            c,
            d,
            e,
            f,
            g = 0,
            h = this.length;
          b = "string" === typeof a && a;
          if (l.isFunction(a))
            return this.each(function (b) {
              l(this).addClass(a.call(this, b, this.className));
            });
          if (b)
            for (b = (a || "").match(ra) || []; g < h; g++)
              if (((c = this[g]), (d = 1 === c.nodeType && (c.className ? (" " + c.className + " ").replace(Qa, " ") : " ")))) {
                for (f = 0; (e = b[f++]); ) 0 > d.indexOf(" " + e + " ") && (d += e + " ");
                c.className = l.trim(d);
              }
          return this;
        },
        removeClass: function (a) {
          var b,
            c,
            d,
            e,
            f,
            g = 0,
            h = this.length;
          b = 0 === arguments.length || ("string" === typeof a && a);
          if (l.isFunction(a))
            return this.each(function (b) {
              l(this).removeClass(a.call(this, b, this.className));
            });
          if (b)
            for (b = (a || "").match(ra) || []; g < h; g++)
              if (((c = this[g]), (d = 1 === c.nodeType && (c.className ? (" " + c.className + " ").replace(Qa, " ") : "")))) {
                for (f = 0; (e = b[f++]); ) for (; 0 <= d.indexOf(" " + e + " "); ) d = d.replace(" " + e + " ", " ");
                c.className = a ? l.trim(d) : "";
              }
          return this;
        },
        toggleClass: function (a, b) {
          var c = typeof a;
          return "boolean" === typeof b && "string" === c
            ? b
              ? this.addClass(a)
              : this.removeClass(a)
            : l.isFunction(a)
              ? this.each(function (c) {
                l(this).toggleClass(a.call(this, c, this.className, b), b);
              })
              : this.each(function () {
                if ("string" === c) for (var b, d = 0, e = l(this), f = a.match(ra) || []; (b = f[d++]); ) e.hasClass(b) ? e.removeClass(b) : e.addClass(b);
                else if (c === M || "boolean" === c) this.className && l._data(this, "__className__", this.className), (this.className = this.className || !1 === a ? "" : l._data(this, "__className__") || "");
              });
        },
        hasClass: function (a) {
          a = " " + a + " ";
          for (var b = 0, c = this.length; b < c; b++) if (1 === this[b].nodeType && 0 <= (" " + this[b].className + " ").replace(Qa, " ").indexOf(a)) return !0;
          return !1;
        },
        val: function (a) {
          var c,
            d,
            e,
            f = this[0];
          if (arguments.length)
            return (
              (e = l.isFunction(a)),
                this.each(function (c) {
                  1 === this.nodeType &&
                  ((c = e ? a.call(this, c, l(this).val()) : a),
                    null == c
                      ? (c = "")
                      : "number" === typeof c
                        ? (c += "")
                        : l.isArray(c) &&
                        (c = l.map(c, function (a) {
                          return null == a ? "" : a + "";
                        })),
                    (d = l.valHooks[this.type] || l.valHooks[this.nodeName.toLowerCase()]),
                  (d && "set" in d && d.set(this, c, "value") !== b) || (this.value = c));
                })
            );
          if (f) {
            if ((d = l.valHooks[f.type] || l.valHooks[f.nodeName.toLowerCase()]) && "get" in d && (c = d.get(f, "value")) !== b) return c;
            c = f.value;
            return "string" === typeof c ? c.replace(db, "") : null == c ? "" : c;
          }
        },
      });
      l.extend({
        valHooks: {
          option: {
            get: function (a) {
              var b = l.find.attr(a, "value");
              return null != b ? b : a.text;
            },
          },
          select: {
            get: function (a) {
              for (var b, c = a.options, d = a.selectedIndex, e = (a = "select-one" === a.type || 0 > d) ? null : [], f = a ? d + 1 : c.length, g = 0 > d ? f : a ? d : 0; g < f; g++)
                if (((b = c[g]), !((!b.selected && g !== d) || (l.support.optDisabled ? b.disabled : null !== b.getAttribute("disabled")) || (b.parentNode.disabled && l.nodeName(b.parentNode, "optgroup"))))) {
                  b = l(b).val();
                  if (a) return b;
                  e.push(b);
                }
              return e;
            },
            set: function (a, b) {
              for (var c, d, e = a.options, f = l.makeArray(b), g = e.length; g--; ) if (((d = e[g]), (d.selected = 0 <= l.inArray(l(d).val(), f)))) c = !0;
              c || (a.selectedIndex = -1);
              return f;
            },
          },
        },
        attr: function (a, c, d) {
          var e,
            f,
            g = a.nodeType;
          if (a && 3 !== g && 8 !== g && 2 !== g) {
            if (typeof a.getAttribute === M) return l.prop(a, c, d);
            (1 === g && l.isXMLDoc(a)) || ((c = c.toLowerCase()), (e = l.attrHooks[c] || (l.expr.match.bool.test(c) ? qa : U)));
            if (d !== b)
              if (null === d) l.removeAttr(a, c);
              else {
                if (e && "set" in e && (f = e.set(a, d, c)) !== b) return f;
                a.setAttribute(c, d + "");
                return d;
              }
            else {
              if (e && "get" in e && null !== (f = e.get(a, c))) return f;
              f = l.find.attr(a, c);
              return null == f ? b : f;
            }
          }
        },
        removeAttr: function (a, b) {
          var c,
            d,
            e = 0,
            f = b && b.match(ra);
          if (f && 1 === a.nodeType)
            for (; (c = f[e++]); )
              (d = l.propFix[c] || c), l.expr.match.bool.test(c) ? ((Ta && Ea) || !Za.test(c) ? (a[d] = !1) : (a[l.camelCase("default-" + c)] = a[d] = !1)) : l.attr(a, c, ""), a.removeAttribute(Ea ? c : d);
        },
        attrHooks: {
          type: {
            set: function (a, b) {
              if (!l.support.radioValue && "radio" === b && l.nodeName(a, "input")) {
                var c = a.value;
                a.setAttribute("type", b);
                c && (a.value = c);
                return b;
              }
            },
          },
        },
        propFix: { for: "htmlFor", class: "className" },
        prop: function (a, c, d) {
          var e,
            f,
            g = a.nodeType;
          if (a && 3 !== g && 8 !== g && 2 !== g)
            return (
              (1 === g && l.isXMLDoc(a)) || ((c = l.propFix[c] || c), (f = l.propHooks[c])),
                d !== b ? (f && "set" in f && (e = f.set(a, d, c)) !== b ? e : (a[c] = d)) : f && "get" in f && null !== (e = f.get(a, c)) ? e : a[c]
            );
        },
        propHooks: {
          tabIndex: {
            get: function (a) {
              var b = l.find.attr(a, "tabindex");
              return b ? parseInt(b, 10) : Ya.test(a.nodeName) || (Ga.test(a.nodeName) && a.href) ? 0 : -1;
            },
          },
        },
      });
      qa = {
        set: function (a, b, c) {
          !1 === b ? l.removeAttr(a, c) : (Ta && Ea) || !Za.test(c) ? a.setAttribute((!Ea && l.propFix[c]) || c, c) : (a[l.camelCase("default-" + c)] = a[c] = !0);
          return c;
        },
      };
      l.each(l.expr.match.bool.source.match(/\w+/g), function (a, c) {
        var d = l.expr.attrHandle[c] || l.find.attr;
        l.expr.attrHandle[c] =
          (Ta && Ea) || !Za.test(c)
            ? function (a, c, e) {
              var f = l.expr.attrHandle[c];
              a = e ? b : (l.expr.attrHandle[c] = b) != d(a, c, e) ? c.toLowerCase() : null;
              l.expr.attrHandle[c] = f;
              return a;
            }
            : function (a, c, d) {
              return d ? b : a[l.camelCase("default-" + c)] ? c.toLowerCase() : null;
            };
      });
      (Ta && Ea) ||
      (l.attrHooks.value = {
        set: function (a, b, c) {
          if (l.nodeName(a, "input")) a.defaultValue = b;
          else return U && U.set(a, b, c);
        },
      });
      Ea ||
      ((U = {
        set: function (a, c, d) {
          var e = a.getAttributeNode(d);
          e || a.setAttributeNode((e = a.ownerDocument.createAttribute(d)));
          e.value = c += "";
          return "value" === d || c === a.getAttribute(d) ? c : b;
        },
      }),
        (l.expr.attrHandle.id = l.expr.attrHandle.name = l.expr.attrHandle.coords = function (a, c, d) {
          var e;
          return d ? b : (e = a.getAttributeNode(c)) && "" !== e.value ? e.value : null;
        }),
        (l.valHooks.button = {
          get: function (a, c) {
            var d = a.getAttributeNode(c);
            return d && d.specified ? d.value : b;
          },
          set: U.set,
        }),
        (l.attrHooks.contenteditable = {
          set: function (a, b, c) {
            U.set(a, "" === b ? !1 : b, c);
          },
        }),
        l.each(["width", "height"], function (a, b) {
          l.attrHooks[b] = {
            set: function (a, c) {
              if ("" === c) return a.setAttribute(b, "auto"), c;
            },
          };
        }));
      l.support.hrefNormalized ||
      l.each(["href", "src"], function (a, b) {
        l.propHooks[b] = {
          get: function (a) {
            return a.getAttribute(b, 4);
          },
        };
      });
      l.support.style ||
      (l.attrHooks.style = {
        get: function (a) {
          return a.style.cssText || b;
        },
        set: function (a, b) {
          return (a.style.cssText = b + "");
        },
      });
      l.support.optSelected ||
      (l.propHooks.selected = {
        get: function (a) {
          if ((a = a.parentNode)) a.selectedIndex, a.parentNode && a.parentNode.selectedIndex;
          return null;
        },
      });
      l.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "), function () {
        l.propFix[this.toLowerCase()] = this;
      });
      l.support.enctype || (l.propFix.enctype = "encoding");
      l.each(["radio", "checkbox"], function () {
        l.valHooks[this] = {
          set: function (a, b) {
            if (l.isArray(b)) return (a.checked = 0 <= l.inArray(l(a).val(), b));
          },
        };
        l.support.checkOn ||
        (l.valHooks[this].get = function (a) {
          return null === a.getAttribute("value") ? "on" : a.value;
        });
      });
      var Ia = /^(?:input|select|textarea)$/i,
        ib = /^key/,
        Ua = /^(?:mouse|contextmenu)|click/,
        ub = /^(?:focusinfocus|focusoutblur)$/,
        vb = /^([^.]*)(?:\.(.+)|)$/;
      l.event = {
        global: {},
        add: function (a, c, d, e, f) {
          var g, h, k, m, t, p, q, n, H;
          if ((k = l._data(a))) {
            d.handler && ((m = d), (d = m.handler), (f = m.selector));
            d.guid || (d.guid = l.guid++);
            (h = k.events) || (h = k.events = {});
            (t = k.handle) ||
            ((t = k.handle = function (a) {
              return typeof l === M || (a && l.event.triggered === a.type) ? b : l.event.dispatch.apply(t.elem, arguments);
            }),
              (t.elem = a));
            c = (c || "").match(ra) || [""];
            for (k = c.length; k--; )
              (g = vb.exec(c[k]) || []),
                (n = p = g[1]),
                (H = (g[2] || "").split(".").sort()),
              n &&
              ((g = l.event.special[n] || {}),
                (n = (f ? g.delegateType : g.bindType) || n),
                (g = l.event.special[n] || {}),
                (p = l.extend({ type: n, origType: p, data: e, handler: d, guid: d.guid, selector: f, needsContext: f && l.expr.match.needsContext.test(f), namespace: H.join(".") }, m)),
              (q = h[n]) ||
              ((q = h[n] = []), (q.delegateCount = 0), (g.setup && !1 !== g.setup.call(a, e, H, t)) || (a.addEventListener ? a.addEventListener(n, t, !1) : a.attachEvent && a.attachEvent("on" + n, t))),
              g.add && (g.add.call(a, p), p.handler.guid || (p.handler.guid = d.guid)),
                f ? q.splice(q.delegateCount++, 0, p) : q.push(p),
                (l.event.global[n] = !0));
            a = null;
          }
        },
        remove: function (a, b, c, d, e) {
          var f,
            g,
            h,
            k,
            m,
            t,
            p,
            q,
            n,
            H,
            r,
            G = l.hasData(a) && l._data(a);
          if (G && (t = G.events)) {
            b = (b || "").match(ra) || [""];
            for (m = b.length; m--; )
              if (((h = vb.exec(b[m]) || []), (n = r = h[1]), (H = (h[2] || "").split(".").sort()), n)) {
                p = l.event.special[n] || {};
                n = (d ? p.delegateType : p.bindType) || n;
                q = t[n] || [];
                h = h[2] && new RegExp("(^|\\.)" + H.join("\\.(?:.*\\.|)") + "(\\.|$)");
                for (k = f = q.length; f--; )
                  (g = q[f]),
                  (!e && r !== g.origType) ||
                  (c && c.guid !== g.guid) ||
                  (h && !h.test(g.namespace)) ||
                  (d && d !== g.selector && ("**" !== d || !g.selector)) ||
                  (q.splice(f, 1), g.selector && q.delegateCount--, p.remove && p.remove.call(a, g));
                k && !q.length && ((p.teardown && !1 !== p.teardown.call(a, H, G.handle)) || l.removeEvent(a, n, G.handle), delete t[n]);
              } else for (n in t) l.event.remove(a, n + b[m], c, d, !0);
            l.isEmptyObject(t) && (delete G.handle, l._removeData(a, "events"));
          }
        },
        trigger: function (c, d, e, f) {
          var g,
            h,
            k,
            m,
            t,
            p,
            q = [e || z],
            n = X.call(c, "type") ? c.type : c;
          t = X.call(c, "namespace") ? c.namespace.split(".") : [];
          k = g = e = e || z;
          if (
            3 !== e.nodeType &&
            8 !== e.nodeType &&
            !ub.test(n + l.event.triggered) &&
            (0 <= n.indexOf(".") && ((t = n.split(".")), (n = t.shift()), t.sort()),
              (h = 0 > n.indexOf(":") && "on" + n),
              (c = c[l.expando] ? c : new l.Event(n, "object" === typeof c && c)),
              (c.isTrigger = f ? 2 : 3),
              (c.namespace = t.join(".")),
              (c.namespace_re = c.namespace ? new RegExp("(^|\\.)" + t.join("\\.(?:.*\\.|)") + "(\\.|$)") : null),
              (c.result = b),
            c.target || (c.target = e),
              (d = null == d ? [c] : l.makeArray(d, [c])),
              (t = l.event.special[n] || {}),
            f || !t.trigger || !1 !== t.trigger.apply(e, d))
          ) {
            if (!f && !t.noBubble && !l.isWindow(e)) {
              m = t.delegateType || n;
              ub.test(m + n) || (k = k.parentNode);
              for (; k; k = k.parentNode) q.push(k), (g = k);
              g === (e.ownerDocument || z) && q.push(g.defaultView || g.parentWindow || a);
            }
            for (p = 0; (k = q[p++]) && !c.isPropagationStopped(); )
              (c.type = 1 < p ? m : t.bindType || n),
              (g = (l._data(k, "events") || {})[c.type] && l._data(k, "handle")) && g.apply(k, d),
              (g = h && k[h]) && l.acceptData(k) && g.apply && !1 === g.apply(k, d) && c.preventDefault();
            c.type = n;
            if (!(f || c.isDefaultPrevented() || (t._default && !1 !== t._default.apply(q.pop(), d))) && l.acceptData(e) && h && e[n] && !l.isWindow(e)) {
              (g = e[h]) && (e[h] = null);
              l.event.triggered = n;
              try {
                e[n]();
              } catch (qc) {}
              l.event.triggered = b;
              g && (e[h] = g);
            }
            return c.result;
          }
        },
        dispatch: function (a) {
          a = l.event.fix(a);
          var c,
            d,
            e,
            f,
            g,
            h = pa.call(arguments);
          c = (l._data(this, "events") || {})[a.type] || [];
          var k = l.event.special[a.type] || {};
          h[0] = a;
          a.delegateTarget = this;
          if (!k.preDispatch || !1 !== k.preDispatch.call(this, a)) {
            g = l.event.handlers.call(this, a, c);
            for (c = 0; (e = g[c++]) && !a.isPropagationStopped(); )
              for (a.currentTarget = e.elem, f = 0; (d = e.handlers[f++]) && !a.isImmediatePropagationStopped(); )
                if (!a.namespace_re || a.namespace_re.test(d.namespace))
                  (a.handleObj = d), (a.data = d.data), (d = ((l.event.special[d.origType] || {}).handle || d.handler).apply(e.elem, h)), d !== b && !1 === (a.result = d) && (a.preventDefault(), a.stopPropagation());
            k.postDispatch && k.postDispatch.call(this, a);
            return a.result;
          }
        },
        handlers: function (a, c) {
          var d,
            e,
            f,
            g,
            h = [],
            k = c.delegateCount,
            m = a.target;
          if (k && m.nodeType && (!a.button || "click" !== a.type))
            for (; m != this; m = m.parentNode || this)
              if (1 === m.nodeType && (!0 !== m.disabled || "click" !== a.type)) {
                f = [];
                for (g = 0; g < k; g++) (e = c[g]), (d = e.selector + " "), f[d] === b && (f[d] = e.needsContext ? 0 <= l(d, this).index(m) : l.find(d, this, null, [m]).length), f[d] && f.push(e);
                f.length && h.push({ elem: m, handlers: f });
              }
          k < c.length && h.push({ elem: this, handlers: c.slice(k) });
          return h;
        },
        fix: function (a) {
          if (a[l.expando]) return a;
          var b, c, d;
          b = a.type;
          var e = a,
            f = this.fixHooks[b];
          f || (this.fixHooks[b] = f = Ua.test(b) ? this.mouseHooks : ib.test(b) ? this.keyHooks : {});
          d = f.props ? this.props.concat(f.props) : this.props;
          a = new l.Event(e);
          for (b = d.length; b--; ) (c = d[b]), (a[c] = e[c]);
          a.target || (a.target = e.srcElement || z);
          3 === a.target.nodeType && (a.target = a.target.parentNode);
          a.metaKey = !!a.metaKey;
          return f.filter ? f.filter(a, e) : a;
        },
        props: "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
        fixHooks: {},
        keyHooks: {
          props: ["char", "charCode", "key", "keyCode"],
          filter: function (a, b) {
            null == a.which && (a.which = null != b.charCode ? b.charCode : b.keyCode);
            return a;
          },
        },
        mouseHooks: {
          props: "button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
          filter: function (a, c) {
            var d,
              e,
              f = c.button,
              g = c.fromElement;
            null == a.pageX &&
            null != c.clientX &&
            ((d = a.target.ownerDocument || z),
              (e = d.documentElement),
              (d = d.body),
              (a.pageX = c.clientX + ((e && e.scrollLeft) || (d && d.scrollLeft) || 0) - ((e && e.clientLeft) || (d && d.clientLeft) || 0)),
              (a.pageY = c.clientY + ((e && e.scrollTop) || (d && d.scrollTop) || 0) - ((e && e.clientTop) || (d && d.clientTop) || 0)));
            !a.relatedTarget && g && (a.relatedTarget = g === a.target ? c.toElement : g);
            a.which || f === b || (a.which = f & 1 ? 1 : f & 2 ? 3 : f & 4 ? 2 : 0);
            return a;
          },
        },
        special: {
          load: { noBubble: !0 },
          focus: {
            trigger: function () {
              if (this !== p() && this.focus)
                try {
                  return this.focus(), !1;
                } catch (t) {}
            },
            delegateType: "focusin",
          },
          blur: {
            trigger: function () {
              if (this === p() && this.blur) return this.blur(), !1;
            },
            delegateType: "focusout",
          },
          click: {
            trigger: function () {
              if (l.nodeName(this, "input") && "checkbox" === this.type && this.click) return this.click(), !1;
            },
            _default: function (a) {
              return l.nodeName(a.target, "a");
            },
          },
          beforeunload: {
            postDispatch: function (a) {
              a.result !== b && (a.originalEvent.returnValue = a.result);
            },
          },
        },
        simulate: function (a, b, c, d) {
          a = l.extend(new l.Event(), c, { type: a, isSimulated: !0, originalEvent: {} });
          d ? l.event.trigger(a, null, b) : l.event.dispatch.call(b, a);
          a.isDefaultPrevented() && c.preventDefault();
        },
      };
      l.removeEvent = z.removeEventListener
        ? function (a, b, c) {
          a.removeEventListener && a.removeEventListener(b, c, !1);
        }
        : function (a, b, c) {
          b = "on" + b;
          a.detachEvent && (typeof a[b] === M && (a[b] = null), a.detachEvent(b, c));
        };
      l.Event = function (a, b) {
        if (!(this instanceof l.Event)) return new l.Event(a, b);
        a && a.type ? ((this.originalEvent = a), (this.type = a.type), (this.isDefaultPrevented = a.defaultPrevented || !1 === a.returnValue || (a.getPreventDefault && a.getPreventDefault()) ? k : m)) : (this.type = a);
        b && l.extend(this, b);
        this.timeStamp = (a && a.timeStamp) || l.now();
        this[l.expando] = !0;
      };
      l.Event.prototype = {
        isDefaultPrevented: m,
        isPropagationStopped: m,
        isImmediatePropagationStopped: m,
        preventDefault: function () {
          var a = this.originalEvent;
          this.isDefaultPrevented = k;
          a && (a.preventDefault ? a.preventDefault() : (a.returnValue = !1));
        },
        stopPropagation: function () {
          var a = this.originalEvent;
          this.isPropagationStopped = k;
          a && (a.stopPropagation && a.stopPropagation(), (a.cancelBubble = !0));
        },
        stopImmediatePropagation: function () {
          this.isImmediatePropagationStopped = k;
          this.stopPropagation();
        },
      };
      l.each({ mouseenter: "mouseover", mouseleave: "mouseout" }, function (a, b) {
        l.event.special[a] = {
          delegateType: b,
          bindType: b,
          handle: function (a) {
            var c,
              d = a.relatedTarget,
              e = a.handleObj;
            if (!d || (d !== this && !l.contains(this, d))) (a.type = e.origType), (c = e.handler.apply(this, arguments)), (a.type = b);
            return c;
          },
        };
      });
      l.support.submitBubbles ||
      (l.event.special.submit = {
        setup: function () {
          if (l.nodeName(this, "form")) return !1;
          l.event.add(this, "click._submit keypress._submit", function (a) {
            a = a.target;
            (a = l.nodeName(a, "input") || l.nodeName(a, "button") ? a.form : b) &&
            !l._data(a, "submitBubbles") &&
            (l.event.add(a, "submit._submit", function (a) {
              a._submit_bubble = !0;
            }),
              l._data(a, "submitBubbles", !0));
          });
        },
        postDispatch: function (a) {
          a._submit_bubble && (delete a._submit_bubble, this.parentNode && !a.isTrigger && l.event.simulate("submit", this.parentNode, a, !0));
        },
        teardown: function () {
          if (l.nodeName(this, "form")) return !1;
          l.event.remove(this, "._submit");
        },
      });
      l.support.changeBubbles ||
      (l.event.special.change = {
        setup: function () {
          if (Ia.test(this.nodeName)) {
            if ("checkbox" === this.type || "radio" === this.type)
              l.event.add(this, "propertychange._change", function (a) {
                "checked" === a.originalEvent.propertyName && (this._just_changed = !0);
              }),
                l.event.add(this, "click._change", function (a) {
                  this._just_changed && !a.isTrigger && (this._just_changed = !1);
                  l.event.simulate("change", this, a, !0);
                });
            return !1;
          }
          l.event.add(this, "beforeactivate._change", function (a) {
            a = a.target;
            Ia.test(a.nodeName) &&
            !l._data(a, "changeBubbles") &&
            (l.event.add(a, "change._change", function (a) {
              !this.parentNode || a.isSimulated || a.isTrigger || l.event.simulate("change", this.parentNode, a, !0);
            }),
              l._data(a, "changeBubbles", !0));
          });
        },
        handle: function (a) {
          var b = a.target;
          if (this !== b || a.isSimulated || a.isTrigger || ("radio" !== b.type && "checkbox" !== b.type)) return a.handleObj.handler.apply(this, arguments);
        },
        teardown: function () {
          l.event.remove(this, "._change");
          return !Ia.test(this.nodeName);
        },
      });
      l.support.focusinBubbles ||
      l.each({ focus: "focusin", blur: "focusout" }, function (a, b) {
        var c = 0,
          d = function (a) {
            l.event.simulate(b, a.target, l.event.fix(a), !0);
          };
        l.event.special[b] = {
          setup: function () {
            0 === c++ && z.addEventListener(a, d, !0);
          },
          teardown: function () {
            0 === --c && z.removeEventListener(a, d, !0);
          },
        };
      });
      l.fn.extend({
        on: function (a, c, d, e, f) {
          var g, h;
          if ("object" === typeof a) {
            "string" !== typeof c && ((d = d || c), (c = b));
            for (g in a) this.on(g, c, d, a[g], f);
            return this;
          }
          null == d && null == e ? ((e = c), (d = c = b)) : null == e && ("string" === typeof c ? ((e = d), (d = b)) : ((e = d), (d = c), (c = b)));
          if (!1 === e) e = m;
          else if (!e) return this;
          1 === f &&
          ((h = e),
            (e = function (a) {
              l().off(a);
              return h.apply(this, arguments);
            }),
            (e.guid = h.guid || (h.guid = l.guid++)));
          return this.each(function () {
            l.event.add(this, a, e, d, c);
          });
        },
        one: function (a, b, c, d) {
          return this.on(a, b, c, d, 1);
        },
        off: function (a, c, d) {
          var e;
          if (a && a.preventDefault && a.handleObj) return (e = a.handleObj), l(a.delegateTarget).off(e.namespace ? e.origType + "." + e.namespace : e.origType, e.selector, e.handler), this;
          if ("object" === typeof a) {
            for (e in a) this.off(e, c, a[e]);
            return this;
          }
          if (!1 === c || "function" === typeof c) (d = c), (c = b);
          !1 === d && (d = m);
          return this.each(function () {
            l.event.remove(this, a, d, c);
          });
        },
        trigger: function (a, b) {
          return this.each(function () {
            l.event.trigger(a, b, this);
          });
        },
        triggerHandler: function (a, b) {
          var c = this[0];
          if (c) return l.event.trigger(a, b, c, !0);
        },
      });
      var Mb = /^.[^:#\[\.,]*$/,
        Rb = /^(?:parents|prev(?:Until|All))/,
        wb = l.expr.match.needsContext,
        Sb = { children: !0, contents: !0, next: !0, prev: !0 };
      l.fn.extend({
        find: function (a) {
          var b,
            c = [],
            d = this,
            e = d.length;
          if ("string" !== typeof a)
            return this.pushStack(
              l(a).filter(function () {
                for (b = 0; b < e; b++) if (l.contains(d[b], this)) return !0;
              })
            );
          for (b = 0; b < e; b++) l.find(a, d[b], c);
          c = this.pushStack(1 < e ? l.unique(c) : c);
          c.selector = this.selector ? this.selector + " " + a : a;
          return c;
        },
        has: function (a) {
          var b,
            c = l(a, this),
            d = c.length;
          return this.filter(function () {
            for (b = 0; b < d; b++) if (l.contains(this, c[b])) return !0;
          });
        },
        not: function (a) {
          return this.pushStack(r(this, a || [], !0));
        },
        filter: function (a) {
          return this.pushStack(r(this, a || [], !1));
        },
        is: function (a) {
          return !!r(this, "string" === typeof a && wb.test(a) ? l(a) : a || [], !1).length;
        },
        closest: function (a, b) {
          for (var c, d = 0, e = this.length, f = [], g = wb.test(a) || "string" !== typeof a ? l(a, b || this.context) : 0; d < e; d++)
            for (c = this[d]; c && c !== b; c = c.parentNode)
              if (11 > c.nodeType && (g ? -1 < g.index(c) : 1 === c.nodeType && l.find.matchesSelector(c, a))) {
                f.push(c);
                break;
              }
          return this.pushStack(1 < f.length ? l.unique(f) : f);
        },
        index: function (a) {
          return a ? ("string" === typeof a ? l.inArray(this[0], l(a)) : l.inArray(a.jquery ? a[0] : a, this)) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1;
        },
        add: function (a, b) {
          var c = "string" === typeof a ? l(a, b) : l.makeArray(a && a.nodeType ? [a] : a),
            c = l.merge(this.get(), c);
          return this.pushStack(l.unique(c));
        },
        addBack: function (a) {
          return this.add(null == a ? this.prevObject : this.prevObject.filter(a));
        },
      });
      l.each(
        {
          parent: function (a) {
            return (a = a.parentNode) && 11 !== a.nodeType ? a : null;
          },
          parents: function (a) {
            return l.dir(a, "parentNode");
          },
          parentsUntil: function (a, b, c) {
            return l.dir(a, "parentNode", c);
          },
          next: function (a) {
            return q(a, "nextSibling");
          },
          prev: function (a) {
            return q(a, "previousSibling");
          },
          nextAll: function (a) {
            return l.dir(a, "nextSibling");
          },
          prevAll: function (a) {
            return l.dir(a, "previousSibling");
          },
          nextUntil: function (a, b, c) {
            return l.dir(a, "nextSibling", c);
          },
          prevUntil: function (a, b, c) {
            return l.dir(a, "previousSibling", c);
          },
          siblings: function (a) {
            return l.sibling((a.parentNode || {}).firstChild, a);
          },
          children: function (a) {
            return l.sibling(a.firstChild);
          },
          contents: function (a) {
            return l.nodeName(a, "iframe") ? a.contentDocument || a.contentWindow.document : l.merge([], a.childNodes);
          },
        },
        function (a, b) {
          l.fn[a] = function (c, d) {
            var e = l.map(this, b, c);
            "Until" !== a.slice(-5) && (d = c);
            d && "string" === typeof d && (e = l.filter(d, e));
            1 < this.length && (Sb[a] || (e = l.unique(e)), Rb.test(a) && (e = e.reverse()));
            return this.pushStack(e);
          };
        }
      );
      l.extend({
        filter: function (a, b, c) {
          var d = b[0];
          c && (a = ":not(" + a + ")");
          return 1 === b.length && 1 === d.nodeType
            ? l.find.matchesSelector(d, a)
              ? [d]
              : []
            : l.find.matches(
              a,
              l.grep(b, function (a) {
                return 1 === a.nodeType;
              })
            );
        },
        dir: function (a, c, d) {
          var e = [];
          for (a = a[c]; a && 9 !== a.nodeType && (d === b || 1 !== a.nodeType || !l(a).is(d)); ) 1 === a.nodeType && e.push(a), (a = a[c]);
          return e;
        },
        sibling: function (a, b) {
          for (var c = []; a; a = a.nextSibling) 1 === a.nodeType && a !== b && c.push(a);
          return c;
        },
      });
      var qb = "abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",
        Tb = / jQuery\d+="(?:null|\d+)"/g,
        xb = new RegExp("<(?:" + qb + ")[\\s/>]", "i"),
        jb = /^\s+/,
        yb = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
        zb = /<([\w:]+)/,
        Ab = /<tbody/i,
        Ub = /<|&#?\w+;/,
        Vb = /<(?:script|style|link)/i,
        gb = /^(?:checkbox|radio)$/i,
        Wb = /checked\s*(?:[^=]|=\s*.checked.)/i,
        Bb = /^$|\/(?:java|ecma)script/i,
        Nb = /^true\/(.*)/,
        Xb = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,
        za = {
          option: [1, "<select multiple='multiple'>", "</select>"],
          legend: [1, "<fieldset>", "</fieldset>"],
          area: [1, "<map>", "</map>"],
          param: [1, "<object>", "</object>"],
          thead: [1, "<table>", "</table>"],
          tr: [2, "<table><tbody>", "</tbody></table>"],
          col: [2, "<table><tbody></tbody><colgroup>", "</colgroup></table>"],
          td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
          _default: l.support.htmlSerialize ? [0, "", ""] : [1, "X<div>", "</div>"],
        },
        kb = n(z).appendChild(z.createElement("div"));
      za.optgroup = za.option;
      za.tbody = za.tfoot = za.colgroup = za.caption = za.thead;
      za.th = za.td;
      l.fn.extend({
        text: function (a) {
          return l.access(
            this,
            function (a) {
              return a === b ? l.text(this) : this.empty().append(((this[0] && this[0].ownerDocument) || z).createTextNode(a));
            },
            null,
            a,
            arguments.length
          );
        },
        append: function () {
          return this.domManip(arguments, function (a) {
            (1 !== this.nodeType && 11 !== this.nodeType && 9 !== this.nodeType) || u(this, a).appendChild(a);
          });
        },
        prepend: function () {
          return this.domManip(arguments, function (a) {
            if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
              var b = u(this, a);
              b.insertBefore(a, b.firstChild);
            }
          });
        },
        before: function () {
          return this.domManip(arguments, function (a) {
            this.parentNode && this.parentNode.insertBefore(a, this);
          });
        },
        after: function () {
          return this.domManip(arguments, function (a) {
            this.parentNode && this.parentNode.insertBefore(a, this.nextSibling);
          });
        },
        remove: function (a, b) {
          for (var c, d = a ? l.filter(a, this) : this, e = 0; null != (c = d[e]); e++)
            b || 1 !== c.nodeType || l.cleanData(w(c)), c.parentNode && (b && l.contains(c.ownerDocument, c) && Y(w(c, "script")), c.parentNode.removeChild(c));
          return this;
        },
        empty: function () {
          for (var a, b = 0; null != (a = this[b]); b++) {
            for (1 === a.nodeType && l.cleanData(w(a, !1)); a.firstChild; ) a.removeChild(a.firstChild);
            a.options && l.nodeName(a, "select") && (a.options.length = 0);
          }
          return this;
        },
        clone: function (a, b) {
          a = null == a ? !1 : a;
          b = null == b ? a : b;
          return this.map(function () {
            return l.clone(this, a, b);
          });
        },
        html: function (a) {
          return l.access(
            this,
            function (a) {
              var c = this[0] || {},
                d = 0,
                e = this.length;
              if (a === b) return 1 === c.nodeType ? c.innerHTML.replace(Tb, "") : b;
              if (!("string" !== typeof a || Vb.test(a) || (!l.support.htmlSerialize && xb.test(a)) || (!l.support.leadingWhitespace && jb.test(a)) || za[(zb.exec(a) || ["", ""])[1].toLowerCase()])) {
                a = a.replace(yb, "<$1></$2>");
                try {
                  for (; d < e; d++) (c = this[d] || {}), 1 === c.nodeType && (l.cleanData(w(c, !1)), (c.innerHTML = a));
                  c = 0;
                } catch (mc) {}
              }
              c && this.empty().append(a);
            },
            null,
            a,
            arguments.length
          );
        },
        replaceWith: function () {
          var a = l.map(this, function (a) {
              return [a.nextSibling, a.parentNode];
            }),
            b = 0;
          this.domManip(
            arguments,
            function (c) {
              var d = a[b++],
                e = a[b++];
              e && (d && d.parentNode !== e && (d = this.nextSibling), l(this).remove(), e.insertBefore(c, d));
            },
            !0
          );
          return b ? this : this.remove();
        },
        detach: function (a) {
          return this.remove(a, !0);
        },
        domManip: function (a, b, c) {
          a = Na.apply([], a);
          var d,
            e,
            f,
            g,
            h = 0,
            k = this.length,
            m = this,
            p = k - 1,
            q = a[0],
            n = l.isFunction(q);
          if (n || (!(1 >= k || "string" !== typeof q || l.support.checkClone) && Wb.test(q)))
            return this.each(function (d) {
              var e = m.eq(d);
              n && (a[0] = q.call(this, d, e.html()));
              e.domManip(a, b, c);
            });
          if (k && ((g = l.buildFragment(a, this[0].ownerDocument, !1, !c && this)), (d = g.firstChild), 1 === g.childNodes.length && (g = d), d)) {
            f = l.map(w(g, "script"), v);
            for (e = f.length; h < k; h++) (d = g), h !== p && ((d = l.clone(d, !0, !0)), e && l.merge(f, w(d, "script"))), b.call(this[h], d, h);
            if (e)
              for (g = f[f.length - 1].ownerDocument, l.map(f, I), h = 0; h < e; h++)
                (d = f[h]), Bb.test(d.type || "") && !l._data(d, "globalEval") && l.contains(g, d) && (d.src ? l._evalUrl(d.src) : l.globalEval((d.text || d.textContent || d.innerHTML || "").replace(Xb, "")));
            g = d = null;
          }
          return this;
        },
      });
      l.each({ appendTo: "append", prependTo: "prepend", insertBefore: "before", insertAfter: "after", replaceAll: "replaceWith" }, function (a, b) {
        l.fn[a] = function (a) {
          for (var c = 0, d = [], e = l(a), f = e.length - 1; c <= f; c++) (a = c === f ? this : this.clone(!0)), l(e[c])[b](a), wa.apply(d, a.get());
          return this.pushStack(d);
        };
      });
      l.extend({
        clone: function (a, b, c) {
          var d,
            e,
            f,
            g,
            h,
            k = l.contains(a.ownerDocument, a);
          l.support.html5Clone || l.isXMLDoc(a) || !xb.test("<" + a.nodeName + ">") ? (f = a.cloneNode(!0)) : ((kb.innerHTML = a.outerHTML), kb.removeChild((f = kb.firstChild)));
          if (!((l.support.noCloneEvent && l.support.noCloneChecked) || (1 !== a.nodeType && 11 !== a.nodeType) || l.isXMLDoc(a)))
            for (d = w(f), h = w(a), g = 0; null != (e = h[g]); ++g)
              if (d[g]) {
                var m = d[g],
                  p,
                  q = void 0,
                  n;
                if (1 === m.nodeType) {
                  p = m.nodeName.toLowerCase();
                  if (!l.support.noCloneEvent && m[l.expando]) {
                    n = l._data(m);
                    for (q in n.events) l.removeEvent(m, q, n.handle);
                    m.removeAttribute(l.expando);
                  }
                  if ("script" === p && m.text !== e.text) (v(m).text = e.text), I(m);
                  else if ("object" === p) m.parentNode && (m.outerHTML = e.outerHTML), l.support.html5Clone && e.innerHTML && !l.trim(m.innerHTML) && (m.innerHTML = e.innerHTML);
                  else if ("input" === p && gb.test(e.type)) (m.defaultChecked = m.checked = e.checked), m.value !== e.value && (m.value = e.value);
                  else if ("option" === p) m.defaultSelected = m.selected = e.defaultSelected;
                  else if ("input" === p || "textarea" === p) m.defaultValue = e.defaultValue;
                }
              }
          if (b)
            if (c) for (h = h || w(a), d = d || w(f), g = 0; null != (e = h[g]); g++) O(e, d[g]);
            else O(a, f);
          d = w(f, "script");
          0 < d.length && Y(d, !k && w(a, "script"));
          return f;
        },
        buildFragment: function (a, b, c, d) {
          for (var e, f, g, h, k, m, p = a.length, q = n(b), t = [], H = 0; H < p; H++)
            if ((f = a[H]) || 0 === f)
              if ("object" === l.type(f)) l.merge(t, f.nodeType ? [f] : f);
              else if (Ub.test(f)) {
                g = g || q.appendChild(b.createElement("div"));
                h = (zb.exec(f) || ["", ""])[1].toLowerCase();
                m = za[h] || za._default;
                g.innerHTML = m[1] + f.replace(yb, "<$1></$2>") + m[2];
                for (e = m[0]; e--; ) g = g.lastChild;
                !l.support.leadingWhitespace && jb.test(f) && t.push(b.createTextNode(jb.exec(f)[0]));
                if (!l.support.tbody)
                  for (e = (f = "table" !== h || Ab.test(f) ? ("<table>" !== m[1] || Ab.test(f) ? 0 : g) : g.firstChild) && f.childNodes.length; e--; )
                    l.nodeName((k = f.childNodes[e]), "tbody") && !k.childNodes.length && f.removeChild(k);
                l.merge(t, g.childNodes);
                for (g.textContent = ""; g.firstChild; ) g.removeChild(g.firstChild);
                g = q.lastChild;
              } else t.push(b.createTextNode(f));
          g && q.removeChild(g);
          l.support.appendChecked || l.grep(w(t, "input"), F);
          for (H = 0; (f = t[H++]); )
            if (!d || -1 === l.inArray(f, d)) if (((a = l.contains(f.ownerDocument, f)), (g = w(q.appendChild(f), "script")), a && Y(g), c)) for (e = 0; (f = g[e++]); ) Bb.test(f.type || "") && c.push(f);
          return q;
        },
        cleanData: function (a, b) {
          for (var c, d, e, f, g = 0, h = l.expando, k = l.cache, m = l.support.deleteExpando, p = l.event.special; null != (c = a[g]); g++)
            if (b || l.acceptData(c))
              if ((f = (e = c[h]) && k[e])) {
                if (f.events) for (d in f.events) p[d] ? l.event.remove(c, d) : l.removeEvent(c, d, f.handle);
                k[e] && (delete k[e], m ? delete c[h] : typeof c.removeAttribute !== M ? c.removeAttribute(h) : (c[h] = null), fa.push(e));
              }
        },
        _evalUrl: function (a) {
          return l.ajax({ url: a, type: "GET", dataType: "script", async: !1, global: !1, throws: !0 });
        },
      });
      l.fn.extend({
        wrapAll: function (a) {
          if (l.isFunction(a))
            return this.each(function (b) {
              l(this).wrapAll(a.call(this, b));
            });
          if (this[0]) {
            var b = l(a, this[0].ownerDocument).eq(0).clone(!0);
            this[0].parentNode && b.insertBefore(this[0]);
            b.map(function () {
              for (var a = this; a.firstChild && 1 === a.firstChild.nodeType; ) a = a.firstChild;
              return a;
            }).append(this);
          }
          return this;
        },
        wrapInner: function (a) {
          return l.isFunction(a)
            ? this.each(function (b) {
              l(this).wrapInner(a.call(this, b));
            })
            : this.each(function () {
              var b = l(this),
                c = b.contents();
              c.length ? c.wrapAll(a) : b.append(a);
            });
        },
        wrap: function (a) {
          var b = l.isFunction(a);
          return this.each(function (c) {
            l(this).wrapAll(b ? a.call(this, c) : a);
          });
        },
        unwrap: function () {
          return this.parent()
            .each(function () {
              l.nodeName(this, "body") || l(this).replaceWith(this.childNodes);
            })
            .end();
        },
      });
      var Wa,
        La,
        Ma,
        lb = /alpha\([^)]*\)/i,
        Yb = /opacity\s*=\s*([^)]*)/,
        Zb = /^(top|right|bottom|left)$/,
        $b = /^(none|table(?!-c[ea]).+)/,
        Cb = /^margin/,
        Ob = new RegExp("^(" + Aa + ")(.*)$", "i"),
        ab = new RegExp("^(" + Aa + ")(?!px)[a-z%]+$", "i"),
        ac = new RegExp("^([+-])=(" + Aa + ")", "i"),
        sb = { BODY: "block" },
        bc = { position: "absolute", visibility: "hidden", display: "block" },
        Db = { letterSpacing: 0, fontWeight: 400 },
        Ka = ["Top", "Right", "Bottom", "Left"],
        rb = ["Webkit", "O", "Moz", "ms"];
      l.fn.extend({
        css: function (a, c) {
          return l.access(
            this,
            function (a, c, d) {
              var e,
                f = {},
                g = 0;
              if (l.isArray(c)) {
                e = La(a);
                for (d = c.length; g < d; g++) f[c[g]] = l.css(a, c[g], !1, e);
                return f;
              }
              return d !== b ? l.style(a, c, d) : l.css(a, c);
            },
            a,
            c,
            1 < arguments.length
          );
        },
        show: function () {
          return E(this, !0);
        },
        hide: function () {
          return E(this);
        },
        toggle: function (a) {
          return "boolean" === typeof a
            ? a
              ? this.show()
              : this.hide()
            : this.each(function () {
              B(this) ? l(this).show() : l(this).hide();
            });
        },
      });
      l.extend({
        cssHooks: {
          opacity: {
            get: function (a, b) {
              if (b) {
                var c = Ma(a, "opacity");
                return "" === c ? "1" : c;
              }
            },
          },
        },
        cssNumber: { columnCount: !0, fillOpacity: !0, fontWeight: !0, lineHeight: !0, opacity: !0, order: !0, orphans: !0, widows: !0, zIndex: !0, zoom: !0 },
        cssProps: { float: l.support.cssFloat ? "cssFloat" : "styleFloat" },
        style: function (a, c, d, e) {
          if (a && 3 !== a.nodeType && 8 !== a.nodeType && a.style) {
            var f,
              g,
              h,
              k = l.camelCase(c),
              m = a.style;
            c = l.cssProps[k] || (l.cssProps[k] = J(m, k));
            h = l.cssHooks[c] || l.cssHooks[k];
            if (d !== b) {
              if (
                ((g = typeof d),
                "string" === g && (f = ac.exec(d)) && ((d = (f[1] + 1) * f[2] + parseFloat(l.css(a, c))), (g = "number")),
                  !(
                    null == d ||
                    ("number" === g && isNaN(d)) ||
                    ("number" !== g || l.cssNumber[k] || (d += "px"), l.support.clearCloneStyle || "" !== d || 0 !== c.indexOf("background") || (m[c] = "inherit"), h && "set" in h && (d = h.set(a, d, e)) === b)
                  ))
              )
                try {
                  m[c] = d;
                } catch (pc) {}
            } else return h && "get" in h && (f = h.get(a, !1, e)) !== b ? f : m[c];
          }
        },
        css: function (a, c, d, e) {
          var f, g;
          g = l.camelCase(c);
          c = l.cssProps[g] || (l.cssProps[g] = J(a.style, g));
          (g = l.cssHooks[c] || l.cssHooks[g]) && "get" in g && (f = g.get(a, !0, d));
          f === b && (f = Ma(a, c, e));
          "normal" === f && c in Db && (f = Db[c]);
          return "" === d || d ? ((a = parseFloat(f)), !0 === d || l.isNumeric(a) ? a || 0 : f) : f;
        },
      });
      a.getComputedStyle
        ? ((La = function (b) {
          return a.getComputedStyle(b, null);
        }),
          (Ma = function (a, c, d) {
            var e,
              f = (d = d || La(a)) ? d.getPropertyValue(c) || d[c] : b,
              g = a.style;
            d &&
            ("" !== f || l.contains(a.ownerDocument, a) || (f = l.style(a, c)),
            ab.test(f) && Cb.test(c) && ((a = g.width), (c = g.minWidth), (e = g.maxWidth), (g.minWidth = g.maxWidth = g.width = f), (f = d.width), (g.width = a), (g.minWidth = c), (g.maxWidth = e)));
            return f;
          }))
        : z.documentElement.currentStyle &&
        ((La = function (a) {
          return a.currentStyle;
        }),
          (Ma = function (a, c, d) {
            var e,
              f,
              g = (d = d || La(a)) ? d[c] : b,
              h = a.style;
            null == g && h && h[c] && (g = h[c]);
            if (ab.test(g) && !Zb.test(c)) {
              d = h.left;
              if ((f = (e = a.runtimeStyle) && e.left)) e.left = a.currentStyle.left;
              h.left = "fontSize" === c ? "1em" : g;
              g = h.pixelLeft + "px";
              h.left = d;
              f && (e.left = f);
            }
            return "" === g ? "auto" : g;
          }));
      l.each(["height", "width"], function (a, b) {
        l.cssHooks[b] = {
          get: function (a, c, d) {
            if (c)
              return 0 === a.offsetWidth && $b.test(l.css(a, "display"))
                ? l.swap(a, bc, function () {
                  return sa(a, b, d);
                })
                : sa(a, b, d);
          },
          set: function (a, c, d) {
            var e = d && La(a);
            return oa(a, c, d ? V(a, b, d, l.support.boxSizing && "border-box" === l.css(a, "boxSizing", !1, e), e) : 0);
          },
        };
      });
      l.support.opacity ||
      (l.cssHooks.opacity = {
        get: function (a, b) {
          return Yb.test((b && a.currentStyle ? a.currentStyle.filter : a.style.filter) || "") ? 0.01 * parseFloat(RegExp.$1) + "" : b ? "1" : "";
        },
        set: function (a, b) {
          var c = a.style,
            d = a.currentStyle,
            e = l.isNumeric(b) ? "alpha(opacity=" + 100 * b + ")" : "",
            f = (d && d.filter) || c.filter || "";
          c.zoom = 1;
          if ((1 <= b || "" === b) && "" === l.trim(f.replace(lb, "")) && c.removeAttribute && (c.removeAttribute("filter"), "" === b || (d && !d.filter))) return;
          c.filter = lb.test(f) ? f.replace(lb, e) : f + " " + e;
        },
      });
      l(function () {
        l.support.reliableMarginRight ||
        (l.cssHooks.marginRight = {
          get: function (a, b) {
            if (b) return l.swap(a, { display: "inline-block" }, Ma, [a, "marginRight"]);
          },
        });
        !l.support.pixelPosition &&
        l.fn.position &&
        l.each(["top", "left"], function (a, b) {
          l.cssHooks[b] = {
            get: function (a, c) {
              if (c) return (c = Ma(a, b)), ab.test(c) ? l(a).position()[b] + "px" : c;
            },
          };
        });
      });
      l.expr &&
      l.expr.filters &&
      ((l.expr.filters.hidden = function (a) {
        return (0 >= a.offsetWidth && 0 >= a.offsetHeight) || (!l.support.reliableHiddenOffsets && "none" === ((a.style && a.style.display) || l.css(a, "display")));
      }),
        (l.expr.filters.visible = function (a) {
          return !l.expr.filters.hidden(a);
        }));
      l.each({ margin: "", padding: "", border: "Width" }, function (a, b) {
        l.cssHooks[a + b] = {
          expand: function (c) {
            var d = 0,
              e = {};
            for (c = "string" === typeof c ? c.split(" ") : [c]; 4 > d; d++) e[a + Ka[d] + b] = c[d] || c[d - 2] || c[0];
            return e;
          },
        };
        Cb.test(a) || (l.cssHooks[a + b].set = oa);
      });
      var cc = /%20/g,
        Pb = /\[\]$/,
        Eb = /\r?\n/g,
        dc = /^(?:submit|button|image|reset|file)$/i,
        ec = /^(?:input|select|textarea|keygen)/i;
      l.fn.extend({
        serialize: function () {
          return l.param(this.serializeArray());
        },
        serializeArray: function () {
          return this.map(function () {
            var a = l.prop(this, "elements");
            return a ? l.makeArray(a) : this;
          })
            .filter(function () {
              var a = this.type;
              return this.name && !l(this).is(":disabled") && ec.test(this.nodeName) && !dc.test(a) && (this.checked || !gb.test(a));
            })
            .map(function (a, b) {
              var c = l(this).val();
              return null == c
                ? null
                : l.isArray(c)
                  ? l.map(c, function (a) {
                    return { name: b.name, value: a.replace(Eb, "\r\n") };
                  })
                  : { name: b.name, value: c.replace(Eb, "\r\n") };
            })
            .get();
        },
      });
      l.param = function (a, c) {
        var d,
          e = [],
          f = function (a, b) {
            b = l.isFunction(b) ? b() : null == b ? "" : b;
            e[e.length] = encodeURIComponent(a) + "=" + encodeURIComponent(b);
          };
        c === b && (c = l.ajaxSettings && l.ajaxSettings.traditional);
        if (l.isArray(a) || (a.jquery && !l.isPlainObject(a)))
          l.each(a, function () {
            f(this.name, this.value);
          });
        else for (d in a) ma(d, a[d], c, f);
        return e.join("&").replace(cc, "+");
      };
      l.each(
        "blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),
        function (a, b) {
          l.fn[b] = function (a, c) {
            return 0 < arguments.length ? this.on(b, null, a, c) : this.trigger(b);
          };
        }
      );
      l.fn.extend({
        hover: function (a, b) {
          return this.mouseenter(a).mouseleave(b || a);
        },
        bind: function (a, b, c) {
          return this.on(a, null, b, c);
        },
        unbind: function (a, b) {
          return this.off(a, null, b);
        },
        delegate: function (a, b, c, d) {
          return this.on(b, a, c, d);
        },
        undelegate: function (a, b, c) {
          return 1 === arguments.length ? this.off(a, "**") : this.off(b, a || "**", c);
        },
      });
      var Ra,
        Ja,
        mb = l.now(),
        nb = /\?/,
        fc = /#.*$/,
        Fb = /([?&])_=[^&]*/,
        gc = /^(.*?):[ \t]*([^\r\n]*)\r?$/gm,
        hc = /^(?:GET|HEAD)$/,
        ic = /^\/\//,
        Gb = /^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,
        Hb = l.fn.load,
        Ib = {},
        hb = {},
        Jb = "*/".concat("*");
      try {
        Ja = ua.href;
      } catch (t) {
        (Ja = z.createElement("a")), (Ja.href = ""), (Ja = Ja.href);
      }
      Ra = Gb.exec(Ja.toLowerCase()) || [];
      l.fn.load = function (a, c, d) {
        if ("string" !== typeof a && Hb) return Hb.apply(this, arguments);
        var e,
          f,
          g,
          h = this,
          k = a.indexOf(" ");
        0 <= k && ((e = a.slice(k, a.length)), (a = a.slice(0, k)));
        l.isFunction(c) ? ((d = c), (c = b)) : c && "object" === typeof c && (g = "POST");
        0 < h.length &&
        l
          .ajax({ url: a, type: g, dataType: "html", data: c })
          .done(function (a) {
            f = arguments;
            h.html(e ? l("<div>").append(l.parseHTML(a)).find(e) : a);
          })
          .complete(
            d &&
            function (a, b) {
              h.each(d, f || [a.responseText, b, a]);
            }
          );
        return this;
      };
      l.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "), function (a, b) {
        l.fn[b] = function (a) {
          return this.on(b, a);
        };
      });
      l.extend({
        active: 0,
        lastModified: {},
        etag: {},
        ajaxSettings: {
          url: Ja,
          type: "GET",
          isLocal: /^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ra[1]),
          global: !0,
          processData: !0,
          async: !0,
          contentType: "application/x-www-form-urlencoded; charset=UTF-8",
          accepts: { "*": Jb, text: "text/plain", html: "text/html", xml: "application/xml, text/xml", json: "application/json, text/javascript" },
          contents: { xml: /xml/, html: /html/, json: /json/ },
          responseFields: { xml: "responseXML", text: "responseText", json: "responseJSON" },
          converters: { "* text": String, "text html": !0, "text json": l.parseJSON, "text xml": l.parseXML },
          flatOptions: { url: !0, context: !0 },
        },
        ajaxSetup: function (a, b) {
          return b ? C(C(a, l.ajaxSettings), b) : C(l.ajaxSettings, a);
        },
        ajaxPrefilter: S(Ib),
        ajaxTransport: S(hb),
        ajax: function (a, c) {
          function d(a, c, d, e) {
            var f, q, u, y;
            y = c;
            if (2 !== R) {
              R = 2;
              k && clearTimeout(k);
              p = b;
              h = e || "";
              v.readyState = 0 < a ? 4 : 0;
              e = (200 <= a && 300 > a) || 304 === a;
              if (d) {
                u = n;
                for (var A = v, Z, C, G, Q, T = u.contents, I = u.dataTypes; "*" === I[0]; ) I.shift(), C === b && (C = u.mimeType || A.getResponseHeader("Content-Type"));
                if (C)
                  for (Q in T)
                    if (T[Q] && T[Q].test(C)) {
                      I.unshift(Q);
                      break;
                    }
                if (I[0] in d) G = I[0];
                else {
                  for (Q in d) {
                    if (!I[0] || u.converters[Q + " " + I[0]]) {
                      G = Q;
                      break;
                    }
                    Z || (Z = Q);
                  }
                  G = G || Z;
                }
                G ? (G !== I[0] && I.unshift(G), (u = d[G])) : (u = void 0);
              }
              a: {
                d = n;
                Z = u;
                C = v;
                G = e;
                var D,
                  w,
                  da,
                  A = {},
                  T = d.dataTypes.slice();
                if (T[1]) for (w in d.converters) A[w.toLowerCase()] = d.converters[w];
                for (Q = T.shift(); Q; )
                  if ((d.responseFields[Q] && (C[d.responseFields[Q]] = Z), !da && G && d.dataFilter && (Z = d.dataFilter(Z, d.dataType)), (da = Q), (Q = T.shift())))
                    if ("*" === Q) Q = da;
                    else if ("*" !== da && da !== Q) {
                      w = A[da + " " + Q] || A["* " + Q];
                      if (!w)
                        for (D in A)
                          if (((u = D.split(" ")), u[1] === Q && (w = A[da + " " + u[0]] || A["* " + u[0]]))) {
                            !0 === w ? (w = A[D]) : !0 !== A[D] && ((Q = u[0]), T.unshift(u[1]));
                            break;
                          }
                      if (!0 !== w)
                        if (w && d["throws"]) Z = w(Z);
                        else
                          try {
                            Z = w(Z);
                          } catch (Qb) {
                            u = { state: "parsererror", error: w ? Qb : "No conversion from " + da + " to " + Q };
                            break a;
                          }
                    }
                u = { state: "success", data: Z };
              }
              if (e)
                n.ifModified && ((y = v.getResponseHeader("Last-Modified")) && (l.lastModified[g] = y), (y = v.getResponseHeader("etag")) && (l.etag[g] = y)),
                  204 === a || "HEAD" === n.type ? (y = "nocontent") : 304 === a ? (y = "notmodified") : ((y = u.state), (f = u.data), (q = u.error), (e = !q));
              else if (((q = y), a || !y)) (y = "error"), 0 > a && (a = 0);
              v.status = a;
              v.statusText = (c || y) + "";
              e ? t.resolveWith(H, [f, y, v]) : t.rejectWith(H, [v, y, q]);
              v.statusCode(ta);
              ta = b;
              m && r.trigger(e ? "ajaxSuccess" : "ajaxError", [v, n, e ? f : q]);
              L.fireWith(H, [v, y]);
              m && (r.trigger("ajaxComplete", [v, n]), --l.active || l.event.trigger("ajaxStop"));
            }
          }
          "object" === typeof a && ((c = a), (a = b));
          c = c || {};
          var e,
            f,
            g,
            h,
            k,
            m,
            p,
            q,
            n = l.ajaxSetup({}, c),
            H = n.context || n,
            r = n.context && (H.nodeType || H.jquery) ? l(H) : l.event,
            t = l.Deferred(),
            L = l.Callbacks("once memory"),
            ta = n.statusCode || {},
            u = {},
            y = {},
            R = 0,
            A = "canceled",
            v = {
              readyState: 0,
              getResponseHeader: function (a) {
                var b;
                if (2 === R) {
                  if (!q) for (q = {}; (b = gc.exec(h)); ) q[b[1].toLowerCase()] = b[2];
                  b = q[a.toLowerCase()];
                }
                return null == b ? null : b;
              },
              getAllResponseHeaders: function () {
                return 2 === R ? h : null;
              },
              setRequestHeader: function (a, b) {
                var c = a.toLowerCase();
                R || ((a = y[c] = y[c] || a), (u[a] = b));
                return this;
              },
              overrideMimeType: function (a) {
                R || (n.mimeType = a);
                return this;
              },
              statusCode: function (a) {
                var b;
                if (a)
                  if (2 > R) for (b in a) ta[b] = [ta[b], a[b]];
                  else v.always(a[v.status]);
                return this;
              },
              abort: function (a) {
                a = a || A;
                p && p.abort(a);
                d(0, a);
                return this;
              },
            };
          t.promise(v).complete = L.add;
          v.success = v.done;
          v.error = v.fail;
          n.url = ((a || n.url || Ja) + "").replace(fc, "").replace(ic, Ra[1] + "//");
          n.type = c.method || c.type || n.method || n.type;
          n.dataTypes = l
            .trim(n.dataType || "*")
            .toLowerCase()
            .match(ra) || [""];
          null == n.crossDomain &&
          ((e = Gb.exec(n.url.toLowerCase())), (n.crossDomain = !(!e || (e[1] === Ra[1] && e[2] === Ra[2] && (e[3] || ("http:" === e[1] ? "80" : "443")) === (Ra[3] || ("http:" === Ra[1] ? "80" : "443"))))));
          n.data && n.processData && "string" !== typeof n.data && (n.data = l.param(n.data, n.traditional));
          N(Ib, n, c, v);
          if (2 === R) return v;
          (m = n.global) && 0 === l.active++ && l.event.trigger("ajaxStart");
          n.type = n.type.toUpperCase();
          n.hasContent = !hc.test(n.type);
          g = n.url;
          n.hasContent || (n.data && ((g = n.url += (nb.test(g) ? "&" : "?") + n.data), delete n.data), !1 === n.cache && (n.url = Fb.test(g) ? g.replace(Fb, "$1_=" + mb++) : g + (nb.test(g) ? "&" : "?") + "_=" + mb++));
          n.ifModified && (l.lastModified[g] && v.setRequestHeader("If-Modified-Since", l.lastModified[g]), l.etag[g] && v.setRequestHeader("If-None-Match", l.etag[g]));
          ((n.data && n.hasContent && !1 !== n.contentType) || c.contentType) && v.setRequestHeader("Content-Type", n.contentType);
          v.setRequestHeader("Accept", n.dataTypes[0] && n.accepts[n.dataTypes[0]] ? n.accepts[n.dataTypes[0]] + ("*" !== n.dataTypes[0] ? ", " + Jb + "; q=0.01" : "") : n.accepts["*"]);
          for (f in n.headers) v.setRequestHeader(f, n.headers[f]);
          if (n.beforeSend && (!1 === n.beforeSend.call(H, v, n) || 2 === R)) return v.abort();
          A = "abort";
          for (f in { success: 1, error: 1, complete: 1 }) v[f](n[f]);
          if ((p = N(hb, n, c, v))) {
            v.readyState = 1;
            m && r.trigger("ajaxSend", [v, n]);
            n.async &&
            0 < n.timeout &&
            (k = setTimeout(function () {
              v.abort("timeout");
            }, n.timeout));
            try {
              (R = 1), p.send(u, d);
            } catch (tb) {
              if (2 > R) d(-1, tb);
              else throw tb;
            }
          } else d(-1, "No Transport");
          return v;
        },
        getJSON: function (a, b, c) {
          return l.get(a, b, c, "json");
        },
        getScript: function (a, c) {
          return l.get(a, b, c, "script");
        },
      });
      l.each(["get", "post"], function (a, c) {
        l[c] = function (a, d, e, f) {
          l.isFunction(d) && ((f = f || e), (e = d), (d = b));
          return l.ajax({ url: a, type: c, dataType: f, data: d, success: e });
        };
      });
      l.ajaxSetup({
        accepts: { script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript" },
        contents: { script: /(?:java|ecma)script/ },
        converters: {
          "text script": function (a) {
            l.globalEval(a);
            return a;
          },
        },
      });
      l.ajaxPrefilter("script", function (a) {
        a.cache === b && (a.cache = !1);
        a.crossDomain && ((a.type = "GET"), (a.global = !1));
      });
      l.ajaxTransport("script", function (a) {
        if (a.crossDomain) {
          var c,
            d = z.head || l("head")[0] || z.documentElement;
          return {
            send: function (b, e) {
              c = z.createElement("script");
              c.async = !0;
              a.scriptCharset && (c.charset = a.scriptCharset);
              c.src = a.url;
              c.onload = c.onreadystatechange = function (a, b) {
                if (b || !c.readyState || /loaded|complete/.test(c.readyState)) (c.onload = c.onreadystatechange = null), c.parentNode && c.parentNode.removeChild(c), (c = null), b || e(200, "success");
              };
              d.insertBefore(c, d.firstChild);
            },
            abort: function () {
              if (c) c.onload(b, !0);
            },
          };
        }
      });
      var Kb = [],
        ob = /(=)\?(?=&|$)|\?\?/;
      l.ajaxSetup({
        jsonp: "callback",
        jsonpCallback: function () {
          var a = Kb.pop() || l.expando + "_" + mb++;
          this[a] = !0;
          return a;
        },
      });
      l.ajaxPrefilter("json jsonp", function (c, d, e) {
        var f,
          g,
          h,
          k = !1 !== c.jsonp && (ob.test(c.url) ? "url" : "string" === typeof c.data && !(c.contentType || "").indexOf("application/x-www-form-urlencoded") && ob.test(c.data) && "data");
        if (k || "jsonp" === c.dataTypes[0])
          return (
            (f = c.jsonpCallback = l.isFunction(c.jsonpCallback) ? c.jsonpCallback() : c.jsonpCallback),
              k ? (c[k] = c[k].replace(ob, "$1" + f)) : !1 !== c.jsonp && (c.url += (nb.test(c.url) ? "&" : "?") + c.jsonp + "=" + f),
              (c.converters["script json"] = function () {
                h || l.error(f + " was not called");
                return h[0];
              }),
              (c.dataTypes[0] = "json"),
              (g = a[f]),
              (a[f] = function () {
                h = arguments;
              }),
              e.always(function () {
                a[f] = g;
                c[f] && ((c.jsonpCallback = d.jsonpCallback), Kb.push(f));
                h && l.isFunction(g) && g(h[0]);
                h = g = b;
              }),
              "script"
          );
      });
      var Va,
        $a,
        jc = 0,
        pb =
          a.ActiveXObject &&
          function () {
            for (var a in Va) Va[a](b, !0);
          };
      l.ajaxSettings.xhr = a.ActiveXObject
        ? function () {
          var b;
          if (!(b = !this.isLocal && K()))
            a: {
              try {
                b = new a.ActiveXObject("Microsoft.XMLHTTP");
                break a;
              } catch (G) {}
              b = void 0;
            }
          return b;
        }
        : K;
      $a = l.ajaxSettings.xhr();
      l.support.cors = !!$a && "withCredentials" in $a;
      ($a = l.support.ajax = !!$a) &&
      l.ajaxTransport(function (c) {
        if (!c.crossDomain || l.support.cors) {
          var d;
          return {
            send: function (e, f) {
              var g,
                h,
                k = c.xhr();
              c.username ? k.open(c.type, c.url, c.async, c.username, c.password) : k.open(c.type, c.url, c.async);
              if (c.xhrFields) for (h in c.xhrFields) k[h] = c.xhrFields[h];
              c.mimeType && k.overrideMimeType && k.overrideMimeType(c.mimeType);
              c.crossDomain || e["X-Requested-With"] || (e["X-Requested-With"] = "XMLHttpRequest");
              try {
                for (h in e) k.setRequestHeader(h, e[h]);
              } catch (nc) {}
              k.send((c.hasContent && c.data) || null);
              d = function (a, e) {
                var h, m, p, n;
                try {
                  if (d && (e || 4 === k.readyState))
                    if (((d = b), g && ((k.onreadystatechange = l.noop), pb && delete Va[g]), e)) 4 !== k.readyState && k.abort();
                    else {
                      n = {};
                      h = k.status;
                      m = k.getAllResponseHeaders();
                      "string" === typeof k.responseText && (n.text = k.responseText);
                      try {
                        p = k.statusText;
                      } catch (cb) {
                        p = "";
                      }
                      h || !c.isLocal || c.crossDomain ? 1223 === h && (h = 204) : (h = n.text ? 200 : 404);
                    }
                } catch (cb) {
                  e || f(-1, cb);
                }
                n && f(h, p, n, m);
              };
              c.async ? (4 === k.readyState ? setTimeout(d) : ((g = ++jc), pb && (Va || ((Va = {}), l(a).unload(pb)), (Va[g] = d)), (k.onreadystatechange = d))) : d();
            },
            abort: function () {
              d && d(b, !0);
            },
          };
        }
      });
      var Sa,
        eb,
        kc = /^(?:toggle|show|hide)$/,
        Lb = new RegExp("^(?:([+-])=|)(" + Aa + ")([a-z%]*)$", "i"),
        lc = /queueHooks$/,
        bb = [
          function (a, b, c) {
            var d,
              e,
              f,
              g,
              h,
              k = this,
              m = {},
              p = a.style,
              n = a.nodeType && B(a),
              q = l._data(a, "fxshow");
            c.queue ||
            ((g = l._queueHooks(a, "fx")),
            null == g.unqueued &&
            ((g.unqueued = 0),
              (h = g.empty.fire),
              (g.empty.fire = function () {
                g.unqueued || h();
              })),
              g.unqueued++,
              k.always(function () {
                k.always(function () {
                  g.unqueued--;
                  l.queue(a, "fx").length || g.empty.fire();
                });
              }));
            1 === a.nodeType &&
            ("height" in b || "width" in b) &&
            ((c.overflow = [p.overflow, p.overflowX, p.overflowY]),
            "inline" === l.css(a, "display") && "none" === l.css(a, "float") && (l.support.inlineBlockNeedsLayout && "inline" !== la(a.nodeName) ? (p.zoom = 1) : (p.display = "inline-block")));
            c.overflow &&
            ((p.overflow = "hidden"),
            l.support.shrinkWrapBlocks ||
            k.always(function () {
              p.overflow = c.overflow[0];
              p.overflowX = c.overflow[1];
              p.overflowY = c.overflow[2];
            }));
            for (d in b) (e = b[d]), kc.exec(e) && (delete b[d], (f = f || "toggle" === e), e !== (n ? "hide" : "show") && (m[d] = (q && q[d]) || l.style(a, d)));
            if (!l.isEmptyObject(m))
              for (d in (q ? "hidden" in q && (n = q.hidden) : (q = l._data(a, "fxshow", {})),
              f && (q.hidden = !n),
                n
                  ? l(a).show()
                  : k.done(function () {
                    l(a).hide();
                  }),
                k.done(function () {
                  var b;
                  l._removeData(a, "fxshow");
                  for (b in m) l.style(a, b, m[b]);
                }),
                m))
                (b = x(n ? q[d] : 0, d, k)), d in q || ((q[d] = b.start), n && ((b.end = b.start), (b.start = "width" === d || "height" === d ? 1 : 0)));
          },
        ],
        Xa = {
          "*": [
            function (a, b) {
              var c = this.createTween(a, b),
                d = c.cur(),
                e = Lb.exec(b),
                f = (e && e[3]) || (l.cssNumber[a] ? "" : "px"),
                g = (l.cssNumber[a] || ("px" !== f && +d)) && Lb.exec(l.css(c.elem, a)),
                h = 1,
                k = 20;
              if (g && g[3] !== f) {
                f = f || g[3];
                e = e || [];
                g = +d || 1;
                do (h = h || ".5"), (g /= h), l.style(c.elem, a, g + f);
                while (h !== (h = c.cur() / d) && 1 !== h && --k);
              }
              e && ((g = c.start = +g || +d || 0), (c.unit = f), (c.end = e[1] ? g + (e[1] + 1) * e[2] : +e[2]));
              return c;
            },
          ],
        };
      l.Animation = l.extend(A, {
        tweener: function (a, b) {
          l.isFunction(a) ? ((b = a), (a = ["*"])) : (a = a.split(" "));
          for (var c, d = 0, e = a.length; d < e; d++) (c = a[d]), (Xa[c] = Xa[c] || []), Xa[c].unshift(b);
        },
        prefilter: function (a, b) {
          b ? bb.unshift(a) : bb.push(a);
        },
      });
      l.Tween = D;
      D.prototype = {
        constructor: D,
        init: function (a, b, c, d, e, f) {
          this.elem = a;
          this.prop = c;
          this.easing = e || "swing";
          this.options = b;
          this.start = this.now = this.cur();
          this.end = d;
          this.unit = f || (l.cssNumber[c] ? "" : "px");
        },
        cur: function () {
          var a = D.propHooks[this.prop];
          return a && a.get ? a.get(this) : D.propHooks._default.get(this);
        },
        run: function (a) {
          var b,
            c = D.propHooks[this.prop];
          this.pos = this.options.duration ? (b = l.easing[this.easing](a, this.options.duration * a, 0, 1, this.options.duration)) : (b = a);
          this.now = (this.end - this.start) * b + this.start;
          this.options.step && this.options.step.call(this.elem, this.now, this);
          c && c.set ? c.set(this) : D.propHooks._default.set(this);
          return this;
        },
      };
      D.prototype.init.prototype = D.prototype;
      D.propHooks = {
        _default: {
          get: function (a) {
            return null == a.elem[a.prop] || (a.elem.style && null != a.elem.style[a.prop]) ? ((a = l.css(a.elem, a.prop, "")) && "auto" !== a ? a : 0) : a.elem[a.prop];
          },
          set: function (a) {
            if (l.fx.step[a.prop]) l.fx.step[a.prop](a);
            else a.elem.style && (null != a.elem.style[l.cssProps[a.prop]] || l.cssHooks[a.prop]) ? l.style(a.elem, a.prop, a.now + a.unit) : (a.elem[a.prop] = a.now);
          },
        },
      };
      D.propHooks.scrollTop = D.propHooks.scrollLeft = {
        set: function (a) {
          a.elem.nodeType && a.elem.parentNode && (a.elem[a.prop] = a.now);
        },
      };
      l.each(["toggle", "show", "hide"], function (a, b) {
        var c = l.fn[b];
        l.fn[b] = function (a, d, e) {
          return null == a || "boolean" === typeof a ? c.apply(this, arguments) : this.animate(ga(b, !0), a, d, e);
        };
      });
      l.fn.extend({
        fadeTo: function (a, b, c, d) {
          return this.filter(B).css("opacity", 0).show().end().animate({ opacity: b }, a, c, d);
        },
        animate: function (a, b, c, d) {
          var e = l.isEmptyObject(a),
            f = l.speed(b, c, d);
          b = function () {
            var b = A(this, l.extend({}, a), f);
            (e || l._data(this, "finish")) && b.stop(!0);
          };
          b.finish = b;
          return e || !1 === f.queue ? this.each(b) : this.queue(f.queue, b);
        },
        stop: function (a, c, d) {
          var e = function (a) {
            var b = a.stop;
            delete a.stop;
            b(d);
          };
          "string" !== typeof a && ((d = c), (c = a), (a = b));
          c && !1 !== a && this.queue(a || "fx", []);
          return this.each(function () {
            var b = !0,
              c = null != a && a + "queueHooks",
              f = l.timers,
              g = l._data(this);
            if (c) g[c] && g[c].stop && e(g[c]);
            else for (c in g) g[c] && g[c].stop && lc.test(c) && e(g[c]);
            for (c = f.length; c--; ) f[c].elem !== this || (null != a && f[c].queue !== a) || (f[c].anim.stop(d), (b = !1), f.splice(c, 1));
            (!b && d) || l.dequeue(this, a);
          });
        },
        finish: function (a) {
          !1 !== a && (a = a || "fx");
          return this.each(function () {
            var b,
              c = l._data(this),
              d = c[a + "queue"];
            b = c[a + "queueHooks"];
            var e = l.timers,
              f = d ? d.length : 0;
            c.finish = !0;
            l.queue(this, a, []);
            b && b.stop && b.stop.call(this, !0);
            for (b = e.length; b--; ) e[b].elem === this && e[b].queue === a && (e[b].anim.stop(!0), e.splice(b, 1));
            for (b = 0; b < f; b++) d[b] && d[b].finish && d[b].finish.call(this);
            delete c.finish;
          });
        },
      });
      l.each({ slideDown: ga("show"), slideUp: ga("hide"), slideToggle: ga("toggle"), fadeIn: { opacity: "show" }, fadeOut: { opacity: "hide" }, fadeToggle: { opacity: "toggle" } }, function (a, b) {
        l.fn[a] = function (a, c, d) {
          return this.animate(b, a, c, d);
        };
      });
      l.speed = function (a, b, c) {
        var d = a && "object" === typeof a ? l.extend({}, a) : { complete: c || (!c && b) || (l.isFunction(a) && a), duration: a, easing: (c && b) || (b && !l.isFunction(b) && b) };
        d.duration = l.fx.off ? 0 : "number" === typeof d.duration ? d.duration : d.duration in l.fx.speeds ? l.fx.speeds[d.duration] : l.fx.speeds._default;
        if (null == d.queue || !0 === d.queue) d.queue = "fx";
        d.old = d.complete;
        d.complete = function () {
          l.isFunction(d.old) && d.old.call(this);
          d.queue && l.dequeue(this, d.queue);
        };
        return d;
      };
      l.easing = {
        linear: function (a) {
          return a;
        },
        swing: function (a) {
          return 0.5 - Math.cos(a * Math.PI) / 2;
        },
      };
      l.timers = [];
      l.fx = D.prototype.init;
      l.fx.tick = function () {
        var a,
          c = l.timers,
          d = 0;
        for (Sa = l.now(); d < c.length; d++) (a = c[d]), a() || c[d] !== a || c.splice(d--, 1);
        c.length || l.fx.stop();
        Sa = b;
      };
      l.fx.timer = function (a) {
        a() && l.timers.push(a) && l.fx.start();
      };
      l.fx.interval = 13;
      l.fx.start = function () {
        eb || (eb = setInterval(l.fx.tick, l.fx.interval));
      };
      l.fx.stop = function () {
        clearInterval(eb);
        eb = null;
      };
      l.fx.speeds = { slow: 600, fast: 200, _default: 400 };
      l.fx.step = {};
      l.expr &&
      l.expr.filters &&
      (l.expr.filters.animated = function (a) {
        return l.grep(l.timers, function (b) {
          return a === b.elem;
        }).length;
      });
      l.fn.offset = function (a) {
        if (arguments.length)
          return a === b
            ? this
            : this.each(function (b) {
              l.offset.setOffset(this, a, b);
            });
        var c,
          d,
          e = { top: 0, left: 0 },
          f = (d = this[0]) && d.ownerDocument;
        if (f) {
          c = f.documentElement;
          if (!l.contains(c, d)) return e;
          typeof d.getBoundingClientRect !== M && (e = d.getBoundingClientRect());
          d = aa(f);
          return { top: e.top + (d.pageYOffset || c.scrollTop) - (c.clientTop || 0), left: e.left + (d.pageXOffset || c.scrollLeft) - (c.clientLeft || 0) };
        }
      };
      l.offset = {
        setOffset: function (a, b, c) {
          var d = l.css(a, "position");
          "static" === d && (a.style.position = "relative");
          var e = l(a),
            f = e.offset(),
            g = l.css(a, "top"),
            h = l.css(a, "left"),
            k = {};
          ("absolute" === d || "fixed" === d) && -1 < l.inArray("auto", [g, h]) ? ((h = e.position()), (d = h.top), (h = h.left)) : ((d = parseFloat(g) || 0), (h = parseFloat(h) || 0));
          l.isFunction(b) && (b = b.call(a, c, f));
          null != b.top && (k.top = b.top - f.top + d);
          null != b.left && (k.left = b.left - f.left + h);
          "using" in b ? b.using.call(a, k) : e.css(k);
        },
      };
      l.fn.extend({
        position: function () {
          if (this[0]) {
            var a,
              b,
              c = { top: 0, left: 0 },
              d = this[0];
            "fixed" === l.css(d, "position")
              ? (b = d.getBoundingClientRect())
              : ((a = this.offsetParent()), (b = this.offset()), l.nodeName(a[0], "html") || (c = a.offset()), (c.top += l.css(a[0], "borderTopWidth", !0)), (c.left += l.css(a[0], "borderLeftWidth", !0)));
            return { top: b.top - c.top - l.css(d, "marginTop", !0), left: b.left - c.left - l.css(d, "marginLeft", !0) };
          }
        },
        offsetParent: function () {
          return this.map(function () {
            for (var a = this.offsetParent || ba; a && !l.nodeName(a, "html") && "static" === l.css(a, "position"); ) a = a.offsetParent;
            return a || ba;
          });
        },
      });
      l.each({ scrollLeft: "pageXOffset", scrollTop: "pageYOffset" }, function (a, c) {
        var d = /Y/.test(c);
        l.fn[a] = function (e) {
          return l.access(
            this,
            function (a, e, f) {
              var g = aa(a);
              if (f === b) return g ? (c in g ? g[c] : g.document.documentElement[e]) : a[e];
              g ? g.scrollTo(d ? l(g).scrollLeft() : f, d ? f : l(g).scrollTop()) : (a[e] = f);
            },
            a,
            e,
            arguments.length,
            null
          );
        };
      });
      l.each({ Height: "height", Width: "width" }, function (a, c) {
        l.each({ padding: "inner" + a, content: c, "": "outer" + a }, function (d, e) {
          l.fn[e] = function (e, f) {
            var g = arguments.length && (d || "boolean" !== typeof e),
              h = d || (!0 === e || !0 === f ? "margin" : "border");
            return l.access(
              this,
              function (c, d, e) {
                return l.isWindow(c)
                  ? c.document.documentElement["client" + a]
                  : 9 === c.nodeType
                    ? ((d = c.documentElement), Math.max(c.body["scroll" + a], d["scroll" + a], c.body["offset" + a], d["offset" + a], d["client" + a]))
                    : e === b
                      ? l.css(c, d, h)
                      : l.style(c, d, e, h);
              },
              c,
              g ? e : b,
              g,
              null
            );
          };
        });
      });
      l.fn.size = function () {
        return this.length;
      };
      l.fn.andSelf = l.fn.addBack;
      "object" === typeof module && module && "object" === typeof module.exports
        ? (module.exports = l)
        : ((a.jQuery = a.$ = l),
        "function" === typeof define &&
        define.amd &&
        define("jquery", [], function () {
          return l;
        }));
    })(window);
    (function (a) {
      "function" === typeof define && define.amd ? define(["jquery"], a) : "object" === typeof module && "object" === typeof module.exports ? (module.exports = a(require("jquery"))) : a(jQuery);
    })(function (a) {
      var b = (a.keyboard = function (c, d) {
        var f,
          e = this;
        e.version = "1.26.6";
        e.$el = a(c);
        e.el = c;
        e.$el.data("keyboard", e);
        e.init = function () {
          var c,
            h = b.css,
            k = b.events;
          e.settings = d || {};
          d && d.position && ((c = a.extend({}, d.position)), (d.position = null));
          e.options = f = a.extend(!0, {}, b.defaultOptions, d);
          c && ((f.position = c), (d.position = c));
          e.el.active = !0;
          e.namespace = ".keyboard" + Math.random().toString(16).slice(2);
          e.extensionNamespace = [];
          e.shiftActive = e.altActive = e.metaActive = e.sets = e.capsLock = !1;
          e.rows = ["", "-shift", "-alt", "-alt-shift"];
          e.inPlaceholder = e.$el.attr("placeholder") || "";
          e.watermark = b.watermark && "" !== e.inPlaceholder;
          e.repeatTime = 1e3 / (f.repeatRate || 20);
          f.preventDoubleEventTime = f.preventDoubleEventTime || 100;
          e.isOpen = !1;
          e.wheel = a.isFunction(a.fn.mousewheel);
          e.escapeRegex = /[-\/\\^$*+?.()|[\]{}]/g;
          c = b.keyCodes;
          e.alwaysAllowed = [c.capsLock, c.pageUp, c.pageDown, c.end, c.home, c.left, c.up, c.right, c.down, c.insert, c["delete"]];
          e.$keyboard = [];
          e.enabled = !0;
          a.isEmptyObject(f.position) || (f.position.orig_at = f.position.at);
          e.checkCaret = f.lockInput || b.checkCaretSupport();
          e.last = { start: 0, end: 0, key: "", val: "", preVal: "", layout: "", virtual: !0, keyset: [!1, !1, !1], wheel_$Keys: null, wheelIndex: 0, wheelLayers: [] };
          e.temp = ["", 0, 0];
          a.each([k.kbInit, k.kbBeforeVisible, k.kbVisible, k.kbHidden, k.inputCanceled, k.inputAccepted, k.kbBeforeClose, k.inputRestricted], function (b, c) {
            a.isFunction(f[c]) && e.$el.bind(c + e.namespace + "callbacks", f[c]);
          });
          f.alwaysOpen && (f.stayOpen = !0);
          c = a(document);
          e.el.ownerDocument !== document && (c = c.add(e.el.ownerDocument));
          var m = "keyup checkkeyboard mousedown touchstart ";
          f.closeByClickEvent && (m += "click ");
          c.bind(m.split(" ").join(e.namespace + " "), e.checkClose);
          e.$el.addClass(h.input + " " + f.css.input).attr({ "aria-haspopup": "true", role: "textbox" });
          if (f.lockInput || e.el.readOnly) (f.lockInput = !0), e.$el.addClass(h.locked).attr({ readonly: "readonly" });
          (e.$el.is(":disabled") || (e.$el.attr("readonly") && !e.$el.hasClass(h.locked))) && e.$el.addClass(h.noKeyboard);
          f.openOn && e.bindFocus();
          e.watermark || "" !== e.$el.val() || "" === e.inPlaceholder || "" === e.$el.attr("placeholder") || e.$el.addClass(h.placeholder).val(e.inPlaceholder);
          e.$el.trigger(k.kbInit, [e, e.el]);
          f.alwaysOpen && e.reveal();
        };
        e.toggle = function () {
          var a = e.$keyboard.find("." + b.css.keyToggle),
            c = !e.enabled;
          e.$preview.prop("readonly", c || e.options.lockInput);
          e.$keyboard
            .toggleClass(b.css.keyDisabled, c)
            .find("." + b.css.keyButton)
            .not(a)
            .prop("disabled", c)
            .attr("aria-disabled", c);
          a.toggleClass(b.css.keyDisabled, c);
          c && e.typing_options && (e.typing_options.text = "");
        };
        e.setCurrent = function () {
          var c = b.css,
            d = a("." + c.isCurrent),
            f = d.data("keyboard");
          a.isEmptyObject(f) || f.el === e.el || f.close(f.options.autoAccept ? "true" : !1);
          d.removeClass(c.isCurrent);
          a("." + c.hasFocus).removeClass(c.hasFocus);
          e.$el.addClass(c.isCurrent);
          e.$keyboard.addClass(c.hasFocus);
          e.isCurrent(!0);
          e.isOpen = !0;
        };
        e.isCurrent = function (a) {
          var c = b.currentKeyboard || !1;
          a ? (c = b.currentKeyboard = e.el) : !1 === a && c === e.el && (c = b.currentKeyboard = "");
          return c === e.el;
        };
        e.isVisible = function () {
          return e.$keyboard && e.$keyboard.length ? e.$keyboard.is(":visible") : !1;
        };
        e.focusOn = function () {
          (!e && e.el.active) || e.isVisible() || (clearTimeout(e.timer), e.reveal());
        };
        e.redraw = function () {
          e.$keyboard.length && ((e.last.preVal = "" + e.last.val), (e.last.val = (e.$preview && e.$preview.val()) || e.$el.val()), e.$el.val(e.last.val), e.removeKeyboard(), (e.shiftActive = e.altActive = e.metaActive = !1));
          e.isOpen = f.alwaysOpen;
          e.reveal(!0);
        };
        e.reveal = function (c) {
          var d = e.isOpen,
            g = b.css;
          e.opening = !d;
          a("." + g.keyboard)
            .not("." + g.alwaysOpen)
            .each(function () {
              var b = a(this).data("keyboard");
              a.isEmptyObject(b) || b.close(b.options.autoAccept && b.options.autoAcceptOnEsc ? "true" : !1);
            });
          if (e.$el.is(":disabled") || (e.$el.attr("readonly") && !e.$el.hasClass(g.locked))) e.$el.addClass(g.noKeyboard);
          else {
            e.$el.removeClass(g.noKeyboard);
            f.openOn && e.$el.unbind(a.trim((f.openOn + " ").split(/\s+/).join(e.namespace + " ")));
            (e.$keyboard && (!e.$keyboard || (e.$keyboard.length && !a.contains(document.body, e.$keyboard[0])))) || e.startup();
            e.watermark || e.el.value !== e.inPlaceholder || e.$el.removeClass(g.placeholder).val("");
            e.originalContent = e.$el.val();
            e.$preview.val(e.originalContent);
            f.acceptValid && e.checkValid();
            f.resetDefault && (e.shiftActive = e.altActive = e.metaActive = !1);
            e.showSet();
            e.isVisible() || e.$el.trigger(b.events.kbBeforeVisible, [e, e.el]);
            e.setCurrent();
            e.toggle();
            e.$keyboard.show();
            f.usePreview && b.msie && ("undefined" === typeof e.width && (e.$preview.hide(), (e.width = Math.ceil(e.$keyboard.width())), e.$preview.show()), e.$preview.width(e.width));
            e.position = a.isEmptyObject(f.position) ? !1 : f.position;
            a.ui &&
            a.ui.position &&
            e.position &&
            ((e.position.of = e.position.of || e.$el.data("keyboardPosition") || e.$el),
              (e.position.collision = e.position.collision || "flipfit flipfit"),
              (f.position.at = f.usePreview ? f.position.orig_at : f.position.at2),
              e.$keyboard.position(e.position));
            e.checkDecimal();
            e.lineHeight = parseInt(e.$preview.css("lineHeight"), 10) || parseInt(e.$preview.css("font-size"), 10) + 4;
            f.caretToEnd && e.saveCaret(e.originalContent.length, e.originalContent.length);
            b.allie && (0 === e.last.end && 0 < e.last.start && (e.last.end = e.last.start), 0 > e.last.start && (e.last.start = e.last.end = e.originalContent.length));
            if (d || c) return b.caret(e.$preview, e.last), e;
            e.timer2 = setTimeout(function () {
              e.opening = !1;
              /(number|email)/i.test(e.el.type) || f.caretToEnd || e.saveCaret(void 0, void 0, e.$el);
              f.initialFocus && b.caret(e.$preview, e.last);
              e.last.eventTime = new Date().getTime();
              e.$el.trigger(b.events.kbVisible, [e, e.el]);
              e.timer = setTimeout(function () {
                e && e.saveCaret();
              }, 200);
            }, 10);
            return e;
          }
        };
        e.updateLanguage = function () {
          var c = b.layouts,
            d = f.language || (c[f.layout] && c[f.layout].lang && c[f.layout].lang) || [f.language || "en"],
            k = b.language,
            d = (a.isArray(d) ? d[0] : d).split("-")[0];
          f.display = a.extend(!0, {}, k.en.display, (k[d] && k[d].display) || {}, e.settings.display);
          f.combos = a.extend(!0, {}, k.en.combos, (k[d] && k[d].combos) || {}, e.settings.combos);
          f.wheelMessage = (k[d] && k[d].wheelMessage) || k.en.wheelMessage;
          f.rtl = (c[f.layout] && c[f.layout].rtl) || (k[d] && k[d].rtl) || !1;
          e.regex = (k[d] && k[d].comboRegex) || b.comboRegex;
          e.decimal = /^\./.test(f.display.dec);
          e.$el.toggleClass("rtl", f.rtl).css("direction", f.rtl ? "rtl" : "");
        };
        e.startup = function () {
          var c = b.css;
          ((f.alwaysOpen || f.userClosed) && e.$preview) || e.makePreview();
          (e.$keyboard && e.$keyboard.length) ||
          ("custom" === f.layout && (f.layoutHash = "custom" + e.customHash()),
            (e.layout = "custom" === f.layout ? f.layoutHash : f.layout),
            (e.last.layout = e.layout),
            e.updateLanguage(),
          "undefined" === typeof b.builtLayouts[e.layout] && (a.isFunction(f.create) ? (e.$keyboard = f.create(e)) : e.$keyboard.length || e.buildKeyboard(e.layout, !0)),
            (e.$keyboard = b.builtLayouts[e.layout].$keyboard.clone()),
            e.$keyboard.data("keyboard", e),
          "" !== (e.el.id || "") && e.$keyboard.attr("id", e.el.id + b.css.idSuffix),
            e.makePreview(),
            f.usePreview ? a.isEmptyObject(f.position) || (f.position.at = f.position.orig_at) : a.isEmptyObject(f.position) || (f.position.at = f.position.at2));
          e.$decBtn = e.$keyboard.find("." + c.keyPrefix + "dec");
          (f.enterNavigation || "TEXTAREA" === e.el.nodeName) && e.alwaysAllowed.push(13);
          e.bindKeyboard();
          e.$keyboard.appendTo(f.appendLocally ? e.$el.parent() : f.appendTo || "body");
          e.bindKeys();
          f.reposition &&
          a.ui &&
          a.ui.position &&
          "body" == f.appendTo &&
          a(window).bind("resize" + e.namespace, function () {
            e.position && e.isVisible() && e.$keyboard.position(e.position);
          });
        };
        e.makePreview = function () {
          if (f.usePreview) {
            var c,
              d,
              k,
              m,
              p = b.css;
            e.$preview = e.$el
              .clone(!1)
              .data("keyboard", e)
              .removeClass(p.placeholder + " " + p.input)
              .addClass(p.preview + " " + f.css.input)
              .attr("tabindex", "-1")
              .show();
            e.preview = e.$preview[0];
            "number" === e.preview.type && (e.preview.type = "text");
            m = /^(data-|id|aria-haspopup)/i;
            d = e.$preview.get(0).attributes;
            for (c = d.length - 1; 0 <= c; c--) (k = d[c] && d[c].name), m.test(k) && e.preview.removeAttribute(k);
            a("<div />").addClass(p.wrapper).append(e.$preview).prependTo(e.$keyboard);
          } else (e.$preview = e.$el), (e.preview = e.el);
        };
        e.saveCaret = function (a, c, d) {
          d = b.caret(d || e.$preview, a, c);
          e.last.start = "undefined" === typeof a ? d.start : a;
          e.last.end = "undefined" === typeof c ? d.end : c;
        };
        e.setScroll = function () {
          if (e.last.virtual) {
            var a, c, d, m;
            a = "TEXTAREA" === e.preview.nodeName;
            c = e.last.val.substring(0, Math.max(e.last.start, e.last.end));
            e.$previewCopy ||
            ((e.$previewCopy = e.$preview.clone().removeAttr("id").css({ position: "absolute", left: 0, zIndex: -10, visibility: "hidden" }).addClass(b.css.inputClone)),
            a || e.$previewCopy.css({ "white-space": "pre", width: 0 }),
              f.usePreview ? e.$preview.after(e.$previewCopy) : e.$keyboard.prepend(e.$previewCopy));
            a
              ? (e.$previewCopy.height(e.lineHeight).val(c), (e.preview.scrollTop = e.lineHeight * (Math.floor(e.$previewCopy[0].scrollHeight / e.lineHeight) - 1)))
              : (e.$previewCopy.val(c.replace(/\s/g, " ")),
                (d = /c/i.test(f.scrollAdjustment) ? e.preview.clientWidth / 2 : f.scrollAdjustment),
                (a = e.$previewCopy[0].scrollWidth - 1),
              "undefined" === typeof e.last.scrollWidth && ((e.last.scrollWidth = a), (e.last.direction = !0)),
                (m = e.last.scrollWidth === a ? e.last.direction : e.last.scrollWidth < a),
                (c = e.preview.clientWidth - d),
                (e.preview.scrollLeft = m ? (a < c ? 0 : a - c) : a >= e.preview.scrollWidth - c ? e.preview.scrollWidth - d : 0 < a - d ? a - d : 0),
                (e.last.scrollWidth = a),
                (e.last.direction = m));
          }
        };
        e.bindFocus = function () {
          f.openOn &&
          e &&
          e.el.active &&
          (e.$el.bind(f.openOn + e.namespace, function () {
            e.focusOn();
          }),
          a(":focus")[0] === e.el && e.$el.blur());
        };
        e.bindKeyboard = function () {
          var c,
            d = b.keyCodes,
            k = b.builtLayouts[e.layout];
          e.$preview
            .unbind(e.namespace)
            .bind("click" + e.namespace + " touchstart" + e.namespace, function () {
              f.alwaysOpen && !e.isCurrent() && e.reveal();
              e.timer2 = setTimeout(function () {
                e && e.saveCaret();
              }, 150);
            })
            .bind("keypress" + e.namespace, function (g) {
              if (f.lockInput) return !1;
              if (e.isCurrent()) {
                var h = g.charCode || g.which,
                  m = h >= d.A && h <= d.Z,
                  r = h >= d.a && h <= d.z,
                  n = (e.last.key = String.fromCharCode(h));
                e.last.virtual = !1;
                e.last.event = g;
                e.last.$key = [];
                e.checkCaret && e.saveCaret();
                h !== d.capsLock && (m || r) && ((e.capsLock = (m && !g.shiftKey) || (r && g.shiftKey)), e.capsLock && !e.shiftActive && ((e.shiftActive = !0), e.showSet()));
                if (f.restrictInput) {
                  if ((g.which === d.backSpace || 0 === g.which) && a.inArray(g.keyCode, e.alwaysAllowed)) return;
                  -1 === a.inArray(n, k.acceptedKeys) && (g.preventDefault(), (c = a.extend({}, g)), (c.type = b.events.inputRestricted), e.$el.trigger(c, [e, e.el]));
                } else if ((g.ctrlKey || g.metaKey) && (g.which === d.A || g.which === d.C || g.which === d.V || (g.which >= d.X && g.which <= d.Z))) return;
                k.hasMappedKeys && k.mappedKeys.hasOwnProperty(n) && ((e.last.key = k.mappedKeys[n]), e.insertText(e.last.key), g.preventDefault());
                "function" === typeof f.beforeInsert && (e.insertText(e.last.key), g.preventDefault());
                e.checkMaxLength();
              }
            })
            .bind("keyup" + e.namespace, function (c) {
              if (e.isCurrent()) {
                e.last.virtual = !1;
                switch (c.which) {
                  case d.tab:
                    if (e.tab && f.tabNavigation && !f.lockInput) {
                      e.shiftActive = c.shiftKey;
                      var g = b.keyaction.tab(e);
                      e.tab = !1;
                      if (!g) return !1;
                    } else c.preventDefault();
                    break;
                  case d.escape:
                    return f.ignoreEsc || e.close(f.autoAccept && f.autoAcceptOnEsc ? "true" : !1), !1;
                }
                clearTimeout(e.throttled);
                e.throttled = setTimeout(function () {
                  e && e.isVisible() && e.checkCombos();
                }, 100);
                e.checkMaxLength();
                e.last.preVal = "" + e.last.val;
                e.last.val = e.$preview.val();
                c.type = b.events.kbChange;
                c.action = e.last.key;
                e.$el.trigger(c, [e, e.el]);
                if (a.isFunction(f.change)) return (c.type = b.events.inputChange), f.change(c, e, e.el), !1;
                f.acceptValid && f.autoAcceptOnValid && a.isFunction(f.validate) && f.validate(e, e.$preview.val()) && (e.$preview.blur(), e.accept());
              }
            })
            .bind("keydown" + e.namespace, function (a) {
              f.alwaysOpen && !e.isCurrent() && e.reveal();
              if (a.which === d.tab) return (e.tab = !0), !1;
              if (f.lockInput) return !1;
              e.last.virtual = !1;
              switch (a.which) {
                case d.backSpace:
                  b.keyaction.bksp(e, null, a);
                  a.preventDefault();
                  break;
                case d.enter:
                  b.keyaction.enter(e, null, a);
                  break;
                case d.capsLock:
                  e.shiftActive = e.capsLock = !e.capsLock;
                  e.showSet();
                  break;
                case d.V:
                  if (a.ctrlKey || a.metaKey) f.preventPaste ? a.preventDefault() : e.checkCombos();
              }
            })
            .bind(["mouseup", "touchend", ""].join(e.namespace + " "), function () {
              e.last.virtual = !0;
              e.saveCaret();
            });
          e.$keyboard.bind(["mousedown", "click", "touchstart", ""].join(e.namespace + " "), function (b) {
            b.stopPropagation();
            e.isCurrent() || (e.reveal(), a(document).trigger("checkkeyboard" + e.namespace));
            !f.noFocus && e.$preview && e.$preview.focus();
          });
          f.preventPaste &&
          (e.$preview.bind("contextmenu" + e.namespace, function (a) {
            a.preventDefault();
          }),
            e.$el.bind("contextmenu" + e.namespace, function (a) {
              a.preventDefault();
            }));
        };
        e.bindKeys = function () {
          var c = b.css;
          e.$allKeys = e.$keyboard
            .find("button." + c.keyButton)
            .unbind(e.namespace + " " + e.namespace + "kb")
            .bind(["mouseenter", "mouseleave", "touchstart", ""].join(e.namespace + " "), function (c) {
              (!f.alwaysOpen && !f.userClosed) || "mouseleave" === c.type || e.isCurrent() || (e.reveal(), e.$preview.focus(), b.caret(e.$preview, e.last));
              if (e.isCurrent()) {
                var d,
                  g = e.last,
                  h = a(this),
                  q = c.type;
                f.useWheel &&
                e.wheel &&
                ((c = e.getLayers(h)),
                  (d = (c.length
                    ? c
                      .map(function () {
                        return a(this).attr("data-value") || "";
                      })
                      .get()
                    : "") || [h.text()]),
                  (g.wheel_$Keys = c),
                  (g.wheelLayers = d),
                  (g.wheelIndex = a.inArray(h.attr("data-value"), d)));
                ("mouseenter" !== q && "touchstart" !== q) ||
                "password" === e.el.type ||
                h.hasClass(f.css.buttonDisabled) ||
                (h.addClass(f.css.buttonHover),
                f.useWheel &&
                e.wheel &&
                h.attr("title", function (a, b) {
                  return e.wheel && "" === b && e.sets && 1 < d.length && "touchstart" !== q ? f.wheelMessage : b;
                }));
                "mouseleave" === q &&
                (h.removeClass("password" === e.el.type ? "" : f.css.buttonHover),
                f.useWheel &&
                e.wheel &&
                ((g.wheelIndex = 0),
                  (g.wheelLayers = []),
                  (g.wheel_$Keys = null),
                  h
                    .attr("title", function (a, b) {
                      return b === f.wheelMessage ? "" : b;
                    })
                    .html(h.attr("data-html"))));
              }
            })
            .bind(f.keyBinding.split(" ").join(e.namespace + " ") + e.namespace + " " + b.events.kbRepeater, function (d) {
              d.preventDefault();
              if (!e.$keyboard.is(":visible")) return !1;
              var g,
                h = e.last,
                p = a(this),
                q = new Date().getTime();
              f.useWheel && e.wheel && (p = (g = h.wheel_$Keys) && -1 < h.wheelIndex ? g.eq(h.wheelIndex) : p);
              g = p.attr("data-action");
              if (!(q - (h.eventTime || 0) < f.preventDoubleEventTime)) {
                h.eventTime = q;
                h.event = d;
                h.virtual = !0;
                f.noFocus || e.$preview.focus();
                h.$key = p;
                h.key = p.attr("data-value");
                e.checkCaret && b.caret(e.$preview, h);
                g.match("meta") && (g = "meta");
                if (g === h.key && "string" === typeof b.keyaction[g]) h.key = g = b.keyaction[g];
                else if (g in b.keyaction && a.isFunction(b.keyaction[g])) {
                  if (!1 === b.keyaction[g](e, this, d)) return !1;
                  g = null;
                }
                "undefined" !== typeof g &&
                null !== g &&
                ((h.key = a(this).hasClass(c.keyAction) ? g : h.key), e.insertText(h.key), e.capsLock || f.stickyShift || d.shiftKey || ((e.shiftActive = !1), e.showSet(p.attr("data-name"))));
                b.caret(e.$preview, h);
                e.checkCombos();
                d.type = b.events.kbChange;
                d.action = h.key;
                e.$el.trigger(d, [e, e.el]);
                h.preVal = "" + h.val;
                h.val = e.$preview.val();
                if (a.isFunction(f.change)) return (d.type = b.events.inputChange), f.change(d, e, e.el), !1;
              }
            })
            .bind("mouseup" + e.namespace + " " + ["mouseleave", "touchend", "touchmove", "touchcancel", ""].join(e.namespace + "kb "), function (c) {
              e.last.virtual = !0;
              var d,
                g = a(this);
              if ("touchmove" === c.type) {
                if (
                  ((d = g.offset()),
                    (d.right = d.left + g.outerWidth()),
                    (d.bottom = d.top + g.outerHeight()),
                  c.originalEvent.touches[0].pageX >= d.left && c.originalEvent.touches[0].pageX < d.right && c.originalEvent.touches[0].pageY >= d.top && c.originalEvent.touches[0].pageY < d.bottom)
                )
                  return !0;
              } else /(mouseleave|touchend|touchcancel)/i.test(c.type) ? g.removeClass(f.css.buttonHover) : (!f.noFocus && e.isCurrent() && e.isVisible() && e.$preview.focus(), e.checkCaret && b.caret(e.$preview, e.last));
              e.mouseRepeat = [!1, ""];
              clearTimeout(e.repeater);
              f.acceptValid && f.autoAcceptOnValid && a.isFunction(f.validate) && f.validate(e, e.$preview.val()) && (e.$preview.blur(), e.accept());
              return !1;
            })
            .bind("click" + e.namespace, function () {
              return !1;
            })
            .not("." + c.keyAction)
            .bind("mousewheel" + e.namespace, function (b, c) {
              if (f.useWheel && e.wheel) {
                c = c || b.deltaY;
                var d,
                  g = e.last.wheelLayers || [];
                1 < g.length ? ((d = e.last.wheelIndex + (0 < c ? -1 : 1)), d > g.length - 1 && (d = 0), 0 > d && (d = g.length - 1)) : (d = 0);
                e.last.wheelIndex = d;
                a(this).html(g[d]);
                return !1;
              }
            })
            .add("." + c.keyPrefix + ["tab", "bksp", "space", "enter"].join(",." + c.keyPrefix), e.$keyboard)
            .bind(["mousedown", "touchstart", ""].join(e.namespace + "kb "), function () {
              if (0 !== f.repeatRate) {
                var b = a(this);
                e.mouseRepeat = [!0, b];
                setTimeout(function () {
                  e && e.mouseRepeat[0] && e.mouseRepeat[1] === b && !b[0].disabled && e.repeatKey(b);
                }, f.repeatDelay);
              }
              return !1;
            });
        };
        e.insertText = function (a) {
          "function" === typeof f.beforeInsert && (a = f.beforeInsert(e.last.event, e, e.el, a));
          if ("undefined" === typeof a || !1 === a) e.last.key = "";
          else {
            var c,
              d = "\b" === a,
              g = e.$preview.val(),
              p = b.caret(e.$preview);
            c = g.length;
            p.end < p.start && (p.end = p.start);
            p.start > c && (p.end = p.start = c);
            "TEXTAREA" === e.preview.nodeName && b.msie && "\n" === g.substr(p.start, 1) && ((p.start += 1), (p.end += 1));
            "{d}" === a && ((a = ""), (p.end += 1));
            c = d && p.start === p.end;
            a = d ? "" : a;
            g = g.substr(0, p.start - (c ? 1 : 0)) + a + g.substr(p.end);
            a = p.start + (c ? -1 : a.length);
            e.$preview.val(g);
            e.saveCaret(a, a);
            e.setScroll();
          }
        };
        e.checkMaxLength = function () {
          if (e.isCurrent()) {
            var a,
              c,
              d = e.$preview.val();
            !1 !== f.maxLength &&
            d.length > f.maxLength &&
            ((a = b.caret(e.$preview).start), (c = Math.min(a, f.maxLength)), f.maxInsert || ((d = e.last.val), (c = a - 1)), e.$preview.val(d.substring(0, f.maxLength)), e.saveCaret(c, c));
            e.$decBtn.length && e.checkDecimal();
          }
        };
        e.repeatKey = function (a) {
          a.trigger(b.events.kbRepeater);
          e.mouseRepeat[0] &&
          (e.repeater = setTimeout(function () {
            e && e.repeatKey(a);
          }, e.repeatTime));
        };
        e.showKeySet = function (a) {
          "string" === typeof a
            ? ((e.last.keyset = [e.shiftActive, e.altActive, e.metaActive]),
              (e.shiftActive = /shift/i.test(a)),
              (e.altActive = /alt/i.test(a)),
              /meta/.test(a) ? ((e.metaActive = !0), e.showSet(a.match(/meta\d+/i)[0])) : ((e.metaActive = !1), e.showSet()))
            : e.showSet(a);
        };
        e.showSet = function (a) {
          f = e.options;
          var c = b.css,
            d = "." + c.keyPrefix,
            g = f.css.buttonActive,
            p = "",
            q = (e.shiftActive ? 1 : 0) + (e.altActive ? 2 : 0);
          e.shiftActive || (e.capsLock = !1);
          if (e.metaActive) {
            if (
              ((p = /meta/i.test(a) ? a : ""),
                "" === p ? (p = !0 === e.metaActive ? "" : e.metaActive) : (e.metaActive = p),
              (!f.stickyShift && e.last.keyset[2] !== e.metaActive) || ((e.shiftActive || e.altActive) && !e.$keyboard.find("." + c.keySet + "-" + p + e.rows[q]).length))
            )
              e.shiftActive = e.altActive = !1;
          } else !f.stickyShift && e.last.keyset[2] !== e.metaActive && e.shiftActive && (e.shiftActive = e.altActive = !1);
          q = (e.shiftActive ? 1 : 0) + (e.altActive ? 2 : 0);
          p = 0 !== q || e.metaActive ? ("" === p ? "" : "-" + p) : "-normal";
          e.$keyboard.find("." + c.keySet + p + e.rows[q]).length
            ? (e.$keyboard
              .find(d + "alt," + d + "shift,." + c.keyAction + "[class*=meta]")
              .removeClass(g)
              .end()
              .find(d + "alt")
              .toggleClass(g, e.altActive)
              .end()
              .find(d + "shift")
              .toggleClass(g, e.shiftActive)
              .end()
              .find(d + "lock")
              .toggleClass(g, e.capsLock)
              .end()
              .find("." + c.keySet)
              .hide()
              .end()
              .find("." + c.keyAction + d + p)
              .addClass(g),
              (e.$keyboard.find("." + c.keySet + p + e.rows[q])[0].style.display = "inline-block"),
            e.metaActive && e.$keyboard.find(d + e.metaActive).toggleClass(g, !1 !== e.metaActive),
              (e.last.keyset = [e.shiftActive, e.altActive, e.metaActive]),
              e.$el.trigger(b.events.kbKeysetChange, [e, e.el]))
            : ((e.shiftActive = e.last.keyset[0]), (e.altActive = e.last.keyset[1]), (e.metaActive = e.last.keyset[2]));
        };
        e.checkCombos = function () {
          if (!e.isVisible() && !e.$keyboard.hasClass(b.css.hasFocus)) return e.$preview.val();
          var c,
            d = e.$preview.val(),
            k = b.caret(e.$preview),
            m = b.builtLayouts[e.layout],
            p = d.length;
          if ("" === d) return f.acceptValid && e.checkValid(), d;
          k.end < k.start && (k.end = k.start);
          k.start > p && (k.end = k.start = p);
          b.msie && "\n" === d.substr(k.start, 1) && ((k.start += 1), (k.end += 1));
          f.useCombos &&
          (b.msie
            ? (d = d.replace(e.regex, function (a, b, c) {
              return f.combos.hasOwnProperty(b) ? f.combos[b][c] || a : a;
            }))
            : e.$preview.length &&
            ((c = k.start - (0 <= k.start - 2 ? 2 : 0)),
              b.caret(e.$preview, c, k.end),
              (c = (b.caret(e.$preview).text || "").replace(e.regex, function (a, b, c) {
                return f.combos.hasOwnProperty(b) ? f.combos[b][c] || a : a;
              })),
            b.caret(e.$preview).replaceStr && e.$preview.val(b.caret(e.$preview).replaceStr(c)),
              (d = e.$preview.val())));
          f.restrictInput &&
          "" !== d &&
          ((c = m.acceptedKeys.length),
            (c = m.acceptedKeysRegex),
          c ||
          ((c = a.map(m.acceptedKeys, function (a) {
            return a.replace(e.escapeRegex, "\\$&");
          })),
            (c = m.acceptedKeysRegex = new RegExp("(" + c.join("|") + ")", "g"))),
            (c = d.match(c)) ? (d = c.join("")) : ((d = ""), (p = 0)));
          k.start += d.length - p;
          k.end += d.length - p;
          e.$preview.val(d);
          e.saveCaret(k.start, k.end);
          e.setScroll();
          e.checkMaxLength();
          f.acceptValid && e.checkValid();
          return d;
        };
        e.checkValid = function () {
          var c = b.css,
            d = e.$keyboard.find("." + c.keyPrefix + "accept"),
            k = !0;
          a.isFunction(f.validate) && (k = f.validate(e, e.$preview.val(), !1));
          d.toggleClass(c.inputInvalid, !k)
            .toggleClass(c.inputValid, k)
            .attr("title", d.attr("data-title") + " (" + f.display[k ? "valid" : "invalid"] + ")");
        };
        e.checkDecimal = function () {
          (e.decimal && /\./g.test(e.preview.value)) || (!e.decimal && /\,/g.test(e.preview.value))
            ? e.$decBtn.attr({ disabled: "disabled", "aria-disabled": "true" }).removeClass(f.css.buttonHover).addClass(f.css.buttonDisabled)
            : e.$decBtn.removeAttr("disabled").attr({ "aria-disabled": "false" }).addClass(f.css.buttonDefault).removeClass(f.css.buttonDisabled);
        };
        e.getLayers = function (c) {
          var d = b.css,
            e = c.attr("data-pos");
          return c
            .closest("." + d.keyboard)
            .find('button[data-pos="' + e + '"]')
            .filter(function () {
              return (
                "" !==
                a(this)
                  .find("." + d.keyText)
                  .text()
              );
            })
            .add(c);
        };
        e.switchInput = function (b, c) {
          if (a.isFunction(f.switchInput)) f.switchInput(e, b, c);
          else {
            e.$keyboard.length && e.$keyboard.hide();
            var d;
            d = !1;
            var g = a("button, input, select, textarea, a").filter(":visible").not(":disabled"),
              h = g.index(e.$el) + (b ? 1 : -1);
            e.$keyboard.length && e.$keyboard.show();
            h > g.length - 1 && ((d = f.stopAtEnd), (h = 0));
            0 > h && ((d = f.stopAtEnd), (h = g.length - 1));
            if (!d) {
              c = e.close(c);
              if (!c) return;
              (d = g.eq(h).data("keyboard")) && d.options.openOn.length ? d.focusOn() : g.eq(h).focus();
            }
          }
          return !1;
        };
        e.close = function (c) {
          if (e.isOpen && e.$keyboard.length) {
            clearTimeout(e.throttled);
            var d = b.css,
              g = b.events,
              m = c ? e.checkCombos() : e.originalContent;
            if (c && a.isFunction(f.validate) && !f.validate(e, m, !0) && ((m = e.originalContent), (c = !1), f.cancelClose)) return;
            e.isCurrent(!1);
            e.isOpen = f.alwaysOpen || f.userClosed;
            e.$preview.val(m);
            e.$el
              .removeClass(d.isCurrent + " " + d.inputAutoAccepted)
              .addClass(c ? (!0 === c ? "" : d.inputAutoAccepted) : "")
              .val(m)
              .trigger(g.inputChange);
            f.alwaysOpen || e.$el.trigger(g.kbBeforeClose, [e, e.el, c || !1]);
            b.caret(e.$preview, e.last);
            e.$el
              .trigger(c ? g.inputAccepted : g.inputCanceled, [e, e.el])
              .trigger(f.alwaysOpen ? g.kbInactive : g.kbHidden, [e, e.el])
              .blur();
            e &&
            ((e.last.eventTime = new Date().getTime()),
            f.alwaysOpen ||
            (f.userClosed && "true" === c) ||
            !e.$keyboard.length ||
            (e.removeKeyboard(),
              (e.timer = setTimeout(function () {
                e && e.bindFocus();
              }, 500))),
            e.watermark || "" !== e.el.value || "" === e.inPlaceholder || e.$el.addClass(d.placeholder).val(e.inPlaceholder));
          }
          return !!c;
        };
        e.accept = function () {
          return e.close(!0);
        };
        e.checkClose = function (b) {
          if (!e.opening) {
            e.escClose(b);
            var c = a.keyboard.css,
              d = a(b.target);
            d.hasClass(c.input) && ((d = d.data("keyboard")), d !== e || d.$el.hasClass(c.isCurrent) || b.type !== d.options.openOn || d.focusOn());
          }
        };
        e.escClose = function (c) {
          if (c && "keyup" === c.type) return c.which !== b.keyCodes.escape || f.ignoreEsc ? "" : e.close(f.autoAccept && f.autoAcceptOnEsc ? "true" : !1);
          if (e.isOpen && ((!e.isCurrent() && e.isOpen) || (e.isOpen && c.target !== e.el)) && ((!f.stayOpen && !f.userClosed) || a(c.target).hasClass(b.css.input)))
            if ((b.allie && c.preventDefault(), f.closeByClickEvent)) {
              var d = c.target.nodeName.toLowerCase();
              ("input" !== d && "textarea" !== d && "click" !== c.type) || e.close(f.autoAccept ? "true" : !1);
            } else e.close(f.autoAccept ? "true" : !1);
        };
        e.keyBtn = a("<button />").attr({ role: "button", type: "button", "aria-disabled": "false", tabindex: "-1" }).addClass(b.css.keyButton);
        e.processName = function (a) {
          var b, c;
          b = (a || "").replace(/[^a-z0-9-_]/gi, "");
          var d = b.length,
            e = [];
          if (1 < d && a === b) return a;
          if ((d = a.length)) {
            for (b = 0; b < d; b++) (c = a[b]), e.push(/[a-z0-9-_]/i.test(c) ? (/[-_]/.test(c) && 0 !== b ? "" : c) : (0 === b ? "" : "-") + c.charCodeAt(0));
            return e.join("");
          }
          return a;
        };
        e.processKeys = function (b) {
          var c,
            d = b.split(":"),
            e = { name: null, map: "", title: "" };
          /\(.+\)/.test(d[0]) || /^:\(.+\)/.test(b) || /\([(:)]\)/.test(b)
            ? /\([(:)]\)/.test(b)
              ? (c = d[0].match(/([^(]+)\((.+)\)/)) && c.length
                ? ((e.name = c[1]), (e.map = c[2]), (e.title = 1 < d.length ? d.slice(1).join(":") : ""))
                : ((e.name = b.match(/([^(]+)/)[0]), ":" === e.name && (d = d.slice(1)), null === c && ((e.map = ":"), (d = d.slice(2))), (e.title = d.length ? d.join(":") : ""))
              : ((e.map = b.match(/\(([^()]+?)\)/)[1]),
                (b = b.replace(/\(([^()]+)\)/, "")),
                (c = b.split(":")),
                "" === c[0] ? ((e.name = ":"), (d = d.slice(1))) : (e.name = c[0]),
                (e.title = 1 < d.length ? d.slice(1).join(":") : ""))
            : ("" !== b && "" === d[0] ? ((e.name = ":"), (d = d.slice(1))) : (e.name = d[0]), (e.title = 1 < d.length ? d.slice(1).join(":") : ""));
          e.title = a.trim(e.title).replace(/_/g, " ");
          return e;
        };
        e.addKey = function (a, c, d) {
          var g = {},
            h = e.processKeys(d ? a : c),
            k = b.css;
          !d && f.display[h.name] ? ((c = e.processKeys(f.display[h.name])), (c.action = e.processKeys(a).name)) : ((c = h), (c.action = h.name));
          g.name = e.processName(h.name);
          "" !== c.map ? ((b.builtLayouts[e.layout].mappedKeys[c.map] = c.name), b.builtLayouts[e.layout].acceptedKeys.push(c.name)) : d && b.builtLayouts[e.layout].acceptedKeys.push(c.name);
          a = d ? ("" === g.name ? "" : k.keyPrefix + g.name) : k.keyAction + " " + k.keyPrefix + c.action;
          a += (2 < c.name.length ? " " + k.keyWide : "") + " " + f.css.buttonDefault;
          g.html =
            '<span class="' +
            k.keyText +
            '">' +
            c.name.replace(/[\u00A0-\u9999]/gim, function (a) {
              return "&#" + a.charCodeAt(0) + ";";
            }) +
            "</span>";
          g.$key = e.keyBtn
            .clone()
            .attr({ "data-value": d ? c.name : c.action, "data-name": c.action, "data-pos": e.temp[1] + "," + e.temp[2], "data-action": c.action, "data-html": g.html })
            .addClass(a)
            .html(g.html)
            .appendTo(e.temp[0]);
          c.map && g.$key.attr("data-mapped", c.map);
          (c.title || h.title) && g.$key.attr({ "data-title": h.title || c.title, title: h.title || c.title });
          "function" === typeof f.buildKey && ((g = f.buildKey(e, g)), (d = g.$key.html()), g.$key.attr("data-html", d));
          return g.$key;
        };
        e.customHash = function (a) {
          var b, c, d;
          c = [];
          var e = [];
          a = "undefined" === typeof a ? f.customLayout : a;
          for (b in a) a.hasOwnProperty(b) && c.push(a[b]);
          e = e.concat.apply(e, c).join(" ");
          b = 0;
          d = e.length;
          if (0 === d) return b;
          for (a = 0; a < d; a++) (c = e.charCodeAt(a)), (b = (b << 5) - b + c), (b &= b);
          return b;
        };
        e.buildKeyboard = function (c, d) {
          a.isEmptyObject(f.display) && e.updateLanguage();
          var g,
            h,
            p,
            q = b.css,
            r = 0,
            n = (b.builtLayouts[c || e.layout || f.layout] = { mappedKeys: {}, acceptedKeys: [] }),
            u = (n.acceptedKeys = f.restrictInclude ? ("" + f.restrictInclude).split(/\s+/) || [] : []),
            v = q.keyboard + " " + f.css.popup + " " + f.css.container + (f.alwaysOpen || f.userClosed ? " " + q.alwaysOpen : ""),
            I = a("<div />").addClass(v).attr({ role: "textbox" }).hide();
          (d && "custom" === f.layout) || !b.layouts.hasOwnProperty(f.layout)
            ? ((f.layout = "custom"), (v = b.layouts.custom = f.customLayout || { normal: ["{cancel}"] }))
            : (v = b.layouts[d ? f.layout : c || e.layout || f.layout]);
          a.each(v, function (b, c) {
            if ("" !== b && !/^(name|lang|rtl)$/i.test(b))
              for (
                "default" === b && (b = "normal"),
                  r++,
                  h = a("<div />")
                    .attr("name", b)
                    .addClass(q.keySet + " " + q.keySet + "-" + b)
                    .appendTo(I)
                    .toggle("normal" === b),
                  g = 0;
                g < c.length;
                g++
              )
                (p = a.trim(c[g]).replace(/\{(\.?)[\s+]?:[\s+]?(\.?)\}/g, "{$1:$2}")),
                  e.buildRow(h, g, p.split(/\s+/), u),
                  h
                    .find("." + q.keyButton + ",." + q.keySpacer)
                    .filter(":last")
                    .after('<br class="' + q.endRow + '"/>');
          });
          1 < r && (e.sets = !0);
          n.hasMappedKeys = !a.isEmptyObject(n.mappedKeys);
          return (n.$keyboard = I);
        };
        e.buildRow = function (c, d, k, m) {
          var g,
            h,
            r,
            n,
            u = b.css;
          for (r = 0; r < k.length; r++)
            if (((e.temp = [c, d, r]), (g = !1), 0 !== k[r].length))
              if (/^\{\S+\}$/.test(k[r]))
                if (
                  ((n = k[r].match(/^\{(\S+)\}$/)[1]),
                  /\!\!/.test(n) && ((n = n.replace("!!", "")), (g = !0)),
                  /^sp:((\d+)?([\.|,]\d+)?)(em|px)?$/i.test(n) &&
                  ((h = parseFloat(n.replace(/,/, ".").match(/^sp:((\d+)?([\.|,]\d+)?)(em|px)?$/i)[1] || 0)),
                    a('<span class="' + u.keyText + '"></span>')
                      .width(n.match(/px/i) ? h + "px" : 2 * h + "em")
                      .addClass(u.keySpacer)
                      .appendTo(c)),
                    /^empty(:((\d+)?([\.|,]\d+)?)(em|px)?)?$/i.test(n))
                )
                  (h = /:/.test(n) ? parseFloat(n.replace(/,/, ".").match(/^empty:((\d+)?([\.|,]\d+)?)(em|px)?$/i)[1] || 0) : ""),
                    e
                      .addKey("", " ", !0)
                      .addClass(f.css.buttonDisabled + " " + f.css.buttonEmpty)
                      .attr("aria-disabled", !0)
                      .width(h ? (n.match("px") ? h + "px" : 2 * h + "em") : "");
                else if (/^meta\d+\:?(\w+)?/i.test(n)) e.addKey(n.split(":")[0], n).addClass(u.keyHasActive);
                else
                  switch (((h = n.split(":")), h[0].toLowerCase())) {
                    case "a":
                    case "accept":
                      e.addKey("accept", n).addClass(f.css.buttonAction + " " + u.keyAction);
                      break;
                    case "alt":
                    case "altgr":
                      e.addKey("alt", n).addClass(u.keyHasActive);
                      break;
                    case "b":
                    case "bksp":
                      e.addKey("bksp", n);
                      break;
                    case "c":
                    case "cancel":
                      e.addKey("cancel", n).addClass(f.css.buttonAction + " " + u.keyAction);
                      break;
                    case "combo":
                      e.addKey("combo", n)
                        .addClass(u.keyHasActive)
                        .attr("title", function (a, b) {
                          return b + " " + f.display[f.useCombos ? "active" : "disabled"];
                        })
                        .toggleClass(f.css.buttonActive, f.useCombos);
                      break;
                    case "dec":
                      m.push(e.decimal ? "." : ",");
                      e.addKey("dec", n);
                      break;
                    case "e":
                    case "enter":
                      e.addKey("enter", n).addClass(f.css.buttonAction + " " + u.keyAction);
                      break;
                    case "lock":
                      e.addKey("lock", n).addClass(u.keyHasActive);
                      break;
                    case "s":
                    case "shift":
                      e.addKey("shift", n).addClass(u.keyHasActive);
                      break;
                    case "sign":
                      m.push("-");
                      e.addKey("sign", n);
                      break;
                    case "space":
                      m.push(" ");
                      e.addKey("space", n);
                      break;
                    case "t":
                    case "tab":
                      e.addKey("tab", n);
                      break;
                    default:
                      b.keyaction.hasOwnProperty(h[0]) && e.addKey(h[0], n).toggleClass(f.css.buttonAction + " " + u.keyAction, g);
                  }
              else (g = k[r]), e.addKey(g, g, !0);
        };
        e.removeBindings = function (b) {
          a(document).unbind(b);
          e.el.ownerDocument !== document && a(e.el.ownerDocument).unbind(b);
          a(window).unbind(b);
          e.$el.unbind(b);
        };
        e.removeKeyboard = function () {
          e.$allKeys = null;
          e.$decBtn = null;
          f.usePreview && e.$preview.removeData("keyboard");
          e.preview = null;
          e.$preview = null;
          e.$previewCopy = null;
          e.$keyboard.removeData("keyboard");
          e.$keyboard.remove();
          e.$keyboard = [];
          e.isOpen = !1;
          e.isCurrent(!1);
        };
        e.destroy = function (a) {
          var c;
          c = b.css;
          var d = e.extensionNamespace.length,
            g = [c.input, c.locked, c.placeholder, c.noKeyboard, c.alwaysOpen, f.css.input, c.isCurrent].join(" ");
          clearTimeout(e.timer);
          clearTimeout(e.timer2);
          e.$keyboard.length && e.removeKeyboard();
          e.removeBindings(e.namespace);
          e.removeBindings(e.namespace + "callbacks");
          for (c = 0; c < d; c++) e.removeBindings(e.extensionNamespace[c]);
          e.el.active = !1;
          e.$el.removeClass(g).removeAttr("aria-haspopup").removeAttr("role").removeData("keyboard");
          e = null;
          "function" === typeof a && a();
        };
        e.init();
      });
      b.keyCodes = {
        backSpace: 8,
        tab: 9,
        enter: 13,
        capsLock: 20,
        escape: 27,
        space: 32,
        pageUp: 33,
        pageDown: 34,
        end: 35,
        home: 36,
        left: 37,
        up: 38,
        right: 39,
        down: 40,
        insert: 45,
        delete: 46,
        A: 65,
        Z: 90,
        V: 86,
        C: 67,
        X: 88,
        a: 97,
        z: 122,
      };
      b.css = {
        idSuffix: "_keyboard",
        input: "ui-keyboard-input",
        inputClone: "ui-keyboard-preview-clone",
        wrapper: "ui-keyboard-preview-wrapper",
        preview: "ui-keyboard-preview",
        keyboard: "ui-keyboard",
        keySet: "ui-keyboard-keyset",
        keyButton: "ui-keyboard-button",
        keyWide: "ui-keyboard-widekey",
        keyPrefix: "ui-keyboard-",
        keyText: "ui-keyboard-text",
        keyHasActive: "ui-keyboard-hasactivestate",
        keyAction: "ui-keyboard-actionkey",
        keySpacer: "ui-keyboard-spacer",
        keyToggle: "ui-keyboard-toggle",
        keyDisabled: "ui-keyboard-disabled",
        locked: "ui-keyboard-lockedinput",
        alwaysOpen: "ui-keyboard-always-open",
        noKeyboard: "ui-keyboard-nokeyboard",
        placeholder: "ui-keyboard-placeholder",
        hasFocus: "ui-keyboard-has-focus",
        isCurrent: "ui-keyboard-input-current",
        inputValid: "ui-keyboard-valid-input",
        inputInvalid: "ui-keyboard-invalid-input",
        inputAutoAccepted: "ui-keyboard-autoaccepted",
        endRow: "ui-keyboard-button-endrow",
      };
      b.events = {
        kbChange: "keyboardChange",
        kbBeforeClose: "beforeClose",
        kbBeforeVisible: "beforeVisible",
        kbVisible: "visible",
        kbInit: "initialized",
        kbInactive: "inactive",
        kbHidden: "hidden",
        kbRepeater: "repeater",
        kbKeysetChange: "keysetChange",
        inputAccepted: "accepted",
        inputCanceled: "canceled",
        inputChange: "change",
        inputRestricted: "restricted",
      };
      b.keyaction = {
        accept: function (a) {
          a.close(!0);
          return !1;
        },
        alt: function (a) {
          a.altActive = !a.altActive;
          a.showSet();
        },
        bksp: function (a) {
          a.insertText("\b");
        },
        cancel: function (a) {
          a.close();
          return !1;
        },
        clear: function (a) {
          a.$preview.val("");
          a.$decBtn.length && a.checkDecimal();
        },
        combo: function (a) {
          var c = a.options,
            f = !c.useCombos,
            e = a.$keyboard.find("." + b.css.keyPrefix + "combo");
          c.useCombos = f;
          e.toggleClass(c.css.buttonActive, f).attr("title", e.attr("data-title") + " (" + c.display[f ? "active" : "disabled"] + ")");
          f && a.checkCombos();
          return !1;
        },
        dec: function (a) {
          a.insertText(a.decimal ? "." : ",");
        },
        del: function (a) {
          a.insertText("{d}");
        },
        default: function (a) {
          a.shiftActive = a.altActive = a.metaActive = !1;
          a.showSet();
        },
        enter: function (c, d, f) {
          d = c.el.nodeName;
          var e = c.options;
          if (f.shiftKey) return e.enterNavigation ? c.switchInput(!f[e.enterMod], !0) : c.close(!0);
          if (e.enterNavigation && ("TEXTAREA" !== d || f[e.enterMod])) return c.switchInput(!f[e.enterMod], e.autoAccept ? "true" : !1);
          "TEXTAREA" === d && a(f.target).closest("button").length && c.insertText((b.msie ? " " : "") + "\n");
        },
        lock: function (a) {
          a.last.keyset[0] = a.shiftActive = a.capsLock = !a.capsLock;
          a.showSet();
        },
        left: function (a) {
          var c = b.caret(a.$preview);
          0 <= c.start - 1 && ((a.last.start = a.last.end = c.start - 1), b.caret(a.$preview, a.last), a.setScroll());
        },
        meta: function (b, d) {
          var c = a(d);
          b.metaActive = !c.hasClass(b.options.css.buttonActive);
          b.showSet(c.attr("data-name"));
        },
        next: function (a) {
          a.switchInput(!0, a.options.autoAccept);
          return !1;
        },
        normal: function (a) {
          a.shiftActive = a.altActive = a.metaActive = !1;
          a.showSet();
        },
        prev: function (a) {
          a.switchInput(!1, a.options.autoAccept);
          return !1;
        },
        right: function (a) {
          var c = b.caret(a.$preview);
          c.start + 1 <= a.$preview.val().length && ((a.last.start = a.last.end = c.start + 1), b.caret(a.$preview, a.last), a.setScroll());
        },
        shift: function (a) {
          a.last.keyset[0] = a.shiftActive = !a.shiftActive;
          a.showSet();
        },
        sign: function (a) {
          /^\-?\d*\.?\d*$/.test(a.$preview.val()) && a.$preview.val(-1 * a.$preview.val());
        },
        space: function (a) {
          a.insertText(" ");
        },
        tab: function (a) {
          var b = a.options;
          if ("INPUT" === a.el.nodeName) return b.tabNavigation ? a.switchInput(!a.shiftActive, !0) : !1;
          a.insertText("\t");
        },
        toggle: function (a) {
          a.enabled = !a.enabled;
          a.toggle();
        },
        NBSP: " ",
        ZWSP: "​",
        ZWNJ: "‌",
        ZWJ: "‍",
        LRM: "‎",
        RLM: "‏",
      };
      b.builtLayouts = {};
      b.layouts = {
        alpha: {
          normal: ["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}", "{tab} a b c d e f g h i j [ ] \\", "k l m n o p q r s ; ' {enter}", "{shift} t u v w x y z , . / {shift}", "{accept} {space} {cancel}"],
          shift: ["~ ! @ # $ % ^ & * ( ) _ + {bksp}", "{tab} A B C D E F G H I J { } |", 'K L M N O P Q R S : " {enter}', "{shift} T U V W X Y Z < > ? {shift}", "{accept} {space} {cancel}"],
        },
        qwerty: {
          normal: ["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}", "{tab} q w e r t y u i o p [ ] \\", "a s d f g h j k l ; ' {enter}", "{shift} z x c v b n m , . / {shift}", "{accept} {space} {cancel}"],
          shift: ["~ ! @ # $ % ^ & * ( ) _ + {bksp}", "{tab} Q W E R T Y U I O P { } |", 'A S D F G H J K L : " {enter}', "{shift} Z X C V B N M < > ? {shift}", "{accept} {space} {cancel}"],
        },
        international: {
          normal: ["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}", "{tab} q w e r t y u i o p [ ] \\", "a s d f g h j k l ; ' {enter}", "{shift} z x c v b n m , . / {shift}", "{accept} {alt} {space} {alt} {cancel}"],
          shift: ["~ ! @ # $ % ^ & * ( ) _ + {bksp}", "{tab} Q W E R T Y U I O P { } |", 'A S D F G H J K L : " {enter}', "{shift} Z X C V B N M < > ? {shift}", "{accept} {alt} {space} {alt} {cancel}"],
          alt: ["~ ¡ ² ³ ¤ € ¼ ½ ¾ ‘ ’ ¥ × {bksp}", "{tab} ä å é ® þ ü ú í ó ö « » ¬", "á ß ð f g h j k ø ¶ ´ {enter}", "{shift} æ x © v b ñ µ ç > ¿ {shift}", "{accept} {alt} {space} {alt} {cancel}"],
          "alt-shift": ["~ ¹ ² ³ £ € ¼ ½ ¾ ‘ ’ ¥ ÷ {bksp}", "{tab} Ä Å É ® Þ Ü Ú Í Ó Ö « » ¦", "Ä § Ð F G H J K Ø ° ¨ {enter}", "{shift} Æ X ¢ V B Ñ µ Ç . ¿ {shift}", "{accept} {alt} {space} {alt} {cancel}"],
        },
        colemak: {
          normal: ["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}", "{tab} q w f p g j l u y ; [ ] \\", "{bksp} a r s t d h n e i o ' {enter}", "{shift} z x c v b k m , . / {shift}", "{accept} {space} {cancel}"],
          shift: ["~ ! @ # $ % ^ & * ( ) _ + {bksp}", "{tab} Q W F P G J L U Y : { } |", '{bksp} A R S T D H N E I O " {enter}', "{shift} Z X C V B K M < > ? {shift}", "{accept} {space} {cancel}"],
        },
        dvorak: {
          normal: ["` 1 2 3 4 5 6 7 8 9 0 [ ] {bksp}", "{tab} ' , . p y f g c r l / = \\", "a o e u i d h t n s - {enter}", "{shift} ; q j k x b m w v z {shift}", "{accept} {space} {cancel}"],
          shift: ["~ ! @ # $ % ^ & * ( ) { } {bksp}", '{tab} " < > P Y F G C R L ? + |', "A O E U I D H T N S _ {enter}", "{shift} : Q J K X B M W V Z {shift}", "{accept} {space} {cancel}"],
        },
        num: { normal: "= ( ) {b};{clear} / * -;7 8 9 +;4 5 6 {sign};1 2 3 %;0 {dec} {a} {c}".split(";") },
      };
      b.language = {
        en: {
          display: {
            a: "✔:Accept (Shift+Enter)",
            accept: "Accept:Accept (Shift+Enter)",
            alt: "Alt:⌥ AltGr",
            b: "⌫:Backspace",
            bksp: "Bksp:Backspace",
            c: "✖:Cancel (Esc)",
            cancel: "Cancel:Cancel (Esc)",
            clear: "C:Clear",
            combo: "ö:Toggle Combo Keys",
            dec: ".:Decimal",
            e: "⏎:Enter",
            empty: " ",
            enter: "Enter:Enter ⏎",
            left: "←",
            lock: "Lock:⇪ Caps Lock",
            next: "Next ⇨",
            prev: "⇦ Prev",
            right: "→",
            s: "⇧:Shift",
            shift: "Shift:Shift",
            sign: "±:Change Sign",
            space: " :Space",
            t: "⇥:Tab",
            tab: "⇥ Tab:Tab",
            toggle: " ",
            valid: "valid",
            invalid: "invalid",
            active: "active",
            disabled: "disabled",
          },
          wheelMessage: "Use mousewheel to see other keys",
          comboRegex: /([`\'~\^\"ao])([a-z])/gim,
          combos: {
            "`": { a: "à", A: "À", e: "è", E: "È", i: "ì", I: "Ì", o: "ò", O: "Ò", u: "ù", U: "Ù", y: "ỳ", Y: "Ỳ" },
            "'": { a: "á", A: "Á", e: "é", E: "É", i: "í", I: "Í", o: "ó", O: "Ó", u: "ú", U: "Ú", y: "ý", Y: "Ý" },
            '"': { a: "ä", A: "Ä", e: "ë", E: "Ë", i: "ï", I: "Ï", o: "ö", O: "Ö", u: "ü", U: "Ü", y: "ÿ", Y: "Ÿ" },
            "^": { a: "â", A: "Â", e: "ê", E: "Ê", i: "î", I: "Î", o: "ô", O: "Ô", u: "û", U: "Û", y: "ŷ", Y: "Ŷ" },
            "~": { a: "ã", A: "Ã", e: "ẽ", E: "Ẽ", i: "ĩ", I: "Ĩ", o: "õ", O: "Õ", u: "ũ", U: "Ũ", y: "ỹ", Y: "Ỹ", n: "ñ", N: "Ñ" },
          },
        },
      };
      b.defaultOptions = {
        language: null,
        rtl: !1,
        layout: "qwerty",
        customLayout: null,
        position: { of: null, my: "center top", at: "center top", at2: "center bottom" },
        reposition: !0,
        usePreview: !0,
        alwaysOpen: !1,
        initialFocus: !0,
        noFocus: !1,
        stayOpen: !1,
        userClosed: !1,
        ignoreEsc: !1,
        closeByClickEvent: !1,
        css: {
          input: "ui-widget-content ui-corner-all",
          container: "ui-widget-content ui-widget ui-corner-all ui-helper-clearfix",
          popup: "",
          buttonDefault: "ui-state-default ui-corner-all",
          buttonHover: "ui-state-hover",
          buttonAction: "ui-state-active",
          buttonActive: "ui-state-active",
          buttonDisabled: "ui-state-disabled",
          buttonEmpty: "ui-keyboard-empty",
        },
        autoAccept: !1,
        autoAcceptOnEsc: !1,
        lockInput: !1,
        restrictInput: !1,
        restrictInclude: "",
        acceptValid: !1,
        autoAcceptOnValid: !1,
        cancelClose: !0,
        tabNavigation: !1,
        enterNavigation: !1,
        enterMod: "altKey",
        stopAtEnd: !0,
        appendLocally: !1,
        appendTo: "body",
        stickyShift: !0,
        preventPaste: !1,
        caretToEnd: !1,
        scrollAdjustment: 10,
        maxLength: !1,
        maxInsert: !0,
        repeatDelay: 500,
        repeatRate: 20,
        resetDefault: !0,
        openOn: "focus",
        keyBinding: "mousedown touchstart",
        useWheel: !0,
        useCombos: !0,
        validate: function (a, b, f) {
          return !0;
        },
      };
      b.comboRegex = /([`\'~\^\"ao])([a-z])/gim;
      b.currentKeyboard = "";
      a('\x3c!--[if lte IE 8]><script>jQuery("body").addClass("oldie");\x3c/script><![endif]--\x3e\x3c!--[if IE]><script>jQuery("body").addClass("ie");\x3c/script><![endif]--\x3e').appendTo("body").remove();
      b.msie = a("body").hasClass("oldie");
      b.allie = a("body").hasClass("ie");
      b.watermark = "undefined" !== typeof document.createElement("input").placeholder;
      b.checkCaretSupport = function () {
        if ("boolean" !== typeof b.checkCaret) {
          var c = a('<div style="height:0px;width:0px;overflow:hidden;position:fixed;top:0;left:-100px;"><input type="text" value="testing"/></div>').prependTo("body");
          b.caret(c.find("input"), 3, 3);
          b.checkCaret = 3 !== b.caret(c.find("input").hide().show()).start;
          c.remove();
        }
        return b.checkCaret;
      };
      b.caret = function (a, b, f) {
        if (!a || !a.length || a.is(":hidden") || "hidden" === a.css("visibility")) return {};
        var c,
          d,
          h,
          k = a.data("keyboard");
        (k = k && k.options.noFocus) || a.focus();
        if ("undefined" !== typeof b)
          return (
            "object" === typeof b && "start" in b && "end" in b ? ((c = b.start), (d = b.end)) : "undefined" === typeof f && (f = b),
              "number" === typeof b && "number" === typeof f ? ((c = b), (d = f)) : "start" === b ? (c = d = 0) : "string" === typeof b && (c = d = a.val().length),
              a.caret(c, d, k)
          );
        b = a.caret();
        c = b.start;
        d = b.end;
        h = a[0].value || a.text() || "";
        return {
          start: c,
          end: d,
          text: h.substring(c, d),
          replaceStr: function (a) {
            return h.substring(0, c) + a + h.substring(d, h.length);
          },
        };
      };
      a.fn.keyboard = function (b) {
        return this.each(function () {
          a(this).data("keyboard") || new a.keyboard(this, b);
        });
      };
      a.fn.getkeyboard = function () {
        return this.data("keyboard");
      };
      a.fn.caret = function (a, b, f) {
        if ("undefined" === typeof this[0] || this.is(":hidden") || "hidden" === this.css("visibility")) return this;
        var c, d, h;
        c = document.selection;
        var k = this[0];
        h = k.scrollTop;
        var m = !1,
          p = !0;
        try {
          m = "selectionStart" in k;
        } catch (q) {
          p = !1;
        }
        if (p && "undefined" !== typeof a)
          return (
            /(email|number)/i.test(k.type) || (m ? ((k.selectionStart = a), (k.selectionEnd = b)) : ((c = k.createTextRange()), c.collapse(!0), c.moveStart("character", a), c.moveEnd("character", b - a), c.select())),
            f || (!this.is(":visible") && "hidden" === this.css("visibility")) || k.focus(),
              (k.scrollTop = h),
              this
          );
        /(email|number)/i.test(k.type)
          ? (a = b = this.val().length)
          : m
            ? ((a = k.selectionStart), (b = k.selectionEnd))
            : c
              ? "TEXTAREA" === k.nodeName
                ? ((h = this.val()), (f = c.createRange()), (c = f.duplicate()), c.moveToElementText(k), c.setEndPoint("EndToEnd", f), (a = c.text.replace(/\r/g, "\n").length), (b = a + f.text.replace(/\r/g, "\n").length))
                : ((h = this.val().replace(/\r/g, "\n")),
                  (f = c.createRange().duplicate()),
                  f.moveEnd("character", h.length),
                  (a = "" === f.text ? h.length : h.lastIndexOf(f.text)),
                  (f = c.createRange().duplicate()),
                  f.moveStart("character", -h.length),
                  (b = f.text.length))
              : (a = b = (k.value || "").length);
        d = k.value || "";
        return {
          start: a,
          end: b,
          text: d.substring(a, b),
          replace: function (c) {
            return d.substring(0, a) + c + d.substring(b, d.length);
          },
        };
      };
      return b;
    });
    (function (a, b) {
      a.version = "0.9.6";
      a.protocol = 1;
      a.transports = [];
      a.j = [];
      a.sockets = {};
      a.connect = function (c, d) {
        var f = a.util.parseUri(c),
          e,
          g;
        b && b.location && ((f.protocol = f.protocol || b.location.protocol.slice(0, -1)), (f.host = f.host || (b.document ? b.document.domain : b.location.hostname)), (f.port = f.port || b.location.port));
        e = a.util.uniqueUri(f);
        var h = { host: f.host, secure: "https" == f.protocol, port: f.port || ("https" == f.protocol ? 443 : 80), query: f.query || "" };
        a.util.merge(h, d);
        if (h["force new connection"] || !a.sockets[e]) g = new a.Socket(h);
        !h["force new connection"] && g && (a.sockets[e] = g);
        g = g || a.sockets[e];
        return g.of(1 < f.path.length ? f.path : "");
      };
    })("object" === typeof module ? module.exports : (this.io = {}), this);
    (function (a, b) {
      var c = (a.util = {}),
        d = /^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,
        f = "source protocol authority userInfo user password host port relative path directory file query anchor".split(" ");
      c.parseUri = function (a) {
        a = d.exec(a || "");
        for (var b = {}, c = 14; c--; ) b[f[c]] = a[c] || "";
        return b;
      };
      c.uniqueUri = function (a) {
        var c = a.protocol,
          d = a.host;
        a = a.port;
        "document" in b ? ((d = d || document.domain), (a = a || ("https" == c && "https:" !== document.location.protocol ? 443 : document.location.port))) : ((d = d || "localhost"), a || "https" != c || (a = 443));
        return (c || "http") + "://" + d + ":" + (a || 80);
      };
      c.query = function (a, b) {
        var d = c.chunkQuery(a || ""),
          e = [];
        c.merge(d, c.chunkQuery(b || ""));
        for (var f in d) d.hasOwnProperty(f) && e.push(f + "=" + d[f]);
        return e.length ? "?" + e.join("&") : "";
      };
      c.chunkQuery = function (a) {
        var b = {};
        a = a.split("&");
        for (var c = 0, d = a.length, e; c < d; ++c) (e = a[c].split("=")), e[0] && (b[e[0]] = e[1]);
        return b;
      };
      var e = !1;
      c.load = function (a) {
        if (("document" in b && "complete" === document.readyState) || e) return a();
        c.on(b, "load", a, !1);
      };
      c.on = function (a, b, c, d) {
        a.attachEvent ? a.attachEvent("on" + b, c) : a.addEventListener && a.addEventListener(b, c, d);
      };
      c.request = function (a) {
        if (a && "undefined" != typeof XDomainRequest) return new XDomainRequest();
        if ("undefined" != typeof XMLHttpRequest && (!a || c.ua.hasCORS)) return new XMLHttpRequest();
        if (!a)
          try {
            return new window[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP");
          } catch (h) {}
        return null;
      };
      "undefined" != typeof window &&
      c.load(function () {
        e = !0;
      });
      c.defer = function (a) {
        if (!c.ua.webkit || "undefined" != typeof importScripts) return a();
        c.load(function () {
          setTimeout(a, 100);
        });
      };
      c.merge = function (a, b, d, e) {
        e = e || [];
        d = "undefined" == typeof d ? 2 : d;
        for (var f in b) b.hasOwnProperty(f) && 0 > c.indexOf(e, f) && ("object" === typeof a[f] && d ? c.merge(a[f], b[f], d - 1, e) : ((a[f] = b[f]), e.push(b[f])));
        return a;
      };
      c.mixin = function (a, b) {
        c.merge(a.prototype, b.prototype);
      };
      c.inherit = function (a, b) {
        function c() {}
        c.prototype = b.prototype;
        a.prototype = new c();
      };
      c.isArray =
        Array.isArray ||
        function (a) {
          return "[object Array]" === Object.prototype.toString.call(a);
        };
      c.intersect = function (a, b) {
        for (var d = [], e = a.length > b.length ? a : b, f = a.length > b.length ? b : a, g = 0, h = f.length; g < h; g++) ~c.indexOf(e, f[g]) && d.push(f[g]);
        return d;
      };
      c.indexOf = function (a, b, c) {
        var d = a.length;
        for (c = 0 > c ? (0 > c + d ? 0 : c + d) : c || 0; c < d && a[c] !== b; c++);
        return d <= c ? -1 : c;
      };
      c.toArray = function (a) {
        for (var b = [], c = 0, d = a.length; c < d; c++) b.push(a[c]);
        return b;
      };
      c.ua = {};
      c.ua.hasCORS =
        "undefined" != typeof XMLHttpRequest &&
        (function () {
          try {
            var a = new XMLHttpRequest();
          } catch (h) {
            return !1;
          }
          return void 0 != a.withCredentials;
        })();
      c.ua.webkit = "undefined" != typeof navigator && /webkit/i.test(navigator.userAgent);
    })("undefined" != typeof io ? io : module.exports, this);
    (function (a, b) {
      function c() {}
      a.EventEmitter = c;
      c.prototype.on = function (a, c) {
        this.$events || (this.$events = {});
        this.$events[a] ? (b.util.isArray(this.$events[a]) ? this.$events[a].push(c) : (this.$events[a] = [this.$events[a], c])) : (this.$events[a] = c);
        return this;
      };
      c.prototype.addListener = c.prototype.on;
      c.prototype.once = function (a, b) {
        function c() {
          d.removeListener(a, c);
          b.apply(this, arguments);
        }
        var d = this;
        c.listener = b;
        this.on(a, c);
        return this;
      };
      c.prototype.removeListener = function (a, c) {
        if (this.$events && this.$events[a]) {
          var d = this.$events[a];
          if (b.util.isArray(d)) {
            for (var f = -1, h = 0, k = d.length; h < k; h++)
              if (d[h] === c || (d[h].listener && d[h].listener === c)) {
                f = h;
                break;
              }
            if (0 > f) return this;
            d.splice(f, 1);
            d.length || delete this.$events[a];
          } else (d === c || (d.listener && d.listener === c)) && delete this.$events[a];
        }
        return this;
      };
      c.prototype.removeAllListeners = function (a) {
        this.$events && this.$events[a] && (this.$events[a] = null);
        return this;
      };
      c.prototype.listeners = function (a) {
        this.$events || (this.$events = {});
        this.$events[a] || (this.$events[a] = []);
        b.util.isArray(this.$events[a]) || (this.$events[a] = [this.$events[a]]);
        return this.$events[a];
      };
      c.prototype.emit = function (a) {
        if (!this.$events) return !1;
        var c = this.$events[a];
        if (!c) return !1;
        var d = Array.prototype.slice.call(arguments, 1);
        if ("function" == typeof c) c.apply(this, d);
        else if (b.util.isArray(c)) for (var c = c.slice(), g = 0, h = c.length; g < h; g++) c[g].apply(this, d);
        else return !1;
        return !0;
      };
    })("undefined" != typeof io ? io : module.exports, "undefined" != typeof io ? io : module.parent.exports);
    (function (a, b) {
      function c(a) {
        return 10 > a ? "0" + a : a;
      }
      function d(a) {
        h.lastIndex = 0;
        return h.test(a)
          ? '"' +
          a.replace(h, function (a) {
            var b = p[a];
            return "string" === typeof b ? b : "\\u" + ("0000" + a.charCodeAt(0).toString(16)).slice(-4);
          }) +
          '"'
          : '"' + a + '"';
      }
      function f(a, b) {
        var e,
          g,
          h,
          p,
          n = k,
          r,
          F = b[a];
        F instanceof Date &&
        (F = isFinite(a.valueOf()) ? a.getUTCFullYear() + "-" + c(a.getUTCMonth() + 1) + "-" + c(a.getUTCDate()) + "T" + c(a.getUTCHours()) + ":" + c(a.getUTCMinutes()) + ":" + c(a.getUTCSeconds()) + "Z" : null);
        "function" === typeof q && (F = q.call(b, a, F));
        switch (typeof F) {
          case "string":
            return d(F);
          case "number":
            return isFinite(F) ? String(F) : "null";
          case "boolean":
          case "null":
            return String(F);
          case "object":
            if (!F) return "null";
            k += m;
            r = [];
            if ("[object Array]" === Object.prototype.toString.apply(F)) {
              p = F.length;
              for (e = 0; e < p; e += 1) r[e] = f(e, F) || "null";
              h = 0 === r.length ? "[]" : k ? "[\n" + k + r.join(",\n" + k) + "\n" + n + "]" : "[" + r.join(",") + "]";
              k = n;
              return h;
            }
            if (q && "object" === typeof q) for (p = q.length, e = 0; e < p; e += 1) "string" === typeof q[e] && ((g = q[e]), (h = f(g, F)) && r.push(d(g) + (k ? ": " : ":") + h));
            else for (g in F) Object.prototype.hasOwnProperty.call(F, g) && (h = f(g, F)) && r.push(d(g) + (k ? ": " : ":") + h);
            h = 0 === r.length ? "{}" : k ? "{\n" + k + r.join(",\n" + k) + "\n" + n + "}" : "{" + r.join(",") + "}";
            k = n;
            return h;
        }
      }
      if (b && b.parse) return (a.JSON = { parse: b.parse, stringify: b.stringify });
      var e = (a.JSON = {}),
        g = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
        h = /[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
        k,
        m,
        p = { "\b": "\\b", "\t": "\\t", "\n": "\\n", "\f": "\\f", "\r": "\\r", '"': '\\"', "\\": "\\\\" },
        q;
      e.stringify = function (a, b, c) {
        var d;
        m = k = "";
        if ("number" === typeof c) for (d = 0; d < c; d += 1) m += " ";
        else "string" === typeof c && (m = c);
        if ((q = b) && "function" !== typeof b && ("object" !== typeof b || "number" !== typeof b.length)) throw Error("JSON.stringify");
        return f("", { "": a });
      };
      e.parse = function (a, b) {
        function c(a, d) {
          var e,
            f,
            g = a[d];
          if (g && "object" === typeof g) for (e in g) Object.prototype.hasOwnProperty.call(g, e) && ((f = c(g, e)), void 0 !== f ? (g[e] = f) : delete g[e]);
          return b.call(a, d, g);
        }
        var d;
        a = String(a);
        g.lastIndex = 0;
        g.test(a) &&
        (a = a.replace(g, function (a) {
          return "\\u" + ("0000" + a.charCodeAt(0).toString(16)).slice(-4);
        }));
        if (
          /^[\],:{}\s]*$/.test(
            a
              .replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, "@")
              .replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, "]")
              .replace(/(?:^|:|,)(?:\s*\[)+/g, "")
          )
        )
          return (d = eval("(" + a + ")")), "function" === typeof b ? c({ "": d }, "") : d;
        throw new SyntaxError("JSON.parse");
      };
    })("undefined" != typeof io ? io : module.exports, "undefined" !== typeof JSON ? JSON : void 0);
    (function (a, b) {
      var c = (a.parser = {}),
        d = (c.packets = "disconnect connect heartbeat message json event ack error noop".split(" ")),
        f = (c.reasons = ["transport not supported", "client not handshaken", "unauthorized"]),
        e = (c.advice = ["reconnect"]),
        g = b.JSON,
        h = b.util.indexOf;
      c.encodePacket = function (a) {
        var b = h(d, a.type),
          c = a.id || "",
          k = a.endpoint || "",
          m = a.ack,
          u = null;
        switch (a.type) {
          case "error":
            var v = a.reason ? h(f, a.reason) : "";
            a = a.advice ? h(e, a.advice) : "";
            if ("" !== v || "" !== a) u = v + ("" !== a ? "+" + a : "");
            break;
          case "message":
            "" !== a.data && (u = a.data);
            break;
          case "event":
            u = { name: a.name };
            a.args && a.args.length && (u.args = a.args);
            u = g.stringify(u);
            break;
          case "json":
            u = g.stringify(a.data);
            break;
          case "connect":
            a.qs && (u = a.qs);
            break;
          case "ack":
            u = a.ackId + (a.args && a.args.length ? "+" + g.stringify(a.args) : "");
        }
        b = [b, c + ("data" == m ? "+" : ""), k];
        null !== u && void 0 !== u && b.push(u);
        return b.join(":");
      };
      c.encodePayload = function (a) {
        var b = "";
        if (1 == a.length) return a[0];
        for (var c = 0, d = a.length; c < d; c++) b += "�" + a[c].length + "�" + a[c];
        return b;
      };
      var k = /([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;
      c.decodePacket = function (a) {
        var b = a.match(k);
        if (!b) return {};
        var c = b[2] || "";
        a = b[5] || "";
        var h = { type: d[b[1]], endpoint: b[4] || "" };
        c && ((h.id = c), (h.ack = b[3] ? "data" : !0));
        switch (h.type) {
          case "error":
            b = a.split("+");
            h.reason = f[b[0]] || "";
            h.advice = e[b[1]] || "";
            break;
          case "message":
            h.data = a || "";
            break;
          case "event":
            try {
              var m = g.parse(a);
              h.name = m.name;
              h.args = m.args;
            } catch (u) {}
            h.args = h.args || [];
            break;
          case "json":
            try {
              h.data = g.parse(a);
            } catch (u) {}
            break;
          case "connect":
            h.qs = a || "";
            break;
          case "ack":
            if ((b = a.match(/^([0-9]+)(\+)?(.*)/)))
              if (((h.ackId = b[1]), (h.args = []), b[3]))
                try {
                  h.args = b[3] ? g.parse(b[3]) : [];
                } catch (u) {}
        }
        return h;
      };
      c.decodePayload = function (a) {
        if ("�" == a.charAt(0)) {
          for (var b = [], d = 1, e = ""; d < a.length; d++) "�" == a.charAt(d) ? (b.push(c.decodePacket(a.substr(d + 1).substr(0, e))), (d += Number(e) + 1), (e = "")) : (e += a.charAt(d));
          return b;
        }
        return [c.decodePacket(a)];
      };
    })("undefined" != typeof io ? io : module.exports, "undefined" != typeof io ? io : module.parent.exports);
    (function (a, b) {
      function c(a, b) {
        this.socket = a;
        this.sessid = b;
      }
      a.Transport = c;
      b.util.mixin(c, b.EventEmitter);
      c.prototype.onData = function (a) {
        this.clearCloseTimeout();
        (this.socket.connected || this.socket.connecting || this.socket.reconnecting) && this.setCloseTimeout();
        if ("" !== a && (a = b.parser.decodePayload(a)) && a.length) for (var c = 0, d = a.length; c < d; c++) this.onPacket(a[c]);
        return this;
      };
      c.prototype.onPacket = function (a) {
        this.socket.setHeartbeatTimeout();
        if ("heartbeat" == a.type) return this.onHeartbeat();
        if ("connect" == a.type && "" == a.endpoint) this.onConnect();
        "error" == a.type && "reconnect" == a.advice && (this.open = !1);
        this.socket.onPacket(a);
        return this;
      };
      c.prototype.setCloseTimeout = function () {
        if (!this.closeTimeout) {
          var a = this;
          this.closeTimeout = setTimeout(function () {
            a.onDisconnect();
          }, this.socket.closeTimeout);
        }
      };
      c.prototype.onDisconnect = function () {
        this.close && this.open && this.close();
        this.clearTimeouts();
        this.socket.onDisconnect();
        return this;
      };
      c.prototype.onConnect = function () {
        this.socket.onConnect();
        return this;
      };
      c.prototype.clearCloseTimeout = function () {
        this.closeTimeout && (clearTimeout(this.closeTimeout), (this.closeTimeout = null));
      };
      c.prototype.clearTimeouts = function () {
        this.clearCloseTimeout();
        this.reopenTimeout && clearTimeout(this.reopenTimeout);
      };
      c.prototype.packet = function (a) {
        this.send(b.parser.encodePacket(a));
      };
      c.prototype.onHeartbeat = function (a) {
        this.packet({ type: "heartbeat" });
      };
      c.prototype.onOpen = function () {
        this.open = !0;
        this.clearCloseTimeout();
        this.socket.onOpen();
      };
      c.prototype.onClose = function () {
        this.open = !1;
        this.socket.onClose();
        this.onDisconnect();
      };
      c.prototype.prepareUrl = function () {
        var a = this.socket.options;
        return this.scheme() + "://" + a.host + ":" + a.port + "/" + a.resource + "/" + b.protocol + "/" + this.name + "/" + this.sessid;
      };
      c.prototype.ready = function (a, b) {
        b.call(this);
      };
    })("undefined" != typeof io ? io : module.exports, "undefined" != typeof io ? io : module.parent.exports);
    (function (a, b, c) {
      function d(a) {
        this.options = {
          port: 80,
          secure: !1,
          document: "document" in c ? document : !1,
          resource: "socket.io",
          transports: b.transports,
          "connect timeout": 1e4,
          "try multiple transports": !0,
          reconnect: !0,
          "reconnection delay": 500,
          "reconnection limit": Infinity,
          "reopen delay": 3e3,
          "max reconnection attempts": 10,
          "sync disconnect on unload": !0,
          "auto connect": !0,
          "flash policy port": 10843,
        };
        b.util.merge(this.options, a);
        this.reconnecting = this.connecting = this.open = this.connected = !1;
        this.namespaces = {};
        this.buffer = [];
        this.doBuffer = !1;
        if (this.options["sync disconnect on unload"] && (!this.isXDomain() || b.util.ua.hasCORS)) {
          var d = this;
          b.util.on(
            c,
            "unload",
            function () {
              d.disconnectSync();
            },
            !1
          );
        }
        this.options["auto connect"] && this.connect();
      }
      function f() {}
      a.Socket = d;
      b.util.mixin(d, b.EventEmitter);
      d.prototype.of = function (a) {
        this.namespaces[a] || ((this.namespaces[a] = new b.SocketNamespace(this, a)), "" !== a && this.namespaces[a].packet({ type: "connect" }));
        return this.namespaces[a];
      };
      d.prototype.publish = function () {
        this.emit.apply(this, arguments);
        var a, b;
        for (b in this.namespaces) this.namespaces.hasOwnProperty(b) && ((a = this.of(b)), a.$emit.apply(a, arguments));
      };
      d.prototype.handshake = function (a) {
        function c(b) {
          if (b instanceof Error) d.onError(b.message);
          else a.apply(null, b.split(":"));
        }
        var d = this,
          e = this.options,
          e = ["http" + (e.secure ? "s" : "") + ":/", e.host + ":" + e.port, e.resource, b.protocol, b.util.query(this.options.query, "t=" + +new Date())].join("/");
        if (this.isXDomain() && !b.util.ua.hasCORS) {
          var m = document.getElementsByTagName("script")[0],
            p = document.createElement("script");
          p.src = e + "&jsonp=" + b.j.length;
          m.parentNode.insertBefore(p, m);
          b.j.push(function (a) {
            c(a);
            p.parentNode.removeChild(p);
          });
        } else {
          var q = b.util.request();
          q.open("GET", e, !0);
          q.withCredentials = !0;
          q.onreadystatechange = function () {
            4 == q.readyState && ((q.onreadystatechange = f), 200 == q.status ? c(q.responseText) : !d.reconnecting && d.onError(q.responseText));
          };
          q.send(null);
        }
      };
      d.prototype.getTransport = function (a) {
        a = a || this.transports;
        for (var c = 0, d; (d = a[c]); c++) if (b.Transport[d] && b.Transport[d].check(this) && (!this.isXDomain() || b.Transport[d].xdomainCheck())) return new b.Transport[d](this, this.sessionid);
        return null;
      };
      d.prototype.connect = function (a) {
        if (this.connecting) return this;
        var c = this;
        this.handshake(function (d, e, f, g) {
          function h(a) {
            if (!c.connecting && !c.connected) {
              c.transport && c.transport.clearTimeouts();
              c.transport = c.getTransport(a);
              if (!c.transport) return c.publish("connect_failed");
              c.transport.ready(c, function () {
                c.connecting = !0;
                c.publish("connecting", c.transport.name);
                c.transport.open();
                c.options["connect timeout"] &&
                (c.connectTimeoutTimer = setTimeout(function () {
                  if (!c.connected && ((c.connecting = !1), c.options["try multiple transports"])) {
                    c.remainingTransports || (c.remainingTransports = c.transports.slice(0));
                    for (var a = c.remainingTransports; 0 < a.length && a.splice(0, 1)[0] != c.transport.name; );
                    a.length ? h(a) : c.publish("connect_failed");
                  }
                }, c.options["connect timeout"]));
              });
            }
          }
          c.sessionid = d;
          c.closeTimeout = 1e3 * f;
          c.heartbeatTimeout = 1e3 * e;
          c.transports = g ? b.util.intersect(g.split(","), c.options.transports) : c.options.transports;
          c.setHeartbeatTimeout();
          h(c.transports);
          c.once("connect", function () {
            clearTimeout(c.connectTimeoutTimer);
            a && "function" == typeof a && a();
          });
        });
        return this;
      };
      d.prototype.setHeartbeatTimeout = function () {
        clearTimeout(this.heartbeatTimeoutTimer);
        var a = this;
        this.heartbeatTimeoutTimer = setTimeout(function () {
          a.transport.onClose();
        }, this.heartbeatTimeout);
      };
      d.prototype.packet = function (a) {
        this.connected && !this.doBuffer ? this.transport.packet(a) : this.buffer.push(a);
        return this;
      };
      d.prototype.setBuffer = function (a) {
        this.doBuffer = a;
        !a && this.connected && this.buffer.length && (this.transport.payload(this.buffer), (this.buffer = []));
      };
      d.prototype.disconnect = function () {
        if (this.connected || this.connecting) this.open && this.of("").packet({ type: "disconnect" }), this.onDisconnect("booted");
        return this;
      };
      d.prototype.disconnectSync = function () {
        b.util.request().open("GET", this.resource + "/" + b.protocol + "/" + this.sessionid, !0);
        this.onDisconnect("booted");
      };
      d.prototype.isXDomain = function () {
        var a = c.location.port || ("https:" == c.location.protocol ? 443 : 80);
        return this.options.host !== c.location.hostname || this.options.port != a;
      };
      d.prototype.onConnect = function () {
        this.connected || ((this.connected = !0), (this.connecting = !1), this.doBuffer || this.setBuffer(!1), this.emit("connect"));
      };
      d.prototype.onOpen = function () {
        this.open = !0;
      };
      d.prototype.onClose = function () {
        this.open = !1;
        clearTimeout(this.heartbeatTimeoutTimer);
      };
      d.prototype.onPacket = function (a) {
        this.of(a.endpoint).onPacket(a);
      };
      d.prototype.onError = function (a) {
        a && a.advice && "reconnect" === a.advice && (this.connected || this.connecting) && (this.disconnect(), this.options.reconnect && this.reconnect());
        this.publish("error", a && a.reason ? a.reason : a);
      };
      d.prototype.onDisconnect = function (a) {
        var b = this.connected,
          c = this.connecting;
        this.open = this.connecting = this.connected = !1;
        if (b || c) this.transport.close(), this.transport.clearTimeouts(), b && (this.publish("disconnect", a), "booted" != a && this.options.reconnect && !this.reconnecting && this.reconnect());
      };
      d.prototype.reconnect = function () {
        function a() {
          if (c.connected) {
            for (var a in c.namespaces) c.namespaces.hasOwnProperty(a) && "" !== a && c.namespaces[a].packet({ type: "connect" });
            c.publish("reconnect", c.transport.name, c.reconnectionAttempts);
          }
          clearTimeout(c.reconnectionTimer);
          c.removeListener("connect_failed", b);
          c.removeListener("connect", b);
          c.reconnecting = !1;
          delete c.reconnectionAttempts;
          delete c.reconnectionDelay;
          delete c.reconnectionTimer;
          delete c.redoTransports;
          c.options["try multiple transports"] = f;
        }
        function b() {
          if (c.reconnecting) {
            if (c.connected) return a();
            if (c.connecting && c.reconnecting) return (c.reconnectionTimer = setTimeout(b, 1e3));
            c.reconnectionAttempts++ >= d
              ? c.redoTransports
                ? (c.publish("reconnect_failed"), a())
                : (c.on("connect_failed", b), (c.options["try multiple transports"] = !0), (c.transport = c.getTransport()), (c.redoTransports = !0), c.connect())
              : (c.reconnectionDelay < p && (c.reconnectionDelay *= 2), c.connect(), c.publish("reconnecting", c.reconnectionDelay, c.reconnectionAttempts), (c.reconnectionTimer = setTimeout(b, c.reconnectionDelay)));
          }
        }
        this.reconnecting = !0;
        this.reconnectionAttempts = 0;
        this.reconnectionDelay = this.options["reconnection delay"];
        var c = this,
          d = this.options["max reconnection attempts"],
          f = this.options["try multiple transports"],
          p = this.options["reconnection limit"];
        this.options["try multiple transports"] = !1;
        this.reconnectionTimer = setTimeout(b, this.reconnectionDelay);
        this.on("connect", b);
      };
    })("undefined" != typeof io ? io : module.exports, "undefined" != typeof io ? io : module.parent.exports, this);
    (function (a, b) {
      function c(a, b) {
        this.socket = a;
        this.name = b || "";
        this.flags = {};
        this.json = new d(this, "json");
        this.ackPackets = 0;
        this.acks = {};
      }
      function d(a, b) {
        this.namespace = a;
        this.name = b;
      }
      a.SocketNamespace = c;
      b.util.mixin(c, b.EventEmitter);
      c.prototype.$emit = b.EventEmitter.prototype.emit;
      c.prototype.of = function () {
        return this.socket.of.apply(this.socket, arguments);
      };
      c.prototype.packet = function (a) {
        a.endpoint = this.name;
        this.socket.packet(a);
        this.flags = {};
        return this;
      };
      c.prototype.send = function (a, b) {
        var c = { type: this.flags.json ? "json" : "message", data: a };
        "function" == typeof b && ((c.id = ++this.ackPackets), (c.ack = !0), (this.acks[c.id] = b));
        return this.packet(c);
      };
      c.prototype.emit = function (a) {
        var b = Array.prototype.slice.call(arguments, 1),
          c = b[b.length - 1],
          d = { type: "event", name: a };
        "function" == typeof c && ((d.id = ++this.ackPackets), (d.ack = "data"), (this.acks[d.id] = c), (b = b.slice(0, b.length - 1)));
        d.args = b;
        return this.packet(d);
      };
      c.prototype.disconnect = function () {
        "" === this.name ? this.socket.disconnect() : (this.packet({ type: "disconnect" }), this.$emit("disconnect"));
        return this;
      };
      c.prototype.onPacket = function (a) {
        function c() {
          d.packet({ type: "ack", args: b.util.toArray(arguments), ackId: a.id });
        }
        var d = this;
        switch (a.type) {
          case "connect":
            this.$emit("connect");
            break;
          case "disconnect":
            if ("" === this.name) this.socket.onDisconnect(a.reason || "booted");
            else this.$emit("disconnect", a.reason);
            break;
          case "message":
          case "json":
            var f = ["message", a.data];
            "data" == a.ack ? f.push(c) : a.ack && this.packet({ type: "ack", ackId: a.id });
            this.$emit.apply(this, f);
            break;
          case "event":
            f = [a.name].concat(a.args);
            "data" == a.ack && f.push(c);
            this.$emit.apply(this, f);
            break;
          case "ack":
            this.acks[a.ackId] && (this.acks[a.ackId].apply(this, a.args), delete this.acks[a.ackId]);
            break;
          case "error":
            if (a.advice) this.socket.onError(a);
            else "unauthorized" == a.reason ? this.$emit("connect_failed", a.reason) : this.$emit("error", a.reason);
        }
      };
      d.prototype.send = function () {
        this.namespace.flags[this.name] = !0;
        this.namespace.send.apply(this.namespace, arguments);
      };
      d.prototype.emit = function () {
        this.namespace.flags[this.name] = !0;
        this.namespace.emit.apply(this.namespace, arguments);
      };
    })("undefined" != typeof io ? io : module.exports, "undefined" != typeof io ? io : module.parent.exports);
    (function (a, b, c) {
      function d(a) {
        b.Transport.apply(this, arguments);
      }
      a.websocket = d;
      b.util.inherit(d, b.Transport);
      d.prototype.name = "websocket";
      d.prototype.open = function () {
        var a = b.util.query(this.socket.options.query),
          d = this,
          g;
        g || (g = c.MozWebSocket || c.WebSocket);
        this.websocket = new g(this.prepareUrl() + a);
        this.websocket.onopen = function () {
          d.onOpen();
          d.socket.setBuffer(!1);
        };
        this.websocket.onmessage = function (a) {
          d.onData(a.data);
        };
        this.websocket.onclose = function () {
          d.onClose();
          d.socket.setBuffer(!0);
        };
        this.websocket.onerror = function (a) {
          d.onError(a);
        };
        return this;
      };
      d.prototype.send = function (a) {
        this.websocket.send(a);
        return this;
      };
      d.prototype.payload = function (a) {
        for (var b = 0, c = a.length; b < c; b++) this.packet(a[b]);
        return this;
      };
      d.prototype.close = function () {
        this.websocket.close();
        return this;
      };
      d.prototype.onError = function (a) {
        this.socket.onError(a);
      };
      d.prototype.scheme = function () {
        return this.socket.options.secure ? "wss" : "ws";
      };
      d.check = function () {
        return ("WebSocket" in c && !("__addTask" in WebSocket)) || "MozWebSocket" in c;
      };
      d.xdomainCheck = function () {
        return !0;
      };
      b.transports.push("websocket");
    })("undefined" != typeof io ? io.Transport : module.exports, "undefined" != typeof io ? io : module.parent.exports, this);
    (function (a, b) {
      function c() {
        b.Transport.websocket.apply(this, arguments);
      }
      a.flashsocket = c;
      b.util.inherit(c, b.Transport.websocket);
      c.prototype.name = "flashsocket";
      c.prototype.open = function () {
        var a = this,
          c = arguments;
        WebSocket.__addTask(function () {
          b.Transport.websocket.prototype.open.apply(a, c);
        });
        return this;
      };
      c.prototype.send = function () {
        var a = this,
          c = arguments;
        WebSocket.__addTask(function () {
          b.Transport.websocket.prototype.send.apply(a, c);
        });
        return this;
      };
      c.prototype.close = function () {
        WebSocket.__tasks.length = 0;
        b.Transport.websocket.prototype.close.call(this);
        return this;
      };
      c.prototype.ready = function (a, f) {
        function d() {
          var b = a.options,
            d = b["flash policy port"],
            e = ["http" + (b.secure ? "s" : "") + ":/", b.host + ":" + b.port, b.resource, "static/flashsocket", "WebSocketMain" + (a.isXDomain() ? "Insecure" : "") + ".swf"];
          c.loaded ||
          ("undefined" === typeof WEB_SOCKET_SWF_LOCATION && (WEB_SOCKET_SWF_LOCATION = e.join("/")),
          843 !== d && WebSocket.loadFlashPolicyFile("xmlsocket://" + b.host + ":" + d),
            WebSocket.__initialize(),
            (c.loaded = !0));
          f.call(g);
        }
        var g = this;
        if (document.body) return d();
        b.util.load(d);
      };
      c.check = function () {
        return "undefined" != typeof WebSocket && "__initialize" in WebSocket && swfobject ? 10 <= swfobject.getFlashPlayerVersion().major : !1;
      };
      c.xdomainCheck = function () {
        return !0;
      };
      "undefined" != typeof window && (WEB_SOCKET_DISABLE_AUTO_INITIALIZATION = !0);
      b.transports.push("flashsocket");
    })("undefined" != typeof io ? io.Transport : module.exports, "undefined" != typeof io ? io : module.parent.exports);
    if ("undefined" != typeof window)
      var swfobject = (function () {
        function a() {
          if (!S) {
            try {
              var a = w.getElementsByTagName("body")[0].appendChild(w.createElement("span"));
              a.parentNode.removeChild(a);
            } catch (D) {
              return;
            }
            S = !0;
            for (var a = B.length, b = 0; b < a; b++) B[b]();
          }
        }
        function b(a) {
          S ? a() : (B[B.length] = a);
        }
        function c(a) {
          if ("undefined" != typeof O.addEventListener) O.addEventListener("load", a, !1);
          else if ("undefined" != typeof w.addEventListener) w.addEventListener("load", a, !1);
          else if ("undefined" != typeof O.attachEvent) n(O, "onload", a);
          else if ("function" == typeof O.onload) {
            var b = O.onload;
            O.onload = function () {
              b();
              a();
            };
          } else O.onload = a;
        }
        function d() {
          var a = w.getElementsByTagName("body")[0],
            b = w.createElement("object");
          b.setAttribute("type", "application/x-shockwave-flash");
          var c = a.appendChild(b);
          if (c) {
            var d = 0;
            (function () {
              if ("undefined" != typeof c.GetVariable) {
                var e = c.GetVariable("$version");
                e && ((e = e.split(" ")[1].split(",")), (x.pv = [parseInt(e[0], 10), parseInt(e[1], 10), parseInt(e[2], 10)]));
              } else if (10 > d) {
                d++;
                setTimeout(arguments.callee, 10);
                return;
              }
              a.removeChild(b);
              c = null;
              f();
            })();
          } else f();
        }
        function f() {
          var a = E.length;
          if (0 < a)
            for (var b = 0; b < a; b++) {
              var c = E[b].id,
                d = E[b].callbackFn,
                f = { success: !1, id: c };
              if (0 < x.pv[0]) {
                var m = r(c);
                if (m)
                  if (!u(E[b].swfVersion) || (x.wk && 312 > x.wk))
                    if (E[b].expressInstall && g()) {
                      f = {};
                      f.data = E[b].expressInstall;
                      f.width = m.getAttribute("width") || "0";
                      f.height = m.getAttribute("height") || "0";
                      m.getAttribute("class") && (f.styleclass = m.getAttribute("class"));
                      m.getAttribute("align") && (f.align = m.getAttribute("align"));
                      for (var p = {}, m = m.getElementsByTagName("param"), n = m.length, q = 0; q < n; q++)
                        "movie" != m[q].getAttribute("name").toLowerCase() && (p[m[q].getAttribute("name")] = m[q].getAttribute("value"));
                      h(f, p, c, d);
                    } else k(m), d && d(f);
                  else I(c, !0), d && ((f.success = !0), (f.ref = e(c)), d(f));
              } else I(c, !0), d && ((c = e(c)) && "undefined" != typeof c.SetVariable && ((f.success = !0), (f.ref = c)), d(f));
            }
        }
        function e(a) {
          var b = null;
          (a = r(a)) && "OBJECT" == a.nodeName && ("undefined" != typeof a.SetVariable ? (b = a) : (a = a.getElementsByTagName("object")[0]) && (b = a));
          return b;
        }
        function g() {
          return !N && u("6.0.65") && (x.win || x.mac) && !(x.wk && 312 > x.wk);
        }
        function h(a, b, c, d) {
          N = !0;
          ha = d || null;
          ma = { success: !1, id: c };
          var e = r(c);
          if (e) {
            "OBJECT" == e.nodeName ? ((sa = m(e)), (la = null)) : ((sa = e), (la = c));
            a.id = "SWFObjectExprInst";
            if ("undefined" == typeof a.width || (!/%$/.test(a.width) && 310 > parseInt(a.width, 10))) a.width = "310";
            if ("undefined" == typeof a.height || (!/%$/.test(a.height) && 137 > parseInt(a.height, 10))) a.height = "137";
            w.title = w.title.slice(0, 47) + " - Flash Player Installation";
            d = x.ie && x.win ? ["Active"].concat("").join("X") : "PlugIn";
            d = "MMredirectURL=" + O.location.toString().replace(/&/g, "%26") + "&MMplayerType=" + d + "&MMdoctitle=" + w.title;
            b.flashvars = "undefined" != typeof b.flashvars ? b.flashvars + ("&" + d) : d;
            x.ie &&
            x.win &&
            4 != e.readyState &&
            ((d = w.createElement("div")),
              (c += "SWFObjectNew"),
              d.setAttribute("id", c),
              e.parentNode.insertBefore(d, e),
              (e.style.display = "none"),
              (function () {
                4 == e.readyState ? e.parentNode.removeChild(e) : setTimeout(arguments.callee, 10);
              })());
            p(a, b, c);
          }
        }
        function k(a) {
          if (x.ie && x.win && 4 != a.readyState) {
            var b = w.createElement("div");
            a.parentNode.insertBefore(b, a);
            b.parentNode.replaceChild(m(a), b);
            a.style.display = "none";
            (function () {
              4 == a.readyState ? a.parentNode.removeChild(a) : setTimeout(arguments.callee, 10);
            })();
          } else a.parentNode.replaceChild(m(a), a);
        }
        function m(a) {
          var b = w.createElement("div");
          if (x.win && x.ie) b.innerHTML = a.innerHTML;
          else if ((a = a.getElementsByTagName("object")[0]))
            if ((a = a.childNodes)) for (var c = a.length, d = 0; d < c; d++) (1 == a[d].nodeType && "PARAM" == a[d].nodeName) || 8 == a[d].nodeType || b.appendChild(a[d].cloneNode(!0));
          return b;
        }
        function p(a, b, c) {
          var d,
            e = r(c);
          if (x.wk && 312 > x.wk) return d;
          if (e)
            if (("undefined" == typeof a.id && (a.id = c), x.ie && x.win)) {
              var f = "",
                g;
              for (g in a)
                a[g] != Object.prototype[g] &&
                ("data" == g.toLowerCase() ? (b.movie = a[g]) : "styleclass" == g.toLowerCase() ? (f += ' class="' + a[g] + '"') : "classid" != g.toLowerCase() && (f += " " + g + '="' + a[g] + '"'));
              g = "";
              for (var h in b) b[h] != Object.prototype[h] && (g += '<param name="' + h + '" value="' + b[h] + '" />');
              e.outerHTML = '<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"' + f + ">" + g + "</object>";
              oa[oa.length] = a.id;
              d = r(a.id);
            } else {
              h = w.createElement("object");
              h.setAttribute("type", "application/x-shockwave-flash");
              for (var k in a) a[k] != Object.prototype[k] && ("styleclass" == k.toLowerCase() ? h.setAttribute("class", a[k]) : "classid" != k.toLowerCase() && h.setAttribute(k, a[k]));
              for (f in b)
                b[f] != Object.prototype[f] && "movie" != f.toLowerCase() && ((a = h), (g = f), (k = b[f]), (c = w.createElement("param")), c.setAttribute("name", g), c.setAttribute("value", k), a.appendChild(c));
              e.parentNode.replaceChild(h, e);
              d = h;
            }
          return d;
        }
        function q(a) {
          var b = r(a);
          b &&
          "OBJECT" == b.nodeName &&
          (x.ie && x.win
            ? ((b.style.display = "none"),
              (function () {
                if (4 == b.readyState) {
                  var c = r(a);
                  if (c) {
                    for (var d in c) "function" == typeof c[d] && (c[d] = null);
                    c.parentNode.removeChild(c);
                  }
                } else setTimeout(arguments.callee, 10);
              })())
            : b.parentNode.removeChild(b));
        }
        function r(a) {
          var b = null;
          try {
            b = w.getElementById(a);
          } catch (D) {}
          return b;
        }
        function n(a, b, c) {
          a.attachEvent(b, c);
          V[V.length] = [a, b, c];
        }
        function u(a) {
          var b = x.pv;
          a = a.split(".");
          a[0] = parseInt(a[0], 10);
          a[1] = parseInt(a[1], 10) || 0;
          a[2] = parseInt(a[2], 10) || 0;
          return b[0] > a[0] || (b[0] == a[0] && b[1] > a[1]) || (b[0] == a[0] && b[1] == a[1] && b[2] >= a[2]) ? !0 : !1;
        }
        function v(a, b, c, d) {
          if (!x.ie || !x.mac) {
            var e = w.getElementsByTagName("head")[0];
            e &&
            ((c = c && "string" == typeof c ? c : "screen"),
            d && (K = C = null),
            (C && K == c) ||
            ((d = w.createElement("style")),
              d.setAttribute("type", "text/css"),
              d.setAttribute("media", c),
              (C = e.appendChild(d)),
            x.ie && x.win && "undefined" != typeof w.styleSheets && 0 < w.styleSheets.length && (C = w.styleSheets[w.styleSheets.length - 1]),
              (K = c)),
              x.ie && x.win ? C && "object" == typeof C.addRule && C.addRule(a, b) : C && "undefined" != typeof w.createTextNode && C.appendChild(w.createTextNode(a + " {" + b + "}")));
          }
        }
        function I(a, b) {
          if (P) {
            var c = b ? "visible" : "hidden";
            S && r(a) ? (r(a).style.visibility = c) : v("#" + a, "visibility:" + c);
          }
        }
        function Y(a) {
          return null != /[\\\"<>\.;]/.exec(a) && "undefined" != typeof encodeURIComponent ? encodeURIComponent(a) : a;
        }
        var O = window,
          w = document,
          F = navigator,
          J = !1,
          B = [
            function () {
              J ? d() : f();
            },
          ],
          E = [],
          oa = [],
          V = [],
          sa,
          la,
          ha,
          ma,
          S = !1,
          N = !1,
          C,
          K,
          P = !0,
          x = (function () {
            var a = "undefined" != typeof w.getElementById && "undefined" != typeof w.getElementsByTagName && "undefined" != typeof w.createElement,
              b = F.userAgent.toLowerCase(),
              c = F.platform.toLowerCase(),
              d = c ? /win/.test(c) : /win/.test(b),
              c = c ? /mac/.test(c) : /mac/.test(b),
              b = /webkit/.test(b) ? parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/, "$1")) : !1,
              e = !+"\v1",
              f = [0, 0, 0],
              g = null;
            if ("undefined" != typeof F.plugins && "object" == typeof F.plugins["Shockwave Flash"])
              !(g = F.plugins["Shockwave Flash"].description) ||
              ("undefined" != typeof F.mimeTypes && F.mimeTypes["application/x-shockwave-flash"] && !F.mimeTypes["application/x-shockwave-flash"].enabledPlugin) ||
              ((J = !0),
                (e = !1),
                (g = g.replace(/^.*\s+(\S+\s+\S+$)/, "$1")),
                (f[0] = parseInt(g.replace(/^(.*)\..*$/, "$1"), 10)),
                (f[1] = parseInt(g.replace(/^.*\.(.*)\s.*$/, "$1"), 10)),
                (f[2] = /[a-zA-Z]/.test(g) ? parseInt(g.replace(/^.*[a-zA-Z]+(.*)$/, "$1"), 10) : 0));
            else if ("undefined" != typeof O[["Active"].concat("Object").join("X")])
              try {
                if ((g = new window[["Active"].concat("Object").join("X")]("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")))
                  (e = !0), (g = g.split(" ")[1].split(",")), (f = [parseInt(g[0], 10), parseInt(g[1], 10), parseInt(g[2], 10)]);
              } catch (M) {}
            return { w3: a, pv: f, wk: b, ie: e, win: d, mac: c };
          })();
        (function () {
          x.w3 &&
          ((("undefined" != typeof w.readyState && "complete" == w.readyState) || ("undefined" == typeof w.readyState && (w.getElementsByTagName("body")[0] || w.body))) && a(),
          S ||
          ("undefined" != typeof w.addEventListener && w.addEventListener("DOMContentLoaded", a, !1),
          x.ie &&
          x.win &&
          (w.attachEvent("onreadystatechange", function () {
            "complete" == w.readyState && (w.detachEvent("onreadystatechange", arguments.callee), a());
          }),
          O == top &&
          (function () {
            if (!S) {
              try {
                w.documentElement.doScroll("left");
              } catch (A) {
                setTimeout(arguments.callee, 0);
                return;
              }
              a();
            }
          })()),
          x.wk &&
          (function () {
            S || (/loaded|complete/.test(w.readyState) ? a() : setTimeout(arguments.callee, 0));
          })(),
            c(a)));
        })();
        (function () {
          x.ie &&
          x.win &&
          window.attachEvent("onunload", function () {
            for (var a = V.length, b = 0; b < a; b++) V[b][0].detachEvent(V[b][1], V[b][2]);
            a = oa.length;
            for (b = 0; b < a; b++) q(oa[b]);
            for (var c in x) x[c] = null;
            x = null;
            for (var d in swfobject) swfobject[d] = null;
            swfobject = null;
          });
        })();
        return {
          registerObject: function (a, b, c, d) {
            if (x.w3 && a && b) {
              var e = {};
              e.id = a;
              e.swfVersion = b;
              e.expressInstall = c;
              e.callbackFn = d;
              E[E.length] = e;
              I(a, !1);
            } else d && d({ success: !1, id: a });
          },
          getObjectById: function (a) {
            if (x.w3) return e(a);
          },
          embedSWF: function (a, c, d, e, f, k, m, n, q, r) {
            var v = { success: !1, id: c };
            x.w3 && !(x.wk && 312 > x.wk) && a && c && d && e && f
              ? (I(c, !1),
                b(function () {
                  d += "";
                  e += "";
                  var b = {};
                  if (q && "object" === typeof q) for (var C in q) b[C] = q[C];
                  b.data = a;
                  b.width = d;
                  b.height = e;
                  C = {};
                  if (n && "object" === typeof n) for (var w in n) C[w] = n[w];
                  if (m && "object" === typeof m) for (var K in m) C.flashvars = "undefined" != typeof C.flashvars ? C.flashvars + ("&" + K + "=" + m[K]) : K + "=" + m[K];
                  if (u(f)) (w = p(b, C, c)), b.id == c && I(c, !0), (v.success = !0), (v.ref = w);
                  else {
                    if (k && g()) {
                      b.data = k;
                      h(b, C, c, r);
                      return;
                    }
                    I(c, !0);
                  }
                  r && r(v);
                }))
              : r && r(v);
          },
          switchOffAutoHideShow: function () {
            P = !1;
          },
          ua: x,
          getFlashPlayerVersion: function () {
            return { major: x.pv[0], minor: x.pv[1], release: x.pv[2] };
          },
          hasFlashPlayerVersion: u,
          createSWF: function (a, b, c) {
            if (x.w3) return p(a, b, c);
          },
          showExpressInstall: function (a, b, c, d) {
            x.w3 && g() && h(a, b, c, d);
          },
          removeSWF: function (a) {
            x.w3 && q(a);
          },
          createCSS: function (a, b, c, d) {
            x.w3 && v(a, b, c, d);
          },
          addDomLoadEvent: b,
          addLoadEvent: c,
          getQueryParamValue: function (a) {
            var b = w.location.search || w.location.hash;
            if (b) {
              /\?/.test(b) && (b = b.split("?")[1]);
              if (null == a) return Y(b);
              for (var b = b.split("&"), c = 0; c < b.length; c++) if (b[c].substring(0, b[c].indexOf("=")) == a) return Y(b[c].substring(b[c].indexOf("=") + 1));
            }
            return "";
          },
          expressInstallCallback: function () {
            if (N) {
              var a = r("SWFObjectExprInst");
              a && sa && (a.parentNode.replaceChild(sa, a), la && (I(la, !0), x.ie && x.win && (sa.style.display = "block")), ha && ha(ma));
              N = !1;
            }
          },
        };
      })();
    (function () {
      if ("undefined" != typeof window && !window.WebSocket) {
        var a = window.console;
        (a && a.log && a.error) || (a = { log: function () {}, error: function () {} });
        swfobject.hasFlashPlayerVersion("10.0.0")
          ? ("file:" == location.protocol && a.error("WARNING: web-socket-js doesn't work in file:///... URL unless you set Flash Security Settings properly. Open the page via Web server i.e. http://..."),
            (WebSocket = function (a, c, d, f, e) {
              var b = this;
              b.__id = WebSocket.__nextId++;
              WebSocket.__instances[b.__id] = b;
              b.readyState = WebSocket.CONNECTING;
              b.bufferedAmount = 0;
              b.__events = {};
              c ? "string" == typeof c && (c = [c]) : (c = []);
              setTimeout(function () {
                WebSocket.__addTask(function () {
                  WebSocket.__flash.create(b.__id, a, c, d || null, f || 0, e || null);
                });
              }, 0);
            }),
            (WebSocket.prototype.send = function (a) {
              if (this.readyState == WebSocket.CONNECTING) throw "INVALID_STATE_ERR: Web Socket connection has not been established";
              a = WebSocket.__flash.send(this.__id, encodeURIComponent(a));
              if (0 > a) return !0;
              this.bufferedAmount += a;
              return !1;
            }),
            (WebSocket.prototype.close = function () {
              this.readyState != WebSocket.CLOSED && this.readyState != WebSocket.CLOSING && ((this.readyState = WebSocket.CLOSING), WebSocket.__flash.close(this.__id));
            }),
            (WebSocket.prototype.addEventListener = function (a, c, d) {
              a in this.__events || (this.__events[a] = []);
              this.__events[a].push(c);
            }),
            (WebSocket.prototype.removeEventListener = function (a, c, d) {
              if (a in this.__events)
                for (a = this.__events[a], d = a.length - 1; 0 <= d; --d)
                  if (a[d] === c) {
                    a.splice(d, 1);
                    break;
                  }
            }),
            (WebSocket.prototype.dispatchEvent = function (a) {
              for (var b = this.__events[a.type] || [], d = 0; d < b.length; ++d) b[d](a);
              (b = this["on" + a.type]) && b(a);
            }),
            (WebSocket.prototype.__handleEvent = function (a) {
              "readyState" in a && (this.readyState = a.readyState);
              "protocol" in a && (this.protocol = a.protocol);
              if ("open" == a.type || "error" == a.type) a = this.__createSimpleEvent(a.type);
              else if ("close" == a.type) a = this.__createSimpleEvent("close");
              else if ("message" == a.type) (a = decodeURIComponent(a.message)), (a = this.__createMessageEvent("message", a));
              else throw "unknown event type: " + a.type;
              this.dispatchEvent(a);
            }),
            (WebSocket.prototype.__createSimpleEvent = function (a) {
              if (document.createEvent && window.Event) {
                var b = document.createEvent("Event");
                b.initEvent(a, !1, !1);
                return b;
              }
              return { type: a, bubbles: !1, cancelable: !1 };
            }),
            (WebSocket.prototype.__createMessageEvent = function (a, c) {
              if (document.createEvent && window.MessageEvent && !window.opera) {
                var b = document.createEvent("MessageEvent");
                b.initMessageEvent("message", !1, !1, c, null, null, window, null);
                return b;
              }
              return { type: a, data: c, bubbles: !1, cancelable: !1 };
            }),
            (WebSocket.CONNECTING = 0),
            (WebSocket.OPEN = 1),
            (WebSocket.CLOSING = 2),
            (WebSocket.CLOSED = 3),
            (WebSocket.__flash = null),
            (WebSocket.__instances = {}),
            (WebSocket.__tasks = []),
            (WebSocket.__nextId = 0),
            (WebSocket.loadFlashPolicyFile = function (a) {
              WebSocket.__addTask(function () {
                WebSocket.__flash.loadManualPolicyFile(a);
              });
            }),
            (WebSocket.__initialize = function () {
              if (!WebSocket.__flash)
                if ((WebSocket.__swfLocation && (window.WEB_SOCKET_SWF_LOCATION = WebSocket.__swfLocation), window.WEB_SOCKET_SWF_LOCATION)) {
                  var b = document.createElement("div");
                  b.id = "webSocketContainer";
                  b.style.position = "absolute";
                  WebSocket.__isFlashLite() ? ((b.style.left = "0px"), (b.style.top = "0px")) : ((b.style.left = "-100px"), (b.style.top = "-100px"));
                  var c = document.createElement("div");
                  c.id = "webSocketFlash";
                  b.appendChild(c);
                  document.body.appendChild(b);
                  swfobject.embedSWF(WEB_SOCKET_SWF_LOCATION, "webSocketFlash", "1", "1", "10.0.0", null, null, { hasPriority: !0, swliveconnect: !0, allowScriptAccess: "always" }, null, function (b) {
                    b.success || a.error("[WebSocket] swfobject.embedSWF failed");
                  });
                } else a.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf");
            }),
            (WebSocket.__onFlashInitialized = function () {
              setTimeout(function () {
                WebSocket.__flash = document.getElementById("webSocketFlash");
                WebSocket.__flash.setCallerUrl(location.href);
                WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);
                for (var a = 0; a < WebSocket.__tasks.length; ++a) WebSocket.__tasks[a]();
                WebSocket.__tasks = [];
              }, 0);
            }),
            (WebSocket.__onFlashEvent = function () {
              setTimeout(function () {
                try {
                  for (var b = WebSocket.__flash.receiveEvents(), c = 0; c < b.length; ++c) WebSocket.__instances[b[c].webSocketId].__handleEvent(b[c]);
                } catch (d) {
                  a.error(d);
                }
              }, 0);
              return !0;
            }),
            (WebSocket.__log = function (b) {
              a.log(decodeURIComponent(b));
            }),
            (WebSocket.__error = function (b) {
              a.error(decodeURIComponent(b));
            }),
            (WebSocket.__addTask = function (a) {
              WebSocket.__flash ? a() : WebSocket.__tasks.push(a);
            }),
            (WebSocket.__isFlashLite = function () {
              if (!window.navigator || !window.navigator.mimeTypes) return !1;
              var a = window.navigator.mimeTypes["application/x-shockwave-flash"];
              return a && a.enabledPlugin && a.enabledPlugin.filename ? (a.enabledPlugin.filename.match(/flashlite/i) ? !0 : !1) : !1;
            }),
          window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION ||
          (window.addEventListener
            ? window.addEventListener(
              "load",
              function () {
                WebSocket.__initialize();
              },
              !1
            )
            : window.attachEvent("onload", function () {
              WebSocket.__initialize();
            })))
          : a.error("Flash Player >= 10.0.0 is required.");
      }
    })();
    (function (a, b, c) {
      function d(a) {
        a && (b.Transport.apply(this, arguments), (this.sendBuffer = []));
      }
      function f() {}
      a.XHR = d;
      b.util.inherit(d, b.Transport);
      d.prototype.open = function () {
        this.socket.setBuffer(!1);
        this.onOpen();
        this.get();
        this.setCloseTimeout();
        return this;
      };
      d.prototype.payload = function (a) {
        for (var c = [], d = 0, e = a.length; d < e; d++) c.push(b.parser.encodePacket(a[d]));
        this.send(b.parser.encodePayload(c));
      };
      d.prototype.send = function (a) {
        this.post(a);
        return this;
      };
      d.prototype.post = function (a) {
        function b() {
          if (4 == this.readyState)
            if (((this.onreadystatechange = f), (e.posting = !1), 200 == this.status)) e.socket.setBuffer(!1);
            else e.onClose();
        }
        function d() {
          this.onload = f;
          e.socket.setBuffer(!1);
        }
        var e = this;
        this.socket.setBuffer(!0);
        this.sendXHR = this.request("POST");
        c.XDomainRequest && this.sendXHR instanceof XDomainRequest ? (this.sendXHR.onload = this.sendXHR.onerror = d) : (this.sendXHR.onreadystatechange = b);
        this.sendXHR.send(a);
      };
      d.prototype.close = function () {
        this.onClose();
        return this;
      };
      d.prototype.request = function (a) {
        var c = b.util.request(this.socket.isXDomain()),
          d = b.util.query(this.socket.options.query, "t=" + +new Date());
        c.open(a || "GET", this.prepareUrl() + d, !0);
        if ("POST" == a)
          try {
            c.setRequestHeader ? c.setRequestHeader("Content-type", "text/plain;charset=UTF-8") : (c.contentType = "text/plain");
          } catch (k) {}
        return c;
      };
      d.prototype.scheme = function () {
        return this.socket.options.secure ? "https" : "http";
      };
      d.check = function (a, d) {
        try {
          var e = b.util.request(d),
            f = c.XDomainRequest && e instanceof XDomainRequest,
            g = (a && a.options && a.options.secure ? "https:" : "http:") != c.location.protocol;
          if (e && (!f || !g)) return !0;
        } catch (p) {}
        return !1;
      };
      d.xdomainCheck = function () {
        return d.check(null, !0);
      };
    })("undefined" != typeof io ? io.Transport : module.exports, "undefined" != typeof io ? io : module.parent.exports, this);
    (function (a, b) {
      function c(a) {
        b.Transport.XHR.apply(this, arguments);
      }
      a.htmlfile = c;
      b.util.inherit(c, b.Transport.XHR);
      c.prototype.name = "htmlfile";
      c.prototype.get = function () {
        this.doc = new window[["Active"].concat("Object").join("X")]("htmlfile");
        this.doc.open();
        this.doc.write("<html></html>");
        this.doc.close();
        this.doc.parentWindow.s = this;
        var a = this.doc.createElement("div");
        a.className = "socketio";
        this.doc.body.appendChild(a);
        this.iframe = this.doc.createElement("iframe");
        a.appendChild(this.iframe);
        var c = this,
          a = b.util.query(this.socket.options.query, "t=" + +new Date());
        this.iframe.src = this.prepareUrl() + a;
        b.util.on(window, "unload", function () {
          c.destroy();
        });
      };
      c.prototype._ = function (a, b) {
        this.onData(a);
        try {
          var c = b.getElementsByTagName("script")[0];
          c.parentNode.removeChild(c);
        } catch (g) {}
      };
      c.prototype.destroy = function () {
        if (this.iframe) {
          try {
            this.iframe.src = "about:blank";
          } catch (d) {}
          this.doc = null;
          this.iframe.parentNode.removeChild(this.iframe);
          this.iframe = null;
          CollectGarbage();
        }
      };
      c.prototype.close = function () {
        this.destroy();
        return b.Transport.XHR.prototype.close.call(this);
      };
      c.check = function () {
        if ("undefined" != typeof window && ["Active"].concat("Object").join("X") in window)
          try {
            return new window[["Active"].concat("Object").join("X")]("htmlfile"), b.Transport.XHR.check();
          } catch (d) {}
        return !1;
      };
      c.xdomainCheck = function () {
        return !1;
      };
      b.transports.push("htmlfile");
    })("undefined" != typeof io ? io.Transport : module.exports, "undefined" != typeof io ? io : module.parent.exports);
    (function (a, b, c) {
      function d() {
        b.Transport.XHR.apply(this, arguments);
      }
      function f() {}
      a["xhr-polling"] = d;
      b.util.inherit(d, b.Transport.XHR);
      b.util.merge(d, b.Transport.XHR);
      d.prototype.name = "xhr-polling";
      d.prototype.open = function () {
        b.Transport.XHR.prototype.open.call(this);
        return !1;
      };
      d.prototype.get = function () {
        function a() {
          if (4 == this.readyState)
            if (((this.onreadystatechange = f), 200 == this.status)) k.onData(this.responseText), k.get();
            else k.onClose();
        }
        function b() {
          this.onerror = this.onload = f;
          k.onData(this.responseText);
          k.get();
        }
        function d() {
          k.onClose();
        }
        if (this.open) {
          var k = this;
          this.xhr = this.request();
          c.XDomainRequest && this.xhr instanceof XDomainRequest ? ((this.xhr.onload = b), (this.xhr.onerror = d)) : (this.xhr.onreadystatechange = a);
          this.xhr.send(null);
        }
      };
      d.prototype.onClose = function () {
        b.Transport.XHR.prototype.onClose.call(this);
        if (this.xhr) {
          this.xhr.onreadystatechange = this.xhr.onload = this.xhr.onerror = f;
          try {
            this.xhr.abort();
          } catch (e) {}
          this.xhr = null;
        }
      };
      d.prototype.ready = function (a, c) {
        var d = this;
        b.util.defer(function () {
          c.call(d);
        });
      };
      b.transports.push("xhr-polling");
    })("undefined" != typeof io ? io.Transport : module.exports, "undefined" != typeof io ? io : module.parent.exports, this);
    (function (a, b, c) {
      function d(a) {
        b.Transport["xhr-polling"].apply(this, arguments);
        this.index = b.j.length;
        var c = this;
        b.j.push(function (a) {
          c._(a);
        });
      }
      var f = c.document && "MozAppearance" in c.document.documentElement.style;
      a["jsonp-polling"] = d;
      b.util.inherit(d, b.Transport["xhr-polling"]);
      d.prototype.name = "jsonp-polling";
      d.prototype.post = function (a) {
        function c() {
          d();
          e.socket.setBuffer(!1);
        }
        function d() {
          e.iframe && e.form.removeChild(e.iframe);
          try {
            n = document.createElement('<iframe name="' + e.iframeId + '">');
          } catch (u) {
            (n = document.createElement("iframe")), (n.name = e.iframeId);
          }
          n.id = e.iframeId;
          e.form.appendChild(n);
          e.iframe = n;
        }
        var e = this,
          f = b.util.query(this.socket.options.query, "t=" + +new Date() + "&i=" + this.index);
        if (!this.form) {
          var p = document.createElement("form"),
            q = document.createElement("textarea"),
            r = (this.iframeId = "socketio_iframe_" + this.index),
            n;
          p.className = "socketio";
          p.style.position = "absolute";
          p.style.top = "0px";
          p.style.left = "0px";
          p.style.display = "none";
          p.target = r;
          p.method = "POST";
          p.setAttribute("accept-charset", "utf-8");
          q.name = "d";
          p.appendChild(q);
          document.body.appendChild(p);
          this.form = p;
          this.area = q;
        }
        this.form.action = this.prepareUrl() + f;
        d();
        this.area.value = b.JSON.stringify(a);
        try {
          this.form.submit();
        } catch (u) {}
        this.iframe.attachEvent
          ? (n.onreadystatechange = function () {
            "complete" == e.iframe.readyState && c();
          })
          : (this.iframe.onload = c);
        this.socket.setBuffer(!0);
      };
      d.prototype.get = function () {
        var a = this,
          c = document.createElement("script"),
          d = b.util.query(this.socket.options.query, "t=" + +new Date() + "&i=" + this.index);
        this.script && (this.script.parentNode.removeChild(this.script), (this.script = null));
        c.async = !0;
        c.src = this.prepareUrl() + d;
        c.onerror = function () {
          a.onClose();
        };
        d = document.getElementsByTagName("script")[0];
        d.parentNode.insertBefore(c, d);
        this.script = c;
        f &&
        setTimeout(function () {
          var a = document.createElement("iframe");
          document.body.appendChild(a);
          document.body.removeChild(a);
        }, 100);
      };
      d.prototype._ = function (a) {
        this.onData(a);
        this.open && this.get();
        return this;
      };
      d.prototype.ready = function (a, c) {
        var d = this;
        if (!f) return c.call(this);
        b.util.load(function () {
          c.call(d);
        });
      };
      d.check = function () {
        return "document" in c;
      };
      d.xdomainCheck = function () {
        return !0;
      };
      b.transports.push("jsonp-polling");
    })("undefined" != typeof io ? io.Transport : module.exports, "undefined" != typeof io ? io : module.parent.exports, this);
    var Prototype = {
      Version: "1.7.3",
      Browser: (function () {
        var a = navigator.userAgent,
          b = "[object Opera]" == Object.prototype.toString.call(window.opera);
        return { IE: !!window.attachEvent && !b, Opera: b, WebKit: -1 < a.indexOf("AppleWebKit/"), Gecko: -1 < a.indexOf("Gecko") && -1 === a.indexOf("KHTML"), MobileSafari: /Apple.*Mobile/.test(a) };
      })(),
      BrowserFeatures: {
        XPath: !!document.evaluate,
        SelectorsAPI: !!document.querySelector,
        ElementExtensions: (function () {
          var a = window.Element || window.HTMLElement;
          return !(!a || !a.prototype);
        })(),
        SpecificElementExtensions: (function () {
          if ("undefined" !== typeof window.HTMLDivElement) return !0;
          var a = document.createElement("div"),
            b = document.createElement("form"),
            c = !1;
          a.__proto__ && a.__proto__ !== b.__proto__ && (c = !0);
          return c;
        })(),
      },
      ScriptFragment: "<script[^>]*>([\\S\\s]*?)\x3c/script\\s*>",
      JSONFilter: /^\/\*-secure-([\s\S]*)\*\/\s*$/,
      emptyFunction: function () {},
      K: function (a) {
        return a;
      },
    };
    Prototype.Browser.MobileSafari && (Prototype.BrowserFeatures.SpecificElementExtensions = !1);
    var Class = (function () {
      function a() {}
      var b = (function () {
        for (var a in { toString: 1 }) if ("toString" === a) return !1;
        return !0;
      })();
      return {
        create: function () {
          function b() {
            this.initialize.apply(this, arguments);
          }
          var d = null,
            f = $A(arguments);
          Object.isFunction(f[0]) && (d = f.shift());
          Object.extend(b, Class.Methods);
          b.superclass = d;
          b.subclasses = [];
          d && ((a.prototype = d.prototype), (b.prototype = new a()), d.subclasses.push(b));
          for (var d = 0, e = f.length; d < e; d++) b.addMethods(f[d]);
          b.prototype.initialize || (b.prototype.initialize = Prototype.emptyFunction);
          return (b.prototype.constructor = b);
        },
        Methods: {
          addMethods: function (a) {
            var c = this.superclass && this.superclass.prototype,
              f = Object.keys(a);
            b && (a.toString != Object.prototype.toString && f.push("toString"), a.valueOf != Object.prototype.valueOf && f.push("valueOf"));
            for (var e = 0, g = f.length; e < g; e++) {
              var h = f[e],
                k = a[h];
              if (c && Object.isFunction(k) && "$super" == k.argumentNames()[0]) {
                var m = k,
                  k = (function (a) {
                    return function () {
                      return c[a].apply(this, arguments);
                    };
                  })(h).wrap(m);
                k.valueOf = (function (a) {
                  return function () {
                    return a.valueOf.call(a);
                  };
                })(m);
                k.toString = (function (a) {
                  return function () {
                    return a.toString.call(a);
                  };
                })(m);
              }
              this.prototype[h] = k;
            }
            return this;
          },
        },
      };
    })();
    (function () {
      function a(a) {
        switch (a) {
          case null:
            return "Null";
          case void 0:
            return "Undefined";
        }
        switch (typeof a) {
          case "boolean":
            return "Boolean";
          case "number":
            return "Number";
          case "string":
            return "String";
        }
        return "Object";
      }
      function b(a, b) {
        for (var c in b) a[c] = b[c];
        return a;
      }
      function c(a) {
        return d("", { "": a }, []);
      }
      function d(b, c, e) {
        c = c[b];
        "Object" === a(c) && "function" === typeof c.toJSON && (c = c.toJSON(b));
        b = k.call(c);
        switch (b) {
          case "[object Number]":
          case "[object Boolean]":
          case "[object String]":
            c = c.valueOf();
        }
        switch (c) {
          case null:
            return "null";
          case !0:
            return "true";
          case !1:
            return "false";
        }
        switch (typeof c) {
          case "string":
            return c.inspect(!0);
          case "number":
            return isFinite(c) ? String(c) : "null";
          case "object":
            for (var f = 0, g = e.length; f < g; f++) if (e[f] === c) throw new TypeError("Cyclic reference to '" + c + "' in object");
            e.push(c);
            var h = [];
            if ("[object Array]" === b) {
              f = 0;
              for (g = c.length; f < g; f++) {
                var m = d(f, c, e);
                h.push("undefined" === typeof m ? "null" : m);
              }
              h = "[" + h.join(",") + "]";
            } else {
              for (var p = Object.keys(c), f = 0, g = p.length; f < g; f++) (b = p[f]), (m = d(b, c, e)), "undefined" !== typeof m && h.push(b.inspect(!0) + ":" + m);
              h = "{" + h.join(",") + "}";
            }
            e.pop();
            return h;
        }
      }
      function f(a) {
        return JSON.stringify(a);
      }
      function e(b) {
        if ("Object" !== a(b)) throw new TypeError();
        var c = [],
          d;
        for (d in b) m.call(b, d) && c.push(d);
        if (r) for (var e = 0; (d = q[e]); e++) m.call(b, d) && c.push(d);
        return c;
      }
      function g(a) {
        return "[object Array]" === k.call(a);
      }
      function h(a) {
        return "undefined" === typeof a;
      }
      var k = Object.prototype.toString,
        m = Object.prototype.hasOwnProperty,
        p = window.JSON && "function" === typeof JSON.stringify && "0" === JSON.stringify(0) && "undefined" === typeof JSON.stringify(Prototype.K),
        q = "toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),
        r = (function () {
          for (var a in { toString: 1 }) if ("toString" === a) return !1;
          return !0;
        })();
      "function" == typeof Array.isArray && Array.isArray([]) && !Array.isArray({}) && (g = Array.isArray);
      b(Object, {
        extend: b,
        inspect: function (a) {
          try {
            return h(a) ? "undefined" : null === a ? "null" : a.inspect ? a.inspect() : String(a);
          } catch (u) {
            if (u instanceof RangeError) return "...";
            throw u;
          }
        },
        toJSON: p ? f : c,
        toQueryString: function (a) {
          return $H(a).toQueryString();
        },
        toHTML: function (a) {
          return a && a.toHTML ? a.toHTML() : String.interpret(a);
        },
        keys: Object.keys || e,
        values: function (a) {
          var b = [],
            c;
          for (c in a) b.push(a[c]);
          return b;
        },
        clone: function (a) {
          return b({}, a);
        },
        isElement: function (a) {
          return !(!a || 1 != a.nodeType);
        },
        isArray: g,
        isHash: function (a) {
          return a instanceof Hash;
        },
        isFunction: function (a) {
          return "[object Function]" === k.call(a);
        },
        isString: function (a) {
          return "[object String]" === k.call(a);
        },
        isNumber: function (a) {
          return "[object Number]" === k.call(a);
        },
        isDate: function (a) {
          return "[object Date]" === k.call(a);
        },
        isUndefined: h,
      });
    })();
    Object.extend(
      Function.prototype,
      (function () {
        function a(a, b) {
          for (var c = a.length, d = b.length; d--; ) a[c + d] = b[d];
          return a;
        }
        function b(b, c) {
          b = d.call(b, 0);
          return a(b, c);
        }
        function c(a) {
          if (2 > arguments.length && Object.isUndefined(arguments[0])) return this;
          if (!Object.isFunction(this)) throw new TypeError("The object is not callable.");
          var c = function () {},
            e = this,
            f = d.call(arguments, 1),
            m = function () {
              var c = b(f, arguments);
              return e.apply(this instanceof m ? this : a, c);
            };
          c.prototype = this.prototype;
          m.prototype = new c();
          return m;
        }
        var d = Array.prototype.slice,
          f = {
            argumentNames: function () {
              var a = this.toString()
                .match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1]
                .replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g, "")
                .replace(/\s+/g, "")
                .split(",");
              return 1 != a.length || a[0] ? a : [];
            },
            bindAsEventListener: function (b) {
              var c = this,
                e = d.call(arguments, 1);
              return function (d) {
                d = a([d || window.event], e);
                return c.apply(b, d);
              };
            },
            curry: function () {
              if (!arguments.length) return this;
              var a = this,
                c = d.call(arguments, 0);
              return function () {
                var d = b(c, arguments);
                return a.apply(this, d);
              };
            },
            delay: function (a) {
              var b = this,
                c = d.call(arguments, 1);
              return window.setTimeout(function () {
                return b.apply(b, c);
              }, 1e3 * a);
            },
            defer: function () {
              var b = a([0.01], arguments);
              return this.delay.apply(this, b);
            },
            wrap: function (b) {
              var c = this;
              return function () {
                var d = a([c.bind(this)], arguments);
                return b.apply(this, d);
              };
            },
            methodize: function () {
              if (this._methodized) return this._methodized;
              var b = this;
              return (this._methodized = function () {
                var c = a([this], arguments);
                return b.apply(null, c);
              });
            },
          };
        Function.prototype.bind || (f.bind = c);
        return f;
      })()
    );
    (function (a) {
      function b() {
        return (
          this.getUTCFullYear() +
          "-" +
          (this.getUTCMonth() + 1).toPaddedString(2) +
          "-" +
          this.getUTCDate().toPaddedString(2) +
          "T" +
          this.getUTCHours().toPaddedString(2) +
          ":" +
          this.getUTCMinutes().toPaddedString(2) +
          ":" +
          this.getUTCSeconds().toPaddedString(2) +
          "Z"
        );
      }
      function c() {
        return this.toISOString();
      }
      a.toISOString || (a.toISOString = b);
      a.toJSON || (a.toJSON = c);
    })(Date.prototype);
    RegExp.prototype.match = RegExp.prototype.test;
    RegExp.escape = function (a) {
      return String(a).replace(/([.*+?^=!:${}()|[\]\/\\])/g, "\\$1");
    };
    var PeriodicalExecuter = Class.create({
      initialize: function (a, b) {
        this.callback = a;
        this.frequency = b;
        this.currentlyExecuting = !1;
        this.registerCallback();
      },
      registerCallback: function () {
        this.timer = setInterval(this.onTimerEvent.bind(this), 1e3 * this.frequency);
      },
      execute: function () {
        this.callback(this);
      },
      stop: function () {
        this.timer && (clearInterval(this.timer), (this.timer = null));
      },
      onTimerEvent: function () {
        if (!this.currentlyExecuting)
          try {
            (this.currentlyExecuting = !0), this.execute(), (this.currentlyExecuting = !1);
          } catch (a) {
            throw ((this.currentlyExecuting = !1), a);
          }
      },
    });
    Object.extend(String, {
      interpret: function (a) {
        return null == a ? "" : String(a);
      },
      specialChar: { "\b": "\\b", "\t": "\\t", "\n": "\\n", "\f": "\\f", "\r": "\\r", "\\": "\\\\" },
    });
    Object.extend(
      String.prototype,
      (function () {
        function a(a) {
          if (Object.isFunction(a)) return a;
          var b = new Template(a);
          return function (a) {
            return b.evaluate(a);
          };
        }
        function b() {
          return this.replace(/^\s+/, "").replace(/\s+$/, "");
        }
        function c(a) {
          var b = this.strip().match(/([^?#]*)(#.*)?$/);
          return b
            ? b[1].split(a || "&").inject({}, function (a, b) {
              if ((b = b.split("="))[0]) {
                var c = decodeURIComponent(b.shift()),
                  d = 1 < b.length ? b.join("=") : b[0];
                void 0 != d && ((d = d.gsub("+", " ")), (d = decodeURIComponent(d)));
                c in a ? (Object.isArray(a[c]) || (a[c] = [a[c]]), a[c].push(d)) : (a[c] = d);
              }
              return a;
            })
            : {};
        }
        function d(a) {
          var b = this.unfilterJSON(),
            c = /[\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff\u0000]/g;
          c.test(b) &&
          (b = b.replace(c, function (a) {
            return "\\u" + ("0000" + a.charCodeAt(0).toString(16)).slice(-4);
          }));
          try {
            if (!a || b.isJSON()) return eval("(" + b + ")");
          } catch (q) {}
          throw new SyntaxError("Badly formed JSON string: " + this.inspect());
        }
        function f() {
          var a = this.unfilterJSON();
          return JSON.parse(a);
        }
        function e(a, b) {
          b = Object.isNumber(b) ? b : 0;
          return this.lastIndexOf(a, b) === b;
        }
        function g(a, b) {
          a = String(a);
          b = Object.isNumber(b) ? b : this.length;
          0 > b && (b = 0);
          b > this.length && (b = this.length);
          var c = b - a.length;
          return 0 <= c && this.indexOf(a, c) === c;
        }
        var h = window.JSON && "function" === typeof JSON.parse && JSON.parse('{"test": true}').test;
        return {
          gsub: function (b, c) {
            var d = "",
              e = this,
              f;
            c = a(c);
            Object.isString(b) && (b = RegExp.escape(b));
            if (!(b.length || (b.source && "(?:)" !== b.source))) return (c = c("")), c + e.split("").join(c) + c;
            for (; 0 < e.length; ) (f = e.match(b)) && 0 < f[0].length ? ((d += e.slice(0, f.index)), (d += String.interpret(c(f))), (e = e.slice(f.index + f[0].length))) : ((d += e), (e = ""));
            return d;
          },
          sub: function (b, c, d) {
            c = a(c);
            d = Object.isUndefined(d) ? 1 : d;
            return this.gsub(b, function (a) {
              return 0 > --d ? a[0] : c(a);
            });
          },
          scan: function (a, b) {
            this.gsub(a, b);
            return String(this);
          },
          truncate: function (a, b) {
            a = a || 30;
            b = Object.isUndefined(b) ? "..." : b;
            return this.length > a ? this.slice(0, a - b.length) + b : String(this);
          },
          strip: String.prototype.trim || b,
          stripTags: function () {
            return this.replace(/<\w+(\s+("[^"]*"|'[^']*'|[^>])+)?(\/)?>|<\/\w+>/gi, "");
          },
          stripScripts: function () {
            return this.replace(new RegExp(Prototype.ScriptFragment, "img"), "");
          },
          extractScripts: function () {
            var a = new RegExp(Prototype.ScriptFragment, "im");
            return (this.match(new RegExp(Prototype.ScriptFragment, "img")) || []).map(function (b) {
              return (b.match(a) || ["", ""])[1];
            });
          },
          evalScripts: function () {
            return this.extractScripts().map(function (a) {
              return eval(a);
            });
          },
          escapeHTML: function () {
            return this.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;");
          },
          unescapeHTML: function () {
            return this.stripTags().replace(/&lt;/g, "<").replace(/&gt;/g, ">").replace(/&amp;/g, "&");
          },
          toQueryParams: c,
          parseQuery: c,
          toArray: function () {
            return this.split("");
          },
          succ: function () {
            return this.slice(0, this.length - 1) + String.fromCharCode(this.charCodeAt(this.length - 1) + 1);
          },
          times: function (a) {
            return 1 > a ? "" : Array(a + 1).join(this);
          },
          camelize: function () {
            return this.replace(/-+(.)?/g, function (a, b) {
              return b ? b.toUpperCase() : "";
            });
          },
          capitalize: function () {
            return this.charAt(0).toUpperCase() + this.substring(1).toLowerCase();
          },
          underscore: function () {
            return this.replace(/::/g, "/")
              .replace(/([A-Z]+)([A-Z][a-z])/g, "$1_$2")
              .replace(/([a-z\d])([A-Z])/g, "$1_$2")
              .replace(/-/g, "_")
              .toLowerCase();
          },
          dasherize: function () {
            return this.replace(/_/g, "-");
          },
          inspect: function (a) {
            var b = this.replace(/[\x00-\x1f\\]/g, function (a) {
              return a in String.specialChar ? String.specialChar[a] : "\\u00" + a.charCodeAt().toPaddedString(2, 16);
            });
            return a ? '"' + b.replace(/"/g, '\\"') + '"' : "'" + b.replace(/'/g, "\\'") + "'";
          },
          unfilterJSON: function (a) {
            return this.replace(a || Prototype.JSONFilter, "$1");
          },
          isJSON: function () {
            var a = this;
            if (a.blank()) return !1;
            a = a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, "@");
            a = a.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, "]");
            a = a.replace(/(?:^|:|,)(?:\s*\[)+/g, "");
            return /^[\],:{}\s]*$/.test(a);
          },
          evalJSON: h ? f : d,
          include: function (a) {
            return -1 < this.indexOf(a);
          },
          startsWith: String.prototype.startsWith || e,
          endsWith: String.prototype.endsWith || g,
          empty: function () {
            return "" == this;
          },
          blank: function () {
            return /^\s*$/.test(this);
          },
          interpolate: function (a, b) {
            return new Template(this, b).evaluate(a);
          },
        };
      })()
    );
    var Template = Class.create({
      initialize: function (a, b) {
        this.template = a.toString();
        this.pattern = b || Template.Pattern;
      },
      evaluate: function (a) {
        a && Object.isFunction(a.toTemplateReplacements) && (a = a.toTemplateReplacements());
        return this.template.gsub(this.pattern, function (b) {
          if (null == a) return b[1] + "";
          var c = b[1] || "";
          if ("\\" == c) return b[2];
          var d = a,
            f = b[3],
            e = /^([^.[]+|\[((?:.*?[^\\])?)\])(\.|\[|$)/;
          b = e.exec(f);
          if (null == b) return c;
          for (; null != b; ) {
            var g = b[1].startsWith("[") ? b[2].replace(/\\\\]/g, "]") : b[1],
              d = d[g];
            if (null == d || "" == b[3]) break;
            f = f.substring("[" == b[3] ? b[1].length : b[0].length);
            b = e.exec(f);
          }
          return c + String.interpret(d);
        });
      },
    });
    Template.Pattern = /(^|.|\r|\n)(#\{(.*?)\})/;
    var $break = {},
      Enumerable = (function () {
        function a(a, b) {
          a = a || Prototype.K;
          var c = !0;
          this.each(function (d, e) {
            c = c && !!a.call(b, d, e, this);
            if (!c) throw $break;
          }, this);
          return c;
        }
        function b(a, b) {
          a = a || Prototype.K;
          var c = !1;
          this.each(function (d, e) {
            if ((c = !!a.call(b, d, e, this))) throw $break;
          }, this);
          return c;
        }
        function c(a, b) {
          a = a || Prototype.K;
          var c = [];
          this.each(function (d, e) {
            c.push(a.call(b, d, e, this));
          }, this);
          return c;
        }
        function d(a, b) {
          var c;
          this.each(function (d, e) {
            if (a.call(b, d, e, this)) throw ((c = d), $break);
          }, this);
          return c;
        }
        function f(a, b) {
          var c = [];
          this.each(function (d, e) {
            a.call(b, d, e, this) && c.push(d);
          }, this);
          return c;
        }
        function e(a) {
          if (Object.isFunction(this.indexOf) && -1 != this.indexOf(a)) return !0;
          var b = !1;
          this.each(function (c) {
            if (c == a) throw ((b = !0), $break);
          });
          return b;
        }
        function g() {
          return this.map();
        }
        return {
          each: function (a, b) {
            try {
              this._each(a, b);
            } catch (m) {
              if (m != $break) throw m;
            }
            return this;
          },
          eachSlice: function (a, b, c) {
            var d = -a,
              e = [],
              f = this.toArray();
            if (1 > a) return f;
            for (; (d += a) < f.length; ) e.push(f.slice(d, d + a));
            return e.collect(b, c);
          },
          all: a,
          every: a,
          any: b,
          some: b,
          collect: c,
          map: c,
          detect: d,
          findAll: f,
          select: f,
          filter: f,
          grep: function (a, b, c) {
            b = b || Prototype.K;
            var d = [];
            Object.isString(a) && (a = new RegExp(RegExp.escape(a)));
            this.each(function (e, f) {
              a.match(e) && d.push(b.call(c, e, f, this));
            }, this);
            return d;
          },
          include: e,
          member: e,
          inGroupsOf: function (a, b) {
            b = Object.isUndefined(b) ? null : b;
            return this.eachSlice(a, function (c) {
              for (; c.length < a; ) c.push(b);
              return c;
            });
          },
          inject: function (a, b, c) {
            this.each(function (d, e) {
              a = b.call(c, a, d, e, this);
            }, this);
            return a;
          },
          invoke: function (a) {
            var b = $A(arguments).slice(1);
            return this.map(function (c) {
              return c[a].apply(c, b);
            });
          },
          max: function (a, b) {
            a = a || Prototype.K;
            var c;
            this.each(function (d, e) {
              d = a.call(b, d, e, this);
              if (null == c || d >= c) c = d;
            }, this);
            return c;
          },
          min: function (a, b) {
            a = a || Prototype.K;
            var c;
            this.each(function (d, e) {
              d = a.call(b, d, e, this);
              if (null == c || d < c) c = d;
            }, this);
            return c;
          },
          partition: function (a, b) {
            a = a || Prototype.K;
            var c = [],
              d = [];
            this.each(function (e, f) {
              (a.call(b, e, f, this) ? c : d).push(e);
            }, this);
            return [c, d];
          },
          pluck: function (a) {
            var b = [];
            this.each(function (c) {
              b.push(c[a]);
            });
            return b;
          },
          reject: function (a, b) {
            var c = [];
            this.each(function (d, e) {
              a.call(b, d, e, this) || c.push(d);
            }, this);
            return c;
          },
          sortBy: function (a, b) {
            return this.map(function (c, d) {
              return { value: c, criteria: a.call(b, c, d, this) };
            }, this)
              .sort(function (a, b) {
                var c = a.criteria,
                  d = b.criteria;
                return c < d ? -1 : c > d ? 1 : 0;
              })
              .pluck("value");
          },
          toArray: g,
          entries: g,
          zip: function () {
            var a = Prototype.K,
              b = $A(arguments);
            Object.isFunction(b.last()) && (a = b.pop());
            var c = [this].concat(b).map($A);
            return this.map(function (b, d) {
              return a(c.pluck(d));
            });
          },
          size: function () {
            return this.toArray().length;
          },
          inspect: function () {
            return "#<Enumerable:" + this.toArray().inspect() + ">";
          },
          find: d,
        };
      })();
    function $A(a) {
      if (!a) return [];
      if ("toArray" in Object(a)) return a.toArray();
      for (var b = a.length || 0, c = Array(b); b--; ) c[b] = a[b];
      return c;
    }
    function $w(a) {
      return Object.isString(a) ? ((a = a.strip()) ? a.split(/\s+/) : []) : [];
    }
    Array.from = $A;
    (function () {
      function a(a, b) {
        for (var c = 0, d = this.length >>> 0; c < d; c++) c in this && a.call(b, this[c], c, this);
      }
      function b() {
        return q.call(this, 0);
      }
      function c(a, b) {
        if (null == this) throw new TypeError();
        var c = Object(this),
          d = c.length >>> 0;
        if (0 === d) return -1;
        b = Number(b);
        isNaN(b) ? (b = 0) : 0 !== b && isFinite(b) && (b = (0 < b ? 1 : -1) * Math.floor(Math.abs(b)));
        if (b > d) return -1;
        for (var e = 0 <= b ? b : Math.max(d - Math.abs(b), 0); e < d; e++) if (e in c && c[e] === a) return e;
        return -1;
      }
      function d(a, b) {
        if (null == this) throw new TypeError();
        var c = Object(this),
          d = c.length >>> 0;
        if (0 === d) return -1;
        Object.isUndefined(b) ? (b = d) : ((b = Number(b)), isNaN(b) ? (b = 0) : 0 !== b && isFinite(b) && (b = (0 < b ? 1 : -1) * Math.floor(Math.abs(b))));
        for (d = 0 <= b ? Math.min(b, d - 1) : d - Math.abs(b); 0 <= d; d--) if (d in c && c[d] === a) return d;
        return -1;
      }
      function f(a) {
        var b = [],
          c = q.call(arguments, 0),
          d,
          e = 0;
        c.unshift(this);
        for (var f = 0, g = c.length; f < g; f++)
          if (((d = c[f]), !Object.isArray(d) || "callee" in d)) b[e++] = d;
          else for (var h = 0, k = d.length; h < k; h++) h in d && (b[e] = d[h]), e++;
        b.length = e;
        return b;
      }
      function e(a) {
        return function () {
          if (0 === arguments.length) return a.call(this, Prototype.K);
          if (void 0 === arguments[0]) {
            var b = q.call(arguments, 1);
            b.unshift(Prototype.K);
            return a.apply(this, b);
          }
          return a.apply(this, arguments);
        };
      }
      function g(a, b) {
        if (null == this) throw new TypeError();
        a = a || Prototype.K;
        for (var c = Object(this), d = [], e = 0, f = 0, g = c.length >>> 0; f < g; f++) f in c && (d[e] = a.call(b, c[f], f, c)), e++;
        d.length = e;
        return d;
      }
      function h(a, b) {
        if (null == this || !Object.isFunction(a)) throw new TypeError();
        for (var c = Object(this), d = [], e, f = 0, g = c.length >>> 0; f < g; f++) f in c && ((e = c[f]), a.call(b, e, f, c) && d.push(e));
        return d;
      }
      function k(a, b) {
        if (null == this) throw new TypeError();
        a = a || Prototype.K;
        for (var c = Object(this), d = 0, e = c.length >>> 0; d < e; d++) if (d in c && a.call(b, c[d], d, c)) return !0;
        return !1;
      }
      function m(a, b) {
        if (null == this) throw new TypeError();
        a = a || Prototype.K;
        for (var c = Object(this), d = 0, e = c.length >>> 0; d < e; d++) if (d in c && !a.call(b, c[d], d, c)) return !1;
        return !0;
      }
      var p = Array.prototype,
        q = p.slice,
        r = p.forEach;
      r || (r = a);
      p.map && (g = e(Array.prototype.map));
      p.filter && (h = Array.prototype.filter);
      p.some && (k = e(Array.prototype.some));
      p.every && (m = e(Array.prototype.every));
      Object.extend(p, Enumerable);
      p.entries === Enumerable.entries && delete p.entries;
      p._reverse || (p._reverse = p.reverse);
      Object.extend(p, {
        _each: r,
        map: g,
        collect: g,
        select: h,
        filter: h,
        findAll: h,
        some: k,
        any: k,
        every: m,
        all: m,
        clear: function () {
          this.length = 0;
          return this;
        },
        first: function () {
          return this[0];
        },
        last: function () {
          return this[this.length - 1];
        },
        compact: function () {
          return this.select(function (a) {
            return null != a;
          });
        },
        flatten: function () {
          return this.inject([], function (a, b) {
            if (Object.isArray(b)) return a.concat(b.flatten());
            a.push(b);
            return a;
          });
        },
        without: function () {
          var a = q.call(arguments, 0);
          return this.select(function (b) {
            return !a.include(b);
          });
        },
        reverse: function (a) {
          return (!1 === a ? this.toArray() : this)._reverse();
        },
        uniq: function (a) {
          return this.inject([], function (b, c, d) {
            (0 != d && (a ? b.last() == c : b.include(c))) || b.push(c);
            return b;
          });
        },
        intersect: function (a) {
          return this.uniq().findAll(function (b) {
            return -1 !== a.indexOf(b);
          });
        },
        clone: b,
        toArray: b,
        size: function () {
          return this.length;
        },
        inspect: function () {
          return "[" + this.map(Object.inspect).join(", ") + "]";
        },
      });
      (function () {
        return 1 !== [].concat(arguments)[0][0];
      })(1, 2) && (p.concat = f);
      p.indexOf || (p.indexOf = c);
      p.lastIndexOf || (p.lastIndexOf = d);
    })();
    function $H(a) {
      return new Hash(a);
    }
    var Hash = Class.create(
      Enumerable,
      (function () {
        function a() {
          return Object.clone(this._object);
        }
        function b(a, b) {
          if (Object.isUndefined(b)) return a;
          b = String.interpret(b);
          b = b.gsub(/(\r)?\n/, "\r\n");
          b = encodeURIComponent(b);
          b = b.gsub(/%20/, "+");
          return a + "=" + b;
        }
        return {
          initialize: function (a) {
            this._object = Object.isHash(a) ? a.toObject() : Object.clone(a);
          },
          _each: function (a, b) {
            var c = 0,
              d;
            for (d in this._object) {
              var g = this._object[d],
                h = [d, g];
              h.key = d;
              h.value = g;
              a.call(b, h, c);
              c++;
            }
          },
          set: function (a, b) {
            return (this._object[a] = b);
          },
          get: function (a) {
            if (this._object[a] !== Object.prototype[a]) return this._object[a];
          },
          unset: function (a) {
            var b = this._object[a];
            delete this._object[a];
            return b;
          },
          toObject: a,
          toTemplateReplacements: a,
          keys: function () {
            return this.pluck("key");
          },
          values: function () {
            return this.pluck("value");
          },
          index: function (a) {
            var b = this.detect(function (b) {
              return b.value === a;
            });
            return b && b.key;
          },
          merge: function (a) {
            return this.clone().update(a);
          },
          update: function (a) {
            return new Hash(a).inject(this, function (a, b) {
              a.set(b.key, b.value);
              return a;
            });
          },
          toQueryString: function () {
            return this.inject([], function (a, d) {
              var c = encodeURIComponent(d.key),
                e = d.value;
              if (e && "object" == typeof e) {
                if (Object.isArray(e)) {
                  for (var g = [], h = 0, k = e.length, m; h < k; h++) (m = e[h]), g.push(b(c, m));
                  return a.concat(g);
                }
              } else a.push(b(c, e));
              return a;
            }).join("&");
          },
          inspect: function () {
            return (
              "#<Hash:{" +
              this.map(function (a) {
                return a.map(Object.inspect).join(": ");
              }).join(", ") +
              "}>"
            );
          },
          toJSON: a,
          clone: function () {
            return new Hash(this);
          },
        };
      })()
    );
    Hash.from = $H;
    Object.extend(
      Number.prototype,
      (function () {
        return {
          toColorPart: function () {
            return this.toPaddedString(2, 16);
          },
          succ: function () {
            return this + 1;
          },
          times: function (a, b) {
            $R(0, this, !0).each(a, b);
            return this;
          },
          toPaddedString: function (a, b) {
            var c = this.toString(b || 10);
            return "0".times(a - c.length) + c;
          },
          abs: function () {
            return Math.abs(this);
          },
          round: function () {
            return Math.round(this);
          },
          ceil: function () {
            return Math.ceil(this);
          },
          floor: function () {
            return Math.floor(this);
          },
        };
      })()
    );
    function $R(a, b, c) {
      return new ObjectRange(a, b, c);
    }
    var ObjectRange = Class.create(
        Enumerable,
        (function () {
          return {
            initialize: function (a, b, c) {
              this.start = a;
              this.end = b;
              this.exclusive = c;
            },
            _each: function (a, b) {
              var c = this.start,
                d;
              for (d = 0; this.include(c); d++) a.call(b, c, d), (c = c.succ());
            },
            include: function (a) {
              return a < this.start ? !1 : this.exclusive ? a < this.end : a <= this.end;
            },
          };
        })()
      ),
      Abstract = {},
      Try = {
        these: function () {
          for (var a, b = 0, c = arguments.length; b < c; b++) {
            var d = arguments[b];
            try {
              a = d();
              break;
            } catch (f) {}
          }
          return a;
        },
      },
      Ajax = {
        getTransport: function () {
          return (
            Try.these(
              function () {
                return new XMLHttpRequest();
              },
              function () {
                return new ActiveXObject("Msxml2.XMLHTTP");
              },
              function () {
                return new ActiveXObject("Microsoft.XMLHTTP");
              }
            ) || !1
          );
        },
        activeRequestCount: 0,
        Responders: {
          responders: [],
          _each: function (a, b) {
            this.responders._each(a, b);
          },
          register: function (a) {
            this.include(a) || this.responders.push(a);
          },
          unregister: function (a) {
            this.responders = this.responders.without(a);
          },
          dispatch: function (a, b, c, d) {
            this.each(function (f) {
              if (Object.isFunction(f[a]))
                try {
                  f[a].apply(f, [b, c, d]);
                } catch (e) {}
            });
          },
        },
      };
    Object.extend(Ajax.Responders, Enumerable);
    Ajax.Responders.register({
      onCreate: function () {
        Ajax.activeRequestCount++;
      },
      onComplete: function () {
        Ajax.activeRequestCount--;
      },
    });
    Ajax.Base = Class.create({
      initialize: function (a) {
        this.options = { method: "post", asynchronous: !0, contentType: "application/x-www-form-urlencoded", encoding: "UTF-8", parameters: "", evalJSON: !0, evalJS: !0 };
        Object.extend(this.options, a || {});
        this.options.method = this.options.method.toLowerCase();
        Object.isHash(this.options.parameters) && (this.options.parameters = this.options.parameters.toObject());
      },
    });
    Ajax.Request = Class.create(Ajax.Base, {
      _complete: !1,
      initialize: function ($super, b, c) {
        $super(c);
        this.transport = Ajax.getTransport();
        this.request(b);
      },
      request: function (a) {
        this.url = a;
        this.method = this.options.method;
        a = Object.isString(this.options.parameters) ? this.options.parameters : Object.toQueryString(this.options.parameters);
        ["get", "post"].include(this.method) || ((a += (a ? "&" : "") + "_method=" + this.method), (this.method = "post"));
        a && "get" === this.method && (this.url += (this.url.include("?") ? "&" : "?") + a);
        this.parameters = a.toQueryParams();
        try {
          var b = new Ajax.Response(this);
          if (this.options.onCreate) this.options.onCreate(b);
          Ajax.Responders.dispatch("onCreate", this, b);
          this.transport.open(this.method.toUpperCase(), this.url, this.options.asynchronous);
          this.options.asynchronous && this.respondToReadyState.bind(this).defer(1);
          this.transport.onreadystatechange = this.onStateChange.bind(this);
          this.setRequestHeaders();
          this.body = "post" == this.method ? this.options.postBody || a : null;
          this.transport.send(this.body);
          if (!this.options.asynchronous && this.transport.overrideMimeType) this.onStateChange();
        } catch (c) {
          this.dispatchException(c);
        }
      },
      onStateChange: function () {
        var a = this.transport.readyState;
        1 < a && (4 != a || !this._complete) && this.respondToReadyState(this.transport.readyState);
      },
      setRequestHeaders: function () {
        var a = { "X-Requested-With": "XMLHttpRequest", "X-Prototype-Version": Prototype.Version, Accept: "text/javascript, text/html, application/xml, text/xml, */*" };
        "post" == this.method &&
        ((a["Content-type"] = this.options.contentType + (this.options.encoding ? "; charset=" + this.options.encoding : "")),
        this.transport.overrideMimeType && 2005 > (navigator.userAgent.match(/Gecko\/(\d{4})/) || [0, 2005])[1] && (a.Connection = "close"));
        if ("object" == typeof this.options.requestHeaders) {
          var b = this.options.requestHeaders;
          if (Object.isFunction(b.push)) for (var c = 0, d = b.length; c < d; c += 2) a[b[c]] = b[c + 1];
          else
            $H(b).each(function (b) {
              a[b.key] = b.value;
            });
        }
        for (var f in a) null != a[f] && this.transport.setRequestHeader(f, a[f]);
      },
      success: function () {
        var a = this.getStatus();
        return !a || (200 <= a && 300 > a) || 304 == a;
      },
      getStatus: function () {
        try {
          return 1223 === this.transport.status ? 204 : this.transport.status || 0;
        } catch (a) {
          return 0;
        }
      },
      respondToReadyState: function (a) {
        a = Ajax.Request.Events[a];
        var b = new Ajax.Response(this);
        if ("Complete" == a) {
          try {
            (this._complete = !0), (this.options["on" + b.status] || this.options["on" + (this.success() ? "Success" : "Failure")] || Prototype.emptyFunction)(b, b.headerJSON);
          } catch (d) {
            this.dispatchException(d);
          }
          var c = b.getHeader("Content-type");
          ("force" == this.options.evalJS || (this.options.evalJS && this.isSameOrigin() && c && c.match(/^\s*(text|application)\/(x-)?(java|ecma)script(;.*)?\s*$/i))) && this.evalResponse();
        }
        try {
          (this.options["on" + a] || Prototype.emptyFunction)(b, b.headerJSON), Ajax.Responders.dispatch("on" + a, this, b, b.headerJSON);
        } catch (d) {
          this.dispatchException(d);
        }
        "Complete" == a && (this.transport.onreadystatechange = Prototype.emptyFunction);
      },
      isSameOrigin: function () {
        var a = this.url.match(/^\s*https?:\/\/[^\/]*/);
        return !a || a[0] == "#{protocol}//#{domain}#{port}".interpolate({ protocol: location.protocol, domain: document.domain, port: location.port ? ":" + location.port : "" });
      },
      getHeader: function (a) {
        try {
          return this.transport.getResponseHeader(a) || null;
        } catch (b) {
          return null;
        }
      },
      evalResponse: function () {
        try {
          return eval((this.transport.responseText || "").unfilterJSON());
        } catch (a) {
          this.dispatchException(a);
        }
      },
      dispatchException: function (a) {
        (this.options.onException || Prototype.emptyFunction)(this, a);
        Ajax.Responders.dispatch("onException", this, a);
      },
    });
    Ajax.Request.Events = ["Uninitialized", "Loading", "Loaded", "Interactive", "Complete"];
    Ajax.Response = Class.create({
      initialize: function (a) {
        this.request = a;
        a = this.transport = a.transport;
        var b = (this.readyState = a.readyState);
        if ((2 < b && !Prototype.Browser.IE) || 4 == b)
          (this.status = this.getStatus()), (this.statusText = this.getStatusText()), (this.responseText = String.interpret(a.responseText)), (this.headerJSON = this._getHeaderJSON());
        4 == b && ((a = a.responseXML), (this.responseXML = Object.isUndefined(a) ? null : a), (this.responseJSON = this._getResponseJSON()));
      },
      status: 0,
      statusText: "",
      getStatus: Ajax.Request.prototype.getStatus,
      getStatusText: function () {
        try {
          return this.transport.statusText || "";
        } catch (a) {
          return "";
        }
      },
      getHeader: Ajax.Request.prototype.getHeader,
      getAllHeaders: function () {
        try {
          return this.getAllResponseHeaders();
        } catch (a) {
          return null;
        }
      },
      getResponseHeader: function (a) {
        return this.transport.getResponseHeader(a);
      },
      getAllResponseHeaders: function () {
        return this.transport.getAllResponseHeaders();
      },
      _getHeaderJSON: function () {
        var a = this.getHeader("X-JSON");
        if (!a) return null;
        try {
          a = decodeURIComponent(escape(a));
        } catch (b) {}
        try {
          return a.evalJSON(this.request.options.sanitizeJSON || !this.request.isSameOrigin());
        } catch (b) {
          this.request.dispatchException(b);
        }
      },
      _getResponseJSON: function () {
        var a = this.request.options;
        if (!a.evalJSON || ("force" != a.evalJSON && !(this.getHeader("Content-type") || "").include("application/json")) || this.responseText.blank()) return null;
        try {
          return this.responseText.evalJSON(a.sanitizeJSON || !this.request.isSameOrigin());
        } catch (b) {
          this.request.dispatchException(b);
        }
      },
    });
    Ajax.Updater = Class.create(Ajax.Request, {
      initialize: function ($super, b, c, d) {
        this.container = { success: b.success || b, failure: b.failure || (b.success ? null : b) };
        d = Object.clone(d);
        var f = d.onComplete;
        d.onComplete = function (b, c) {
          this.updateContent(b.responseText);
          Object.isFunction(f) && f(b, c);
        }.bind(this);
        $super(c, d);
      },
      updateContent: function (a) {
        var b = this.container[this.success() ? "success" : "failure"],
          c = this.options;
        c.evalScripts || (a = a.stripScripts());
        if ((b = $(b)))
          if (c.insertion)
            if (Object.isString(c.insertion)) {
              var d = {};
              d[c.insertion] = a;
              b.insert(d);
            } else c.insertion(b, a);
          else b.update(a);
      },
    });
    Ajax.PeriodicalUpdater = Class.create(Ajax.Base, {
      initialize: function ($super, b, c, d) {
        $super(d);
        this.onComplete = this.options.onComplete;
        this.frequency = this.options.frequency || 2;
        this.decay = this.options.decay || 1;
        this.updater = {};
        this.container = b;
        this.url = c;
        this.start();
      },
      start: function () {
        this.options.onComplete = this.updateComplete.bind(this);
        this.onTimerEvent();
      },
      stop: function () {
        this.updater.options.onComplete = void 0;
        clearTimeout(this.timer);
        (this.onComplete || Prototype.emptyFunction).apply(this, arguments);
      },
      updateComplete: function (a) {
        this.options.decay && ((this.decay = a.responseText == this.lastText ? this.decay * this.options.decay : 1), (this.lastText = a.responseText));
        this.timer = this.onTimerEvent.bind(this).delay(this.decay * this.frequency);
      },
      onTimerEvent: function () {
        this.updater = new Ajax.Updater(this.container, this.url, this.options);
      },
    });
    (function (a) {
      function b(a) {
        if (1 < arguments.length) {
          for (var d = 0, e = [], f = arguments.length; d < f; d++) e.push(b(arguments[d]));
          return e;
        }
        Object.isString(a) && (a = document.getElementById(a));
        return c.extend(a);
      }
      function c(a, b) {
        b = b || {};
        a = a.toLowerCase();
        if (z && b.name) return (a = "<" + a + ' name="' + b.name + '">'), delete b.name, c.writeAttribute(document.createElement(a), b);
        ua[a] || (ua[a] = c.extend(document.createElement(a)));
        var d = "select" === a || "type" in b ? document.createElement(a) : ua[a].cloneNode(!1);
        return c.writeAttribute(d, b);
      }
      function d(a, c) {
        a = b(a);
        if (c && c.toElement) c = c.toElement();
        else if (!Object.isElement(c)) {
          c = Object.toHTML(c);
          var d = a.ownerDocument.createRange();
          d.selectNode(a);
          c.evalScripts.bind(c).defer();
          c = d.createContextualFragment(c.stripScripts());
        }
        a.parentNode.replaceChild(c, a);
        return a;
      }
      function f(a, d) {
        a = b(a);
        d && d.toElement && (d = d.toElement());
        if (Object.isElement(d)) return a.parentNode.replaceChild(d, a), a;
        d = Object.toHTML(d);
        var f = a.parentNode,
          g = f.tagName.toUpperCase();
        if (g in pa.tags) {
          var h = c.next(a),
            g = e(g, d.stripScripts());
          f.removeChild(a);
          g.each(
            h
              ? function (a) {
                f.insertBefore(a, h);
              }
              : function (a) {
                f.appendChild(a);
              }
          );
        } else a.outerHTML = d.stripScripts();
        d.evalScripts.bind(d).defer();
        return a;
      }
      function e(a, b, c) {
        var d = pa.tags[a];
        a = M;
        var e = !!d;
        !e && c && ((e = !0), (d = ["", "", 0]));
        if (e) for (a.innerHTML = "&#160;" + d[0] + b + d[1], a.removeChild(a.firstChild), b = d[2]; b--; ) a = a.firstChild;
        else a.innerHTML = b;
        return $A(a.childNodes);
      }
      function g(a) {
        var b = N(a);
        b && (c.stopObserving(a), ra || (a._prototypeUID = ia), delete c.Storage[b]);
      }
      function h(a, d, e) {
        a = b(a);
        e = e || -1;
        for (var f = []; (a = a[d]) && (a.nodeType === Node.ELEMENT_NODE && f.push(c.extend(a)), f.length !== e); );
        return f;
      }
      function k(a) {
        for (a = b(a).firstChild; a && a.nodeType !== Node.ELEMENT_NODE; ) a = a.nextSibling;
        return b(a);
      }
      function m(a) {
        var d = [];
        for (a = b(a).firstChild; a; ) a.nodeType === Node.ELEMENT_NODE && d.push(c.extend(a)), (a = a.nextSibling);
        return d;
      }
      function p(a) {
        return h(a, "previousSibling");
      }
      function q(a) {
        return h(a, "nextSibling");
      }
      function r(a, d, e, f) {
        a = b(a);
        e = e || 0;
        f = f || 0;
        Object.isNumber(e) && ((f = e), (e = null));
        for (; (a = a[d]); ) if (1 === a.nodeType && !((e && !Prototype.Selector.match(a, e)) || 0 <= --f)) return c.extend(a);
      }
      function n(a) {
        a = b(a);
        var c = Ca.call(arguments, 1).join(", ");
        return Prototype.Selector.select(c, a);
      }
      function u(a, c) {
        a = b(a);
        c = b(c);
        if (!a || !c) return !1;
        for (; (a = a.parentNode); ) if (a === c) return !0;
        return !1;
      }
      function v(a, c) {
        a = b(a);
        c = b(c);
        return a && c ? (c.contains ? c.contains(a) && c !== a : u(a, c)) : !1;
      }
      function I(a, c) {
        a = b(a);
        c = b(c);
        return a && c ? 8 === (a.compareDocumentPosition(c) & 8) : !1;
      }
      function Y(a, c) {
        return b(a).getAttribute(c);
      }
      function O(a, c) {
        a = b(a);
        var d = X.read;
        if (d.values[c]) return d.values[c](a, c);
        d.names[c] && (c = d.names[c]);
        return c.include(":") ? (a.attributes && a.attributes[c] ? a.attributes[c].value : null) : a.getAttribute(c);
      }
      function w(a, b) {
        return "title" === b ? a.title : a.getAttribute(b);
      }
      function F(a, c) {
        c = X.has[c] || c;
        var d = b(a).getAttributeNode(c);
        return !(!d || !d.specified);
      }
      function J(a, b) {
        return "checked" === b ? a.checked : F(a, b);
      }
      function B(a) {
        if (Fa[a]) return Fa[a];
        var b = new RegExp("(^|\\s+)" + a + "(\\s+|$)");
        return (Fa[a] = b);
      }
      function E(a, c) {
        if ((a = b(a))) {
          var d = a.className;
          return 0 === d.length ? !1 : d === c ? !0 : B(c).test(d);
        }
      }
      function oa(a, b) {
        return a.getAttribute(b, 2);
      }
      function V(a, c) {
        return b(a).hasAttribute(c) ? c : null;
      }
      function sa(a, d) {
        a = b(a);
        d = "float" === d || "cssFloat" === d ? "styleFloat" : d.camelize();
        var e = a.style[d];
        !e && a.currentStyle && (e = a.currentStyle[d]);
        return "opacity" === d ? (Aa ? (e ? parseFloat(e) : 1) : S(a)) : "auto" === e ? (("width" !== d && "height" !== d) || !c.visible(a) ? null : c.measure(a, d) + "px") : e;
      }
      function la(a, c) {
        a = b(a);
        1 == c || "" === c ? (c = "") : 1e-5 > c && (c = 0);
        a.style.opacity = c;
        return a;
      }
      function ha(a, d) {
        if (Aa) return la(a, d);
        var e = b(a);
        (e.currentStyle && e.currentStyle.hasLayout) || (e.style.zoom = 1);
        a = e;
        var e = c.getStyle(a, "filter"),
          f = a.style;
        if (1 == d || "" === d) return (e = (e || "").replace(/alpha\([^\)]*\)/gi, "")) ? (f.filter = e) : f.removeAttribute("filter"), a;
        1e-5 > d && (d = 0);
        f.filter = (e || "").replace(/alpha\([^\)]*\)/gi, "") + " alpha(opacity=" + 100 * d + ")";
        return a;
      }
      function ma(a) {
        return c.getStyle(a, "opacity");
      }
      function S(a) {
        if (Aa) return ma(a);
        a = c.getStyle(a, "filter");
        return 0 === a.length ? 1 : (a = (a || "").match(/alpha\(opacity=(.*)\)/i)) && a[1] ? parseFloat(a[1]) / 100 : 1;
      }
      function N(a) {
        if (a === window) return 0;
        "undefined" === typeof a._prototypeUID && (a._prototypeUID = c.Storage.UID++);
        return a._prototypeUID;
      }
      function C(a) {
        return a === window ? 0 : a == document ? 1 : a.uniqueID;
      }
      function K(a) {
        if ((a = b(a))) return (a = N(a)), c.Storage[a] || (c.Storage[a] = $H()), c.Storage[a];
      }
      function P(a, b) {
        for (var c in b) {
          var d = b[c];
          !Object.isFunction(d) || c in a || (a[c] = d.methodize());
        }
      }
      function x(a) {
        if (!a || N(a) in Ha || a.nodeType !== Node.ELEMENT_NODE || a == window) return a;
        var b = Object.clone(Pa),
          c = a.tagName.toUpperCase();
        xa[c] && Object.extend(b, xa[c]);
        P(a, b);
        Ha[N(a)] = !0;
        return a;
      }
      function A(a) {
        if (!a || N(a) in Ha) return a;
        var b = a.tagName;
        b && /^(?:object|applet|embed)$/i.test(b) && (P(a, c.Methods), P(a, c.Methods.Simulated), P(a, c.Methods.ByTag[b.toUpperCase()]));
        return a;
      }
      function T(a, b) {
        a = a.toUpperCase();
        xa[a] || (xa[a] = {});
        Object.extend(xa[a], b);
      }
      function D(a, b, c) {
        Object.isUndefined(c) && (c = !1);
        for (var d in b) {
          var e = b[d];
          Object.isFunction(e) && ((c && d in a) || (a[d] = e.methodize()));
        }
      }
      function ga(a) {
        var b,
          c = {
            OPTGROUP: "OptGroup",
            TEXTAREA: "TextArea",
            P: "Paragraph",
            FIELDSET: "FieldSet",
            UL: "UList",
            OL: "OList",
            DL: "DList",
            DIR: "Directory",
            H1: "Heading",
            H2: "Heading",
            H3: "Heading",
            H4: "Heading",
            H5: "Heading",
            H6: "Heading",
            Q: "Quote",
            INS: "Mod",
            DEL: "Mod",
            A: "Anchor",
            IMG: "Image",
            CAPTION: "TableCaption",
            COL: "TableCol",
            COLGROUP: "TableCol",
            THEAD: "TableSection",
            TFOOT: "TableSection",
            TBODY: "TableSection",
            TR: "TableRow",
            TH: "TableCell",
            TD: "TableCell",
            FRAMESET: "FrameSet",
            IFRAME: "IFrame",
          };
        c[a] && (b = "HTML" + c[a] + "Element");
        if (window[b]) return window[b];
        b = "HTML" + a + "Element";
        if (window[b]) return window[b];
        b = "HTML" + a.capitalize() + "Element";
        if (window[b]) return window[b];
        a = document.createElement(a);
        return a.__proto__ || a.constructor.prototype;
      }
      function aa() {
        ua = M = null;
      }
      var ia,
        Ca = Array.prototype.slice,
        M = document.createElement("div");
      a.$ = b;
      a.Node || (a.Node = {});
      a.Node.ELEMENT_NODE ||
      Object.extend(a.Node, {
        ELEMENT_NODE: 1,
        ATTRIBUTE_NODE: 2,
        TEXT_NODE: 3,
        CDATA_SECTION_NODE: 4,
        ENTITY_REFERENCE_NODE: 5,
        ENTITY_NODE: 6,
        PROCESSING_INSTRUCTION_NODE: 7,
        COMMENT_NODE: 8,
        DOCUMENT_NODE: 9,
        DOCUMENT_TYPE_NODE: 10,
        DOCUMENT_FRAGMENT_NODE: 11,
        NOTATION_NODE: 12,
      });
      var ua = {},
        z = (function () {
          try {
            var a = document.createElement('<input name="x">');
            return "input" === a.tagName.toLowerCase() && "x" === a.name;
          } catch (ta) {
            return !1;
          }
        })(),
        ba = a.Element;
      a.Element = c;
      Object.extend(a.Element, ba || {});
      ba && (a.Element.prototype = ba.prototype);
      c.Methods = { ByTag: {}, Simulated: {} };
      var ba = {},
        ca = { id: "id", className: "class" };
      ba.inspect = function (a) {
        a = b(a);
        var c = "<" + a.tagName.toLowerCase(),
          d,
          e,
          f;
        for (f in ca) (d = ca[f]), (e = (a[f] || "").toString()) && (c += " " + d + "=" + e.inspect(!0));
        return c + ">";
      };
      Object.extend(ba, {
        visible: function (a) {
          return "none" !== b(a).getStyle("display");
        },
        toggle: function (a, d) {
          a = b(a);
          "boolean" !== typeof d && (d = !c.visible(a));
          c[d ? "show" : "hide"](a);
          return a;
        },
        hide: function (a) {
          a = b(a);
          a.style.display = "none";
          return a;
        },
        show: function (a) {
          a = b(a);
          a.style.display = "";
          return a;
        },
      });
      var ea = (function () {
          var a = document.createElement("select"),
            b = !0;
          a.innerHTML = '<option value="test">test</option>';
          a.options && a.options[0] && (b = "OPTION" !== a.options[0].nodeName.toUpperCase());
          return b;
        })(),
        W = (function () {
          try {
            var a = document.createElement("table");
            if (a && a.tBodies) return (a.innerHTML = "<tbody><tr><td>test</td></tr></tbody>"), "undefined" == typeof a.tBodies[0];
          } catch (ta) {
            return !0;
          }
        })(),
        fa = (function () {
          try {
            var a = document.createElement("div");
            a.innerHTML = "<link />";
            return 0 === a.childNodes.length;
          } catch (ta) {
            return !0;
          }
        })(),
        Na = ea || W || fa,
        wa = (function () {
          var a = document.createElement("script"),
            b = !1;
          try {
            a.appendChild(document.createTextNode("")), (b = !a.firstChild || (a.firstChild && 3 !== a.firstChild.nodeType));
          } catch (Z) {
            b = !0;
          }
          return b;
        })(),
        pa = {
          before: function (a, b) {
            a.parentNode.insertBefore(b, a);
          },
          top: function (a, b) {
            a.insertBefore(b, a.firstChild);
          },
          bottom: function (a, b) {
            a.appendChild(b);
          },
          after: function (a, b) {
            a.parentNode.insertBefore(b, a.nextSibling);
          },
          tags: {
            TABLE: ["<table>", "</table>", 1],
            TBODY: ["<table><tbody>", "</tbody></table>", 2],
            TR: ["<table><tbody><tr>", "</tr></tbody></table>", 3],
            TD: ["<table><tbody><tr><td>", "</td></tr></tbody></table>", 4],
            SELECT: ["<select>", "</select>", 1],
          },
        },
        ea = pa.tags;
      Object.extend(ea, { THEAD: ea.TBODY, TFOOT: ea.TBODY, TH: ea.TD });
      "outerHTML" in document.documentElement && (d = f);
      Object.extend(ba, {
        remove: function (a) {
          a = b(a);
          a.parentNode.removeChild(a);
          return a;
        },
        update: function (a, c) {
          a = b(a);
          for (var d = a.getElementsByTagName("*"), f = d.length; f--; ) g(d[f]);
          c && c.toElement && (c = c.toElement());
          if (Object.isElement(c)) return a.update().insert(c);
          c = Object.toHTML(c);
          f = a.tagName.toUpperCase();
          if ("SCRIPT" === f && wa) return (a.text = c), a;
          if (Na)
            if (f in pa.tags) {
              for (; a.firstChild; ) a.removeChild(a.firstChild);
              for (var d = e(f, c.stripScripts()), f = 0, h; (h = d[f]); f++) a.appendChild(h);
            } else if (fa && Object.isString(c) && -1 < c.indexOf("<link")) {
              for (; a.firstChild; ) a.removeChild(a.firstChild);
              d = e(f, c.stripScripts(), !0);
              for (f = 0; (h = d[f]); f++) a.appendChild(h);
            } else a.innerHTML = c.stripScripts();
          else a.innerHTML = c.stripScripts();
          c.evalScripts.bind(c).defer();
          return a;
        },
        replace: d,
        insert: function (a, c) {
          a = b(a);
          var d = c;
          (Object.isUndefined(d) || null === d ? 0 : Object.isString(d) || Object.isNumber(d) || Object.isElement(d) || d.toElement || d.toHTML) && (c = { bottom: c });
          for (var f in c) {
            var d = a,
              g = c[f],
              h = f,
              h = h.toLowerCase(),
              k = pa[h];
            g && g.toElement && (g = g.toElement());
            if (Object.isElement(g)) k(d, g);
            else {
              var g = Object.toHTML(g),
                l = ("before" === h || "after" === h ? d.parentNode : d).tagName.toUpperCase(),
                l = e(l, g.stripScripts());
              ("top" !== h && "after" !== h) || l.reverse();
              for (var h = 0, m; (m = l[h]); h++) k(d, m);
              g.evalScripts.bind(g).defer();
            }
          }
          return a;
        },
        wrap: function (a, d, e) {
          a = b(a);
          Object.isElement(d) ? b(d).writeAttribute(e || {}) : (d = Object.isString(d) ? new c(d, e) : new c("div", d));
          a.parentNode && a.parentNode.replaceChild(d, a);
          d.appendChild(a);
          return d;
        },
        cleanWhitespace: function (a) {
          a = b(a);
          for (var c = a.firstChild; c; ) {
            var d = c.nextSibling;
            c.nodeType !== Node.TEXT_NODE || /\S/.test(c.nodeValue) || a.removeChild(c);
            c = d;
          }
          return a;
        },
        empty: function (a) {
          return b(a).innerHTML.blank();
        },
        clone: function (a, d) {
          if ((a = b(a))) {
            var e = a.cloneNode(d);
            if (!ra && ((e._prototypeUID = ia), d)) for (var f = c.select(e, "*"), g = f.length; g--; ) f[g]._prototypeUID = ia;
            return c.extend(e);
          }
        },
        purge: function (a) {
          if ((a = b(a))) {
            g(a);
            a = a.getElementsByTagName("*");
            for (var c = a.length; c--; ) g(a[c]);
            return null;
          }
        },
      });
      Object.extend(ba, {
        recursivelyCollect: h,
        ancestors: function (a) {
          return h(a, "parentNode");
        },
        descendants: function (a) {
          return c.select(a, "*");
        },
        firstDescendant: k,
        immediateDescendants: m,
        previousSiblings: p,
        nextSiblings: q,
        siblings: function (a) {
          a = b(a);
          var c = p(a);
          a = q(a);
          return c.reverse().concat(a);
        },
        match: function (a, c) {
          a = b(a);
          return Object.isString(c) ? Prototype.Selector.match(a, c) : c.match(a);
        },
        up: function (a, c, d) {
          a = b(a);
          return 1 === arguments.length ? b(a.parentNode) : r(a, "parentNode", c, d);
        },
        down: function (a, d, e) {
          if (1 === arguments.length) return k(a);
          a = b(a);
          d = d || 0;
          e = e || 0;
          Object.isNumber(d) && ((e = d), (d = "*"));
          var f = Prototype.Selector.select(d, a)[e];
          return c.extend(f);
        },
        previous: function (a, b, c) {
          return r(a, "previousSibling", b, c);
        },
        next: function (a, b, c) {
          return r(a, "nextSibling", b, c);
        },
        select: n,
        adjacent: function (a) {
          a = b(a);
          for (var d = Ca.call(arguments, 1).join(", "), e = c.siblings(a), f = [], g = 0, h; (h = e[g]); g++) Prototype.Selector.match(h, d) && f.push(h);
          return f;
        },
        descendantOf: M.compareDocumentPosition ? I : M.contains ? v : u,
        getElementsBySelector: n,
        childElements: m,
      });
      var Oa = 1;
      (function () {
        M.setAttribute("onclick", []);
        var a = M.getAttribute("onclick"),
          a = Object.isArray(a);
        M.removeAttribute("onclick");
        return a;
      })()
        ? (Y = O)
        : Prototype.Browser.Opera && (Y = w);
      ea = (function () {
        if (!z) return !1;
        var a = document.createElement('<input type="checkbox">');
        a.checked = !0;
        a = a.getAttributeNode("checked");
        return !a || !a.specified;
      })();
      a.Element.Methods.Simulated.hasAttribute = ea ? J : F;
      var Fa = {},
        X = {},
        ea = "className",
        W = "for";
      M.setAttribute(ea, "x");
      "x" !== M.className && (M.setAttribute("class", "x"), "x" === M.className && (ea = "class"));
      var ja = document.createElement("label");
      ja.setAttribute(W, "x");
      "x" !== ja.htmlFor && (ja.setAttribute("htmlFor", "x"), "x" === ja.htmlFor && (W = "htmlFor"));
      ja = null;
      M.onclick = Prototype.emptyFunction;
      var ja = M.getAttribute("onclick"),
        l;
      -1 < String(ja).indexOf("{")
        ? (l = function (a, b) {
          var c = a.getAttribute(b);
          if (!c) return null;
          c = c.toString();
          c = c.split("{")[1];
          c = c.split("}")[0];
          return c.strip();
        })
        : "" === ja &&
        (l = function (a, b) {
          var c = a.getAttribute(b);
          return c ? c.strip() : null;
        });
      X.read = {
        names: { class: ea, className: ea, for: W, htmlFor: W },
        values: {
          style: function (a) {
            return a.style.cssText.toLowerCase();
          },
          title: function (a) {
            return a.title;
          },
        },
      };
      X.write = {
        names: { className: "class", htmlFor: "for", cellpadding: "cellPadding", cellspacing: "cellSpacing" },
        values: {
          checked: function (a, b) {
            b = !!b;
            return (a.checked = b) ? "checked" : null;
          },
          style: function (a, b) {
            a.style.cssText = b ? b : "";
          },
        },
      };
      X.has = { names: {} };
      Object.extend(X.write.names, X.read.names);
      ea = $w("colSpan rowSpan vAlign dateTime accessKey tabIndex encType maxLength readOnly longDesc frameBorder");
      for (W = 0; (ja = ea[W]); W++) (X.write.names[ja.toLowerCase()] = ja), (X.has.names[ja.toLowerCase()] = ja);
      Object.extend(X.read.values, {
        href: oa,
        src: oa,
        type: function (a, b) {
          return a.getAttribute(b);
        },
        action: function (a, b) {
          var c = a.getAttributeNode(b);
          return c ? c.value : "";
        },
        disabled: V,
        checked: V,
        readonly: V,
        multiple: V,
        onload: l,
        onunload: l,
        onclick: l,
        ondblclick: l,
        onmousedown: l,
        onmouseup: l,
        onmouseover: l,
        onmousemove: l,
        onmouseout: l,
        onfocus: l,
        onblur: l,
        onkeypress: l,
        onkeydown: l,
        onkeyup: l,
        onsubmit: l,
        onreset: l,
        onselect: l,
        onchange: l,
      });
      Object.extend(ba, {
        identify: function (a) {
          a = b(a);
          var d = c.readAttribute(a, "id");
          if (d) return d;
          do d = "anonymous_element_" + Oa++;
          while (b(d));
          c.writeAttribute(a, "id", d);
          return d;
        },
        readAttribute: Y,
        writeAttribute: function (a, c, d) {
          a = b(a);
          var e = {},
            f = X.write;
          "object" === typeof c ? (e = c) : (e[c] = Object.isUndefined(d) ? !0 : d);
          for (var g in e) {
            c = f.names[g] || g;
            d = e[g];
            if (f.values[g] && ((d = f.values[g](a, d)), Object.isUndefined(d))) continue;
            !1 === d || null === d ? a.removeAttribute(c) : !0 === d ? a.setAttribute(c, c) : a.setAttribute(c, d);
          }
          return a;
        },
        classNames: function (a) {
          return new c.ClassNames(a);
        },
        hasClassName: E,
        addClassName: function (a, c) {
          if ((a = b(a))) return E(a, c) || (a.className += (a.className ? " " : "") + c), a;
        },
        removeClassName: function (a, c) {
          if ((a = b(a))) return (a.className = a.className.replace(B(c), " ").strip()), a;
        },
        toggleClassName: function (a, d, e) {
          if ((a = b(a))) return Object.isUndefined(e) && (e = !E(a, d)), (0, c[e ? "addClassName" : "removeClassName"])(a, d);
        },
      });
      var Aa;
      M.style.cssText = "opacity:.55";
      Aa = /^0.55/.test(M.style.opacity);
      Object.extend(ba, {
        setStyle: function (a, d) {
          a = b(a);
          var e = a.style;
          if (Object.isString(d)) return (e.cssText += ";" + d), d.include("opacity") && ((e = d.match(/opacity:\s*(\d?\.?\d*)/)[1]), c.setOpacity(a, e)), a;
          for (var f in d)
            if ("opacity" === f) c.setOpacity(a, d[f]);
            else {
              var g = d[f];
              if ("float" === f || "cssFloat" === f) f = Object.isUndefined(e.styleFloat) ? "cssFloat" : "styleFloat";
              e[f] = g;
            }
          return a;
        },
        getStyle: function (a, c) {
          a = b(a);
          c = "float" === c || "styleFloat" === c ? "cssFloat" : c.camelize();
          var d = a.style[c];
          (d && "auto" !== d) || (d = (d = document.defaultView.getComputedStyle(a, null)) ? d[c] : null);
          return "opacity" === c ? (d ? parseFloat(d) : 1) : "auto" === d ? null : d;
        },
        setOpacity: la,
        getOpacity: ma,
      });
      "styleFloat" in M.style && ((ba.getStyle = sa), (ba.setOpacity = ha), (ba.getOpacity = S));
      a.Element.Storage = { UID: 1 };
      var ra = "uniqueID" in M;
      ra && (N = C);
      Object.extend(ba, {
        getStorage: K,
        store: function (a, c, d) {
          if ((a = b(a))) {
            var e = K(a);
            2 === arguments.length ? e.update(c) : e.set(c, d);
            return a;
          }
        },
        retrieve: function (a, c, d) {
          if ((a = b(a))) {
            a = K(a);
            var e = a.get(c);
            Object.isUndefined(e) && (a.set(c, d), (e = d));
            return e;
          }
        },
      });
      var Pa = {},
        xa = c.Methods.ByTag,
        Da = Prototype.BrowserFeatures;
      !Da.ElementExtensions && "__proto__" in M && ((a.HTMLElement = {}), (a.HTMLElement.prototype = M.__proto__), (Da.ElementExtensions = !0));
      l = (function (a) {
        if ("undefined" === typeof window.Element || !z) return !1;
        var b = window.Element.prototype;
        if (b) {
          var c = "_" + (Math.random() + "").slice(2);
          a = document.createElement(a);
          b[c] = "x";
          a = "x" !== a[c];
          delete b[c];
          return a;
        }
        return !1;
      })("object");
      var Ha = {};
      Da.SpecificElementExtensions && (x = l ? A : Prototype.K);
      Object.extend(a.Element, {
        extend: x,
        addMethods: function (a) {
          0 === arguments.length &&
          (Object.extend(Form, Form.Methods),
            Object.extend(Form.Element, Form.Element.Methods),
            Object.extend(c.Methods.ByTag, {
              FORM: Object.clone(Form.Methods),
              INPUT: Object.clone(Form.Element.Methods),
              SELECT: Object.clone(Form.Element.Methods),
              TEXTAREA: Object.clone(Form.Element.Methods),
              BUTTON: Object.clone(Form.Element.Methods),
            }));
          if (2 === arguments.length) {
            var b = a;
            a = arguments[1];
          }
          if (b)
            if (Object.isArray(b)) for (var d = 0, e; (e = b[d]); d++) T(e, a);
            else T(b, a);
          else Object.extend(c.Methods, a || {});
          b = window.HTMLElement ? HTMLElement.prototype : c.prototype;
          Da.ElementExtensions && (D(b, c.Methods), D(b, c.Methods.Simulated, !0));
          if (Da.SpecificElementExtensions) for (e in c.Methods.ByTag) (b = ga(e)), Object.isUndefined(b) || D(b.prototype, xa[e]);
          Object.extend(c, c.Methods);
          Object.extend(c, c.Methods.Simulated);
          delete c.ByTag;
          delete c.Simulated;
          c.extend.refresh();
          ua = {};
        },
      });
      a.Element.extend.refresh =
        x === Prototype.K
          ? Prototype.emptyFunction
          : function () {
            Prototype.BrowserFeatures.ElementExtensions || (Object.extend(Pa, c.Methods), Object.extend(Pa, c.Methods.Simulated), (Ha = {}));
          };
      c.addMethods(ba);
      window.attachEvent && window.attachEvent("onunload", aa);
    })(this);
    (function () {
      function a(a, b) {
        a = $(a);
        var c = a.style[b];
        (c && "auto" !== c) || (c = (c = document.defaultView.getComputedStyle(a, null)) ? c[b] : null);
        return "opacity" === b ? (c ? parseFloat(c) : 1) : "auto" === c ? null : c;
      }
      function b(a, b) {
        var c = a.style[b];
        !c && a.currentStyle && (c = a.currentStyle[b]);
        return c;
      }
      function c(a, b) {
        var c = a.offsetWidth,
          e = d(a, "borderLeftWidth", b) || 0,
          f = d(a, "borderRightWidth", b) || 0,
          g = d(a, "paddingLeft", b) || 0,
          h = d(a, "paddingRight", b) || 0;
        return c - e - f - g - h;
      }
      function d(b, c, d) {
        var e = null;
        Object.isElement(b) && ((e = b), (b = a(e, c)));
        if (null === b || Object.isUndefined(b)) return null;
        if (/^(?:-)?\d+(\.\d+)?(px)?$/i.test(b)) return window.parseFloat(b);
        var f = b.include("%"),
          g = d === document.viewport;
        return !(/\d/.test(b) && e && e.runtimeStyle) || (f && g)
          ? e && f
            ? ((d = d || e.parentNode),
              (b = (b = b.match(/^(\d+)%?$/i)) ? Number(b[1]) / 100 : null),
              (e = null),
              (f = c.include("left") || c.include("right") || c.include("width")),
              (c = c.include("top") || c.include("bottom") || c.include("height")),
              d === document.viewport ? (f ? (e = document.viewport.getWidth()) : c && (e = document.viewport.getHeight())) : f ? (e = $(d).measure("width")) : c && (e = $(d).measure("height")),
              null === e ? 0 : e * b)
            : 0
          : ((d = e.style.left), (c = e.runtimeStyle.left), (e.runtimeStyle.left = e.currentStyle.left), (e.style.left = b || 0), (b = e.style.pixelLeft), (e.style.left = d), (e.runtimeStyle.left = c), b);
      }
      function f(a) {
        function b(a) {
          return "HTML" === a.nodeName.toUpperCase() ? $(document.body) : $(a);
        }
        a = $(a);
        if (a.nodeType === Node.DOCUMENT_NODE || h(a) || "BODY" === a.nodeName.toUpperCase() || "HTML" === a.nodeName.toUpperCase()) return $(document.body);
        if ("inline" !== Element.getStyle(a, "display") && a.offsetParent) return b(a.offsetParent);
        for (; (a = a.parentNode) && a !== document.body; ) if ("static" !== Element.getStyle(a, "position")) return b(a);
        return $(document.body);
      }
      function e(a) {
        a = $(a);
        var b = 0,
          c = 0;
        if (a.parentNode) {
          do (b += a.offsetTop || 0), (c += a.offsetLeft || 0), (a = a.offsetParent);
          while (a);
        }
        return new Element.Offset(c, b);
      }
      function g(a) {
        a = $(a);
        var b = a.getLayout(),
          c = 0,
          d = 0;
        do
          if (((c += a.offsetTop || 0), (d += a.offsetLeft || 0), (a = a.offsetParent))) {
            if ("BODY" === a.nodeName.toUpperCase()) break;
            if ("static" !== Element.getStyle(a, "position")) break;
          }
        while (a);
        d -= b.get("margin-left");
        c -= b.get("margin-top");
        return new Element.Offset(d, c);
      }
      function h(a) {
        return a !== document.body && !Element.descendantOf(a, document.body);
      }
      Object.isUndefined(document.documentElement.currentStyle) || Prototype.Browser.Opera || (a = b);
      var k = Prototype.K;
      "currentStyle" in document.documentElement &&
      (k = function (a) {
        a.currentStyle.hasLayout || (a.style.zoom = 1);
        return a;
      });
      Element.Layout = Class.create(Hash, {
        initialize: function ($super, a, b) {
          $super();
          this.element = $(a);
          Element.Layout.PROPERTIES.each(function (a) {
            this._set(a, null);
          }, this);
          b && ((this._preComputing = !0), this._begin(), Element.Layout.PROPERTIES.each(this._compute, this), this._end(), (this._preComputing = !1));
        },
        _set: function (a, b) {
          return Hash.prototype.set.call(this, a, b);
        },
        set: function (a, b) {
          throw "Properties of Element.Layout are read-only.";
        },
        get: function ($super, a) {
          var b = $super(a);
          return null === b ? this._compute(a) : b;
        },
        _begin: function () {
          if (!this._isPrepared()) {
            var b = this.element,
              d;
            a: {
              for (d = b; d && d.parentNode; ) {
                if ("none" === d.getStyle("display")) {
                  d = !1;
                  break a;
                }
                d = $(d.parentNode);
              }
              d = !0;
            }
            if (!d) {
              b.store("prototype_original_styles", { position: b.style.position || "", width: b.style.width || "", visibility: b.style.visibility || "", display: b.style.display || "" });
              d = a(b, "position");
              var e = b.offsetWidth;
              if (0 === e || null === e) (b.style.display = "block"), (e = b.offsetWidth);
              var f = "fixed" === d ? document.viewport : b.parentNode,
                g = { visibility: "hidden", display: "block" };
              "fixed" !== d && (g.position = "absolute");
              b.setStyle(g);
              g = b.offsetWidth;
              d =
                e && g === e
                  ? c(b, f)
                  : "absolute" === d || "fixed" === d
                    ? c(b, f)
                    : $(b.parentNode).getLayout().get("width") -
                    this.get("margin-left") -
                    this.get("border-left") -
                    this.get("padding-left") -
                    this.get("padding-right") -
                    this.get("border-right") -
                    this.get("margin-right");
              b.setStyle({ width: d + "px" });
            }
            this._setPrepared(!0);
          }
        },
        _end: function () {
          var a = this.element,
            b = a.retrieve("prototype_original_styles");
          a.store("prototype_original_styles", null);
          a.setStyle(b);
          this._setPrepared(!1);
        },
        _compute: function (a) {
          var b = Element.Layout.COMPUTATIONS;
          if (!(a in b)) throw "Property not found.";
          return this._set(a, b[a].call(this, this.element));
        },
        _isPrepared: function () {
          return this.element.retrieve("prototype_element_layout_prepared", !1);
        },
        _setPrepared: function (a) {
          return this.element.store("prototype_element_layout_prepared", a);
        },
        toObject: function () {
          var a = $A(arguments),
            b = {};
          (0 === a.length ? Element.Layout.PROPERTIES : a.join(" ").split(" ")).each(function (a) {
            if (Element.Layout.PROPERTIES.include(a)) {
              var c = this.get(a);
              null != c && (b[a] = c);
            }
          }, this);
          return b;
        },
        toHash: function () {
          var a = this.toObject.apply(this, arguments);
          return new Hash(a);
        },
        toCSS: function () {
          var a = $A(arguments),
            b = {};
          (0 === a.length ? Element.Layout.PROPERTIES : a.join(" ").split(" ")).each(function (a) {
            if (Element.Layout.PROPERTIES.include(a) && !Element.Layout.COMPOSITE_PROPERTIES.include(a)) {
              var c = this.get(a);
              null != c && (a.include("border") && (a += "-width"), (a = a.camelize()), (b[a] = c + "px"));
            }
          }, this);
          return b;
        },
        inspect: function () {
          return "#<Element.Layout>";
        },
      });
      Object.extend(Element.Layout, {
        PROPERTIES: $w(
          "height width top left right bottom border-left border-right border-top border-bottom padding-left padding-right padding-top padding-bottom margin-top margin-bottom margin-left margin-right padding-box-width padding-box-height border-box-width border-box-height margin-box-width margin-box-height"
        ),
        COMPOSITE_PROPERTIES: $w("padding-box-width padding-box-height margin-box-width margin-box-height border-box-width border-box-height"),
        COMPUTATIONS: {
          height: function (a) {
            this._preComputing || this._begin();
            a = this.get("border-box-height");
            if (0 >= a) return this._preComputing || this._end(), 0;
            var b = this.get("border-top"),
              c = this.get("border-bottom"),
              d = this.get("padding-top"),
              e = this.get("padding-bottom");
            this._preComputing || this._end();
            return a - b - c - d - e;
          },
          width: function (a) {
            this._preComputing || this._begin();
            a = this.get("border-box-width");
            if (0 >= a) return this._preComputing || this._end(), 0;
            var b = this.get("border-left"),
              c = this.get("border-right"),
              d = this.get("padding-left"),
              e = this.get("padding-right");
            this._preComputing || this._end();
            return a - b - c - d - e;
          },
          "padding-box-height": function (a) {
            a = this.get("height");
            var b = this.get("padding-top"),
              c = this.get("padding-bottom");
            return a + b + c;
          },
          "padding-box-width": function (a) {
            a = this.get("width");
            var b = this.get("padding-left"),
              c = this.get("padding-right");
            return a + b + c;
          },
          "border-box-height": function (a) {
            this._preComputing || this._begin();
            a = a.offsetHeight;
            this._preComputing || this._end();
            return a;
          },
          "border-box-width": function (a) {
            this._preComputing || this._begin();
            a = a.offsetWidth;
            this._preComputing || this._end();
            return a;
          },
          "margin-box-height": function (a) {
            a = this.get("border-box-height");
            var b = this.get("margin-top"),
              c = this.get("margin-bottom");
            return 0 >= a ? 0 : a + b + c;
          },
          "margin-box-width": function (a) {
            a = this.get("border-box-width");
            var b = this.get("margin-left"),
              c = this.get("margin-right");
            return 0 >= a ? 0 : a + b + c;
          },
          top: function (a) {
            return a.positionedOffset().top;
          },
          bottom: function (a) {
            var b = a.positionedOffset();
            a = a.getOffsetParent().measure("height");
            var c = this.get("border-box-height");
            return a - c - b.top;
          },
          left: function (a) {
            return a.positionedOffset().left;
          },
          right: function (a) {
            var b = a.positionedOffset();
            a = a.getOffsetParent().measure("width");
            var c = this.get("border-box-width");
            return a - c - b.left;
          },
          "padding-top": function (a) {
            return d(a, "paddingTop");
          },
          "padding-bottom": function (a) {
            return d(a, "paddingBottom");
          },
          "padding-left": function (a) {
            return d(a, "paddingLeft");
          },
          "padding-right": function (a) {
            return d(a, "paddingRight");
          },
          "border-top": function (a) {
            return d(a, "borderTopWidth");
          },
          "border-bottom": function (a) {
            return d(a, "borderBottomWidth");
          },
          "border-left": function (a) {
            return d(a, "borderLeftWidth");
          },
          "border-right": function (a) {
            return d(a, "borderRightWidth");
          },
          "margin-top": function (a) {
            return d(a, "marginTop");
          },
          "margin-bottom": function (a) {
            return d(a, "marginBottom");
          },
          "margin-left": function (a) {
            return d(a, "marginLeft");
          },
          "margin-right": function (a) {
            return d(a, "marginRight");
          },
        },
      });
      "getBoundingClientRect" in document.documentElement &&
      Object.extend(Element.Layout.COMPUTATIONS, {
        right: function (a) {
          var b = k(a.getOffsetParent());
          a = a.getBoundingClientRect();
          return (b.getBoundingClientRect().right - a.right).round();
        },
        bottom: function (a) {
          var b = k(a.getOffsetParent());
          a = a.getBoundingClientRect();
          return (b.getBoundingClientRect().bottom - a.bottom).round();
        },
      });
      Element.Offset = Class.create({
        initialize: function (a, b) {
          this.left = a.round();
          this.top = b.round();
          this[0] = this.left;
          this[1] = this.top;
        },
        relativeTo: function (a) {
          return new Element.Offset(this.left - a.left, this.top - a.top);
        },
        inspect: function () {
          return "#<Element.Offset left: #{left} top: #{top}>".interpolate(this);
        },
        toString: function () {
          return "[#{left}, #{top}]".interpolate(this);
        },
        toArray: function () {
          return [this.left, this.top];
        },
      });
      Prototype.Browser.IE
        ? ((f = f.wrap(function (a, b) {
          b = $(b);
          if (b.nodeType === Node.DOCUMENT_NODE || h(b) || "BODY" === b.nodeName.toUpperCase() || "HTML" === b.nodeName.toUpperCase()) return $(document.body);
          var c = b.getStyle("position");
          if ("static" !== c) return a(b);
          b.setStyle({ position: "relative" });
          var d = a(b);
          b.setStyle({ position: c });
          return d;
        })),
          (g = g.wrap(function (a, b) {
            b = $(b);
            if (!b.parentNode) return new Element.Offset(0, 0);
            var c = b.getStyle("position");
            if ("static" !== c) return a(b);
            var d = b.getOffsetParent();
            d && "fixed" === d.getStyle("position") && k(d);
            b.setStyle({ position: "relative" });
            d = a(b);
            b.setStyle({ position: c });
            return d;
          })))
        : Prototype.Browser.Webkit &&
        (e = function (a) {
          a = $(a);
          var b = 0,
            c = 0;
          do {
            b += a.offsetTop || 0;
            c += a.offsetLeft || 0;
            if (a.offsetParent == document.body && "absolute" == Element.getStyle(a, "position")) break;
            a = a.offsetParent;
          } while (a);
          return new Element.Offset(c, b);
        });
      Element.addMethods({
        getLayout: function (a, b) {
          return new Element.Layout(a, b);
        },
        measure: function (a, b) {
          return $(a).getLayout().get(b);
        },
        getWidth: function (a) {
          return Element.getDimensions(a).width;
        },
        getHeight: function (a) {
          return Element.getDimensions(a).height;
        },
        getDimensions: function (a) {
          a = $(a);
          var b = Element.getStyle(a, "display");
          if (b && "none" !== b) return { width: a.offsetWidth, height: a.offsetHeight };
          var b = a.style,
            b = { visibility: b.visibility, position: b.position, display: b.display },
            c = { visibility: "hidden", display: "block" };
          "fixed" !== b.position && (c.position = "absolute");
          Element.setStyle(a, c);
          c = { width: a.offsetWidth, height: a.offsetHeight };
          Element.setStyle(a, b);
          return c;
        },
        getOffsetParent: f,
        cumulativeOffset: e,
        positionedOffset: g,
        cumulativeScrollOffset: function (a) {
          var b = 0,
            c = 0;
          do
            if (a === document.body) {
              a = document.documentElement || document.body.parentNode || document.body;
              b += Object.isUndefined(window.pageYOffset) ? a.scrollTop || 0 : window.pageYOffset;
              c += Object.isUndefined(window.pageXOffset) ? a.scrollLeft || 0 : window.pageXOffset;
              break;
            } else (b += a.scrollTop || 0), (c += a.scrollLeft || 0), (a = a.parentNode);
          while (a);
          return new Element.Offset(c, b);
        },
        viewportOffset: function (a) {
          var b = 0,
            c = 0,
            d = document.body,
            e = (a = $(a));
          do if (((b += e.offsetTop || 0), (c += e.offsetLeft || 0), e.offsetParent == d && "absolute" == Element.getStyle(e, "position"))) break;
          while ((e = e.offsetParent));
          e = a;
          do e != d && ((b -= e.scrollTop || 0), (c -= e.scrollLeft || 0));
          while ((e = e.parentNode));
          return new Element.Offset(c, b);
        },
        absolutize: function (a) {
          a = $(a);
          if ("absolute" === Element.getStyle(a, "position")) return a;
          var b = f(a),
            c = a.viewportOffset(),
            b = b.viewportOffset(),
            c = c.relativeTo(b),
            b = a.getLayout();
          a.store("prototype_absolutize_original_styles", { position: a.getStyle("position"), left: a.getStyle("left"), top: a.getStyle("top"), width: a.getStyle("width"), height: a.getStyle("height") });
          a.setStyle({ position: "absolute", top: c.top + "px", left: c.left + "px", width: b.get("width") + "px", height: b.get("height") + "px" });
          return a;
        },
        relativize: function (a) {
          a = $(a);
          if ("relative" === Element.getStyle(a, "position")) return a;
          var b = a.retrieve("prototype_absolutize_original_styles");
          b && a.setStyle(b);
          return a;
        },
        scrollTo: function (a) {
          a = $(a);
          var b = Element.cumulativeOffset(a);
          window.scrollTo(b.left, b.top);
          return a;
        },
        makePositioned: function (a) {
          a = $(a);
          var b = Element.getStyle(a, "position"),
            c = {};
          ("static" !== b && b) || ((c.position = "relative"), Prototype.Browser.Opera && ((c.top = 0), (c.left = 0)), Element.setStyle(a, c), Element.store(a, "prototype_made_positioned", !0));
          return a;
        },
        undoPositioned: function (a) {
          a = $(a);
          var b = Element.getStorage(a);
          b.get("prototype_made_positioned") && (b.unset("prototype_made_positioned"), Element.setStyle(a, { position: "", top: "", bottom: "", left: "", right: "" }));
          return a;
        },
        makeClipping: function (a) {
          a = $(a);
          var b = Element.getStorage(a),
            c = b.get("prototype_made_clipping");
          Object.isUndefined(c) && ((c = Element.getStyle(a, "overflow")), b.set("prototype_made_clipping", c), "hidden" !== c && (a.style.overflow = "hidden"));
          return a;
        },
        undoClipping: function (a) {
          a = $(a);
          var b = Element.getStorage(a),
            c = b.get("prototype_made_clipping");
          Object.isUndefined(c) || (b.unset("prototype_made_clipping"), (a.style.overflow = c || ""));
          return a;
        },
        clonePosition: function (a, b, c) {
          var d, e;
          c = Object.extend({ setLeft: !0, setTop: !0, setWidth: !0, setHeight: !0, offsetTop: 0, offsetLeft: 0 }, c || {});
          d = document.documentElement;
          b = $(b);
          a = $(a);
          var f,
            g,
            h,
            k = {};
          if (c.setLeft || c.setTop) (f = Element.viewportOffset(b)), (g = [0, 0]), "absolute" === Element.getStyle(a, "position") && ((e = Element.getOffsetParent(a)), e !== document.body && (g = Element.viewportOffset(e)));
          var m = 0;
          e = 0;
          Object.isNumber(window.pageXOffset)
            ? ((m = window.pageXOffset), (e = window.pageYOffset))
            : document.body && (document.body.scrollLeft || document.body.scrollTop)
              ? ((m = document.body.scrollLeft), (e = document.body.scrollTop))
              : d && (d.scrollLeft || d.scrollTop) && ((m = d.scrollLeft), (e = d.scrollTop));
          d = m;
          if (c.setWidth || c.setHeight) h = Element.getLayout(b);
          c.setLeft && (k.left = f[0] + d - g[0] + c.offsetLeft + "px");
          c.setTop && (k.top = f[1] + e - g[1] + c.offsetTop + "px");
          a.getLayout();
          c.setWidth && (k.width = h.get("width") + "px");
          c.setHeight && (k.height = h.get("height") + "px");
          return Element.setStyle(a, k);
        },
      });
      "getBoundingClientRect" in document.documentElement &&
      Element.addMethods({
        viewportOffset: function (a) {
          a = $(a);
          if (h(a)) return new Element.Offset(0, 0);
          a = a.getBoundingClientRect();
          var b = document.documentElement;
          return new Element.Offset(a.left - b.clientLeft, a.top - b.clientTop);
        },
      });
    })();
    (function () {
      function a() {
        return c ? c : (c = b ? document.body : document.documentElement);
      }
      var b = Prototype.Browser.Opera && 9.5 > window.parseFloat(window.opera.version()),
        c = null;
      document.viewport = {
        getDimensions: function () {
          return { width: this.getWidth(), height: this.getHeight() };
        },
        getWidth: function () {
          return a().clientWidth;
        },
        getHeight: function () {
          return a().clientHeight;
        },
        getScrollOffsets: function () {
          return new Element.Offset(window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft, window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop);
        },
      };
    })();
    window.$$ = function () {
      var a = $A(arguments).join(", ");
      return Prototype.Selector.select(a, document);
    };
    Prototype.Selector = (function () {
      function a(a) {
        for (var b = 0, c = a.length; b < c; b++) Element.extend(a[b]);
        return a;
      }
      var b = Prototype.K;
      return {
        select: function () {
          throw Error('Method "Prototype.Selector.select" must be defined.');
        },
        match: function () {
          throw Error('Method "Prototype.Selector.match" must be defined.');
        },
        find: function (a, b, f) {
          f = f || 0;
          var c = Prototype.Selector.match,
            d = a.length,
            h = 0,
            k;
          for (k = 0; k < d; k++) if (c(a[k], b) && f == h++) return Element.extend(a[k]);
        },
        extendElements: Element.extend === b ? b : a,
        extendElement: Element.extend,
      };
    })();
    Prototype._original_property = window.Sizzle;
    (function () {
      function a(a) {
        Prototype._actual_sizzle = a();
      }
      a.amd = !0;
      "undefined" !== typeof define && define.amd && ((Prototype._original_define = define), (Prototype._actual_sizzle = null), (window.define = a));
    })();
    (function (a) {
      function b(a, b, c, d) {
        var e, f, g, h, k;
        (b ? b.ownerDocument || b : ga) !== N && S(b);
        b = b || N;
        c = c || [];
        if (!a || "string" !== typeof a) return c;
        if (1 !== (h = b.nodeType) && 9 !== h) return [];
        if (K && !d) {
          if ((e = ta.exec(a)))
            if ((g = e[1]))
              if (9 === h)
                if ((f = b.getElementById(g)) && f.parentNode) {
                  if (f.id === g) return c.push(f), c;
                } else return c;
              else {
                if (b.ownerDocument && (f = b.ownerDocument.getElementById(g)) && T(b, f) && f.id === g) return c.push(f), c;
              }
            else {
              if (e[2]) return fa.apply(c, b.getElementsByTagName(a)), c;
              if ((g = e[3]) && J.getElementsByClassName && b.getElementsByClassName) return fa.apply(c, b.getElementsByClassName(g)), c;
            }
          if (J.qsa && (!P || !P.test(a))) {
            f = e = D;
            g = b;
            k = 9 === h && a;
            if (1 === h && "object" !== b.nodeName.toLowerCase()) {
              h = r(a);
              (e = b.getAttribute("id")) ? (f = e.replace(ya, "\\$&")) : b.setAttribute("id", f);
              f = "[id='" + f + "'] ";
              for (g = h.length; g--; ) h[g] = f + n(h[g]);
              g = (Z.test(a) && p(b.parentNode)) || b;
              k = h.join(",");
            }
            if (k)
              try {
                return fa.apply(c, g.querySelectorAll(k)), c;
              } catch (Ya) {
              } finally {
                e || b.removeAttribute("id");
              }
          }
        }
        return sa(a.replace(X, "$1"), b, c, d);
      }
      function c() {
        function a(c, d) {
          b.push(c + " ") > B.cacheLength && delete a[b.shift()];
          return (a[c + " "] = d);
        }
        var b = [];
        return a;
      }
      function d(a) {
        a[D] = !0;
        return a;
      }
      function f(a) {
        var b = N.createElement("div");
        try {
          return !!a(b);
        } catch (R) {
          return !1;
        } finally {
          b.parentNode && b.parentNode.removeChild(b);
        }
      }
      function e(a, b) {
        for (var c = a.split("|"), d = a.length; d--; ) B.attrHandle[c[d]] = b;
      }
      function g(a, b) {
        var c = b && a,
          d = c && 1 === a.nodeType && 1 === b.nodeType && (~b.sourceIndex || -2147483648) - (~a.sourceIndex || -2147483648);
        if (d) return d;
        if (c) for (; (c = c.nextSibling); ) if (c === b) return -1;
        return a ? 1 : -1;
      }
      function h(a) {
        return function (b) {
          return "input" === b.nodeName.toLowerCase() && b.type === a;
        };
      }
      function k(a) {
        return function (b) {
          var c = b.nodeName.toLowerCase();
          return ("input" === c || "button" === c) && b.type === a;
        };
      }
      function m(a) {
        return d(function (b) {
          b = +b;
          return d(function (c, d) {
            for (var e, f = a([], c.length, b), g = f.length; g--; ) c[(e = f[g])] && (c[e] = !(d[e] = c[e]));
          });
        });
      }
      function p(a) {
        return a && "undefined" !== typeof a.getElementsByTagName && a;
      }
      function q() {}
      function r(a, c) {
        var d, e, f, g, h, k, m;
        if ((h = M[a + " "])) return c ? 0 : h.slice(0);
        h = a;
        k = [];
        for (m = B.preFilter; h; ) {
          if (!d || (e = ja.exec(h))) e && (h = h.slice(e[0].length) || h), k.push((f = []));
          d = !1;
          if ((e = l.exec(h))) (d = e.shift()), f.push({ value: d, type: e[0].replace(X, " ") }), (h = h.slice(d.length));
          for (g in B.filter) !(e = xa[g].exec(h)) || (m[g] && !(e = m[g](e))) || ((d = e.shift()), f.push({ value: d, type: g, matches: e }), (h = h.slice(d.length)));
          if (!d) break;
        }
        return c ? h.length : h ? b.error(a) : M(a, k).slice(0);
      }
      function n(a) {
        for (var b = 0, c = a.length, d = ""; b < c; b++) d += a[b].value;
        return d;
      }
      function u(a, b, c) {
        var d = b.dir,
          e = c && "parentNode" === d,
          f = ia++;
        return b.first
          ? function (b, c, f) {
            for (; (b = b[d]); ) if (1 === b.nodeType || e) return a(b, c, f);
          }
          : function (b, c, g) {
            var h,
              k,
              l = [aa, f];
            if (g)
              for (; (b = b[d]); ) {
                if ((1 === b.nodeType || e) && a(b, c, g)) return !0;
              }
            else
              for (; (b = b[d]); )
                if (1 === b.nodeType || e) {
                  k = b[D] || (b[D] = {});
                  if ((h = k[d]) && h[0] === aa && h[1] === f) return (l[2] = h[2]);
                  k[d] = l;
                  if ((l[2] = a(b, c, g))) return !0;
                }
          };
      }
      function v(a) {
        return 1 < a.length
          ? function (b, c, d) {
            for (var e = a.length; e--; ) if (!a[e](b, c, d)) return !1;
            return !0;
          }
          : a[0];
      }
      function I(a, b, c, d, e) {
        for (var f, g = [], h = 0, k = a.length, l = null != b; h < k; h++) if ((f = a[h])) if (!c || c(f, d, e)) g.push(f), l && b.push(h);
        return g;
      }
      function Y(a, c, e, f, g, h) {
        f && !f[D] && (f = Y(f));
        g && !g[D] && (g = Y(g, h));
        return d(function (d, h, k, l) {
          var m,
            n,
            p = [],
            q = [],
            r = h.length,
            L;
          if (!(L = d)) {
            L = c || "*";
            for (var y = k.nodeType ? [k] : k, R = [], C = 0, u = y.length; C < u; C++) b(L, y[C], R);
            L = R;
          }
          L = !a || (!d && c) ? L : I(L, p, a, k, l);
          y = e ? (g || (d ? a : r || f) ? [] : h) : L;
          e && e(L, y, k, l);
          if (f) for (m = I(y, q), f(m, [], k, l), k = m.length; k--; ) if ((n = m[k])) y[q[k]] = !(L[q[k]] = n);
          if (d) {
            if (g || a) {
              if (g) {
                m = [];
                for (k = y.length; k--; ) (n = y[k]) && m.push((L[k] = n));
                g(null, (y = []), m, l);
              }
              for (k = y.length; k--; ) (n = y[k]) && -1 < (m = g ? wa.call(d, n) : p[k]) && (d[m] = !(h[m] = n));
            }
          } else (y = I(y === h ? y.splice(r, y.length) : y)), g ? g(null, h, y, l) : fa.apply(h, y);
        });
      }
      function O(a) {
        var b,
          c,
          d,
          e = a.length,
          f = B.relative[a[0].type];
        c = f || B.relative[" "];
        for (
          var g = f ? 1 : 0,
            h = u(
              function (a) {
                return a === b;
              },
              c,
              !0
            ),
            k = u(
              function (a) {
                return -1 < wa.call(b, a);
              },
              c,
              !0
            ),
            l = [
              function (a, c, d) {
                return (!f && (d || c !== la)) || ((b = c).nodeType ? h(a, c, d) : k(a, c, d));
              },
            ];
          g < e;
          g++
        )
          if ((c = B.relative[a[g].type])) l = [u(v(l), c)];
          else {
            c = B.filter[a[g].type].apply(null, a[g].matches);
            if (c[D]) {
              for (d = ++g; d < e && !B.relative[a[d].type]; d++);
              return Y(1 < g && v(l), 1 < g && n(a.slice(0, g - 1).concat({ value: " " === a[g - 2].type ? "*" : "" })).replace(X, "$1"), c, g < d && O(a.slice(g, d)), d < e && O((a = a.slice(d))), d < e && n(a));
            }
            l.push(c);
          }
        return v(l);
      }
      function w(a, c) {
        var e = 0 < c.length,
          f = 0 < a.length,
          g = function (d, g, h, k, l) {
            var m,
              n,
              p,
              q = 0,
              r = "0",
              L = d && [],
              y = [],
              R = la,
              C = d || (f && B.find.TAG("*", l)),
              u = (aa += null == R ? 1 : Math.random() || 0.1),
              v = C.length;
            for (l && (la = g !== N && g); r !== v && null != (m = C[r]); r++) {
              if (f && m) {
                for (n = 0; (p = a[n++]); )
                  if (p(m, g, h)) {
                    k.push(m);
                    break;
                  }
                l && (aa = u);
              }
              e && ((m = !p && m) && q--, d && L.push(m));
            }
            q += r;
            if (e && r !== q) {
              for (n = 0; (p = c[n++]); ) p(L, y, g, h);
              if (d) {
                if (0 < q) for (; r--; ) L[r] || y[r] || (y[r] = ea.call(k));
                y = I(y);
              }
              fa.apply(k, y);
              l && !d && 0 < y.length && 1 < q + c.length && b.uniqueSort(k);
            }
            l && ((aa = u), (la = R));
            return L;
          };
        return e ? d(g) : g;
      }
      var F,
        J,
        B,
        E,
        oa,
        V,
        sa,
        la,
        ha,
        ma,
        S,
        N,
        C,
        K,
        P,
        x,
        A,
        T,
        D = "sizzle" + -1 * new Date(),
        ga = a.document,
        aa = 0,
        ia = 0,
        Ca = c(),
        M = c(),
        ua = c(),
        z = function (a, b) {
          a === b && (ma = !0);
          return 0;
        },
        ba = {}.hasOwnProperty,
        ca = [],
        ea = ca.pop,
        W = ca.push,
        fa = ca.push,
        Na = ca.slice,
        wa =
          ca.indexOf ||
          function (a) {
            for (var b = 0, c = this.length; b < c; b++) if (this[b] === a) return b;
            return -1;
          },
        pa = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w", "w#"),
        Oa = "\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|(" + pa + ")|)|)[\\x20\\t\\r\\n\\f]*\\]",
        Fa = ":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|" + Oa.replace(3, 8) + ")*)|.*)\\)|)",
        X = RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$", "g"),
        ja = /^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,
        l = /^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,
        Aa = RegExp("=[\\x20\\t\\r\\n\\f]*([^\\]'\"]*?)[\\x20\\t\\r\\n\\f]*\\]", "g"),
        ra = new RegExp(Fa),
        Pa = new RegExp("^" + pa + "$"),
        xa = {
          ID: /^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,
          CLASS: /^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,
          TAG: new RegExp("^(" + "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w", "w*") + ")"),
          ATTR: new RegExp("^" + Oa),
          PSEUDO: new RegExp("^" + Fa),
          CHILD: /^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,
          bool: /^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,
          needsContext: /^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i,
        },
        Da = /^(?:input|select|textarea|button)$/i,
        Ha = /^h\d$/i,
        H = /^[^{]+\{\s*\[native \w/,
        ta = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,
        Z = /[+~]/,
        ya = /'|\\/g,
        ka = RegExp("\\\\([\\da-f]{1,6}[\\x20\\t\\r\\n\\f]?|([\\x20\\t\\r\\n\\f])|.)", "ig"),
        va = function (a, b, c) {
          a = "0x" + b - 65536;
          return a !== a || c ? b : 0 > a ? String.fromCharCode(a + 65536) : String.fromCharCode((a >> 10) | 55296, (a & 1023) | 56320);
        };
      try {
        fa.apply((ca = Na.call(ga.childNodes)), ga.childNodes), ca[ga.childNodes.length].nodeType;
      } catch (L) {
        fa = {
          apply: ca.length
            ? function (a, b) {
              W.apply(a, Na.call(b));
            }
            : function (a, b) {
              for (var c = a.length, d = 0; (a[c++] = b[d++]); );
              a.length = c - 1;
            },
        };
      }
      J = b.support = {};
      oa = b.isXML = function (a) {
        return (a = a && (a.ownerDocument || a).documentElement) ? "HTML" !== a.nodeName : !1;
      };
      S = b.setDocument = function (a) {
        var b = a ? a.ownerDocument || a : ga;
        a = b.defaultView;
        if (b === N || 9 !== b.nodeType || !b.documentElement) return N;
        N = b;
        C = b.documentElement;
        K = !oa(b);
        a &&
        a !== a.top &&
        (a.addEventListener
          ? a.addEventListener(
            "unload",
            function () {
              S();
            },
            !1
          )
          : a.attachEvent &&
          a.attachEvent("onunload", function () {
            S();
          }));
        J.attributes = f(function (a) {
          a.className = "i";
          return !a.getAttribute("className");
        });
        J.getElementsByTagName = f(function (a) {
          a.appendChild(b.createComment(""));
          return !a.getElementsByTagName("*").length;
        });
        J.getElementsByClassName =
          H.test(b.getElementsByClassName) &&
          f(function (a) {
            a.innerHTML = "<div class='a'></div><div class='a i'></div>";
            a.firstChild.className = "i";
            return 2 === a.getElementsByClassName("i").length;
          });
        J.getById = f(function (a) {
          C.appendChild(a).id = D;
          return !b.getElementsByName || !b.getElementsByName(D).length;
        });
        J.getById
          ? ((B.find.ID = function (a, b) {
            if ("undefined" !== typeof b.getElementById && K) {
              var c = b.getElementById(a);
              return c && c.parentNode ? [c] : [];
            }
          }),
            (B.filter.ID = function (a) {
              var b = a.replace(ka, va);
              return function (a) {
                return a.getAttribute("id") === b;
              };
            }))
          : (delete B.find.ID,
            (B.filter.ID = function (a) {
              var b = a.replace(ka, va);
              return function (a) {
                return (a = "undefined" !== typeof a.getAttributeNode && a.getAttributeNode("id")) && a.value === b;
              };
            }));
        B.find.TAG = J.getElementsByTagName
          ? function (a, b) {
            if ("undefined" !== typeof b.getElementsByTagName) return b.getElementsByTagName(a);
          }
          : function (a, b) {
            var c,
              d = [],
              e = 0,
              f = b.getElementsByTagName(a);
            if ("*" === a) {
              for (; (c = f[e++]); ) 1 === c.nodeType && d.push(c);
              return d;
            }
            return f;
          };
        B.find.CLASS =
          J.getElementsByClassName &&
          function (a, b) {
            if ("undefined" !== typeof b.getElementsByClassName && K) return b.getElementsByClassName(a);
          };
        x = [];
        P = [];
        if ((J.qsa = H.test(b.querySelectorAll)))
          f(function (a) {
            a.innerHTML = "<select t=''><option selected=''></option></select>";
            a.querySelectorAll("[t^='']").length && P.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");
            a.querySelectorAll("[selected]").length || P.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");
            a.querySelectorAll(":checked").length || P.push(":checked");
          }),
            f(function (a) {
              var c = b.createElement("input");
              c.setAttribute("type", "hidden");
              a.appendChild(c).setAttribute("name", "D");
              a.querySelectorAll("[name=d]").length && P.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");
              a.querySelectorAll(":enabled").length || P.push(":enabled", ":disabled");
              a.querySelectorAll("*,:x");
              P.push(",.*:");
            });
        (J.matchesSelector = H.test((A = C.webkitMatchesSelector || C.mozMatchesSelector || C.oMatchesSelector || C.msMatchesSelector))) &&
        f(function (a) {
          J.disconnectedMatch = A.call(a, "div");
          A.call(a, "[s!='']:x");
          x.push("!=", Fa);
        });
        P = P.length && new RegExp(P.join("|"));
        x = x.length && new RegExp(x.join("|"));
        T =
          (a = H.test(C.compareDocumentPosition)) || H.test(C.contains)
            ? function (a, b) {
              var c = 9 === a.nodeType ? a.documentElement : a,
                d = b && b.parentNode;
              return a === d || !!(d && 1 === d.nodeType && (c.contains ? c.contains(d) : a.compareDocumentPosition && a.compareDocumentPosition(d) & 16));
            }
            : function (a, b) {
              if (b) for (; (b = b.parentNode); ) if (b === a) return !0;
              return !1;
            };
        z = a
          ? function (a, c) {
            if (a === c) return (ma = !0), 0;
            var d = !a.compareDocumentPosition - !c.compareDocumentPosition;
            if (d) return d;
            d = (a.ownerDocument || a) === (c.ownerDocument || c) ? a.compareDocumentPosition(c) : 1;
            return d & 1 || (!J.sortDetached && c.compareDocumentPosition(a) === d)
              ? a === b || (a.ownerDocument === ga && T(ga, a))
                ? -1
                : c === b || (c.ownerDocument === ga && T(ga, c))
                  ? 1
                  : ha
                    ? wa.call(ha, a) - wa.call(ha, c)
                    : 0
              : d & 4
                ? -1
                : 1;
          }
          : function (a, c) {
            if (a === c) return (ma = !0), 0;
            var d,
              e = 0;
            d = a.parentNode;
            var f = c.parentNode,
              h = [a],
              k = [c];
            if (!d || !f) return a === b ? -1 : c === b ? 1 : d ? -1 : f ? 1 : ha ? wa.call(ha, a) - wa.call(ha, c) : 0;
            if (d === f) return g(a, c);
            for (d = a; (d = d.parentNode); ) h.unshift(d);
            for (d = c; (d = d.parentNode); ) k.unshift(d);
            for (; h[e] === k[e]; ) e++;
            return e ? g(h[e], k[e]) : h[e] === ga ? -1 : k[e] === ga ? 1 : 0;
          };
        return b;
      };
      b.matches = function (a, c) {
        return b(a, null, null, c);
      };
      b.matchesSelector = function (a, c) {
        (a.ownerDocument || a) !== N && S(a);
        c = c.replace(Aa, "='$1']");
        if (!(!J.matchesSelector || !K || (x && x.test(c)) || (P && P.test(c))))
          try {
            var d = A.call(a, c);
            if (d || J.disconnectedMatch || (a.document && 11 !== a.document.nodeType)) return d;
          } catch (Q) {}
        return 0 < b(c, N, null, [a]).length;
      };
      b.contains = function (a, b) {
        (a.ownerDocument || a) !== N && S(a);
        return T(a, b);
      };
      b.attr = function (a, b) {
        (a.ownerDocument || a) !== N && S(a);
        var c = B.attrHandle[b.toLowerCase()],
          c = c && ba.call(B.attrHandle, b.toLowerCase()) ? c(a, b, !K) : void 0;
        return void 0 !== c ? c : J.attributes || !K ? a.getAttribute(b) : (c = a.getAttributeNode(b)) && c.specified ? c.value : null;
      };
      b.error = function (a) {
        throw Error("Syntax error, unrecognized expression: " + a);
      };
      b.uniqueSort = function (a) {
        var b,
          c = [],
          d = 0,
          e = 0;
        ma = !J.detectDuplicates;
        ha = !J.sortStable && a.slice(0);
        a.sort(z);
        if (ma) {
          for (; (b = a[e++]); ) b === a[e] && (d = c.push(e));
          for (; d--; ) a.splice(c[d], 1);
        }
        ha = null;
        return a;
      };
      E = b.getText = function (a) {
        var b,
          c = "",
          d = 0;
        b = a.nodeType;
        if (!b) for (; (b = a[d++]); ) c += E(b);
        else if (1 === b || 9 === b || 11 === b) {
          if ("string" === typeof a.textContent) return a.textContent;
          for (a = a.firstChild; a; a = a.nextSibling) c += E(a);
        } else if (3 === b || 4 === b) return a.nodeValue;
        return c;
      };
      B = b.selectors = {
        cacheLength: 50,
        createPseudo: d,
        match: xa,
        attrHandle: {},
        find: {},
        relative: { ">": { dir: "parentNode", first: !0 }, " ": { dir: "parentNode" }, "+": { dir: "previousSibling", first: !0 }, "~": { dir: "previousSibling" } },
        preFilter: {
          ATTR: function (a) {
            a[1] = a[1].replace(ka, va);
            a[3] = (a[4] || a[5] || "").replace(ka, va);
            "~=" === a[2] && (a[3] = " " + a[3] + " ");
            return a.slice(0, 4);
          },
          CHILD: function (a) {
            a[1] = a[1].toLowerCase();
            "nth" === a[1].slice(0, 3) ? (a[3] || b.error(a[0]), (a[4] = +(a[4] ? a[5] + (a[6] || 1) : 2 * ("even" === a[3] || "odd" === a[3]))), (a[5] = +(a[7] + a[8] || "odd" === a[3]))) : a[3] && b.error(a[0]);
            return a;
          },
          PSEUDO: function (a) {
            var b,
              c = !a[5] && a[2];
            if (xa.CHILD.test(a[0])) return null;
            a[3] && void 0 !== a[4] ? (a[2] = a[4]) : c && ra.test(c) && (b = r(c, !0)) && (b = c.indexOf(")", c.length - b) - c.length) && ((a[0] = a[0].slice(0, b)), (a[2] = c.slice(0, b)));
            return a.slice(0, 3);
          },
        },
        filter: {
          TAG: function (a) {
            var b = a.replace(ka, va).toLowerCase();
            return "*" === a
              ? function () {
                return !0;
              }
              : function (a) {
                return a.nodeName && a.nodeName.toLowerCase() === b;
              };
          },
          CLASS: function (a) {
            var b = Ca[a + " "];
            return (
              b ||
              ((b = new RegExp("(^|[\\x20\\t\\r\\n\\f])" + a + "([\\x20\\t\\r\\n\\f]|$)")),
                Ca(a, function (a) {
                  return b.test(("string" === typeof a.className && a.className) || ("undefined" !== typeof a.getAttribute && a.getAttribute("class")) || "");
                }))
            );
          },
          ATTR: function (a, c, d) {
            return function (e) {
              e = b.attr(e, a);
              if (null == e) return "!=" === c;
              if (!c) return !0;
              e += "";
              return "=" === c
                ? e === d
                : "!=" === c
                  ? e !== d
                  : "^=" === c
                    ? d && 0 === e.indexOf(d)
                    : "*=" === c
                      ? d && -1 < e.indexOf(d)
                      : "$=" === c
                        ? d && e.slice(-d.length) === d
                        : "~=" === c
                          ? -1 < (" " + e + " ").indexOf(d)
                          : "|=" === c
                            ? e === d || e.slice(0, d.length + 1) === d + "-"
                            : !1;
            };
          },
          CHILD: function (a, b, c, d, e) {
            var f = "nth" !== a.slice(0, 3),
              g = "last" !== a.slice(-4),
              h = "of-type" === b;
            return 1 === d && 0 === e
              ? function (a) {
                return !!a.parentNode;
              }
              : function (b, c, k) {
                var l, m, n, p, q;
                c = f !== g ? "nextSibling" : "previousSibling";
                var r = b.parentNode,
                  C = h && b.nodeName.toLowerCase();
                k = !k && !h;
                if (r) {
                  if (f) {
                    for (; c; ) {
                      for (m = b; (m = m[c]); ) if (h ? m.nodeName.toLowerCase() === C : 1 === m.nodeType) return !1;
                      q = c = "only" === a && !q && "nextSibling";
                    }
                    return !0;
                  }
                  q = [g ? r.firstChild : r.lastChild];
                  if (g && k)
                    for (k = r[D] || (r[D] = {}), l = k[a] || [], p = l[0] === aa && l[1], n = l[0] === aa && l[2], m = p && r.childNodes[p]; (m = (++p && m && m[c]) || (n = p = 0) || q.pop()); ) {
                      if (1 === m.nodeType && ++n && m === b) {
                        k[a] = [aa, p, n];
                        break;
                      }
                    }
                  else if (k && (l = (b[D] || (b[D] = {}))[a]) && l[0] === aa) n = l[1];
                  else for (; (m = (++p && m && m[c]) || (n = p = 0) || q.pop()) && ((h ? m.nodeName.toLowerCase() !== C : 1 !== m.nodeType) || !++n || (k && ((m[D] || (m[D] = {}))[a] = [aa, n]), m !== b)); );
                  n -= e;
                  return n === d || (0 === n % d && 0 <= n / d);
                }
              };
          },
          PSEUDO: function (a, c) {
            var e,
              f = B.pseudos[a] || B.setFilters[a.toLowerCase()] || b.error("unsupported pseudo: " + a);
            return f[D]
              ? f(c)
              : 1 < f.length
                ? ((e = [a, a, "", c]),
                  B.setFilters.hasOwnProperty(a.toLowerCase())
                    ? d(function (a, b) {
                      for (var d, e = f(a, c), g = e.length; g--; ) (d = wa.call(a, e[g])), (a[d] = !(b[d] = e[g]));
                    })
                    : function (a) {
                      return f(a, 0, e);
                    })
                : f;
          },
        },
        pseudos: {
          not: d(function (a) {
            var b = [],
              c = [],
              e = V(a.replace(X, "$1"));
            return e[D]
              ? d(function (a, b, c, d) {
                d = e(a, null, d, []);
                for (var f = a.length; f--; ) if ((c = d[f])) a[f] = !(b[f] = c);
              })
              : function (a, d, f) {
                b[0] = a;
                e(b, null, f, c);
                return !c.pop();
              };
          }),
          has: d(function (a) {
            return function (c) {
              return 0 < b(a, c).length;
            };
          }),
          contains: d(function (a) {
            return function (b) {
              return -1 < (b.textContent || b.innerText || E(b)).indexOf(a);
            };
          }),
          lang: d(function (a) {
            Pa.test(a || "") || b.error("unsupported lang: " + a);
            a = a.replace(ka, va).toLowerCase();
            return function (b) {
              var c;
              do if ((c = K ? b.lang : b.getAttribute("xml:lang") || b.getAttribute("lang"))) return (c = c.toLowerCase()), c === a || 0 === c.indexOf(a + "-");
              while ((b = b.parentNode) && 1 === b.nodeType);
              return !1;
            };
          }),
          target: function (b) {
            var c = a.location && a.location.hash;
            return c && c.slice(1) === b.id;
          },
          root: function (a) {
            return a === C;
          },
          focus: function (a) {
            return a === N.activeElement && (!N.hasFocus || N.hasFocus()) && !!(a.type || a.href || ~a.tabIndex);
          },
          enabled: function (a) {
            return !1 === a.disabled;
          },
          disabled: function (a) {
            return !0 === a.disabled;
          },
          checked: function (a) {
            var b = a.nodeName.toLowerCase();
            return ("input" === b && !!a.checked) || ("option" === b && !!a.selected);
          },
          selected: function (a) {
            a.parentNode && a.parentNode.selectedIndex;
            return !0 === a.selected;
          },
          empty: function (a) {
            for (a = a.firstChild; a; a = a.nextSibling) if (6 > a.nodeType) return !1;
            return !0;
          },
          parent: function (a) {
            return !B.pseudos.empty(a);
          },
          header: function (a) {
            return Ha.test(a.nodeName);
          },
          input: function (a) {
            return Da.test(a.nodeName);
          },
          button: function (a) {
            var b = a.nodeName.toLowerCase();
            return ("input" === b && "button" === a.type) || "button" === b;
          },
          text: function (a) {
            var b;
            return "input" === a.nodeName.toLowerCase() && "text" === a.type && (null == (b = a.getAttribute("type")) || "text" === b.toLowerCase());
          },
          first: m(function () {
            return [0];
          }),
          last: m(function (a, b) {
            return [b - 1];
          }),
          eq: m(function (a, b, c) {
            return [0 > c ? c + b : c];
          }),
          even: m(function (a, b) {
            for (var c = 0; c < b; c += 2) a.push(c);
            return a;
          }),
          odd: m(function (a, b) {
            for (var c = 1; c < b; c += 2) a.push(c);
            return a;
          }),
          lt: m(function (a, b, c) {
            for (b = 0 > c ? c + b : c; 0 <= --b; ) a.push(b);
            return a;
          }),
          gt: m(function (a, b, c) {
            for (c = 0 > c ? c + b : c; ++c < b; ) a.push(c);
            return a;
          }),
        },
      };
      B.pseudos.nth = B.pseudos.eq;
      for (F in { radio: !0, checkbox: !0, file: !0, password: !0, image: !0 }) B.pseudos[F] = h(F);
      for (F in { submit: !0, reset: !0 }) B.pseudos[F] = k(F);
      q.prototype = B.filters = B.pseudos;
      B.setFilters = new q();
      V = b.compile = function (a, b) {
        var c,
          d = [],
          e = [],
          f = ua[a + " "];
        if (!f) {
          b || (b = r(a));
          for (c = b.length; c--; ) (f = O(b[c])), f[D] ? d.push(f) : e.push(f);
          f = ua(a, w(e, d));
          f.selector = a;
        }
        return f;
      };
      sa = b.select = function (a, b, c, d) {
        var e,
          f,
          g,
          h,
          k = "function" === typeof a && a,
          l = !d && r((a = k.selector || a));
        c = c || [];
        if (1 === l.length) {
          f = l[0] = l[0].slice(0);
          if (2 < f.length && "ID" === (g = f[0]).type && J.getById && 9 === b.nodeType && K && B.relative[f[1].type]) {
            b = (B.find.ID(g.matches[0].replace(ka, va), b) || [])[0];
            if (!b) return c;
            k && (b = b.parentNode);
            a = a.slice(f.shift().value.length);
          }
          for (e = xa.needsContext.test(a) ? 0 : f.length; e--; ) {
            g = f[e];
            if (B.relative[(h = g.type)]) break;
            if ((h = B.find[h]))
              if ((d = h(g.matches[0].replace(ka, va), (Z.test(f[0].type) && p(b.parentNode)) || b))) {
                f.splice(e, 1);
                a = d.length && n(f);
                if (!a) return fa.apply(c, d), c;
                break;
              }
          }
        }
        (k || V(a, l))(d, b, !K, c, (Z.test(a) && p(b.parentNode)) || b);
        return c;
      };
      J.sortStable = D.split("").sort(z).join("") === D;
      J.detectDuplicates = !!ma;
      S();
      J.sortDetached = f(function (a) {
        return a.compareDocumentPosition(N.createElement("div")) & 1;
      });
      f(function (a) {
        a.innerHTML = "<a href='#'></a>";
        return "#" === a.firstChild.getAttribute("href");
      }) ||
      e("type|href|height|width", function (a, b, c) {
        if (!c) return a.getAttribute(b, "type" === b.toLowerCase() ? 1 : 2);
      });
      (J.attributes &&
        f(function (a) {
          a.innerHTML = "<input/>";
          a.firstChild.setAttribute("value", "");
          return "" === a.firstChild.getAttribute("value");
        })) ||
      e("value", function (a, b, c) {
        if (!c && "input" === a.nodeName.toLowerCase()) return a.defaultValue;
      });
      f(function (a) {
        return null == a.getAttribute("disabled");
      }) ||
      e("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped", function (a, b, c) {
        var d;
        if (!c) return !0 === a[b] ? b.toLowerCase() : (d = a.getAttributeNode(b)) && d.specified ? d.value : null;
      });
      "function" === typeof define && define.amd
        ? define(function () {
          return b;
        })
        : "undefined" !== typeof module && module.exports
          ? (module.exports = b)
          : (a.Sizzle = b);
    })(window);
    (function () {
      "undefined" === typeof Sizzle &&
      ("undefined" !== typeof define && define.amd
        ? ((window.Sizzle = Prototype._actual_sizzle), (window.define = Prototype._original_define), delete Prototype._actual_sizzle, delete Prototype._original_define)
        : "undefined" !== typeof module && module.exports && ((window.Sizzle = module.exports), (module.exports = {})));
    })();
    (function (a) {
      var b = Prototype.Selector.extendElements;
      Prototype.Selector.engine = a;
      Prototype.Selector.select = function (c, d) {
        return b(a(c, d || document));
      };
      Prototype.Selector.match = function (b, d) {
        return 1 == a.matches(d, [b]).length;
      };
    })(Sizzle);
    window.Sizzle = Prototype._original_property;
    delete Prototype._original_property;
    var Form = {
      reset: function (a) {
        a = $(a);
        a.reset();
        return a;
      },
      serializeElements: function (a, b) {
        "object" != typeof b ? (b = { hash: !!b }) : Object.isUndefined(b.hash) && (b.hash = !0);
        var c,
          d,
          f = !1,
          e = b.submit,
          g,
          h;
        b.hash
          ? ((h = {}),
            (g = function (a, b, c) {
              b in a ? (Object.isArray(a[b]) || (a[b] = [a[b]]), (a[b] = a[b].concat(c))) : (a[b] = c);
              return a;
            }))
          : ((h = ""),
            (g = function (a, b, c) {
              Object.isArray(c) || (c = [c]);
              if (!c.length) return a;
              var d = encodeURIComponent(b).gsub(/%20/, "+");
              return (
                a +
                (a ? "&" : "") +
                c
                  .map(function (a) {
                    a = a.gsub(/(\r)?\n/, "\r\n");
                    a = encodeURIComponent(a);
                    a = a.gsub(/%20/, "+");
                    return d + "=" + a;
                  })
                  .join("&")
              );
            }));
        return a.inject(h, function (a, b) {
          !b.disabled && b.name && ((c = b.name), (d = $(b).getValue()), null == d || "file" == b.type || ("submit" == b.type && (f || !1 === e || (e && c != e) || !(f = !0))) || (a = g(a, c, d)));
          return a;
        });
      },
      Methods: {
        serialize: function (a, b) {
          return Form.serializeElements(Form.getElements(a), b);
        },
        getElements: function (a) {
          a = $(a).getElementsByTagName("*");
          for (var b, c = [], d = Form.Element.Serializers, f = 0; (b = a[f]); f++) d[b.tagName.toLowerCase()] && c.push(Element.extend(b));
          return c;
        },
        getInputs: function (a, b, c) {
          a = $(a);
          a = a.getElementsByTagName("input");
          if (!b && !c) return $A(a).map(Element.extend);
          for (var d = 0, f = [], e = a.length; d < e; d++) {
            var g = a[d];
            (b && g.type != b) || (c && g.name != c) || f.push(Element.extend(g));
          }
          return f;
        },
        disable: function (a) {
          a = $(a);
          Form.getElements(a).invoke("disable");
          return a;
        },
        enable: function (a) {
          a = $(a);
          Form.getElements(a).invoke("enable");
          return a;
        },
        findFirstElement: function (a) {
          a = $(a)
            .getElements()
            .findAll(function (a) {
              return "hidden" != a.type && !a.disabled;
            });
          var b = a
            .findAll(function (a) {
              return a.hasAttribute("tabIndex") && 0 <= a.tabIndex;
            })
            .sortBy(function (a) {
              return a.tabIndex;
            })
            .first();
          return b
            ? b
            : a.find(function (a) {
              return /^(?:input|select|textarea)$/i.test(a.tagName);
            });
        },
        focusFirstElement: function (a) {
          a = $(a);
          var b = a.findFirstElement();
          b && b.activate();
          return a;
        },
        request: function (a, b) {
          a = $(a);
          b = Object.clone(b || {});
          var c = b.parameters,
            d = a.readAttribute("action") || "";
          d.blank() && (d = window.location.href);
          b.parameters = a.serialize(!0);
          c && (Object.isString(c) && (c = c.toQueryParams()), Object.extend(b.parameters, c));
          a.hasAttribute("method") && !b.method && (b.method = a.method);
          return new Ajax.Request(d, b);
        },
      },
      Element: {
        focus: function (a) {
          $(a).focus();
          return a;
        },
        select: function (a) {
          $(a).select();
          return a;
        },
      },
    };
    Form.Element.Methods = {
      serialize: function (a) {
        a = $(a);
        if (!a.disabled && a.name) {
          var b = a.getValue();
          if (void 0 != b) {
            var c = {};
            c[a.name] = b;
            return Object.toQueryString(c);
          }
        }
        return "";
      },
      getValue: function (a) {
        a = $(a);
        var b = a.tagName.toLowerCase();
        return Form.Element.Serializers[b](a);
      },
      setValue: function (a, b) {
        a = $(a);
        var c = a.tagName.toLowerCase();
        Form.Element.Serializers[c](a, b);
        return a;
      },
      clear: function (a) {
        $(a).value = "";
        return a;
      },
      present: function (a) {
        return "" != $(a).value;
      },
      activate: function (a) {
        a = $(a);
        try {
          a.focus(), !a.select || ("input" == a.tagName.toLowerCase() && /^(?:button|reset|submit)$/i.test(a.type)) || a.select();
        } catch (b) {}
        return a;
      },
      disable: function (a) {
        a = $(a);
        a.disabled = !0;
        return a;
      },
      enable: function (a) {
        a = $(a);
        a.disabled = !1;
        return a;
      },
    };
    var Field = Form.Element,
      $F = Form.Element.Methods.getValue;
    Form.Element.Serializers = (function () {
      function a(a, b) {
        if (Object.isUndefined(b)) return a.checked ? a.value : null;
        a.checked = !!b;
      }
      function b(a, b) {
        if (Object.isUndefined(b)) return a.value;
        a.value = b;
      }
      function c(a) {
        var b = a.selectedIndex;
        return 0 <= b ? f(a.options[b]) : null;
      }
      function d(a) {
        var b,
          c = a.length;
        if (!c) return null;
        var d = 0;
        for (b = []; d < c; d++) {
          var e = a.options[d];
          e.selected && b.push(f(e));
        }
        return b;
      }
      function f(a) {
        return Element.hasAttribute(a, "value") ? a.value : a.text;
      }
      return {
        input: function (c, d) {
          switch (c.type.toLowerCase()) {
            case "checkbox":
            case "radio":
              return a(c, d);
            default:
              return b(c, d);
          }
        },
        inputSelector: a,
        textarea: b,
        select: function (a, b) {
          if (Object.isUndefined(b)) return ("select-one" === a.type ? c : d)(a);
          for (var e, f, g = !Object.isArray(b), p = 0, q = a.length; p < q; p++)
            if (((e = a.options[p]), (f = this.optionValue(e)), g)) {
              if (f == b) {
                e.selected = !0;
                break;
              }
            } else e.selected = b.include(f);
        },
        selectOne: c,
        selectMany: d,
        optionValue: f,
        button: b,
      };
    })();
    Abstract.TimedObserver = Class.create(PeriodicalExecuter, {
      initialize: function ($super, b, c, d) {
        $super(d, c);
        this.element = $(b);
        this.lastValue = this.getValue();
      },
      execute: function () {
        var a = this.getValue();
        if (Object.isString(this.lastValue) && Object.isString(a) ? this.lastValue != a : String(this.lastValue) != String(a)) this.callback(this.element, a), (this.lastValue = a);
      },
    });
    Form.Element.Observer = Class.create(Abstract.TimedObserver, {
      getValue: function () {
        return Form.Element.getValue(this.element);
      },
    });
    Form.Observer = Class.create(Abstract.TimedObserver, {
      getValue: function () {
        return Form.serialize(this.element);
      },
    });
    Abstract.EventObserver = Class.create({
      initialize: function (a, b) {
        this.element = $(a);
        this.callback = b;
        this.lastValue = this.getValue();
        "form" == this.element.tagName.toLowerCase() ? this.registerFormCallbacks() : this.registerCallback(this.element);
      },
      onElementEvent: function () {
        var a = this.getValue();
        this.lastValue != a && (this.callback(this.element, a), (this.lastValue = a));
      },
      registerFormCallbacks: function () {
        Form.getElements(this.element).each(this.registerCallback, this);
      },
      registerCallback: function (a) {
        if (a.type)
          switch (a.type.toLowerCase()) {
            case "checkbox":
            case "radio":
              Event.observe(a, "click", this.onElementEvent.bind(this));
              break;
            default:
              Event.observe(a, "change", this.onElementEvent.bind(this));
          }
      },
    });
    Form.Element.EventObserver = Class.create(Abstract.EventObserver, {
      getValue: function () {
        return Form.Element.getValue(this.element);
      },
    });
    Form.EventObserver = Class.create(Abstract.EventObserver, {
      getValue: function () {
        return Form.serialize(this.element);
      },
    });
    (function (a) {
      function b(a, b) {
        return a.which ? a.which === b + 1 : a.button === b;
      }
      function c(a, b) {
        return a.button === sa[b];
      }
      function d(a, b) {
        switch (b) {
          case 0:
            return 1 == a.which && !a.metaKey;
          case 1:
            return 2 == a.which || (1 == a.which && a.metaKey);
          case 2:
            return 3 == a.which;
          default:
            return !1;
        }
      }
      function f(a) {
        a = E.extend(a);
        var b = a.target,
          c = a.type;
        (a = a.currentTarget) && a.tagName && ("load" === c || "error" === c || ("click" === c && "input" === a.tagName.toLowerCase() && "radio" === a.type)) && (b = a);
        return b.nodeType == Node.TEXT_NODE ? b.parentNode : b;
      }
      function e(a) {
        var b = document.documentElement,
          c = document.body || { scrollLeft: 0 };
        return a.pageX || a.clientX + (b.scrollLeft || c.scrollLeft) - (b.clientLeft || 0);
      }
      function g(a) {
        var b = document.documentElement,
          c = document.body || { scrollTop: 0 };
        return a.pageY || a.clientY + (b.scrollTop || c.scrollTop) - (b.clientTop || 0);
      }
      function h(a) {
        return S[a] || a;
      }
      function k(a) {
        if (a === window) return 0;
        "undefined" === typeof a._prototypeUID && (a._prototypeUID = Element.Storage.UID++);
        return a._prototypeUID;
      }
      function m(a) {
        return a === window ? 0 : a == document ? 1 : a.uniqueID;
      }
      function p(a) {
        return a.include(":");
      }
      function q(b, c) {
        var d = a.Event.cache;
        Object.isUndefined(c) && (c = k(b));
        d[c] || (d[c] = { element: b });
        return d[c];
      }
      function r(b, c) {
        Object.isUndefined(c) && (c = k(b));
        delete a.Event.cache[c];
      }
      function n(b, c, d) {
        b = $(b);
        a: {
          var e = b,
            f = q(e);
          f[c] || (f[c] = []);
          for (var f = f[c], g = f.length; g--; )
            if (f[g].handler === d) {
              d = null;
              break a;
            }
          e = k(e);
          d = { responder: a.Event._createResponder(e, c, d), handler: d };
          f.push(d);
        }
        if (null === d) return b;
        d = d.responder;
        p(c)
          ? ((c = b), c.addEventListener ? c.addEventListener("dataavailable", d, !1) : (c.attachEvent("ondataavailable", d), c.attachEvent("onlosecapture", d)))
          : ((f = b), (c = h(c)), f.addEventListener ? f.addEventListener(c, d, !1) : f.attachEvent("on" + c, d));
        return b;
      }
      function u(b, c, d) {
        b = $(b);
        var e = !Object.isUndefined(d);
        if (Object.isUndefined(c) && !e) {
          c = b;
          d = k(c);
          var f = a.Event.cache[d];
          if (f) {
            r(c, d);
            var g, h;
            for (h in f) if ("element" !== h) for (d = f[h], g = d.length; g--; ) v(c, h, d[g].responder);
          }
          return b;
        }
        if (!e) {
          a: {
            h = b;
            f = q(h);
            (d = f[c]) && delete f[c];
            d = d || [];
            for (e = d.length; e--; ) v(h, c, d[e].responder);
            for (g in f) if ("element" !== g) break a;
            r(h);
          }
          return b;
        }
        h = b;
        g = q(h);
        for (var e = g[c] || [], m = e.length; m--; )
          if (e[m].handler === d) {
            f = e[m];
            break;
          }
        f && ((d = e.indexOf(f)), e.splice(d, 1));
        0 === e.length && (delete g[c], 1 === Object.keys(g).length && "element" in g && r(h));
        h = f;
        if (!h) return b;
        v(b, c, h.responder);
        return b;
      }
      function v(a, b, c) {
        p(b)
          ? a.removeEventListener
            ? a.removeEventListener("dataavailable", c, !1)
            : (a.detachEvent("ondataavailable", c), a.detachEvent("onlosecapture", c))
          : ((b = h(b)), a.removeEventListener ? a.removeEventListener(b, c, !1) : a.detachEvent("on" + b, c));
      }
      function I(a, b, c, d) {
        a = $(a);
        a = a !== document ? a : document.createEvent && !a.dispatchEvent ? document.documentElement : a;
        Object.isUndefined(d) && (d = !0);
        c = c || {};
        b = N(a, b, c, d);
        return E.extend(b);
      }
      function Y(a, b, c, d) {
        var e = document.createEvent("HTMLEvents");
        e.initEvent("dataavailable", d, !0);
        e.eventName = b;
        e.memo = c;
        a.dispatchEvent(e);
        return e;
      }
      function O(a, b, c, d) {
        var e = document.createEventObject();
        e.eventType = d ? "ondataavailable" : "onlosecapture";
        e.eventName = b;
        e.memo = c;
        a.fireEvent(e.eventType, e);
        return e;
      }
      function w(a, b, c, d) {
        a = $(a);
        Object.isFunction(c) && Object.isUndefined(d) && ((d = c), (c = null));
        return new E.Handler(a, b, c, d).start();
      }
      function F() {
        a.Event.cache = null;
      }
      var J = document.createElement("div"),
        B = document.documentElement,
        B = "onmouseenter" in B && "onmouseleave" in B,
        E = { KEY_BACKSPACE: 8, KEY_TAB: 9, KEY_RETURN: 13, KEY_ESC: 27, KEY_LEFT: 37, KEY_UP: 38, KEY_RIGHT: 39, KEY_DOWN: 40, KEY_DELETE: 46, KEY_HOME: 36, KEY_END: 35, KEY_PAGEUP: 33, KEY_PAGEDOWN: 34, KEY_INSERT: 45 },
        oa = function (a) {
          return !1;
        };
      window.attachEvent &&
      (oa = window.addEventListener
        ? function (a) {
          return !(a instanceof window.Event);
        }
        : function (a) {
          return !0;
        });
      var V,
        sa = { 0: 1, 1: 4, 2: 2 };
      V = window.attachEvent
        ? window.addEventListener
          ? function (a, d) {
            return oa(a) ? c(a, d) : b(a, d);
          }
          : c
        : Prototype.Browser.WebKit
          ? d
          : b;
      E.Methods = {
        isLeftClick: function (a) {
          return V(a, 0);
        },
        isMiddleClick: function (a) {
          return V(a, 1);
        },
        isRightClick: function (a) {
          return V(a, 2);
        },
        element: function (a) {
          return Element.extend(f(a));
        },
        findElement: function (a, b) {
          var c = f(a),
            d = Prototype.Selector;
          if (!b) return Element.extend(c);
          for (; c; ) {
            if (Object.isElement(c) && d.match(c, b)) return Element.extend(c);
            c = c.parentNode;
          }
        },
        pointer: function (a) {
          return { x: e(a), y: g(a) };
        },
        pointerX: e,
        pointerY: g,
        stop: function (a) {
          E.extend(a);
          a.preventDefault();
          a.stopPropagation();
          a.stopped = !0;
        },
      };
      var la = Object.keys(E.Methods).inject({}, function (a, b) {
        a[b] = E.Methods[b].methodize();
        return a;
      });
      if (window.attachEvent) {
        var ha = function (a) {
            switch (a.type) {
              case "mouseover":
              case "mouseenter":
                a = a.fromElement;
                break;
              case "mouseout":
              case "mouseleave":
                a = a.toElement;
                break;
              default:
                return null;
            }
            return Element.extend(a);
          },
          ma = {
            stopPropagation: function () {
              this.cancelBubble = !0;
            },
            preventDefault: function () {
              this.returnValue = !1;
            },
            inspect: function () {
              return "[object Event]";
            },
          };
        E.extend = function (a, b) {
          if (!a) return !1;
          if (!oa(a) || a._extendedByPrototype) return a;
          a._extendedByPrototype = Prototype.emptyFunction;
          var c = E.pointer(a);
          Object.extend(a, { target: a.srcElement || b, relatedTarget: ha(a), pageX: c.x, pageY: c.y });
          Object.extend(a, la);
          Object.extend(a, ma);
          return a;
        };
      } else E.extend = Prototype.K;
      window.addEventListener && ((E.prototype = window.Event.prototype || document.createEvent("HTMLEvents").__proto__), Object.extend(E.prototype, la));
      var S = { mouseenter: "mouseover", mouseleave: "mouseout" };
      B && (h = Prototype.K);
      "uniqueID" in J && (k = m);
      E._isCustomEvent = p;
      var N = document.createEvent ? Y : O;
      E.Handler = Class.create({
        initialize: function (a, b, c, d) {
          this.element = $(a);
          this.eventName = b;
          this.selector = c;
          this.callback = d;
          this.handler = this.handleEvent.bind(this);
        },
        start: function () {
          E.observe(this.element, this.eventName, this.handler);
          return this;
        },
        stop: function () {
          E.stopObserving(this.element, this.eventName, this.handler);
          return this;
        },
        handleEvent: function (a) {
          var b = E.findElement(a, this.selector);
          b && this.callback.call(this.element, a, b);
        },
      });
      Object.extend(E, E.Methods);
      Object.extend(E, { fire: I, observe: n, stopObserving: u, on: w });
      Element.addMethods({ fire: I, observe: n, stopObserving: u, on: w });
      Object.extend(document, { fire: I.methodize(), observe: n.methodize(), stopObserving: u.methodize(), on: w.methodize(), loaded: !1 });
      a.Event ? Object.extend(window.Event, E) : (a.Event = E);
      a.Event.cache = {};
      window.attachEvent && window.attachEvent("onunload", F);
      B = J = null;
    })(this);
    (function (a) {
      function b(a, b, c) {
        return function (d) {
          var e = Event.cache[a],
            e = e && e.element;
          if (Object.isUndefined(d.eventName) || d.eventName !== b) return !1;
          Event.extend(d, e);
          c.call(e, d);
        };
      }
      function c(a, b, c) {
        return function (b) {
          var d = Event.cache[a].element;
          Event.extend(b, d);
          for (var e = b.relatedTarget; e && e !== d; )
            try {
              e = e.parentNode;
            } catch (q) {
              e = d;
            }
          e !== d && c.call(d, b);
        };
      }
      var d = document.documentElement,
        f = "onmouseenter" in d && "onmouseleave" in d;
      a.Event._createResponder = function (a, d, h) {
        return Event._isCustomEvent(d)
          ? b(a, d, h)
          : f || ("mouseenter" !== d && "mouseleave" !== d)
            ? function (b) {
              if (Event.cache) {
                var c = Event.cache[a].element;
                Event.extend(b, c);
                h.call(c, b);
              }
            }
            : c(a, d, h);
      };
      d = null;
    })(this);
    (function (a) {
      function b() {
        document.loaded || (f && window.clearTimeout(f), (document.loaded = !0), document.fire("dom:loaded"));
      }
      function c() {
        "complete" === document.readyState && (document.detachEvent("onreadystatechange", c), b());
      }
      function d() {
        try {
          document.documentElement.doScroll("left");
        } catch (e) {
          f = d.defer();
          return;
        }
        b();
      }
      var f;
      "complete" === document.readyState
        ? b()
        : (document.addEventListener ? document.addEventListener("DOMContentLoaded", b, !1) : (document.attachEvent("onreadystatechange", c), window == top && (f = d.defer())), Event.observe(window, "load", b));
    })(this);
    Element.addMethods();
    Hash.toQueryString = Object.toQueryString;
    var Toggle = { display: Element.toggle };
    Element.addMethods({ childOf: Element.Methods.descendantOf });
    var Insertion = {
        Before: function (a, b) {
          return Element.insert(a, { before: b });
        },
        Top: function (a, b) {
          return Element.insert(a, { top: b });
        },
        Bottom: function (a, b) {
          return Element.insert(a, { bottom: b });
        },
        After: function (a, b) {
          return Element.insert(a, { after: b });
        },
      },
      $continue = Error('"throw $continue" is deprecated, use "return" instead'),
      Position = {
        includeScrollOffsets: !1,
        prepare: function () {
          this.deltaX = window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft || 0;
          this.deltaY = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;
        },
        within: function (a, b, c) {
          if (this.includeScrollOffsets) return this.withinIncludingScrolloffsets(a, b, c);
          this.xcomp = b;
          this.ycomp = c;
          this.offset = Element.cumulativeOffset(a);
          return c >= this.offset[1] && c < this.offset[1] + a.offsetHeight && b >= this.offset[0] && b < this.offset[0] + a.offsetWidth;
        },
        withinIncludingScrolloffsets: function (a, b, c) {
          var d = Element.cumulativeScrollOffset(a);
          this.xcomp = b + d[0] - this.deltaX;
          this.ycomp = c + d[1] - this.deltaY;
          this.offset = Element.cumulativeOffset(a);
          return this.ycomp >= this.offset[1] && this.ycomp < this.offset[1] + a.offsetHeight && this.xcomp >= this.offset[0] && this.xcomp < this.offset[0] + a.offsetWidth;
        },
        overlap: function (a, b) {
          if (!a) return 0;
          if ("vertical" == a) return (this.offset[1] + b.offsetHeight - this.ycomp) / b.offsetHeight;
          if ("horizontal" == a) return (this.offset[0] + b.offsetWidth - this.xcomp) / b.offsetWidth;
        },
        cumulativeOffset: Element.Methods.cumulativeOffset,
        positionedOffset: Element.Methods.positionedOffset,
        absolutize: function (a) {
          Position.prepare();
          return Element.absolutize(a);
        },
        relativize: function (a) {
          Position.prepare();
          return Element.relativize(a);
        },
        realOffset: Element.Methods.cumulativeScrollOffset,
        offsetParent: Element.Methods.getOffsetParent,
        page: Element.Methods.viewportOffset,
        clone: function (a, b, c) {
          c = c || {};
          return Element.clonePosition(b, a, c);
        },
      };
    document.getElementsByClassName ||
    (document.getElementsByClassName = (function (a) {
      function b(a) {
        return a.blank() ? null : "[contains(concat(' ', @class, ' '), ' " + a + " ')]";
      }
      a.getElementsByClassName = Prototype.BrowserFeatures.XPath
        ? function (a, d) {
          d = d.toString().strip();
          var c = /\s/.test(d) ? $w(d).map(b).join("") : b(d);
          return c ? document._getElementsByXPath(".//*" + c, a) : [];
        }
        : function (a, b) {
          b = b.toString().strip();
          var c = [],
            d = /\s/.test(b) ? $w(b) : null;
          if (!d && !b) return c;
          var g = $(a).getElementsByTagName("*");
          b = " " + b + " ";
          for (var h = 0, k, m; (k = g[h]); h++)
            k.className &&
            (m = " " + k.className + " ") &&
            (m.include(b) ||
              (d &&
                d.all(function (a) {
                  return !a.toString().blank() && m.include(" " + a + " ");
                }))) &&
            c.push(Element.extend(k));
          return c;
        };
      return function (a, b) {
        return $(b || document.body).getElementsByClassName(a);
      };
    })(Element.Methods));
    Element.ClassNames = Class.create();
    Element.ClassNames.prototype = {
      initialize: function (a) {
        this.element = $(a);
      },
      _each: function (a, b) {
        this.element.className
          .split(/\s+/)
          .select(function (a) {
            return 0 < a.length;
          })
          ._each(a, b);
      },
      set: function (a) {
        this.element.className = a;
      },
      add: function (a) {
        this.include(a) || this.set($A(this).concat(a).join(" "));
      },
      remove: function (a) {
        this.include(a) && this.set($A(this).without(a).join(" "));
      },
      toString: function () {
        return $A(this).join(" ");
      },
    };
    Object.extend(Element.ClassNames.prototype, Enumerable);
    (function () {
      window.Selector = Class.create({
        initialize: function (a) {
          this.expression = a.strip();
        },
        findElements: function (a) {
          return Prototype.Selector.select(this.expression, a);
        },
        match: function (a) {
          return Prototype.Selector.match(a, this.expression);
        },
        toString: function () {
          return this.expression;
        },
        inspect: function () {
          return "#<Selector: " + this.expression + ">";
        },
      });
      Object.extend(Selector, {
        matchElements: function (a, b) {
          for (var c = Prototype.Selector.match, d = [], f = 0, e = a.length; f < e; f++) {
            var g = a[f];
            c(g, b) && d.push(Element.extend(g));
          }
          return d;
        },
        findElement: function (a, b, c) {
          c = c || 0;
          for (var d = 0, f, e = 0, g = a.length; e < g; e++) if (((f = a[e]), Prototype.Selector.match(f, b) && c === d++)) return Element.extend(f);
        },
        findChildElements: function (a, b) {
          var c = b.toArray().join(", ");
          return Prototype.Selector.select(c, a || document);
        },
      });
    })();
    NO_DRAWTEXT = NO_DRAWIMAGES = USE_WEBGL = CHEETAH_TEXTURE = ENGLISH_ONLY = !1;
    CACHE_TECHNOLOGIES = !0;
    dbgWidgets = dbgNetwork = dbg = !1;
    fctx = ctx_orig = ctx = canvas = null;
    screenHeight = screenWidth = 0;
    fps = 60;
    smoothing = isLocal = isSmall = isRetina = !1;
    widgets = [];
    mWidgets = [];
    res = {};
    resReadyNum = 0;
    gScaleEvt = gScale = 1;
    networkPollTick = null;
    window.requestAnimationFrame ||
    (window.requestAnimationFrame = (function () {
      return (
        window.webkitRequestAnimationFrame ||
        window.mozRequestAnimationFrame ||
        window.oRequestAnimationFrame ||
        window.msRequestAnimationFrame ||
        function (a, b) {
          window.setTimeout(a, 1e3 / 60);
        }
      );
    })());
    window.onload = function () {
      startLoading = 1;
      init();
    };
    window.onscroll = function (a) {
      if (!isDefined(editContainer) || null == editBox || ("none" == editContainer.style.display && "none" == editBox.style.display)) return a.preventDefault(), window.scrollTo(0, 0), !1;
    };
    resizeTimer = null;
    window.onresize = function (a) {
      if (null != editContainer && null != editBox && ("block" == editContainer.style.display || "block" == editBox.style.display)) return a.preventDefault(), a.stopPropagation(), !1;
      clearTimeout(resizeTimer);
      resizeTimer = window.setTimeout(resize, 40);
    };
    errorNum = 0;
    window.onerror = function (a, b, c, d, f) {
      var e = !1;
      a.contains("'send'") && (e = !0);
      a.contains("atomicFindClose") && (e = !0);
      a.contains("a.transport.onClose") && (e = !0);
      a.contains("DOM Exception 11") && ((e = !0), showPopupMsg("Connection issues..."));
      e
        ? (console.warn("** IGNORED ERROR: " + b + ":" + c + ":" + d), console.warn(a))
        : ((a = b + ":" + c + ":" + d + "; " + a), 0 === Object.keys(f).length && (a += "; " + JSON.stringify(f)), window.prompt("ERROR:", a), errorNum++);
    };
    startLoading = -1;
    stopLoading = !1;
    appCache = null;
    IGNORE_LOAD_IMG_ERRORS = !1;
    xmlhttp = null;
    noData = !1;
    var $j = null;
    function onChangeRadioButtons() {}
    RES_LOADED = IS_STANDALONE = !1;
    function isStandalone() {
      if ((IS_STANDALONE = "undefined" === typeof curSetup))
        alert("ATTENTION! STANDALONE MODE. (NO CONNECTION or START FROM .HTML) BUGGY AND WILL HAVE NO EFFECT ON MIXER."),
          (curSetup = { input: 20, fx: 4, aux: 8, bankSize: 8, sub: 6, maxx: !1, rec: !0, phantom: 24, linein: 2, uniqueid: "78563412F0DEBC9A78563412F0DEBC9A" }),
          (netConfig = {
            adminPassword: "2bddc261249df26e089ad5a591e2b59ea6d67de55367f87580dd839afdc5163c",
            ap_channel: 9,
            ap_country: "US",
            ap_enabled: !1,
            ap_hidden: !1,
            ap_ifid: "wlan0",
            ap_mac: "",
            ap_mode: 0,
            ap_psk: "",
            ap_ssid: "Soundcraft Win32",
            ap_ssid_mode: 0,
            ap_up: !1,
            eth_dhcp_gw: "---",
            eth_dhcp_ip: "---",
            eth_dhcp_netmask: "---",
            eth_enabled: !1,
            eth_gw: "10.10.2.1",
            eth_ifid: "eth0",
            eth_ip: "10.10.2.1",
            eth_mac: "",
            eth_mode: 1,
            eth_netmask: "255.255.255.0",
            eth_psk: "",
            eth_ssid: "",
            eth_up: !1,
            firmware: "1.0.6876-win32",
            model: "win32",
            serial: "",
            uid: "78563412F0DEBC9A78563412F0DEBC9A",
            wlan_dhcp_gw: "---",
            wlan_dhcp_ip: "---",
            wlan_dhcp_netmask: "---",
            wlan_enabled: !1,
            wlan_gw: "192.168.1.1",
            wlan_ifid: "wlan1",
            wlan_ip: "192.168.1.78",
            wlan_mac: "",
            wlan_mode: 0,
            wlan_netmask: "255.255.255.0",
            wlan_psk: "",
            wlan_ssid: "",
            wlan_up: !1,
          });
    }
    function init() {
      "undefined" != typeof jQuery && jQuery && ($j = jQuery.noConflict());
      window.scrollTo(0, 0);
      log("Core init()");
      canvas = $("mixer");
      isStandalone();
      configFunctions();
      settingsStorage.init();
      isLocal = "127.0.0.1" == document.location.host || "#local" == document.location.hash;
      isIOS = /(iPad|iPhone|iPod)/g.test(navigator.userAgent);
      isAndroid = /(Android)/g.test(navigator.userAgent);
      lang = Object.clone(langBase.en);
      "en" != settings.lang && Object.extend(lang, langBase[settings.lang]);
      $("CON_MSG").innerHTML = isLocal ? ".&nbsp;&nbsp;.&nbsp;&nbsp;." : lang.CONNECTING;
      $("span_ms").innerHTML = lang.MS;
      $("span_mt").innerHTML = lang.METERS_UNIT;
      $("span_ft").innerHTML = lang.FT;
      $("span_smp").innerHTML = lang.SAMPLES;
      $("span_fps").innerHTML = lang.FRAMES;
      isLocal && (canvas.style.imageRendering = "pixelated");
      initEvents();
      initEditBox();
      initEditBox2();
      initConfBox();
      checkBrowser()
        ? (createData(),
          noData
            ? showPopupMsg(lang.NO_CONNECTION, 12e4)
            : (initScreen(),
              drawLoadingScreen(),
            WEBSITE_MODE ||
            setTimeout(function () {
              RES_LOADED || location.reload();
            }, 3e4)))
        : showPopupMsg(lang.BAD_BROWSER);
    }
    function initEvents() {
      window.addEventListener("contextmenu", eventStop, !1);
      window.addEventListener("selectstart", eventStop, !1);
      window.addEventListener(
        "offline",
        function (a) {
          showPopupMsg(lang.OFFLINE, 5e3);
        },
        !1
      );
      document.addEventListener("focusout", function (a) {
        window.scrollTo(0, 0);
      });
      window.addEventListener("keypress", hKbd, !1);
      window.addEventListener("keydown", hKbd, !1);
      window.addEventListener("keyup", hKbd, !1);
      canvas.addEventListener("mousedown", hMouse, !1);
      window.addEventListener("mouseup", hMouse, !1);
      window.addEventListener("mousemove", hMouse, !1);
      "onwheel" in document.createElement("div")
        ? window.addEventListener("wheel", hMouse, !1)
        : void 0 !== document.onmousewheel
          ? window.addEventListener("mousewheel", hMouse, !1)
          : window.addEventListener("DOMMouseScroll", hMouse, !1);
      canvas.addEventListener("touchstart", touchStart, !1);
      window.addEventListener("touchmove", touchMove, !1);
      window.addEventListener("touchend", touchEnd, !1);
      window.addEventListener("touchcancel", touchEnd, !1);
      window.addEventListener("touchleave", touchEnd, !1);
      window.navigator.msPointerEnabled &&
      (canvas.addEventListener("MSPointerDown", touchStart, !1),
        window.addEventListener("MSPointerMove", touchMove, !1),
        window.addEventListener("MSPointerUp", touchEnd, !1),
        window.addEventListener("MSPointerCancel", touchEnd, !1));
    }
    function initScreen() {
      ctx_orig = ctx = canvas.getContext("2d");
      fctx = document.createElement("canvas").getContext("2d");
      var a = Math.max(window.innerWidth, window.innerHeight),
        b = Math.min(window.innerWidth, window.innerHeight);
      isRetina = 1.5 <= window.devicePixelRatio;
      settings.disableRetina && (isRetina = !1);
      isLocal && (isRetina = !1);
      isLocal && (fps = 30);
      settings.disableScaling || isLocal || !(1e3 > a || 640 > b) || (isSmall = !0);
      isRetina && !isLocal
        ? ((drawImage = function (a, b, f) {
          ctx.drawImage(a, b, f, (a.width / 2) | 0, (a.height / 2) | 0);
        }),
          (drawImageCtx = function (a, b, f, e) {
            e.drawImage(a, b, f, (a.width / 2) | 0, (a.height / 2) | 0);
          }))
        : isLocal
          ? ((drawImage = function (a, b, f) {
            "undefined" === typeof a.img ? ctx.drawImage(a, b, f) : ctx.drawImage(res[a.img], a.x, a.y, a.cw, a.ch, b + a.dx, f + a.dy, a.cw, a.ch);
          }),
            (drawImageCtx = function (a, b, f, e) {
              "undefined" === typeof a.img ? e.drawImage(a, b, f) : e.drawImage(res[a.img], a.x, a.y, a.cw, a.ch, b + a.dx, f + a.dy, a.cw, a.ch);
            }))
          : ((drawImage = function (a, b, f) {
            ctx.drawImage(a, b, f);
          }),
            (drawImageCtx = function (a, b, f, e) {
              e.drawImage(a, b, f);
            }));
      NO_DRAWIMAGES && ((drawImage = function () {}), (drawImageCtx = function () {}));
      NO_DRAWTEXT && (ctx.fillText = function () {});
      resize();
    }
    function isZoomed() {
      var a = document.body.clientWidth;
      return !window.matchMedia("(max-width: " + a + "px) and (min-width: " + a + "px)").matches;
    }
    function resize() {
      window.scrollTo(0, 0);
      null == canvas ||
      (isIOS && window.innerHeight != document.body.clientHeight && (document.body.style.height = window.innerHeight + "px"), null != editBox && "block" == editBox.style.display) ||
      (null != editContainer && "block" == editContainer.style.display) ||
      ((screenWidth = canvas.width = window.innerWidth),
        (screenHeight = canvas.height = window.innerHeight),
        (gScaleEvt = gScale = 1),
        (smoothing = !1),
        ctx.setTransform(1, 0, 0, 1, 0, 0),
      isSmall &&
      ((gScale = Math.min(Math.max(screenWidth, screenHeight) / 1024, Math.min(screenWidth, screenHeight) / 640)),
        (gScaleEvt = 1 / gScale),
        (screenWidth *= 1 / gScale),
        (screenHeight *= 1 / gScale),
        (screenWidth |= 0),
        (screenHeight |= 0),
        (smoothing = !1)),
      settings.customScaleEnabled &&
      1 != settings.customScale &&
      ((gScale = settings.customScale), (gScaleEvt = 1 / gScale), (screenWidth *= 1 / gScale), (screenHeight *= 1 / gScale), (screenWidth |= 0), (screenHeight |= 0), (smoothing = !0)),
      isRetina && ((gScale *= 2), (canvas.width = screenWidth * gScale), (canvas.height = screenHeight * gScale)),
        ctx.scale(gScale, gScale),
        (ctx.imageSmoothingEnabled = smoothing),
        onResize());
    }
    function setCustomScale(a, b) {
      settingsStorage.set("customScaleEnabled", a);
      settingsStorage.set("customScale", b);
      resize();
    }
    function checkBrowser() {
      try {
        localStorage.setItem("TEST_TEST", "TEST_TEST"), localStorage.removeItem("TEST_TEST");
      } catch (c) {}
      var a = ("WebSocket" in window && 2 === window.WebSocket.CLOSING) || "MozWebSocket" in window,
        b = document.createElement("canvas"),
        b = !(!b.getContext || !b.getContext("2d"));
      return a && b;
    }
    function loadInitParams() {
      var a = document.createElement("script");
      a.preload = !0;
      a.src = "initparams.js";
      a.onpreload = function () {
        document.body.appendChild(a);
      };
    }
    function loadInitParamsJS() {
      var a = document.createElement("script");
      a.type = "text/javascript";
      a.onerror = function (a) {
        log("The script " + a.target.src + " is not accessible.");
        document.body.removeChild(a.target);
        startLoading = 0;
      };
      a.onload = function () {
        startLoading = 1;
      };
      document.body.appendChild(a);
      a.src = "js/initparams.js";
    }
    function checkConnection() {
      null == xmlhttp && (xmlhttp = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject("Microsoft.XMLHTTP"));
      xmlhttp.onreadystatechange = function () {
        4 == xmlhttp.readyState &&
        (200 == xmlhttp.status
          ? (log(xmlhttp.responseText), "NOT_OFFLINE" == xmlhttp.responseText && (log("OK!"), (startLoading = 1)))
          : 400 == xmlhttp.status
            ? ((startLoading = 0), log("! OFFLINE 400 !"))
            : ((startLoading = 0), log("! OFFLINE !")));
      };
      xmlhttp.open("GET", "offline_check.txt", !0);
      xmlhttp.send();
    }
    function checkFonts() {
      var a = [];
      fctx.font = "20pt I_want_a_cookie";
      var b = fctx.measureText("abc123").width;
      a.push(b);
      fctx.font = "20pt open_sansbold";
      b = fctx.measureText("abc123").width;
      a.push(b);
      fctx.font = "20pt umixled";
      b = fctx.measureText("abc123").width;
      a.push(b);
      fctx.font = "20pt open_sans_condensedbold";
      b = fctx.measureText("abc123").width;
      a.push(b);
      a.sort();
      for (var b = !0, c = 0; c < a.length - 1; c++) a[c] == a[c + 1] && (b = !1);
      b
        ? (log("! FONTS OK !"), resLoaded())
        : setTimeout(function () {
          checkFonts();
        }, 100);
    }
    function loadImg(a, b) {
      var c = isRetina ? "img2x/" : "img1x/";
      switch (settings.lang) {
        case "cn":
          c = isRetina ? "img2x_chin/" : "img1x_chin/";
      }
      if (CHEETAH_TEXTURE && IMG_TABLE[a])
        return (
          resLoaded(),
          (c = IMG_TABLE[a]) || log(a),
            (c.width = c.ow),
            (c.height = c.oh),
            (c.w = function () {
              return this.ow;
            }),
            (c.h = function () {
              return this.oh;
            }),
            c
        );
      var d = new Image();
      d.onload = resLoaded;
      d.isFast = b || !1;
      d.onerror = function (a) {
        log("ERROR LOADING IMG: " + this.src + " " + a.message);
        log(a.status);
        IGNORE_LOAD_IMG_ERRORS && resLoaded();
      };
      d.src = c + a;
      return d;
    }
    function resLoaded() {
      resReadyNum++;
      var a = objSize(res);
      drawProgress(resReadyNum / a);
      a == resReadyNum &&
      ((RES_LOADED = !0),
        (a = Date.now() - startLoadingTime),
        log("Resources loaded in: " + a + "ms"),
        1200 > a
          ? setTimeout(function () {
            startGUI();
          }, 1200 - a)
          : startGUI());
    }
    guiReady = !1;
    function fastImages() {
      for (var a = Object.keys(res), b = 0; b < a.length; b++) {
        var c = a[b];
        if (!c.startsWith("_")) {
          var d = res[c];
          if (d.isFast && !isDefined(d.img)) {
            var f = document.createElement("canvas"),
              e = f.getContext("2d"),
              g = d.height;
            f.width = d.width;
            f.height = g;
            e.drawImage(d, 0, 0);
            res[c].onload = null;
            res[c].src = "img1x/png-transparent.png";
            res[c] = f;
          }
        }
      }
    }
    function startGUI() {
      (isRetina || isLocal) && fastImages();
      initGUI();
      updateCacheAll();
      lastUpdateTime = Date.now();
      USE_WEBGL ? requestAnimationFrame(updaterGL) : requestAnimationFrame(updater);
    }
    updateLine = [];
    updateTime = 0;
    function regUpdate(a) {
      a
        ? (a.redrawParent && null != a.parent && ((a = a.parent), a.CACHED_DRAWING && (a.NEED_UPDATE = !0)), a.enabled && -1 == fastIndexOf(updateLine, a) && updateLine.push(a))
        : log("! null regUpdate: " + arguments.callee.caller.name);
    }
    tickLine = [];
    function regTick(a) {
      "undefined" != typeof a && -1 == fastIndexOf(tickLine, a) && tickLine.push(a);
    }
    updaterLock = !1;
    uframe = lastUpdateTime = lastTick = 0;
    function updater() {
      requestAnimationFrame(updater);
      networkPollTick && !IS_STANDALONE && networkPollTick();
      var a = Util.getTime(),
        b = (a - lastUpdateTime) / (1e3 / fps);
      lastUpdateTime = a;
      for (a = tickLine.length; a--; ) tickLine.shift().tick(b);
      b = settings.drawRate;
      isLocal && 2 > b && (b = 2);
      if (!(uframe % b)) {
        b = updateLine.length;
        for (a = 0; a < b; a++) updateLine[a].update();
        updateLine.length = 0;
        if (b) for (a = 0; a < mWidgets.length; a++) mWidgets[a].update();
      }
      uframe++;
    }
    function updaterGL() {
      null != networkPollTick && networkPollTick();
      var a = Util.getTime(),
        b = (a - lastUpdateTime) / (1e3 / fps);
      lastUpdateTime = a;
      for (a = tickLine.length; a--; ) tickLine.shift().tick(b);
      if (!(uframe % settings.drawRate)) {
        b = widgets.length;
        for (a = 0; a < b; a++) widgets[a].update();
        b = mWidgets.length;
        for (a = 0; a < b; a++) mWidgets[a].update();
      }
      uframe++;
      requestAnimationFrame(updaterGL);
    }
    var Widget = Class.create({
      initialize: function (a) {
        this.parent = null;
        this.isModal = !1;
        "undefined" == typeof a || null == a ? widgets.push(this) : -1 == a ? ((this.isModal = !0), mWidgets.push(this)) : ((this.parent = a), a.widgets.push(this));
        this.widgetName = "Widget";
        this.visible = this.enabled = !0;
        this.dsbld = !1;
        this.widgets = [];
        this.h = this.w = this.y = this.x = 0;
        this.opaque = !0;
        this.needClip = this.ignoreEvents = this.needMoveEvt = this.redrawParent = !1;
        this.blockEvent = !0;
        this.offsetY = this.offsetXold = this.offsetX = 0;
        this.pressPoint = [-1, -1];
        this.keyPart = this.key = null;
        this.regKeys = [];
        this.updCount = 0;
        this.lastClickTime = -1;
        this.CACHED_DRAWING = this.DYNAMIC_WIDGET = !1;
        this.NEED_UPDATE = !0;
        this.CACHED_PARAMS = [];
        this.CACHED_CANVAS_H = this.CACHED_CANVAS_W = this.CACHED_CANVAS_CTX = this.CACHED_CANVAS = null;
        this.anchors = { centerX: !1, centerY: !1, left: null, right: null, top: null, bottom: null };
      },
      close: function () {
        this.isModal && (this.hide(), clearModals());
      },
      getVal: function () {
        return null == this.key ? (log("getVal: " + this.name + " no PARAM-KEY!"), 0) : getValue(this.key);
      },
      setVal: function (a) {
        null != this.key ? setValue(this.key, a) : log("setVal: " + this.name + " no PARAM-KEY!");
      },
      setKey: function (a, b) {
        this.key = a;
        b && (this.unRegAllKeys(), this.regKey(a));
      },
      setKeyPrefix: function (a) {
        null != this.keyPart && (this.key = a + this.keyPart);
      },
      regKey: function (a) {
        this.regKeys.push(a);
        var b = keyWidgetHash.get(a);
        isDefined(b) ? b.push(this) : keyWidgetHash.set(a, [this]);
      },
      unRegKey: function (a) {
        a = keyWidgetHash.get(a);
        if (isDefined(a)) {
          var b = a.indexOf(this);
          0 <= b && a.splice(b, 1);
        }
      },
      unRegAllKeys: function () {
        for (var a = 0; a < this.regKeys.length; a++) {
          var b = keyWidgetHash.get(this.regKeys[a]);
          if (isDefined(b)) {
            var c = b.indexOf(this);
            0 <= c && b.splice(c, 1);
          }
        }
      },
      setGeometry: function (a, b, c, d) {
        var f = this.w != c || this.h != d,
          e = this.x != a || this.y != b;
        this.x = a;
        this.y = b;
        this.w = 0 > c ? 0 : c;
        this.h = 0 > d ? 0 : d;
        if (f) this.onResize();
        if (e) this.onResize();
      },
      setPos: function (a, b) {
        this.setGeometry(a, b, this.w, this.h);
      },
      setSize: function (a, b) {
        this.setGeometry(this.x, this.y, a, b);
      },
      onResize: function () {},
      setAnchors: function (a, b, c, d) {
        this.anchors.left = isDefined(a) ? a : null;
        this.anchors.right = isDefined(c) ? c : null;
        this.anchors.top = isDefined(b) ? b : null;
        this.anchors.bottom = isDefined(d) ? d : null;
      },
      contains: function (a, b) {
        return this.enabled && this.visible ? this.x <= a && this.x + this.w > a && this.y <= b && this.y + this.h > b : !1;
      },
      calcAnchors: function () {
        var a = this.anchors,
          b = this.parent,
          c = b ? b.w : screenWidth,
          b = b ? b.h : screenHeight,
          d = this.x,
          f = this.y,
          e = this.w,
          g = this.h;
        null != a.left && null != a.right && (e = c - a.left - a.right);
        null != a.top && null != a.bottom && (g = b - a.top - a.bottom);
        null != a.left ? (d = (a.centerX ? ((c - e) / 2) | 0 : 0) + a.left) : null != a.right && (d = c - this.w - a.right);
        null != a.top ? (f = (a.centerY ? ((b - g) / 2) | 0 : 0) + a.top) : null != a.bottom && (f = b - this.h - a.bottom);
        this.setGeometry(d, f, e, g);
      },
      updateGeometry: function () {
        this.calcAnchors();
        var a = this.x,
          b = this.y,
          c = this.w,
          d = this.h;
        this.calcGeometry();
        if (a != this.x || b != this.y || c != this.w || d != this.h) this.onResize();
        a = 0;
        for (b = this.widgets.length; a < b; a++) this.widgets[a].updateGeometry();
      },
      calcGeometry: function () {},
      globalX: function () {
        return null == this.parent ? this.x : this.x - this.parent.offsetX + this.parent.globalX();
      },
      globalY: function () {
        return null == this.parent ? this.y : this.y - this.parent.offsetY + this.parent.globalY();
      },
      globalVisible: function () {
        return this.visible ? (null == this.parent ? this.visible : this.parent.globalVisible()) : !1;
      },
      globalEnabled: function () {
        return this.enabled ? (null == this.parent ? this.enabled : this.parent.globalEnabled()) : !1;
      },
      globalCACHED: function () {
        return this.CACHED_DRAWING ? !0 : this.parent ? this.parent.globalCACHED() : this.CACHED_DRAWING;
      },
      globalWidgetName: function () {
        return null == this.parent ? this.widgetName : this.parent.globalWidgetName() + "." + this.widgetName;
      },
      click: function () {
        this.getState && this.getState();
        this.onDown(0, 0, 0);
        this.onUp(0);
      },
      onDown: function (a, b) {
        dbg && log(this.name + ".onDown " + a + "x" + b);
      },
      onMove: function (a, b) {
        dbg && log(this.name + ".onMove " + a + "x" + b);
      },
      onUp: function () {
        dbg && log(this.name + ".onUp");
        this.pressPoint = [-1, -1];
      },
      onDbClick: function () {
        dbg && log(this.name + ".onDbClick");
      },
      onWheel: function (a) {
        dbg && log(this.globalWidgetName() + " " + a);
      },
      tick: function () {},
      show: function () {
        this.enabled || ((this.enabled = !0), this.onShow());
      },
      hide: function () {
        this.enabled && ((this.enabled = !1), this.onHide());
      },
      onShow: function () {},
      onHide: function () {},
      DRAW_UPDATE_CHECK: function () {
        return !0;
      },
      UPDATE_CACHE: function () {
        if ((this.CACHED_CANVAS = createCacheCanvas(this.w, this.h))) {
          this.CACHED_CANVAS_W = this.w;
          this.CACHED_CANVAS_H = this.h;
          ctx = this.CACHED_CANVAS_CTX = this.CACHED_CANVAS.getContext("2d");
          ctx.save();
          ctx.fastReset();
          ctx.translate(-this.offsetX, -this.offsetY);
          this.paint();
          for (var a = 0, b = this.widgets.length; a < b; a++) this.widgets[a].update(!0, !0);
          ctx.restore();
          ctx = ctx_orig;
          this.NEED_UPDATE = !1;
        }
      },
      update: function (a, b) {
        var c = a || !1;
        b = b || !1;
        var d = 0,
          f = 0;
        dbgWidgets && (d = window.performance ? window.performance.now() : Date.now());
        if (!(0 >= this.h || 0 >= this.w)) {
          if (b) {
            if (!this.enabled) return;
          } else if (!this.globalEnabled()) return;
          var f = this.globalX(),
            e = this.globalY();
          if (
            b ||
            !(
              f > screenWidth ||
              e > screenHeight ||
              0 > f + this.w ||
              0 > e + this.h ||
              (this.parent && (this.x - this.parent.offsetX > this.parent.w || 0 > this.x + this.w - this.parent.offsetX || this.y - this.parent.offsetY > this.parent.h || 0 > this.y + this.h - this.parent.offsetY))
            )
          ) {
            var g = 0,
              h = 0;
            if (this.CACHED_DRAWING) {
              (this.CACHED_CANVAS && this.CACHED_CANVAS_W == this.w && this.CACHED_CANVAS_H == this.h) ||
              ((this.CACHED_CANVAS = createCacheCanvas(this.w, this.h)),
                (this.CACHED_CANVAS_W = this.w),
                (this.CACHED_CANVAS_H = this.h),
                (this.CACHED_CANVAS_CTX = this.CACHED_CANVAS.getContext("2d")),
                (this.NEED_UPDATE = !0));
              if (this.NEED_UPDATE || this.DRAW_UPDATE_CHECK()) {
                ctx = this.CACHED_CANVAS_CTX;
                ctx.save();
                ctx.fastReset();
                ctx.translate(-this.offsetX, -this.offsetY);
                ctx.fillStyle = "#000000";
                ctx.fillRect(0, 0, this.w, this.h);
                this.paint();
                for (var k = 0, m = this.widgets.length; k < m; k++) this.widgets[k].DYNAMIC_WIDGET || this.widgets[k].update(!0, !0);
                ctx.restore();
                ctx = ctx_orig;
                this.NEED_UPDATE = !1;
              }
              ctx.save();
              c
                ? (ctx.translate(this.x | 0, this.y | 0), this.needClip && (ctx.beginPath(), ctx.rect(this.offsetX, this.offsetY, this.w, this.h), ctx.clip()))
                : ((function q(a) {
                  null != a && (q(a.parent), (g += a.x - a.offsetX), (h += a.y - a.offsetY), a.needClip && (ctx.beginPath(), ctx.rect(g + a.offsetX, h + a.offsetY, a.w, a.h), ctx.clip()));
                })(this),
                  ctx.translate(f | 0, e | 0));
              drawImage(this.CACHED_CANVAS, 0, 0);
              k = 0;
              for (m = this.widgets.length; k < m; k++) this.widgets[k].DYNAMIC_WIDGET && this.widgets[k].update(!0, !0);
              dbgWidgets &&
              ((f = window.performance ? window.performance.now() : Date.now()),
                (c = (1e3 * (f - d)) | 0),
              0 < c && ((f = this.h - 6), (ctx.textAlign = "left"), (ctx.font = "9px arial"), (ctx.textBaseline = "middle"), (ctx.fillStyle = "#FF0"), ctx.fillText(c, 1, f)));
            } else {
              ctx.save();
              ctx.fastReset();
              smoothing && ((ctx.imageSmoothingEnabled = !0), (ctx.mozImageSmoothingEnabled = !0));
              c
                ? (ctx.translate((this.x - this.offsetX) | 0, (this.y - this.offsetY) | 0), this.needClip && (ctx.beginPath(), ctx.rect(this.offsetX, this.offsetY, this.w, this.h), ctx.clip()))
                : ((function q(a) {
                  null != a && (q(a.parent), (g += a.x - a.offsetX), (h += a.y - a.offsetY), a.needClip && (ctx.beginPath(), ctx.rect(g + a.offsetX, h + a.offsetY, a.w, a.h), ctx.clip()));
                })(this),
                  ctx.translate((f - this.offsetX) | 0, (e - this.offsetY) | 0));
              !this.opaque && this.parent && this.parent.paintRect(this.x, this.y, this.w, this.h);
              this.paint();
              k = 0;
              for (m = this.widgets.length; k < m; k++) this.widgets[k].update(!0, !1);
              dbgWidgets &&
              ((f = window.performance ? window.performance.now() : Date.now()),
                (ctx.strokeStyle = "#FF0"),
                (ctx.lineWidth = 1),
                ctx.strokeRect(this.offsetX + 0.5, this.offsetY + 0.5, this.w - 1, this.h - 1),
                (c = (1e3 * (f - d)) | 0),
              0 < c && ((ctx.textAlign = "left"), (ctx.font = "9px arial"), (ctx.textBaseline = "middle"), (ctx.fillStyle = "#FF0"), (d = this.offsetX + 1), (f = this.offsetY + this.h - 6), ctx.fillText(c, d, f)));
            }
            ctx.restore();
          }
        }
      },
      paintRect: function (a, b, c, d) {
        ctx.save();
        ctx.beginPath();
        ctx.rect(0, 0, c, d);
        ctx.clip();
        ctx.translate(-a, -b);
        this.paint();
        ctx.restore();
      },
      paint: function () {
        ctx.fillStyle = "black";
        ctx.fillRect(0, 0, this.w, this.h);
      },
    });
    function geomAll() {
      for (var a = 0, b = widgets.length; a < b; a++) widgets[a].updateGeometry();
      a = 0;
      for (b = mWidgets.length; a < b; a++) mWidgets[a].updateGeometry();
    }
    function drawAll(a) {
      if (guiReady) {
        ctx.fillStyle = "#000000";
        ctx.fillRect(0, 0, screenWidth, screenHeight);
        for (var b = Date.now(), c = 0, d = widgets.length; c < d; c++) widgets[c].update();
        for (c = 0; c < mWidgets.length; c++) mWidgets[c].update();
        c = Date.now();
        log("DRAW ALL: " + (a || "?") + " IN " + (c - b) + "ms");
      }
    }
    function clearModals() {
      if (mWidgets.length) {
        log("clearModals()");
        for (var a = !1; mWidgets.length; ) (a = mWidgets.pop()), (a.enabled = !1), a.onDelete && a.onDelete(), a.onClose && a.onClose(), (a = !0);
        mWidgets.clear();
        a && drawAll("clearModals");
        return a;
      }
    }
    mousePressed = !1;
    mouseTargets = [];
    tHash = {};
    function eventStop(a) {
      a.preventDefault();
      return !1;
    }
    mouseID = 123456;
    function hMouse(a) {
      function b() {
        for (var a = 0; a < mWidgets.length; a++) {
          var b = mWidgets[a];
          if (b.contains(f, e)) return b.ignoreEvents || mouseTargets.push(b), (f -= b.x), (f += b.offsetX), (e -= b.y), (e += b.offsetY), c(b.widgets), !0;
        }
        return !1;
      }
      function c(a) {
        for (var b = 0, d = a.length; b < d; b++) {
          var g = a[b];
          if (g.contains(f, e)) {
            f -= g.x;
            f += g.offsetX;
            e -= g.y;
            e += g.offsetY;
            g.ignoreEvents || mouseTargets.push(g);
            c(g.widgets);
            break;
          }
        }
      }
      function d(a, b, c, e) {
        e = e || !1;
        for (var f = a.length - 1; 0 <= f; f--) {
          var g = a[f];
          if (g.contains(b, c, e)) {
            b -= g.x;
            c -= g.y;
            b += g.offsetX;
            c += g.offsetY;
            dbg && log(" * On widget: " + g.widgetName + " (" + b + "x" + c + ") BLOCK: " + g.blockEvent);
            if (d(a[f].widgets, b, c, e)) return !0;
            g.ignoreEvents || mouseTargets.push(g);
            return !1;
          }
        }
        return null;
      }
      dbg && mEvt(a);
      if (!a) return !1;
      var f = a.pageX,
        e = a.pageY,
        g = a.pageX,
        h = a.pageY;
      1 != gScaleEvt && ((f *= gScaleEvt), (e *= gScaleEvt), (g *= gScaleEvt), (h *= gScaleEvt));
      switch (a.type) {
        case "mousedown":
          if (1 != a.which) return !1;
          mWidgets.length ? b() || clearModals() : c(widgets);
          for (var k = 0, m = mouseTargets.length; k < m; k++) mouseTargets[k].onDown(g, h, mouseID);
          mousePressed = !0;
          break;
        case "mousemove":
          if (1 != a.which || !mousePressed) return !1;
          k = 0;
          for (m = mouseTargets.length; k < m; k++) if (((g = mouseTargets[k]), g.needMoveEvt)) g.onMove(f, e, mouseID);
          break;
        case "mouseup":
          if (1 != a.which) return !1;
          mousePressed = !1;
          k = 0;
          for (m = mouseTargets.length; k < m; k++) mouseTargets[k].onUp(mouseID);
          for (; mouseTargets.length; ) g = mouseTargets.pop();
          break;
        case "wheel":
          if (mousePressed) return;
          mWidgets.length ? (d(mWidgets, f, e, !0), 0 == mouseTargets.length && clearModals()) : d(widgets, f, e, !0);
          for (; mouseTargets.length; ) (g = mouseTargets.pop()), (k = (-1.2 * a.deltaY) | 0), g.onWheel && g.onWheel(k, f, e);
          break;
        case "mousewheel":
        case "DOMMouseScroll":
          for (0 < mWidgets.length ? (d(mWidgets, f, e, !0), 0 == mouseTargets.length && clearModals()) : d(widgets, f, e, !0); mouseTargets.length; )
            (g = mouseTargets.pop()), (k = a.detail ? -40 * a.detail : a.wheelDelta), g.onWheel && g.onWheel(k, f, e);
      }
      if (a.preventDefault) a.preventDefault();
      else return !1;
    }
    E_KEYS = {
      backspace: 8,
      tab: 9,
      enter: 13,
      shift: 16,
      ctrl: 17,
      alt: 18,
      pausebreak: 19,
      caps_lock: 20,
      escape: 27,
      page_up: 33,
      page_down: 34,
      end: 35,
      home: 36,
      left_arrow: 37,
      up_arrow: 38,
      right_arrow: 39,
      down_arrow: 40,
      insert: 45,
      del: 46,
      left_window_key: 91,
      right_window_key: 92,
      select_key: 93,
      num_0: 96,
      num_1: 97,
      num_2: 98,
      num_3: 99,
      num_4: 100,
      num_5: 101,
      num_6: 102,
      num_7: 103,
      num_8: 104,
      num_9: 105,
      num_mult: 106,
      num_plus: 107,
      num_minus: 109,
      num_del: 110,
      num_div: 111,
      f1: 112,
      f2: 113,
      f3: 114,
      f4: 115,
      f5: 116,
      f6: 117,
      f7: 118,
      f8: 119,
      f9: 120,
      f10: 121,
      f11: 122,
      f12: 123,
      num_lock: 144,
      scroll_lock: 145,
      semicolon: 186,
      equal_sign: 187,
      comma: 188,
      dash: 189,
      period: 190,
      forward_slash: 191,
      grave_accent: 192,
      open_bracket: 219,
      back_slash: 220,
      close_braket: 221,
      single_quote: 222,
    };
    function hKbd(a) {
      var b = a.which,
        c = String.fromCharCode(b);
      switch (a.type) {
        case "keydown":
          handleKey(c, b, a);
      }
    }
    touchCount = 0;
    function touchStart(a) {
      dbg && tEvt(a);
      a || (a = event);
      a.preventDefault();
      a = isDefined(a.changedTouches) ? a.changedTouches : [a];
      for (var b = 0; b < a.length; b++) {
        var c = function (a) {
            for (var b = 0, d = a.length; b < d; b++) {
              var f = a[b];
              if (f.contains(e, h)) {
                e -= f.x;
                e += f.offsetX;
                h -= f.y;
                h += f.offsetY;
                f.ignoreEvents || tHash[m].push(f);
                c(a[b].widgets);
                break;
              }
            }
          },
          d = function () {
            for (var a = 0; a < mWidgets.length; a++) {
              var b = mWidgets[a];
              if (b.contains(e, h)) return b.ignoreEvents || tHash[m].push(b), (e -= b.x), (e += b.offsetX), (h -= b.y), (h += b.offsetY), c(b.widgets), !0;
            }
            return !1;
          };
        touchCount++;
        var f = a[b],
          e = f.pageX,
          g = f.pageX,
          h = f.pageY,
          k = f.pageY,
          m = isDefined(f.identifier) ? f.identifier : isDefined(f.pointerId) ? f.pointerId : mouseID;
        1 != gScaleEvt && ((e *= gScaleEvt), (h *= gScaleEvt), (g *= gScaleEvt), (k *= gScaleEvt));
        if (!isDefined(tHash[m])) for (tHash[m] = [], 0 < mWidgets.length ? d() || clearModals() : c(widgets), d = 0, f = tHash[m].length; d < f; d++) tHash[m][d].onDown(g, k, m);
      }
    }
    function touchMove(a) {
      dbg && tEvt(a);
      a || (a = event);
      a.preventDefault();
      a = isDefined(a.changedTouches) ? a.changedTouches : [a];
      for (var b = 0; b < a.length; b++) {
        var c = a[b],
          d = isDefined(c.identifier) ? c.identifier : isDefined(c.pointerId) ? c.pointerId : mouseID,
          f = c.pageX,
          c = c.pageY;
        1 != gScaleEvt && ((f *= gScaleEvt), (c *= gScaleEvt));
        var e = tHash[d];
        if (isDefined(e))
          for (var g = 0, h = e.length; g < h; g++) {
            var k = e[g];
            if (k.needMoveEvt) k.onMove(f, c, d);
          }
      }
    }
    function touchEnd(a) {
      dbg && tEvt(a);
      a = isDefined(a.changedTouches) ? a.changedTouches : [a];
      for (var b = 0; b < a.length; b++) {
        var c = a[b],
          c = isDefined(c.identifier) ? c.identifier : isDefined(c.pointerId) ? c.pointerId : mouseID;
        if (isDefined(tHash[c])) {
          for (var d = tHash[c], f = 0, e = d.length; f < e; f++) d[f].onUp(c);
          for (; d.length; ) d.pop();
          delete tHash[c];
        }
        touchCount--;
      }
    }
    function isNear(a, b, c) {
      return Math.abs(a - b) < (c || 0.001);
    }
    function quantize(a, b) {
      return a - (a % b);
    }
    function manualSlice(a, b, c) {
      c -= b;
      for (var d = Array(c), f = 0; f < c; ++b, ++f) d[f] = a[b];
      return d;
    }
    function fastIndexOf(a, b) {
      for (var c = 0, d = a.length; c < d; c++) if (b === a[c]) return c;
      return -1;
    }
    function checkBit(a, b) {
      return 0 > b || 31 < b ? null : 0 != (a & (1 << b));
    }
    function copyObject(a) {
      return isArray(a) ? a.slice() : isObject(a) ? JSON.parse(JSON.stringify(a)) : a;
    }
    function isDefined(a) {
      return "undefined" != typeof a;
    }
    function isObject(a) {
      return "object" === typeof a;
    }
    function isImage(a) {
      return a instanceof HTMLImageElement;
    }
    function isArray(a) {
      return Array.isArray(a);
    }
    function isString(a) {
      return "string" === typeof a;
    }
    function objKeyByValue(a, b) {
      for (var c in a) if (a.hasOwnProperty(c) && a[c] === b) return c;
      return "?";
    }
    function d2h(a) {
      return (+a).toString(16).toUpperCase();
    }
    Array.prototype.contains = function (a) {
      return -1 != this.indexOf(a);
    };
    Array.prototype.deleteItem = function (a) {
      a = this.indexOf(a);
      -1 != a && this.splice(a, 1);
    };
    Array.prototype.avg = function () {
      for (var a = 0, b = 0, c = this.length; b < c; b++) a += this[b];
      return a / this.length;
    };
    Array.prototype.equals = function (a) {
      if (!a || this.length != a.length) return !1;
      for (var b = 0, c = this.length; b < c; b++)
        if (this[b] instanceof Array && a[b] instanceof Array) {
          if (!this[b].equals(a[b])) return !1;
        } else if (this[b] != a[b]) return !1;
      return !0;
    };
    Array.prototype.move = function (a, b) {
      this.splice(b, 0, this.splice(a, 1)[0]);
    };
    Object.defineProperty(Array.prototype, "contains", { enumerable: !1 });
    Object.defineProperty(Array.prototype, "deleteItem", { enumerable: !1 });
    Object.defineProperty(Array.prototype, "avg", { enumerable: !1 });
    Object.defineProperty(Array.prototype, "equals", { enumerable: !1 });
    Object.defineProperty(Array.prototype, "move", { enumerable: !1 });
    String.prototype.contains = function (a) {
      return -1 != this.indexOf(a);
    };
    String.prototype.format = function () {
      for (var a = this, b = 0; b < arguments.length; b++) a = a.replace(new RegExp("\\{" + b + "\\}", "gi"), arguments[b]);
      return a;
    };
    String.prototype.replaceAt = function (a, b, c) {
      var d = 0;
      return this.replace(new RegExp(a, "g"), function (a) {
        d++;
        return d === c ? b : a;
      });
    };
    Object.defineProperty(String.prototype, "contains", { enumerable: !1 });
    Object.defineProperty(String.prototype, "format", { enumerable: !1 });
    Object.defineProperty(String.prototype, "replaceAt", { enumerable: !1 });
    function randomOf(a) {
      return bound(Math.floor(Math.random() * (a + 1)), 0, a);
    }
    function testRandom(a, b) {
      for (var c = [], d = 0; d < a + 1; d++) c.push(0);
      for (d = 0; d < b; d++) c[randomOf(a)]++;
      for (d = 0; d < a + 1; d++) log(d + ": " + c[d]);
    }
    function objSize(a) {
      var b = 0,
        c;
      for (c in a) a.hasOwnProperty(c) && b++;
      return b;
    }
    function mEvt(a) {
      a || (a = event);
      var b = a.pageX,
        c = a.pageY;
      ctx.clearRect(0, 0, 300, 26);
      ctx.fillStyle = "#880000";
      ctx.font = "24px Arial";
      ctx.fillText(a.type + ": " + b + "x" + c + " " + (1 << a.button), 0, 22);
    }
    function tEvt(a) {
      log(a.type + " " + (a.identifier || a.pointerId || "?"));
      log(a);
      ctx.clearRect(0, 0, screenWidth - 200, 80);
      var b = isDefined(a.changedTouches) ? a.changedTouches : [a];
      a = a.type + " ";
      a += b.length + ": ";
      for (var c = 0; c < b.length; c++) {
        var d = b[c],
          f = d.pageX,
          e = d.pageY,
          d = isDefined(d.identifier) ? d.identifier : isDefined(d.pointerId) ? d.pointerId : "XXX";
        a += "id:" + d + " x:" + precision(f, 2) + " y:" + precision(e, 2) + ";  ";
      }
      b = "Touches: " + objSize(tHash);
      ctx.fillStyle = "#000088";
      ctx.font = "30px Arial";
      ctx.fillText(a, 5, 29);
      ctx.fillText(b, 5, 68);
    }
    function logObject(a) {
      log("==========================================================");
      for (var b in a) "function" == typeof a[b] ? log(b + ": function()") : log(b + ": " + a[b]);
      log("==========================================================");
    }
    function log2(a) {
      DEPLOY || console.debug("[" + arguments.callee.caller.name + "] " + a);
    }
    function log(a) {
      DEPLOY || console.log(a);
    }
    function bound(a, b, c) {
      return a < b ? b : a > c ? c : a;
    }
    function precision(a, b) {
      if (0 == b) return a | 0;
      if (1 == b) return ((10 * a) | 0) / 10;
      if (2 == b) return ((100 * a) | 0) / 100;
      var c = Math.pow(10, b);
      return ((a * c) | 0) / c;
    }
    function isInCircle(a, b, c, d, f) {
      return Math.sqrt((a - d) * (a - d) + (b - f) * (b - f)) < c;
    }
    function isInRect(a, b, c, d, f, e) {
      return a <= f && a + c > f && b <= e && b + d > e;
    }
    function padLeft(a, b, c) {
      return Array(b - String(a).length + 1).join(c || "0") + a;
    }
    var Util = {
        getTime: function () {
          return window.performance ? window.performance.now() : Date.now();
        },
        filledArray: function (a, b) {
          var c = Array(a);
          b = b || 0;
          for (var d = 0; d < a; ++d) c[d] = b;
          return c;
        },
        download: function (a, b) {
          b = b || "file.json";
          var c = JSON.stringify(a),
            c = new Blob([c], { type: "data:application/json" });
          if ("undefined" !== typeof navigator && navigator.msSaveOrOpenBlob) return navigator.msSaveOrOpenBlob(c, b);
          var d = document.createElement("a");
          d.href = URL.createObjectURL(c);
          d.download = b;
          d.click();
        },
      },
      CANVASES_CREATED = 0;
    function createCacheCanvas(a, b) {
      if (0 >= a || 0 >= b) return null;
      CANVASES_CREATED++;
      var c = document.createElement("canvas"),
        d = c.getContext("2d");
      c.w = function () {
        return isRetina ? (this.width / 2) | 0 : this.width;
      };
      c.h = function () {
        return isRetina ? (this.height / 2) | 0 : this.height;
      };
      isRetina ? ((c.width = 2 * a), (c.height = 2 * b), d.scale(2, 2)) : ((c.width = a), (c.height = b));
      return c;
    }
    Element.prototype.w = function () {
      return isRetina ? (this.width / 2) | 0 : this.width;
    };
    Element.prototype.h = function () {
      return isRetina ? (this.height / 2) | 0 : this.height;
    };
    drawImageCtx = drawImage = null;
    function formatButtonText(a, b, c) {
      if (!a) return "";
      b = b || " ";
      if (10 > a.length || !a.contains(b)) return a;
      c = c || "\n";
      var d = (a.match(new RegExp(b, "g")) || []).length;
      if (!d) return a;
      var f = Math.ceil(d / 2);
      2 == d && 4 > a.indexOf(b) && f++;
      return a.replaceAt(b, c, f);
    }
    function textWidth(a) {
      return ctx.measureText(a).width;
    }
    function drawText(a, b, c, d) {
      if (isDefined(a) && null != a && 0 != a.length) {
        isDefined(d) &&
        (isDefined(d.color) && (ctx.fillStyle = d.color),
        isDefined(d.font) && (ctx.font = d.font),
        isDefined(d.align) && (ctx.textAlign = d.align),
        isDefined(d.baseLine) && (ctx.textBaseline = d.baseLine),
        isDefined(d.valign) && (ctx.textBaseline = d.valign),
        isDefined(d.sColor) && (ctx.shadowColor = d.sColor),
        isDefined(d.sBlur) && (ctx.shadowBlur = 0),
        isDefined(d.sX) && (ctx.shadowOffsetX = d.sX),
        isDefined(d.sY) && (ctx.shadowOffsetY = d.sY));
        a = a.split("<br>");
        var f = isDefined(d) && isDefined(d.max) ? d.max : 999999;
        d = isDefined(d) && isDefined(d.dy) ? d.dy : 20;
        for (var e = 0; e < a.length; e++) {
          var g = a[e];
          g.startsWith("#") && ((ctx.fillStyle = g.slice(0, 7)), (g = g.slice(7)));
          ctx.fillText(g, b | 0, c | 0, f);
          c += d;
        }
      }
    }
    function drawImageScale(a, b, c, d) {
      ctx.drawImage(a, b, c, (a.w() * d) | 0, (a.h() * d) | 0);
    }
    function drawImageScaleCtx(a, b, c, d, f) {
      f.drawImage(a, b, c, (a.w() * d) | 0, (a.h() * d) | 0);
    }
    function createPattern(a, b) {
      if (NO_DRAWIMAGES) return "#0f0";
      if (isRetina || CHEETAH_TEXTURE) {
        var c = document.createElement("canvas"),
          d = c.getContext("2d"),
          f = (a.w() | 0) + 1,
          e = a.h() | 0;
        c.width = f;
        c.height = e;
        isDefined(a.img) ? d.drawImage(res[a.img], a.x, a.y, a.cw, a.ch, a.dx, a.dy, a.cw, a.ch) : d.drawImage(a, 0, 0, f, e);
        return ctx.createPattern(c, b);
      }
      return ctx.createPattern(a, b);
    }
    function fillVertPattern(a, b, c) {
      for (var d = 0, f = a.h(); d < b; ) drawImage(a, isDefined(c) ? c : 0, d), (d += f);
    }
    function fillVertPatternCtx(a, b, c) {
      for (var d = 0, f = a.h(); d < b; ) drawImageCtx(a, 0, d, c), (d += f);
    }
    function fillHorPattern(a, b) {
      for (var c = 0, d = a.w(); c < b; ) drawImage(a, c, 0), (c += d);
    }
    function fillHorPatternCtx(a, b, c) {
      for (var d = 0, f = a.w(); d < b; ) drawImageCtx(a, d, 0, c), (d += f);
    }
    CanvasRenderingContext2D.prototype.roundRect = function (a, b, c, d, f) {
      0 > c && ((a += c), (c *= -1));
      0 > d && ((b += d), (d *= -1));
      c < 2 * f && (f = c / 2);
      d < 2 * f && (f = d / 2);
      this.beginPath();
      this.moveTo(a + f, b);
      this.arcTo(a + c, b, a + c, b + d, f);
      this.arcTo(a + c, b + d, a, b + d, f);
      this.arcTo(a, b + d, a, b, f);
      this.arcTo(a, b, a + c, b, f);
      this.closePath();
    };
    CanvasRenderingContext2D.prototype.fillRoundRect = function (a, b, c, d, f) {
      0 > c && ((a += c), (c *= -1));
      0 > d && ((b += d), (d *= -1));
      c < 2 * f && (f = c / 2);
      d < 2 * f && (f = d / 2);
      this.beginPath();
      this.moveTo(a + f, b);
      this.arcTo(a + c, b, a + c, b + d, f);
      this.arcTo(a + c, b + d, a, b + d, f);
      this.arcTo(a, b + d, a, b, f);
      this.arcTo(a, b, a + c, b, f);
      this.closePath();
      this.fill();
    };
    CanvasRenderingContext2D.prototype.fillTopRoundRect = function (a, b, c, d, f) {
      0 > c && ((a += c), (c *= -1));
      0 > d && ((b += d), (d *= -1));
      c < 2 * f && (f = c / 2);
      d < 2 * f && (f = d / 2);
      this.beginPath();
      this.moveTo(a + f, b);
      this.arcTo(a + c, b, a + c, b + d, f);
      this.lineTo(a + c, b + d);
      this.lineTo(a, b + d);
      this.arcTo(a, b, a + c, b, f);
      this.closePath();
      this.fill();
    };
    CanvasRenderingContext2D.prototype.fillBotRoundRect = function (a, b, c, d, f) {
      0 > c && ((a += c), (c *= -1));
      0 > d && ((b += d), (d *= -1));
      c < 2 * f && (f = c / 2);
      d < 2 * f && (f = d / 2);
      this.beginPath();
      this.moveTo(a, b);
      this.lineTo(a + c, b);
      this.arcTo(a + c, b + d, a, b + d, f);
      this.arcTo(a, b + d, a, b, f);
      this.closePath();
      this.fill();
    };
    CanvasRenderingContext2D.prototype.fillRightRoundRect = function (a, b, c, d, f) {
      0 > c && ((a += c), (c *= -1));
      0 > d && ((b += d), (d *= -1));
      c < 2 * f && (f = c / 2);
      d < 2 * f && (f = d / 2);
      this.beginPath();
      this.moveTo(a, b);
      this.arcTo(a + c, b, a + c, b + d, f);
      this.arcTo(a + c, b + d, a, b + d, f);
      this.lineTo(a, b + d);
      this.closePath();
      this.fill();
    };
    CanvasRenderingContext2D.prototype.fillLeftRoundRect = function (a, b, c, d, f) {
      0 > c && ((a += c), (c *= -1));
      0 > d && ((b += d), (d *= -1));
      c < 2 * f && (f = c / 2);
      d < 2 * f && (f = d / 2);
      this.beginPath();
      this.moveTo(a + f, b);
      this.moveTo(a + c, b);
      this.lineTo(a + c, b + d);
      this.arcTo(a, b + d, a, b, f);
      this.arcTo(a, b, a + c, b, f);
      this.closePath();
      this.fill();
    };
    CanvasRenderingContext2D.prototype.fillTriangle = function (a, b, c, d) {
      this.beginPath();
      this.moveTo(a, b);
      this.lineTo(a + 2 * c, b);
      this.lineTo(a + c, b + d);
      this.closePath();
      this.fill();
    };
    CanvasRenderingContext2D.prototype.fillTriangle2 = function (a, b, c, d, f, e) {
      this.beginPath();
      this.moveTo(a, b);
      this.lineTo(c, d);
      this.lineTo(f, e);
      this.closePath();
      this.fill();
    };
    CanvasRenderingContext2D.prototype.triangle2 = function (a, b, c, d, f, e) {
      this.moveTo(a, b);
      this.lineTo(c, d);
      this.lineTo(f, e);
      this.lineTo(a, b);
    };
    CanvasRenderingContext2D.prototype.circle = function (a, b, c) {
      this.beginPath();
      this.arc(a, b, c, 0, 2 * Math.PI, !1);
    };
    CanvasRenderingContext2D.prototype.fillCircle = function (a, b, c) {
      this.beginPath();
      this.arc(a, b, c, 0, 2 * Math.PI, !1);
      this.fill();
    };
    CanvasRenderingContext2D.prototype.setShadow = function (a, b, c, d) {
      this.shadowColor = "rgba(0, 0, 0, 0)";
    };
    CanvasRenderingContext2D.prototype.dashedLine = function (a, b, c, d, f) {
      void 0 == f && (f = 2);
      this.moveTo(a, b);
      var e = c - a,
        g = d - b;
      f = Math.floor(Math.sqrt(e * e + g * g) / f);
      for (var e = e / f, g = g / f, h = 0; h++ < f; ) (a += e), (b += g), this[0 == h % 2 ? "moveTo" : "lineTo"](a, b);
      this[0 == h % 2 ? "moveTo" : "lineTo"](c, d);
    };
    CanvasRenderingContext2D.prototype.resetSettings = function () {
      this.globalAlpha = 1;
      this.shadowColor = "rgba(0, 0, 0, 0)";
      this.textBaseline = "alphabetic";
    };
    CanvasRenderingContext2D.prototype.fastReset = function () {
      1 != this.globalAlpha && (this.globalAlpha = 1);
      "rgba(0, 0, 0, 0)" != this.shadowColor && (this.shadowColor = "rgba(0, 0, 0, 0)");
      "alphabetic" != this.textBaseline && (this.textBaseline = "alphabetic");
    };
    CanvasRenderingContext2D.prototype.drawText = function (a, b, c, d, f) {
      if (a) {
        a = "" + a;
        var e = 999999,
          g = 18,
          h = null,
          k = 0,
          m = 0;
        f = f || "\n";
        isDefined(d) &&
        (isObject(d)
          ? (d.color && (this.fillStyle = d.color),
          d.font && (this.font = d.font),
          d.align && (this.textAlign = d.align),
          d.textBaseline && (this.textBaseline = d.textBaseline),
          d.valign && (this.textBaseline = d.valign),
            settings.disableShadows
              ? (isDefined(d.sColor) && (h = d.sColor), isDefined(d.sX) && (k = d.sX), isDefined(d.sY) && (m = d.sY))
              : (isDefined(d.sColor) && (this.shadowColor = d.sColor), isDefined(d.sBlur) && (this.shadowBlur = d.sBlur), isDefined(d.sX) && (this.shadowOffsetX = d.sX), isDefined(d.sY) && (this.shadowOffsetY = d.sY)),
          d.shadow && ((h = d.shadow[0]), (k = d.shadow[2]), (m = d.shadow[3])),
          isDefined(d.max) && (e = d.max),
          isDefined(d.dy) && (g = d.dy))
          : (e = d));
        if (a.contains(f))
          for (a = a.split(f), b |= 0, c |= 0, "middle" == this.textBaseline && (c -= 0.5 * (a.length - 1) * g), f = 0; f < a.length; f++) {
            var p = a[f];
            p.startsWith("#") && ((this.fillStyle = p.slice(0, 7)), (p = p.slice(7)));
            h && ((d = this.fillStyle), (this.fillStyle = h), this.fillText(p, b + k, c + m, e), (this.fillStyle = d));
            this.fillText(p, b, c, e);
            c += g;
          }
        else h && ((d = this.fillStyle), (this.fillStyle = h), this.fillText(a, b + k, c + m, e), (this.fillStyle = d)), this.fillText(a, b, c, e);
      }
    };
    CanvasRenderingContext2D.prototype.drawLine = function (a, b, c, d) {
      this.beginPath();
      this.lineWidth % 2 ? (this.moveTo(a + 0.5, b + 0.5), this.lineTo(c + 0.5, d + 0.5)) : (this.moveTo(a, b), this.lineTo(c, d));
      this.stroke();
    };
    function hexToRGBA(a, b) {
      if (!a || "#" != a[0]) return a;
      a = a.replace("#", "");
      var c = bound(parseInt(a.substring(0, 2), 16), 0, 255),
        d = bound(parseInt(a.substring(2, 4), 16), 0, 255),
        f = bound(parseInt(a.substring(4, 6), 16), 0, 255),
        e = bound(b, 0, 1);
      return "rgba(" + c + "," + d + "," + f + "," + e + ")";
    }
    function LightenDarkenColor(a, b) {
      if (!a || "#" != a[0]) return a;
      4 == a.length && (a = a[0] + a[1] + a[1] + a[2] + a[2] + a[3] + a[3]);
      b = b || 0;
      a = a.substr(1);
      a = parseInt(a, 16);
      return "#" + (((a & 255) + b) | ((((a >> 8) & 255) + b) << 8) | (((a >> 16) + b) << 16)).toString(16);
    }
    popupTimer = null;
    function showPopupMsg(a, b, c) {
      var d = $("MSG_BODY");
      d.innerHTML = a;
      d.style.fontSize = isDefined(c) ? "{0}mm".format(c) : "10mm";
      $("MSG_CONTAINER").style.opacity = "1";
      clearTimeout(popupTimer);
      popupTimer = setTimeout(hidePopupMsg, b || 2400);
    }
    function hidePopupMsg() {
      $("MSG_CONTAINER").style.opacity = "0";
    }
    editBox = null;
    function initEditBox() {
      editBox = $("eb");
      editBox.valueFunc = function () {
        log("!EDITBOX EMPTY VALUE FUNC! " + editBox.value);
      };
    }
    function showEditBox(a, b, c, d) {
      isSmall ? ((editBox.style.left = ((a / 2) | 0) + "px"), (editBox.style.top = ((b / 2) | 0) + "px")) : ((editBox.style.left = (a | 0) + "px"), (editBox.style.top = (b | 0) + "px"));
      editBox.placeholder = "Ch. name";
      isDefined(c) ? (editBox.value = c) : (editBox.value = "");
      isDefined(d) ? (editBox.maxLength = d) : (editBox.maxLength = 20);
      editBox.onblur = function () {
        editBox.style.display = "none";
        editBox.valueFunc();
      };
      editBox.onkeydown = function (a) {
        13 == a.keyCode && (hideKeyboard(), (editBox.style.display = "none"), editBox.valueFunc());
        27 == a.keyCode && ((editBox.valueFunc = function () {}), hideKeyboard(), (editBox.style.display = "none"));
        log(a.keyCode);
        log(a.ctrlKey);
        65 == a.keyCode && a.ctrlKey && (log("!"), a.target.select());
      };
      editBox.style.display = "block";
      editBox.focus();
      editBox.setSelectionRange(0, 9999);
    }
    editBox2 = editLabel = editContainer = dimBack = null;
    function initEditBox2() {
      dimBack = $("DIM_CAPTURE");
      dimBack.onclick = hideAllBox;
      editContainer = $("EDIT_CONTAINER");
      editLabel = $("EDIT_LABEL");
      editBox2 = $("eb2");
      editOk = $("EDIT_OK");
      editOk.valueFunc = function () {
        log(editBox2.value);
      };
      editOk.value = lang.OK;
      editCancel = $("EDIT_CANCEL");
      editCancel.valueFunc = function () {
        log("CANCEL");
      };
      editCancel.value = lang.CANCEL;
      editBox2.onkeydown = function (a) {
        13 == a.keyCode && (keyboard && keyboard.saveCaret(), (ignoreClearModal = !0), editOk.onclick && editOk.onclick(), editBox2.blur(), keyboard && keyboard.close());
        27 == a.keyCode && (editCancel.onclick(), (editOk.valueFunc = function () {}), hideEditBox2());
        65 == a.keyCode && a.ctrlKey && a.target.select();
      };
    }
    function showEditBox2(a, b, c) {
      $("DELAY_TIME").hide();
      $("REN_NAV").hide();
      editLabel.innerHTML = a || "";
      editContainer.style.display = "block";
      dimBack.style.display = "block";
      isDefined(b) && null != b ? (editBox2.value = b) : (editBox2.value = "");
      editBox2.maxLength = c || 20;
      editOk.onclick = function () {
        keyboard && keyboard.saveCaret();
        editOk.valueFunc();
        hideEditBox2();
        keyboard && keyboard.close();
      };
      editCancel.onclick = function () {
        editCancel.valueFunc();
        hideEditBox2();
        keyboard && keyboard.close();
      };
      editBox2.setSelectionRange(0, 9999);
      editBox2.focus();
    }
    function hideEditBox2() {
      hideKeyboard();
      "block" != confContainer.style.display && (dimBack.style.display = "none");
      editContainer.style.display = "none";
    }
    function hideAllBox() {
      hideKeyboard();
      dimBack.style.display = "none";
      editContainer.style.display = "none";
      confContainer.style.display = "none";
    }
    function hideKeyboard() {
      document.activeElement.blur();
    }
    function hideKeyboard2() {
      setTimeout(function () {
        var a = document.createElement("input");
        a.setAttribute("type", "text");
        a.setAttribute("style", "position:absolute; top: 0px; opacity: 0; -webkit-user-modify: read-write-plaintext-only; left:0px;");
        document.body.appendChild(a);
        a.onfocus = function () {
          setTimeout(function () {
            a.setAttribute("style", "display:none;");
            setTimeout(function () {
              document.body.removeChild(a);
              document.body.focus();
            }, 14);
          }, 200);
        };
        a.focus();
      }, 50);
    }
    confCancel = confOk = confLabel = confContainer = null;
    function initConfBox() {
      confContainer = $("CONF_CONTAINER");
      confLabel = $("CONF_LABEL");
      confOk = $("CONF_OK");
      confOk.valueFunc = function () {
        log("OK");
      };
      confOk.value = lang.OK;
      confCancel = $("CONF_CANCEL");
      confCancel.valueFunc = function () {
        log("CANCEL");
      };
      confCancel.value = lang.CANCEL;
    }
    function showConfBox(a) {
      dimBack.style.display = "block";
      confLabel.innerHTML = a;
      confContainer.style.display = "block";
      confOk.onclick = function () {
        confOk.valueFunc();
        hideConfBox();
      };
      confCancel.onclick = function () {
        confCancel.valueFunc();
        hideConfBox();
      };
    }
    function hideConfBox() {
      "block" != editContainer.style.display && (dimBack.style.display = "none");
      confContainer.style.display = "none";
    }
    var md5 = function (a) {
      function b(a, b) {
        var c, d, e, f, g;
        e = a & 2147483648;
        f = b & 2147483648;
        c = a & 1073741824;
        d = b & 1073741824;
        g = (a & 1073741823) + (b & 1073741823);
        return c & d ? g ^ 2147483648 ^ e ^ f : c | d ? (g & 1073741824 ? g ^ 3221225472 ^ e ^ f : g ^ 1073741824 ^ e ^ f) : g ^ e ^ f;
      }
      function c(a, c, d, e, f, g, h) {
        a = b(a, b(b((c & d) | (~c & e), f), h));
        return b((a << g) | (a >>> (32 - g)), c);
      }
      function d(a, c, d, e, f, g, h) {
        a = b(a, b(b((c & e) | (d & ~e), f), h));
        return b((a << g) | (a >>> (32 - g)), c);
      }
      function f(a, c, d, e, f, g, h) {
        a = b(a, b(b(c ^ d ^ e, f), h));
        return b((a << g) | (a >>> (32 - g)), c);
      }
      function e(a, c, d, e, f, g, h) {
        a = b(a, b(b(d ^ (c | ~e), f), h));
        return b((a << g) | (a >>> (32 - g)), c);
      }
      function g(a) {
        var b = "",
          c,
          d;
        for (d = 0; 3 >= d; d++) (c = (a >>> (8 * d)) & 255), (c = "0" + c.toString(16)), (b += c.substr(c.length - 2, 2));
        return b;
      }
      var h = [],
        k,
        m,
        p,
        q,
        r,
        n,
        u,
        v;
      a = (function (a) {
        a = a.replace(/\r\n/g, "\n");
        for (var b = "", c = 0; c < a.length; c++) {
          var d = a.charCodeAt(c);
          128 > d
            ? (b += String.fromCharCode(d))
            : (127 < d && 2048 > d ? (b += String.fromCharCode((d >> 6) | 192)) : ((b += String.fromCharCode((d >> 12) | 224)), (b += String.fromCharCode(((d >> 6) & 63) | 128))), (b += String.fromCharCode((d & 63) | 128)));
        }
        return b;
      })(a);
      h = (function (a) {
        var b,
          c = a.length;
        b = c + 8;
        for (var d = 16 * ((b - (b % 64)) / 64 + 1), e = Array(d - 1), f, g = 0; g < c; ) (b = (g - (g % 4)) / 4), (f = (g % 4) * 8), (e[b] |= a.charCodeAt(g) << f), g++;
        b = (g - (g % 4)) / 4;
        e[b] |= 128 << ((g % 4) * 8);
        e[d - 2] = c << 3;
        e[d - 1] = c >>> 29;
        return e;
      })(a);
      r = 1732584193;
      n = 4023233417;
      u = 2562383102;
      v = 271733878;
      for (a = 0; a < h.length; a += 16)
        (k = r),
          (m = n),
          (p = u),
          (q = v),
          (r = c(r, n, u, v, h[a + 0], 7, 3614090360)),
          (v = c(v, r, n, u, h[a + 1], 12, 3905402710)),
          (u = c(u, v, r, n, h[a + 2], 17, 606105819)),
          (n = c(n, u, v, r, h[a + 3], 22, 3250441966)),
          (r = c(r, n, u, v, h[a + 4], 7, 4118548399)),
          (v = c(v, r, n, u, h[a + 5], 12, 1200080426)),
          (u = c(u, v, r, n, h[a + 6], 17, 2821735955)),
          (n = c(n, u, v, r, h[a + 7], 22, 4249261313)),
          (r = c(r, n, u, v, h[a + 8], 7, 1770035416)),
          (v = c(v, r, n, u, h[a + 9], 12, 2336552879)),
          (u = c(u, v, r, n, h[a + 10], 17, 4294925233)),
          (n = c(n, u, v, r, h[a + 11], 22, 2304563134)),
          (r = c(r, n, u, v, h[a + 12], 7, 1804603682)),
          (v = c(v, r, n, u, h[a + 13], 12, 4254626195)),
          (u = c(u, v, r, n, h[a + 14], 17, 2792965006)),
          (n = c(n, u, v, r, h[a + 15], 22, 1236535329)),
          (r = d(r, n, u, v, h[a + 1], 5, 4129170786)),
          (v = d(v, r, n, u, h[a + 6], 9, 3225465664)),
          (u = d(u, v, r, n, h[a + 11], 14, 643717713)),
          (n = d(n, u, v, r, h[a + 0], 20, 3921069994)),
          (r = d(r, n, u, v, h[a + 5], 5, 3593408605)),
          (v = d(v, r, n, u, h[a + 10], 9, 38016083)),
          (u = d(u, v, r, n, h[a + 15], 14, 3634488961)),
          (n = d(n, u, v, r, h[a + 4], 20, 3889429448)),
          (r = d(r, n, u, v, h[a + 9], 5, 568446438)),
          (v = d(v, r, n, u, h[a + 14], 9, 3275163606)),
          (u = d(u, v, r, n, h[a + 3], 14, 4107603335)),
          (n = d(n, u, v, r, h[a + 8], 20, 1163531501)),
          (r = d(r, n, u, v, h[a + 13], 5, 2850285829)),
          (v = d(v, r, n, u, h[a + 2], 9, 4243563512)),
          (u = d(u, v, r, n, h[a + 7], 14, 1735328473)),
          (n = d(n, u, v, r, h[a + 12], 20, 2368359562)),
          (r = f(r, n, u, v, h[a + 5], 4, 4294588738)),
          (v = f(v, r, n, u, h[a + 8], 11, 2272392833)),
          (u = f(u, v, r, n, h[a + 11], 16, 1839030562)),
          (n = f(n, u, v, r, h[a + 14], 23, 4259657740)),
          (r = f(r, n, u, v, h[a + 1], 4, 2763975236)),
          (v = f(v, r, n, u, h[a + 4], 11, 1272893353)),
          (u = f(u, v, r, n, h[a + 7], 16, 4139469664)),
          (n = f(n, u, v, r, h[a + 10], 23, 3200236656)),
          (r = f(r, n, u, v, h[a + 13], 4, 681279174)),
          (v = f(v, r, n, u, h[a + 0], 11, 3936430074)),
          (u = f(u, v, r, n, h[a + 3], 16, 3572445317)),
          (n = f(n, u, v, r, h[a + 6], 23, 76029189)),
          (r = f(r, n, u, v, h[a + 9], 4, 3654602809)),
          (v = f(v, r, n, u, h[a + 12], 11, 3873151461)),
          (u = f(u, v, r, n, h[a + 15], 16, 530742520)),
          (n = f(n, u, v, r, h[a + 2], 23, 3299628645)),
          (r = e(r, n, u, v, h[a + 0], 6, 4096336452)),
          (v = e(v, r, n, u, h[a + 7], 10, 1126891415)),
          (u = e(u, v, r, n, h[a + 14], 15, 2878612391)),
          (n = e(n, u, v, r, h[a + 5], 21, 4237533241)),
          (r = e(r, n, u, v, h[a + 12], 6, 1700485571)),
          (v = e(v, r, n, u, h[a + 3], 10, 2399980690)),
          (u = e(u, v, r, n, h[a + 10], 15, 4293915773)),
          (n = e(n, u, v, r, h[a + 1], 21, 2240044497)),
          (r = e(r, n, u, v, h[a + 8], 6, 1873313359)),
          (v = e(v, r, n, u, h[a + 15], 10, 4264355552)),
          (u = e(u, v, r, n, h[a + 6], 15, 2734768916)),
          (n = e(n, u, v, r, h[a + 13], 21, 1309151649)),
          (r = e(r, n, u, v, h[a + 4], 6, 4149444226)),
          (v = e(v, r, n, u, h[a + 11], 10, 3174756917)),
          (u = e(u, v, r, n, h[a + 2], 15, 718787259)),
          (n = e(n, u, v, r, h[a + 9], 21, 3951481745)),
          (r = b(r, k)),
          (n = b(n, m)),
          (u = b(u, p)),
          (v = b(v, q));
      return (g(r) + g(n) + g(u) + g(v)).toLowerCase();
    };
    function qsTr(a) {
      return a;
    }
    langBase = {};
    langBase.en = {
      lang: "ENGLISH",
      APPLY: qsTr("APPLY"),
      ASSIGN_SUB_GROUP: qsTr("ASSIGN SUB GROUP {0}"),
      ATTACK: qsTr("ATTACK"),
      AUX: qsTr("AUX"),
      AUX_EQ: qsTr("AUX EQ"),
      AUX_MASTERS: qsTr("AUX MASTERS"),
      AUX_MASTER_LEVELS: qsTr("AUX MASTER LEVELS"),
      AUX_SENDS_FOR: qsTr("AUX SENDS: {0}"),
      MTX_SENDS_FOR: qsTr("MTX SENDS: {0}"),
      BANKS: qsTr("BANKS"),
      BASS_GAIN: qsTr("BASS GAIN"),
      BYPASS: qsTr("BYPASS"),
      CH: qsTr("CH"),
      CHANNEL_SAFES: qsTr("CHANNEL SAFES"),
      FX_SENDS_X: qsTr("FX SENDS: {0}"),
      CHANNEL_PRESETS: qsTr("CHANNEL PRESETS"),
      CHORUS: qsTr("CHORUS"),
      CHORUS_FX_GLOBAL: qsTr("CHORUS FX (GLOBAL)"),
      CLEAR_SOLO: qsTr("CLEAR SOLO"),
      CONFIG: qsTr("CONFIG"),
      CONFIGURATION: qsTr("CONFIGURATION"),
      CONNECTED_DEVICE_NAME: qsTr("CONNECTED DEVICE NAME"),
      COPY_SETTINGS: qsTr("COPY SETTINGS"),
      CURRENT_SHOW: qsTr("CURRENT SHOW"),
      DELAY: qsTr("DELAY"),
      DELAY_FX_GLOBAL: qsTr("DELAY FX (GLOBAL)"),
      DELAY_LENGTH: qsTr("DELAY LENGTH"),
      DELETE: qsTr("DELETE"),
      DISABLE_STEREO_LINK: qsTr("DISABLE STEREO LINK"),
      DOCUMENTATION: qsTr("DOCUMENTATION"),
      DYN: qsTr("DYN"),
      EDIT: qsTr("EDIT"),
      EQ: qsTr("EQ"),
      EXPORT: qsTr("EXPORT"),
      FAV_SHOW: qsTr("FAVOURITE SHOW"),
      FEEDBACK: qsTr("FEEDBACK"),
      FEEDBACK_AMOUNT: qsTr("FEEDBACK AMOUNT"),
      FREQ: qsTr("FREQ"),
      FX: qsTr("FX"),
      FX_MODE_DEFAULT: qsTr("FX MODE DEFAULT"),
      FX_RETURNS: qsTr("FX RETURNS"),
      FX_RETURNS_TO_AUX: qsTr("FX RETURNS TO {0}"),
      GAIN: qsTr("GAIN"),
      GROUP: qsTr("GROUP"),
      HELP: qsTr("HELP"),
      HF_DAMPING: qsTr("HF DAMPING"),
      HIGHPASS_FILTER: qsTr("HIGHPASS FILTER"),
      IMPORT: qsTr("IMPORT"),
      INPUT: qsTr("INPUT"),
      LED: qsTr("LED"),
      LENGTH_SUBDIVISION: qsTr("LENGTH SUBDIVISION"),
      LOAD: qsTr("LOAD"),
      LOAD_PRESET: qsTr("LOAD PRESET"),
      LOCK: qsTr("LOCK"),
      LOCKED: qsTr("LOCKED"),
      LOWPASS_FILTER: qsTr("LOWPASS FILTER"),
      MANUAL: qsTr("MANUAL"),
      MASTER: qsTr("MASTER"),
      MASTER_EQ: qsTr("MASTER EQ"),
      MEDIA: qsTr("MEDIA"),
      MEDIA_FADER_BEFORE_CH1: qsTr("MEDIA FADER BEFORE CH1"),
      MIX_GAIN: qsTr("MIX GAIN"),
      MUTE: qsTr("MUTE"),
      MUTE_ALL: qsTr("MUTE ALL"),
      MUTE_FX: qsTr("MUTE FX"),
      MUTE_GROUP_BUTTON_ASSIGN: qsTr("MUTE GROUP BUTTON ASSIGN"),
      MUTE_GROUPS: qsTr("MUTE GROUPS"),
      MUTES: qsTr("MUTES"),
      NETWORK: qsTr("NETWORK"),
      NEW: qsTr("NEW"),
      NEW_SNAPSHOT: qsTr("NEW SNAPSHOT"),
      NEXT_SNAPSHOT: qsTr("NEXT SNAPSHOT"),
      NORM: qsTr("NORM"),
      OFF: qsTr("OFF"),
      ON: qsTr("ON"),
      ONLINE_SUPPORT: qsTr("ONLINE SUPPORT"),
      PASTE_SETTINGS: qsTr("PASTE SETTINGS"),
      PERMISSIONS: qsTr("PERMISSIONS"),
      PERMIT: qsTr("PERMIT"),
      PHANTOM: qsTr("PHANTOM"),
      PLAY: qsTr("PLAY"),
      PLAYER: qsTr("PLAYER"),
      PLAYLIST: qsTr("PLAYLIST"),
      PRESETS: qsTr("PRESETS"),
      RATIO: qsTr("RATIO"),
      RECORD: qsTr("RECORD"),
      RELEASE: qsTr("RELEASE"),
      RENAME: qsTr("RENAME"),
      RESET: qsTr("RESET"),
      RESET_CHANNEL: qsTr("RESET CHANNEL"),
      REVERB: qsTr("REVERB"),
      REVERB_TIME: qsTr("REVERB TIME"),
      REVERB_FX_GLOBAL: qsTr("REVERB FX (GLOBAL)"),
      ROOM: qsTr("ROOM"),
      SAVE: qsTr("SAVE"),
      SAVE_AS: qsTr("SAVE AS"),
      SEND: qsTr("SEND"),
      SENDS: qsTr("SENDS"),
      SG: qsTr("SG"),
      SHOWS: qsTr("SHOWS"),
      SNAPSHOTS: qsTr("SNAPSHOTS"),
      SOCIAL: qsTr("SOCIAL"),
      SOLO: qsTr("SOLO"),
      SPEED: qsTr("SPEED"),
      STEREO_LINK: qsTr("STEREO LINK"),
      SUB_GROUP_FADER_ASSIGN: qsTr("SUB GROUP FADER ASSIGN"),
      SUB_GROUP_SPREAD: qsTr("SUB GROUP SPREAD"),
      SUB_GROUPS: qsTr("SUB GROUPS"),
      SUBS: qsTr("SUBS"),
      TAP_TEMPO: qsTr("TAP TEMPO"),
      THIN: qsTr("THIN"),
      TOTAL_VIEW: qsTr("TOTAL VIEW"),
      UNASSIGN_SUB_GROUP: qsTr("UNASSIGN SUB GROUP {0}"),
      UPDATE_CURRENT_SNAPSHOT: qsTr("UPDATE CURRENT SNAPSHOT"),
      USB_MEDIA_FILES: qsTr("USB MEDIA FILES"),
      VIEW_GROUP_BUTTON_ASSIGN: qsTr("VIEW GROUP BUTTON ASSIGN"),
      VIEW_GROUPS: qsTr("VIEW GROUPS"),
      VIEWS: qsTr("VIEWS"),
      SHOW_ALL_CHANNELS: qsTr("SHOW ALL CHANNELS"),
      PLACE_AFTER_INPUTS: qsTr("PLACE AFTER INPUTS"),
      PLACE_BEFORE_INPUTS: qsTr("PLACE BEFORE INPUTS"),
      GATE: qsTr("GATE"),
      MUTE_FX_CANCEL: qsTr("MUTE FX CANCEL"),
      MUTE_ALL_CANCEL: qsTr("MUTE ALL CANCEL"),
      MUTEGROUP_1_ACTIVATED: qsTr("MUTE GROUP {0} ON"),
      MUTEGROUP_1_DEACTIVATED: qsTr("MUTE GROUP {0} OFF"),
      NO_SNAPSHOT: qsTr("NO SNAPSHOT"),
      LOAD_NEXT_SNAPSHOT: qsTr("LOAD NEXT SNAPSHOT"),
      CHANNEL_EQ_PRESETS: qsTr("CHANNEL EQ PRESETS"),
      AUX_EQ_PRESETS: qsTr("AUX EQ PRESETS"),
      MASTER_EQ_PRESETS: qsTr("MASTER EQ PRESETS"),
      CHANNEL_DYN_PRESETS: qsTr("CHANNEL DYN PRESETS"),
      AUX_DYN_PRESETS: qsTr("AUX DYN PRESETS"),
      MASTER_DYN_PRESETS: qsTr("MASTER DYN PRESETS"),
      DELAY_FX_PRESETS: qsTr("DELAY FX PRESETS"),
      CHORUS_FX_PRESETS: qsTr("CHORUS FX PRESETS"),
      REVERB_FX_PRESETS: qsTr("REVERB FX PRESETS"),
      ROOM_PRESETS: qsTr("ROOM PRESETS"),
      DIGITECH_PRESETS: qsTr("DIGITECH PRESETS"),
      UX_PRESETS: qsTr("OPTIONS PRESETS (LOCAL)"),
      FILES: qsTr("FILES"),
      CONNECTING: qsTr("Connecting..."),
      KEEP_TAPPING: qsTr("KEEP TAPPING..."),
      PLAYLISTS: qsTr("PLAYLISTS"),
      PRESET_LOADED: qsTr("PRESET<br>{0}<br>LOADED"),
      NO_PAN_ON_MONO_AUX: qsTr("NO PAN<br>ON MONO AUX"),
      PARAM_GLOBAL: qsTr("{0} PARAMETERS (GLOBAL)"),
      PARAM_GLOBAL2: qsTr("{0} PARAMETERS"),
      CLEAR_ALL_SOLOS: qsTr("CLEAR ALL SOLOS"),
      POST: qsTr("POST"),
      PRE: qsTr("PRE"),
      SET_ALL_CHANNELS_TO: qsTr('SET ALL CHANNELS TO "{0}" ?'),
      SAVED: qsTr("SAVED"),
      REPLACE_PRESET: qsTr('REPLACE PRESET "{0}"?'),
      REPLACE_SNAPSHOT: qsTr('REPLACE SNAPSHOT "{0}"?'),
      FACTORY: qsTr("FACTORY"),
      USER: qsTr("USER"),
      DELETE_PRESET: qsTr('DELETE PRESET "{0}" ?'),
      BPM: qsTr("BPM"),
      OUT_OF_RANGE: qsTr("OUT OF RANGE"),
      ERROR: qsTr("ERROR"),
      ENTER_BPM: qsTr("ENTER BPM"),
      NO_ASSIGNED_SUBGROUP: qsTr("NO ASSIGNED CHANNELS IN<br>SUB GROUP {0}"),
      NO_ASSIGNED_VIEWGROUP: qsTr("NO ASSIGNED CHANNELS IN<br>VIEW GROUP {0}"),
      NO_ASSIGNED_MG: qsTr("NO ASSIGNED CHANNELS IN<br>MUTE GROUP {0}"),
      SAVE_TO_SHOW: qsTr("SAVE TO SHOW"),
      DASHBOARD: qsTr("DASHBOARD"),
      INCOMPATIBLE_CHANNEL_TYPE: qsTr("INCOMPATIBLE CHANNEL TYPE"),
      MIXER_RESET: qsTr("MIXER RESET"),
      SAVE_SHOW_WITH_NAME: qsTr("SAVE SHOW WITH NAME:"),
      NEW_SHOW_NAME: qsTr("NEW SHOW NAME:"),
      SHOW_ALREADY_EXISTS: qsTr("SHOW ALREADY EXISTS"),
      DELETE_SHOW: qsTr('DELETE SHOW "{0}"?'),
      SAVE_SNAPSHOT_WITH_NAME: qsTr("SAVE SNAPSHOT WITH NAME:"),
      NEW_SNAPSHOT_NAME: qsTr("NEW SNAPSHOT NAME:"),
      DELETE_SNAPSHOT: qsTr('DELETE SNAPSHOT "{0}"?'),
      LOAD_THE_INITIAL_MIXER_STATE: qsTr("LOAD THE INITIAL MIXER STATE?"),
      ERR_DELETESHOW: qsTr("ERROR DELETING SHOW."),
      ERR_CREATESHOW: qsTr("ERROR CREATING SHOW."),
      ERR_LOADSHOW: qsTr("ERROR LOADING SHOW."),
      ERR_SAVESHOW: qsTr("ERROR SAVING SHOW PARAMETERS."),
      ERR_RENAMESHOW: qsTr("ERROR RENAMING SHOW."),
      ERR_SAVEINIT: qsTr("CANNOT RESAVE * INIT * SNAPSHOT."),
      ERR_SAVESNAPSHOT: qsTr("ERROR SAVING SNAPSHOT."),
      ERR_LOADSNAPSHOT: qsTr("ERROR LOADING SNAPSHOT."),
      ERR_DELETESNAPSHOT: qsTr("ERROR DELETING SNAPSHOT."),
      ERR_RENAMEINIT: qsTr("CANNOT RENAME * INIT * SNAPSHOT."),
      ERR_RENAMESNAPSHOT: qsTr("ERROR RENAMING SNAPSHOT."),
      ERR_DELETEPRESET: qsTr("ERROR DELETING PRESET."),
      ERR_WRITEPRESET: qsTr("ERROR WRITING PRESET."),
      ERR_RENAMEPRESET: qsTr("ERROR RENAMING PRESET."),
      SNAPLOAD: qsTr("{0}"),
      INITIAL_VALUES_LOADED: qsTr("INITIAL VALUES LOADED."),
      MIX: qsTr("MIX"),
      AUX_SENDS: qsTr("AUX SENDS"),
      AUX_SENDS_X: qsTr("AUX SENDS: {0}"),
      FX_SENDS: qsTr("FX SENDS"),
      FX_EDIT: qsTr("FX EDIT"),
      GROUPS: qsTr("GROUPS"),
      THRESHOLD: qsTr("THRESHOLD"),
      THRESH: qsTr("THRESH"),
      REVERB_SEND: qsTr("REVERB SEND"),
      CHORUS_SEND: qsTr("CHORUS SEND"),
      DELAY_SEND: qsTr("DELAY SEND"),
      ROOM_SEND: qsTr("ROOM SEND"),
      HPF_FREQ: qsTr("HPF FREQ"),
      NOTCH_FREQ: qsTr("NOTCH FREQ"),
      METERS: qsTr("METERS"),
      OUT: qsTr("OUT"),
      IN: qsTr("IN"),
      ME: qsTr("ME"),
      BAND: qsTr("BAND"),
      SETTINGS: qsTr("SETTINGS"),
      MORE_ME: qsTr("MORE ME"),
      DEMO_VERSION: qsTr("DEMO VERSION"),
      LINE_IN: qsTr("LINE IN"),
      LINE: qsTr("LINE"),
      MODE: qsTr("MODE"),
      CHANNEL: qsTr("CHANNEL"),
      SUPPORT: qsTr("SUPPORT"),
      RENAME_CHANNEL: qsTr("RENAME CHANNEL ({0})"),
      CENTER: qsTr("CENTER"),
      SETUP: qsTr("SETUP"),
      JUMP_TO: qsTr("JUMP TO"),
      FUNCTIONS: qsTr("FUNCTIONS"),
      BACK: qsTr("BACK"),
      SAVE_PRESET_WITH_NAME: qsTr("SAVE PRESET WITH NAME:"),
      RENAME_PRESET: qsTr("RENAME PRESET:"),
      NO_ACTIVE_SHOW: qsTr("NO ACTIVE SHOW"),
      RTA: qsTr("RTA"),
      DEESSER: qsTr("DE-ESSER"),
      INPUTS: qsTr("INPUTS"),
      ARE_YOU_SURE: qsTr("ARE YOU SURE?"),
      HI_Z: qsTr("HI-Z"),
      ABOUT: qsTr("ABOUT"),
      LIVE: qsTr("LIVE"),
      FIXED: qsTr("FIXED"),
      MUTE_GROUP_X: qsTr("MUTE GROUP {0}"),
      TAP_X_BPM: qsTr("TAP {0} BPM"),
      MOUNTCHANGED: qsTr("MOUNT CHANGED"),
      MOUNT: qsTr("USB INSERTED"),
      UNMOUNT: qsTr("USB REMOVED"),
      DISABLED: qsTr("DISABLED"),
      ENABLED: qsTr("ENABLED"),
      SINGLE: qsTr("SINGLE"),
      MULTIPLE: qsTr("MULTIPLE"),
      LOCAL: qsTr("LOCAL"),
      GLOBAL: qsTr("GLOBAL"),
      LEVEL: qsTr("LEVEL"),
      TREBLE: qsTr("TREBLE"),
      MID: qsTr("MID"),
      BASS: qsTr("BASS"),
      DB: qsTr("dB"),
      MS: qsTr("ms"),
      HZ: qsTr("hz"),
      NO_CONTROLS_FOR_THIS_CHANNEL: qsTr("NO CONTROLS FOR THIS CHANNEL"),
      UNASSIGN_ME: qsTr("UNASSIGN ME"),
      ASSIGN_ME: qsTr("ASSIGN ME"),
      UNASSIGN_MY_OUT: qsTr("UNASSIGN 'MY OUT'"),
      ASSIGN_MY_OUT: qsTr("ASSIGN 'MY OUT'"),
      NO_SEND_LEVELS: qsTr("NO SEND LEVELS"),
      OK: qsTr("OK"),
      CANCEL: qsTr("CANCEL"),
      FULL: qsTr("FULL"),
      RELOAD_UI: qsTr("RELOAD UI FOR CHANGES TO TAKE EFFECT?"),
      BAD_BROWSER: qsTr("THIS BROWSER DOESN'T SUPPORT WEBSOCKETS. PLEASE USE A DIFFERENT BROWSER."),
      AFS_FIXED_INFO: qsTr("Feedback measurement mode. Please ensure that<br>no other sounds are coming into the inputs except<br>the microphone-speaker feedback tone."),
      RECORDINGS: qsTr("Recordings"),
      READING: qsTr("Reading..."),
      FIRMWARE_FOUND: qsTr("A firmware update image was found on the plugged USB device.<br><br>Perform a mixer update?"),
      FIRMWARE_UPDATED: qsTr("Update succeeded.<br>Please turn the unit off for 10 seconds, power back on and reload this page.<br>Note, your device's wireless might need manual reconnection."),
      MSGBTN_UPDATE: qsTr("Update"),
      MSGBTN_CANCEL: qsTr("Cancel"),
      MSGBTN_OK: qsTr("Ok"),
      UPDATE_ALREADY: qsTr("The update has been attempted once already.<br><br>Please reboot the device to resume / try again."),
      UPDATE_COMPLETED: qsTr("System updated. Please power cycle the device and reload this page for the update to take effect."),
      UPDATE_ERROR: qsTr("Error performing update. "),
      REC_ERRSEQ: qsTr("Recorder: Error writing sequential file to the USB stick (out of space?)."),
      REC_ERRWRITE: qsTr("Recorder: Error writing USB stick (out of space?)."),
      REC_ERRNOSTICK: qsTr("Recorder: USB stick is not inserted to the RECORD slot."),
      REC_ERRNOACCESS: qsTr("Recorder: Unable to access USB stick for writing."),
      REC_ERRCREATE: qsTr("Recorder: Unable to create a file on the USB stick."),
      SHOWEXP_NOTFOUND: qsTr("Export/Import: Item not found"),
      SHOWEXP_USBNOTFOUND: qsTr("USB stick not found"),
      SHOWEXP_WRITEERR: qsTr("Export failed: Unable to access stick for writing"),
      SHOWEXP_INTREADERR: qsTr("Export failed: Error reading the source folder."),
      SHOWEXP_EXPFAILED: qsTr("Some files failed to export."),
      SHOWEXP_SUCCESS: qsTr("EXPORT SUCCESSFUL"),
      SHOWIMP_FAILED: qsTr("Some files failed to import."),
      SHOWIMP_SUCCESS: qsTr("IMPORT SUCCESSFUL"),
      SHOWIMP_NOTFOUND: qsTr("IMPORT ERROR: SOURCE NOT FOUND"),
      SHOWIMP_FILNOTFOUND: qsTr("NO RELEVANT FILES FOUND ON THE USB"),
      IMPORT_SHOW_FROM_USB: qsTr("IMPORT SHOW FROM USB"),
      NO_SHOW_SELECTED: qsTr("NO SHOW SELECTED"),
      EXPORT_SHOW_TO_USB: qsTr("EXPORT SHOW TO USB: {0}"),
      IMPORT_SHOW: qsTr("IMPORT SHOW"),
      EXPORT_SHOW: qsTr("EXPORT SHOW"),
      LANGUAGE: qsTr("LANGUAGE"),
      NO_ME_CHANNELS: qsTr("NO 'ME' CHANNELS"),
      NO_AUX_OUT: qsTr("NO AUX OUT"),
      PADS: qsTr("PADS"),
      CUE: qsTr("CUE"),
      AUTO: qsTr("AUTO"),
      FRAME_RATE: qsTr("FRAME RATE"),
      DISABLE_RETINA: qsTr("DISABLE RETINA"),
      DISABLE_RESCALING: qsTr("DISABLE RESCALING"),
      GUI_PERFORMANCE: qsTr("GUI PERFORMANCE"),
      HEADPHONES_OUT: qsTr("HEADPHONES OUT"),
      BUTTON_FUNCTION: qsTr("BUTTON FUNCTION"),
      KINETIC_SCROLL: qsTr("KINETIC SCROLL"),
      FADER_GLOW: qsTr("FADER GLOW"),
      DISABLE_LED_METERS: qsTr("DISABLE LED METERS"),
      MASTER_LOCK: qsTr("MASTER LOCK"),
      EQ_ON_CHANNEL_LED: qsTr("EQ CURVE ON CHANNEL LED"),
      HIDE_COMP_GATE: qsTr("HIDE COMP/GATE"),
      HIDE_DB_MARKS: qsTr("HIDE DB MARKS"),
      PIN_SO_FOR_AUX_FX_SENDS: qsTr("PIN SO FOR AUX/FX SENDS"),
      PIN_SLIDEOUT_IN_MIX_MODE: qsTr("PIN SLIDEOUT IN MIX MODE"),
      SOLO_MODE: qsTr("SOLO MODE"),
      SOLO_ROUTING: qsTr("SOLO ROUTING"),
      HEADPHONES: qsTr("HEADPHONES"),
      HP: qsTr("HP"),
      AUTOCLOSE_SLIDEOUT: qsTr("AUTOCLOSE SLIDEOUT"),
      METER_QUANTISATION: qsTr("METER QUANTISATION"),
      RECORD_MODE: qsTr("2CH RECORD FORMAT"),
      MULTITRACK_MODE: qsTr("MULTITRACK FORMAT"),
      MIXER_SCROLLING: qsTr("MIXER SCROLLING"),
      DIM_LED_METERS: qsTr("DIM LED METERS"),
      UTILITY: qsTr("UTILITY"),
      BIT_32: qsTr("32 bit"),
      BIT_24: qsTr("24 bit"),
      BIT_16: qsTr("16 bit"),
      ONE_FINGER: qsTr("1 FINGER"),
      TWO_FINGERS: qsTr("2 FINGERS"),
      IMPORT_ALL_PRESETS: qsTr("IMPORT ALL PRESETS"),
      EXPORT_ALL_PRESETS: qsTr("EXPORT ALL PRESETS"),
      NO_CONNECTION_TO_MIXER: qsTr("NO CONNECTION TO MIXER"),
      OFFLINE: qsTr("OFFLINE"),
      VERSION: qsTr("VERSION"),
      COPY_TO_CLIPBOARD: qsTr("COPY TO CLIPBOARD"),
      COPYRIGHT_MSG: qsTr(
        "All third party marks are the trademarks of their respective owners. These marks are used to identify<br>product sounds that were reviewed in the creation of this product and use of these marks do not im-<br>ply an affiliation, endorsement or association with Harman International Industries, Incorporated."
      ),
      FILTER: qsTr("FILTER"),
      DISPLAY: qsTr("DISPLAY"),
      SENSITIVITY: qsTr("SENSITIVITY"),
      CLEAR_FIXED: qsTr("CLEAR FIXED"),
      CLEAR_ALL: qsTr("CLEAR ALL"),
      CLEAR_LIVE: qsTr("CLEAR LIVE"),
      NAME_SSID: qsTr("NAME SSID"),
      SUBNET_MASK: qsTr("SUBNET MASK"),
      WIRELESS_NETWORK: qsTr("WIRELESS NETWORK"),
      SECURITY_OPTIONS: qsTr("SECURITY OPTIONS"),
      LAN_IP_ADDRESS: qsTr("LAN IP ADDRESS"),
      UP: qsTr("UP"),
      DOWN: qsTr("DOWN"),
      ETHERNET: qsTr("ETHERNET"),
      HOTSPOT: qsTr("HOTSPOT"),
      CLOSE: qsTr("CLOSE"),
      COPY_MIX: qsTr("COPY MIX"),
      NO_CONNECTION: qsTr("NO CONNECTION"),
      NO_CURRENT_SNAPSHOT: qsTr("NO CURRENT SNAPSHOT"),
      PATTERNED_BACKGROUND: qsTr("PATTERNED BACKGROUND"),
      ROUTING: qsTr("ROUTING"),
      INPUT_SOURCE: qsTr("INPUT SOURCE"),
      HARDWARE: qsTr("HARDWARE"),
      USB: qsTr("USB"),
      MULTI_TRACK: qsTr("MULTI-TRACK"),
      OUTPUT_DESTINATION: qsTr("OUTPUT DESTINATION"),
      L: qsTr("L"),
      R: qsTr("R"),
      RECORDING_DROPOUT: qsTr("RECORDING DROPOUT"),
      USB_REC_TOO_SLOW: qsTr("USB REC. TOO SLOW"),
      USB_REC_BUFFER: qsTr("USB REC. BUFFER"),
      RECORDER_IS_BUSY: qsTr("RECORDER IS BUSY..."),
      IMPORT_USER_CONFIG: qsTr("IMPORT USER CONFIG"),
      EXPORT_USER_CONFIG: qsTr("EXPORT USER CONFIG"),
      OVERVIEW: qsTr("OVERVIEW"),
      CHANNEL_SOURCE: qsTr("CHANNEL SOURCE"),
      CHANNEL_OUTPUT_DESTINATION: qsTr("CHANNEL OUTPUT DESTINATION"),
      MISC: qsTr("MISC"),
      DISABLE_VU_INPUT_LEVEL: qsTr("DISABLE VU INPUT LEVEL"),
      DISABLE_VU_PEAK: qsTr("DISABLE VU PEAK"),
      SOLO_TYPE: qsTr("SOLO TYPE"),
      AFL: qsTr("AFL"),
      PFL: qsTr("PFL"),
      WRONG_VALUE: qsTr("WRONG VALUE"),
      SYNTAX_FPS_ENTER: qsTr("SYNTAX: frames/fps"),
      INPUT_DELAY: qsTr("INPUT DELAY"),
      OUTPUT_DELAY: qsTr("OUTPUT DELAY"),
      PEDAL_FUNCTION: qsTr("PEDAL FUNCTION"),
      CONFIG_WARNING: qsTr("Warning: only the visual/graphics settings specific to this device will be stored.<br>These settings do not affect the operation of the mixer."),
      SET_TO_ZERO_DB: qsTr("SET TO ZERO DB"),
      SET_OUTPUT_DELAY: qsTr("SET OUTPUT DELAY"),
      SET_OUTPUT_DELAY_LEFT: qsTr("LEFT DELAY"),
      SET_OUTPUT_DELAY_RIGHT: qsTr("RIGHT DELAY"),
      MASTER_PRESETS: qsTr("MASTER PRESETS"),
      LEFT: qsTr("LEFT"),
      RIGHT: qsTr("RIGHT"),
      SHORTCUTS: qsTr("SHORTCUTS"),
      SLAVE: qsTr("SLAVE"),
      SUB: qsTr("SUB"),
      METERS_UNIT: qsTr("meters"),
      SAMPLES: qsTr("samples"),
      SMPL: qsTr("smpl"),
      FT: qsTr("ft"),
      FPS: qsTr("fps"),
      FRAMES: qsTr("frames"),
      EXCEEDS_MAXIMUM_DELAY: qsTr("EXCEEDS MAXIMUM DELAY"),
      TOGGLE_PLAY: qsTr("TOGGLE PLAY"),
      TOGGLE_REC: qsTr("TOGGLE REC"),
      NONE: qsTr("NONE"),
      ISOLATION: qsTr("ISOLATION"),
      MIC_GAIN: qsTr("MIC GAIN"),
      PHASE: qsTr("PHASE"),
      CHANNELS: qsTr("CHANNELS"),
      BUSSES: qsTr("BUSES"),
      MATRICES: qsTr("MATRICES"),
      MATRIX: qsTr("MATRIX"),
      HOLD: qsTr("HOLD"),
      COMP: qsTr("COMP"),
      DEPTH: qsTr("DEPTH"),
      ISOLATE: qsTr("ISOLATE"),
      PATCHING: qsTr("PATCHING"),
      DETUNE: qsTr("DETUNE"),
      DENSITY: qsTr("DENSITY"),
      HPF: qsTr("HPF"),
      PANNING: qsTr("PANNING"),
      COMPRESSOR: qsTr("COMPRESSOR"),
      GEQ: qsTr("GEQ"),
      CASCADE: qsTr("CASCADE"),
      CASCADE_MASTER: qsTr("CASCADE MASTER"),
      SOUNDCHECK: qsTr("SOUNDCHECK"),
      SOUNDCHECK_ASSIGN: qsTr("SOUNDCHECK ASSIGN"),
      DIRECT_OUT: qsTr("DIRECT OUT"),
      IOSYS: qsTr("IOSYS"),
      LOCATE: qsTr("LOCATE"),
      ENABLE: qsTr("ENABLE"),
      DISABLE: qsTr("DISABLE"),
      NAME: qsTr("NAME"),
      EMPTY: qsTr("EMPTY"),
      SESSIONS: qsTr("SESSIONS"),
      MIXER_PATCH: qsTr("MIXER PATCH"),
      NO_PATCH: qsTr("NO PATCH"),
      SPACE_REMAINING: qsTr("SPACE REMAINING"),
      SD: qsTr("SD"),
      EDIT_CHANNEL: qsTr("EDIT CHANNEL"),
      ETH: qsTr("ETH"),
      SD_MTK: qsTr("SD MTK"),
      RESET_ALL: qsTr("RESET ALL"),
      NOTCH_F: qsTr("NOTCH F."),
      DIRECT_OUTPUT: qsTr("DIRECT OUTPUT"),
      FADER_POSITION: qsTr("FADER POSITION"),
      MASTER_CHANNEL_RANGE: qsTr("MASTER CHANNEL RANGE"),
      IOSYS_PRESET_LOADING: qsTr("IOSYS PRESET LOADING"),
      HEADPHONE_SIGNAL_DIRECTION: qsTr("HP CHANNELS"),
      MTX: qsTr("MTX"),
      SWITCH_TO_MATRIX: qsTr("SWITCH TO MATRIX"),
      SWITCH_TO_AUX: qsTr("SWITCH TO AUX"),
      GATE_PRESETS: qsTr("GATE PRESETS"),
      AFS_PRESETS: qsTr("AFS 2 PRESETS"),
      PRE_PROCESSING: qsTr("PRE PROCESSING"),
      POST_PROCESSING: qsTr("POST PROCESSING"),
      ADDITIONAL_CHANNEL_DESTINATION: qsTr("DIRECT OUTPUT"),
      NO_PAN_ON_MONO_MATRIX: qsTr("NO PAN<br>ON MONO MATRIX"),
      NO_USB_DEVICE_SELECTED: qsTr("NO USB DEVICE SELECTED"),
      GLOBAL_PRE_FADE_AUX_SEND_POINT: qsTr("GLOBAL AUX SEND POINT"),
      SHUFFLE: qsTr("SHUFFLE"),
      EZ_EQ: qsTr("EZ EQ"),
      MOREME_PORTRAIT_MODE: qsTr("MOREME PORTRAIT MODE"),
      RESET_LOCAL_SETTINGS: qsTr("RESET LOCAL SETTINGS"),
      SYNC_ID: qsTr("SYNC ID"),
      SYNC_SELECTED_CH: qsTr("SYNC SELECTED CHANNEL"),
      ACCESS_LIMITING: qsTr("ACCESS LIMITING"),
      PASSWORD: qsTr("PASSWORD"),
      ACCESS: qsTr("ACCESS"),
      MONITOR_ACCESS_LIMIT: qsTr("ACCESS LIMIT (LOCAL)"),
      ALLOW_ACCESS_FOR: qsTr("ALLOW ACCESS FOR"),
      ALLOW_CLIENT_ACCESS_FOR: qsTr("ALLOW CLIENT ACCESS FOR"),
      LOCAL_AUX_CONTROL: qsTr("LOCAL AUX CONTROL (SOFT ACCESS ENABLER)"),
      MASTER_VOLUME: qsTr("MASTER VOLUME"),
      ACCOUNT: qsTr("ACCOUNT"),
      MASTER_PASSWORD_PROTECTION: qsTr("MASTER PASSWORD PROTECTION (GLOBAL)"),
      LOG_IN: qsTr("LOG IN"),
      LOG_OUT: qsTr("LOG OUT"),
      AUX_LEVELS: qsTr("AUX LEVELS"),
      AUX_PROCESSING: qsTr("AUX PROCESSING"),
      MIX_LEVELS: qsTr("MIX LEVELS"),
      MIX_PROCESSING: qsTr("MIX PROCESSING"),
      MASTER_LEVEL: qsTr("MASTER LEVEL"),
      MASTER_PROCESSING: qsTr("MASTER PROCESSING"),
      GLOBAL_SETTINGS: qsTr("GLOBAL SETTINGS"),
      LOCAL_SETTINGS: qsTr("LOCAL SETTINGS"),
      SET_MASTER_PASS: qsTr("SET MASTER PASSWORD"),
      ENTER_PASS_TO_UNLOCK: qsTr("ENTER PASSWORD TO UNLOCK"),
      ENTER_PASS: qsTr("ENTER PASSWORD"),
      WRONG_PASSWORD: qsTr("WRONG PASSWORD"),
      UNLOCKED: qsTr("UNLOCKED"),
      LOGGED_IN: qsTr("LOGGED IN"),
      LOGGED_OUT: qsTr("LOGGED OUT"),
      OVERRIDDEN_BY_WIFI: qsTr("OVERRIDDEN BY WIFI"),
      MTK_PLAY: qsTr("MTK PLAY"),
      MTK_RECORD: qsTr("MTK RECORD"),
      NEW_VALUE: qsTr("NEW VALUE"),
      USB_A: qsTr("USB-A"),
      USB_B: qsTr("USB-DAW"),
      M_USB_A: qsTr("M-USB-A"),
      M_USB_B: qsTr("M-USB-DAW"),
      S_USB_A: qsTr("S-USB-A"),
      S_USB_B: qsTr("S-USB-DAW"),
      M_LOCAL: qsTr("M-LOCAL"),
      S_LOCAL: qsTr("S-LOCAL"),
      SLOT: qsTr("SLOT"),
      INSERT_OPTION: qsTr("INSERT USB-DAW"),
      TWO_TRACK_USB: qsTr("2-TRACK USB"),
      MTK_USB_RECORD: qsTr("MTK USB RECORD"),
      MULTITRACK: qsTr("MULTITRACK"),
      MULTITRACK_CONFIG: qsTr("MULTITRK CONFIG"),
      MTK_USB_PLAYBACK: qsTr("MTK USB PLAYBACK"),
      PREVIOUS_SNAPSHOT: qsTr("PREVIOUS SNAPSHOT"),
      AFS_SETTINGS: qsTr("AFS SETTINGS"),
      MATRIX_MASTER_PANNING: qsTr("MTX MASTER PANNING"),
      MATRIX_CONTRIB: qsTr("MTX CONTRIB."),
      AUX_CONTRIB: qsTr("AUX CONTRIB."),
      CONTRIB_PANNING: qsTr("CONTRIB. PANNING"),
      CONTRIB_BUS_POINTS: qsTr("CONTRIB. BUS POINTS"),
      DIGITECH: qsTr("DIGITECH"),
      FX_SEND_LEVELS: qsTr("FX SEND LEVELS"),
      AUX_MTX_SEND_LEVELS: qsTr("AUX/MTX SEND LEVELS"),
      BALANCE_PANNING: qsTr("BALANCE (PANNING)"),
      BALANCE: qsTr("BALANCE"),
      VCA: qsTr("VCA"),
      SLOPE: qsTr("SLOPE"),
      ASSIGN_VCA: qsTr("ASSIGN VCA"),
      UNASSIGN_VCA: qsTr("UNASSIGN VCA"),
      AUX_SEND_SOURCE: qsTr("AUX SEND SOURCE"),
      HOLD_FADER_FOR_FINE_TUNING: qsTr("FADER FINE TUNING (HOLD)"),
      AUX_SEND_MUTE_INHERITANCE: qsTr("AUX SEND MUTE INHERITANCE"),
      AUX_SEND_MUTE_INHERITANCE2: qsTr("AUX SEND MUTE INH"),
      MIXER_CHANNEL: qsTr("MIXER CHANNEL"),
      GROUP_NAME: qsTr("GROUP NAME"),
      PATCH_1_1: qsTr("PATCH 1:1"),
      ACTIVATE_SOUNDCHECK: qsTr("ACTIVATE SOUNDCHECK"),
      HP_VOLUME: qsTr("HEADPHONE {0} VOLUME"),
      SOLO_LEVEL: qsTr("SOLO LEVEL"),
      CURRENT_VALUES_WILL_BE_LOST: qsTr("CURRENT VALUES WILL BE LOST, CONTINUE?"),
      VCA_GROUP_BUTTON_ASSIGN: qsTr("VCA GROUP BUTTON ASSIGN"),
      COPY_MIX_TO_AUX: qsTr("COPY MIX TO AUX"),
      MASTERS: qsTr("MASTERS"),
      FX_MASTERS: qsTr("FX MASTERS"),
      BIGGER_SLIDEOUT: qsTr("BIGGER SLIDEOUT"),
      LOGIN: qsTr("LOGIN"),
      DELETE_SESSION: qsTr("DELETE SESSION"),
      VCA_GROUP_SPREAD: qsTr("VCA GROUP SPREAD"),
      VCA_SPREAD: qsTr("VCA SPREAD"),
      RECORD_CHANNELS: qsTr("RECORD CHANNELS"),
      SELECT_ALL: qsTr("SELECT ALL"),
      MAXIMUM_NUMBER_OF_RECORD_SLOTS_USED: qsTr("MAXIMUM NUMBER OF RECORD SLOTS USED"),
      RECORDING_CHANNEL_LIMIT_FULL: qsTr("RECORDING CHANNEL LIMIT FULL"),
      VCA_MASTERS: qsTr("VCA MASTERS"),
      VIEW_GROUP: qsTr("VIEW GROUP"),
      MUTE_GROUP: qsTr("MUTE GROUP"),
      MTK: qsTr("MTK"),
      DIM: qsTr("DIM"),
      TOGGLE_DIM: qsTr("TOGGLE DIM"),
      BUFFER: qsTr("BUFFER"),
      START: qsTr("START"),
      SPILL: qsTr("SPILL"),
      END: qsTr("END"),
      DEFAULT: qsTr("DEFAULT"),
      FOLLOW_SOURCE: qsTr("FOLLOW SOURCE"),
      RECORD_IS_ACTIVE: qsTr("RECORD IS ACTIVE"),
      FX_SEND: qsTr("FX SEND"),
      GB: qsTr("GB"),
      NOT_AVAILABLE: qsTr("NOT AVAILABLE"),
      NO_ASSIGNED_CHANNELS: qsTr("NO ASSIGNED CHANNELS"),
      VCA_SPILL: qsTr("VCA SPILL"),
      MASTER_MTX_SEND_POINT: qsTr("MASTER MTX SEND POINT"),
      REC_ERRNOSELECT: qsTr("No MTK channels selected for recording"),
      REC_ERRDROPOUT: qsTr("Error: USB stick is not sufficiently fast to handle multitrack recording. Please reduce the number of channels recorded simultaneously or use a faster USB storage."),
      REC_ERRSESSNAME: qsTr("Invalid session name, using default."),
      REC_ERRPLAYING: qsTr("Cannot use Multitrack recorder while playing."),
      PLAY_ERRREC: qsTr("Cannot use Multitrack playback while recording."),
      ERR_BUSYBUFFER: qsTr("Busy... Writing buffered data to the storage."),
      MTK_USB_REMOVE_WARNING: qsTr("Do not remove USB stick while MTK BUSY is displayed"),
      MATRIX_CONTRIB_PANNING: qsTr("MTX CONTR. PANNING"),
      EXCLUDE_FROM_MASTER: qsTr("EXCLUDE FROM MASTER"),
      SEND_TO_MASTER: qsTr("SEND TO MASTER"),
      LINK_TO_MASTER: qsTr("LINK TO MASTER"),
      UNLINK_FROM_MASTER: qsTr("UNLINK FROM MASTER"),
      GLOBAL_TAP: qsTr("GLOBAL TAP"),
      EXPORT_TO_FILE: qsTr("EXPORT TO FILE"),
      IMPORT_FROM_FILE: qsTr("IMPORT FROM FILE"),
      FILE_NAME: qsTr("FILE NAME"),
      DIFF_SCHEMA_WARNING: qsTr("IMPORTING DATA SCHEME IS DIFFERENT FROM USED ON CURRENT DEVICE. APPLYING MAY INFLICT UNWANTED RESULTS. CONTINUE?"),
      UNSAVED_LOST_CONTINUE: qsTr("ALL UNSAVED CHANGES WILL BE LOST. CONTINUE?"),
      COLOR: qsTr("COLOR"),
      HOLD_RTA: qsTr("HOLD RTA"),
      SORT: qsTr("SORT"),
      GUI_PERF: qsTr("GUI PERF"),
      SET_TIME: qsTr("SET TIME"),
      SET_TIME_TIP: qsTr("INPUT NEW TIME"),
      SET_DATE: qsTr("SET DATE"),
      SET_DATE_TIP: qsTr("INPUT NEW DATE"),
      SET_TIME_DATE_TIP: qsTr("SET DATE/TIME (YYYY MM DD HH MM SS TZ)"),
      WRONG_TIME: qsTr("WRONG TIME"),
      WRONG_DATE: qsTr("WRONG DATE"),
      PATCHING_DURING_MTK: qsTr("PATCHING IS NOT AVAILABLE DURING MTK USAGE"),
      MASTER_OTHER_RTA: qsTr("CHANNEL RTA ON ALL OUTS"),
      HDMI_UNDERSCAN: qsTr("HDMI UNDERSCAN"),
      OFFLINE_IMPORT_EXPORT: qsTr("OFFLINE JSON FILE IMPORT EXPORT"),
      IMPORT_OFFLINE_FILE: qsTr("IMPORT OFFLINE FILE"),
      EXPORT_OFFLINE_FILE: qsTr("EXPORT OFFLINE FILE"),
      COPY_AUX_VALUES_FROM: qsTr("COPY AUX SEND VALUES FROM"),
      MAIN_MIX: qsTr("MAIN MIX"),
      DUCKER: qsTr("DUCKER"),
      CPA: qsTr("CPA"),
      SYSTEM: qsTr("SYSTEM"),
      MAINS: qsTr("MAINS"),
      FILLS: qsTr("FILLS"),
      MONITORS: qsTr("MONITORS"),
      AUTO_START_AFS: qsTr("START AFS ON BOOT"),
      RESET_IOSYS_NAME: qsTr("RESET IOSYS NAME"),
      COPY_INCLUDES_GAIN: qsTr("COPY/PASTE INCLUDES GAIN"),
      HW_RESET_STATE: qsTr("HW RESET BUTTON STATE"),
      FOOTSWITCH_STATE: qsTr("FOOTSWITCH STATE"),
      AUTOMIX: qsTr("AUTOMIX"),
      AUTOMIX_GROUP_ASSIGN: qsTr("AUTOMIX CHANNEL ASSIGN"),
      AUTOMIX_GROUP_ENABLE: qsTr("AUTOMIX GROUP ON/OFF"),
      WEIGHT: qsTr("WEIGHT"),
      RESPONSE_TIME: qsTr("RESPONSE TIME"),
      GROUP_A: qsTr("GROUP A"),
      GROUP_B: qsTr("GROUP B"),
      AMIX_MAX_EXCEED: qsTr("MAX 8 CHANNELS PER GROUP"),
      AMIX_ALREADY_ASSIGNED: qsTr("WARNING: ALREADY ASSIGNED TO ANOTHER GROUP."),
      AMIX_SURE_TURN_OFF: qsTr("CONFIRM DEACTIVATION OF AUTOMIX"),
      PIN_MASTER_TO_SLIDEOUT: qsTr("PIN MASTER TO SLIDEOUT"),
      BOTH: qsTr("BOTH"),
      CLOCK_SOURCE: qsTr("CLOCK SOURCE"),
      INTERNAL: qsTr("INTERNAL"),
      MIXER_A: qsTr("MIXER A"),
      MIXER_B: qsTr("MIXER B"),
      CLEAR_CPA: qsTr("CLEAR CPA"),
      SOURCES: qsTr("SOURCES"),
      HW_INS: qsTr("HW INS"),
      HW_OUTS: qsTr("HW OUTS"),
      CASCADE_OUTS: qsTr("CASCADE OUTS"),
      CASCADE_INS: qsTr("CASCADE INS"),
      TIME: qsTr("TIME"),
      UNDO: qsTr("UNDO"),
      HP_DSP: qsTr("HP DSP"),
      HIQNET: qsTr("HiQNET"),
      HIQNET_DISCOVERY: qsTr("HIQNET DISCOVERY"),
      LINK: qsTr("LINK"),
      UNLINK: qsTr("UNLINK"),
      DEVICE: qsTr("DEVICE"),
      IP: qsTr("IP"),
      REFRESH: qsTr("REFRESH"),
      BIG_DESKTOP_MODE: qsTr("BIG DESKTOP MODE FOR MIX"),
      LINK_EQ: qsTr("LINK EQ"),
      QUICK_PINK: qsTr("QUICK PINK"),
      HOLD_PINK: qsTr("HOLD PINK"),
      EDIT_VIEW: qsTr("EDIT VIEW"),
      CLEAR_MUTE: qsTr("CLEAR MUTE"),
      CLEAR_ALL_MUTES: qsTr("CLEAR ALL MUTES"),
      IMPORT_FROM_SNAPSHOT: qsTr("IMPORT FROM SNAPSHOT"),
      EXPORT_TO_SNAPSHOT: qsTr("EXPORT TO SNAPSHOT"),
      SYNC_VCA_SPILL: qsTr("SYNC VCA SPILL"),
      WARNING_BIGD: qsTr("WARNING: BIG DESKTOP MODE IS USED WITH BIG SLIDEOUT ONLY."),
      LOCAL_SETTINGS_PRESETS: qsTr("LOCAL SETTINGS PRESETS"),
    };
    langBase.cn = {
      lang: "中文",
      APPLY: "应用",
      ASSIGN_SUB_GROUP: "分配到编组{0}",
      ATTACK: "启动",
      AUX: "辅助",
      AUX_EQ: "辅助均衡器",
      AUX_MASTERS: "辅助主控",
      AUX_MASTER_LEVELS: "辅助主控电平",
      AUX_SENDS_FOR: "辅助发送：{0}",
      BANKS: "群组",
      BASS_GAIN: "低频增益",
      BYPASS: "旁通",
      CH: "通道",
      CHANNEL_SAFES: "通道安全",
      FX_SENDS_X: "效果发送：{0}",
      CHANNEL_PRESETS: "通道预置",
      CHORUS: "合唱",
      CHORUS_FX_GLOBAL: "合唱效果（全局）",
      CLEAR_SOLO: "消除独奏",
      CONFIG: "配置",
      CONFIGURATION: "配置",
      CONNECTED_DEVICE_NAME: "连接设备名称",
      COPY_SETTINGS: "复制设置",
      CURRENT_SHOW: "当前场景",
      DELAY: "延时",
      DELAY_FX_GLOBAL: "延时效果（全局）",
      DELAY_LENGTH: "延时时长",
      DELETE: "删除",
      DISABLE_STEREO_LINK: "关闭立体声关联",
      DOCUMENTATION: "文件",
      DYN: "动态效果",
      EDIT: "编辑",
      EQ: "均衡器",
      EXPORT: "导出",
      FAV_SHOW: "喜欢场景",
      FEEDBACK: "反馈",
      FEEDBACK_AMOUNT: "延时重复次数",
      FREQ: "频率",
      FX: "效果",
      FX_MODE_DEFAULT: "默认效果模式",
      FX_RETURNS: "效果返回",
      FX_RETURNS_TO_AUX: "效果返回至{0}",
      GAIN: "增益",
      GROUP: "分组",
      HELP: "帮助",
      HF_DAMPING: "高频阻尼",
      HIGHPASS_FILTER: "高通滤波",
      IMPORT: "导入",
      INPUT: "输入",
      LENGTH_SUBDIVISION: "时长细分",
      LOAD: "载入",
      LOAD_PRESET: "载入预置",
      LOCK: "锁定",
      LOCKED: "已锁定",
      LOWPASS_FILTER: "低通滤波",
      MANUAL: "手动",
      MASTER: "主控",
      MASTER_EQ: "总控均衡器",
      MEDIA: "多媒体",
      MEDIA_FADER_BEFORE_CH1: "多媒体推子置于通道1前",
      MIX_GAIN: "调音通道增益",
      MUTE: "静音",
      MUTE_ALL: "全部静音",
      MUTE_FX: "效果静音",
      MUTE_GROUP_BUTTON_ASSIGN: "分配静音分组按键",
      MUTE_GROUPS: "静音分组",
      MUTES: "静音",
      NETWORK: "网络",
      NEW: "新建",
      NEW_SNAPSHOT: "新记忆点",
      NEXT_SNAPSHOT: "下一个记忆点",
      NORM: "标准",
      OFF: "关",
      ON: "开",
      ONLINE_SUPPORT: "在线支持",
      PASTE_SETTINGS: "粘贴设置",
      PERMISSIONS: "权限",
      PERMIT: "允许",
      PHANTOM: "幻象电源",
      PLAY: "播放",
      PLAYER: "播放器",
      PLAYLIST: "播放列表",
      PRESETS: "预置",
      RATIO: "比例",
      RECORD: "录音",
      RELEASE: "释放",
      RENAME: "重命名",
      RESET: "重设",
      RESET_CHANNEL: "重设通道",
      REVERB: "混响",
      REVERB_TIME: "混响时间",
      REVERB_FX_GLOBAL: "混响效果（全局）",
      ROOM: "房间",
      SAVE: "保存",
      SAVE_AS: "另存为",
      SEND: "发送",
      SENDS: "发送",
      SG: "编组",
      SHOWS: "场景",
      SNAPSHOTS: "记忆点",
      SOLO: "独奏",
      SPEED: "速度",
      STEREO_LINK: "立体声关联",
      SUB_GROUP_FADER_ASSIGN: "编组推子分配",
      SUB_GROUP_SPREAD: "编组扩展",
      SUB_GROUPS: "编组",
      SUBS: "编组",
      TAP_TEMPO: "敲击节拍",
      THIN: "柔和",
      TOTAL_VIEW: "总视窗",
      UNASSIGN_SUB_GROUP: "取消编组分配{0}",
      UPDATE_CURRENT_SNAPSHOT: "更新当前记忆点",
      USB_MEDIA_FILES: "USB多媒体文件",
      VIEW_GROUP_BUTTON_ASSIGN: "分组显示按钮分配",
      VIEW_GROUPS: "分组显示",
      VIEWS: "视窗",
      SHOW_ALL_CHANNELS: "显示所有通道",
      PLACE_AFTER_INPUTS: "置于输入后",
      PLACE_BEFORE_INPUTS: "置于输入前",
      GATE: "噪声门",
      MUTE_FX_CANCEL: "取消效果静音",
      MUTE_ALL_CANCEL: "取消全部静音",
      MUTEGROUP_1_ACTIVATED: "静音编组{0}开启",
      MUTEGROUP_1_DEACTIVATED: "静音编组{0}关闭",
      NO_SNAPSHOT: "无记忆点",
      LOAD_NEXT_SNAPSHOT: "载入下一个记忆点",
      CHANNEL_EQ_PRESETS: "通道均衡器预置",
      AUX_EQ_PRESETS: "辅助均衡器预置",
      MASTER_EQ_PRESETS: "主控均衡器预置",
      CHANNEL_DYN_PRESETS: "通道动态效果预置",
      AUX_DYN_PRESETS: "辅助动态效果预置",
      MASTER_DYN_PRESETS: "主控动态效果预置",
      DELAY_FX_PRESETS: "延时效果预置",
      CHORUS_FX_PRESETS: "合唱效果预置",
      REVERB_FX_PRESETS: "混响效果预置",
      ROOM_PRESETS: "房间预置",
      DIGITECH_PRESETS: "DIGITECH预置",
      UX_PRESETS: "选项预置（本地）",
      FILES: "文件",
      CONNECTING: "正在连接...",
      KEEP_TAPPING: "保持敲击节拍...",
      PLAYLISTS: "播放列表",
      PRESET_LOADED: "已载入预置<br>{0}<br>",
      NO_PAN_ON_MONO_AUX: "单声道辅助通道<br>无声像",
      PARAM_GLOBAL: "{0}参数（全局）",
      CLEAR_ALL_SOLOS: "清除所有独奏",
      POST: "后置",
      PRE: "前置",
      SET_ALL_CHANNELS_TO: '设置所有通道至"{0}"?',
      SAVED: "已保存",
      REPLACE_PRESET: '替换预置"{0}"?',
      REPLACE_SNAPSHOT: '替换记忆点"{0}"?',
      FACTORY: "工厂设定",
      USER: "用户",
      DELETE_PRESET: '删除预置"{0}"?',
      OUT_OF_RANGE: "超出范围",
      ERROR: "错误",
      ENTER_BPM: "输入BPM",
      NO_ASSIGNED_SUBGROUP: '编组"{0}"不含已分配通道',
      NO_ASSIGNED_VIEWGROUP: '分组显示"{0}"不含已分配通道',
      NO_ASSIGNED_MG: '静音分组"{0}"不含已分配通道',
      SAVE_TO_SHOW: "保存至场景",
      DASHBOARD: "控制页面",
      INCOMPATIBLE_CHANNEL_TYPE: "通道类型不匹配",
      MIXER_RESET: "调音台重置",
      SAVE_SHOW_WITH_NAME: "保存场景名称为：",
      NEW_SHOW_NAME: "新场景名称:",
      SHOW_ALREADY_EXISTS: "场景已存在",
      DELETE_SHOW: '删除场景"{0}"?',
      SAVE_SNAPSHOT_WITH_NAME: "保存记忆点为：",
      NEW_SNAPSHOT_NAME: "新记忆点名称:",
      DELETE_SNAPSHOT: '删除记忆点"{0}"?',
      LOAD_THE_INITIAL_MIXER_STATE: "载入调音台初始状态？",
      ERR_DELETESHOW: "删除场景错误。",
      ERR_CREATESHOW: "创建场景错误。",
      ERR_LOADSHOW: "载入场景错误。",
      ERR_SAVESHOW: "保存场景参数错误。",
      ERR_RENAMESHOW: "重命名场景错误。",
      ERR_SAVEINIT: "无法保存初始记忆点。",
      ERR_SAVESNAPSHOT: "保存记忆点错误。",
      ERR_LOADSNAPSHOT: "载入记忆点错误。",
      ERR_DELETESNAPSHOT: "删除记忆点错误。",
      ERR_RENAMEINIT: "无法重命名初始记忆点。",
      ERR_RENAMESNAPSHOT: "重命名记忆点错误。",
      ERR_DELETEPRESET: "删除预置错误。",
      ERR_WRITEPRESET: "写入预置错误。",
      ERR_RENAMEPRESET: "重命名预置错误。",
      INITIAL_VALUES_LOADED: "已载入初始值。",
      MIX: "调音",
      AUX_SENDS: "辅助发送",
      AUX_SENDS_X: "辅助发送：{0}",
      FX_SENDS: "效果发送",
      FX_EDIT: "效果编辑",
      GROUPS: "分组",
      THRESHOLD: "门限",
      THRESH: "门限",
      REVERB_SEND: "混响发送",
      CHORUS_SEND: "合唱发送",
      DELAY_SEND: "延时发送",
      ROOM_SEND: "房间模式发送",
      HPF_FREQ: "高频滤波频率",
      NOTCH_FREQ: "陷波滤波频率",
      METERS: "仪表",
      OUT: "输出",
      IN: "输入",
      BAND: "频段",
      SETTINGS: "设置",
      MORE_ME: "关于ME",
      DEMO_VERSION: "DEMO版本",
      LINE_IN: "线路输入",
      LINE: "线路",
      MODE: "模式",
      CHANNEL: "通道",
      SUPPORT: "支持",
      RENAME_CHANNEL: "重命名通道({0})",
      CENTER: "中置",
      SETUP: "设置",
      JUMP_TO: "跳转至",
      FUNCTIONS: "功能",
      BACK: "返回",
      SAVE_PRESET_WITH_NAME: "保存预置为：",
      RENAME_PRESET: "重命名预置：",
      NO_ACTIVE_SHOW: "无运行场景",
      DEESSER: "齿音消除器",
      INPUTS: "输入",
      ARE_YOU_SURE: "确定？",
      ABOUT: "关于",
      LIVE: "实况",
      FIXED: "固定",
      MUTE_GROUP_X: "静音分组{0}",
      TAP_X_BPM: "设置{0} BPM",
      MOUNTCHANGED: "已更改安装",
      MOUNT: "已插入USB",
      UNMOUNT: "已移除USB",
      DISABLED: "禁用",
      ENABLED: "启用",
      SINGLE: "单一模式",
      MULTIPLE: "多样模式",
      LOCAL: "本地",
      GLOBAL: "全局",
      LEVEL: "电平",
      TREBLE: "高音",
      MID: "中音",
      BASS: "低音",
      NO_CONTROLS_FOR_THIS_CHANNEL: "本通道不受控",
      UNASSIGN_ME: "取消定义ME",
      ASSIGN_ME: "定义ME",
      UNASSIGN_MY_OUT: "取消分配至MY OUT",
      ASSIGN_MY_OUT: "分配至MY OUT",
      NO_SEND_LEVELS: "无发送电平",
      CANCEL: "取消",
      FULL: "已满",
      RELOAD_UI: "重新加载用户界面令设置更改生效？",
      BAD_BROWSER: "该浏览器不支持Websocket。请使用其它浏览器。",
      AFS_FIXED_INFO: "反馈测试模式。请确保除话筒-扬声器反馈测试音频信号外，<br>无其它输入音频信号<br>。",
      RECORDINGS: "录音",
      READING: "正在读取...",
      FIRMWARE_FOUND: "USB设备中检测到固件更新图像。<br><br>确定更新？",
      FIRMWARE_UPDATED: "更新成功。<br>请先关闭设备10秒，再重新开启并载入该页面。<br>注意：可能需手动连接无线网络。",
      MSGBTN_UPDATE: "更新",
      MSGBTN_CANCEL: "取消",
      MSGBTN_OK: "OK",
      UPDATE_ALREADY: "已尝试更新。<br><br>请重启设备以恢复。",
      UPDATE_COMPLETED: "系统更新完毕。请重启设备与重新载入该页面，令更新生效。",
      UPDATE_ERROR: "执行更新错误。",
      REC_ERRSEQ: "录音：序列文件写入USB设备错误（存储空间不足？）。",
      REC_ERRWRITE: "录音：写入USB设备错误（存储空间不足？）。",
      REC_ERRNOSTICK: "录音：USB设备未插入录音接口。",
      REC_ERRNOACCESS: "录音：无法写入USB设备。",
      REC_ERRCREATE: "录音：无法在USB设备中创建文件夹。",
      SHOWEXP_NOTFOUND: "导出/导入：无相关文件。",
      SHOWEXP_USBNOTFOUND: "未找到USB设备。",
      SHOWEXP_WRITEERR: "导出失败：无法写入至存储设备。",
      SHOWEXP_INTREADERR: "导出失败：读取源文件错误。",
      SHOWEXP_EXPFAILED: "部分文件无法导出。",
      SHOWEXP_SUCCESS: "导出成功。",
      SHOWIMP_FAILED: "部分文件无法导入。",
      SHOWIMP_SUCCESS: "导入成功。",
      SHOWIMP_NOTFOUND: "导入错误：找不到源文件。",
      SHOWIMP_FILNOTFOUND: "USB中无相关文件",
      IMPORT_SHOW_FROM_USB: "从USB导入场景",
      NO_SHOW_SELECTED: "无场景选中",
      EXPORT_SHOW_TO_USB: "导出场景至USB：{0}",
      IMPORT_SHOW: "导入场景",
      EXPORT_SHOW: "导出场景",
      LANGUAGE: "语言",
      NO_ME_CHANNELS: "无ME通道",
      NO_AUX_OUT: "无辅助输出",
      CUE: "下一首",
      AUTO: "自动",
      FRAME_RATE: "帧速率",
      DISABLE_RETINA: "禁用RETINA",
      DISABLE_RESCALING: "禁用缩放",
      GUI_PERFORMANCE: "图形用户界面显示",
      HEADPHONES_OUT: "耳机输出",
      BUTTON_FUNCTION: "按键功能",
      KINETIC_SCROLL: "触点滚动",
      FADER_GLOW: "推子显示",
      DISABLE_LED_METERS: "LED电平显示",
      MASTER_LOCK: "主控锁定",
      HIDE_COMP_GATE: "隐藏压缩器/噪声门",
      HIDE_DB_MARKS: "隐藏DB标示",
      PIN_SO_FOR_AUX_FX_SENDS: "辅助/效果发送页面侧拉窗口展开模式",
      PIN_SLIDEOUT_IN_MIX_MODE: "调音页面侧拉窗口展开模式",
      SOLO_MODE: "独奏模式",
      SOLO_ROUTING: "独奏路径",
      HEADPHONES: "耳机",
      HP: "耳机",
      AUTOCLOSE_SLIDEOUT: "自动关闭侧拉视窗",
      METER_QUANTISATION: "电平量化",
      RECORD_MODE: "两轨录音格式",
      MULTITRACK_MODE: "多轨格式",
      MIXER_SCROLLING: "调音台滑动",
      DIM_LED_METERS: "调暗LED电平显示",
      UTILITY: "功能",
      ONE_FINGER: "单指",
      TWO_FINGERS: "双指",
      IMPORT_ALL_PRESETS: "导入所有预置",
      EXPORT_ALL_PRESETS: "导出所有预置",
      NO_CONNECTION_TO_MIXER: "无设备连接至调音台",
      OFFLINE: "离线",
      VERSION: "版本",
      COPY_TO_CLIPBOARD: "复制到剪切板",
      COPYRIGHT_MSG: "所有第三方标识均为其各自所有者的商标。 此类标志仅用于说明开发本产品时审查过的产品音质，不用于说明与哈曼国际工业公司（Harman International Industries，Incorporated）的关系。",
      FILTER: "滤波器",
      DISPLAY: "显示",
      SENSITIVITY: "灵敏度",
      CLEAR_FIXED: "消除固定",
      CLEAR_ALL: "消除所有",
      CLEAR_LIVE: "消除实况",
      NAME_SSID: "名称（SSID）",
      SUBNET_MASK: "子网掩码",
      WIRELESS_NETWORK: "无线网络",
      SECURITY_OPTIONS: "安全设置选项",
      LAN_IP_ADDRESS: "局域网IP地址",
      UP: "向上",
      DOWN: "向下",
      ETHERNET: "以太网",
      HOTSPOT: "热点",
      CLOSE: "关闭",
      COPY_MIX: "复制调音",
      NO_CONNECTION: "未连接",
      NO_CURRENT_SNAPSHOT: "无当前记忆点",
      PATTERNED_BACKGROUND: "图案背景",
      ROUTING: "路径",
      INPUT_SOURCE: "输入音源",
      HARDWARE: "硬件",
      MULTI_TRACK: "多轨",
      OUTPUT_DESTINATION: "输出至",
      L: "左",
      R: "右",
      RECORDING_DROPOUT: "退出录音",
      USB_REC_TOO_SLOW: "USB录音过慢",
      USB_REC_BUFFER: "USB录音缓存",
      RECORDER_IS_BUSY: "录音中...",
      IMPORT_USER_CONFIG: "导入用户配置",
      EXPORT_USER_CONFIG: "导出用户配置",
      OVERVIEW: "概览",
      CHANNEL_SOURCE: "通道音源",
      CHANNEL_OUTPUT_DESTINATION: "通道输出至",
      MISC: "音乐",
      DISABLE_VU_INPUT_LEVEL: "关闭输入电平信号显示",
      DISABLE_VU_PEAK: "关闭输入电平峰值显示",
      SOLO_TYPE: "独奏类型",
      AFL: "推子后监听",
      PFL: "推子前监听",
      WRONG_VALUE: "错误数值",
      INPUT_DELAY: "输入延时",
      OUTPUT_DELAY: "输出延时",
      PEDAL_FUNCTION: "脚踏开关功能",
      CONFIG_WARNING: "警告：仅存储该设备专用的视觉/图形设置。<br>该设置不对调音台操作造成影响。",
      SET_TO_ZERO_DB: "重设至0dB",
      SET_OUTPUT_DELAY: "设置输出延时",
      SET_OUTPUT_DELAY_LEFT: "左声道延时",
      SET_OUTPUT_DELAY_RIGHT: "右声道延时",
      MASTER_PRESETS: "主控预置",
      LEFT: "左声道",
      RIGHT: "右声道",
      SHORTCUTS: "快捷方式",
      SLAVE: "从属",
      SUB: "编组",
      SAMPLES: "采样",
      FT: "英尺",
      EXCEEDS_MAXIMUM_DELAY: "超过最高延时",
      TOGGLE_PLAY: "切换播放",
      TOGGLE_REC: "切换录音",
      NONE: "无",
      ISOLATION: "隔离",
      MIC_GAIN: "话筒增益",
      PHASE: "相位",
      CHANNELS: "通道",
      MATRICES: "矩阵",
      MATRIX: "矩阵",
      HOLD: "保持",
      COMP: "压缩器",
      DEPTH: "深度",
      ISOLATE: "隔离",
      PATCHING: "跳线",
      DETUNE: "变调",
      DENSITY: "密度",
      HPF: "高通滤波",
      PANNING: "声像",
      COMPRESSOR: "压缩器",
      GEQ: "图示均衡器",
      CASCADE: "分级",
      CASCADE_MASTER: "分级主控",
      SOUNDCHECK: "试音",
      SOUNDCHECK_ASSIGN: "试音分配",
      DIRECT_OUT: "直接输出",
      LOCATE: "查找",
      ENABLE: "启用",
      DISABLE: "禁用",
      NAME: "名称",
      EMPTY: "空置",
      SESSIONS: "阶段",
      MIXER_PATCH: "调音台跳线",
      NO_PATCH: "无跳线",
      SPACE_REMAINING: "剩余空间",
      EDIT_CHANNEL: "编辑通道",
      ETH: "以太网",
      RESET_ALL: "全部重置",
      NOTCH_F: "陷波滤波器",
      DIRECT_OUTPUT: "直接输出",
      FADER_POSITION: "推子位置",
      MASTER_CHANNEL_RANGE: "主控通道范围",
      IOSYS_PRESET_LOADING: "载入IOSYS预置",
      HEADPHONE_SIGNAL_DIRECTION: "耳机通道",
      MTX: "矩阵",
      SWITCH_TO_MATRIX: "切换至矩阵",
      SWITCH_TO_AUX: "切换至辅助",
      GATE_PRESETS: "噪声门预置",
      AFS_PRESETS: "AFS2预置",
      PRE_PROCESSING: "处理前",
      POST_PROCESSING: "处理后",
      ADDITIONAL_CHANNEL_DESTINATION: "直接输出",
      NO_PAN_ON_MONO_MATRIX: "单声道矩阵无声像<br>",
      NO_USB_DEVICE_SELECTED: "无USB设备选中",
      GLOBAL_PRE_FADE_AUX_SEND_POINT: "全局辅助发送点",
      SHUFFLE: "翻页",
      EZ_EQ: "EZ均衡器",
      MOREME_PORTRAIT_MODE: "关于ME纵向视图模式",
      RESET_LOCAL_SETTINGS: "重置本地设置",
      SYNC_ID: "ID同步",
      SYNC_SELECTED_CH: "同步所选通道",
      ACCESS_LIMITING: "访问限制",
      PASSWORD: "密码",
      ACCESS: "访问权限",
      MONITOR_ACCESS_LIMIT: "访问权限（本地）",
      ALLOW_ACCESS_FOR: "允许访问",
      ALLOW_CLIENT_ACCESS_FOR: "非主用户登录访问",
      LOCAL_AUX_CONTROL: "本地辅助控制（软访问权限）",
      MASTER_VOLUME: "主控音量",
      ACCOUNT: "总值",
      MASTER_PASSWORD_PROTECTION: "主用户密码保护式访问权限（全局）",
      LOG_IN: "登录",
      LOG_OUT: "退出",
      AUX_LEVELS: "辅助通道电平",
      AUX_PROCESSING: "辅助通道处理",
      MIX_LEVELS: "调音通道电平",
      MIX_PROCESSING: "调音通道处理",
      MASTER_LEVEL: "主控通道电平",
      MASTER_PROCESSING: "主控处理",
      GLOBAL_SETTINGS: "全局设置",
      LOCAL_SETTINGS: "本地设置",
      SET_MASTER_PASS: "设置主用户密码",
      ENTER_PASS_TO_UNLOCK: "输入密码解锁",
      ENTER_PASS: "输入密码",
      WRONG_PASSWORD: "密码错误",
      UNLOCKED: "已解锁",
      LOGGED_IN: "已登录",
      LOGGED_OUT: "已退出",
      OVERRIDDEN_BY_WIFI: "已使用WIFI",
      MTK_PLAY: "多轨播放",
      MTK_RECORD: "多轨录音",
      NEW_VALUE: "新数值",
      M_USB_B: "USB-DAW",
      M_LOCAL: "M-本地",
      S_LOCAL: "S-本地",
      SLOT: "线槽",
      INSERT_OPTION: "插入USB-DAW",
      TWO_TRACK_USB: "两轨USB",
      MTK_USB_RECORD: "多轨USB录音",
      MULTITRACK: "多轨",
      MULTITRACK_CONFIG: "多轨配置",
      MTK_USB_PLAYBACK: "多轨USB回放",
      PREVIOUS_SNAPSHOT: "上一个记忆点",
      AFS_SETTINGS: "AFS设置",
      AUX_CONTRIB: "辅助信号",
      CONTRIB_PANNING: "信号声像",
      CONTRIB_BUS_POINTS: "信号总线点",
      FX_SEND_LEVELS: "效果发送电平",
      AUX_MTX_SEND_LEVELS: "辅助/矩阵发送电平",
      BALANCE_PANNING: "平衡（声像）",
      BALANCE: "平衡",
      VCA: "压控编组",
      SLOPE: "斜率",
      ASSIGN_VCA: "分配压控编组",
      UNASSIGN_VCA: "取消分配压控编组",
      AUX_SEND_SOURCE: "辅助发送源",
      AUX_SEND_MUTE_INHERITANCE: "辅助发送静音复制",
      AUX_SEND_MUTE_INHERITANCE2: "辅助发送静音复制",
      MIXER_CHANNEL: "调音台通道",
      GROUP_NAME: "群组名称",
      PATCH_1_1: "跳线1:1",
      ACTIVATE_SOUNDCHECK: "开启试音",
      HP_VOLUME: "耳机{0}音量",
      SOLO_LEVEL: "独奏电平",
      CURRENT_VALUES_WILL_BE_LOST: "当前数值将丢失，是否继续？",
      VCA_GROUP_BUTTON_ASSIGN: "分配压控编组按键",
      COPY_MIX_TO_AUX: "复制调音至辅助",
      MASTERS: "主控",
      FX_MASTERS: "效果主控",
      BIGGER_SLIDEOUT: "大侧拉窗口",
      LOGIN: "登录",
      DELETE_SESSION: "删除阶段",
      VCA_GROUP_SPREAD: "压控编组扩展显示",
      VCA_SPREAD: "压控编组扩展",
      RECORD_CHANNELS: "录音通道",
      SELECT_ALL: "选择全部",
      MAXIMUM_NUMBER_OF_RECORD_SLOTS_USED: "录音线槽的最高数量",
      RECORDING_CHANNEL_LIMIT_FULL: "录音通道限量满额",
      VCA_MASTERS: "压控编组主控",
      VIEW_GROUP: "分组显示",
      MUTE_GROUP: "静音分组",
      MTK: "多轨",
      DIM: "调低音量",
      BUFFER: "缓存",
      START: "开始",
      SPILL: "溢出显示",
      END: "结束",
      RECORD_IS_ACTIVE: "正在录音",
      FX_SEND: "效果发送",
      NOT_AVAILABLE: "不可用",
      NO_ASSIGNED_CHANNELS: "无分配通道",
      VCA_SPILL: "压控编组溢出显示",
      MASTER_MTX_SEND_POINT: "主控矩阵发送点",
      REC_ERRNOSELECT: "无多轨通道用于录音",
      REC_ERRDROPOUT: "错误：USB无法快速处理多轨录音。请减少录音音轨或更换高性能USB存储盘。",
      REC_ERRSESSNAME: "无效阶段名称，使用默认名称。",
      REC_ERRPLAYING: "播放时无法使用多轨录音功能。",
      PLAY_ERRREC: "录音时无法使用多轨回放功能。",
      LOCAL_SETTINGS_PRESETS: "本地设置预置",
      TRANSLATIONS_END: "-----",
    };
    langBase.de = {
      lang: "GERMAN",
      ASSIGN_SUB_GROUP: "SUBGRUPPE {0} ZUWEISEN",
      AUX_SENDS_FOR: "{0}  AUX WEGE",
      CH: "KA",
      CONFIG: "KONFIG",
      COPY_SETTINGS: "EINSTELLUNGEN KOPIEREN",
      DELAY_LENGTH: "DELAY LÄNGE",
      DELETE: "LÖSCHEN",
      DISABLE_STEREO_LINK: "STEREO LINK DEAKTIVIEREN",
      FEEDBACK_AMOUNT: "FEEDBACK ANTEIL",
      FX_RETURNS: "FX RÜCKWEGE",
      GROUP: "GRUPPE",
      HF_DAMPING: "HF DÄMPFUNG",
      HIGHPASS_FILTER: "HOCHPASS FILTER",
      INPUT: "EINGANG",
      LENGTH_SUBDIVISION: "LÄNGE SUBDIVISION",
      LOAD: "LADEN",
      LOCK: "SPERREN",
      LOWPASS_FILTER: "TIEFPASS FILTER",
      MANUAL: "MANUELL",
      MEDIA: "MEDIEN",
      MUTE_ALL: "MUTE ALLE",
      NETWORK: "NETZWERK",
      NEW: "NEU",
      OFF: "AUS",
      ON: "EIN",
      PLAYLIST: "WIEDERGABELISTE",
      RENAME: "UMBENENNEN",
      RESET: "ZURÜCKSETZEN",
      RESET_CHANNEL: "KANAL ZURÜCKSETZEN",
      REVERB: "HALL",
      REVERB_TIME: "HALLZEIT",
      ROOM: "RAUMHALL",
      SAVE: "SPEICHERN",
      SEND: "WEG",
      SENDS: "WEGE",
      SPEED: "GESCHWINDIGKEIT",
      UNASSIGN_SUB_GROUP: "SUBGRUPPE {0} ENTZIEHEN",
      VIEWS: "ANSICHTEN",
      PLACE_BEFORE_INPUTS: "VOR EINGÄNGEN EINFÜGEN",
      FILES: "DATEIEN",
      CONNECTING: "Anschluss...",
      PLAYLISTS: "WIEDERGABELISTEN",
      ERR_SAVEINIT: "Speichern * Init * fehlgeschlagen.",
      ERR_RENAMEINIT: "Umbenennen * Init * snapshot fehlgeschlagen.",
      AUX_SENDS_X: "{0}  AUX WEGE",
      TREBLE: "HÖHEN",
      MID: "MITTEN",
      HEADPHONES: "KOPFHÖRER",
      SECURITY_OPTIONS: "SICHERHEITSOPTIONEN",
      ACCESS_LIMITING: "ZUGANGSBERECHTIGUNG",
      TRANSLATIONS_END: "-----",
    };
    langBase.fr = {
      lang: "FRENCH",
      APPLY: "APPLIQUER",
      ASSIGN_SUB_GROUP: "GROUPES ASSIGN SUB {0}",
      ATTACK: "ATTAQUE",
      AUX_MASTERS: "AUX GÉNÉRAUX",
      AUX_SENDS_FOR: "ENVOI AUX: {0}",
      BANKS: "BANQUES",
      BASS_GAIN: "GAIN DE BASSES",
      CHANNEL_SAFES: "CANAUX SAUVEGARDÉS",
      CHANNEL_PRESETS: "PRESETS CANAUX",
      CHORUS_FX_GLOBAL: "CHORUS FX (GÉNÉRAL)",
      CLEAR_SOLO: "EFFAC SOLO",
      CONNECTED_DEVICE_NAME: "NOM DE L’APPAREIL CONNECTÉ",
      COPY_SETTINGS: "COPIER RÉGLAGES",
      CURRENT_SHOW: "VISUEL ACTUEL",
      DELAY_LENGTH: "LONGUEUR DE DELAY",
      DELETE: "EFFACE",
      DISABLE_STEREO_LINK: "DESACTIVE LIEN STEREO",
      EXPORT: "EXPORTATION",
      FEEDBACK: "RETOUR",
      FEEDBACK_AMOUNT: "SOMME DE RETOUR",
      FX_RETURNS: "RETOUR FX",
      GROUP: "GROUPE",
      HELP: "AIDE",
      HF_DAMPING: "AMORTISSEMENT HF",
      HIGHPASS_FILTER: "FILTRE PASSE BAS",
      IMPORT: "IMPORTATION",
      INPUT: "ENTRÉES",
      LENGTH_SUBDIVISION: "LONGUEUR DE SUBDIVISION",
      LOAD: "CHARGEMENT",
      LOAD_PRESET: "CHARGEMENT PRESET",
      LOCK: "FERMÉ",
      LOWPASS_FILTER: "FILTRE PASSE HAUT",
      MANUAL: "MANUEL",
      MASTER: "GÉNÉRAL",
      MASTER_EQ: "EQ MAÎTRE",
      MUTE_GROUP_BUTTON_ASSIGN: "BOUTON ASSIGN GROUPE MUTE",
      MUTE_GROUPS: "GROUPES MUTE",
      NETWORK: "RÉSEAU",
      NEW: "NOUVEAU",
      NEW_SNAPSHOT: "NOUVEL INSTANTANÉ",
      NEXT_SNAPSHOT: "PROCHAIN INSTANTANÉ",
      OFF: "ARRÊT",
      ON: "MARCHE",
      ONLINE_SUPPORT: "Support en ligne",
      PASTE_SETTINGS: "COLLER RÉGLAGES",
      PERMIT: "PERMIS",
      PLAY: "LECTURE",
      PLAYER: "LECTEUR",
      PLAYLIST: "LISTE DE LECTURE",
      RECORD: "ENREGISTREMENT",
      RELEASE: "RELACHE",
      RENAME: "RENOMMER",
      RESET: "REINIT",
      RESET_CHANNEL: "REINIT CANAL",
      REVERB_TIME: "TEMPS DE REVERB",
      REVERB_FX_GLOBAL: "REVERB FX (GÉNÉRAL)",
      ROOM: "CHAMBRE",
      SAVE: "SAUVEGARDE",
      SHOWS: "VISUELS",
      SNAPSHOTS: "INSTANTANÉS",
      SPEED: "VITESSE",
      STEREO_LINK: "LIEN STÉRÉO",
      SUB_GROUP_FADER_ASSIGN: "POTENTIOMÈTRE ASSIGN GROUPE SUB",
      SUB_GROUP_SPREAD: "PROPAG GROUPE",
      SUB_GROUPS: "GROUPES SUB",
      THIN: "FAIBLE",
      UPDATE_CURRENT_SNAPSHOT: "CHANGER L’INSTANTANÉ ACTUEL",
      VIEW_GROUP_BUTTON_ASSIGN: "BOUTON ASSIGN GROUPE VUE GROUP",
      VIEW_GROUPS: "GROUPES VISUEL",
      VIEWS: "VISUELS",
      PLACE_AFTER_INPUTS: "PLACE AVANT ENTRÉES",
      MUTE_FX_CANCEL: "ANNUL MUTE FX ",
      MUTE_ALL_CANCEL: "ANNUL MUTE ALL",
      MUTEGROUP_1_ACTIVATED: "MUTE GROUP {0} MARCHE",
      MUTEGROUP_1_DEACTIVATED: "MUTE GROUP {0} ARRÊT",
      NO_SNAPSHOT: "PAS D’INSTANTANÉS",
      LOAD_NEXT_SNAPSHOT: "CHARGEMENT INSTANTANÉ SUIVANT",
      CHANNEL_EQ_PRESETS: "PRESETS D’EQ DE CANAL",
      AUX_EQ_PRESETS: "PRESETS D’EQ D’AUX",
      MASTER_EQ_PRESETS: "PRESETS D’EQ GÉNÉRAL",
      CHANNEL_DYN_PRESETS: "PRESETS D’EFFETS DYN DE CANAL",
      AUX_DYN_PRESETS: "PRESETS D’EFFETS DYN D’AUX",
      MASTER_DYN_PRESETS: "PRESETS D’EFFETS DYN GÉNÉRAL",
      DELAY_FX_PRESETS: "PRESETS D’EFFETS DELAY",
      CHORUS_FX_PRESETS: "PRESETS D’EFFETS CHORUS",
      REVERB_FX_PRESETS: "PRESETS D’EFFETS REVERB",
      ROOM_PRESETS: "PRESETS D’EFFETS CHAMBRE",
      DIGITECH_PRESETS: "PRESETS DIGITECH",
      FILES: "FICHIERS",
      CONNECTING: "Connection...",
      KEEP_TAPPING: "CONTINUEZ À TAPER...",
      PLAYLISTS: "LISTES DE LECTURE",
      PRESET_LOADED: "PRESET<br>{0}<br>CHARGÉ",
      NO_PAN_ON_MONO_AUX: "PAS DE PAN <br> MARCHE MONO AUX",
      PARAM_GLOBAL: "{0} PARAMÈTRES (GÉNÉRAL)",
      CLEAR_ALL_SOLOS: "EFFAC SOLOS",
      POST: "APRÈS",
      PRE: "AVANT",
      SET_ALL_CHANNELS_TO: 'REGLER TOUS CANAUX VERS "{0}" ?',
      SAVED: "SAUVEGARDÉ",
      REPLACE_PRESET: 'REMPLACE PRESET "{0}"?',
      REPLACE_SNAPSHOT: 'REMPLACE INSTANTANÉ "{0}"?',
      FACTORY: "USINE",
      USER: "UTILISATEUR",
      DELETE_PRESET: 'EFFACE PRESET "{0}" ?',
      OUT_OF_RANGE: "HORS DE PORTÉE",
      ERROR: "ERREUR",
      NO_ASSIGNED_SUBGROUP: "PAS DE CANAUX ASSIGNÉS EN <br>SOUS GROUPE {0}",
      NO_ASSIGNED_VIEWGROUP: "PAS DE CANAUX ASSIGNÉS EN GROUPES <br>DE VUES {0}",
      SAVE_TO_SHOW: "SAUVEGARDER VERS VISUELS",
      DASHBOARD: "TABLEAU DE BORD",
      INCOMPATIBLE_CHANNEL_TYPE: "TYPE DE CANAL INCOMPATIBLE",
      MIXER_RESET: "REINIT MIXER",
      SAVE_SHOW_WITH_NAME: "SAUVEGARDE VISUEL AVEC NOM:",
      NEW_SHOW_NAME: "NOUVEAU NOM DE VISUEL:",
      SHOW_ALREADY_EXISTS: "VISUEL DÉJÀ EXISTANT",
      DELETE_SHOW: 'EFFACER VISUEL "{0}"?',
      SAVE_SNAPSHOT_WITH_NAME: "SAUVEGARDER INSTANTANÉ AVEC NOM:",
      NEW_SNAPSHOT_NAME: "NOUVEAU NOM D’INSTANTANÉ:",
      DELETE_SNAPSHOT: 'EFFACER INSTANTANÉ "{0}"?',
      ERR_DELETESHOW: "Erreur d’effacement de visuel.",
      ERR_CREATESHOW: "Erreur de création de visuel.",
      ERR_LOADSHOW: "Erreur de chargement de visuel.",
      ERR_SAVESHOW: "Erreur de sauvegarde de paramètres de visuels.",
      ERR_RENAMESHOW: "Erreur pour renommer le visuel.",
      ERR_SAVEINIT: "Impossible de re sauvegarder  * Init * instantané. ",
      ERR_SAVESNAPSHOT: "Erreur de sauvegarde d’instantané.",
      ERR_LOADSNAPSHOT: "Erreur de chargement d’instantané.",
      ERR_DELETESNAPSHOT: "Erreur d’effacement d’instantané.",
      ERR_RENAMEINIT: "Impossible de renommer l’instantané * Init *.",
      ERR_RENAMESNAPSHOT: "Erreur pour renommer l’instantané.",
      ERR_DELETEPRESET: "Erreur d’effacement de preset. ",
      ERR_WRITEPRESET: "Erreur d’écriture du preset.",
      ERR_RENAMEPRESET: "Erreur pour renommer le preset.",
      INITIAL_VALUES_LOADED: "Valeurs initiales chargées.",
      AUX_SENDS: "ENVOI AUX",
      AUX_SENDS_X: "ENVOI AUX: {0}",
      FX_SENDS: "ENVOI FX",
      GROUPS: "GROUPES",
      THRESHOLD: "SEUIL",
      BUTTON_FUNCTION: "BOUTON FONCTION",
      KINETIC_SCROLL: "MENU DÉROULANT DYNAMIQUE",
      DISABLE_LED_METERS: "DESACTIVATION LED MÊTRE",
      PIN_SLIDEOUT_IN_MIX_MODE: "PIN SORTIE SLIDE EN MODE MIX",
      SOLO_MODE: "MODE SOLO",
      NAME_SSID: "NOM SSID",
      WIRELESS_NETWORK: "RÉSEAU SANS FIL",
      SECURITY_OPTIONS: "OPTIONS DE SÉCURITÉ",
      ACCESS_LIMITING: "LIMITATION D’ACCÈS",
      PASSWORD: "MOT DE PASSE",
      TRANSLATIONS_END: "-----",
    };
    langBase.es = {
      lang: "SPANISH",
      APPLY: "APLICAR",
      ASSIGN_SUB_GROUP: "ASIGNAR SUBGRUPO {0}",
      ATTACK: "ATAQUE",
      AUX_MASTER_LEVELS: "NIVELES AUX MASTERS",
      AUX_SENDS_FOR: "ENVIOS AUX PARA",
      BANKS: "BANCOS",
      BASS_GAIN: "GANANCIA DE GRAVES",
      CH: "CANAL",
      CHANNEL_SAFES: "PROTECCIÓN CANAL",
      FX_SENDS_X: "ENVIOS DE EFECTO DE {0}",
      CHANNEL_PRESETS: "PRESETS DE CANAL",
      CHORUS_FX_GLOBAL: "EFECTO DE CHORUS GENERAL",
      CLEAR_SOLO: "QUITAR SOLO",
      CONFIGURATION: "CONFIGURACIÓN",
      CONNECTED_DEVICE_NAME: "NOMBRE DEL EQUIPO CONECTADO",
      COPY_SETTINGS: "COPIAR AJUSTES",
      CURRENT_SHOW: "SHOW ACTUAL",
      DELAY_FX_GLOBAL: "EFECTO DE DELAY GENERAL",
      DELAY_LENGTH: "LONGITUD DE DELAY",
      DELETE: "ELIMINAR",
      DISABLE_STEREO_LINK: "DESACTIVAR ENLACE EST REO",
      DOCUMENTATION: "DOCUMENTACION",
      DYN: "DIN MICA",
      EDIT: "EDITAR",
      EXPORT: "EXPORTAR",
      FAV_SHOW: "SHOW FAVORITO",
      FEEDBACK: "REALIMENTACIÓN",
      FEEDBACK_AMOUNT: "NIVEL DE REALIMENTACIÓN",
      FREQ: "FRECUENCIA",
      FX_MODE_DEFAULT: "MODO EFECTO POR DEFECTO",
      FX_RETURNS: "RETORNOS DE EFECTO",
      FX_RETURNS_TO_AUX: "RETORNOS DE EFECTO A {0}",
      GAIN: "GANANCIA",
      GROUP: "GRUPO",
      HELP: "AYUDA",
      HF_DAMPING: "AMORTIGUAMIENTO DE AGUDOS",
      HIGHPASS_FILTER: "FILTRO PASO ALTO",
      IMPORT: "IMPORTAR",
      INPUT: "ENTRADA",
      LENGTH_SUBDIVISION: "LONGITUD DE SUBDIVISIÓN",
      LOAD: "CARGAR",
      LOAD_PRESET: "CARGAR PREAJUSTES",
      LOCK: "BLOQUEAR",
      LOCKED: "BLOQUEADO",
      LOWPASS_FILTER: "FILTRO PASO BAJO",
      MASTER_EQ: "ECUALIZACIÓN DE MASTER",
      MEDIA_FADER_BEFORE_CH1: "FADER DE MEDIA ANTES DEL CH1",
      MIX_GAIN: "GANANCIA DE MEZCLA",
      MUTE: "MUTEAR",
      MUTE_ALL: "MUTEAR TODO",
      MUTE_FX: "MUTEAR EFECTO",
      MUTE_GROUP_BUTTON_ASSIGN: "ASIGNACION DE BOTON DE MUTE DE GRUPO",
      MUTE_GROUPS: "MUTEAR GRUPOS",
      NETWORK: "RED",
      NEW: "NUEVO",
      NEW_SNAPSHOT: "NUEVA ESCENA",
      NEXT_SNAPSHOT: "SIGUIENTE ESCENA",
      OFF: "APAGAR",
      ON: "ENCENDER",
      ONLINE_SUPPORT: "SOPORTE ON LINE",
      PASTE_SETTINGS: "PEGAR AJUSTES",
      PERMISSIONS: "PERMISOS",
      PERMIT: "PERMITIR",
      PLAY: "REPRODUCCIÓN",
      PLAYER: "REPRODUCTOR",
      PLAYLIST: "LISTA DE REPRODUCCIÓN",
      PRESETS: "PREAJUSTES",
      RECORD: "REGISTRO",
      RELEASE: "SOLTAR",
      RENAME: "RENOMBRAR",
      RESET: "REINICIAR",
      RESET_CHANNEL: "REINICIAR CANAL",
      REVERB: "REVERBERACIÓN",
      REVERB_TIME: "TIEMPO DE REVERBERACIÓN",
      REVERB_FX_GLOBAL: "EFECTO REVERBERACIÓN GENERAL",
      ROOM: "R.HABITACIÓN",
      SAVE: "GUARDAR",
      SAVE_AS: "GUARDAR COMO",
      SEND: "ENVIAR",
      SENDS: "ENVIOS",
      SG: "SUBGRUPO",
      SNAPSHOTS: "CAPTURAS",
      SPEED: "VELOCIDAD",
      STEREO_LINK: "LINK EST REO",
      SUB_GROUP_FADER_ASSIGN: "ASIGNACIÓN DE FADER DE SUBGRUPO",
      SUB_GROUP_SPREAD: "PROPAGAR SUBGRUPO",
      SUB_GROUPS: "SUBGRUPOS",
      THIN: "FINO",
      TOTAL_VIEW: "VISION GLOBAL",
      UNASSIGN_SUB_GROUP: "DESASIGNAR SUBGRUPO",
      UPDATE_CURRENT_SNAPSHOT: "ACTUALIZAR ESCENA",
      USB_MEDIA_FILES: "ARCHIVOS USB MEDIA",
      VIEW_GROUP_BUTTON_ASSIGN: "VER ASIGNACIÓN DE BOTÓN DE GRUPO",
      VIEW_GROUPS: "VER GRUPOS",
      VIEWS: "VISTAS",
      SHOW_ALL_CHANNELS: "MOSTRAR TODOS LOS CANALES",
      PLACE_AFTER_INPUTS: "SITUAR DESPU S DE ENTRADAS",
      PLACE_BEFORE_INPUTS: "SITUAR ANTES DE ENTRADAS",
      GATE: "PUERTA",
      MUTE_FX_CANCEL: "CANCELAR MUTE DE EFECTO",
      MUTE_ALL_CANCEL: "ANULAR TODOS LOS MUTEOS",
      MUTEGROUP_1_ACTIVATED: "MUTE GRUPO {0} ACTIVADO",
      MUTEGROUP_1_DEACTIVATED: "MUTE GRUPO {0} DESACTIVADO",
      NO_SNAPSHOT: "SIN ESCENA",
      LOAD_NEXT_SNAPSHOT: "CARGAR SIGUIENTE ESCENA",
      CHANNEL_EQ_PRESETS: "PRESETS DE ECUALIZACIÓN DE CANAL",
      AUX_EQ_PRESETS: "PRESETS DE ECUALIZACIÓN DE AUXILIAR",
      MASTER_EQ_PRESETS: "PRESETS DE ECUALIZACIÓN DE MASTER",
      CHANNEL_DYN_PRESETS: "PRESETS DE DIN MICA DE CANAL",
      AUX_DYN_PRESETS: "PRESETS DE DIN MICA DE AUXILIAR",
      MASTER_DYN_PRESETS: "PRESETS DE DIN MICA DE MASTER",
      DELAY_FX_PRESETS: "PRESETS DE EFECTO DE DELAY",
      CHORUS_FX_PRESETS: "PRESETS DE EFECTO DE CHORUS",
      REVERB_FX_PRESETS: "PRESETS DE EFECTO DE REVERB",
      FILES: "ARCHIVOS",
      CONNECTING: "Conectando...",
      KEEP_TAPPING: "CONTINUA PULSANDO...",
      PLAYLISTS: "LISTAS DE REPRODUCCIÓN",
      PRESET_LOADED: "PRESET CARGADO",
      NO_PAN_ON_MONO_AUX: "SIN PANOR MICO EN AUXILIAR MONO",
      PARAM_GLOBAL: "PAR METROS GENERALES",
      CLEAR_ALL_SOLOS: "QUITAR TODOS LOS SOLOS",
      SET_ALL_CHANNELS_TO: 'AJUSTAR TODOS LOS CANALES A "{0}" ?',
      SAVED: "GUARDADO",
      REPLACE_PRESET: 'SUSTITUIR PRESET "{0}"?',
      REPLACE_SNAPSHOT: 'SUSTITUIR ESCENA "{0}"?',
      FACTORY: "F BRICA",
      USER: "USUARIO",
      DELETE_PRESET: 'ELIMINAR PRESET "{0}" ?',
      OUT_OF_RANGE: "FUERA DE RANGO",
      NO_ASSIGNED_SUBGROUP: "SUBGRUPO NO ASIGNADO",
      NO_ASSIGNED_VIEWGROUP: "VISTA DE GRUPO NO ASIGNADA",
      NO_ASSIGNED_MG: "MUTE DE GRUPO NO ASIGNADO",
      SAVE_TO_SHOW: "GUARDAR EN SHOW",
      DASHBOARD: "PANEL DE INSTRUMENTOS",
      INCOMPATIBLE_CHANNEL_TYPE: "TIPO DE CANAL INCOMPATIBLE",
      MIXER_RESET: "RESETEAR MEZCLADOR",
      SAVE_SHOW_WITH_NAME: "GUARDAR SHOW CON NOMBRE:",
      NEW_SHOW_NAME: "NUEVO NOMBRE DE SHOW:",
      SHOW_ALREADY_EXISTS: "ESTE SHOW YA EXISTE",
      DELETE_SHOW: 'ELIMINAR SHOW "{0}"?',
      SAVE_SNAPSHOT_WITH_NAME: "GUARDAR ESCENA CON NOMBRE:",
      NEW_SNAPSHOT_NAME: "NUEVO NOMBRE DE ESCENA:",
      DELETE_SNAPSHOT: 'ELIMINAR ESCENA "{0}"?',
      LOAD_THE_INITIAL_MIXER_STATE: "CARGAR ESTADO INICIAL DEL MEZCLADOR?",
      ERR_DELETESHOW: "ERROR AL ELIMINAR SHOW.",
      ERR_CREATESHOW: "ERROR AL CREAR SHOW.",
      ERR_LOADSHOW: "ERROR AL CARGAR SHOW.",
      ERR_SAVESHOW: "ERROR AL GUARDAR SHOW.",
      ERR_RENAMESHOW: "ERROR AL RENOMBRAR SHOW.",
      ERR_SAVEINIT: "ERROR AL GUARDAR ESTADO INICIAL.",
      ERR_SAVESNAPSHOT: "ERROR AL GUARDAR ESCENA.",
      ERR_LOADSNAPSHOT: "ERROR AL CARGAR ESCENA.",
      ERR_DELETESNAPSHOT: "ERROR AL ELIMINAR ESCENA.",
      ERR_RENAMEINIT: "ERROR AL RENOMBRAR ESTADO INICIAL.",
      ERR_RENAMESNAPSHOT: "ERROR AL RENOMBRAR ESCENA.",
      ERR_DELETEPRESET: "ERROR AL ELIMINAR EL PRESET.",
      ERR_WRITEPRESET: "ERROR DE ESCRITURA DE PRESET.",
      ERR_RENAMEPRESET: "ERROR AL RENOMBRAR PRESET.",
      SNAPLOAD: "CARGA DE ESCENA",
      INITIAL_VALUES_LOADED: "AJUSTES DE FABRICA CARGADOS.",
      AUX_SENDS_X: "ENVIOS AUX PARA",
      THRESHOLD: "UMBRAL",
      BUTTON_FUNCTION: "FUNCION DE BOTÓN",
      KINETIC_SCROLL: "DESPLAZAMIENTO CIN TICO",
      DISABLE_LED_METERS: "DESACTIVAR INDICADORES LED",
      PIN_SLIDEOUT_IN_MIX_MODE: "PIN DESCENDIENTE EN MODO MEZCLA",
      SOLO_MODE: "MODO SOLO",
      SOLO_ROUTING: "RUTEO DE SOLO",
      HEADPHONES: "AURICULARES",
      HP: "AUR",
      VERSION: "VERSIÓN",
      NAME_SSID: "NOMBRE SSID",
      WIRELESS_NETWORK: "RED INAL MBRICA",
      SECURITY_OPTIONS: "OPCIONES DE SEGURIDAD",
      ACCESS_LIMITING: "LIMITACI NÓDE ACCESO",
      PASSWORD: "CONTRASE A",
      TRANSLATIONS_END: "-----",
    };
    langBase.ru = {
      lang: "РУССКИЙ",
      APPLY: "ПРИМЕНИТЬ",
      ASSIGN_SUB_GROUP: "НАЗНАЧИТЬ ПОДГРУППУ {0}",
      ATTACK: "АТАКА",
      BANKS: "БАНКИ",
      BYPASS: "ОБХОД",
      CHANNEL_PRESETS: "ПРЕСЕТЫ КАНАЛОВ",
      CHORUS_FX_GLOBAL: "CHORUS FX (ГЛОБАЛЬНЫЕ)",
      CLEAR_SOLO: "ОЧИСТИТЬ SOLO",
      CONFIG: "КОНФИГ",
      CONFIGURATION: "КОНФИГУРАЦИЯ",
      CONNECTED_DEVICE_NAME: "ИМЯ УСТРОЙСТВА",
      COPY_SETTINGS: "КОПИРОВАТЬ НАСТРОЙКИ",
      CURRENT_SHOW: "ТЕКУЩЕЕ ШОУ",
      DELAY_LENGTH: "DELAY ДЛИНА",
      DELETE: "УДАЛИТЬ",
      DISABLE_STEREO_LINK: "ОТКЛЮЧИТЬ СТЕРЕО СВЯЗЬ",
      DOCUMENTATION: "ДОКУМЕНТАЦИЯ",
      EXPORT: "ЭКСПОРТ",
      FAV_SHOW: "ЛЮБИМОЕ ШОУ",
      FEEDBACK: "ОТДАЧА",
      FEEDBACK_AMOUNT: "ВЕЛИЧИНА ОТДАЧИ",
      GROUP: "ГРУППА",
      HELP: "ПОМОЩЬ",
      HF_DAMPING: "ГАШЕНИЕ ВЧ",
      HIGHPASS_FILTER: "ФИЛЬТР ВЧ",
      IMPORT: "ИМПОРТ",
      INPUT: "ВХОД",
      LOAD: "ЗАГРУЗИТЬ",
      LOAD_PRESET: "ЗАГРУЗИТЬ ПРЕСЕТ",
      LOCK: "ЗАМОК",
      LOWPASS_FILTER: "ФИЛЬТР НЧ",
      MANUAL: "РУЧН.",
      MEDIA_FADER_BEFORE_CH1: "КАНАЛ ПЛЕЕРА ВНАЧАЛЕ",
      MUTE_GROUP_BUTTON_ASSIGN: "НАЗНАЧЕНИЕ MUTE ГРУПП",
      MUTE_GROUPS: "MUTE ГРУППЫ",
      MUTES: "MUTE'Ы",
      NETWORK: "СЕТЬ",
      NEW: "НОВЫЙ",
      NEW_SNAPSHOT: "НОВЫЙ SNAPSHOT",
      NEXT_SNAPSHOT: "СЛЕДУЮЩИЙ SNAPSHOT",
      NORM: "НОРМ",
      OFF: "ВЫКЛ",
      ON: "ВКЛ",
      PASTE_SETTINGS: "ВСТАВИТЬ НАСТРОЙКИ",
      PERMISSIONS: "ДОСТУП",
      PERMIT: "ДОСТУП",
      PHANTOM: "УСИЛЕНИЕ",
      PLAY: "ИГРАТЬ",
      PLAYER: "ПЛЕЕР",
      PLAYLIST: "ПЛЕЙЛИСТ",
      PRESETS: "ПРЕСЕТЫ",
      RATIO: "КОЭФ.",
      RECORD: "ЗАПИСЬ",
      RENAME: "ПЕРЕИМЕНОВАТЬ",
      RESET: "СБРОС",
      RESET_CHANNEL: "СБРОСИТЬ КАНАЛ",
      ROOM: "ЭХО КОМНАТЫ",
      SAVE: "СОХРАНИТЬ",
      SAVE_AS: "СОХРАНИТЬ КАК",
      SHOWS: "ШОУ",
      SPEED: "СКОРОСТЬ",
      STEREO_LINK: "СТЕРЕО СВЯЗЬ",
      SUB_GROUP_FADER_ASSIGN: "НАЗНАЧИТЬ ПОДГРУППУ",
      SUB_GROUP_SPREAD: "ПОКАЗАТЬ ПОДГРУППУ",
      SUB_GROUPS: "ПОДГРУППЫ",
      THIN: "ТОНК",
      UNASSIGN_SUB_GROUP: "УБРАТЬ ИЗ ПОДГРУППЫ {0}",
      UPDATE_CURRENT_SNAPSHOT: "ОБНОВИТЬ ТЕКУЩИЙ SNAPSHOT",
      USB_MEDIA_FILES: "ФАЙЛЫ USB",
      VIEW_GROUP_BUTTON_ASSIGN: "НАЗНАЧИТЬ ВИЗУАЛЬНУЮ ГРУППУ",
      VIEW_GROUPS: "ВИЗУАЛЬНАЯ ГРУППА",
      VIEWS: "ВИДЫ",
      SHOW_ALL_CHANNELS: "ПОКАЗАТЬ ВСЕ КАНАЛЫ",
      PLACE_AFTER_INPUTS: "ПОМЕСТИТЬ ПОСЛЕ ВХОДОВ",
      PLACE_BEFORE_INPUTS: "ПОМЕСТИТЬ В НАЧАЛО",
      MUTE_FX_CANCEL: "ОТМЕНИТЬ MUTE FX",
      MUTE_ALL_CANCEL: "ОТМЕНИТЬ MUTE ALL",
      NO_SNAPSHOT: "НЕТ SNAPSHOT",
      LOAD_NEXT_SNAPSHOT: "ЗАГРУЗИТЬ СЛЕДУЮЩИЙ SNAPSHOT",
      CHANNEL_EQ_PRESETS: "ПРЕСЕТЫ EQ",
      AUX_EQ_PRESETS: "ПРЕСЕТЫ AUX EQ",
      MASTER_EQ_PRESETS: "ПРЕСЕТЫ MASTER EQ",
      CHANNEL_DYN_PRESETS: "ПРЕСЕТЫ DYN",
      AUX_DYN_PRESETS: "ПРЕСЕТЫ AUX DYN",
      MASTER_DYN_PRESETS: "ПРЕСЕТЫ MASTER DYN",
      DELAY_FX_PRESETS: "ПРЕСЕТЫ DELAY FX",
      CHORUS_FX_PRESETS: "ПРЕСЕТЫ CHORUS FX",
      REVERB_FX_PRESETS: "ПРЕСЕТЫ REVERB FX",
      FILES: "ФАЙЛЫ",
      CONNECTING: "СОЕДИНЕНИЕ...",
      KEEP_TAPPING: "ЖМИТЕ ДАЛЬШЕ...",
      PLAYLISTS: "ПЛЕЙЛИСТЫ",
      PRESET_LOADED: "ПРЕСЕТ<br>{0}<br>ЗАГРУЖЕН",
      NO_PAN_ON_MONO_AUX: "НЕТ БАЛАНСА<br>ДЛЯ МОНО AUX",
      PARAM_GLOBAL: "{0} ПАРАМЕТРЫ (ГЛОБАЛЬНЫЕ)",
      CLEAR_ALL_SOLOS: "СБРОСИТЬ ВСЕ SOLO",
      SET_ALL_CHANNELS_TO: 'УСТАНОВИТЬ ВСЕ КАНАЛЫ В "{0}" ?',
      SAVED: "СОХРАНЕНО",
      REPLACE_PRESET: 'ЗАМЕНИТЬ ПРЕСЕТ "{0}"?',
      REPLACE_SNAPSHOT: 'ЗАМЕНИТЬ SNAPSHOT "{0}"?',
      FACTORY: "ЗАВОД",
      USER: "ПОЛЬЗ",
      DELETE_PRESET: 'УДАЛИТЬ ПРЕСЕТ "{0}" ?',
      BPM: "УВМ",
      OUT_OF_RANGE: "ВНЕ ПРЕДЕЛА",
      ERROR: "ОШИБКА",
      NO_ASSIGNED_SUBGROUP: "НЕТ НАЗНАЧЕННЫХ КАНАЛОВ В <br>ПОДГРУППЕ {0}",
      NO_ASSIGNED_VIEWGROUP: "НЕТ НАЗНАЧЕННЫХ КАНАЛОВ В <br>ВИЗУАЛЬНОЙ ГРУППЕ {0}",
      NO_ASSIGNED_MG: "НЕТ НАЗНАЧЕННЫХ КАНАЛОВ В <br>MUTE ГРУППЕ {0}",
      SAVE_TO_SHOW: "СОХРАНИТЬ В SHOW",
      MIXER_RESET: "СБРОС МИКШЕРА",
      SAVE_SHOW_WITH_NAME: "СОХРАНИТЬ ШОУ С ИМЕНЕМ:",
      NEW_SHOW_NAME: "НОВОЕ ИМЯ ДЛЯ ШОУ:",
      SHOW_ALREADY_EXISTS: "ШОУ УЖЕ СУЩЕСТВУЕТ",
      DELETE_SHOW: 'УДАЛИТЬ ШОУ "{0}"?',
      SAVE_SNAPSHOT_WITH_NAME: "СОХРАНИТЬ SNAPSHOT С ИМЕНЕМ:",
      NEW_SNAPSHOT_NAME: "НОВОЕ ИМЯ ДЛЯ SNAPSHOT:",
      DELETE_SNAPSHOT: 'УДАЛИТЬ SNAPSHOT "{0}"?',
      LOAD_THE_INITIAL_MIXER_STATE: "ВЫПОЛНИТЬ СБРОС ПАРАМЕТРОВ МИКШЕРА?",
      INITIAL_VALUES_LOADED: "СБРОС ВЫПОЛНЕН",
      GROUPS: "ГРУППЫ",
      THRESHOLD: "ПОРОГ",
      OUT: "ВЫХОД",
      IN: "ВХОД",
      SETTINGS: "НАСТРОЙКИ",
      DEMO_VERSION: "ДЕМО ВЕРСИЯ",
      CHANNEL: "КАНАЛ",
      SUPPORT: "ПОДДЕРЖКА",
      RENAME_CHANNEL: "ПЕРЕИМЕНОВАТЬ КАНАЛ ({0})",
      CENTER: "ЦЕНТР",
      SETUP: "НАСТРОЙКИ",
      JUMP_TO: "ПЕРЕЙТИ К",
      BACK: "НАЗАД",
      SAVE_PRESET_WITH_NAME: "СОХРАНИТЬ ПРЕСЕТ С ИМЕНЕМ:",
      RENAME_PRESET: "ПЕРЕИМЕНОВАТЬ ПРЕСЕТ:",
      NO_ACTIVE_SHOW: "НЕТ АКТИВНОГО ШОУ",
      ARE_YOU_SURE: "ВЫ УВЕРЕНЫ?",
      ABOUT: "ИНФО",
      MOUNTCHANGED: "USB НОСИТЕЛЬ СМЕНЁН",
      MOUNT: "ВСТАВЛЕН USB НАКОПИТЕЛЬ",
      UNMOUNT: "USB НАКОПИТЕЛЬ ИЗВЛЕЧЁН",
      SINGLE: "ОДИНОЧНЫЙ",
      MULTIPLE: "МНОЖЕСТВЕННЫЙ",
      LOCAL: "ЛОКАЛЬНЫЕ",
      GLOBAL: "ГЛОБАЛЬНЫЕ",
      NO_CONTROLS_FOR_THIS_CHANNEL: "НЕТ НАСТРОЕК ДЛЯ ЭТОГО КАНАЛА",
      CANCEL: "ОТМЕНА",
      RELOAD_UI: "ПЕРЕЗАПУСТИТЬ ПРОГРАММУ, ЧТОБЫ ИЗМЕНЕНИЯ ВСТУПИЛИ В СИЛУ?",
      BAD_BROWSER: "ВАШ БРАУЗЕР НЕ ПОДДЕРЖИВАЕТ НЕОБХОДИМЫЕ ТЕХНОЛОГИИ. ПОЖАЛУЙСТА, ИСПОЛЬЗУЙТЕ ДРУГОЙ БРАУЗЕР.",
      RECORDINGS: "Записи",
      READING: "Чтение...",
      MSGBTN_UPDATE: "ОБНОВИТЬ",
      MSGBTN_CANCEL: "ОТМЕНА",
      SHOWIMP_SUCCESS: "ИМПОРТ ЗАВЕРШЕН",
      IMPORT_SHOW_FROM_USB: "ИМПОРТ ШОУ С USB",
      NO_SHOW_SELECTED: "НЕ ВЫБРАНО ШОУ",
      IMPORT_SHOW: "ИМПОРТ ШОУ",
      LANGUAGE: "ЯЗЫК",
      CUE: "ОЧЕРЕДЬ",
      AUTO: "АВТО",
      FRAME_RATE: "ЧАСТОТА КАДРОВ",
      DISABLE_RESCALING: "ОТКЛЮЧИТЬ МАСШТАБИРОВАНИЕ",
      GUI_PERFORMANCE: "ПРОИЗВОДИТЕЛЬНОСТЬ",
      HEADPHONES_OUT: "ВЫХОД НАУШНИКОВ",
      BUTTON_FUNCTION: "ФУНКЦ. КНОПКИ",
      KINETIC_SCROLL: "ИНЕРЦИОННАЯ ПРОКРУТКА",
      FADER_GLOW: "ТОЛЩИНА ЛИНИЙ СЛАЙДЕРОВ",
      DISABLE_LED_METERS: "ОТКЛЮЧИТЬ ИНДИКАТОРЫ",
      MASTER_LOCK: "ЗАЩИТА MASTER КАНАЛА",
      HIDE_COMP_GATE: "СПРЯТАТЬ КОМПРЕССОР",
      HIDE_DB_MARKS: "СПРЯТАТЬ МАРКЕРЫ ДЕЦИБЕЛ",
      PIN_SO_FOR_AUX_FX_SENDS: "ПОКАЗЫВАТЬ ПРАВУЮ ПАНЕЛЬ ДЛЯ FX/AUX",
      PIN_SLIDEOUT_IN_MIX_MODE: "ВСЕГДА ПОКАЗЫВАТЬ ПРАВУЮ ПАНЕЛЬ",
      SOLO_MODE: "РЕЖИМ SOLO",
      SOLO_ROUTING: "ПУТЬ SOLO",
      HEADPHONES: "НАУШНИКИ",
      AUTOCLOSE_SLIDEOUT: "АВТОЗАКРЫТИЕ БОКОВОЙ ПАНЕЛИ",
      METER_QUANTISATION: "СЕКЦИОННЫЕ ИНДИКАТОРЫ",
      MIXER_SCROLLING: "ПРОКРУТКА МИКШЕРА",
      DIM_LED_METERS: "МЕНЕЕ ЯРКИЕ ИНДИКАТОРЫ",
      UTILITY: "УТИЛИТЫ",
      IMPORT_ALL_PRESETS: "ИМПОРТ ВСЕХ ПРЕСЕТОВ",
      EXPORT_ALL_PRESETS: "ЭКСПОРТ ВСЕХ ПРЕСЕТОВ",
      NO_CONNECTION_TO_MIXER: "НЕТ СОЕДИНЕНИЯ",
      VERSION: "ВЕРСИЯ",
      COPY_TO_CLIPBOARD: "КОПИРОВАТЬ В БУФФЕР",
      SENSITIVITY: "ЧУВСТВИТЕЛЬНОСТЬ",
      CLEAR_FIXED: "ОЧИСТИТЬ FIXED",
      CLEAR_ALL: "ОЧИСТИТЬ ВСЕ",
      CLEAR_LIVE: "ОЧИСТИТЬ LIVE",
      NAME_SSID: "ИМЯ SSID",
      SUBNET_MASK: "МАСКА ПОДСЕТИ",
      WIRELESS_NETWORK: "БЕСПРОВОДНАЯ СЕТЬ",
      SECURITY_OPTIONS: "НАСТРОЙКИ БЕЗОПАСНОСТИ",
      LAN_IP_ADDRESS: "LAN IP АДРЕСС",
      ACCESS_LIMITING: "ОГРАНИЕЧНИЕ ДОСТУПА",
      PASSWORD: "ПАРОЛЬ",
      ACCESS: "ДОСТУП",
      ALLOW_ACCESS_FOR: "РАЗРЕШИТЬ ДОСТУП",
      MASTER_VOLUME: "ГРОМКОСТЬ MASTER",
      MASTER_PROCESSING: "ОБРАБОТКА MASTER",
      GLOBAL_SETTINGS: "ГЛОБАЛЬНЫЕ НАСТРОЙКИ",
      TRANSLATIONS_END: "-----",
    };
    langBase.pt = {
      lang: "PORTUGUÊS",
      APPLY: "APLICAR",
      ASSIGN_SUB_GROUP: "ENDEREÇAR AO SUB GRUPO {0}",
      ATTACK: "ATAQUE",
      AUX_MASTER_LEVELS: "NIVEIS AUX MASTER",
      AUX_SENDS_FOR: "ENVIO AUX:{0}",
      BANKS: "BANCOS",
      BASS_GAIN: "GANHO DE GRAVES",
      CHANNEL_SAFES: "CANAIS SEGUROS",
      FX_SENDS_X: "ENVIO FX:{0}",
      CHANNEL_PRESETS: "PRESETS DE CANAL",
      CLEAR_SOLO: "LIMPAR SOLO",
      CONFIGURATION: "CONFIGURAÇÃO",
      CONNECTED_DEVICE_NAME: "Nome do dispositivo conectado",
      COPY_SETTINGS: "DEFINIÇÕES DE CÓPIA",
      CURRENT_SHOW: "MOSTRAR ATUAL",
      DELAY_LENGTH: "Duração do DELAY ",
      DELETE: "EXCLUIR",
      DISABLE_STEREO_LINK: "Desabilitar o STEREO LINK",
      DOCUMENTATION: "DOCUMENTAÇÃO",
      EDIT: "EDITAR",
      EXPORT: "EXPORTAR",
      FAV_SHOW: "MOSTRA FAVORITO",
      FEEDBACK_AMOUNT: "FEEDBACK Imediato",
      FREQ: "FREQUENCIA",
      FX_MODE_DEFAULT: "FX  MODO PADRÃO",
      FX_RETURNS: "RETORNOS FX",
      FX_RETURNS_TO_AUX: "FX Retorna a",
      GAIN: "GANHO",
      GROUP: "GRUPO",
      HELP: "AJUDA",
      HF_DAMPING: "AMORTECIMENTO HF",
      HIGHPASS_FILTER: "FILTRO PASSA ALTA",
      IMPORT: "IMPORTAR",
      INPUT: "ENTRADA",
      LENGTH_SUBDIVISION: "SUBDIVISÃO LENGTH",
      LOCK: "BLOQUEIO",
      LOCKED: "BLOQUEADO",
      LOWPASS_FILTER: "filtro passa-baixa",
      MEDIA_FADER_BEFORE_CH1: "FADER mídia antes de CH1",
      MIX_GAIN: "GANHO DA MIX",
      MUTE: "MUDO",
      MUTE_ALL: "SILENCIE TUDO",
      MUTE_FX: "MUDO FX",
      MUTE_GROUP_BUTTON_ASSIGN: "ENDEREÇAR BOTAO DE GRUPO DE MUTE",
      MUTE_GROUPS: "GRUPO DE MUTE",
      MUTES: "MUTE",
      NETWORK: "REDE",
      NEW: "NOVO",
      NEW_SNAPSHOT: "NOVA CENA",
      NEXT_SNAPSHOT: "PRÓXIMA CENA",
      NORM: "NORMA  ",
      OFF: "DESLIGADO",
      ON: "LIGADO",
      ONLINE_SUPPORT: "SUPORTE ONLINE",
      PASTE_SETTINGS: "Colar configurações",
      PERMISSIONS: "PERMISSÕES",
      PERMIT: "PERMITIR",
      RECORD: "GRAVAR",
      RENAME: "RENOMEAR",
      RESET: "REINICIAR",
      RESET_CHANNEL: "REINICIAR CANAL",
      REVERB_TIME: "REVERB TEMPO",
      SAVE: "SALVAR",
      SAVE_AS: "SALVAR COMO",
      SNAPSHOTS: "CENAS",
      SPEED: "VELOCIDADE",
      SUB_GROUP_FADER_ASSIGN: "ENDEREÇAR FADER AO SUB GRUPO",
      SUB_GROUP_SPREAD: "SUB GRUPO SPREAD",
      SUB_GROUPS: "subgrupos",
      TOTAL_VIEW: "VISTA TOTAL",
      UNASSIGN_SUB_GROUP: "DESENDEREÇAR SUB GRUPO{0}",
      UPDATE_CURRENT_SNAPSHOT: "ATUALIZAÇÃO DA CENA",
      USB_MEDIA_FILES: "MÍDIA USB ARQUIVOS",
      VIEW_GROUP_BUTTON_ASSIGN: "ENDEREÇAR BOTAO GRUPO VIEW",
      VIEW_GROUPS: "VER GRUPOS",
      VIEWS: "VISTAS",
      SHOW_ALL_CHANNELS: "MOSTRE TODOS OS CANAIS",
      PLACE_AFTER_INPUTS: "LUGAR DEPOIS ENTRADAS",
      PLACE_BEFORE_INPUTS: "LUGAR ANTES DE ENTRADAS",
      MUTE_FX_CANCEL: "CANCELAR FX MUTE",
      MUTE_ALL_CANCEL: "CANCELAR TODOS OS MUTEs",
      MUTEGROUP_1_ACTIVATED: "MUTE GRUPO {0} LIGADO",
      MUTEGROUP_1_DEACTIVATED: "MUTE GRUPO {0} DESLIGADO",
      NO_SNAPSHOT: "SEM CENA",
      LOAD_NEXT_SNAPSHOT: "CARREGA PRÓXIMA CENA",
      CHANNEL_EQ_PRESETS: "PRESETS DE EQ DO CANAL",
      AUX_EQ_PRESETS: "PRESETS DE EQ DO AUX",
      MASTER_EQ_PRESETS: "PRESETS DE EQ DO MASTER",
      CHANNEL_DYN_PRESETS: "PRESETS DO CANAL DYN",
      AUX_DYN_PRESETS: "PRESETS DO AUX DYN",
      MASTER_DYN_PRESETS: "PRESTS DO MASTER DYN",
      DELAY_FX_PRESETS: "PRESETS DELAY FX",
      CHORUS_FX_PRESETS: "PRESETS CHORUS FX ",
      REVERB_FX_PRESETS: "PRESETS REVERB FX",
      ROOM_PRESETS: "PRESETS AMBIENCIA",
      DIGITECH_PRESETS: "PRESETS DIGITECH",
      UX_PRESETS: "OPÇÕES DE PRESETS (local)",
      FILES: "ARQUIVOS",
      CONNECTING: "Conectando ...",
      KEEP_TAPPING: "Continue a tocar ...",
      PRESET_LOADED: "PRESET<br>{0}<br>CARREGADO",
      NO_PAN_ON_MONO_AUX: "SEM PAN <br> no AUX mono ",
      PARAM_GLOBAL: "{{0} PARAMETROS (globais)",
      CLEAR_ALL_SOLOS: "DASABILITAR TODOS OS SOLOS",
      PRE: "PRÉ",
      SET_ALL_CHANNELS_TO: 'DEFINIR TODOS OS CANAIS PARA "{0} "?',
      SAVED: "SALVOU",
      REPLACE_PRESET: 'SUBSTITUIR PRESET "{0} "?',
      REPLACE_SNAPSHOT: 'SUBSTITUIR A CENA "{0} "?',
      FACTORY: "FÁBRICA",
      USER: "USUARIO",
      DELETE_PRESET: "EXCLUIR PRESET",
      OUT_OF_RANGE: "FORA DO RANGE",
      ERROR: "ERRO",
      NO_ASSIGNED_SUBGROUP: "SEM CANAIS DE ENTRADA ATRIBUIDOS <br>SUB GRUPO {0}",
      NO_ASSIGNED_VIEWGROUP: "SEM CANAIS DE ENTRADA ATRIBUIDOS <br>VIEW GRUPO {0}",
      NO_ASSIGNED_MG: "SEM CANAIS DE ENTRADA ATRIBUIDOS <br> GRUPO MUDO {0}",
      SAVE_TO_SHOW: "SALVAR NO SHOW",
      DASHBOARD: "PAINEL",
      INCOMPATIBLE_CHANNEL_TYPE: "TIPO DE CANAL INCOMPATIVEL",
      MIXER_RESET: "RESETAR MIXER",
      SAVE_SHOW_WITH_NAME: "SALVAR SHOW COM NOME:",
      NEW_SHOW_NAME: "NOME DO NOVO SHOW",
      SHOW_ALREADY_EXISTS: "SHOW JÁ EXISTE",
      DELETE_SHOW: 'EXCLUIR SHOW "{0}"?',
      SAVE_SNAPSHOT_WITH_NAME: "SALVAR SNAPSHOT COM NOME",
      NEW_SNAPSHOT_NAME: "NOVO NOME DO SNAPCHOT:",
      DELETE_SNAPSHOT: 'APAGAR SNAPSHOT "{0} "?',
      LOAD_THE_INITIAL_MIXER_STATE: "CARREGAR ESTADO INICIAL DO MIXER",
      ERR_DELETESHOW: "ERRO AO APAGAR SHOW",
      ERR_CREATESHOW: "ERRO AO CRIAR SHOW",
      ERR_LOADSHOW: "ERRO AO CARREGAR SHOW",
      ERR_SAVESHOW: "ERRO AO SALVAR PARAMETROS DO SHOW",
      ERR_RENAMESHOW: "ERRO AO RENOMEAR SHOW",
      ERR_SAVEINIT: "NÃO PODE salvar novamente * INIT * SNAPSHOT.",
      ERR_SAVESNAPSHOT: "ERRO AO SALVAR SNAPSHOT.",
      ERR_LOADSNAPSHOT: "ERRO AO CARREGAR SNAPSHOT.",
      ERR_DELETESNAPSHOT: "ERRO AO APAGAR SNAPSHOT.",
      ERR_RENAMEINIT: "Não é possível renomear * INIT * SNAPSHOT.",
      ERR_RENAMESNAPSHOT: "ERRO AO RENOMEAR SNAPSHOT.",
      ERR_DELETEPRESET: "ERRO AO APAGAR PRESET",
      ERR_WRITEPRESET: "ERRO AO ESCREVER PRESET",
      ERR_RENAMEPRESET: "ERRO AO RENOMEAR PRESET",
      INITIAL_VALUES_LOADED: "VALORES INICIAIS CARREGADOS",
      AUX_SENDS_X: "ENVIO AUX:{0}",
      FX_EDIT: "EDITAR FX",
      GROUPS: "GRUPOS",
      OUT: "SAIDA",
      IN: "ENTRADA",
      BAND: "BANDA",
      SETTINGS: "CONFIGURAÇÕES",
      DEMO_VERSION: "VERSÃO DEMO",
      LINE_IN: "ENTRADA DE LINHA",
      LINE: "LINHA",
      MODE: "MODO",
      CHANNEL: "CANAL",
      SUPPORT: "SUPORTE",
      RENAME_CHANNEL: "RENOMEAR CANAL",
      CENTER: "CENTRO",
      SETUP: "CONFIGURAÇÃO",
      JUMP_TO: "PULE PARA",
      FUNCTIONS: "FUNÇÕES",
      BACK: "VOLTA",
      SAVE_PRESET_WITH_NAME: "SALVAR PRESET COM NOME:",
      RENAME_PRESET: "RENOMEAR PRESET",
      NO_ACTIVE_SHOW: "SHOW não selecionado",
      INPUTS: "ENTRADAS",
      ARE_YOU_SURE: "VOCÊ TEM CERTEZA?",
      ABOUT: "SOBRE",
      FIXED: "FIXO",
      MUTE_GROUP_X: "GRUPO DE MUTE {0}",
      MOUNTCHANGED: "MOLDURA ALTERADA",
      MOUNT: "USB INSERIDO",
      UNMOUNT: "USB REMOVIDO",
      DISABLED: "DESATIVADO",
      ENABLED: "HABILITADO",
      MULTIPLE: "MÚLTIPLO",
      LEVEL: "NÍVEL",
      TREBLE: "AGUDOS",
      MID: "MEDIOS",
      BASS: "GRAVES",
      NO_CONTROLS_FOR_THIS_CHANNEL: "SEM CONTROLES PARA ESTE CANAL",
      UNASSIGN_ME: "DESATRIBUIR ME",
      ASSIGN_ME: "ATRIBUIR ME",
      UNASSIGN_MY_OUT: "MY OUT' DESENDEREÇAR",
      ASSIGN_MY_OUT: "MY OUT' ENDEREÇAR",
      NO_SEND_LEVELS: "SENDS SEM NIVEL",
      CANCEL: "CANCELAR",
      RELOAD_UI: "RECARREGAR UI para que as alterações tenham efeito?",
      BAD_BROWSER: "ESTE navegador não suporta WebSockets. Use um navegador diferente.",
      AFS_FIXED_INFO: "modo de medição de realimentação. Certifique-se que <br>não  há outros sons vindos para as entradas, exceto o tom de realimentação do  microfone/alto-falantes.",
      RECORDINGS: "gravações",
      READING: "Leitura...",
      FIRMWARE_FOUND: "A imagem de atualização de firmware foi encontrado no dispositivo USB conectado. <br> Executar uma atualização do mixer?",
      FIRMWARE_UPDATED: "Atualização bem-sucedida. <br> Por favor, desligue a unidade por 10 segundos, religue novamente  e recarregue esta página. <br> Nota,  o seu dispositivo sem fio pode precisar de religação manual.",
      MSGBTN_UPDATE: "Atualizar",
      MSGBTN_CANCEL: "Cancelar",
      UPDATE_ALREADY: "A atualização foi tentada uma vez já. <br> Por favor, reinicie o dispositivo para retomar / tente novamente.",
      UPDATE_COMPLETED: "Sistema atualizado. Por favor, desligue e ligue o aparelho e recarregue a página para que a atualização tenha efeito.",
      UPDATE_ERROR: "Erro ao executar atualização.",
      REC_ERRSEQ: "Recorder: Erro ao escrever arquivo seqüencial para o USB (sem espaço?).",
      REC_ERRWRITE: "Recorder: Erro de escrita USB (sem espaço?).",
      REC_ERRNOSTICK: "Recorder: stick USB não está inserido no slot RECORD.",
      REC_ERRNOACCESS: "Recorder: Não é possível acessar um dispositivo USB para a escrita.",
      REC_ERRCREATE: "Recorder: Não é possível criar um arquivo no pendrive.",
      SHOWEXP_NOTFOUND: "Export / Import: Item não encontrado",
      SHOWEXP_USBNOTFOUND: "Dispositivo USB não encontrado",
      SHOWEXP_WRITEERR: "Exportação falhou: Não é possível acessar o dispositivo USB para a escrita",
      SHOWEXP_INTREADERR: "Exportação falhou: Erro ao ler a pasta de origem.",
      SHOWEXP_EXPFAILED: "Alguns arquivos não conseguiram ser exportados.",
      SHOWEXP_SUCCESS: "exportado com êxito",
      SHOWIMP_FAILED: "Alguns arquivos não conseguiram ser importados.",
      SHOWIMP_SUCCESS: "importação bem-sucedida",
      SHOWIMP_NOTFOUND: "Erro de importação: Fonte não encontrada",
      SHOWIMP_FILNOTFOUND: "Arquivos irrelevantes encontrados no USB",
      IMPORT_SHOW_FROM_USB: "Importar SHOW do USB",
      NO_SHOW_SELECTED: "NENHUM SHOW SELECIONADO",
      EXPORT_SHOW_TO_USB: "Exportar SHOW para o USB: {0}",
      IMPORT_SHOW: "Importar SHOW",
      EXPORT_SHOW: "Exportar SHOW",
      LANGUAGE: "LÍNGUA",
      NO_ME_CHANNELS: "Sem canais ME",
      NO_AUX_OUT: "SEM SAIDA AUX",
      FRAME_RATE: "TAXA DE QUADROS",
      DISABLE_RETINA: "DESABILITAR RETINA",
      DISABLE_RESCALING: "DESABILITAR RESCALING",
      GUI_PERFORMANCE: "PERFORMANCE GRAFICA",
      HEADPHONES_OUT: "SAIDA DE FONES DE OUVIDO",
      BUTTON_FUNCTION: "BOTÃO DE FUNÇÃO",
      DISABLE_LED_METERS: "DESABILITAR VU DE LEDs",
      MASTER_LOCK: "TRAVAR MASTER",
      HIDE_COMP_GATE: "OCULTAR COMP/GATE",
      HIDE_DB_MARKS: "OCULTAR ESCALA DB",
      PIN_SO_FOR_AUX_FX_SENDS: "FIXAR SO PARA AUX/FX SENDS",
      PIN_SLIDEOUT_IN_MIX_MODE: "FIXAR SLIDEOUT NO MODO MIX",
      SOLO_MODE: "MODO SOLO",
      SOLO_ROUTING: "ENCAMINHAMENTO SOLO",
      HEADPHONES: "FONES DE OUVIDO",
      AUTOCLOSE_SLIDEOUT: "AUTO-FECHAMENTO SLIDEOUT",
      METER_QUANTISATION: "METER quantização",
      RECORD_MODE: "modo de gravação",
      UTILITY: "UTILIDADE",
      IMPORT_ALL_PRESETS: "IMPORTAR TODOS OS PRESETS",
      EXPORT_ALL_PRESETS: "EXPORTAR TODOS OS PRESETS",
      NO_CONNECTION_TO_MIXER: "Sem conexão com MIXER",
      VERSION: "VERSÃO",
      COPY_TO_CLIPBOARD: "COPIAR PARA ÁREA DE TRANSFERÊNCIA",
      COPYRIGHT_MSG:
        "Todas as marcas de terceiros são marcas comerciais de seus respectivos proprietários. Estas marcas são utilizados para identificar<br>sons de produtos que foram revisados na criação deste produto e uso dessas marcas não - <br>implica uma afiliação, endosso ou associação com Harman International Industries, Incorporated.",
      FILTER: "FILTRO",
      SENSITIVITY: "SENSIBILIDADE",
      CLEAR_FIXED: "LIMPAR FIXO",
      CLEAR_ALL: "LIMPAR TUDO",
      CLEAR_LIVE: "LIMPAR LIVE",
      NAME_SSID: "NOME SSID",
      SUBNET_MASK: "MÁSCARA SUBREDE",
      WIRELESS_NETWORK: "REDE SEM FIO",
      SECURITY_OPTIONS: "OPÇÕES DE SEGURANÇA",
      LAN_IP_ADDRESS: "Endereço IP da LAN",
      UP: "ACIMA",
      DOWN: "ABAIXO",
      HOTSPOT: "PONTO DE ACESSO",
      CLOSE: "FECHAR",
      COPY_MIX: "COPIAR MIX",
      NO_CONNECTION: "SEM CONEXAO",
      NO_CURRENT_SNAPSHOT: "SEM SNAPSHOT ATUAL",
      PATTERNED_BACKGROUND: "PLANO DE FUNDO PATENTEADO",
      ROUTING: "ENDEREÇAMENTO",
      INPUT_SOURCE: "FONTE DE ENTRADA",
      OUTPUT_DESTINATION: "DESTINO DE SAIDA",
      RECORDING_DROPOUT: "GRAVAÇÃO DROPOUT",
      USB_REC_TOO_SLOW: "REC USB. MUITO DEVAGAR",
      RECORDER_IS_BUSY: "GRAVADOR ESTÁ OCUPADO",
      IMPORT_USER_CONFIG: "IPORTAR CONFIGURAÇÃO DE USUARIO",
      EXPORT_USER_CONFIG: "EXPORTAR CONFIGURAÇÃO DE USUARIO",
      OVERVIEW: "VISÃO GERAL",
      CHANNEL_SOURCE: "FONTE DO CANAL",
      CHANNEL_OUTPUT_DESTINATION: "DESTINO DE SAIDA DO CANAL",
      DISABLE_VU_INPUT_LEVEL: "DESABILITAR VU DA ENTRADA",
      DISABLE_VU_PEAK: "DESBILITAR PICO DO VU",
      SOLO_TYPE: "TIPO DE SOLO",
      WRONG_VALUE: "VALOR ERRADO",
      INPUT_DELAY: "DELAY DE ENTRADA",
      OUTPUT_DELAY: "DELAY DE SAIDA",
      PEDAL_FUNCTION: "função do pedal",
      CONFIG_WARNING: "Aviso:. Somente as configurações visuais / gráficas específicas para este dispositivo serão armazenados <br> Essas configurações não afetam a operação do mixer.",
      SET_TO_ZERO_DB: "COLOCAR EM ZERO DB",
      SET_OUTPUT_DELAY: "COLOCAR DELAY DA SAÍDA",
      MASTER_PRESETS: "PRESETS DO MASTER",
      SLAVE: "ESCRAVO",
      EXCEEDS_MAXIMUM_DELAY: "ULTRAPASSA DELAY MÁXIMO",
      NONE: "NENHUM",
      ISOLATION: "ISOLAMENTO",
      MIC_GAIN: "GANHO DO MIC",
      CHANNELS: "CANAIS",
      MATRICES: "MATRIZES",
      HOLD: "SEGURAR",
      ISOLATE: "ISOLAR",
      DENSITY: "DENSIDADE",
      CASCADE: "CASCATA",
      CASCADE_MASTER: "CASCATA MASTER",
      SOUNDCHECK: "CHECAGEM DE SOM",
      DIRECT_OUT: "SAIDA DIRETA",
      LOCATE: "LOCALIZAR",
      ENABLE: "HABILITAR",
      NAME: "NOME",
      EMPTY: "VAZIO",
      SESSIONS: "SESSÕES",
      SPACE_REMAINING: "Espaço restante:",
      EDIT_CHANNEL: "EDITAR CANAL",
      RESET_ALL: "REINICIAR TUDO",
      DIRECT_OUTPUT: "SAIDA DIRETA",
      FADER_POSITION: "POSIÇÃO DO FADER",
      MASTER_CHANNEL_RANGE: "ALCANCE DO CANAL MASTER",
      IOSYS_PRESET_LOADING: "CARREGANDO PRESET IOSYS ",
      SWITCH_TO_MATRIX: "CHAVE PARA MATRIX",
      SWITCH_TO_AUX: "CHAVE PARA AUX",
      GATE_PRESETS: "PRESETS DO GATE  ",
      AFS_PRESETS: "PRESETS AFS 2",
      PRE_PROCESSING: "PROCESSAMENTO DO PRÉ",
      POST_PROCESSING: "PÓS-PROCESSAMENTO",
      ADDITIONAL_CHANNEL_DESTINATION: "SAIDA DIRETA",
      NO_PAN_ON_MONO_MATRIX: "SEM PAN <br> no MATRIX mono ",
      NO_USB_DEVICE_SELECTED: "Nenhum dispositivo USB SELECIONADO",
      GLOBAL_PRE_FADE_AUX_SEND_POINT: "PONTO GLOBAL AUX SEND",
      MOREME_PORTRAIT_MODE: "MOREME modo retrato",
      RESET_LOCAL_SETTINGS: "Redefinir as configurações LOCAIS",
      SYNC_SELECTED_CH: "SYNC ID DO CANAL SELECIONADO",
      ACCESS_LIMITING: "LIMITAR ACESSO",
      PASSWORD: "SENHA",
      ACCESS: "ACESSO",
      MONITOR_ACCESS_LIMIT: "Limitar o acesso (LOCAL)",
      ALLOW_ACCESS_FOR: "Permitir o acesso para",
      MASTER_VOLUME: "VOLUME DO MASTER",
      ACCOUNT: "CONTA",
      MASTER_PASSWORD_PROTECTION: "PROTEÇÃO POR SENHA DO MASTER (GLOBAL) ",
      LOG_IN: "ENTRAR",
      LOG_OUT: "SAIR",
      MASTER_PROCESSING: "PROCESSAMENTO  DO MASTER",
      GLOBAL_SETTINGS: "CONFIGURAÇÕES GLOBAIS",
      TRANSLATIONS_END: "-----",
    };
    langBase.de = null;
    langBase.fr = null;
    langBase.es = null;
    langBase.ru = null;
    langBase.pt = null;
    lang = langBase.en;
    function ru_trans(a) {
      for (var b = a + "", c = a + ""; ; ) {
        a = a.toUpperCase();
        a = a.replace(/NCE/g, "НСЕ");
        a = a.replace(/PROCE/g, "ПРОЦЕ");
        a = a.replace(/THIR/g, "СЁР");
        a = a.replace(/ENDO/g, "ЭНДО");
        a = a.replace(/THE/g, "ЗЕ");
        a = a.replace(/IGH/g, "АЙ");
        a = a.replace(/GAI/g, "ГЕЙ");
        a = a.replace(/SUB/g, "САБ");
        a = a.replace(/DY/g, "ДИ");
        a = a.replace(/SY/g, "CИ");
        a = a.replace(/AY/g, "ЭЙ");
        a = a.replace(/AI/g, "АЙ");
        a = a.replace(/ROU/g, "РУ");
        a = a.replace(/OU/g, "АУ");
        a = a.replace(/CH/g, "Ч");
        a = a.replace(/SH/g, "Ш");
        a = a.replace(/YA/g, "Я");
        a = a.replace(/YE/g, "E");
        a = a.replace(/YU/g, "Ю");
        a = a.replace(/OO/g, "У");
        a = a.replace(/AI/g, "ЭЙ");
        a = a.replace(/EQU/g, "ЭКВ");
        a = a.replace(/EQ/g, "ЭКВ");
        a = a.replace(/QU/g, "КВ");
        a = a.replace(/TY/g, "ТЫ");
        a = a.replace(/CC/g, "КЦ");
        a = a.replace(/TS/g, "Ц");
        a = a.replace(/DS/g, "ДЗ");
        a = a.replace(/ALL/g, "ОЛ");
        a = a.replace(/IDEN/g, "АЙДЕН");
        a = a.replace(/IDE/g, "АЙД");
        a = a.replace(/PH/g, "Ф");
        a = a.replace(/ISAT/g, "IZAT");
        a = a.replace(/TIONAL/g, "ЦИОНАЛ");
        a = a.replace(/TION/g, "ЦИЯ");
        a = a.replace(/CK/g, "К");
        a = a.replace(/OW/g, "ОУ");
        a = a.replace(/MIXE/g, "МИКШЕ");
        a = a.replace(/THI/g, "СИ");
        a = a.replace(/TH/g, "T");
        a = a.replace(/USE/g, "ЮЗЕ");
        a = a.replace(/RY/g, "РИ");
        a = a.replace(/FY/g, "ФАЙ");
        a = a.replace(/PY/g, "ПИ");
        a = a.replace(/PLY/g, "ПЛАЙ");
        a = a.replace(/LY/g, "ЛИ");
        a = a.replace(/CIA/g, "ЦИА");
        a = a.replace(/A/g, "А");
        a = a.replace(/B/g, "Б");
        a = a.replace(/C/g, "К");
        a = a.replace(/D/g, "Д");
        a = a.replace(/E/g, "Е");
        a = a.replace(/F/g, "Ф");
        a = a.replace(/G/g, "Г");
        a = a.replace(/H/g, "Х");
        a = a.replace(/I/g, "И");
        a = a.replace(/J/g, "ДЖ");
        a = a.replace(/K/g, "К");
        a = a.replace(/L/g, "Л");
        a = a.replace(/M/g, "М");
        a = a.replace(/N/g, "Н");
        a = a.replace(/O/g, "О");
        a = a.replace(/P/g, "П");
        a = a.replace(/Q/g, "КУ");
        a = a.replace(/R/g, "Р");
        a = a.replace(/S/g, "С");
        a = a.replace(/T/g, "Т");
        a = a.replace(/U/g, "У");
        a = a.replace(/V/g, "В");
        a = a.replace(/W/g, "В");
        a = a.replace(/X/g, "КС");
        a = a.replace(/Y/g, "Й");
        a = a.replace(/Z/g, "З");
        a = a.replace(/ТХ/g, "З");
        a = a.replace(/ДОУН/g, "ДАУН");
        a = a.replace(/ЛТ/g, "ЛЬТ");
        a = a.replace(/ЛД/g, "ЛЬД");
        a = a.replace(/ЛК/g, "ЛЬК");
        a = a.replace(/ЛС/g, "ЛЬС");
        if (a == b) break;
        b = a;
      }
      for (b = a + ""; ; ) {
        a = a.replace("<БР>", "<br>");
        if (a == b) break;
        b = a;
      }
      "E" == c.substr(0, 1) && "Е" == a.substr(0, 1) && (a = "Э" + a.substr(1, a.length));
      return a;
    }
    function encodedStr(a) {
      a = a.replace(/&/g, "&amp;");
      a = a.replace(/\</g, "&lt;");
      a = a.replace(/\>/g, "&gt;");
      a = a.replace(/"/g, "&quot;");
      return (a = a.replace(/'/g, "&apos;"));
    }
    function dumpTranslation(a) {
      print('<?xml version="1.0" encoding="utf-8"?>');
      print("<!DOCTYPE TS>");
      print('<TS version="2.0" sourcelanguage="en_GB">');
      print("<context>");
      print("    <name>Mixer</name>");
      var b = langBase.en;
      a = langBase[a];
      for (key in b)
        b.hasOwnProperty(key) &&
        "lang" != key &&
        (a.hasOwnProperty(key)
          ? (print("    <message>"), print("        <source>" + encodedStr(b[key]) + "</source>"), print("        <translation>" + encodedStr(a[key]) + "</translation>"))
          : (print("    <message>"), print("        <source>" + encodedStr(b[key]) + "</source>"), print('        <translation type="unfinished"></translation>')),
          print("    </message>"));
      print("</context>");
      print("</TS>");
    }
    var E_CABS2 = {
        0: "Fender Tweed Champ 1x8 Edge",
        1: "Fender Tweed Deluxe 1x12",
        2: "Fender Tweed Bassman 4x10",
        3: "Fender Blonde Bassman 2x12",
        4: "Fender Blackface Deluxe 1x12",
        5: "Fender Blackface Twin 2x12",
        6: "Marshall 4x12",
        7: "Marshall Greenback 4x12",
        8: "Johnson V30 4x12",
        9: "Hiwatt Fane 4x12",
        10: "Vht V30 4x12",
        11: "Vox Ac15 1x12 Center",
        12: "Vox Ac30 2x12",
        13: "Gsp2101 Speaker Compensation",
        14: "Digitech Bright Cab",
        15: "Digitech Solo Cab",
        16: "Digitech Rock Cab",
        17: "Digitech Altrock Cab",
        18: "Digitech Metal Cab",
        19: "Digitech Numetal Cab",
        20: "Acoustic Dreadnaught Cab",
        21: "Acoustic Jumbo Cab",
        22: "Direct Cab",
      },
      E_AMPS2 = {
        0: "Direct",
        32: "Digitech BlackBass",
        33: "Digitech Blues",
        34: "Digitech Brown Sound",
        36: "Digitech CleanTube",
        37: "Digitech Crunch",
        41: "Digitech GSP2101 CleanTube",
        42: "Digitech GSP2101 SaturatedTube",
        43: "Digitech HiGain",
        44: "Digitech Metal",
        45: "Digitech Monster",
        47: "Digitech Solo",
        49: "Digitech Stoner Rock",
        50: "Digitech Transistor",
        51: "Digitech TweedFace",
        1: "Carvin Legacy",
        2: "Matchless Cheiftain",
        3: "Fender BlackFace Deluxe",
        4: "Fender Blackface Twin",
        5: "Fender Brownface Bassman",
        6: "Fender Tweed Bassman",
        7: "Fender Tweed Champ",
        8: "Fender Tweed Deluxe",
        9: "Gibson GA40",
        10: "Hiwatt Custom 100",
        11: "Laney Supergroup",
        12: "Marshall JCM2000",
        13: "Marshall JCM800",
        14: "Marshall JCM900",
        15: "Marshall JTM45",
        16: "Marshall Master Volume",
        17: "Marshall Plexi",
        18: "Marshall Plexi Jumped",
        19: "Matchless DC30",
        20: "Mesa Dual Rectifier",
        21: "Mesa Mark IIC",
        22: "Mesa Mark IV",
        23: "Mesa Triple Rectifier",
        24: "Orange OR120",
        25: "Peavey 5150 II",
        26: "Randall RG100",
        27: "Roland Jazz Chorus",
        28: "Soldano SLO100",
        29: "Sunn 100S",
        30: "VOX AC15",
        31: "VOX AC30",
        52: "Acoustic Dreadnaught",
        53: "Acoustic Jumbo",
      },
      E_FACTORY_PRESETS = {
        eqch: {
          "Acoustic 1": {
            ".eq.easy": 0,
            ".eq.bass": 0.5,
            ".eq.mid": 0.5,
            ".eq.treble": 0.5,
            ".eq.hpf.freq": 0,
            ".eq.b1.freq": 0,
            ".eq.b1.q": 0.24499089253187614,
            ".eq.b1.gain": 0.4188267394270123,
            ".eq.b2.freq": 0.31854296111676667,
            ".eq.b2.q": 0.3998178506375227,
            ".eq.b2.gain": 0.5179975001056119,
            ".eq.b3.freq": 0.5432112327695594,
            ".eq.b3.q": 0.23588342440801457,
            ".eq.b3.gain": 0.49271402550091076,
            ".eq.b4.freq": 1,
            ".eq.b4.q": 0.3087431693989071,
            ".eq.b4.gain": 0.5400728597449909,
          },
          "Acoustic 2": {
            ".eq.easy": 0,
            ".eq.bass": 0.5,
            ".eq.mid": 0.5,
            ".eq.treble": 0.5,
            ".eq.hpf.freq": 0,
            ".eq.b1.freq": 0,
            ".eq.b1.q": 0.22859744990892533,
            ".eq.b1.gain": 0.6027975955290159,
            ".eq.b2.freq": 0.33311491011494515,
            ".eq.b2.q": 0.4398907103825136,
            ".eq.b2.gain": 0.4414947678651747,
            ".eq.b3.freq": 0.6799826821591135,
            ".eq.b3.q": 0.5,
            ".eq.b3.gain": 0.4542974079126876,
            ".eq.b4.freq": 0.9935760171306209,
            ".eq.b4.q": 0.3087431693989071,
            ".eq.b4.gain": 0.5839017735334242,
          },
          "Bass Gtr": {
            ".eq.easy": 0,
            ".eq.bass": 0.5,
            ".eq.mid": 0.5,
            ".eq.treble": 0.5,
            ".eq.hpf.freq": 0,
            ".eq.b1.freq": 0,
            ".eq.b1.q": 0.24681238615664847,
            ".eq.b1.gain": 0.44923797950881794,
            ".eq.b2.freq": 0.28885371735664545,
            ".eq.b2.q": 0.6183970856102003,
            ".eq.b2.gain": 0.5783242258652095,
            ".eq.b3.freq": 0.6015648463431662,
            ".eq.b3.q": 0.5200364298724954,
            ".eq.b3.gain": 0.5552449324953965,
            ".eq.b4.freq": 1,
            ".eq.b4.q": 0.5801457194899817,
            ".eq.b4.gain": 0.4453551912568306,
          },
          "BG Vocals": {
            ".eq.easy": 0,
            ".eq.bass": 0.5,
            ".eq.mid": 0.5,
            ".eq.treble": 0.5,
            ".eq.hpf.freq": 0.15596977958757016,
            ".eq.b1.freq": 0,
            ".eq.b1.q": 0.19034608378870677,
            ".eq.b1.gain": 0.3506375227686703,
            ".eq.b2.freq": 0.3653564495970825,
            ".eq.b2.q": 0.47996357012750457,
            ".eq.b2.gain": 0.5127504553734062,
            ".eq.b3.freq": 0.7683192723386496,
            ".eq.b3.q": 0.4854280510018214,
            ".eq.b3.gain": 0.5673952641165756,
            ".eq.b4.freq": 1,
            ".eq.b4.q": 0.3907103825136612,
            ".eq.b4.gain": 0.5,
          },
          "Brass 1": {
            ".eq.easy": 0,
            ".eq.bass": 0.5,
            ".eq.mid": 0.5,
            ".eq.treble": 0.5,
            ".eq.hpf.freq": 0,
            ".eq.b1.freq": 0.328690190172717,
            ".eq.b1.q": 0.5,
            ".eq.b1.gain": 0.5,
            ".eq.b2.freq": 0.4855750288320553,
            ".eq.b2.q": 0.5,
            ".eq.b2.gain": 0.3998178506375228,
            ".eq.b3.freq": 0.7563259868679201,
            ".eq.b3.q": 0.5,
            ".eq.b3.gain": 0.5,
            ".eq.b4.freq": 0.8871249639956648,
            ".eq.b4.q": 0.5,
            ".eq.b4.gain": 0.5,
          },
          "Brass 2": {
            ".eq.easy": 0,
            ".eq.bass": 0.5,
            ".eq.mid": 0.5,
            ".eq.treble": 0.5,
            ".eq.hpf.freq": 0,
            ".eq.b1.freq": 0,
            ".eq.b1.q": 0.17577413479052822,
            ".eq.b1.gain": 0.44899817850637525,
            ".eq.b2.freq": 0.4345732073384305,
            ".eq.b2.q": 0.5,
            ".eq.b2.gain": 0.32877959927140255,
            ".eq.b3.freq": 0.6607302356240468,
            ".eq.b3.q": 0.5,
            ".eq.b3.gain": 0.5,
            ".eq.b4.freq": 1,
            ".eq.b4.q": 0.21493624772313297,
            ".eq.b4.gain": 0.5984737225316027,
          },
          "Drums OH": {
            ".eq.easy": 0,
            ".eq.bass": 0.5,
            ".eq.mid": 0.5,
            ".eq.treble": 0.5,
            ".eq.hpf.freq": 0,
            ".eq.b1.freq": 0,
            ".eq.b1.q": 0.1612021857923498,
            ".eq.b1.gain": 0.32331511839708565,
            ".eq.b2.freq": 0.3726424240961719,
            ".eq.b2.q": 0.5054644808743168,
            ".eq.b2.gain": 0.5273224043715847,
            ".eq.b3.freq": 0.5195318156475193,
            ".eq.b3.q": 0.6475409836065573,
            ".eq.b3.gain": 0.43078324225865205,
            ".eq.b4.freq": 1,
            ".eq.b4.q": 0.5072859744990893,
            ".eq.b4.gain": 0.6180305503992127,
          },
          "Electric Gtr": {
            ".eq.easy": 0,
            ".eq.bass": 0.5,
            ".eq.mid": 0.5,
            ".eq.treble": 0.5,
            ".eq.hpf.freq": 0,
            ".eq.b1.freq": 0.3426124197002141,
            ".eq.b1.q": 0.3797814207650273,
            ".eq.b1.gain": 0.42836162488165264,
            ".eq.b2.freq": 0.38258386866523914,
            ".eq.b2.q": 0.640255009107468,
            ".eq.b2.gain": 0.5,
            ".eq.b3.freq": 0.6581247586618457,
            ".eq.b3.q": 0.6402550091074681,
            ".eq.b3.gain": 0.5,
            ".eq.b4.freq": 0.9493219129193433,
            ".eq.b4.q": 0.3087431693989071,
            ".eq.b4.gain": 0.5,
          },
          "Female Vocals 1": {
            ".eq.easy": 0,
            ".eq.bass": 0.5,
            ".eq.mid": 0.5,
            ".eq.treble": 0.5,
            ".eq.hpf.freq": 0.3153368203039983,
            ".eq.b1.freq": 0.328690190172717,
            ".eq.b1.q": 0.5,
            ".eq.b1.gain": 0.5,
            ".eq.b2.freq": 0.425465739214569,
            ".eq.b2.q": 0.48178506375227687,
            ".eq.b2.gain": 0.42349726775956287,
            ".eq.b3.freq": 0.7581474804926924,
            ".eq.b3.q": 0.5,
            ".eq.b3.gain": 0.49635701275045535,
            ".eq.b4.freq": 1,
            ".eq.b4.q": 0.39435336976320584,
            ".eq.b4.gain": 0.6129326047358834,
          },
          "Female Vocals 2": {
            ".eq.easy": 0,
            ".eq.bass": 0.5,
            ".eq.mid": 0.5,
            ".eq.treble": 0.5,
            ".eq.hpf.freq": 0.197474091495926,
            ".eq.b1.freq": 0.33233317742226165,
            ".eq.b1.q": 0.5,
            ".eq.b1.gain": 0.5400728597449909,
            ".eq.b2.freq": 0.5147189268284122,
            ".eq.b2.q": 0.5,
            ".eq.b2.gain": 0.46357012750455373,
            ".eq.b3.freq": 0.7563259868679201,
            ".eq.b3.q": 0.5,
            ".eq.b3.gain": 0.5,
            ".eq.b4.freq": 0.8871249639956648,
            ".eq.b4.q": 0.5,
            ".eq.b4.gain": 0.5,
          },
          "Hi Hats": {
            ".eq.easy": 0,
            ".eq.bass": 0.5,
            ".eq.mid": 0.5,
            ".eq.treble": 0.5,
            ".eq.hpf.freq": 0,
            ".eq.b1.freq": 0,
            ".eq.b1.q": 0.19581056466302374,
            ".eq.b1.gain": 0.33606557377049184,
            ".eq.b2.freq": 0.3598919687227657,
            ".eq.b2.q": 0.640255009107468,
            ".eq.b2.gain": 0.5,
            ".eq.b3.freq": 0.7690764422413262,
            ".eq.b3.q": 0.6948998178506375,
            ".eq.b3.gain": 0.36156648451730417,
            ".eq.b4.freq": 0.8158146210942223,
            ".eq.b4.q": 0.6074681238615665,
            ".eq.b4.gain": 0.6016371077762619,
          },
          "Kick Drum": {
            ".eq.easy": 0,
            ".eq.bass": 0.5,
            ".eq.mid": 0.5,
            ".eq.treble": 0.5,
            ".eq.hpf.freq": 0,
            ".eq.b1.freq": 0.1334760885082084,
            ".eq.b1.q": 0.48360655737704916,
            ".eq.b1.gain": 0.5502078689518585,
            ".eq.b2.freq": 0.24080379744366825,
            ".eq.b2.q": 0.5728597449908925,
            ".eq.b2.gain": 0.4242464905806664,
            ".eq.b3.freq": 0.33888752374377396,
            ".eq.b3.q": 0.5546448087431693,
            ".eq.b3.gain": 0.39875303478729773,
            ".eq.b4.freq": 0.7122615760218579,
            ".eq.b4.q": 0.4435336976320583,
            ".eq.b4.gain": 0.5546448087431693,
          },
          "Male Vocals 1": {
            ".eq.easy": 0,
            ".eq.bass": 0.5,
            ".eq.mid": 0.5,
            ".eq.treble": 0.5,
            ".eq.hpf.freq": 0.15740123175093512,
            ".eq.b1.freq": 0.2740453814295476,
            ".eq.b1.q": 0.5,
            ".eq.b1.gain": 0.5710382513661202,
            ".eq.b2.freq": 0.3471415133493594,
            ".eq.b2.q": 0.5,
            ".eq.b2.gain": 0.470856102003643,
            ".eq.b3.freq": 0.7563259868679201,
            ".eq.b3.q": 0.44717668488160284,
            ".eq.b3.gain": 0.48360655737704916,
            ".eq.b4.freq": 1,
            ".eq.b4.q": 0.3907103825136612,
            ".eq.b4.gain": 0.6136221879294363,
          },
          "Male Vocals 2": {
            ".eq.easy": 0,
            ".eq.bass": 0.5,
            ".eq.mid": 0.5,
            ".eq.treble": 0.5,
            ".eq.hpf.freq": 0.13190032100412274,
            ".eq.b1.freq": 0.2886173304277261,
            ".eq.b1.q": 0.35063752276867033,
            ".eq.b1.gain": 0.6275045537340619,
            ".eq.b2.freq": 0.3653564495970825,
            ".eq.b2.q": 0.47996357012750457,
            ".eq.b2.gain": 0.33060109289617484,
            ".eq.b3.freq": 0.7537473233404711,
            ".eq.b3.q": 0.44717668488160284,
            ".eq.b3.gain": 0.5,
            ".eq.b4.freq": 1,
            ".eq.b4.q": 0.3907103825136612,
            ".eq.b4.gain": 0.5,
          },
          Piano: {
            ".eq.easy": 0,
            ".eq.bass": 0.5,
            ".eq.mid": 0.5,
            ".eq.treble": 0.5,
            ".eq.hpf.freq": 0,
            ".eq.b1.freq": 0.19754264918911044,
            ".eq.b1.q": 0.5,
            ".eq.b1.gain": 0.465391621129326,
            ".eq.b2.freq": 0.5347553567009077,
            ".eq.b2.q": 0.7531876138433515,
            ".eq.b2.gain": 0.2978142076502732,
            ".eq.b3.freq": 0.7289601884680341,
            ".eq.b3.q": 0.6402550091074681,
            ".eq.b3.gain": 0.44740157597715796,
            ".eq.b4.freq": 0.8761960022470309,
            ".eq.b4.q": 0.5837887067395264,
            ".eq.b4.gain": 0.5601092896174864,
          },
          "Snare Drum 1": {
            ".eq.easy": 0,
            ".eq.bass": 0.5,
            ".eq.mid": 0.5,
            ".eq.treble": 0.5,
            ".eq.hpf.freq": 0,
            ".eq.b1.freq": 0.2974105147377166,
            ".eq.b1.q": 0.436247723132969,
            ".eq.b1.gain": 0.5757087796986708,
            ".eq.b2.freq": 0.4582441113490364,
            ".eq.b2.q": 0.5510018214936248,
            ".eq.b2.gain": 0.42791929764398623,
            ".eq.b3.freq": 0.6566738044254105,
            ".eq.b3.q": 0.5163934426229507,
            ".eq.b3.gain": 0.47339699863574347,
            ".eq.b4.freq": 1,
            ".eq.b4.q": 0.21220400728597452,
            ".eq.b4.gain": 0.5975443383356072,
          },
          "Snare Drum 2": {
            ".eq.easy": 0,
            ".eq.bass": 0.5,
            ".eq.mid": 0.5,
            ".eq.treble": 0.5,
            ".eq.hpf.freq": 0,
            ".eq.b1.freq": 0,
            ".eq.b1.q": 0.17759562841530047,
            ".eq.b1.gain": 0.46459766858755974,
            ".eq.b2.freq": 0.4582441113490364,
            ".eq.b2.q": 0.5510018214936248,
            ".eq.b2.gain": 0.42791929764398623,
            ".eq.b3.freq": 0.7349980302906199,
            ".eq.b3.q": 0.640255009107468,
            ".eq.b3.gain": 0.5590071990000421,
            ".eq.b4.freq": 0.913313285202217,
            ".eq.b4.q": 0.5018214936247724,
            ".eq.b4.gain": 0.4979536152796725,
          },
          Synthesizer: {
            ".eq.easy": 0,
            ".eq.bass": 0.5,
            ".eq.mid": 0.5,
            ".eq.treble": 0.5,
            ".eq.hpf.freq": 0,
            ".eq.b1.freq": 0.328690190172717,
            ".eq.b1.q": 0.5,
            ".eq.b1.gain": 0.5,
            ".eq.b2.freq": 0.5493273056990863,
            ".eq.b2.q": 0.48724954462659376,
            ".eq.b2.gain": 0.4963570127504554,
            ".eq.b3.freq": 0.7126681566250492,
            ".eq.b3.q": 0.5,
            ".eq.b3.gain": 0.5,
            ".eq.b4.freq": 1,
            ".eq.b4.q": 0.28324225865209474,
            ".eq.b4.gain": 0.45264116575591984,
          },
          "Tom Tom": {
            ".eq.easy": 0,
            ".eq.bass": 0.5,
            ".eq.mid": 0.5,
            ".eq.treble": 0.5,
            ".eq.hpf.freq": 0.15988579586009993,
            ".eq.b1.freq": 0.22668654718546744,
            ".eq.b1.q": 0.4435336976320583,
            ".eq.b1.gain": 0.5783242258652095,
            ".eq.b2.freq": 0.4145367774659351,
            ".eq.b2.q": 0.5,
            ".eq.b2.gain": 0.44899817850637525,
            ".eq.b3.freq": 0.7290035824963353,
            ".eq.b3.q": 0.4271402550091074,
            ".eq.b3.gain": 0.48360655737704916,
            ".eq.b4.freq": 1,
            ".eq.b4.q": 0.2978142076502732,
            ".eq.b4.gain": 0.6020036429872495,
          },
          "Vtg Acoustic Gtr": {
            ".eq.easy": 0,
            ".eq.bass": 0.5,
            ".eq.mid": 0.5,
            ".eq.treble": 0.5,
            ".eq.hpf.freq": 0.21391043867963164,
            ".eq.b1.freq": 0.1322006529294064,
            ".eq.b1.q": 0.06193078324225866,
            ".eq.b1.gain": 0.3315143246930423,
            ".eq.b2.freq": 0.31905781584582443,
            ".eq.b2.q": 0.2996357012750454,
            ".eq.b2.gain": 0.6466575716234653,
            ".eq.b3.freq": 0.8424271500060456,
            ".eq.b3.q": 0.45264116575591995,
            ".eq.b3.gain": 0.6848418431626895,
            ".eq.b4.freq": 1,
            ".eq.b4.q": 0.4307832422586521,
            ".eq.b4.gain": 0.558287795992714,
          },
          "Vtg Bass Gtr": {
            ".eq.easy": 0,
            ".eq.bass": 0.5,
            ".eq.mid": 0.5,
            ".eq.treble": 0.5,
            ".eq.hpf.freq": 0.12919343326195576,
            ".eq.b1.freq": 0,
            ".eq.b1.q": 0.3360655737704917,
            ".eq.b1.gain": 0.7262789593878987,
            ".eq.b2.freq": 0.7286676573719787,
            ".eq.b2.q": 0.43260473588342435,
            ".eq.b2.gain": 0.6866633367874618,
            ".eq.b3.freq": 0.8215560314061384,
            ".eq.b3.q": 0.45264116575591995,
            ".eq.b3.gain": 0.4924816794519118,
            ".eq.b4.freq": 1,
            ".eq.b4.q": 0.4307832422586521,
            ".eq.b4.gain": 0.6712204007285975,
          },
          "Vtg Drum OH": {
            ".eq.easy": 0,
            ".eq.bass": 0.5,
            ".eq.mid": 0.5,
            ".eq.treble": 0.5,
            ".eq.hpf.freq": 0.13094081900906065,
            ".eq.b1.freq": 0,
            ".eq.b1.q": 0.13205828779599268,
            ".eq.b1.gain": 0.3445207334680195,
            ".eq.b2.freq": 0.5080368043122984,
            ".eq.b2.q": 0.3797814207650273,
            ".eq.b2.gain": 0.40954035242049913,
            ".eq.b3.freq": 0.8711264007363982,
            ".eq.b3.q": 0.4744990892531877,
            ".eq.b3.gain": 0.4688469920505347,
            ".eq.b4.freq": 1,
            ".eq.b4.q": 0.4854280510018215,
            ".eq.b4.gain": 0.6275045537340619,
          },
          "Vtg Electric Gtr": {
            ".eq.easy": 0,
            ".eq.bass": 0.5,
            ".eq.mid": 0.5,
            ".eq.treble": 0.5,
            ".eq.hpf.freq": 0.19771591720199858,
            ".eq.b1.freq": 0.328690190172717,
            ".eq.b1.q": 0.5,
            ".eq.b1.gain": 0.5,
            ".eq.b2.freq": 0.5584347738229478,
            ".eq.b2.q": 0.5,
            ".eq.b2.gain": 0.5,
            ".eq.b3.freq": 0.7836483912395048,
            ".eq.b3.q": 0.6402550091074681,
            ".eq.b3.gain": 0.674863387978142,
            ".eq.b4.freq": 0.9144473683672495,
            ".eq.b4.q": 0.6402550091074681,
            ".eq.b4.gain": 0.4216757741347905,
          },
          "Vtg Female Vocals": {
            ".eq.easy": 0,
            ".eq.bass": 0.5,
            ".eq.mid": 0.5,
            ".eq.treble": 0.5,
            ".eq.hpf.freq": 0.198429693076374,
            ".eq.b1.freq": 0.3432621391708955,
            ".eq.b1.q": 0.3761384335154827,
            ".eq.b1.gain": 0.5819672131147541,
            ".eq.b2.freq": 0.5074329523293231,
            ".eq.b2.q": 0.3761384335154827,
            ".eq.b2.gain": 0.3688524590163934,
            ".eq.b3.freq": 0.7563259868679201,
            ".eq.b3.q": 0.5,
            ".eq.b3.gain": 0.5,
            ".eq.b4.freq": 0.9454127599883787,
            ".eq.b4.q": 0.6402550091074681,
            ".eq.b4.gain": 0.5601092896174863,
          },
          "Vtg Kick Gtr": {
            ".eq.easy": 0,
            ".eq.bass": 0.5,
            ".eq.mid": 0.5,
            ".eq.treble": 0.5,
            ".eq.hpf.freq": 0,
            ".eq.b1.freq": 0,
            ".eq.b1.q": 0.2522768670309654,
            ".eq.b1.gain": 0.6311860582430663,
            ".eq.b2.freq": 0.36304279144873103,
            ".eq.b2.q": 0.3761384335154827,
            ".eq.b2.gain": 0.24906750957340268,
            ".eq.b3.freq": 0.7399325442449692,
            ".eq.b3.q": 0.348816029143898,
            ".eq.b3.gain": 0.49999999999999994,
            ".eq.b4.freq": 1,
            ".eq.b4.q": 0.4872495446265939,
            ".eq.b4.gain": 0.675306957708049,
          },
          "Vtg Male Vocal": {
            ".eq.easy": 0,
            ".eq.bass": 0.5,
            ".eq.mid": 0.5,
            ".eq.treble": 0.5,
            ".eq.hpf.freq": 0.13103442895979842,
            ".eq.b1.freq": 0.3432621391708955,
            ".eq.b1.q": 0.3761384335154827,
            ".eq.b1.gain": 0.6366120218579234,
            ".eq.b2.freq": 0.6076151016918003,
            ".eq.b2.q": 0.5,
            ".eq.b2.gain": 0.5,
            ".eq.b3.freq": 0.7836483912395048,
            ".eq.b3.q": 0.6366120218579235,
            ".eq.b3.gain": 0.6639344262295082,
            ".eq.b4.freq": 0.9454127599883787,
            ".eq.b4.q": 0.6402550091074681,
            ".eq.b4.gain": 0.6220400728597449,
          },
          "Vtg Piano": {
            ".eq.easy": 0,
            ".eq.bass": 0.5,
            ".eq.mid": 0.5,
            ".eq.treble": 0.5,
            ".eq.hpf.freq": 0.19854280510018216,
            ".eq.b1.freq": 0.15564829581934725,
            ".eq.b1.q": 0.3761384335154827,
            ".eq.b1.gain": 0.6366120218579235,
            ".eq.b2.freq": 0.5074329523293231,
            ".eq.b2.q": 0.6402550091074681,
            ".eq.b2.gain": 0.4453551912568306,
            ".eq.b3.freq": 0.7654334549917816,
            ".eq.b3.q": 0.5,
            ".eq.b3.gain": 0.5,
            ".eq.b4.freq": 0.9144473683672495,
            ".eq.b4.q": 0.6384335154826958,
            ".eq.b4.gain": 0.622040072859745,
          },
          "Vtg Snare Drum": {
            ".eq.easy": 0,
            ".eq.bass": 0.5,
            ".eq.mid": 0.5,
            ".eq.treble": 0.5,
            ".eq.hpf.freq": 0.13094081900906065,
            ".eq.b1.freq": 0.328690190172717,
            ".eq.b1.q": 0.5,
            ".eq.b1.gain": 0.5,
            ".eq.b2.freq": 0.751513098048813,
            ".eq.b2.q": 0.38888888888888884,
            ".eq.b2.gain": 0.5819672131147541,
            ".eq.b3.freq": 0.863840426237309,
            ".eq.b3.q": 0.5455373406193079,
            ".eq.b3.gain": 0.47613296654962395,
            ".eq.b4.freq": 1,
            ".eq.b4.q": 0.5,
            ".eq.b4.gain": 0.6857923497267759,
          },
        },
        eqaux: {},
        eqm: {},
        dynch: {
          "Acoustic 1": { ".dyn.gate": 0, ".dyn.threshold": 0.8, ".dyn.gain": 0.75, ".dyn.ratio": 0.5094850948509485, ".dyn.softknee": 1, ".dyn.attack": 0, ".dyn.outgain": 0.3333, ".dyn.release": 0.34193978658536583 },
          "Acoustic 2": {
            ".dyn.gate": 0,
            ".dyn.threshold": 0.7597315436241611,
            ".dyn.gain": 0.75,
            ".dyn.ratio": 0.6043360433604336,
            ".dyn.softknee": 1,
            ".dyn.attack": 0.2981029810298103,
            ".dyn.outgain": 0.40105067750677503,
            ".dyn.release": 0.44492081639566394,
          },
          "Bass Gtr": { ".dyn.gate": 0, ".dyn.threshold": 0.8, ".dyn.gain": 0.75, ".dyn.ratio": 0.5094850948509485, ".dyn.softknee": 1, ".dyn.attack": 0, ".dyn.outgain": 0.3333, ".dyn.release": 0.34193978658536583 },
          "Ceiling Comp": { ".dyn.gate": 0, ".dyn.threshold": 0.836241610738255, ".dyn.gain": 0.75, ".dyn.ratio": 0, ".dyn.softknee": 0, ".dyn.attack": 0, ".dyn.outgain": 0.3333, ".dyn.release": 0 },
          "Classic Comp": {
            ".dyn.gate": 0,
            ".dyn.threshold": 0.7691275167785235,
            ".dyn.gain": 0.75,
            ".dyn.ratio": 0.4850948509485094,
            ".dyn.softknee": 1,
            ".dyn.attack": 0.07046070460704612,
            ".dyn.outgain": 0.4091807588075881,
            ".dyn.release": 0.7403137703252032,
          },
          "Drums OH": {
            ".dyn.gate": 0,
            ".dyn.threshold": 0.7973154362416107,
            ".dyn.gain": 0.75,
            ".dyn.ratio": 0.43267024324193704,
            ".dyn.softknee": 1,
            ".dyn.attack": 0,
            ".dyn.outgain": 0.3333,
            ".dyn.release": 0.3405814921307506,
          },
          "Electric Gtr": {
            ".dyn.gate": 0,
            ".dyn.threshold": 0.6738255033557047,
            ".dyn.gain": 0.75,
            ".dyn.ratio": 0.3929539295392953,
            ".dyn.softknee": 1,
            ".dyn.attack": 0.21951219512195125,
            ".dyn.outgain": 0.3333,
            ".dyn.release": 0.3771701388888889,
          },
          "EZ Comp": {
            ".dyn.gate": 0,
            ".dyn.threshold": 0.7651006711409396,
            ".dyn.gain": 0.75,
            ".dyn.ratio": 0.3929539295392953,
            ".dyn.softknee": 1,
            ".dyn.attack": 0.2628726287262873,
            ".dyn.outgain": 0.3333,
            ".dyn.release": 0.4015603827913279,
          },
          "Female Vocal": {
            ".dyn.gate": 0,
            ".dyn.threshold": 0.702013422818792,
            ".dyn.gain": 0.75,
            ".dyn.ratio": 0.24932249322493216,
            ".dyn.softknee": 1,
            ".dyn.attack": 0.3441734417344174,
            ".dyn.outgain": 0.46880135501355014,
            ".dyn.release": 0.24708883807588075,
          },
          "Kick Drum": {
            ".dyn.gate": 0,
            ".dyn.threshold": 0.6483221476510067,
            ".dyn.gain": 0.75,
            ".dyn.ratio": 0.4810963933630024,
            ".dyn.softknee": 1,
            ".dyn.attack": 0.15488801452784504,
            ".dyn.outgain": 0.4061353189815981,
            ".dyn.release": 0.22193742433414046,
          },
          "Male Vocal": {
            ".dyn.gate": 0,
            ".dyn.threshold": 0.7651006711409396,
            ".dyn.gain": 0.75,
            ".dyn.ratio": 0.24390243902439016,
            ".dyn.softknee": 1,
            ".dyn.attack": 0.1571815718157182,
            ".dyn.outgain": 0.4579612466124661,
            ".dyn.release": 0.3094194613821138,
          },
          "No Clip Comp": { ".dyn.gate": 0, ".dyn.threshold": 0.9181208053691275, ".dyn.gain": 0.75, ".dyn.ratio": 0, ".dyn.softknee": 0, ".dyn.attack": 0, ".dyn.outgain": 0.3333, ".dyn.release": 0 },
          "Snare Drum 1": {
            ".dyn.gate": 0,
            ".dyn.threshold": 0.6966442953020134,
            ".dyn.gain": 0.75,
            ".dyn.ratio": 0.4810963933630024,
            ".dyn.softknee": 1,
            ".dyn.attack": 0.18394370460048426,
            ".dyn.outgain": 0.3843435514271187,
            ".dyn.release": 0.20498827179176757,
          },
          "Snare Drum 2": {
            ".dyn.gate": 0,
            ".dyn.threshold": 0.7973154362416107,
            ".dyn.gain": 0.75,
            ".dyn.ratio": 0.43024893573588374,
            ".dyn.softknee": 0,
            ".dyn.attack": 0,
            ".dyn.outgain": 0.3333,
            ".dyn.release": 0.3414043583535109,
          },
          "Tom Tom": {
            ".dyn.gate": 0,
            ".dyn.threshold": 0.7033557046979866,
            ".dyn.gain": 0.75,
            ".dyn.ratio": 0.23654433525162227,
            ".dyn.softknee": 1,
            ".dyn.attack": 0.1645732445520581,
            ".dyn.outgain": 0.423084471523971,
            ".dyn.release": 0.34542410714285715,
          },
          "Vtg Acoustic Gtr": {
            ".dyn.gate": 0,
            ".dyn.threshold": 0.5342281879194631,
            ".dyn.gain": 0.75,
            ".dyn.ratio": 0.24932249322493227,
            ".dyn.softknee": 0,
            ".dyn.attack": 0.41192411924119243,
            ".dyn.outgain": 0.3739504065040651,
            ".dyn.release": 0.4878048780487805,
          },
          "Vtg Bass": {
            ".dyn.gate": 0,
            ".dyn.threshold": 0.2966442953020134,
            ".dyn.gain": 0.75,
            ".dyn.ratio": 0.048780487804878064,
            ".dyn.softknee": 0,
            ".dyn.attack": 0.41192411924119243,
            ".dyn.outgain": 0.5121617886178862,
            ".dyn.release": 0.4878048780487805,
          },
          "Vtg Bass EZ": {
            ".dyn.gate": 0,
            ".dyn.threshold": 0.4818791946308725,
            ".dyn.gain": 0.75,
            ".dyn.ratio": 0.24932249322493227,
            ".dyn.softknee": 0,
            ".dyn.attack": 0.41192411924119243,
            ".dyn.outgain": 0.37124037940379406,
            ".dyn.release": 0.4878048780487805,
          },
          "Vtg Drum Slam": {
            ".dyn.gate": 0,
            ".dyn.threshold": 0.3718120805369127,
            ".dyn.gain": 0.75,
            ".dyn.ratio": 0.04878048780487805,
            ".dyn.softknee": 0,
            ".dyn.attack": 0,
            ".dyn.outgain": 0.49861165311653116,
            ".dyn.release": 0,
          },
          "Vtg Drums Breathy": {
            ".dyn.gate": 0,
            ".dyn.threshold": 0.4684563758389262,
            ".dyn.gain": 0.75,
            ".dyn.ratio": 0.24932249322493227,
            ".dyn.softknee": 0,
            ".dyn.attack": 0.41192411924119243,
            ".dyn.outgain": 0.37937046070460706,
            ".dyn.release": 0.4878048780487805,
          },
          "Vtg Snare Drum": {
            ".dyn.gate": 0,
            ".dyn.threshold": 0.4080536912751678,
            ".dyn.gain": 0.75,
            ".dyn.ratio": 0.08130081300813011,
            ".dyn.softknee": 0,
            ".dyn.attack": 0,
            ".dyn.outgain": 0.47964146341463415,
            ".dyn.release": 0,
          },
          "Vtg Vocal": {
            ".dyn.gate": 0,
            ".dyn.threshold": 0.48053691275167787,
            ".dyn.gain": 0.75,
            ".dyn.ratio": 0.0840108401084011,
            ".dyn.softknee": 0,
            ".dyn.attack": 0.41192411924119243,
            ".dyn.outgain": 0.3739504065040651,
            ".dyn.release": 0.4878048780487805,
          },
        },
        dynm: {
          "Vtg Main Limit": {
            ".dyn.linked": 1,
            ".dyn.l.threshold": 0.9006711409395973,
            ".dyn.l.ratio": 0.04878048780487805,
            ".dyn.l.softknee": 0,
            ".dyn.l.attack": 0,
            ".dyn.l.release": 0.4884823848238482,
            ".dyn.l.outgain": 0.3333333333,
            ".dyn.r.threshold": 0.9006711409395973,
            ".dyn.r.ratio": 0.04878048780487805,
            ".dyn.r.softknee": 0,
            ".dyn.r.attack": 0,
            ".dyn.r.release": 0.4884823848238482,
            ".dyn.r.outgain": 0.3333333333,
          },
        },
        fxcho: {
          "Add Density": { ".par1": 0.5430809399477807, ".par2": 1, ".par3": 0.4699738903394256, ".par4": 0, ".par5": 0, ".par6": 0 },
          "Alien Encounter": { ".par1": 0.8302872062663186, ".par2": 0.44386422976501305, ".par3": 0.381201044386423, ".par4": 0, ".par5": 0, ".par6": 0 },
          Ambience: { ".par1": 0.5404699738903395, ".par2": 0.44386422976501305, ".par3": 1, ".par4": 0, ".par5": 0, ".par6": 0 },
          "Broken Piano": { ".par1": 1, ".par2": 1, ".par3": 1, ".par4": 0, ".par5": 0, ".par6": 0 },
          "Default Chorus": { ".par1": 0.4, ".par2": 0.5, ".par3": 1, ".par4": 0, ".par5": 0, ".par6": 0 },
          "Wide Stereo": { ".par1": 0.47780678851174935, ".par2": 0.7467362924281984, ".par3": 0.4621409921671018, ".par4": 0, ".par5": 0, ".par6": 0 },
        },
        fxdel: {
          "Band Pass Delay": { ".par1": 0.34153005464480873, ".par2": 0.0625, ".par3": 0.37377049180327865, ".par4": 0.5683060109289618, ".par5": 0, ".par6": 0 },
          "Basic Delay": { ".par1": 0.22404371584699453, ".par2": 0.0625, ".par3": 0.56775956284153, ".par4": 0.8497267759562842, ".par5": 0, ".par6": 0 },
          "Basic Slap": { ".par1": 0, ".par2": 0.03125, ".par3": 0.10874316939890699, ".par4": 0.8060109289617486, ".par5": 0, ".par6": 0 },
          "Lo Slap": { ".par1": 0.11475409836065574, ".par2": 0.0625, ".par3": 0.42841530054644805, ".par4": 0.7404371584699454, ".par5": 0, ".par6": 0 },
          "PA Default": { ".par1": 0.4453551912568306, ".par2": 0.125, ".par3": 0.5021857923497268, ".par4": 0.9453551912568305, ".par5": 0, ".par6": 0 },
          Pingy: { ".par1": 0.21311475409836064, ".par2": 0.0625, ".par3": 0.6551912568306011, ".par4": 0.6967213114754098, ".par5": 0, ".par6": 0 },
          Radio: { ".par1": 0, ".par2": 0.015625, ".par3": 0.6420765027322405, ".par4": 0.6174863387978142, ".par5": 0, ".par6": 0 },
          Springy: { ".par1": 0.005464480874316939, ".par2": 0.03125, ".par3": 0.5601092896174864, ".par4": 0.7704918032786885, ".par5": 0, ".par6": 0 },
        },
        fxrev: {
          Cathedral: { ".par1": 0.8446475195822454, ".par2": 0.5932114882506527, ".par3": 0.5, ".par4": 1, ".par5": 0, ".par6": 0 },
          "Close Up": { ".par1": 0.7845953002610965, ".par2": 0.17284595300261102, ".par3": 0.4046997389033943, ".par4": 0.8851174934725848, ".par5": 0, ".par6": 0 },
          "Concrete Chamber": { ".par1": 0.3315926892950391, ".par2": 0.783289817232376, ".par3": 0.8642297650130548, ".par4": 1, ".par5": 0.5274151436031331, ".par6": 0 },
          "Default Reverb": { ".par1": 0.5, ".par2": 0.4, ".par3": 0.5, ".par4": 1, ".par5": 0, ".par6": 0 },
          "Large Hall": { ".par1": 0.7349869451697127, ".par2": 0.6062663185378591, ".par3": 0.5, ".par4": 1, ".par5": 0, ".par6": 0 },
          "Large Space": { ".par1": 0.8511749347258486, ".par2": 0.7049608355091384, ".par3": 0.8642297650130548, ".par4": 1, ".par5": 0.5274151436031331, ".par6": 0 },
          "Medium Hall": { ".par1": 0.531331592689295, ".par2": 0.5984334203655353, ".par3": 0.5, ".par4": 1, ".par5": 0, ".par6": 0 },
          "Medium Studio": { ".par1": 0.25718015665796334, ".par2": 0.5331592689295039, ".par3": 0.5039164490861618, ".par4": 1, ".par5": 0, ".par6": 0 },
          "Small Room": { ".par1": 0.10835509138381201, ".par2": 0.1493472584856397, ".par3": 0.6892950391644909, ".par4": 1, ".par5": 0, ".par6": 0 },
          "Small Stage": { ".par1": 0.4216710182767623, ".par2": 0.5984334203655353, ".par3": 0.4046997389033943, ".par4": 0.8851174934725848, ".par5": 0, ".par6": 0 },
          Studio: { ".par1": 0.04569190600522181, ".par2": 1, ".par3": 0.4960835509138381, ".par4": 0.9765013054830287, ".par5": 0, ".par6": 0 },
          "Taj Mahal": { ".par1": 0.9477806788511749, ".par2": 0.7080939947780679, ".par3": 0.4060052219321149, ".par4": 0.97911227154047, ".par5": 0, ".par6": 0 },
          "Tight Ambience": { ".par1": 0, ".par2": 1, ".par3": 1, ".par4": 1, ".par5": 0.3289817232375979, ".par6": 0 },
          Warehouse: { ".par1": 0.6671018276762402, ".par2": 0.1780678851174935, ".par3": 0.31070496083550914, ".par4": 1, ".par5": 0, ".par6": 0 },
        },
        fxroom: {
          "Acoustic Ambience": { ".par1": 0.6540469973890339, ".par2": 0.5900783289817233, ".par3": 0.3093994778067885, ".par4": 1, ".par5": 0, ".par6": 0 },
          Bathroom: { ".par1": 0.671018276762402, ".par2": 1, ".par3": 1, ".par4": 1, ".par5": 0, ".par6": 0 },
          "Default Room": { ".par1": 0.5, ".par2": 0.4, ".par3": 0.5, ".par4": 1, ".par5": 0, ".par6": 0 },
          "Metal Plate": { ".par1": 0.8642297650130548, ".par2": 0.09660574412532641, ".par3": 0, ".par4": 1, ".par5": 0, ".par6": 0 },
          "Office Room": { ".par1": 0.7728459530026109, ".par2": 0.6135770234986946, ".par3": 0, ".par4": 1, ".par5": 0, ".par6": 0 },
          "Presence 1": { ".par1": 0.30287206266318534, ".par2": 1, ".par3": 0, ".par4": 1, ".par5": 0, ".par6": 0 },
          "Presence 2": { ".par1": 0.6814621409921671, ".par2": 1, ".par3": 0.28720626631853785, ".par4": 0.8642297650130548, ".par5": 0.1801566579634465, ".par6": 0 },
          "Small Studio": { ".par1": 0.30287206266318534, ".par2": 0.09660574412532641, ".par3": 0, ".par4": 1, ".par5": 0, ".par6": 0 },
          "Very Small Room": { ".par1": 0.1266318537859008, ".par2": 0.8616187989556136, ".par3": 0.5, ".par4": 1, ".par5": 0, ".par6": 0 },
        },
      };
    IMG_TABLE = {
      "ui_about.png": { img: "imga_1.png", x: 1, y: 1, cw: 1024, ch: 748, dx: 0, dy: 0, ow: 1024, oh: 748, rot: !1 },
      "TOPNAV-L.png": { img: "imga_1.png", x: 1, y: 751, cw: 601, ch: 75, dx: 0, dy: 0, ow: 601, oh: 75, rot: !1 },
      "SCLOGO_B.png": { img: "imga_1.png", x: 1, y: 828, cw: 567, ch: 153, dx: 0, dy: 0, ow: 567, oh: 155, rot: !1 },
      "TOPNAV-R-S.png": { img: "imga_1.png", x: 570, y: 828, cw: 430, ch: 75, dx: 0, dy: 0, ow: 430, oh: 75, rot: !1 },
      "TOPNAV-R.png": { img: "imga_1.png", x: 570, y: 905, cw: 430, ch: 75, dx: 0, dy: 0, ow: 430, oh: 75, rot: !1 },
      "TOPNAV-T3.png": { img: "imga_1.png", x: 604, y: 751, cw: 400, ch: 75, dx: 0, dy: 0, ow: 400, oh: 75, rot: !1 },
      "DIGI_AM.png": { img: "imga_1.png", x: 1, y: 983, cw: 293, ch: 26, dx: 0, dy: 0, ow: 293, oh: 26, rot: !1 },
      "dbx_logo.png": { img: "imga_1.png", x: 296, y: 983, cw: 276, ch: 40, dx: 0, dy: 0, ow: 276, oh: 40, rot: !1 },
      "lex_cho.png": { img: "imga_1.png", x: 574, y: 982, cw: 252, ch: 36, dx: 0, dy: 0, ow: 252, oh: 36, rot: !1 },
      "SO-TILE.png": { img: "imga_1.png", x: 70, y: 1011, cw: 224, ch: 10, dx: 0, dy: 0, ow: 224, oh: 10, rot: !1 },
      "SO-L-BTN-OFF.png": { img: "imga_1.png", x: 828, y: 982, cw: 192, ch: 36, dx: 0, dy: 0, ow: 192, oh: 36, rot: !1 },
      "M VU TILE2.png": { img: "imga_1.png", x: 1006, y: 751, cw: 10, ch: 120, dx: 0, dy: 0, ow: 10, oh: 120, rot: !1 },
      "TOPNAV-T.png": { img: "imga_1.png", x: 1002, y: 873, cw: 10, ch: 75, dx: 0, dy: 0, ow: 10, oh: 75, rot: !1 },
      "PEAK-ON.png": { img: "imga_1.png", x: 1002, y: 950, cw: 20, ch: 18, dx: 1, dy: 1, ow: 22, oh: 20, rot: !1 },
      "CHAIN.png": { img: "imga_1.png", x: 53, y: 1011, cw: 15, ch: 12, dx: 0, dy: 0, ow: 15, oh: 12, rot: !1 },
      "SPEAKER_OFF.png": { img: "imga_1.png", x: 36, y: 1011, cw: 15, ch: 12, dx: 0, dy: 0, ow: 15, oh: 12, rot: !1 },
      "PEAK-OFF.png": { img: "imga_1.png", x: 21, y: 1011, cw: 13, ch: 11, dx: 5, dy: 5, ow: 22, oh: 20, rot: !1 },
      "M VU TILEH.png": { img: "imga_1.png", x: 8, y: 1011, cw: 11, ch: 12, dx: 0, dy: 0, ow: 11, oh: 12, rot: !1 },
      "png-transparent.png": { img: "imga_1.png", x: 1018, y: 751, cw: 1, ch: 1, dx: 0, dy: 0, ow: 1, oh: 1, rot: !1 },
      "uix.png": { img: "imga_2.png", x: 1, y: 1, cw: 670, ch: 560, dx: 0, dy: 0, ow: 670, oh: 560, rot: !1 },
      "SO-TOP.png": { img: "imga_2.png", x: 673, y: 1, cw: 224, ch: 546, dx: 0, dy: 0, ow: 224, oh: 546, rot: !1 },
      "UI_SPLASH_D.png": { img: "imga_2.png", x: 1, y: 563, cw: 489, ch: 459, dx: 0, dy: 0, ow: 489, oh: 516, rot: !1 },
      "M VU TILE3.png": { img: "imga_2.png", x: 899, y: 1, cw: 10, ch: 480, dx: 0, dy: 0, ow: 10, oh: 480, rot: !1 },
      "SPKR-GREY.png": { img: "imga_2.png", x: 492, y: 563, cw: 391, ch: 412, dx: 13, dy: 0, ow: 416, oh: 442, rot: !1 },
      "DYN-LED.png": { img: "imga_2.png", x: 492, y: 977, cw: 314, ch: 42, dx: 0, dy: 0, ow: 314, oh: 42, rot: !1 },
      "BLANK-SC-TILE.png": { img: "imga_2.png", x: 911, y: 1, cw: 112, ch: 300, dx: 0, dy: 0, ow: 112, oh: 300, rot: !1 },
      "BLANK-SC-TILE4.png": { img: "imga_2.png", x: 911, y: 303, cw: 112, ch: 300, dx: 0, dy: 0, ow: 112, oh: 300, rot: !1 },
      "C-TILE.png": { img: "imga_2.png", x: 885, y: 605, cw: 112, ch: 264, dx: 0, dy: 0, ow: 112, oh: 264, rot: !1 },
      "SO-L-BTN-RED.png": { img: "imga_2.png", x: 808, y: 977, cw: 192, ch: 33, dx: 0, dy: 0, ow: 192, oh: 36, rot: !1 },
      "EQ-AUX-LED.png": { img: "imga_2.png", x: 885, y: 871, cw: 133, ch: 42, dx: 0, dy: 0, ow: 133, oh: 42, rot: !1 },
      "M-BOTTOM.png": { img: "imga_2.png", x: 885, y: 915, cw: 127, ch: 59, dx: 0, dy: 0, ow: 127, oh: 59, rot: !1 },
      "SO_TILE.png": { img: "imga_2.png", x: 673, y: 549, cw: 112, ch: 10, dx: 0, dy: 0, ow: 112, oh: 10, rot: !1 },
      "SO-SC-TILE.png": { img: "imga_2.png", x: 787, y: 549, cw: 112, ch: 10, dx: 0, dy: 0, ow: 112, oh: 10, rot: !1 },
      "SO_TILE_.png": { img: "imga_2.png", x: 808, y: 1012, cw: 112, ch: 10, dx: 0, dy: 0, ow: 112, oh: 10, rot: !1 },
      "PAN-SLIDER.png": { img: "imga_2.png", x: 885, y: 561, cw: 18, ch: 39, dx: 0, dy: 0, ow: 18, oh: 40, rot: !1 },
      "lock.png": { img: "imga_2.png", x: 999, y: 605, cw: 16, ch: 20, dx: 11, dy: 9, ow: 38, oh: 38, rot: !1 },
      "lock_3.png": { img: "imga_2.png", x: 999, y: 627, cw: 14, ch: 16, dx: 3, dy: 2, ow: 20, oh: 20, rot: !1 },
      "BOLT_ICON.png": { img: "imga_2.png", x: 999, y: 645, cw: 12, ch: 16, dx: 2, dy: 0, ow: 16, oh: 16, rot: !1 },
      "BOLT_ICON_W.png": { img: "imga_2.png", x: 999, y: 663, cw: 12, ch: 16, dx: 2, dy: 0, ow: 16, oh: 16, rot: !1 },
      "picto_gr.png": { img: "imga_2.png", x: 999, y: 681, cw: 14, ch: 14, dx: 0, dy: 0, ow: 14, oh: 14, rot: !1 },
      "picto_gr2.png": { img: "imga_2.png", x: 999, y: 697, cw: 14, ch: 14, dx: 0, dy: 0, ow: 14, oh: 14, rot: !1 },
      "M VU TILE5.png": { img: "imga_2.png", x: 999, y: 713, cw: 11, ch: 12, dx: 0, dy: 0, ow: 11, oh: 12, rot: !1 },
      "M VU TILE4.png": { img: "imga_2.png", x: 1012, y: 713, cw: 11, ch: 12, dx: 0, dy: 0, ow: 11, oh: 12, rot: !1 },
      "M VU TILE.png": { img: "imga_2.png", x: 899, y: 483, cw: 10, ch: 12, dx: 0, dy: 0, ow: 10, oh: 12, rot: !1 },
      "PEDAL-LIGHT-ON.png": { img: "imga_2.png", x: 999, y: 727, cw: 11, ch: 11, dx: 0, dy: 0, ow: 11, oh: 11, rot: !1 },
      "LEX-DA.png": { img: "imga_3.png", x: 1, y: 1, cw: 400, ch: 90, dx: 0, dy: 0, ow: 400, oh: 90, rot: !1 },
      "lex_plate_clean.png": { img: "imga_3.png", x: 403, y: 1, cw: 400, ch: 90, dx: 0, dy: 0, ow: 400, oh: 90, rot: !1 },
      "LEX-DB.png": { img: "imga_3.png", x: 1, y: 93, cw: 400, ch: 90, dx: 0, dy: 0, ow: 400, oh: 90, rot: !1 },
      "LEX-REV.png": { img: "imga_3.png", x: 403, y: 93, cw: 400, ch: 90, dx: 0, dy: 0, ow: 400, oh: 90, rot: !1 },
      "LEX-RM.png": { img: "imga_3.png", x: 1, y: 185, cw: 400, ch: 90, dx: 0, dy: 0, ow: 400, oh: 90, rot: !1 },
      "LEX-CH.png": { img: "imga_3.png", x: 403, y: 185, cw: 400, ch: 90, dx: 0, dy: 0, ow: 400, oh: 90, rot: !1 },
      "DIGICAB_A2.png": { img: "imga_3.png", x: 1, y: 277, cw: 391, ch: 150, dx: 13, dy: 0, ow: 416, oh: 150, rot: !1 },
      "DIGIAMP_A.png": { img: "imga_3.png", x: 394, y: 277, cw: 345, ch: 139, dx: 0, dy: 0, ow: 345, oh: 139, rot: !1 },
      "AMP-GREY.png": { img: "imga_3.png", x: 678, y: 418, cw: 345, ch: 139, dx: 0, dy: 0, ow: 345, oh: 139, rot: !1 },
      "lex_logo.png": { img: "imga_3.png", x: 741, y: 277, cw: 246, ch: 36, dx: 0, dy: 0, ow: 246, oh: 36, rot: !1 },
      "lex_dly.png": { img: "imga_3.png", x: 741, y: 315, cw: 238, ch: 40, dx: 0, dy: 0, ow: 238, oh: 40, rot: !1 },
      "lex_rmlogo.png": { img: "imga_3.png", x: 741, y: 357, cw: 236, ch: 36, dx: 0, dy: 0, ow: 236, oh: 36, rot: !1 },
      "SO-BOTTOM.png": { img: "imga_3.png", x: 452, y: 418, cw: 224, ch: 142, dx: 0, dy: 0, ow: 224, oh: 142, rot: !1 },
      "M-TOP-NCS.png": { img: "imga_3.png", x: 805, y: 1, cw: 127, ch: 202, dx: 0, dy: 0, ow: 127, oh: 202, rot: !1 },
      "AUX-M-TOP2.png": { img: "imga_3.png", x: 323, y: 429, cw: 127, ch: 202, dx: 0, dy: 0, ow: 127, oh: 202, rot: !1 },
      "C-AUX-TOP.png": { img: "imga_3.png", x: 209, y: 429, cw: 112, ch: 202, dx: 0, dy: 0, ow: 112, oh: 202, rot: !1 },
      "C-AUX-TOP-UPD.png": { img: "imga_3.png", x: 95, y: 429, cw: 112, ch: 202, dx: 0, dy: 0, ow: 112, oh: 202, rot: !1 },
      "C-TOP.png": { img: "imga_3.png", x: 911, y: 559, cw: 112, ch: 201, dx: 0, dy: 0, ow: 112, oh: 201, rot: !1 },
      "AUX-SC-TOP.png": { img: "imga_3.png", x: 797, y: 559, cw: 112, ch: 201, dx: 0, dy: 0, ow: 112, oh: 201, rot: !1 },
      "TOPNAV-T2.png": { img: "imga_3.png", x: 595, y: 562, cw: 200, ch: 75, dx: 0, dy: 0, ow: 200, oh: 75, rot: !1 },
      "SO-L-BTN-TUR.png": { img: "imga_3.png", x: 805, y: 205, cw: 192, ch: 33, dx: 0, dy: 0, ow: 192, oh: 36, rot: !1 },
      "SO-SC-TOP.png": { img: "imga_3.png", x: 481, y: 562, cw: 112, ch: 190, dx: 0, dy: 0, ow: 112, oh: 190, rot: !1 },
      "SC-TOP.png": { img: "imga_3.png", x: 367, y: 633, cw: 112, ch: 190, dx: 0, dy: 0, ow: 112, oh: 190, rot: !1 },
      "EQ-CHN-LED.png": { img: "imga_3.png", x: 175, y: 633, cw: 190, ch: 42, dx: 0, dy: 0, ow: 190, oh: 42, rot: !1 },
      "BLANK-SC-TOP2.png": { img: "imga_3.png", x: 61, y: 633, cw: 112, ch: 161, dx: 0, dy: 0, ow: 112, oh: 161, rot: !1 },
      "TOPNAV-LED.png": { img: "imga_3.png", x: 595, y: 639, cw: 157, ch: 42, dx: 2, dy: 0, ow: 160, oh: 54, rot: !1 },
      "LED-PRESET.png": { img: "imga_3.png", x: 805, y: 240, cw: 150, ch: 24, dx: 0, dy: 0, ow: 150, oh: 24, rot: !1 },
      "M-TILE.png": { img: "imga_3.png", x: 175, y: 677, cw: 127, ch: 42, dx: 0, dy: 0, ow: 127, oh: 42, rot: !1 },
      "M-LABEL.png": { img: "imga_3.png", x: 595, y: 683, cw: 127, ch: 34, dx: 0, dy: 0, ow: 127, oh: 34, rot: !1 },
      "SO-SC-BOTTOM.png": { img: "imga_3.png", x: 253, y: 721, cw: 112, ch: 125, dx: 0, dy: 0, ow: 112, oh: 125, rot: !1 },
      "SC-BOTTOM.png": { img: "imga_3.png", x: 595, y: 719, cw: 112, ch: 125, dx: 0, dy: 0, ow: 112, oh: 125, rot: !1 },
      "SO_SCUI_LOGO_.png": { img: "imga_3.png", x: 481, y: 754, cw: 112, ch: 125, dx: 0, dy: 0, ow: 112, oh: 125, rot: !1 },
      "MTA-OFF.png": { img: "imga_3.png", x: 709, y: 762, cw: 119, ch: 37, dx: 0, dy: 0, ow: 119, oh: 37, rot: !1 },
      "CMIX-OFF.png": { img: "imga_3.png", x: 830, y: 762, cw: 119, ch: 37, dx: 0, dy: 0, ow: 119, oh: 37, rot: !1 },
      "MTA-ON.png": { img: "imga_3.png", x: 1, y: 796, cw: 119, ch: 35, dx: 0, dy: 0, ow: 119, oh: 37, rot: !1 },
      "CMIX-ON.png": { img: "imga_3.png", x: 122, y: 796, cw: 119, ch: 35, dx: 0, dy: 0, ow: 119, oh: 37, rot: !1 },
      "LARGE-MUTE-OFF.png": { img: "imga_3.png", x: 906, y: 801, cw: 117, ch: 37, dx: 0, dy: 0, ow: 117, oh: 37, rot: !1 },
      "LARGE-MUTE-ON.png": { img: "imga_3.png", x: 787, y: 801, cw: 117, ch: 35, dx: 0, dy: 0, ow: 117, oh: 37, rot: !1 },
      "AUX-SC-TILE.png": { img: "imga_3.png", x: 367, y: 825, cw: 112, ch: 100, dx: 0, dy: 0, ow: 112, oh: 100, rot: !1 },
      "SO_BOTTOM.png": { img: "imga_3.png", x: 1, y: 833, cw: 112, ch: 78, dx: 0, dy: 0, ow: 112, oh: 78, rot: !1 },
      "SO_SCA_LOGO_F.png": { img: "imga_3.png", x: 115, y: 833, cw: 112, ch: 64, dx: 0, dy: 0, ow: 112, oh: 64, rot: !1 },
      "SO_SCB_LOGO.png": { img: "imga_3.png", x: 709, y: 838, cw: 112, ch: 64, dx: 0, dy: 0, ow: 112, oh: 64, rot: !1 },
      "BLANK-SC-BOTTOM.png": { img: "imga_3.png", x: 823, y: 840, cw: 112, ch: 59, dx: 0, dy: 0, ow: 112, oh: 59, rot: !1 },
      "C-BOT.png": { img: "imga_3.png", x: 229, y: 848, cw: 112, ch: 59, dx: 0, dy: 0, ow: 112, oh: 59, rot: !1 },
      "AUX-SC-BOTTOM.png": { img: "imga_3.png", x: 595, y: 846, cw: 112, ch: 59, dx: 0, dy: 0, ow: 112, oh: 59, rot: !1 },
      "BLANK-SC-TILE3.png": { img: "imga_3.png", x: 823, y: 840, cw: 112, ch: 59, dx: 0, dy: 0, ow: 112, oh: 59, rot: !1 },
      "C-TILE_small.png": { img: "imga_3.png", x: 481, y: 881, cw: 112, ch: 42, dx: 0, dy: 0, ow: 112, oh: 42, rot: !1 },
      "BLANK-SC-TILE2.png": { img: "imga_3.png", x: 115, y: 899, cw: 112, ch: 42, dx: 0, dy: 0, ow: 112, oh: 42, rot: !1 },
      "BLANK-SC-LABEL.png": { img: "imga_3.png", x: 911, y: 901, cw: 112, ch: 35, dx: 0, dy: 0, ow: 112, oh: 35, rot: !1 },
      "C-LABEL.png": { img: "imga_3.png", x: 797, y: 904, cw: 112, ch: 34, dx: 0, dy: 0, ow: 112, oh: 34, rot: !1 },
      "SC-TILE.png": { img: "imga_3.png", x: 741, y: 395, cw: 112, ch: 10, dx: 0, dy: 0, ow: 112, oh: 10, rot: !1 },
      "HIZ-OFF.png": { img: "imga_3.png", x: 691, y: 907, cw: 104, ch: 37, dx: 0, dy: 0, ow: 104, oh: 37, rot: !1 },
      "PHANTOM-OFF.png": { img: "imga_3.png", x: 229, y: 909, cw: 104, ch: 37, dx: 0, dy: 0, ow: 104, oh: 37, rot: !1 },
      "MUTE-L-BTN-OFF.png": { img: "imga_3.png", x: 9, y: 913, cw: 104, ch: 37, dx: 0, dy: 0, ow: 104, oh: 37, rot: !1 },
      "MUTE-L-BTN-ON.png": { img: "imga_3.png", x: 585, y: 925, cw: 104, ch: 35, dx: 0, dy: 0, ow: 104, oh: 37, rot: !1 },
      "HIZ-ON.png": { img: "imga_3.png", x: 335, y: 927, cw: 104, ch: 35, dx: 0, dy: 0, ow: 104, oh: 37, rot: !1 },
      "PHANTOM-ON.png": { img: "imga_3.png", x: 441, y: 927, cw: 104, ch: 35, dx: 0, dy: 0, ow: 104, oh: 37, rot: !1 },
      "DIGITECH_LOGO.png": { img: "imga_3.png", x: 855, y: 395, cw: 102, ch: 18, dx: 0, dy: 0, ow: 102, oh: 18, rot: !1 },
      "TAP-B-OFF.png": { img: "imga_3.png", x: 922, y: 938, cw: 101, ch: 45, dx: 0, dy: 0, ow: 101, oh: 45, rot: !1 },
      "TAP-BLA-OFF.png": { img: "imga_3.png", x: 819, y: 940, cw: 101, ch: 45, dx: 0, dy: 0, ow: 101, oh: 45, rot: !1 },
      "MOME-OFF.png": { img: "imga_3.png", x: 716, y: 946, cw: 101, ch: 45, dx: 0, dy: 0, ow: 101, oh: 45, rot: !1 },
      "TAP-B-ON.png": { img: "imga_3.png", x: 115, y: 943, cw: 101, ch: 43, dx: 0, dy: 0, ow: 101, oh: 45, rot: !1 },
      "TAP-B-ON2.png": { img: "imga_3.png", x: 218, y: 948, cw: 101, ch: 43, dx: 0, dy: 0, ow: 101, oh: 45, rot: !1 },
      "TAP-BLA-ON.png": { img: "imga_3.png", x: 12, y: 952, cw: 101, ch: 42, dx: 0, dy: 0, ow: 101, oh: 45, rot: !1 },
      "MOME-ON.png": { img: "imga_3.png", x: 321, y: 964, cw: 101, ch: 42, dx: 0, dy: 0, ow: 101, oh: 45, rot: !1 },
      "TAP-BLU-ON.png": { img: "imga_3.png", x: 424, y: 964, cw: 101, ch: 42, dx: 0, dy: 0, ow: 101, oh: 45, rot: !1 },
      "TAPT-BTN-OFF.png": { img: "imga_3.png", x: 527, y: 964, cw: 101, ch: 35, dx: 0, dy: 0, ow: 101, oh: 35, rot: !1 },
      "MUTEA-BTN-OFF.png": { img: "imga_3.png", x: 922, y: 985, cw: 101, ch: 35, dx: 0, dy: 0, ow: 101, oh: 35, rot: !1 },
      "FXRET-BTN-OFF.png": { img: "imga_3.png", x: 819, y: 987, cw: 101, ch: 35, dx: 0, dy: 0, ow: 101, oh: 35, rot: !1 },
      "SUBGR-BTN-OFF.png": { img: "imga_3.png", x: 115, y: 988, cw: 101, ch: 35, dx: 0, dy: 0, ow: 101, oh: 35, rot: !1 },
      "mix_a.png": { img: "imga_3.png", x: 1, y: 429, cw: 92, ch: 44, dx: 0, dy: 0, ow: 92, oh: 49, rot: !1 },
      "mix_b2.png": { img: "imga_3.png", x: 1, y: 475, cw: 92, ch: 44, dx: 0, dy: 0, ow: 92, oh: 49, rot: !1 },
      "EDT-ON.png": { img: "imga_3.png", x: 1, y: 521, cw: 92, ch: 44, dx: 0, dy: 0, ow: 92, oh: 49, rot: !1 },
      "EDT-ON_T.png": { img: "imga_3.png", x: 1, y: 567, cw: 92, ch: 44, dx: 0, dy: 0, ow: 92, oh: 49, rot: !1 },
      "VCA_OFF.png": { img: "imga_3.png", x: 934, y: 1, cw: 88, ch: 56, dx: 0, dy: 0, ow: 88, oh: 56, rot: !1 },
      "AUXM_OFF.png": { img: "imga_3.png", x: 934, y: 59, cw: 88, ch: 56, dx: 0, dy: 0, ow: 88, oh: 56, rot: !1 },
      "SO-B-BTN-OFF.png": { img: "imga_3.png", x: 934, y: 117, cw: 88, ch: 56, dx: 0, dy: 0, ow: 88, oh: 56, rot: !1 },
      "SLIDER_RED.png": { img: "imga_3.png", x: 989, y: 240, cw: 31, ch: 85, dx: 0, dy: 0, ow: 31, oh: 90, rot: !1 },
      "SLIDER_PURPLE.png": { img: "imga_3.png", x: 981, y: 327, cw: 31, ch: 85, dx: 0, dy: 0, ow: 31, oh: 90, rot: !1 },
      "SLIDER_YELLOW.png": { img: "imga_3.png", x: 28, y: 613, cw: 31, ch: 85, dx: 0, dy: 0, ow: 31, oh: 90, rot: !1 },
      "FADER_PINK.png": { img: "imga_3.png", x: 754, y: 639, cw: 31, ch: 85, dx: 0, dy: 0, ow: 31, oh: 90, rot: !1 },
      "FADER_UI.png": { img: "imga_3.png", x: 28, y: 700, cw: 31, ch: 85, dx: 0, dy: 0, ow: 31, oh: 90, rot: !1 },
      "AUXS-LED.png": { img: "imga_3.png", x: 709, y: 726, cw: 80, ch: 29, dx: 0, dy: 0, ow: 80, oh: 29, rot: !1 },
      "DYN-ON.png": { img: "imga_3.png", x: 937, y: 840, cw: 77, ch: 45, dx: 0, dy: 0, ow: 77, oh: 49, rot: !1 },
      "UMIX-ON3.png": { img: "imga_3.png", x: 630, y: 962, cw: 77, ch: 45, dx: 0, dy: 0, ow: 77, oh: 49, rot: !1 },
      "SLIDER_SILVER_H.png": { img: "imga_3.png", x: 175, y: 721, cw: 72, ch: 46, dx: 0, dy: 0, ow: 72, oh: 49, rot: !1 },
      "RESET-OFF.png": { img: "imga_3.png", x: 951, y: 762, cw: 72, ch: 37, dx: 0, dy: 0, ow: 72, oh: 37, rot: !1 },
      "BYPASS-ON.png": { img: "imga_3.png", x: 709, y: 801, cw: 72, ch: 35, dx: 0, dy: 0, ow: 72, oh: 37, rot: !1 },
      "FX-S-LED.png": { img: "imga_3.png", x: 934, y: 175, cw: 70, ch: 23, dx: 0, dy: 0, ow: 70, oh: 23, rot: !1 },
      "lex.png": { img: "imga_3.png", x: 175, y: 769, cw: 66, ch: 21, dx: 0, dy: 0, ow: 66, oh: 21, rot: !1 },
      "EQ-FADER-H-GRAY.png": { img: "imga_3.png", x: 304, y: 677, cw: 61, ch: 42, dx: 0, dy: 0, ow: 61, oh: 45, rot: !1 },
      "AFS2LOGO.png": { img: "imga_3.png", x: 218, y: 993, cw: 39, ch: 23, dx: 0, dy: 0, ow: 39, oh: 23, rot: !1 },
      "dbx.png": { img: "imga_3.png", x: 547, y: 925, cw: 36, ch: 21, dx: 0, dy: 0, ow: 36, oh: 21, rot: !1 },
      "lex_load-btn-off.png": { img: "imga_3.png", x: 786, y: 993, cw: 31, ch: 29, dx: 0, dy: 0, ow: 31, oh: 29, rot: !1 },
      "lex_load-btn-on.png": { img: "imga_3.png", x: 259, y: 993, cw: 31, ch: 29, dx: 0, dy: 0, ow: 31, oh: 29, rot: !1 },
      "lex_load-btn-off_b.png": { img: "imga_3.png", x: 753, y: 993, cw: 31, ch: 29, dx: 0, dy: 0, ow: 31, oh: 29, rot: !1 },
      "MUTEGR-BTN-OFF.png": { img: "imga_4.png", x: 1, y: 1, cw: 101, ch: 35, dx: 0, dy: 0, ow: 101, oh: 35, rot: !1 },
      "AUXM-BTN-OFF.png": { img: "imga_4.png", x: 104, y: 1, cw: 101, ch: 35, dx: 0, dy: 0, ow: 101, oh: 35, rot: !1 },
      "INPUTS-OFF.png": { img: "imga_4.png", x: 207, y: 1, cw: 101, ch: 35, dx: 0, dy: 0, ow: 101, oh: 35, rot: !1 },
      "VIEWGR-BTN-OFF.png": { img: "imga_4.png", x: 310, y: 1, cw: 101, ch: 35, dx: 0, dy: 0, ow: 101, oh: 35, rot: !1 },
      "TAPT-BTN-ON.png": { img: "imga_4.png", x: 413, y: 1, cw: 101, ch: 32, dx: 0, dy: 0, ow: 101, oh: 35, rot: !1 },
      "FXRET-BTN-ON.png": { img: "imga_4.png", x: 516, y: 1, cw: 101, ch: 32, dx: 0, dy: 0, ow: 101, oh: 35, rot: !1 },
      "AUXM-BTN-ON.png": { img: "imga_4.png", x: 619, y: 1, cw: 101, ch: 32, dx: 0, dy: 0, ow: 101, oh: 35, rot: !1 },
      "AUXM-BTN-ON2.png": { img: "imga_4.png", x: 722, y: 1, cw: 101, ch: 32, dx: 0, dy: 0, ow: 101, oh: 35, rot: !1 },
      "SUBGR-BTN-ON.png": { img: "imga_4.png", x: 825, y: 1, cw: 101, ch: 32, dx: 0, dy: 0, ow: 101, oh: 35, rot: !1 },
      "INPUTS-ON.png": { img: "imga_4.png", x: 922, y: 35, cw: 101, ch: 32, dx: 0, dy: 0, ow: 101, oh: 35, rot: !1 },
      "MUTEGR-BTN-ON.png": { img: "imga_4.png", x: 819, y: 35, cw: 101, ch: 32, dx: 0, dy: 0, ow: 101, oh: 35, rot: !1 },
      "MUTEA-BTN-ON.png": { img: "imga_4.png", x: 716, y: 35, cw: 101, ch: 32, dx: 0, dy: 0, ow: 101, oh: 35, rot: !1 },
      "VIEWGR-BTN-ON.png": { img: "imga_4.png", x: 613, y: 35, cw: 101, ch: 32, dx: 0, dy: 0, ow: 101, oh: 35, rot: !1 },
      "TAP-B-ON_.png": { img: "imga_4.png", x: 517, y: 35, cw: 94, ch: 44, dx: 0, dy: 0, ow: 94, oh: 46, rot: !1 },
      "TAP-B-OFF_.png": { img: "imga_4.png", x: 421, y: 35, cw: 94, ch: 44, dx: 0, dy: 0, ow: 94, oh: 46, rot: !1 },
      "FXS-ON.png": { img: "imga_4.png", x: 327, y: 38, cw: 92, ch: 43, dx: 0, dy: 0, ow: 92, oh: 49, rot: !1 },
      "AUXS-ON.png": { img: "imga_4.png", x: 233, y: 38, cw: 92, ch: 43, dx: 0, dy: 0, ow: 92, oh: 49, rot: !1 },
      "AUX-BTN_Y1.png": { img: "imga_4.png", x: 139, y: 38, cw: 92, ch: 43, dx: 0, dy: 0, ow: 92, oh: 49, rot: !1 },
      "MIXG-ON.png": { img: "imga_4.png", x: 45, y: 38, cw: 92, ch: 43, dx: 0, dy: 0, ow: 92, oh: 49, rot: !1 },
      "MIX_B100.png": { img: "imga_4.png", x: 931, y: 69, cw: 92, ch: 43, dx: 0, dy: 0, ow: 92, oh: 49, rot: !1 },
      "MIXG-GAIN.png": { img: "imga_4.png", x: 837, y: 69, cw: 92, ch: 43, dx: 0, dy: 0, ow: 92, oh: 49, rot: !1 },
      "GAIN-ON.png": { img: "imga_4.png", x: 743, y: 69, cw: 92, ch: 40, dx: 0, dy: 3, ow: 92, oh: 49, rot: !1 },
      "MIXG-OFF.png": { img: "imga_4.png", x: 651, y: 69, cw: 90, ch: 45, dx: 1, dy: 4, ow: 92, oh: 49, rot: !1 },
      "GAIN-OFF.png": { img: "imga_4.png", x: 559, y: 81, cw: 90, ch: 45, dx: 1, dy: 4, ow: 92, oh: 49, rot: !1 },
      "FXS-OFF.png": { img: "imga_4.png", x: 467, y: 81, cw: 90, ch: 45, dx: 1, dy: 4, ow: 92, oh: 49, rot: !1 },
      "AUXS-OFF.png": { img: "imga_4.png", x: 375, y: 83, cw: 90, ch: 45, dx: 1, dy: 4, ow: 92, oh: 49, rot: !1 },
      "EDT-OFF.png": { img: "imga_4.png", x: 283, y: 83, cw: 90, ch: 44, dx: 1, dy: 5, ow: 92, oh: 49, rot: !1 },
      "TAPT-BTN_DLY-OFF.png": { img: "imga_4.png", x: 191, y: 83, cw: 90, ch: 35, dx: 0, dy: 0, ow: 90, oh: 35, rot: !1 },
      "TAPT-BTN_DLY-ON.png": { img: "imga_4.png", x: 928, y: 1, cw: 90, ch: 32, dx: 0, dy: 0, ow: 90, oh: 35, rot: !1 },
      "SUBG_OFF.png": { img: "imga_4.png", x: 101, y: 83, cw: 88, ch: 56, dx: 0, dy: 0, ow: 88, oh: 56, rot: !1 },
      "FXM_OFF.png": { img: "imga_4.png", x: 11, y: 83, cw: 88, ch: 56, dx: 0, dy: 0, ow: 88, oh: 56, rot: !1 },
      "AUXM_ON.png": { img: "imga_4.png", x: 743, y: 111, cw: 88, ch: 53, dx: 0, dy: 0, ow: 88, oh: 56, rot: !1 },
      "FXM_ON.png": { img: "imga_4.png", x: 833, y: 114, cw: 88, ch: 53, dx: 0, dy: 0, ow: 88, oh: 56, rot: !1 },
      "SO-B-BTN-GRE.png": { img: "imga_4.png", x: 923, y: 114, cw: 88, ch: 53, dx: 0, dy: 0, ow: 88, oh: 56, rot: !1 },
      "VCA_ON.png": { img: "imga_4.png", x: 653, y: 116, cw: 88, ch: 53, dx: 0, dy: 0, ow: 88, oh: 56, rot: !1 },
      "SO-B-BTN-PNK.png": { img: "imga_4.png", x: 191, y: 120, cw: 88, ch: 53, dx: 0, dy: 0, ow: 88, oh: 56, rot: !1 },
      "SO-B-BTN-BLU.png": { img: "imga_4.png", x: 281, y: 130, cw: 88, ch: 53, dx: 0, dy: 0, ow: 88, oh: 56, rot: !1 },
      "SUBG_ON.png": { img: "imga_4.png", x: 371, y: 130, cw: 88, ch: 53, dx: 0, dy: 0, ow: 88, oh: 56, rot: !1 },
      "SO-B-BTN-YLW.png": { img: "imga_4.png", x: 461, y: 130, cw: 88, ch: 53, dx: 0, dy: 0, ow: 88, oh: 56, rot: !1 },
      "SO-M-BTN-OFF.png": { img: "imga_4.png", x: 551, y: 128, cw: 88, ch: 36, dx: 0, dy: 0, ow: 88, oh: 36, rot: !1 },
      "SO-M-BTN-PNK.png": { img: "imga_4.png", x: 101, y: 141, cw: 88, ch: 33, dx: 0, dy: 0, ow: 88, oh: 36, rot: !1 },
      "SO-M-BTN-RED.png": { img: "imga_4.png", x: 11, y: 141, cw: 88, ch: 33, dx: 0, dy: 0, ow: 88, oh: 36, rot: !1 },
      "SO-M-BTN-BLU.png": { img: "imga_4.png", x: 743, y: 166, cw: 88, ch: 33, dx: 0, dy: 0, ow: 88, oh: 36, rot: !1 },
      "SO-M-BTN-TUR.png": { img: "imga_4.png", x: 833, y: 169, cw: 88, ch: 33, dx: 0, dy: 0, ow: 88, oh: 36, rot: !1 },
      "FADER_UI_BL.png": { img: "imga_4.png", x: 923, y: 169, cw: 31, ch: 85, dx: 0, dy: 0, ow: 31, oh: 90, rot: !1 },
      "SLIDER_PINK.png": { img: "imga_4.png", x: 956, y: 169, cw: 31, ch: 85, dx: 0, dy: 0, ow: 31, oh: 90, rot: !1 },
      "FADER_UI_B.png": { img: "imga_4.png", x: 989, y: 169, cw: 31, ch: 85, dx: 0, dy: 0, ow: 31, oh: 90, rot: !1 },
      "SLIDER_PEW.png": { img: "imga_4.png", x: 710, y: 171, cw: 31, ch: 85, dx: 0, dy: 0, ow: 31, oh: 90, rot: !1 },
      "SLIDER_BLUE.png": { img: "imga_4.png", x: 551, y: 166, cw: 31, ch: 85, dx: 0, dy: 0, ow: 31, oh: 90, rot: !1 },
      "FADER_UI_A.png": { img: "imga_4.png", x: 584, y: 166, cw: 31, ch: 85, dx: 0, dy: 0, ow: 31, oh: 90, rot: !1 },
      "SLIDER_GREEN.png": { img: "imga_4.png", x: 617, y: 166, cw: 31, ch: 85, dx: 0, dy: 0, ow: 31, oh: 90, rot: !1 },
      "FADER-SILVER2.png": { img: "imga_4.png", x: 650, y: 171, cw: 31, ch: 85, dx: 0, dy: 0, ow: 31, oh: 90, rot: !1 },
      "FADER_BLUE.png": { img: "imga_4.png", x: 191, y: 175, cw: 31, ch: 85, dx: 0, dy: 0, ow: 31, oh: 90, rot: !1 },
      "FADER-RED2.png": { img: "imga_4.png", x: 224, y: 175, cw: 31, ch: 85, dx: 0, dy: 0, ow: 31, oh: 90, rot: !1 },
      "FADER_YELLOW.png": { img: "imga_4.png", x: 158, y: 176, cw: 31, ch: 85, dx: 0, dy: 0, ow: 31, oh: 90, rot: !1 },
      "FADER-ORANGE.png": { img: "imga_4.png", x: 125, y: 176, cw: 31, ch: 85, dx: 0, dy: 0, ow: 31, oh: 90, rot: !1 },
      "UMIX-ON.png": { img: "imga_4.png", x: 46, y: 176, cw: 77, ch: 45, dx: 0, dy: 0, ow: 77, oh: 49, rot: !1 },
      "UMIX-ON2.png": { img: "imga_4.png", x: 257, y: 185, cw: 77, ch: 45, dx: 0, dy: 0, ow: 77, oh: 49, rot: !1 },
      "FX-ON.png": { img: "imga_4.png", x: 336, y: 185, cw: 77, ch: 45, dx: 0, dy: 0, ow: 77, oh: 49, rot: !1 },
      "AUX-ON.png": { img: "imga_4.png", x: 415, y: 185, cw: 77, ch: 45, dx: 0, dy: 0, ow: 77, oh: 49, rot: !1 },
      "EQ-ON.png": { img: "imga_4.png", x: 743, y: 204, cw: 77, ch: 45, dx: 0, dy: 0, ow: 77, oh: 49, rot: !1 },
      "PEDAL-GREY.png": { img: "imga_4.png", x: 822, y: 204, cw: 62, ch: 76, dx: 0, dy: 0, ow: 62, oh: 76, rot: !1 },
      "FX-FADER-YELLOW.png": { img: "imga_4.png", x: 14, y: 176, cw: 30, ch: 74, dx: 0, dy: 0, ow: 30, oh: 75, rot: !1 },
      "FX-FADER-PURPLE.png": { img: "imga_4.png", x: 494, y: 185, cw: 30, ch: 74, dx: 0, dy: 0, ow: 30, oh: 75, rot: !1 },
      "FX-FADER-ORANGE.png": { img: "imga_4.png", x: 886, y: 204, cw: 30, ch: 74, dx: 0, dy: 0, ow: 30, oh: 75, rot: !1 },
      "EQ-FADER-GREY.png": { img: "imga_4.png", x: 46, y: 223, cw: 30, ch: 74, dx: 0, dy: 0, ow: 30, oh: 75, rot: !1 },
      "FX-FADER-BLUE.png": { img: "imga_4.png", x: 78, y: 223, cw: 30, ch: 74, dx: 0, dy: 0, ow: 30, oh: 75, rot: !1 },
      "FX-FADER-GREEN.png": { img: "imga_4.png", x: 257, y: 232, cw: 30, ch: 74, dx: 0, dy: 0, ow: 30, oh: 75, rot: !1 },
      "EQ-FADER-RED.png": { img: "imga_4.png", x: 289, y: 232, cw: 30, ch: 74, dx: 0, dy: 0, ow: 30, oh: 75, rot: !1 },
      "BYPASS-OFF.png": { img: "imga_4.png", x: 321, y: 232, cw: 72, ch: 37, dx: 0, dy: 0, ow: 72, oh: 37, rot: !1 },
      "FIXED-OFF.png": { img: "imga_4.png", x: 395, y: 232, cw: 72, ch: 37, dx: 0, dy: 0, ow: 72, oh: 37, rot: !1 },
      "AFS-OFF.png": { img: "imga_4.png", x: 743, y: 251, cw: 72, ch: 37, dx: 0, dy: 0, ow: 72, oh: 37, rot: !1 },
      "AFS-OFF-B.png": { img: "imga_4.png", x: 669, y: 258, cw: 72, ch: 37, dx: 0, dy: 0, ow: 72, oh: 37, rot: !1 },
      "OFF-OFF.png": { img: "imga_4.png", x: 551, y: 253, cw: 72, ch: 37, dx: 0, dy: 0, ow: 72, oh: 37, rot: !1 },
      "LIVE-OFF.png": { img: "imga_4.png", x: 951, y: 256, cw: 72, ch: 37, dx: 0, dy: 0, ow: 72, oh: 37, rot: !1 },
      "EZ-BTN-OFF.png": { img: "imga_4.png", x: 477, y: 261, cw: 72, ch: 37, dx: 0, dy: 0, ow: 72, oh: 37, rot: !1 },
      "SETUP-OFF.png": { img: "imga_4.png", x: 183, y: 263, cw: 72, ch: 37, dx: 0, dy: 0, ow: 72, oh: 37, rot: !1 },
      "SOFT-KNEE-OFF.png": { img: "imga_4.png", x: 403, y: 271, cw: 72, ch: 37, dx: 0, dy: 0, ow: 72, oh: 37, rot: !1 },
      "HARD-KNEE-OFF.png": { img: "imga_4.png", x: 329, y: 271, cw: 72, ch: 37, dx: 0, dy: 0, ow: 72, oh: 37, rot: !1 },
      "RTA_OFF.png": { img: "imga_4.png", x: 822, y: 282, cw: 72, ch: 37, dx: 0, dy: 0, ow: 72, oh: 37, rot: !1 },
      "NEXT-OFF.png": { img: "imga_4.png", x: 748, y: 290, cw: 72, ch: 36, dx: 0, dy: 0, ow: 72, oh: 36, rot: !1 },
      "AFS-ON.png": { img: "imga_4.png", x: 896, y: 295, cw: 72, ch: 35, dx: 0, dy: 0, ow: 72, oh: 37, rot: !1 },
      "FIXED-ON.png": { img: "imga_4.png", x: 551, y: 292, cw: 72, ch: 35, dx: 0, dy: 0, ow: 72, oh: 37, rot: !1 },
      "SETUP-ON.png": { img: "imga_4.png", x: 625, y: 297, cw: 72, ch: 35, dx: 0, dy: 0, ow: 72, oh: 37, rot: !1 },
      "BYPASS-ON2.png": { img: "imga_4.png", x: 477, y: 300, cw: 72, ch: 35, dx: 0, dy: 0, ow: 72, oh: 37, rot: !1 },
      "OFF-ON.png": { img: "imga_4.png", x: 1, y: 299, cw: 72, ch: 35, dx: 0, dy: 0, ow: 72, oh: 37, rot: !1 },
      "SOFT-KNEE-ON.png": { img: "imga_4.png", x: 75, y: 299, cw: 72, ch: 35, dx: 0, dy: 0, ow: 72, oh: 37, rot: !1 },
      "LIVE-ON.png": { img: "imga_4.png", x: 149, y: 302, cw: 72, ch: 35, dx: 0, dy: 0, ow: 72, oh: 37, rot: !1 },
      "RESET-ON.png": { img: "imga_4.png", x: 223, y: 310, cw: 72, ch: 35, dx: 0, dy: 0, ow: 72, oh: 37, rot: !1 },
      "HARD-KNEE-ON.png": { img: "imga_4.png", x: 297, y: 310, cw: 72, ch: 35, dx: 0, dy: 0, ow: 72, oh: 37, rot: !1 },
      "EZ-BTN-ON.png": { img: "imga_4.png", x: 371, y: 310, cw: 72, ch: 35, dx: 0, dy: 0, ow: 72, oh: 37, rot: !1 },
      "DES-ON.png": { img: "imga_4.png", x: 822, y: 321, cw: 72, ch: 35, dx: 0, dy: 0, ow: 72, oh: 37, rot: !1 },
      "RTA_ON.png": { img: "imga_4.png", x: 748, y: 328, cw: 72, ch: 35, dx: 0, dy: 0, ow: 72, oh: 37, rot: !1 },
      "EZ-ON.png": { img: "imga_4.png", x: 896, y: 332, cw: 72, ch: 35, dx: 0, dy: 0, ow: 72, oh: 37, rot: !1 },
      "ON-ON.png": { img: "imga_4.png", x: 674, y: 334, cw: 72, ch: 35, dx: 0, dy: 0, ow: 72, oh: 37, rot: !1 },
      "NEXT-ON.png": { img: "imga_4.png", x: 551, y: 329, cw: 72, ch: 33, dx: 0, dy: 0, ow: 72, oh: 36, rot: !1 },
      "UMIX-OFF.png": { img: "imga_4.png", x: 478, y: 337, cw: 71, ch: 45, dx: 3, dy: 4, ow: 77, oh: 49, rot: !1 },
      "EQ-OFF.png": { img: "imga_4.png", x: 1, y: 336, cw: 71, ch: 45, dx: 3, dy: 4, ow: 77, oh: 49, rot: !1 },
      "DYN-OFF.png": { img: "imga_4.png", x: 74, y: 336, cw: 71, ch: 45, dx: 3, dy: 4, ow: 77, oh: 49, rot: !1 },
      "FX-OFF.png": { img: "imga_4.png", x: 147, y: 339, cw: 71, ch: 45, dx: 3, dy: 4, ow: 77, oh: 49, rot: !1 },
      "AUX-OFF.png": { img: "imga_4.png", x: 220, y: 347, cw: 71, ch: 45, dx: 3, dy: 4, ow: 77, oh: 49, rot: !1 },
      "MEDIA-PLAY.png": { img: "imga_4.png", x: 293, y: 347, cw: 70, ch: 44, dx: 0, dy: 0, ow: 70, oh: 44, rot: !1 },
      "MEDIA-NEXT-OFF.png": { img: "imga_4.png", x: 365, y: 347, cw: 70, ch: 44, dx: 0, dy: 0, ow: 70, oh: 44, rot: !1 },
      "MEDIA-PREV-OFF.png": { img: "imga_4.png", x: 822, y: 358, cw: 70, ch: 44, dx: 0, dy: 0, ow: 70, oh: 44, rot: !1 },
      "MEDIA-STOP-OFF.png": { img: "imga_4.png", x: 750, y: 365, cw: 70, ch: 44, dx: 0, dy: 0, ow: 70, oh: 44, rot: !1 },
      "MEDIA-REC-OFF.png": { img: "imga_4.png", x: 894, y: 369, cw: 70, ch: 44, dx: 0, dy: 0, ow: 70, oh: 44, rot: !1 },
      "FX-B-LED.png": { img: "imga_4.png", x: 551, y: 364, cw: 70, ch: 40, dx: 0, dy: 0, ow: 70, oh: 40, rot: !1 },
      "MEDIA-NEXT-ON.png": { img: "imga_4.png", x: 623, y: 371, cw: 70, ch: 39, dx: 0, dy: 0, ow: 70, oh: 44, rot: !1 },
      "MEDIA-PAUSE.png": { img: "imga_4.png", x: 479, y: 384, cw: 70, ch: 39, dx: 0, dy: 0, ow: 70, oh: 44, rot: !1 },
      "MEDIA-STOP-ON.png": { img: "imga_4.png", x: 1, y: 383, cw: 70, ch: 39, dx: 0, dy: 0, ow: 70, oh: 44, rot: !1 },
      "MEDIA-PREV-ON.png": { img: "imga_4.png", x: 73, y: 383, cw: 70, ch: 39, dx: 0, dy: 0, ow: 70, oh: 44, rot: !1 },
      "DES-OFF.png": { img: "imga_4.png", x: 145, y: 386, cw: 70, ch: 36, dx: 1, dy: 1, ow: 72, oh: 37, rot: !1 },
      "REVERB-ON.png": { img: "imga_4.png", x: 217, y: 394, cw: 70, ch: 35, dx: 0, dy: 0, ow: 70, oh: 35, rot: !1 },
      "ROOM-GR-ON.png": { img: "imga_4.png", x: 289, y: 394, cw: 70, ch: 35, dx: 0, dy: 0, ow: 70, oh: 35, rot: !1 },
      "DELAY-GR-ON.png": { img: "imga_4.png", x: 361, y: 393, cw: 70, ch: 35, dx: 0, dy: 0, ow: 70, oh: 35, rot: !1 },
      "FX_BTN_BLU.png": { img: "imga_4.png", x: 822, y: 404, cw: 70, ch: 35, dx: 0, dy: 0, ow: 70, oh: 35, rot: !1 },
      "CHORUS-ON.png": { img: "imga_4.png", x: 750, y: 411, cw: 70, ch: 35, dx: 0, dy: 0, ow: 70, oh: 35, rot: !1 },
      "MEDIA-REC-ON2.png": { img: "imga_4.png", x: 551, y: 406, cw: 70, ch: 35, dx: 0, dy: 0, ow: 70, oh: 44, rot: !1 },
      "FX_BTN_PUR.png": { img: "imga_4.png", x: 623, y: 412, cw: 70, ch: 35, dx: 0, dy: 0, ow: 70, oh: 35, rot: !1 },
      "FX_BTN_OR.png": { img: "imga_4.png", x: 894, y: 415, cw: 70, ch: 35, dx: 0, dy: 0, ow: 70, oh: 35, rot: !1 },
      "FX_BTN_GR.png": { img: "imga_4.png", x: 1, y: 424, cw: 70, ch: 35, dx: 0, dy: 0, ow: 70, oh: 35, rot: !1 },
      "DELAY-OR-ON.png": { img: "imga_4.png", x: 73, y: 424, cw: 70, ch: 35, dx: 0, dy: 0, ow: 70, oh: 35, rot: !1 },
      "FX_BTN_OFF.png": { img: "imga_4.png", x: 110, y: 263, cw: 70, ch: 34, dx: 0, dy: 1, ow: 70, oh: 35, rot: !1 },
      "DELAY-OFF.png": { img: "imga_4.png", x: 145, y: 424, cw: 70, ch: 34, dx: 0, dy: 1, ow: 70, oh: 35, rot: !1 },
      "CHORUS-OFF.png": { img: "imga_4.png", x: 477, y: 425, cw: 70, ch: 34, dx: 0, dy: 1, ow: 70, oh: 35, rot: !1 },
      "REVERB-OFF.png": { img: "imga_4.png", x: 217, y: 431, cw: 70, ch: 34, dx: 0, dy: 1, ow: 70, oh: 35, rot: !1 },
      "ROOM-OFF.png": { img: "imga_4.png", x: 289, y: 431, cw: 70, ch: 34, dx: 0, dy: 1, ow: 70, oh: 35, rot: !1 },
      "EQ-1x2-LED.png": { img: "imga_4.png", x: 361, y: 430, cw: 66, ch: 42, dx: 0, dy: 0, ow: 66, oh: 42, rot: !1 },
      "F2-OFF.png": { img: "imga_4.png", x: 966, y: 369, cw: 56, ch: 37, dx: 0, dy: 0, ow: 56, oh: 37, rot: !1 },
      "NXT-SNP-OFF.png": { img: "imga_4.png", x: 966, y: 408, cw: 56, ch: 37, dx: 0, dy: 0, ow: 56, oh: 37, rot: !1 },
      "RECS-OFF.png": { img: "imga_4.png", x: 822, y: 441, cw: 56, ch: 37, dx: 0, dy: 0, ow: 56, oh: 37, rot: !1 },
      "PLAYS-OFF.png": { img: "imga_4.png", x: 764, y: 448, cw: 56, ch: 37, dx: 0, dy: 0, ow: 56, oh: 37, rot: !1 },
      "MENU_BTN.png": { img: "imga_4.png", x: 551, y: 443, cw: 56, ch: 37, dx: 0, dy: 0, ow: 56, oh: 37, rot: !1 },
      "MTRK-PLAY.png": { img: "imga_4.png", x: 609, y: 449, cw: 56, ch: 37, dx: 0, dy: 0, ow: 56, oh: 37, rot: !1 },
      "F1-OFF.png": { img: "imga_4.png", x: 667, y: 449, cw: 56, ch: 37, dx: 0, dy: 0, ow: 56, oh: 37, rot: !1 },
      "REC-BTN-OFF.png": { img: "imga_4.png", x: 967, y: 447, cw: 56, ch: 37, dx: 0, dy: 0, ow: 56, oh: 37, rot: !1 },
      "MTK-REC-OFF.png": { img: "imga_4.png", x: 880, y: 452, cw: 56, ch: 37, dx: 0, dy: 0, ow: 56, oh: 37, rot: !1 },
      "M-MUTE-OFF.png": { img: "imga_4.png", x: 493, y: 461, cw: 56, ch: 37, dx: 0, dy: 0, ow: 56, oh: 37, rot: !1 },
      "M-MUTE-OFF_F.png": { img: "imga_4.png", x: 435, y: 461, cw: 56, ch: 37, dx: 0, dy: 0, ow: 56, oh: 37, rot: !1 },
      "PLAY-BTN-OFF.png": { img: "imga_4.png", x: 1, y: 461, cw: 56, ch: 37, dx: 0, dy: 0, ow: 56, oh: 37, rot: !1 },
      "PRV-SNP-OFF.png": { img: "imga_4.png", x: 59, y: 461, cw: 56, ch: 37, dx: 0, dy: 0, ow: 56, oh: 37, rot: !1 },
      "M-SOLO-OFF.png": { img: "imga_4.png", x: 117, y: 461, cw: 56, ch: 37, dx: 0, dy: 0, ow: 56, oh: 37, rot: !1 },
      "SAVEAS-ON.png": { img: "imga_4.png", x: 175, y: 467, cw: 56, ch: 35, dx: 0, dy: 0, ow: 56, oh: 37, rot: !1 },
      "F1-ON.png": { img: "imga_4.png", x: 233, y: 467, cw: 56, ch: 35, dx: 0, dy: 0, ow: 56, oh: 37, rot: !1 },
      "PLAY-BTN-ON.png": { img: "imga_4.png", x: 291, y: 467, cw: 56, ch: 35, dx: 0, dy: 0, ow: 56, oh: 37, rot: !1 },
      "SAVE-ON.png": { img: "imga_4.png", x: 349, y: 474, cw: 56, ch: 35, dx: 0, dy: 0, ow: 56, oh: 37, rot: !1 },
      "PLAYS-STOP.png": { img: "imga_4.png", x: 822, y: 480, cw: 56, ch: 35, dx: 0, dy: 0, ow: 56, oh: 37, rot: !1 },
      "F2-ON.png": { img: "imga_4.png", x: 764, y: 487, cw: 56, ch: 35, dx: 0, dy: 0, ow: 56, oh: 37, rot: !1 },
      "NXT-SNP-ON.png": { img: "imga_4.png", x: 551, y: 482, cw: 56, ch: 35, dx: 0, dy: 0, ow: 56, oh: 37, rot: !1 },
      "MTK-STOP.png": { img: "imga_4.png", x: 609, y: 488, cw: 56, ch: 35, dx: 0, dy: 0, ow: 56, oh: 37, rot: !1 },
      "REC-BTN-ON.png": { img: "imga_4.png", x: 667, y: 488, cw: 56, ch: 35, dx: 0, dy: 0, ow: 56, oh: 37, rot: !1 },
      "M-SOLO-ON.png": { img: "imga_4.png", x: 967, y: 486, cw: 56, ch: 35, dx: 0, dy: 0, ow: 56, oh: 37, rot: !1 },
      "MTK-REC-ON.png": { img: "imga_4.png", x: 880, y: 491, cw: 56, ch: 35, dx: 0, dy: 0, ow: 56, oh: 37, rot: !1 },
      "M-MUTE-ON.png": { img: "imga_4.png", x: 1, y: 500, cw: 56, ch: 35, dx: 0, dy: 0, ow: 56, oh: 37, rot: !1 },
      "PRV-SNP-ON.png": { img: "imga_4.png", x: 59, y: 500, cw: 56, ch: 35, dx: 0, dy: 0, ow: 56, oh: 37, rot: !1 },
      "RECS-STOP.png": { img: "imga_4.png", x: 117, y: 500, cw: 56, ch: 35, dx: 0, dy: 0, ow: 56, oh: 37, rot: !1 },
      "SO-M-SLV.png": { img: "imga_4.png", x: 175, y: 504, cw: 54, ch: 37, dx: 0, dy: 0, ow: 54, oh: 37, rot: !1 },
      "SAVEAS-OFF.png": { img: "imga_4.png", x: 231, y: 504, cw: 54, ch: 36, dx: 1, dy: 1, ow: 56, oh: 37, rot: !1 },
      "SAVE-OFF.png": { img: "imga_4.png", x: 287, y: 504, cw: 54, ch: 36, dx: 1, dy: 1, ow: 56, oh: 37, rot: !1 },
      "SO-M-RED.png": { img: "imga_4.png", x: 429, y: 500, cw: 54, ch: 34, dx: 0, dy: 0, ow: 54, oh: 37, rot: !1 },
      "SO-M-YLW.png": { img: "imga_4.png", x: 485, y: 500, cw: 54, ch: 34, dx: 0, dy: 0, ow: 54, oh: 37, rot: !1 },
      "SO-M-BLU.png": { img: "imga_4.png", x: 343, y: 511, cw: 54, ch: 34, dx: 0, dy: 0, ow: 54, oh: 37, rot: !1 },
      "SO-M-GRE.png": { img: "imga_4.png", x: 822, y: 517, cw: 54, ch: 34, dx: 0, dy: 0, ow: 54, oh: 37, rot: !1 },
      "AUD-BTN-ON.png": { img: "imga_4.png", x: 970, y: 295, cw: 51, ch: 45, dx: 0, dy: 0, ow: 51, oh: 49, rot: !1 },
      "SCENE-ON.png": { img: "imga_4.png", x: 695, y: 371, cw: 51, ch: 45, dx: 0, dy: 0, ow: 51, oh: 49, rot: !1 },
      "TV-ON.png": { img: "imga_4.png", x: 769, y: 524, cw: 51, ch: 45, dx: 0, dy: 0, ow: 51, oh: 49, rot: !1 },
      "SETTINGS-ON.png": { img: "imga_4.png", x: 551, y: 519, cw: 51, ch: 45, dx: 0, dy: 0, ow: 51, oh: 49, rot: !1 },
      "FADERB-FX2.png": { img: "imga_4.png", x: 604, y: 525, cw: 51, ch: 39, dx: 0, dy: 0, ow: 51, oh: 42, rot: !1 },
      "FADER-FX3.png": { img: "imga_4.png", x: 657, y: 525, cw: 51, ch: 39, dx: 0, dy: 0, ow: 51, oh: 42, rot: !1 },
      "FADERO-FX2.png": { img: "imga_4.png", x: 710, y: 525, cw: 51, ch: 39, dx: 0, dy: 0, ow: 51, oh: 42, rot: !1 },
      "FADERG-FX2.png": { img: "imga_4.png", x: 972, y: 523, cw: 51, ch: 39, dx: 0, dy: 0, ow: 51, oh: 42, rot: !1 },
      "FADERP-FX2.png": { img: "imga_4.png", x: 878, y: 528, cw: 51, ch: 39, dx: 0, dy: 0, ow: 51, oh: 42, rot: !1 },
      "PATTERN_DNS.png": { img: "imga_4.png", x: 499, y: 536, cw: 50, ch: 50, dx: 0, dy: 0, ow: 50, oh: 50, rot: !1 },
      "SOLO-SC-OFF_OLD.png": { img: "imga_4.png", x: 447, y: 536, cw: 50, ch: 37, dx: 0, dy: 0, ow: 50, oh: 37, rot: !1 },
      "SOLO-SC-OFF.png": { img: "imga_4.png", x: 1, y: 537, cw: 50, ch: 37, dx: 0, dy: 0, ow: 50, oh: 37, rot: !1 },
      "48V-OFF.png": { img: "imga_4.png", x: 53, y: 537, cw: 50, ch: 37, dx: 0, dy: 0, ow: 50, oh: 37, rot: !1 },
      "PI-OFF.png": { img: "imga_4.png", x: 105, y: 537, cw: 50, ch: 37, dx: 0, dy: 0, ow: 50, oh: 37, rot: !1 },
      "PREFX.png": { img: "imga_4.png", x: 157, y: 547, cw: 50, ch: 37, dx: 0, dy: 0, ow: 50, oh: 37, rot: !1 },
      "PP-OFF.png": { img: "imga_4.png", x: 209, y: 547, cw: 50, ch: 37, dx: 0, dy: 0, ow: 50, oh: 37, rot: !1 },
      "MUTE-SC-OFF_F.png": { img: "imga_4.png", x: 261, y: 547, cw: 50, ch: 37, dx: 0, dy: 0, ow: 50, oh: 37, rot: !1 },
      "HIZ-OFF2.png": { img: "imga_4.png", x: 313, y: 547, cw: 50, ch: 37, dx: 0, dy: 0, ow: 50, oh: 37, rot: !1 },
      "CL_BTN_OFF.png": { img: "imga_4.png", x: 365, y: 547, cw: 50, ch: 37, dx: 0, dy: 0, ow: 50, oh: 37, rot: !1 },
      "MUTE-SC-OFF.png": { img: "imga_4.png", x: 822, y: 553, cw: 50, ch: 37, dx: 0, dy: 0, ow: 50, oh: 37, rot: !1 },
      "MUTE-SC-OFF_OLD.png": { img: "imga_4.png", x: 973, y: 564, cw: 50, ch: 37, dx: 0, dy: 0, ow: 50, oh: 37, rot: !1 },
      "PRE-OFF_y.png": { img: "imga_4.png", x: 874, y: 569, cw: 50, ch: 37, dx: 0, dy: 0, ow: 50, oh: 37, rot: !1 },
      "PRE.png": { img: "imga_4.png", x: 770, y: 571, cw: 50, ch: 37, dx: 0, dy: 0, ow: 50, oh: 37, rot: !1 },
      "PRE-OFF.png": { img: "imga_4.png", x: 551, y: 566, cw: 50, ch: 37, dx: 0, dy: 0, ow: 50, oh: 37, rot: !1 },
      "PRE_PROC_OFF.png": { img: "imga_4.png", x: 603, y: 566, cw: 50, ch: 37, dx: 0, dy: 0, ow: 50, oh: 37, rot: !1 },
      "MUTE-ON.png": { img: "imga_4.png", x: 655, y: 566, cw: 50, ch: 35, dx: 0, dy: 0, ow: 50, oh: 37, rot: !1 },
      "SOLO-ON.png": { img: "imga_4.png", x: 707, y: 566, cw: 50, ch: 35, dx: 0, dy: 0, ow: 50, oh: 37, rot: !1 },
      "PI-ON.png": { img: "imga_4.png", x: 429, y: 575, cw: 50, ch: 35, dx: 0, dy: 0, ow: 50, oh: 37, rot: !1 },
      "CL_BTN_ON.png": { img: "imga_4.png", x: 1, y: 576, cw: 50, ch: 35, dx: 0, dy: 0, ow: 50, oh: 37, rot: !1 },
      "SOLO-SC-ON.png": { img: "imga_4.png", x: 53, y: 576, cw: 50, ch: 35, dx: 0, dy: 0, ow: 50, oh: 37, rot: !1 },
      "HIZ-ON2.png": { img: "imga_4.png", x: 105, y: 576, cw: 50, ch: 35, dx: 0, dy: 0, ow: 50, oh: 37, rot: !1 },
      "48V-ON.png": { img: "imga_4.png", x: 157, y: 586, cw: 50, ch: 35, dx: 0, dy: 0, ow: 50, oh: 37, rot: !1 },
      "POSTFX.png": { img: "imga_4.png", x: 209, y: 586, cw: 50, ch: 35, dx: 0, dy: 0, ow: 50, oh: 37, rot: !1 },
      "POST_PROC_ON_W.png": { img: "imga_4.png", x: 261, y: 586, cw: 50, ch: 35, dx: 0, dy: 0, ow: 50, oh: 37, rot: !1 },
      "PP-ONO.png": { img: "imga_4.png", x: 313, y: 586, cw: 50, ch: 35, dx: 0, dy: 0, ow: 50, oh: 37, rot: !1 },
      "POST_PROC_ON_O.png": { img: "imga_4.png", x: 365, y: 586, cw: 50, ch: 35, dx: 0, dy: 0, ow: 50, oh: 37, rot: !1 },
      "POST-ON_g.png": { img: "imga_4.png", x: 481, y: 588, cw: 50, ch: 35, dx: 0, dy: 0, ow: 50, oh: 37, rot: !1 },
      "PP-ONW.png": { img: "imga_4.png", x: 822, y: 592, cw: 50, ch: 35, dx: 0, dy: 0, ow: 50, oh: 37, rot: !1 },
      "POST-ON.png": { img: "imga_4.png", x: 533, y: 605, cw: 50, ch: 35, dx: 0, dy: 0, ow: 50, oh: 37, rot: !1 },
      "MUTE-SC-ON.png": { img: "imga_4.png", x: 585, y: 605, cw: 50, ch: 35, dx: 0, dy: 0, ow: 50, oh: 37, rot: !1 },
      "SO-S-SLV.png": { img: "imga_4.png", x: 637, y: 605, cw: 49, ch: 37, dx: 0, dy: 0, ow: 49, oh: 37, rot: !1 },
      "SO-S-YLW.png": { img: "imga_4.png", x: 688, y: 603, cw: 49, ch: 34, dx: 0, dy: 0, ow: 49, oh: 37, rot: !1 },
      "SO-S-GRE.png": { img: "imga_4.png", x: 974, y: 603, cw: 49, ch: 34, dx: 0, dy: 0, ow: 49, oh: 37, rot: !1 },
      "SO-S-BLU.png": { img: "imga_4.png", x: 874, y: 608, cw: 49, ch: 34, dx: 0, dy: 0, ow: 49, oh: 37, rot: !1 },
      "SO-S-RED.png": { img: "imga_4.png", x: 739, y: 610, cw: 49, ch: 34, dx: 0, dy: 0, ow: 49, oh: 37, rot: !1 },
      "HOME_ON.png": { img: "imga_4.png", x: 1, y: 613, cw: 48, ch: 48, dx: 1, dy: 1, ow: 50, oh: 50, rot: !1 },
      "HOME_OFF.png": { img: "imga_4.png", x: 51, y: 613, cw: 48, ch: 48, dx: 1, dy: 1, ow: 50, oh: 50, rot: !1 },
      "AFSON-OFF.png": { img: "imga_4.png", x: 925, y: 608, cw: 47, ch: 37, dx: 0, dy: 0, ow: 47, oh: 37, rot: !1 },
      "AFSON-OFF2.png": { img: "imga_4.png", x: 101, y: 613, cw: 47, ch: 37, dx: 0, dy: 0, ow: 47, oh: 37, rot: !1 },
      "AFSON-ON2.png": { img: "imga_4.png", x: 699, y: 297, cw: 47, ch: 35, dx: 0, dy: 0, ow: 47, oh: 37, rot: !1 },
      "AFSON-ON.png": { img: "imga_4.png", x: 625, y: 334, cw: 47, ch: 35, dx: 0, dy: 0, ow: 47, oh: 37, rot: !1 },
      "ADOBE-ON.png": { img: "imga_4.png", x: 429, y: 612, cw: 45, ch: 45, dx: 0, dy: 0, ow: 45, oh: 45, rot: !1 },
      "YOUTUBE-OFF.png": { img: "imga_4.png", x: 150, y: 623, cw: 45, ch: 45, dx: 0, dy: 0, ow: 45, oh: 45, rot: !1 },
      "ADOBE-OFF.png": { img: "imga_4.png", x: 197, y: 623, cw: 45, ch: 45, dx: 0, dy: 0, ow: 45, oh: 45, rot: !1 },
      "WWW-OFF.png": { img: "imga_4.png", x: 244, y: 623, cw: 45, ch: 45, dx: 0, dy: 0, ow: 45, oh: 45, rot: !1 },
      "WWW-ON.png": { img: "imga_4.png", x: 291, y: 623, cw: 45, ch: 45, dx: 0, dy: 0, ow: 45, oh: 45, rot: !1 },
      "AUD-BTN-OFF.png": { img: "imga_4.png", x: 338, y: 623, cw: 45, ch: 45, dx: 3, dy: 4, ow: 51, oh: 49, rot: !1 },
      "YOUTUBE-ON.png": { img: "imga_4.png", x: 476, y: 625, cw: 45, ch: 45, dx: 0, dy: 0, ow: 45, oh: 45, rot: !1 },
      "FACEBOOK-OFF.png": { img: "imga_4.png", x: 822, y: 629, cw: 45, ch: 45, dx: 0, dy: 0, ow: 45, oh: 45, rot: !1 },
      "EMAIL-OFF.png": { img: "imga_4.png", x: 523, y: 646, cw: 45, ch: 45, dx: 0, dy: 0, ow: 45, oh: 45, rot: !1 },
      "EMAIL-ON.png": { img: "imga_4.png", x: 570, y: 646, cw: 45, ch: 45, dx: 0, dy: 0, ow: 45, oh: 45, rot: !1 },
      "FACEBOOK-ON.png": { img: "imga_4.png", x: 617, y: 646, cw: 45, ch: 45, dx: 0, dy: 0, ow: 45, oh: 45, rot: !1 },
      "TV-OFF.png": { img: "imga_4.png", x: 664, y: 646, cw: 45, ch: 45, dx: 3, dy: 4, ow: 51, oh: 49, rot: !1 },
      "FAQ-OFF.png": { img: "imga_4.png", x: 711, y: 646, cw: 45, ch: 45, dx: 0, dy: 0, ow: 45, oh: 45, rot: !1 },
      "FORUM-ON.png": { img: "imga_4.png", x: 758, y: 646, cw: 45, ch: 45, dx: 0, dy: 0, ow: 45, oh: 45, rot: !1 },
      "FAQ-ON.png": { img: "imga_4.png", x: 978, y: 639, cw: 45, ch: 45, dx: 0, dy: 0, ow: 45, oh: 45, rot: !1 },
      "FORUM-OFF.png": { img: "imga_4.png", x: 869, y: 647, cw: 45, ch: 45, dx: 0, dy: 0, ow: 45, oh: 45, rot: !1 },
      "RSS-ON.png": { img: "imga_4.png", x: 916, y: 647, cw: 45, ch: 45, dx: 0, dy: 0, ow: 45, oh: 45, rot: !1 },
      "SETTINGS-OFF.png": { img: "imga_4.png", x: 101, y: 652, cw: 45, ch: 45, dx: 3, dy: 4, ow: 51, oh: 49, rot: !1 },
      "SCENE-OFF.png": { img: "imga_4.png", x: 54, y: 663, cw: 45, ch: 45, dx: 3, dy: 4, ow: 51, oh: 49, rot: !1 },
      "RSS-OFF.png": { img: "imga_4.png", x: 7, y: 663, cw: 45, ch: 45, dx: 0, dy: 0, ow: 45, oh: 45, rot: !1 },
      "TV_OFF.png": { img: "imga_4.png", x: 429, y: 659, cw: 45, ch: 44, dx: 3, dy: 5, ow: 51, oh: 49, rot: !1 },
      "MUTE-ALL-OFF.png": { img: "imga_4.png", x: 148, y: 670, cw: 44, ch: 44, dx: 0, dy: 0, ow: 44, oh: 44, rot: !1 },
      "MUTE-FX-OFF.png": { img: "imga_4.png", x: 194, y: 670, cw: 44, ch: 44, dx: 0, dy: 0, ow: 44, oh: 44, rot: !1 },
      "CLEAR-SOLOS-OFF.png": { img: "imga_4.png", x: 240, y: 670, cw: 44, ch: 44, dx: 0, dy: 0, ow: 44, oh: 44, rot: !1 },
      "MUTE-FX-ON.png": { img: "imga_4.png", x: 926, y: 569, cw: 44, ch: 37, dx: 0, dy: 0, ow: 44, oh: 44, rot: !1 },
      "MUTE-ALL-ON.png": { img: "imga_4.png", x: 286, y: 670, cw: 44, ch: 37, dx: 0, dy: 0, ow: 44, oh: 44, rot: !1 },
      "CLEAR-SOLOS-ON.png": { img: "imga_4.png", x: 332, y: 670, cw: 44, ch: 37, dx: 0, dy: 0, ow: 44, oh: 44, rot: !1 },
      "LEX_TAP_ON.png": { img: "imga_4.png", x: 2, y: 38, cw: 41, ch: 33, dx: 0, dy: 0, ow: 41, oh: 33, rot: !1 },
      "LEX_TAP_OFF.png": { img: "imga_4.png", x: 3, y: 252, cw: 41, ch: 33, dx: 0, dy: 0, ow: 41, oh: 33, rot: !1 },
      "nr/NR4-OFF.png": { img: "imga_4.png", x: 625, y: 258, cw: 40, ch: 35, dx: 0, dy: 0, ow: 40, oh: 35, rot: !1 },
      "nr/NR2-OFF.png": { img: "imga_4.png", x: 437, y: 384, cw: 40, ch: 35, dx: 0, dy: 0, ow: 40, oh: 35, rot: !1 },
      "nr/NR5-OFF.png": { img: "imga_4.png", x: 435, y: 421, cw: 40, ch: 35, dx: 0, dy: 0, ow: 40, oh: 35, rot: !1 },
      "nr/NR3-OFF.png": { img: "imga_4.png", x: 385, y: 623, cw: 40, ch: 35, dx: 0, dy: 0, ow: 40, oh: 35, rot: !1 },
      "nr/NR1-OFF.png": { img: "imga_4.png", x: 387, y: 660, cw: 40, ch: 35, dx: 0, dy: 0, ow: 40, oh: 35, rot: !1 },
      "nr/ARR-L-OFF.png": { img: "imga_4.png", x: 476, y: 672, cw: 40, ch: 35, dx: 0, dy: 0, ow: 40, oh: 35, rot: !1 },
      "nr/NR6-OFF.png": { img: "imga_4.png", x: 822, y: 676, cw: 40, ch: 35, dx: 0, dy: 0, ow: 40, oh: 35, rot: !1 },
      "nr/ARR-R-OFF.png": { img: "imga_4.png", x: 983, y: 686, cw: 40, ch: 35, dx: 0, dy: 0, ow: 40, oh: 35, rot: !1 },
      "nr/NR4-BEI-ON.png": { img: "imga_4.png", x: 780, y: 693, cw: 40, ch: 32, dx: 0, dy: 0, ow: 40, oh: 35, rot: !1 },
      "nr/NR4-BLUE-ON.png": { img: "imga_4.png", x: 738, y: 693, cw: 40, ch: 32, dx: 0, dy: 0, ow: 40, oh: 35, rot: !1 },
      "nr/ARR-L-ON.png": { img: "imga_4.png", x: 696, y: 693, cw: 40, ch: 32, dx: 0, dy: 0, ow: 40, oh: 35, rot: !1 },
      "nr/NR6-BLUE-ON.png": { img: "imga_4.png", x: 654, y: 693, cw: 40, ch: 32, dx: 0, dy: 0, ow: 40, oh: 35, rot: !1 },
      "nr/NR5-RED-ON.png": { img: "imga_4.png", x: 612, y: 693, cw: 40, ch: 32, dx: 0, dy: 0, ow: 40, oh: 35, rot: !1 },
      "nr/NR5-BLUE-ON.png": { img: "imga_4.png", x: 570, y: 693, cw: 40, ch: 32, dx: 0, dy: 0, ow: 40, oh: 35, rot: !1 },
      "nr/NR6-RED-ON.png": { img: "imga_4.png", x: 528, y: 693, cw: 40, ch: 32, dx: 0, dy: 0, ow: 40, oh: 35, rot: !1 },
      "nr/NR4-RED-ON.png": { img: "imga_4.png", x: 941, y: 694, cw: 40, ch: 32, dx: 0, dy: 0, ow: 40, oh: 35, rot: !1 },
      "nr/NR3-RED-ON.png": { img: "imga_4.png", x: 899, y: 694, cw: 40, ch: 32, dx: 0, dy: 0, ow: 40, oh: 35, rot: !1 },
      "nr/NR2-BEI-ON.png": { img: "imga_4.png", x: 385, y: 697, cw: 40, ch: 32, dx: 0, dy: 0, ow: 40, oh: 35, rot: !1 },
      "nr/NR2-BLUE-ON.png": { img: "imga_4.png", x: 101, y: 699, cw: 40, ch: 32, dx: 0, dy: 0, ow: 40, oh: 35, rot: !1 },
      "nr/NR1-RED-ON.png": { img: "imga_4.png", x: 427, y: 709, cw: 40, ch: 32, dx: 0, dy: 0, ow: 40, oh: 35, rot: !1 },
      "nr/NR1-BEI-ON.png": { img: "imga_4.png", x: 469, y: 709, cw: 40, ch: 32, dx: 0, dy: 0, ow: 40, oh: 35, rot: !1 },
      "nr/ARR-R-ON.png": { img: "imga_4.png", x: 343, y: 709, cw: 40, ch: 32, dx: 0, dy: 0, ow: 40, oh: 35, rot: !1 },
      "nr/NR1-BLUE-ON.png": { img: "imga_4.png", x: 301, y: 709, cw: 40, ch: 32, dx: 0, dy: 0, ow: 40, oh: 35, rot: !1 },
      "nr/NR3-BLUE-ON.png": { img: "imga_4.png", x: 59, y: 710, cw: 40, ch: 32, dx: 0, dy: 0, ow: 40, oh: 35, rot: !1 },
      "nr/NR3-BEI-ON.png": { img: "imga_4.png", x: 17, y: 710, cw: 40, ch: 32, dx: 0, dy: 0, ow: 40, oh: 35, rot: !1 },
      "nr/NR2-RED-ON.png": { img: "imga_4.png", x: 259, y: 716, cw: 40, ch: 32, dx: 0, dy: 0, ow: 40, oh: 35, rot: !1 },
    };
    MUTEALL_BIT_IDX = 23;
    MUTEFX_BIT_IDX = 22;
    E_MODE = { MIX: 0, GAIN: 1, EDIT: 2, DYN: 3, AUX: 4, FXEDIT: 5, FXSENDS: 6, SETTINGS: 7, MODALS: 8, PLAYER: 9, FULL_PEQ: 14, FULL_GEQ: 15, MOREME: 20, NETWORK: 30, BIG: 666, UDP: 888, PONG: 777 };
    E_STRIP_TYPE = { IN: 1, GAIN: 100, FX: 2, SUB: 3, AUX: 4, MEDIA: 6, AUXSEND: 7, FXSEND: 8, MTXSEND: 9, MASTER: 10, LINEIN: 12, VCA: 20, CPA: 21, HW: 777 };
    E_STRIP_MODE = { MIX: 1, GAIN: 2, FX: 4, AUX: 5, SUB: 8, MASTER: 10, VCA: 20 };
    E_FX = { REVERB: 0, DELAY: 1, CHORUS: 2, ROOM: 3 };
    E_LINES = { off: 0, thin: 1, norm: 2 };
    E_COMMANDS = {
      TOGGLE_REC: "RECTOGGLE",
      HIQNET_DISCOVER: "HIQNET_DISCOVER",
      TOGGLE_MTK_REC: "MTK_REC_TOGGLE",
      MTK_PLAY: "MTK_PLAY",
      MTK_STOP: "MTK_STOP",
      MTK_PAUSE: "MTK_PAUSE",
      MTK_JUMP_TO: "MTK_JUMP_TO",
      MTK_SET_SESSION: "MTK_SELECT",
      MTK_DEL_SESSION: "MTK_DELETE",
      MTK_GET_SESSIONS: "MTK_GET_SESSIONS",
      MTK_GET_FILES: "MTK_GET_FILES",
      MTK_REC_PLAY: "MTK_REC",
      MTK_REC_STOP: "MTK_REC_STOP",
      MTK_REC_PAUSE: "MTK_REC_PAUSE",
      MTK_REC_JUMP_TO: "MTK_REC_JUMP_TO",
      MTK_REC_SET_SESSION: "MTK_REC_SET_SESSION",
      MEDIA_PLAY: "MEDIA_PLAY",
      MEDIA_JUMP_TO: "MEDIA_JUMP_TO",
      MEDIA_PAUSE: "MEDIA_PAUSE",
      MEDIA_STOP: "MEDIA_STOP",
      MEDIA_PREV: "MEDIA_PREV",
      MEDIA_NEXT: "MEDIA_NEXT",
      MEDIA_SWITCH_PLIST: "MEDIA_SWITCH_PLIST",
      MEDIA_SWITCH_TRACK: "MEDIA_SWITCH_TRACK",
      MEDIA_GET_PLISTS: "MEDIA_GET_PLISTS",
      MEDIA_GET_PLIST_TRACKS: "MEDIA_GET_PLIST_TRACKS",
      SHOW_LIST: "SHOWLIST",
      SHOW_DEL: "DELETESHOW",
      SHOW_LOAD: "LOADSHOW",
      SHOW_CREATE: "CREATESHOW",
      SHOW_RENAME: "RENAMESHOW",
      SNAP_LIST: "SNAPSHOTLIST",
      SNAP_SAVE: "SAVESNAPSHOT",
      SNAP_LOAD: "LOADSNAPSHOT",
      SNAP_DEL: "DELETESNAPSHOT",
      SNAP_RENAME: "RENAMESNAPSHOT",
      PRESET_LIST: "PRESETLIST",
      PRESET_DEL: "DELETEPRESET",
      PRESET_READ: "READPRESET",
      PRESET_WRITE: "WRITEPRESET",
      PRESET_RENAME: "RENAMEPRESET",
      SAVESHOW: "SAVESHOW",
      MIXER_RESET: "MIXER_RESET",
      UPDATE_SHOWS: "UPDATE_SHOWS",
      USB_LIST: "USBMOUNTS",
      EXPORT_SHOW: "EXPORTSHOW",
      IMPORT_SHOW: "IMPORTSHOW",
      IMPORT_LIST: "IMPORTSHOWLIST",
      IMPORT_PRESETS: "IMPORTPRESETS",
      EXPORT_PRESETS: "EXPORTPRESETS",
      IMPORT_CONFIG: "IMPORTCONFIG",
      EXPORT_CONFIG: "EXPORTCONFIG",
    };
    E_FFUNC = { NEWSNAP: 0, UPDCURSNAP: 1, PLAY: 2, REC: 3, MTK_PLAY: 4, MTK_REC: 5, NEXT_SNAP: 6, PREV_SNAP: 7, SWAP_USB: 8, MUTE_ALL: 9, DIM: 10 };
    E_MODAL_MODE = { TOTALVIEW: 0, MOREME: 1, MUTES: 2, VIEWS: 3, SUBS: 4, VCA: 5, CPA: 6, AUTOMIX: 7 };
    E_CH_SRC_TYPE = { HARDWARE: 0, USB_A: 1, USB_B: 2, OTHER: 3, USB_D: 4 };
    E_VG = {
      VG1: 0,
      VG2: 1,
      VG3: 2,
      VG4: 3,
      VG5: 4,
      VG6: 5,
      INPUTS: 100,
      FXS: 101,
      SUBS: 102,
      AUXS: 103,
      VCAS: 104,
      SG1: 200,
      SG2: 201,
      SG3: 202,
      SG4: 203,
      SG5: 204,
      SG6: 205,
      VCA1: 300,
      VCA2: 301,
      VCA3: 302,
      VCA4: 303,
      VCA5: 304,
      VCA6: 305,
    };
    E_SRC_NAMES = {
      none: "-",
      "hw.0": "IN-1",
      "hw.1": "IN-2",
      "hw.2": "IN-3",
      "hw.3": "IN-4",
      "hw.4": "IN-5",
      "hw.5": "IN-6",
      "hw.6": "IN-7",
      "hw.7": "IN-8",
      "hw.8": "IN-9",
      "hw.9": "IN-10",
      "hw.10": "IN-11",
      "hw.11": "IN-12",
      "hw.12": "IN-13",
      "hw.13": "IN-14",
      "hw.14": "IN-15",
      "hw.15": "IN-16",
      "hw.16": "IN-17",
      "hw.17": "IN-18",
      "hw.18": "IN-19",
      "hw.19": "IN-20",
      "hw.20": "IN-21",
      "hw.21": "IN-22",
      "m.0": "M-L",
      "m.1": "M-R",
      "a.0": "A-1",
      "a.1": "A-2",
      "a.2": "A-3",
      "a.3": "A-4",
      "a.4": "A-5",
      "a.5": "A-6",
      "a.6": "A-7",
      "a.7": "A-8",
      "hp.0": "HD-1L",
      "hp.1": "HD-1R",
      "hp.2": "HD-2L",
      "hp.3": "HD-2R",
      "cs.0": "CS-1",
      "cs.1": "CS-2",
      "cs.2": "CS-3",
      "cs.3": "CS-4",
      "cs.4": "CS-5",
      "cs.5": "CS-6",
      "cs.6": "CS-7",
      "cs.7": "CS-8",
      "cs.8": "CS-9",
      "cs.9": "CS-10",
      "cs.10": "CS-11",
      "cs.11": "CS-12",
      "cs.12": "CS-13",
      "cs.13": "CS-14",
      "cs.14": "CS-15",
      "cs.15": "CS-16",
      "cs.16": "CS-17",
      "cs.17": "CS-18",
      "cs.18": "CS-19",
      "cs.19": "CS-20",
      "cs.20": "CS-21",
      "cs.21": "CS-22",
      "cs.22": "CS-23",
      "cs.23": "CS-24",
      "cs.24": "CS-25",
      "cs.25": "CS-26",
      "cs.26": "CS-27",
      "cs.27": "CS-28",
      "cs.28": "CS-29",
      "cs.29": "CS-30",
      "cs.30": "CS-31",
      "cs.31": "CS-32",
      "li.0": "LI-L",
      "li.1": "LI-R",
      "li.2": "LI-3",
      "li.3": "LI-4",
      "pl.0": "PL-L",
      "pl.1": "PL-R",
      "ua.0": "USB-1",
      "ua.1": "USB-2",
      "ua.2": "USB-3",
      "ua.3": "USB-4",
      "ua.4": "USB-5",
      "ua.5": "USB-6",
      "ua.6": "USB-7",
      "ua.7": "USB-8",
      "ua.8": "USB-9",
      "ua.9": "USB-10",
      "ua.10": "USB-11",
      "ua.11": "USB-12",
      "ua.12": "USB-13",
      "ua.13": "USB-14",
      "ua.14": "USB-15",
      "ua.15": "USB-16",
      "ua.16": "USB-17",
      "ua.17": "USB-18",
      "ua.18": "USB-19",
      "ua.19": "USB-20",
      "ua.20": "USB-21",
      "ua.21": "USB-22",
      "ub.0": "DAW-1",
      "ub.1": "DAW-2",
      "ub.2": "DAW-3",
      "ub.3": "DAW-4",
      "ub.4": "DAW-5",
      "ub.5": "DAW-6",
      "ub.6": "DAW-7",
      "ub.7": "DAW-8",
      "ub.8": "DAW-9",
      "ub.9": "DAW-10",
      "ub.10": "DAW-11",
      "ub.11": "DAW-12",
      "ub.12": "DAW-13",
      "ub.13": "DAW-14",
      "ub.14": "DAW-15",
      "ub.15": "DAW-16",
      "ub.16": "DAW-17",
      "ub.17": "DAW-18",
      "ub.18": "DAW-19",
      "ub.19": "DAW-20",
      "ub.20": "DAW-21",
      "ub.21": "DAW-22",
      "ub.22": "DAW-23",
      "ub.23": "DAW-24",
      "ub.24": "DAW-25",
      "ub.25": "DAW-26",
      "ub.26": "DAW-27",
      "ub.27": "DAW-28",
      "ub.28": "DAW-29",
      "ub.29": "DAW-30",
      "ub.30": "DAW-31",
      "ub.31": "DAW-32",
    };
    dataValue = {};
    settingsStorage = {
      ok: !1,
      raw: !1,
      prefix: "UI_",
      init: function () {
        log("SettingsStorage init()");
        if (isDefined(localStorage)) {
          this.ok = !0;
          try {
            localStorage.setItem("TEST_STORAGE", "TEST_STORAGE");
            if ("TEST_STORAGE" !== localStorage.getItem("TEST_STORAGE")) throw "localStorage TEST: NOT PASSED";
            localStorage.removeItem("TEST_STORAGE");
          } catch (b) {
            showPopupMsg("HTML5 localStorage is not available. Probably 'PRIVATE MODE' is ON.", 5e3), (this.ok = !1);
          }
          if (this.ok) {
            for (var a in settings)
              settings.hasOwnProperty(a) &&
              (null === this.get(a) ? (WEBSITE_MODE && demoSettings.hasOwnProperty(a) && (settings[a] = IS_UI_24 ? demoSettings[a] : demoSettings16[a]), this.set(a, settings[a])) : (settings[a] = this.get(a)));
            this.checkings();
          }
        }
      },
      checkings: function () {
        !IS_UI_24 && this.get("bigD") && (settings.bigD = !1);
        IS_UI_24 && settings.bigD && (settings.bigSlideOut = !0);
        SHOW_WIP || (this.get("cpa") && this.set("cpa", !1));
      },
      get: function (a) {
        (isDefined(localStorage) && null !== localStorage) || (this.ok = !1);
        if (!this.ok) return isDefined(settings[a]) ? settings[a] : null;
        a = localStorage.getItem(a);
        return this.raw ? a : JSON.parse(a);
      },
      set: function (a, b) {
        settings[a] = b;
        if (isDefined(localStorage) && null !== localStorage) {
          var c = this.raw ? b : JSON.stringify(b);
          localStorage.setItem(a, c);
        } else this.ok = !1;
      },
      put: function (a, b) {
        (isDefined(localStorage) && null !== localStorage) || (this.ok = !1);
        if (this.ok) {
          var c = this.raw ? b : JSON.stringify(b);
          localStorage.setItem(a, c);
        }
      },
      save: function () {
        if (this.ok) for (var a in settings) settings.hasOwnProperty(a) && this.set(a, settings[a]);
      },
    };
    settings = {
      drawRate: 1,
      disableRetina: !1,
      disableScaling: !1,
      disableShadows: !1,
      disableVUghost: !1,
      disableVUpeak: !1,
      patterned: !1,
      lanes: E_LINES.norm,
      mediaFirst: !1,
      disableVUs: !1,
      disableVUs2: !1,
      bigSlideOut: !1,
      pinSlideOut: !1,
      pinSlideOutX: !1,
      kinetic: !1,
      oneFingerScroll: !0,
      dimVUs: !1,
      vuquantise: !0,
      currentViewGroup: -1,
      nudge: !1,
      eqStrip: 0,
      lang: "en",
      sync: !1,
      sync_vca: !1,
      sync_id: "SYNC_ID",
      master_pass: "",
      globalVG: !1,
      customScaleEnabled: !1,
      customScale: 1,
      customStripWidthEnabled: !1,
      customStripWidth: 112,
      masterLock: !1,
      moremeportrait: !0,
      masterOtherRTA: !1,
      masterHide: !1,
      copyGainToo: !1,
      cpa: !1,
      bigD: !1,
      f1func: E_FFUNC.PLAY,
      f2func: E_FFUNC.REC,
      viewGroups: [[], [], [], [], [], []],
      viewGroupsNames: "     ".split(" "),
      me: [],
      meout: -1,
      tapbpmfx1: !1,
      tapbpmfx2: !0,
      tapbpmfx3: !0,
      tapbpmfx4: !0,
      perm_name: "noname",
      perm_lock: !1,
      perm_aux1: !1,
      perm_aux2: !1,
      perm_aux3: !1,
      perm_aux4: !1,
      perm_aux5: !1,
      perm_aux6: !1,
      perm_aux7: !1,
      perm_aux8: !1,
      perm_aux9: !1,
      perm_aux10: !1,
      perm_aux11: !1,
      perm_aux12: !1,
      perm_aux13: !1,
      perm_aux14: !1,
      perm_aux15: !1,
      perm_aux16: !1,
      perm_mvol: !1,
      perm_mfx: !1,
      perm_shows: !1,
      perm_media: !1,
      perm_patching: !1,
      perm_config: !1,
    };
    demoSettings = {
      pinSlideOut: !0,
      bigSlideOut: !0,
      viewGroups: [[42, 43, 44, 45, 20, 21, 18, 24], [16, 17, 18, 15, 26, 25, 24], [29, 20, 21, 28, 27, 45, 43], [], [], []],
      viewGroupsNames: "Main VOX Custom   ".split(" "),
      me: [9, 18],
      meout: 1,
    };
    demoSettings16 = { pinSlideOut: !0, bigSlideOut: !1, viewGroups: [[0, 1, 2, 3], [4, 5, 6, 7, 8, 9, 10, 11], [0, 12, 13, 14, 15], [], [], []], viewGroupsNames: "     ".split(" "), me: [0, 1], meout: 0 };
    function toBool(a) {
      return 0.5 <= a;
    }
    function fromBool(a) {
      return a ? 1 : 0;
    }
    function initDataItem(a, b) {
      isDefined(b) ? (dataValue[a] = b) : (dataValue[a] = null);
    }
    function getValue(a) {
      return a in dataValue ? dataValue[a] : null;
    }
    function setValue(a, b) {
      if (dataValue[a] !== b) {
        if (dataValue["settings.block.pass"] && dataValue["settings.block.pass"] != settings.master_pass) {
          var c = !0,
            d = a.split(".");
          if (dataValue["settings.block.mixlvl"] && ("mgmask" == d.last() && (c = !1), "." == a[1]))
            switch (a[0]) {
              case "i":
              case "f":
              case "s":
              case "l":
              case "p":
                if (!a.contains(".aux."))
                  switch (d.last()) {
                    case "mix":
                    case "mute":
                    case "pan":
                    case "forceunmute":
                      c = !1;
                  }
            }
          if (dataValue["settings.block.mixproc"] && "." == a[1])
            switch (a[0]) {
              case "i":
              case "f":
              case "s":
              case "l":
              case "p":
                if (!a.contains(".aux."))
                  switch (d.last()) {
                    case "mix":
                    case "mute":
                    case "forceunmute":
                    case "pan":
                    case "safe":
                    case "mgmask":
                      break;
                    default:
                      c = !1;
                  }
            }
          dataValue["settings.block.player"] && a.startsWith("p.") && (c = !1);
          !dataValue["settings.block.mlvl"] || ("m.mix" != a && "m.pan" != a) || (c = !1);
          dataValue["settings.block.mproc"] && a.startsWith("m.") && "m.mix" != a && "m.pan" != a && (c = !1);
          dataValue["settings.block.shows"] && a.endsWith(".safe") && (c = !1);
          dataValue["settings.block.auxlvl"] && ((a.startsWith("a.") && (a.endsWith(".mix") || a.endsWith(".mute") || a.endsWith(".stereoIndex"))) || a.contains(".aux.")) && (c = !1);
          dataValue["settings.block.auxproc"] && a.startsWith("a.") && !a.endsWith(".mix") && !a.endsWith(".mute") && (c = !1);
          c ||
          (settings.perm_aux1 || (!a.startsWith("a.0.") && !a.contains(".aux.0.")) || (c = !0),
          settings.perm_aux2 || (!a.startsWith("a.1.") && !a.contains(".aux.1.")) || (c = !0),
          settings.perm_aux3 || (!a.startsWith("a.2.") && !a.contains(".aux.2.")) || (c = !0),
          settings.perm_aux4 || (!a.startsWith("a.3.") && !a.contains(".aux.3.")) || (c = !0),
          settings.perm_aux5 || (!a.startsWith("a.4.") && !a.contains(".aux.4.")) || (c = !0),
          settings.perm_aux6 || (!a.startsWith("a.5.") && !a.contains(".aux.5.")) || (c = !0),
          settings.perm_aux7 || (!a.startsWith("a.6.") && !a.contains(".aux.6.")) || (c = !0),
          settings.perm_aux8 || (!a.startsWith("a.7.") && !a.contains(".aux.7.")) || (c = !0));
          if (a.startsWith("var.") || a.startsWith("settings.")) c = !1;
          switch (d.last()) {
            case "solo":
              c = !0;
              break;
            case "gain":
              a.contains(".eq.") || (c = dataValue["settings.block.mixgain"] && "i" == a[0] && "." == a[1] ? !1 : !0);
              break;
            case "hiz":
            case "phantom":
            case "invert":
              c = dataValue["settings.block.mixgain"] && "i" == a[0] && "." == a[1] ? !1 : !0;
          }
          if (c) {
            showPopupMsg(lang.LOCKED, 1e3);
            return;
          }
        }
        setValueX(a, b);
        if ("." == a[1])
          switch (a[0]) {
            case "m":
              d = a.split(".");
              c = "";
              if ("mtx" == d[1]) {
                var f = parseInt(d[2], 10);
                0 == getValue("a." + f + ".stereoIndex") ? (c = ".mtx." + (f + 1) + ".") : 1 == getValue("a." + f + ".stereoIndex") && (c = ".mtx." + (f - 1) + ".");
                c.length && ((c = a.replace(".mtx." + f + ".", c)), setValueX(c, b), updateByKey(c));
              }
              a.endsWith(".pan");
              break;
            case "i":
            case "a":
            case "f":
            case "p":
            case "s":
            case "l":
              d = a.split(".");
              switch (d[2]) {
                case "gain":
                case "phantom":
                case "stereo":
                case "invert":
                case "delay":
                case "src":
                case "scsrc":
                case "r":
                case "color":
                case "name":
                case "stereoIndex":
                case "mtkrec":
                  return;
              }
              c = "";
              "aux" == d[2] &&
              ((f = parseInt(d[3], 10)),
                0 == getValue("a." + f + ".stereoIndex") ? (c = ".aux." + (f + 1) + ".") : 1 == getValue("a." + f + ".stereoIndex") && (c = ".aux." + (f - 1) + "."),
              c.length && ((c = a.replace(".aux." + f + ".", c)), setValueX(c, b), updateByKey(c)));
              "mtx" == d[2] &&
              ((f = parseInt(d[3], 10)),
                0 == getValue("a." + f + ".stereoIndex") ? (c = ".mtx." + (f + 1) + ".") : 1 == getValue("a." + f + ".stereoIndex") && (c = ".mtx." + (f - 1) + "."),
              c.length && ((c = a.replace(".mtx." + f + ".", c)), setValueX(c, b), updateByKey(c)));
              if (!a.endsWith(".pan") && !a.endsWith(".src") && !a.endsWith(".scsrc")) {
                var f = d[0] + "." + d[1] + ".",
                  e = "",
                  g = parseInt(d[1], 10);
                0 == getValue(f + "stereoIndex") ? (e = d[0] + "." + (g + 1) + ".") : 1 == getValue(f + "stereoIndex") && (e = d[0] + "." + (g - 1) + ".");
                e.length && ((d = a.replace(f, e)), setValueX(d, b), c.length && ((c = c.replace(f, e)), setValueX(c, b)), updateByKey(d));
              }
          }
      }
    }
    function isBlocked(a, b) {
      var c = getValue("settings.block.pass"),
        c = c && c != settings.master_pass;
      if (!c) return !1;
      isDefined(a) && (c = !dataValue["settings.block." + a]);
      return ("auxlvl" != a && "auxproc" != a) || c || !isDefined(b) || null == b ? c : !settings["perm_aux" + (b + 1)];
    }
    function setValueX(a, b) {
      log("[" + a + "] " + b);
      dataValue[a] = b;
      "string" == typeof b ? sendMessage("SETS^" + a + "^" + b) : sendMessage("SETD^" + a + "^" + b);
    }
    function putValue(a, b) {
      dataValue[a] !== b && ((dataValue[a] = b), updateByKey(a, b));
    }
    prevMGMASK = -1;
    function handle_mgmask(a) {
      checkMutes();
      switch (mode) {
        case E_MODE.BIG:
        case E_MODE.MIX:
        case E_MODE.GAIN:
          regUpdate(mixerWidget);
          break;
        case E_MODE.EDIT:
          regUpdate(editStripWidget);
          (editWidget.mode != editWidget.E_MODE.fx && editWidget.mode != editWidget.E_MODE.aux) || regUpdate(editWidget);
          break;
        case E_MODE.AUX:
          regUpdate(auxoutWidget);
          regUpdate(auxWidget);
          break;
        case E_MODE.FXSENDS:
          regUpdate(fxoutWidget);
          regUpdate(fxSendsWidget);
          break;
        case E_MODE.PLAYER:
          regUpdate(playerStrips);
          regUpdate(playerWidget);
          break;
        case E_MODE.MODALS:
          regUpdate(modalsWidget);
      }
      slideOutWidget.enabled && regUpdate(slideOutWidget);
      var b = getValue("mgmask");
      if (-1 != prevMGMASK && !a) {
        a = b ^ prevMGMASK;
        a & (1 << MUTEALL_BIT_IDX) && (b & (1 << MUTEALL_BIT_IDX) ? showPopupMsg(lang.MUTE_ALL, 1e3) : showPopupMsg(lang.MUTE_ALL_CANCEL, 1e3));
        a & (1 << MUTEFX_BIT_IDX) && (b & (1 << MUTEFX_BIT_IDX) ? showPopupMsg(lang.MUTE_FX, 1e3) : showPopupMsg(lang.MUTE_FX_CANCEL, 1e3));
        for (var c = 0; 6 > c; c++) a & (1 << c) && (b & (1 << c) ? showPopupMsg(lang.MUTEGROUP_1_ACTIVATED.format(c + 1), 1e3) : showPopupMsg(lang.MUTEGROUP_1_DEACTIVATED.format(c + 1), 1e3));
      }
      prevMGMASK = b;
    }
    keyWidgetHash = $H();
    var VAR_MTK_PRESENT = 0;
    function updateByKey(a, b) {
      var c = keyWidgetHash.get(a);
      if (isDefined(c)) for (var d = 0, f = c.length; d < f; d++) regUpdate(c[d]);
      a.contains(".subgroup") && (modalsWidget.enabled && regUpdate(modalsWidget.pages[E_MODAL_MODE.SUBS]), -1 != activeSubGroup && mixerWidget.showSG(activeSubGroup));
      if (IS_UI_24) {
        if (mode == E_MODE.MODALS && a.endsWith(".amixgroup")) {
          c = modalsWidget.pages[E_MODAL_MODE.AUTOMIX];
          c.sync();
          regUpdate(c);
          return;
        }
        if (a.startsWith("automix.")) {
          if ("automix.a.on" == a) for (d = 0, c = inStrips.length; d < c; d++) 0 == inStrips[d].getNameValue("amixgroup") && regUpdate(inStrips[d]);
          if ("automix.b.on" == a) for (d = 0, c = inStrips.length; d < c; d++) 1 == inStrips[d].getNameValue("amixgroup") && regUpdate(inStrips[d]);
          return;
        }
      }
      mode == E_MODE.EDIT && a.contains(".stereoIndex") && (editWidget.upd(), regUpdate(editWidget));
      a.endsWith(".bpm") && topWidget.led.setMsg(dataValue[a] + " " + lang.BPM);
      if ("mgmask" == a) handle_mgmask(!0);
      else if (a.startsWith("v.") && a.endsWith("mute")) handle_mgmask();
      else if (mode != E_MODE.EDIT || (selectedStrip.type != E_STRIP_TYPE.AUX && selectedStrip.type != E_STRIP_TYPE.MASTER) || !a.contains("afs."))
        if (a.startsWith("var.")) {
          "var.mtk.present" === a && IS_UI_24 && mtkPlay && mtkPlay.enabled && VAR_MTK_PRESENT != b && (sendMessage(E_COMMANDS.MTK_GET_SESSIONS), sendMessage(E_COMMANDS.MTK_GET_FILES), (VAR_MTK_PRESENT = b));
          "var.afsdata" == a && afsPopup && regUpdate(afsPopup);
          "var.currentShow" == a && drawAll("curShow");
          "var.currentSnapshot" == a && drawAll("curSnap");
          "var.unsaved.chsafes" == a && regUpdate(chSafesPage);
          "var.unsaved.mutegroups" == a && regUpdate(modalsWidget);
          "var.currentState" == a && (regUpdate(player2track), regUpdate(masterWidget));
          "var.currentPlaylist" == a && regUpdate(player2track);
          mode == E_MODE.EDIT && "var.rta" == a && regUpdate(editWidget);
          "var.hpaux" == a && syncHPAUX();
          "var.currentTrack" == a &&
          ((c = dataValue["var.currentTrack"]),
            (d = c.length),
          15 < d && (c = "..." + c.substr(d - 15, 15)),
            topWidget.led.setMsg(c, "#ff0"),
          dataValue["var.currentPlaylist"] == player2track.FLIST.plistName && player2track.FLIST.selectByName(dataValue["var.currentTrack"]));
          if ("var.isRecording" == a || "var.recBusy" == a) regUpdate(masterWidget), regUpdate(player2track);
          "var.recBusy" == a && regUpdate(topWidget);
        } else if (mode == E_MODE.SETTINGS && a.startsWith("settings.")) regUpdate(settingsWidget);
        else if ((IS_UI_24 && a.endsWith(".iosyscmd") && regUpdate(bottomWidget), a.contains(".name") || a.endsWith(".fxtype") || a.endsWith(".color")))
          regUpdate(bottomWidget),
          "a" === a[0] && mode == E_MODE.AUX && (regUpdate(auxWidget), regUpdate(auxoutWidget)),
          "f" === a[0] && mode == E_MODE.FXSENDS && (regUpdate(fxSendsWidget), regUpdate(fxoutWidget)),
          mode == E_MODE.EDIT && a.contains(selectedStrip.name) && (regUpdate(editStripWidget), regUpdate(editWidget));
        else if (
          (mode == E_MODE.MOREME && -1 != settings.meout && a.contains(".aux." + settings.meout) && regUpdate(moremeWidget),
          mode == E_MODE.MODALS && modalsWidget.mode == E_MODAL_MODE.MOREME && -1 != settings.meout && a.contains(".aux." + settings.meout) && regUpdate(modalsWidget.pages[E_MODAL_MODE.MOREME]),
          mode == E_MODE.GAIN && a.endsWith(".src") && (gainMixer.onShow(), regUpdate(gainMixer)),
          mode == E_MODE.MODALS && a.contains(".mgmask"))
        )
          regUpdate(modalsWidget.pages[E_MODAL_MODE.MUTES]);
        else {
          if (mode == E_MODE.EDIT && a.contains(selectedStrip.name)) {
            regUpdate(editStripWidget);
            selectedStrip.type == E_STRIP_TYPE.MASTER && regUpdate(masterWidget);
            (a.contains(".afs.enabled") || a.contains(".deesser.")) && regUpdate(editWidget);
            switch (editWidget.mode) {
              case editWidget.E_MODE.eqch:
              case editWidget.E_MODE.eqaux:
              case editWidget.E_MODE.eqm:
                if (!a.contains(".eq.")) return;
                a.contains(".eq.easy") && editWidget.pages[editWidget.mode].checkState();
                break;
              case editWidget.E_MODE.dyn:
                "m.dyn.linked" == a && selectedStrip.type == E_STRIP_TYPE.MASTER && ((c = editWidget.pages[editWidget.E_MODE.dyn]), c.setLeft(!0), c.syncSliders(), regUpdate(editWidget));
                if (!a.contains(".dyn.") && !a.contains(".gate.")) return;
                break;
              case editWidget.E_MODE.gate:
                if (!a.contains(".gate.")) return;
                break;
              case editWidget.E_MODE.aux:
                if (!a.contains(".aux.")) return;
            }
            regUpdate(editWidget);
          }
          mode == E_MODE.MODALS && (a.contains(".mute") || a.contains(".solo") || a.contains(".phantom") || a.contains(".invert")) && regUpdate(modalsWidget.pages[E_MODAL_MODE.TOTALVIEW]);
          mode == E_MODE.AUX &&
          a.contains(".aux.") &&
          ((c = a.split(".")),
            (d = parseInt(c[1], 10)),
          "l" == c[0] && (d += curSetup.input),
          "p" == c[0] && (d += curSetup.input + curSetup.linein),
          "f" == c[0] && (d += curSetup.input + curSetup.linein + 2),
            regUpdate(auxWidget.page.strips[d]));
          if (mode == E_MODE.AUX && a.contains(".mtx."))
            (c = a.split(".")),
              (d = parseInt(c[1], 10)),
            "s" == c[0] && (d += curSetup.aux),
            "m" == c[0] && (regUpdate(auxWidget.page2.strips[auxWidget.page2.strips.length - 1]), regUpdate(auxWidget.page2.strips[auxWidget.page2.strips.length - 2])),
              regUpdate(auxWidget.page2.strips[d]);
          else if (mode == E_MODE.FXSENDS && a.contains(".fx."))
            (c = a.split(".")),
              (d = parseInt(c[1], 10)),
              (f = parseInt(c[3], 10)),
            "l" == c[0] && (d += curSetup.input),
            "p" == c[0] && (d += curSetup.input + curSetup.linein),
            "s" == c[0] && (d += curSetup.input + curSetup.linein + 2),
            fxSendsWidget.mode == f && regUpdate(fxSendsWidget.page.strips[d]);
          else if (mode == E_MODE.SETTINGS && a.contains(".safe")) regUpdate(chSafesPage);
          else if (!(a.startsWith("iso.") || ((c = a.split(".")), 2 > c.length || "dyn" == c[1] || "eq" == c[1])))
            if (
              (a.contains(".solo") && checkSolos(),
              a.contains(".mute") && checkMutes(),
              mode == E_MODE.SETTINGS && a.endsWith("src") && regUpdate(settingsWidget),
              mode == E_MODE.MODALS && a.contains(".forceunmute") && regUpdate(tvWidget),
              "m" == c[0])
            )
              regUpdate(masterWidget), "m.eq.linked" == a && regUpdate(editWidget), "m.dyn.linked" == a && regUpdate(editWidget);
            else if (((d = c[1]), isDefined(d)))
              if (((f = parseInt(d)), isNaN(f))) log("!2 " + a);
              else
                switch (
                  (mode == E_MODE.AUX &&
                  auxWidget.page2 &&
                  (a.endsWith(".matrix") && auxWidget.upd(), a.contains(".mute") || a.contains(".subgroup") || a.contains(".forceunmute")) &&
                  ((d = f),
                  "l" == c[0] && (d += curSetup.input),
                  "p" == c[0] && (d += curSetup.input + curSetup.linein),
                  "f" == c[0] && (d += curSetup.input + curSetup.linein + 2),
                    regUpdate(auxWidget.page2.strips[d])),
                    c[0])
                  ) {
                  case "hw":
                    "phantom" == c[2] && blockGainBySrc(a.replace(".phantom", ""));
                    break;
                  case "i":
                    0 <= f && f < inStrips.length && (regUpdate(inStrips[f]), "phantom" == c[2] && (1 == dataValue[a] ? blockStrip(f, PHANTOM_ON_DELAY) : blockStrip(f, PHANTOM_OFF_DELAY)));
                    break;
                  case "l":
                    0 <= f && f < lineinStrips.length && regUpdate(lineinStrips[f]);
                    break;
                  case "f":
                    0 <= f &&
                    f < fxStrips.length &&
                    (regUpdate(fxStrips[f]), mode == E_MODE.FXSENDS && regUpdate(fxoutWidget), mode == E_MODE.EDIT && editWidget.mode == editWidget.E_MODE.fx && regUpdate(editWidget.pages[editWidget.E_MODE.fx]));
                    break;
                  case "a":
                    0 <= f &&
                    f < auxStrips.length &&
                    (regUpdate(auxStrips[f]),
                    (mode != E_MODE.AUX && mode != E_MODE.MOREME) || regUpdate(auxoutWidget),
                    mode == E_MODE.EDIT && editWidget.mode == editWidget.E_MODE.aux && regUpdate(editWidget.pages[editWidget.E_MODE.aux]));
                    break;
                  case "s":
                    0 <= f && f < subStrips.length && regUpdate(subStrips[f]);
                    break;
                  case "p":
                    0 <= f && f < mediaStrips.length && regUpdate(mediaStrips[f]);
                    break;
                  case "v":
                    0 <= f && f < subStrips.length && regUpdate(vcaStrips[f]);
                }
            else log("!1 " + a);
        }
      else regUpdate(editWidget);
    }
    function FREQtoV(a) {
      return bound(Math.log(a / 20) / Math.log(1102.5), 0, 1);
    }
    function resetParEQ(a, b) {
      setValue(a + ".eq.bypass", 0);
      setValue(a + ".eq.prname", "");
      setValue(a + ".eq.prmod", 0);
      isDefined(b) || setValue(a + ".eq.easy", 0);
      setValue(a + ".eq.hpf.freq", 0);
      IS_UI_24 && (setValue(a + ".eq.hpf.slope", 0), setValue(a + ".eq.lpf.freq", 1), setValue(a + ".eq.lpf.slope", 0));
      setValue(a + ".eq.b1.freq", FREQtoV(200));
      setValue(a + ".eq.b1.q", QtoV(1));
      setValue(a + ".eq.b1.gain", 0.5);
      setValue(a + ".eq.b2.freq", FREQtoV(1e3));
      setValue(a + ".eq.b2.q", QtoV(1));
      setValue(a + ".eq.b2.gain", 0.5);
      setValue(a + ".eq.b3.freq", FREQtoV(4e3));
      setValue(a + ".eq.b3.q", QtoV(1));
      setValue(a + ".eq.b3.gain", 0.5);
      setValue(a + ".eq.b4.freq", FREQtoV(1e4));
      setValue(a + ".eq.b4.q", QtoV(1));
      setValue(a + ".eq.b4.gain", 0.5);
      setValue(a + ".deesser.enabled", 0);
      setValue(a + ".deesser.freq", 0.773310034);
      setValue(a + ".deesser.threshold", 0.46875);
      setValue(a + ".deesser.ratio", 0.4);
    }
    function resetGraphEQ(a) {
      setValue(a + ".eq.bypass", 0);
      setValue(a + ".eq.prname", "");
      setValue(a + ".eq.prmod", 0);
      if ("m" == a) {
        setValue(a + ".eq.linked", 1);
        IS_UI_24 && (setValue(a + ".eq.hpf.l", 0), setValue(a + ".eq.hpf.r", 0), setValue(a + ".eq.lpf.l", 1), setValue(a + ".eq.lpf.r", 1));
        for (var b = 0; 31 > b; b++) setValue(a + ".eq.peak.l." + b, 0.5), setValue(a + ".eq.peak.r." + b, 0.5);
      } else for (IS_UI_24 && (setValue(a + ".eq.hpf", 0), setValue(a + ".eq.lpf", 1)), b = 0; 31 > b; b++) setValue(a + ".eq.peak." + b, 0.5);
    }
    function resetDyn(a, b) {
      isDefined(b) || (b = !0);
      setValue(a + ".dyn.bypass", 0);
      setValue(a + ".dyn.prname", "");
      setValue(a + ".dyn.prmod", 0);
      var c =
        "m" == a
          ? {
            ".dyn.linked": 1,
            ".dyn.l.threshold": 0.9375,
            ".dyn.l.gain": 0.75,
            ".dyn.l.ratio": 0,
            ".dyn.l.softknee": 0,
            ".dyn.l.attack": 0,
            ".dyn.l.hold": 0.158,
            ".dyn.l.outgain": 0.3333333333333333,
            ".dyn.l.release": 0.2490234375,
            ".dyn.r.threshold": 0.9375,
            ".dyn.r.gain": 0.75,
            ".dyn.r.ratio": 0,
            ".dyn.r.softknee": 0,
            ".dyn.r.attack": 0,
            ".dyn.r.hold": 0.158,
            ".dyn.r.outgain": 0.3333333333333333,
            ".dyn.r.release": 0.2490234375,
          }
          : { ".dyn.threshold": 0.875, ".dyn.gain": 0.75, ".dyn.ratio": 1, ".dyn.softknee": 0, ".dyn.attack": 0.34375, ".dyn.outgain": 0.3333333333333333, ".dyn.release": findV(VtoREL, 500) };
      applyPreset(a, c, !0);
      b && resetGate(a);
    }
    function resetGate(a) {
      setValue(a + ".gate.enabled", 1);
      setValue(a + ".gate.bypass", 0);
      setValue(a + ".gate.prname", "");
      setValue(a + ".gate.prmod", 0);
      setValue(a + ".gate.thresh", 0);
      setValue(a + ".gate.attack", 0);
      setValue(a + ".gate.release", 0.3150737133956386);
      setValue(a + ".gate.hold", 0.3042441765273541);
      setValue(a + ".gate.depth", 0);
    }
    function applyPreset(a, b, c) {
      for (var d in b) b.hasOwnProperty(d) && isDefined(dataValue[a + d]) && null != b[d] && (setValue(a + d, b[d]), updateByKey(a + d));
    }
    function resetChannel(a) {
      var b = a.split("."),
        c = b[0],
        b = parseInt(b[1]),
        d = IS_UI_24 ? 0.09523809523809523 : 0.4;
      switch (c) {
        case "v":
          setValue(a + ".mute", 0);
          setValue(a + ".mix", zeroDbPos);
          setValue(a + ".name", "");
          return;
        case "i":
          setValue(a + ".gain", 0),
            setValue(a + ".phantom", 0),
            setValue(a + ".invert", 0),
            setValue(a + ".color", 0),
          HAVE_LATENCY && setValue(a + ".delay", 0),
            setValue(a + ".hiz", 0),
          IS_UI_24 && setValue(a + ".amixgroup", -1);
        case "l":
          if (HAVE_ROUTING && "i" == c)
            if (20 <= b) setValue(a + ".src", "none"), setValue(a + ".scsrc", "none");
            else {
              setValue(a + ".src", "hw." + b);
              setValue(a + ".scsrc", ROUTING_TEST_MODE ? "ub." + b : "ua." + b);
              var f = a.replace("i.", "hw.");
              setValue(f + ".gain", d);
              setValue(f + ".phantom", 0);
              setValue(f + ".hiz", 0);
            }
          HAVE_ROUTING && "l" == c && (setValue(a + ".src", "li." + b), setValue(a + ".scsrc", ROUTING_TEST_MODE ? "ub." + (20 + b) : "ua." + (20 + b)));
        case "p":
          setValue(a + ".pan", 0.5);
          "p" == c && setValue(a + ".pan", b);
          setValue(a + ".mute", 0);
          setValue(a + ".solo", 0);
          setValue(a + ".subgroup", -1);
          setValue(a + ".mix", 0);
          IS_UI_24 && setValue(a + ".vca", -1);
          resetParEQ(a);
          break;
        case "f":
          setValue(a + ".span", 0.5), setValue(a + ".smix", zeroDbPos);
        case "s":
          setValue(a + ".pan", 0.5), "s" == c && IS_UI_24 && setValue(a + ".exclude", 0), resetParEQ(a);
        case "a":
          setValue(a + ".mute", 0);
          setValue(a + ".solo", 0);
          setValue(a + ".mix", zeroDbPos);
          "a" == c &&
          (HAVE_LATENCY && setValue(a + ".delay", 0), resetGraphEQ(a), IS_UI_24 && (setValue(a + ".link2master", 0), setValue(a + ".vca", -1), setValue(a + ".invert", 0)), HAVE_MATRIX && setValue(a + ".matrix", 0));
          break;
        case "m":
          setValue(a + ".mix", zeroDbPos), HAVE_LATENCY && (setValue(a + ".delayL", 0), setValue(a + ".delayR", 0)), resetGraphEQ(a);
      }
      IS_UI_24 && "il".contains(c) && (setValue(a + ".iosyscmd", ""), setValue(a + ".iosysname", ""), setValue(a + ".instrument", ""));
      setValue(a + ".name", "");
      resetDyn(a);
      resetGate(a);
      for (c = 0; c < curSetup.aux; c++)
        setValue(a + ".aux." + c + ".value", 0),
          setValue(a + ".aux." + c + ".pan", 0.5),
          setValue(a + ".aux." + c + ".mute", 0),
          setValue(a + ".aux." + c + ".post", 0),
          setValue(a + ".aux." + c + ".postproc", 1),
        HAVE_MATRIX && (setValue(a + ".mtx." + c + ".value", 0), setValue(a + ".mtx." + c + ".pan", 0.5), setValue(a + ".mtx." + c + ".mute", 0));
      for (c = 0; c < curSetup.fx; c++) setValue(a + ".fx." + c + ".value", 0), setValue(a + ".fx." + c + ".mute", 0);
    }
    function resetFX(a) {
      var b = getValue(a + ".fxtype"),
        c = [
          [0.5, 0.4, 0.5, 1, 0, 0],
          [0, 0.5, 0.3, 1, 0, 0],
          [0.4, 0.5, 1, 0, 0, 0],
          [0.5, 0.4, 0.5, 1, 0, 0],
        ];
      setValue(a + ".prmod", 0);
      setValue(a + ".prname", "");
      setValue(a + ".par1", c[b][0]);
      setValue(a + ".par2", c[b][1]);
      setValue(a + ".par3", c[b][2]);
      setValue(a + ".par4", c[b][3]);
      setValue(a + ".par5", c[b][4]);
      setValue(a + ".par6", c[b][5]);
    }
    function createData() {
      "undefined" == typeof curSetup
        ? ((curSetup = { input: 2, fx: 1, aux: 1, bankSize: 8, sub: 1, maxx: !0, rec: !0, phantom: 1, linein: 2 }), (noData = !0))
        : "undefined" != typeof staticInitDataArray && (staticInitDataArray(), (staticInitDataArray = null));
    }
    function checkDataIngegrity() {
      for (var a = 0; a < inStrips.length; a++) {
        var b = inStrips[a];
        b.getNameValue("src") || b.setNameValue("src", "hw." + b.subId);
      }
    }
    widgetReqPreset = widgetReqList = null;
    function deconvertVU(a) {
      return 0.004167508166392142 * a;
    }
    function deconvertVU_comp(a) {
      a = (1 - 0.004167508166392142 * (a | ((a >> 7) & 1))) * COMP_ZOOM;
      0.008 > a ? (a = 0) : 1 < a && (a = 1);
      return a;
    }
    showingDateTimeAssign = !1;
    function parseCommand(a) {
      if (a.startsWith("VU2^")) parseVUdata(a);
      else if (a.startsWith("VUA^")) parseVUAdata(a);
      else if (a.startsWith("RTA^")) parseRTAdata(a);
      else if (a.startsWith("BMSG^")) parseBMessage(a);
      else if (a.startsWith("INIT^")) (a = a.substring(5)), (a = JSON.parse(a)), Object.extend(dataValue, a), drawAll("INIT");
      else if (a.startsWith("MSG^")) {
        a = a.split("^");
        var b = "";
        if (a[1].startsWith("$")) {
          if (((b = a[1].substr(1)), b in lang)) for (var b = lang[b], c = 2; c < a.length; c++) b = b.replace("{" + (c - 2) + "}", a[c]);
        } else b = a[1];
        showPopupMsg(b, 3e3);
      } else
        a.startsWith("DLGSHOW^")
          ? ((a = a.split("^")), 3 > a.length || (a.shift(), (c = a.shift()), (b = a.shift()), dlgShow(c, b, a)))
          : a.startsWith("DLGHIDE^")
            ? ((a = a.split("^")), (c = a[1]), dlgHide(c))
            : a.startsWith("SHOWLIST^")
              ? ((a = a.split("^")),
                a.shift(),
                (a = a.filter(function (a) {
                  return "" !== a;
                })),
              showsPage && showsPage.SHOWS.setItems(a),
              showsPopup && showsPopup.SHOWS.setItems(a),
              null != widgetReqList && (widgetReqList.setItems(a), (widgetReqList = null)))
              : a.startsWith("SNAPSHOTLIST^")
                ? ((a = a.split("^")),
                  a.shift(),
                  (b = a.shift()),
                showsPage && !showsPage.SNAPS.showName && (showsPage.SNAPS.showName = b),
                showsPopup && !showsPopup.SNAPS.showName && (showsPopup.SNAPS.showName = b),
                  (a = a.filter(function (a) {
                    return "" !== a;
                  })),
                showsPage && showsPage.SNAPS.showName == b && showsPage.globalEnabled() && showsPage.SNAPS.setItems(a),
                showsPopup && showsPopup.SNAPS.showName == b && showsPopup.SNAPS.setItems(a),
                b == getValue("var.currentShow") && (CURRENT_SNAPS_LIST = a))
                : a.startsWith("PRESETLIST^")
                  ? ((a = a.split("^")),
                    a.shift(),
                    a.shift(),
                    (a = a.filter(function (a) {
                      return "" !== a;
                    })),
                  null != widgetReqList && (widgetReqList.setItems(a), (widgetReqList = null)))
                  : a.startsWith("USBMOUNTS")
                    ? ((a = a.split("^")),
                      a.shift(),
                      (a = a.filter(function (a) {
                        return "" !== a;
                      })),
                      0 == a.length ? ((widgetReqList = null), showPopupMsg(lang.SHOWEXP_USBNOTFOUND), clearModals()) : null != widgetReqList && (widgetReqList.setItems(a), (widgetReqList = null)))
                    : a.startsWith("IMPORTSHOWLIST")
                      ? ((a = a.split("^")),
                        a.shift(),
                        (a = a.filter(function (a) {
                          return "" !== a;
                        })),
                        0 == a.length ? ((widgetReqList = null), showPopupMsg(lang.SHOWIMP_NOTFOUND), clearModals()) : null != widgetReqList && (widgetReqList.setItems(a), (widgetReqList = null)))
                      : a.startsWith("READPRESET^")
                        ? ((a = a.split("^")),
                        3 > a.length ||
                        ((b = JSON.parse(a[3])), null != widgetReqPreset && (isDefined(widgetReqPreset.loadPreset) && ((a = a[2].substr(2)), widgetReqPreset.loadPreset(b, a) && showPopupMsg(a, 800)), (widgetReqPreset = null))))
                        : a.startsWith("PLISTS^")
                          ? ((a = a.split("^")),
                            a.shift(),
                            (a = a.filter(function (a) {
                              return "" !== a;
                            })),
                          player2track.PLISTS && player2track.PLISTS.setItems(a))
                          : a.startsWith("PLIST_TRACKS^")
                            ? ((a = a.split("^")),
                              a.shift(),
                              (b = a.shift()),
                              (a = a.filter(function (a) {
                                return "" !== a;
                              })),
                            player2track.FLIST && (player2track.FLIST.plistName = b),
                            player2track.FLIST && player2track.FLIST.setItems(a))
                            : a.startsWith("NETCONFIG^")
                              ? ((a = a.substring(10)), (netConfig = JSON.parse(a)), mode == E_MODE.SETTINGS && 0 == settingsWidget.mode && regUpdate(settingsWidget))
                              : a.startsWith("MTK_GET_SESSIONS^")
                                ? mtkPlay &&
                                ((a = a.split("^")),
                                  a.shift(),
                                  (a = a.filter(function (a) {
                                    return "" !== a;
                                  })),
                                  mtkPlay.sessions.setItems(a))
                                : a.startsWith("MTK_GET_FILES^")
                                  ? mtkPlay &&
                                  ((a = a.split("^")),
                                    a.shift(),
                                    (a = a.filter(function (a) {
                                      return "" !== a;
                                    })),
                                    mtkPlay.files.setItems(a))
                                  : a.startsWith("TIMEDIALOG^")
                                    ? isLocal &&
                                    ((a = a.split("^")),
                                      "1" == a[1]
                                        ? ((editOk.valueFunc = function () {
                                          var a = editBox2.value;
                                          if (a) {
                                            var b = a.split(" "),
                                              a = parseInt(b[0]);
                                            if (isNaN(a)) showPopupMsg(lang.WRONG_DATE);
                                            else {
                                              1e3 > a && (a += 2e3);
                                              var c = parseInt(b[1]);
                                              if (isNaN(c) || 12 < c) showPopupMsg(lang.WRONG_DATE);
                                              else {
                                                var g = parseInt(b[2]);
                                                if (isNaN(g) || 31 < g) showPopupMsg(lang.WRONG_DATE);
                                                else {
                                                  var h = parseInt(b[3]);
                                                  if (isNaN(h) || 24 <= h) showPopupMsg(lang.WRONG_TIME);
                                                  else if (((c = parseInt(b[4])), isNaN(c) || 60 <= c)) showPopupMsg(lang.WRONG_TIME);
                                                  else {
                                                    var k = parseInt(b[5]);
                                                    if (isNaN(k) || 60 <= k) k = 0;
                                                    b = parseInt(b[6]);
                                                    isNaN(b) && (b = 0);
                                                    13 > Math.abs(b) && (b *= 60);
                                                    setSrvTime(a, c, g, h, c, k, b);
                                                  }
                                                }
                                              }
                                            }
                                          }
                                        }),
                                          showEditBox2(lang.SET_TIME_DATE_TIP, "2017 07 31 14 01 02 -5"),
                                          (showingDateTimeAssign = !0))
                                        : showingDateTimeAssign && (hideEditBox2(), (showingDateTimeAssign = !1)))
                                    : "RELOAD" == a
                                      ? (settingsStorage.save(), location.reload())
                                      : a.startsWith("SERIAL")
                                        ? ((a = a.split("^")), (a = a[1]), null == globalSerial && (globalSerial = a), globalSerial != a && (settingsStorage.save(), location.reload()))
                                        : "UPDATE_PLAYLIST" == a
                                          ? player2track.updateLists()
                                          : "UPDATE_SHOWS" == a
                                            ? (showsPage.updLists(), showsPopup && showsPopup.refreshList())
                                            : log("Unknown command to parse: " + a);
    }
    var globalSerial = null;
    VUA_DEBUG = !1;
    function parseVUAdata(a) {
      if (!settings.disableVUs || !settings.disableVUs2)
        if (mode == E_MODE.MODALS || modalsWidget.mode == E_MODAL_MODE.AUTOMIX) {
          a = atob(a.slice(4));
          var b = a.charCodeAt(0);
          a.charCodeAt(1);
          a.charCodeAt(2);
          for (var c = modalsWidget.pages[E_MODAL_MODE.AUTOMIX], d = 0; d < b && !(d >= curSetup.input); d++) {
            var f = deconvertVU(a.charCodeAt(4 + d));
            VUA_DEBUG && 0 < f && log("VUA {0}: {1}".format(d, f));
            var e = c.arr.indexOf(d);
            -1 != e && c.VUS[e] && c.VUS[e].setValueExt(0, 1 - f);
          }
        }
    }
    function parseVUdata(a) {
      if (!settings.disableVUs || !settings.disableVUs2) {
        a = atob(a.slice(4));
        for (
          var b = (mode == E_MODE.EDIT && editWidget.mode == editWidget.E_MODE.dyn) || (mode == E_MODE.BIG && bmEqdyn.enabled && bmEqdyn.dyn.dyn.enabled),
            c = (HAVE_GATE && mode == E_MODE.EDIT && editWidget.mode == editWidget.E_MODE.gate) || (mode == E_MODE.BIG && bmEqdyn.enabled && bmEqdyn.dyn.gate.enabled),
            d = editWidget.pages[editWidget.E_MODE.dyn],
            f = editWidget.pages[editWidget.E_MODE.gate],
            e = 8,
            g = 0,
            h = a.charCodeAt(0);
          g < h && !(g >= curSetup.input);
          g++
        ) {
          var k = e + 6 * g,
            m = deconvertVU(a.charCodeAt(k + 0)),
            p = deconvertVU(a.charCodeAt(k + 1)),
            q = deconvertVU(a.charCodeAt(k + 2)),
            r = deconvertVU_comp((a.charCodeAt(k + 5) & 127) << 1),
            n = 0 != (a.charCodeAt(k + 5) & 128);
          inStrips[g].setVU(p, q, 0, 0, r, 0, n, 0);
          gainStrips[g].setVUPre(m);
          b &&
          selectedStrip.type == E_STRIP_TYPE.IN &&
          selectedStrip.subId == g &&
          ((n = deconvertVU(a.charCodeAt(k + 3))),
            (p = deconvertVU(a.charCodeAt(k + 4))),
            d.vuIN.setValue(n),
            d.vuOUT.setValue(p),
            d.vuCOMP.setValue(r),
          bmEqdyn && (bmEqdyn.dyn.dyn.vuIN.setValue(n), bmEqdyn.dyn.dyn.vuOUT.setValue(p), bmEqdyn.dyn.dyn.vuCOMP.setValue(r)));
          c &&
          selectedStrip.type == E_STRIP_TYPE.IN &&
          selectedStrip.subId == g &&
          ((n = deconvertVU(a.charCodeAt(k + 3))), (p = deconvertVU(a.charCodeAt(k + 4))), f.vuIN.setValue(n), f.vuOUT.setValue(p), bmEqdyn && (bmEqdyn.dyn.gate.vuIN.setValue(n), bmEqdyn.dyn.gate.vuOUT.setValue(p)));
        }
        k = e += 6 * a.charCodeAt(0);
        p = deconvertVU(a.charCodeAt(k + 1));
        q = deconvertVU(a.charCodeAt(k + 2));
        r = deconvertVU_comp((a.charCodeAt(k + 5) & 127) << 1);
        n = 0 != (a.charCodeAt(k + 5) & 128);
        mediaStrips[0].setVU(p, q, 0, 0, r, 0, n, 0);
        b &&
        selectedStrip.type == E_STRIP_TYPE.MEDIA &&
        0 == selectedStrip.subId &&
        ((n = deconvertVU(a.charCodeAt(k + 3))),
          (p = deconvertVU(a.charCodeAt(k + 4))),
          d.vuIN.setValue(n),
          d.vuOUT.setValue(p),
          d.vuCOMP.setValue(r),
        bmEqdyn && (bmEqdyn.dyn.dyn.vuIN.setValue(n), bmEqdyn.dyn.dyn.vuOUT.setValue(p), bmEqdyn.dyn.dyn.vuCOMP.setValue(r)));
        c &&
        selectedStrip.type == E_STRIP_TYPE.MEDIA &&
        0 == selectedStrip.subId &&
        ((n = deconvertVU(a.charCodeAt(k + 3))), (p = deconvertVU(a.charCodeAt(k + 4))), f.vuIN.setValue(n), f.vuOUT.setValue(p), bmEqdyn && (bmEqdyn.dyn.gate.vuIN.setValue(n), bmEqdyn.dyn.gate.vuOUT.setValue(p)));
        k = e + 6;
        p = deconvertVU(a.charCodeAt(k + 1));
        q = deconvertVU(a.charCodeAt(k + 2));
        r = deconvertVU_comp((a.charCodeAt(k + 5) & 127) << 1);
        n = 0 != (a.charCodeAt(k + 5) & 128);
        mediaStrips[1].setVU(p, q, 0, 0, r, 0, n, 0);
        b &&
        selectedStrip.type == E_STRIP_TYPE.MEDIA &&
        1 == selectedStrip.subId &&
        ((n = deconvertVU(a.charCodeAt(k + 3))),
          (p = deconvertVU(a.charCodeAt(k + 4))),
          d.vuIN.setValue(n),
          d.vuOUT.setValue(p),
          d.vuCOMP.setValue(r),
        bmEqdyn && (bmEqdyn.dyn.dyn.vuIN.setValue(n), bmEqdyn.dyn.dyn.vuOUT.setValue(p), bmEqdyn.dyn.dyn.vuCOMP.setValue(r)));
        c &&
        selectedStrip.type == E_STRIP_TYPE.MEDIA &&
        1 == selectedStrip.subId &&
        ((n = deconvertVU(a.charCodeAt(k + 3))), (p = deconvertVU(a.charCodeAt(k + 4))), f.vuIN.setValue(n), f.vuOUT.setValue(p), bmEqdyn && (bmEqdyn.dyn.gate.vuIN.setValue(n), bmEqdyn.dyn.gate.vuOUT.setValue(p)));
        e += 6 * a.charCodeAt(1);
        for (g = 0; g < a.charCodeAt(2) && !(g >= curSetup.sub); g++)
          (k = e + 7 * g),
            (p = deconvertVU(a.charCodeAt(k + 0))),
            (q = deconvertVU(a.charCodeAt(k + 1))),
            (h = deconvertVU(a.charCodeAt(k + 2))),
            (m = deconvertVU(a.charCodeAt(k + 3))),
            (r = deconvertVU_comp((a.charCodeAt(k + 6) & 127) << 1)),
            (n = 0 != (a.charCodeAt(k + 6) & 128)),
            subStrips[g].setVU(p, h, q, m, r, r, n, n),
          b &&
          selectedStrip.type == E_STRIP_TYPE.SUB &&
          selectedStrip.subId == g &&
          ((n = deconvertVU(a.charCodeAt(k + 4))),
            (p = deconvertVU(a.charCodeAt(k + 5))),
            d.vuIN.setValue(n),
            d.vuOUT.setValue(p),
            d.vuCOMP.setValue(r),
          bmEqdyn && (bmEqdyn.dyn.dyn.vuIN.setValue(n), bmEqdyn.dyn.dyn.vuOUT.setValue(p), bmEqdyn.dyn.dyn.vuCOMP.setValue(r))),
          c &&
          selectedStrip.type == E_STRIP_TYPE.SUB &&
          selectedStrip.subId == g &&
          ((n = deconvertVU(a.charCodeAt(k + 4))), (p = deconvertVU(a.charCodeAt(k + 5))), f.vuIN.setValue(n), f.vuOUT.setValue(p), bmEqdyn && (bmEqdyn.dyn.gate.vuIN.setValue(n), bmEqdyn.dyn.gate.vuOUT.setValue(p)));
        e += 7 * a.charCodeAt(2);
        for (g = 0; g < a.charCodeAt(3) && !(g >= curSetup.fx); g++)
          (k = e + 7 * g),
            (p = deconvertVU(a.charCodeAt(k + 0))),
            (q = deconvertVU(a.charCodeAt(k + 1))),
            (h = deconvertVU(a.charCodeAt(k + 2))),
            (m = deconvertVU(a.charCodeAt(k + 3))),
            (r = deconvertVU_comp((a.charCodeAt(k + 6) & 127) << 1)),
            (n = 0 != (a.charCodeAt(k + 6) & 128)),
            fxStrips[g].setVU(p, h, q, m, r, r, n, n),
          fxoutWidget.idx == g && fxoutWidget.setVU(p, h, q, m, r, r, n, n),
          editWidget.pages[editWidget.E_MODE.fx].enabled &&
          selectedStrip.type == E_STRIP_TYPE.MASTER &&
          ((n = editWidget.pages[editWidget.E_MODE.fx]),
            1 <= h ? n.CLIPS[g].clip() : n.CLIPS[g].state && !n.CLIPS[g].releasing && n.CLIPS[g].release(),
            n.VUS[g].setValueExt(p, h),
            1 <= m ? n.CLIPS2[g].clip() : n.CLIPS2[g].state && !n.CLIPS2[g].releasing && n.CLIPS2[g].release(),
            n.VUS2[g].setValueExt(q, m)),
          b &&
          selectedStrip.type == E_STRIP_TYPE.FX &&
          selectedStrip.subId == g &&
          ((n = deconvertVU(a.charCodeAt(k + 4))),
            (p = deconvertVU(a.charCodeAt(k + 5))),
            d.vuIN.setValue(n),
            d.vuOUT.setValue(p),
            d.vuCOMP.setValue(r),
          bmEqdyn && (bmEqdyn.dyn.dyn.vuIN.setValue(n), bmEqdyn.dyn.dyn.vuOUT.setValue(p), bmEqdyn.dyn.dyn.vuCOMP.setValue(r))),
          c &&
          selectedStrip.type == E_STRIP_TYPE.FX &&
          selectedStrip.subId == g &&
          ((n = deconvertVU(a.charCodeAt(k + 4))), (p = deconvertVU(a.charCodeAt(k + 5))), f.vuIN.setValue(n), f.vuOUT.setValue(p), bmEqdyn && (bmEqdyn.dyn.gate.vuIN.setValue(n), bmEqdyn.dyn.gate.vuOUT.setValue(p)));
        e += 7 * a.charCodeAt(3);
        for (g = 0; g < a.charCodeAt(4) && !(g >= curSetup.aux); g++)
          (k = e + 5 * g),
            (p = deconvertVU(a.charCodeAt(k + 0))),
            (q = deconvertVU(a.charCodeAt(k + 1))),
            (r = deconvertVU_comp((a.charCodeAt(k + 4) & 127) << 1)),
            (n = 0 != (a.charCodeAt(k + 4) & 128)),
            auxStrips[g].setVU(p, q, 0, 0, r, 0, n, 0),
          auxoutWidget.idx == g && auxoutWidget.setVU(p, q, r, n),
          editWidget.pages[editWidget.E_MODE.aux].enabled &&
          selectedStrip.type == E_STRIP_TYPE.MASTER &&
          ((n = editWidget.pages[editWidget.E_MODE.aux]), 1 <= q ? n.CLIPS[g].clip() : n.CLIPS[g].state && !n.CLIPS[g].releasing && n.CLIPS[g].release(), n.VUS[g].setValueExt(p, q)),
          b &&
          selectedStrip.type == E_STRIP_TYPE.AUX &&
          selectedStrip.subId == g &&
          ((n = deconvertVU(a.charCodeAt(k + 2))),
            (p = deconvertVU(a.charCodeAt(k + 3))),
            d.vuIN.setValue(n),
            d.vuOUT.setValue(p),
            d.vuCOMP.setValue(r),
          bmEqdyn && (bmEqdyn.dyn.dyn.vuIN.setValue(n), bmEqdyn.dyn.dyn.vuOUT.setValue(p), bmEqdyn.dyn.dyn.vuCOMP.setValue(r))),
          c &&
          selectedStrip.type == E_STRIP_TYPE.AUX &&
          selectedStrip.subId == g &&
          ((n = deconvertVU(a.charCodeAt(k + 2))), (p = deconvertVU(a.charCodeAt(k + 3))), f.vuIN.setValue(n), f.vuOUT.setValue(p), bmEqdyn && (bmEqdyn.dyn.gate.vuIN.setValue(n), bmEqdyn.dyn.gate.vuOUT.setValue(p)));
        var k = (e += 5 * a.charCodeAt(4)),
          p = deconvertVU(a.charCodeAt(k + 0)),
          q = deconvertVU(a.charCodeAt(k + 1)),
          r = deconvertVU_comp((a.charCodeAt(k + 4) & 127) << 1),
          n = 0 != (a.charCodeAt(k + 4) & 128),
          h = deconvertVU(a.charCodeAt(k + 5)),
          m = deconvertVU(a.charCodeAt(k + 6)),
          g = deconvertVU_comp((a.charCodeAt(k + 9) & 127) << 1),
          u = 0 != (a.charCodeAt(k + 9) & 128);
        masterWidget.setVU2(p, q, h, m, r, g, n, u);
        b &&
        selectedStrip.type == E_STRIP_TYPE.MASTER &&
        ((q = d.left),
          (n = deconvertVU(a.charCodeAt(k + 2))),
          (p = deconvertVU(a.charCodeAt(k + 3))),
          (h = deconvertVU(a.charCodeAt(k + 7))),
          (k = deconvertVU(a.charCodeAt(k + 8))),
          d.vuIN.setValue(q ? n : h),
          d.vuOUT.setValue(q ? p : k),
          d.vuCOMP.setValue(q ? r : g),
        bmEqdyn && (bmEqdyn.dyn.dyn.vuIN.setValue(n), bmEqdyn.dyn.dyn.vuOUT.setValue(p), bmEqdyn.dyn.dyn.vuCOMP.setValue(r)));
        k = e += 5 * a.charCodeAt(6);
        m = deconvertVU(a.charCodeAt(k + 0));
        p = deconvertVU(a.charCodeAt(k + 1));
        q = deconvertVU(a.charCodeAt(k + 2));
        r = deconvertVU_comp((a.charCodeAt(k + 5) & 127) << 1);
        n = 0 != (a.charCodeAt(k + 5) & 128);
        lineinStrips[0].setVU(p, q, 0, 0, r, 0, n, 0);
        HAVE_ROUTING && lineinStrips[0].gainst && lineinStrips[0].gainst.setVUPre(m);
        b &&
        selectedStrip.type == E_STRIP_TYPE.LINEIN &&
        0 == selectedStrip.subId &&
        ((n = deconvertVU(a.charCodeAt(k + 3))),
          (p = deconvertVU(a.charCodeAt(k + 4))),
          d.vuIN.setValue(n),
          d.vuOUT.setValue(p),
          d.vuCOMP.setValue(r),
        bmEqdyn && (bmEqdyn.dyn.dyn.vuIN.setValue(n), bmEqdyn.dyn.dyn.vuOUT.setValue(p), bmEqdyn.dyn.dyn.vuCOMP.setValue(r)));
        c &&
        selectedStrip.type == E_STRIP_TYPE.LINEIN &&
        0 == selectedStrip.subId &&
        ((n = deconvertVU(a.charCodeAt(k + 3))), (p = deconvertVU(a.charCodeAt(k + 4))), f.vuIN.setValue(n), f.vuOUT.setValue(p), bmEqdyn && (bmEqdyn.dyn.gate.vuIN.setValue(n), bmEqdyn.dyn.gate.vuOUT.setValue(p)));
        k = e + 6;
        m = deconvertVU(a.charCodeAt(k + 0));
        p = deconvertVU(a.charCodeAt(k + 1));
        q = deconvertVU(a.charCodeAt(k + 2));
        r = deconvertVU_comp((a.charCodeAt(k + 5) & 127) << 1);
        n = 0 != (a.charCodeAt(k + 5) & 128);
        lineinStrips[1].setVU(p, q, 0, 0, r, 0, n, 0);
        HAVE_ROUTING && lineinStrips[1].gainst && lineinStrips[1].gainst.setVUPre(m);
        b &&
        selectedStrip.type == E_STRIP_TYPE.LINEIN &&
        1 == selectedStrip.subId &&
        ((n = deconvertVU(a.charCodeAt(k + 3))),
          (p = deconvertVU(a.charCodeAt(k + 4))),
          d.vuIN.setValue(n),
          d.vuOUT.setValue(p),
          d.vuCOMP.setValue(r),
        bmEqdyn && (bmEqdyn.dyn.dyn.vuIN.setValue(n), bmEqdyn.dyn.dyn.vuOUT.setValue(p), bmEqdyn.dyn.dyn.vuCOMP.setValue(r)));
        c &&
        selectedStrip.type == E_STRIP_TYPE.LINEIN &&
        1 == selectedStrip.subId &&
        ((n = deconvertVU(a.charCodeAt(k + 3))), (p = deconvertVU(a.charCodeAt(k + 4))), f.vuIN.setValue(n), f.vuOUT.setValue(p), bmEqdyn && (bmEqdyn.dyn.gate.vuIN.setValue(n), bmEqdyn.dyn.gate.vuOUT.setValue(p)));
      }
    }
    function parseRTAdata(a) {
      var b = dataValue["var.rta"];
      if (b) {
        switch (mode) {
          case E_MODE.EDIT:
          case E_MODE.BIG:
            break;
          default:
            return;
        }
        if (mode == E_MODE.EDIT)
          switch (editWidget.mode) {
            case editWidget.E_MODE.eqch:
              if (selectedStrip.name != b + ".") return;
            case editWidget.E_MODE.eqaux:
            case editWidget.E_MODE.eqm:
              if (!settings.masterOtherRTA && selectedStrip.name != b + ".") return;
              break;
            default:
              return;
          }
        if (mode == E_MODE.BIG)
          switch (selectedStrip.type) {
            case E_STRIP_TYPE.IN:
            case E_STRIP_TYPE.LINEIN:
            case E_STRIP_TYPE.MEDIA:
            case E_STRIP_TYPE.SUB:
            case E_STRIP_TYPE.FX:
              if (selectedStrip.name != b + ".") return;
              break;
            case E_STRIP_TYPE.AUX:
            case E_STRIP_TYPE.MASTER:
              if (!settings.masterOtherRTA && selectedStrip.name != b + ".") return;
          }
        a = atob(a.slice(4));
        for (var b = [], c = 0, d = a.length; c < d; c++) {
          var f = 0.004167508166392142 * a.charCodeAt(c);
          b.push(f);
        }
        mode == E_MODE.EDIT && editWidget.pages[editWidget.mode].eq.setRTA(b);
        mode == E_MODE.BIG && bmEqdyn.enabled && bmEqdyn.eq.pages[bmEqdyn.eq.mode].eq.setRTA(b);
      }
    }
    function parseBMessage(a) {
      a = a.split("^");
      if ("SYNC" == a[1]) {
        if (!settings.sync) return;
        var b = settings.sync_id || "SYNC_ID",
          c = a[2];
        if (c != b) return;
        b = a[3] | 0;
        setSelected(b, !1, !0);
      }
      "SYNC_VG" == a[1] && settings.sync && settings.sync_vca && ((b = settings.sync_id || "SYNC_ID"), (c = a[2]), c == b && ((b = a[3] | 0), -1 == b || activeViewGroup === b ? resumeLastActiveVG() : setViewGroup(b)));
    }
    function potentialTranslate(a) {
      a.startsWith("$") && ((a = a.substr(1)), (a = a in lang ? lang[a] : a));
      return a;
    }
    function dlgShow(a, b, c) {
      var d = document.getElementById("dlg_" + a);
      if ("undefined" == typeof d || null == d) (d = document.createElement("DIV")), (d.id = "dlg_" + a), (d.className = "DIM_DIALOG"), (d.style.display = "block"), document.body.appendChild(d);
      b = "<div><div><h1>" + potentialTranslate(b) + "</h1><br>";
      if (isDefined(c) && "object" == typeof c)
        for (var f = 0; f < c.length; f++) b += "<input type='button' class='BTN' onclick=\"dlgResult('dlg_" + a + "'," + f + ")\" value= '" + potentialTranslate(c[f]) + "' />&nbsp;&nbsp;&nbsp;&nbsp;";
      d.innerHTML = b + "</div></div>";
    }
    function dlgHide(a) {
      a = document.getElementById("dlg_" + a);
      "undefined" != typeof a && null != a && a.remove();
    }
    function dlgResult(a, b) {
      log("dlgResult: " + a + " " + b);
      sendMessage("DLGRESULT^" + a + "^" + b);
      dlgHide(a.replace("dlg_", ""));
    }
    function emulate() {
      for (var a = getValue("mgmask"), b = checkBit(a, MUTEALL_BIT_IDX), c = 0; 8 > c; c++) {
        var d = randomOf(allStrips.length - 1),
          f = allStrips[d],
          e = 0.9 * Math.random(),
          g = 0.9 + 0.2 * Math.random();
        modalsWidget.pages[0].m.setValue(e, d);
        f.type == E_STRIP_TYPE.IN && gainStrips[f.subId].setVUPre(e);
        var d = f.getNameValue("mute"),
          h = f.getNameValue("forceunmute"),
          k = f.getNameValue("mgmask"),
          m = checkBit(a, MUTEFX_BIT_IDX) && f.type == E_STRIP_TYPE.FX,
          h = (a & k || b || m || d) && !h,
          d = f.getNameValue("mix"),
          d = h ? 0 : (d / zeroDbPos) * e,
          h = 0.1 * d;
        f.setVU(e, d, e * g, d * g, h, h * g, !0, !0);
      }
      0.4 < Math.random() &&
      ((e = 0.9 * Math.random()),
        (d = masterWidget.getNameValue("mix")),
        (g = 0.9 + 0.2 * Math.random()),
        (d = (d / zeroDbPos) * e),
        (h = 0),
        masterWidget.setVU2(e, d, e * g, d * g, h, h * g, !0, !0),
        (d = auxoutWidget.sl.value),
        (d = (d / zeroDbPos) * e),
        auxoutWidget.setVU(e, d, e * g, d * g, h, h * g, !0, !0),
        (d = fxoutWidget.sl.value),
        (d = (d / zeroDbPos) * e),
        fxoutWidget.setVU(e, d, e * g, d * g, h, h * g, !0, !0));
      if (mode == E_MODE.EDIT && selectedStrip.type == E_STRIP_TYPE.MASTER && 0.5 < Math.random()) {
        a = editWidget.pages[editWidget.E_MODE.fx].VUS;
        b = editWidget.pages[editWidget.E_MODE.fx].MUTES;
        f = editWidget.pages[editWidget.E_MODE.fx].SLIDERS;
        for (c = 0; c < a.length; c++) (e = b[c].state), (g = f[c].getVal()), (e = (g / zeroDbPos) * Math.random() * 1.002 * (e ? 0 : 1)), a[c].setValueExt(0, e);
        a = editWidget.pages[editWidget.E_MODE.fx].VUS2;
        for (c = 0; c < a.length; c++) (e = b[c].state), (g = f[c].getVal()), (e = (g / zeroDbPos) * Math.random() * 1.002 * (e ? 0 : 1)), a[c].setValueExt(0, e);
        a = editWidget.pages[editWidget.E_MODE.aux].VUS;
        b = editWidget.pages[editWidget.E_MODE.aux].MUTES;
        f = editWidget.pages[editWidget.E_MODE.aux].SLIDERS;
        for (c = 0; c < a.length; c++) (e = b[c].state), (g = f[c].getVal()), (e = (g / zeroDbPos) * Math.random() * 1.002 * (e ? 0 : 1)), a[c].setValueExt(0, e);
      }
      0.5 < Math.random() && ((e = precision(Math.random(), 4)), (c = precision(0.8 * e, 4)), (d = precision(0.2 * e, 4)), editWidget.pages[editWidget.E_MODE.dyn].setVU(e, c, d));
      if (mode == E_MODE.EDIT && selectedStrip.name == dataValue["var.rta"] + ".") {
        switch (editWidget.mode) {
          case editWidget.E_MODE.eqch:
          case editWidget.E_MODE.eqaux:
          case editWidget.E_MODE.eqm:
            break;
          default:
            return;
        }
        a = [];
        for (c = 0; 120 > c; c++) (e = 0.35 + 0.03 * Math.random()), a.push(e);
        editWidget.pages[editWidget.mode].eq.setRTA(a);
      }
    }
    var trd = 0,
      trStop = !1,
      co = 0;
    function trololo() {
      for (var a = 0; a < inStrips.length; a++) inStrips[a].setNameValue("mix", bound(((Math.cos(trd + 0.4 * a) + 1) / 2) * 0.7, 0, 1)), regUpdate(inStrips[a]);
      if (0 == co % 10) for (a = fxStrips[0].id; a < allStrips.length; a++) allStrips[a].setNameValue("mix", 0.7 * Math.random()), regUpdate(allStrips[a]);
      trd += 0.1;
      co++;
      trStop || setTimeout(trololo, 50);
    }
    function importFromJSON(a) {
      var b = JSON.parse(a);
      b.schema != dataValue.schema || b.type != dataValue.type || b.flavour != dataValue.flavour
        ? ((confOk.valueFunc = function () {
          importDataApply(b);
        }),
          showConfBox(lang.DIFF_SCHEMA_WARNING))
        : importDataApply(b);
    }
    function importDataApply(a) {
      var b = Object.keys(a);
      if (a.LOCAL) {
        var c = a.LOCAL;
        mixerWidget.showAll();
        settingsStorage.set("viewGroups", c.viewGroups);
        settingsStorage.set("viewGroupsNames", c.viewGroupsNames);
        settingsStorage.set("me", c.me);
        settingsStorage.set("meout", c.meout);
        settingsStorage.save();
        delete a.LOCAL;
      }
      for (var c = 0, d = b.length; c < d; c++) {
        var f = b[c];
        isDefined(dataValue[f]) && setValue(f, a[f]);
      }
      !isBlocked("shows") && (a = getValue("var.currentShow")) && (sendMessage(E_COMMANDS.SAVESHOW + "^" + a), setValue("var.unsaved.chsafes", 0));
      drawAll();
    }
    function prepareExportData() {
      for (var a = {}, b = Object.keys(dataValue), c = 0, d = b.length; c < d; c++) {
        var f = b[c];
        "mgmask" != f && (f.startsWith("var.") || f.startsWith("iso.") || f.startsWith("settings.") || f.endsWith(".safe") || f.endsWith(".iosyscmd") || (a[f] = dataValue[f]));
      }
      b = {};
      b.viewGroups = settings.viewGroups;
      b.viewGroupsNames = settings.viewGroupsNames;
      b.me = settings.me;
      b.meout = settings.meout;
      a.LOCAL = b;
      return a;
    }
    function importSnapshotFromFile() {
      var a = document.createElement("input");
      a.type = "file";
      a.accept = ".json";
      a.onchange = function () {
        var b = a.files[0],
          c = new FileReader();
        c.onload = function () {
          importFromJSON(c.result);
        };
        c.readAsText(b);
      };
      a.click();
    }
    function exportSnapshotToFile() {
      editOk.valueFunc = function () {
        var a = editBox2.value || "snapshot.json";
        a.contains(".json") || (a += ".json");
        var b = prepareExportData();
        Util.download(b, a);
      };
      showEditBox2(lang.FILE_NAME);
    }
    function copyChannel(a) {
      for (var b = Object.keys(dataValue), c = {}, d = 0, f = b.length; d < f; d++) b[d].startsWith(a) && (c[b[d]] = dataValue[b[d]]);
      return c;
    }
    function mixerToJson() {
      for (var a = [], b = 0; b < allStrips.length; b++) {
        var c = copyChannel(allStrips[b].name);
        a.push(c);
      }
      return "jsonToMixer('" + JSON.stringify(a) + "');";
    }
    function jsonToMixer(a) {
      a = JSON.parse(a);
      for (var b = 0; b < a.length; b++) {
        log(b);
        for (var c = a[b], d = Object.keys(c), f = 0; f < d.length; f++) {
          var e = d[f];
          setValueX(e, c[e]);
        }
      }
      drawAll();
    }
    function showData(a) {
      for (var b = Object.keys(dataValue), c = 0, d = b.length; c < d; c++) b[c].contains(a) && console.log(b[c] + ": " + dataValue[b[c]]);
    }
    function getKeys(a) {
      for (var b = [], c = Object.keys(dataValue), d = 0, f = c.length; d < f; d++) c[d].contains(a) && b.push(c[d]);
      return b;
    }
    PROGRAM_VERSION = "01/07/2017";
    APP_ID = "com.soundcraft.ui.tablet";
    PATTERNED = EMULATE = WEBSITE_MODE = DEPLOY = !1;
    SHOW_WIP = localStorage.getItem("SHOW_WIP");
    null == SHOW_WIP && (SHOW_WIP = !1);
    ROUTING_TEST_MODE = !1;
    VU_RANGE = 80;
    COMP_RANGE = 20;
    COMP_ZOOM = 2;
    COMP_SCALE = (COMP_RANGE / VU_RANGE) * COMP_ZOOM;
    GLOBAL_VU_FALL_SPEED = 0.01;
    GLOBAL_VU_FALL_ACC = GLOBAL_VU_FALL_SPEED / fps;
    GLOBAL_PEAK_FALL_SPEED = GLOBAL_VU_FALL_SPEED / 10;
    GLOBAL_PEAK_FALL_ACC = (GLOBAL_PEAK_FALL_SPEED / fps) * 2;
    SCROLL_SCALE = 1.5;
    TAP_TEMPO_MAX_GAP = 3100;
    TAP_TEMPO_AVG_FROM = 5;
    DBL_CLK_TIME = 350;
    HOLD_TIME = 600;
    CLIP_HOLD_TIME = PEAK_HOLD_TIME = 3e3;
    PHANTOM_ON_DELAY = 4e3;
    PHANTOM_OFF_DELAY = 17e3;
    mode = 0;
    HAVE_GATE = HAVE_REC = HAVE_HP = HAVE_LATENCY = HAVE_ISOLATION = HAVE_ROUTING = !1;
    HAVE_SYNC = !0;
    CASCADE_MODE = IS_UI_24 = HAVE_MTK = HAVE_MATRIX = !1;
    measures = { topWidgetHeight: 71, bottomWidgetHeight: 34, mixerStripWidth: 112, masterStripWidth: 127, mixerRightMargin: 127, vuWidth: 11, db0: 0.7647058823529421 };
    color = {
      bg: "#16181C",
      botBG: "#242424",
      buttonsBG: "#919497",
      tabStroke: "#535457",
      masterLabel: "#ECCA12",
      stripChLabel: "#C4C4C4",
      labelText: "#F9F9F9",
      labelTextSel: "#F9F9F9",
      eqLabel: "#EEEEEE",
      tabText: "#C8C9C9",
      tabTextSel: "#f9f9f9",
      vuBg: "#5E6168",
      ledText: "#00ffff",
      ledTextVCA: "#22E904",
      mLedText: "#E7E840",
      eqBg: "#18191D",
      eqBg2: "#18191D",
      graphMarks: "#8D8E90",
      yellow: "#BCA633",
      red: "#A83B3B",
      blue: "#3576B1",
      brown: "#B28741",
      green: "#47AF46",
      purple: "#8835b1",
      purple2: "#A14FCA",
      orange: "#b27635",
      gray: "#B0AFAF",
      black: "#060606",
      black2: "#181818",
      sub: "#ba5d81",
      modal: "#32ABBE",
      media: "#A8184B",
      white: "#f9f9f9",
      presetBg: "#232627",
      shadow: "#444",
      maxx: "#AB9A89",
      tvPhantom: "#3577b1",
      tvInvert: "#b37936",
      tvMute: "#b53636",
      tvMuteMG: "#e55",
      tvMuteUn: "#82C9DE",
      tvSolo: "#c3a72d",
      tvGray: "#555",
      tvClearSolo: "#ccaf2f",
      tvMuteALL: "#ba3838",
      tvMuteFX: "#387dba",
      tvInvertOff: "#4D4D5D",
      tvPhantomOff: "#4D4D5D",
      tvMuteOff: "#807B7B",
      tvSoloOff: "#80807B",
      EQ: "#A83B3B",
      DYN: "#47AF46",
      FX: "#3576B1",
      AUX: "#BCA633",
      MATRIX: "#b27635",
      LINEIN: "#BC2D1B",
      DIGI: "#bbb",
      CPA: "#207F51",
      INPUT: "#c4673a",
      vuPeak: "#b4b",
      grad1: null,
      grad2: null,
      grad3: null,
      grad4: null,
      grad5: null,
      grad6: null,
      gradMBL: null,
      panGrad: null,
      mPanGrad: null,
      gradTVInd: null,
      longClickMark: "rgba(200,200,200,0.5)",
      longClickMark2: "rgba(0,0,0,0.14)",
      me: "#FF9900",
      ARR2: " #FF3333 #F57A00 #FFFF00 #56DE43 #0099CD #AD2EE8 #DA007D #fefefe #888 #111".split(" "),
      ARR: " #111 #8B0000 #FF0000 #FFA500 #FFFF00 #56DE43 #0091C2 #9400D3 #808080 #FFFFFF #FF1493".split(" "),
      GATE: "#6D9F36",
      USB: "#C35353",
      LOCAL: "#D08561",
      SD: "#BCA633",
      AUTOMIX: "#aa3ed9",
      DAW: "#458DC8",
      vgText: "#60CAD1",
      mgText: "#E85A62",
      afsFixed: "#3333bb",
      afsLive: "#DBD23C",
      afsGraphPeakFixed: "rgba(51,51,187,0.6)",
      afsGraphPeakLive: "rgba(219,210,60,0.6)",
    };
    font = {
      stripChannel: "11pt open_sans_condensedbold",
      eqMarks: "12px open_sans_condensedbold",
      eqSlText: "15px open_sans_condensedbold",
      eqLabel: "14pt open_sans_condensedbold",
      tabText: "12pt open_sans_condensedbold",
      tabTextSel: "14pt open_sans_condensedbold",
      botChLabel: "14pt open_sans_condensedbold",
      botMChLabel: "14pt open_sans_condensedbold",
      settingsLabel: "18px open_sans_condensedbold",
      settings: "16px open_sans_condensedbold",
      led: "18px umixled",
      topLed: "16px umixled",
      stripMarks: "9px open_sansbold",
      editbox: "18px open_sans_condensedbold",
      listItems: "13pt open_sans_condensedbold",
      time: "17pt open_sans_condensedbold, monospace",
      sans13pt: "13pt open_sans_condensedbold",
    };
    Shadow = { main: [color.black, 0, 1, 1], big: [color.black, 0, 2, 2], white: [color.white, 0, 1, 1] };
    allStrips = [];
    allStripsNoVca = [];
    auxStrips = [];
    inStrips = [];
    gainStrips = [];
    gainStrips2 = [];
    fxStrips = [];
    subStrips = [];
    mediaStrips = [];
    lineinStrips = [];
    vcaStrips = [];
    auxSendStrips = [];
    mtxSendStrips = [];
    fxSendStrips = [];
    bankIdx = 0;
    var activeViewGroup = -1,
      lastActiveViewGroup = -1,
      lastActiveViewPosition = -1;
    activeSubGroup = -1;
    currentSnapName = selectedShowName = inView = null;
    selectedChannel = 1;
    selectedChID = "";
    selectedMtxSend = selectedFxSend = selectedAuxSend = selectedStrip = null;
    prevSelChannel = 0;
    guiReady = hideHPAUX = stopUpdateMode = noData = !1;
    function configFunctions() {
      HAVE_REC = !!curSetup.rec;
      switch (curSetup.input) {
        case 8:
        case 12:
          (HAVE_LATENCY = HAVE_ROUTING = !1), (HAVE_HP = !0);
      }
      20 <= curSetup.input && ((HAVE_LATENCY = HAVE_ROUTING = IS_UI_24 = !0), (HAVE_HP = !1), (HAVE_MATRIX = HAVE_MTK = HAVE_ISOLATION = HAVE_GATE = !0));
      40 <= curSetup.input && (CASCADE_MODE = !0);
    }
    function loadResources() {
      res._font1 = "asdasd";
      (isLocal || CHEETAH_TEXTURE) &&
      "en" == settings.lang &&
      ((CHEETAH_TEXTURE = !1),
        (res["imga_1.png"] = loadImg("ch/imga_1.png", !1)),
        (res["imga_2.png"] = loadImg("ch/imga_2.png", !1)),
        (res["imga_3.png"] = loadImg("ch/imga_3.png", !1)),
        (res["imga_4.png"] = loadImg("ch/imga_4.png", !1)),
        (CHEETAH_TEXTURE = !0));
      res.topBarLeft = loadImg("TOPNAV-L.png");
      res.topBarTile = loadImg("TOPNAV-T3.png");
      res.topBarRight = loadImg("TOPNAV-R.png");
      res.topBarLED = loadImg("TOPNAV-LED.png");
      res.topBarLogo = loadImg("UMIX-OFF.png");
      res.topBarLogo2 = loadImg("UMIX-ON3.png");
      res.stripTop = loadImg("C-TOP.png");
      res.stripAuxTop2 = loadImg("C-AUX-TOP.png");
      res.stripAuxTop = loadImg("C-AUX-TOP-UPD.png");
      res.stripTile = loadImg("C-TILE.png");
      res.stripBottom = loadImg("C-BOT.png");
      res.stripLabel = loadImg("C-LABEL.png");
      res.auxStripTop = loadImg("AUX-SC-TOP.png");
      res.auxStripTile = loadImg("AUX-SC-TILE.png");
      res.auxStripBottom = loadImg("AUX-SC-BOTTOM.png");
      res.blStripTop = loadImg("BLANK-SC-TOP2.png");
      res.blStripTile = loadImg("BLANK-SC-TILE.png");
      res.blStripBottom = loadImg("BLANK-SC-BOTTOM.png");
      res.blStripLabel = loadImg("BLANK-SC-LABEL.png");
      res.mAUXStripTop = loadImg("AUX-M-TOP2.png");
      res.mStripTopNCS = loadImg("M-TOP-NCS.png");
      res.mStripTile = loadImg("M-TILE.png");
      res.mStripBottom = loadImg("M-BOTTOM.png");
      res.mStripBottomLabel = loadImg("M-LABEL.png");
      res.mStripMute_OFF = loadImg("M-MUTE-OFF.png");
      res.mStripMute_OFF_F = loadImg("M-MUTE-OFF_F.png");
      res.mStripMute_ON = loadImg("M-MUTE-ON.png");
      res.mStripSolo_OFF = loadImg("M-SOLO-OFF.png");
      res.mStripSolo_ON = loadImg("M-SOLO-ON.png");
      res.fader = loadImg("FADER-SILVER2.png", !0);
      res.redFader = loadImg("FADER-RED2.png", !0);
      res.blueFader = loadImg("FADER_BLUE.png", !0);
      res.greenFader = loadImg("SLIDER_GREEN.png", !0);
      res.subFader = loadImg("FADER_PINK.png", !0);
      res.auxFader = loadImg("FADER_YELLOW.png", !0);
      res.mtxFader = loadImg("FADER-ORANGE.png", !0);
      res.gainFader = loadImg("FADER_UI_B.png", !0);
      res.fxFader = loadImg("FADER-FX3.png", !0);
      res.fxFader_p = loadImg("FADERP-FX2.png", !0);
      res.fxFader_o = loadImg("FADERO-FX2.png", !0);
      res.fxFader_g = loadImg("FADERG-FX2.png", !0);
      res.fxFader_b = loadImg("FADERB-FX2.png", !0);
      res.panSlider = loadImg("PAN-SLIDER.png", !0);
      res.presetLED = loadImg("LED-PRESET.png");
      res.peakOFF = loadImg("PEAK-OFF.png", !0);
      res.peakON = loadImg("PEAK-ON.png", !0);
      res.vuTexture = loadImg("M VU TILE5.png", !0);
      res.bMixGainOff = loadImg("MIXG-OFF.png", !0);
      res.bMixGainOn = loadImg("MIX_B100.png", !0);
      res.bMixGain2 = loadImg("MIXG-GAIN.png", !0);
      res.bTVOff = loadImg("TV-OFF.png", !0);
      res.bTVOn = loadImg("TV-ON.png", !0);
      res.bFXOff = loadImg("FXS-OFF.png", !0);
      res.bFXOn = loadImg("FXS-ON.png", !0);
      res.bAUXOff = loadImg("AUXS-OFF.png", !0);
      res.bAUXOn = loadImg("AUX-BTN_Y1.png", !0);
      res.bEDITOff = loadImg("EDT-OFF.png", !0);
      res.bEDIT_T = loadImg("EDT-ON_T.png", !0);
      res.bSettingsOff = loadImg("SETTINGS-OFF.png", !0);
      res.bSettingsOn = loadImg("SETTINGS-ON.png", !0);
      res.bPlayerOff = loadImg("AUD-BTN-OFF.png", !0);
      res.bPlayerOn = loadImg("AUD-BTN-ON.png", !0);
      res.bMuteOff = loadImg("MUTE-SC-OFF.png", !0);
      res.bMuteOff_F = loadImg("MUTE-SC-OFF_F.png", !0);
      res.bMuteOn = loadImg("MUTE-SC-ON.png", !0);
      res.bPre = loadImg("PRE-OFF.png", !0);
      res.bPost = loadImg("POST-ON_g.png", !0);
      res.bSoloOff = loadImg("SOLO-SC-OFF.png", !0);
      res.bSoloOn = loadImg("SOLO-SC-ON.png", !0);
      res.bF1Off = loadImg("F1-OFF.png");
      res.bF1On = loadImg("F1-ON.png");
      res.bF2Off = loadImg("F2-OFF.png");
      res.bF2On = loadImg("F2-ON.png");
      res.SSUPD_ON = loadImg("SAVE-ON.png");
      res.SSUPD_OFF = loadImg("SAVE-OFF.png");
      res.SS_ON = loadImg("SAVEAS-ON.png");
      res.SS_OFF = loadImg("SAVEAS-OFF.png");
      res.RECS_STOP = loadImg("RECS-STOP.png");
      res.RECS_OFF = loadImg("RECS-OFF.png");
      res.PLAYS_STOP = loadImg("PLAYS-STOP.png");
      res.PLAYS_OFF = loadImg("PLAYS-OFF.png");
      res.bPhantomOff = loadImg("PHANTOM-OFF.png", !0);
      res.bPhantomOn = loadImg("PHANTOM-ON.png", !0);
      res.b48Off = loadImg("48V-OFF.png", !0);
      res.b48On = loadImg("48V-ON.png", !0);
      res.hiz_off = loadImg("HIZ-OFF2.png", !0);
      res.hiz_on = loadImg("HIZ-ON2.png", !0);
      res.bPIOff = loadImg("PI-OFF.png", !0);
      res.bPIOn = loadImg("PI-ON.png", !0);
      res.bBMuteOff = loadImg("MUTE-L-BTN-OFF.png", !0);
      res.bBMuteOn = loadImg("MUTE-L-BTN-ON.png", !0);
      res.soTop = loadImg("SC-TOP.png");
      res.soTile = loadImg("SC-TILE.png");
      res.soBottom = loadImg("SC-BOTTOM.png");
      res.bINPUTS_OFF = loadImg("INPUTS-OFF.png");
      res.bINPUTS_ON = loadImg("INPUTS-ON.png");
      res.bFXRet_OFF = loadImg("FXRET-BTN-OFF.png");
      res.bFXRet_ON = loadImg("FXRET-BTN-ON.png");
      res.bMuteAll_OFF = loadImg("MUTE-ALL-OFF.png");
      res.bMuteAll_ON = loadImg("MUTE-ALL-ON.png");
      res.bMuteFX_OFF = loadImg("MUTE-FX-OFF.png");
      res.bMuteFX_ON = loadImg("MUTE-FX-ON.png");
      res.bMTA_OFF = loadImg("CMIX-OFF.png");
      res.bMTA_ON = loadImg("CMIX-ON.png");
      res.bMuteGr_OFF = loadImg("MUTEGR-BTN-OFF.png");
      res.bMuteGr_ON = loadImg("MUTEGR-BTN-ON.png");
      res.bAUXMast_OFF = loadImg("AUXM-BTN-OFF.png");
      res.bAUXMast_ON = loadImg("AUXM-BTN-ON2.png");
      res.bSUBGr_OFF = loadImg("SUBGR-BTN-OFF.png");
      res.bSUBGr_ON = loadImg("SUBGR-BTN-ON.png");
      res.bVIEWGr_OFF = loadImg("VIEWGR-BTN-OFF.png");
      res.bVIEWGr_ON = loadImg("VIEWGR-BTN-ON.png");
      res.bBYPASS_ON = loadImg("BYPASS-ON.png");
      res.bBYPASS_OFF = loadImg("BYPASS-OFF.png");
      res.bRESET_ON = loadImg("RESET-ON.png");
      res.bRESET_OFF = loadImg("RESET-OFF.png");
      res.bROOM_OFF = loadImg("ROOM-OFF.png");
      res.bROOM_ON = loadImg("ROOM-GR-ON.png");
      res.bHARDKNEE_OFF = loadImg("HARD-KNEE-OFF.png");
      res.bSOFTKNEE_ON = loadImg("SOFT-KNEE-ON.png");
      res.bEZEQ_ON = loadImg("EZ-ON.png");
      res.bEZEQ_OFF = loadImg("EZ-BTN-OFF.png");
      res.eqHFaderGray = loadImg("SLIDER_SILVER_H.png", !0);
      res.eqVFaderGray = loadImg("FADER_UI_B.png", !0);
      res.eqVFaderRed = loadImg("SLIDER_RED.png", !0);
      res.eqVFaderGreen = loadImg("SLIDER_GREEN.png", !0);
      res.eqVFaderOrange = loadImg("SLIDER_PEW.png", !0);
      res.eqVFaderBlue = loadImg("SLIDER_BLUE.png", !0);
      res.eqVFaderPurple = loadImg("SLIDER_PURPLE.png", !0);
      res.eqVFaderYellow = loadImg("SLIDER_YELLOW.png", !0);
      res.fxLEDb = loadImg("FX-B-LED.png", !0);
      res.auxsLED = loadImg("AUXS-LED.png", !0);
      (settings.bigSlideOut && IS_UI_24) ||
      ((res.b1 = loadImg("nr/NR1-OFF.png")),
        (res.b2 = loadImg("nr/NR2-OFF.png")),
        (res.b3 = loadImg("nr/NR3-OFF.png")),
        (res.b4 = loadImg("nr/NR4-OFF.png")),
        (res.b5 = loadImg("nr/NR5-OFF.png")),
        (res.b6 = loadImg("nr/NR6-OFF.png")),
        (res.b1R = loadImg("nr/NR1-RED-ON.png")),
        (res.b2R = loadImg("nr/NR2-RED-ON.png")),
        (res.b3R = loadImg("nr/NR3-RED-ON.png")),
        (res.b4R = loadImg("nr/NR4-RED-ON.png")),
        (res.b5R = loadImg("nr/NR5-RED-ON.png")),
        (res.b6R = loadImg("nr/NR6-RED-ON.png")),
        (res.b1B = loadImg("nr/NR1-BLUE-ON.png")),
        (res.b2B = loadImg("nr/NR2-BLUE-ON.png")),
        (res.b3B = loadImg("nr/NR3-BLUE-ON.png")),
        (res.b4B = loadImg("nr/NR4-BLUE-ON.png")),
        (res.b5B = loadImg("nr/NR5-BLUE-ON.png")),
        (res.b6B = loadImg("nr/NR6-BLUE-ON.png")));
      res.bTAP = loadImg("TAP-BLA-OFF.png", !0);
      res.bTAP_Pressed = loadImg("TAP-BLA-ON.png", !0);
      res.bTAPT_OFF = loadImg("TAPT-BTN_DLY-OFF.png", !0);
      res.bTAPT_ON = loadImg("TAPT-BTN_DLY-ON.png", !0);
      res.player_prev_on = loadImg("MEDIA-PREV-ON.png");
      res.player_prev_off = loadImg("MEDIA-PREV-OFF.png");
      res.player_next_on = loadImg("MEDIA-NEXT-ON.png");
      res.player_next_off = loadImg("MEDIA-NEXT-OFF.png");
      res.player_play = loadImg("MEDIA-PLAY.png");
      res.player_pause = loadImg("MEDIA-PAUSE.png");
      res.player_stop_on = loadImg("MEDIA-STOP-ON.png");
      res.player_stop_off = loadImg("MEDIA-STOP-OFF.png");
      res.player_rec_on = loadImg("MEDIA-REC-ON2.png");
      res.player_rec_off = loadImg("MEDIA-REC-OFF.png");
      res.lex_delay_a = loadImg("LEX-DA.png");
      res.lex_reverb = loadImg("LEX-REV.png");
      res.lex_chorus = loadImg("LEX-CH.png");
      res.lex_room = loadImg("LEX-RM.png");
      res.lex_tap_off = loadImg("LEX_TAP_OFF.png");
      res.lex_tap_on = loadImg("LEX_TAP_ON.png");
      res.lock = loadImg("lock_3.png", !0);
      res.RTA_OFF = loadImg("RTA_OFF.png");
      res.RTA_ON = loadImg("RTA_ON.png");
      res.DESS_OFF = loadImg("DES-OFF.png");
      res.DESS_ON = loadImg("DES-ON.png");
      res.lex = loadImg("lex.png");
      res.dbx = loadImg("dbx.png");
      res.dbx_logo = loadImg("dbx_logo.png");
      res.lex_rev = loadImg("lex_logo.png");
      res.lex_cho = loadImg("lex_cho.png");
      res.lex_dly = loadImg("lex_dly.png");
      res.lex_rmlogo = loadImg("lex_rmlogo.png");
      res.DIGI_PRE = loadImg("DIGI_AM.png");
      res.digitech_logo = loadImg("DIGITECH_LOGO.png");
      res.AFS2LOGO = loadImg("AFS2LOGO.png");
      res.OFF_OFF = loadImg("OFF-OFF.png");
      res.OFF_ON = loadImg("OFF-ON.png");
      res.ON_ON = loadImg("ON-ON.png");
      res.SETUP_OFF = loadImg("SETUP-OFF.png");
      res.SETUP_ON = loadImg("SETUP-ON.png");
      res.AFSON_ON = loadImg("AFSON-ON2.png");
      res.AFSON_OFF = loadImg("AFSON-OFF2.png");
      res.MOME_OFF = loadImg("MOME-OFF.png");
      res.MOME_ON = loadImg("MOME-ON.png");
      res.AMP_D = loadImg("DIGIAMP_A.png");
      res.AMP_G = loadImg("AMP-GREY.png");
      res.CAB_D = loadImg("DIGICAB_A2.png");
      res.CAB_G = loadImg("SPKR-GREY.png");
      res.inv_pic = loadImg("picto_gr2.png", !0);
      res.about = loadImg("SCLOGO_B.png");
      res.pedal_grey = loadImg("PEDAL-GREY.png");
      res.pedal_light = loadImg("PEDAL-LIGHT-ON.png");
      res.bg = loadImg("PATTERN_DNS.png");
      res.bolt_icon = loadImg("BOLT_ICON.png");
      res.cl_s_btn_off = loadImg("CL_BTN_OFF.png");
      res.cl_s_btn_on = loadImg("CL_BTN_ON.png");
      res.postproc = loadImg("PP-OFF.png");
      res.preproc = loadImg("PP-ONO.png");
      res.FX_BTN_OFF = loadImg("FX_BTN_OFF.png");
      res.FX_BTN_PUR = loadImg("FX_BTN_PUR.png");
      res.FX_BTN_OR = loadImg("FX_BTN_OR.png");
      res.FX_BTN_GR = loadImg("FX_BTN_GR.png");
      res.FX_BTN_BLU = loadImg("FX_BTN_BLU.png");
      res.PRV_SNP_ON = loadImg("PRV-SNP-ON.png");
      res.PRV_SNP_OFF = loadImg("PRV-SNP-OFF.png");
      res.NXT_SNP_ON = loadImg("NXT-SNP-ON.png");
      res.NXT_SNP_OFF = loadImg("NXT-SNP-OFF.png");
      res.MTK_PLAY = loadImg("MTRK-PLAY.png");
      res.MTK_STOP = loadImg("MTK-STOP.png");
      res.MTK_REC_ON = loadImg("MTK-REC-ON.png");
      res.MTK_REC_OFF = loadImg("MTK-REC-OFF.png");
      res.SO2_TOP = loadImg("SO-TOP.png");
      res.SO2_TILE = loadImg("SO-TILE.png");
      res.SO2_BOTTOM = loadImg("SO-BOTTOM.png");
      res.SO_M_BTN_TUR = loadImg("SO-M-BTN-TUR.png");
      res.SO_M_BTN_RED = loadImg("SO-M-BTN-RED.png");
      res.SO_M_BTN_PNK = loadImg("SO-M-BTN-PNK.png");
      res.SO_M_BTN_OFF = loadImg("SO-M-BTN-OFF.png");
      res.SO_M_BTN_BLU = loadImg("SO-M-BTN-BLU.png");
      res.SO_L_BTN_TUR = loadImg("SO-L-BTN-TUR.png");
      res.SO_L_BTN_RED = loadImg("SO-L-BTN-RED.png");
      res.SO_L_BTN_OFF = loadImg("SO-L-BTN-OFF.png");
      res.SO_B_BTN_YLW = loadImg("SO-B-BTN-YLW.png");
      res.SO_B_BTN_PNK = loadImg("SO-B-BTN-PNK.png");
      res.SO_B_BTN_BLU = loadImg("SO-B-BTN-BLU.png");
      res.SO_B_BTN_GRE = loadImg("SO-B-BTN-GRE.png");
      res.SO_B_BTN_OFF = loadImg("SO-B-BTN-OFF.png");
      res.FFUNC_OFF = loadImg("SO-S-SLV.png");
      res.FFUNC_RED = loadImg("SO-S-RED.png");
      res.FFUNC_GRE = loadImg("SO-S-GRE.png");
      res.FFUNC_YLW = loadImg("SO-S-YLW.png");
      res.FFUNC_BLU = loadImg("SO-S-BLU.png");
      res.FFUNC_B_OFF = loadImg("SO-M-SLV.png");
      res.FFUNC_B_YLW = loadImg("SO-M-YLW.png");
      res.FFUNC_B_RED = loadImg("SO-M-RED.png");
      res.FFUNC_B_GRE = loadImg("SO-M-GRE.png");
      res.FFUNC_B_BLU = loadImg("SO-M-BLU.png");
      res.SPEAKER_MINUS = loadImg("SPEAKER_OFF.png");
      res.LINK = loadImg("CHAIN.png");
      IS_UI_24 &&
      settings.bigSlideOut &&
      ((res.VCA_ON = loadImg("VCA_ON.png")),
        (res.VCA_OFF = loadImg("VCA_OFF.png")),
        (res.SUBG_ON = loadImg("SUBG_ON.png")),
        (res.SUBG_OFF = loadImg("SUBG_OFF.png")),
        (res.HOME_ON = loadImg("HOME_ON.png")),
        (res.HOME_OFF = loadImg("HOME_OFF.png")),
        (res.FXM_ON = loadImg("FXM_ON.png")),
        (res.FXM_OFF = loadImg("FXM_OFF.png")),
        (res.AUXM_ON = loadImg("AUXM_ON.png")),
        (res.AUXM_OFF = loadImg("AUXM_OFF.png")));
      IS_UI_24 &&
      ((res.EQ_B_OFF = loadImg("EQ_B_OFF.png")),
        (res.EQ_B_GREEN = loadImg("EQ_B_GREEN.png")),
        (res.EQ_B_YELLOW = loadImg("EQ_B_YELLOW.png")),
        (res.EQ_B_ORANGE = loadImg("EQ_B_ORANGE.png")),
        (res.EQ_B_PINK = loadImg("EQ_B_PINK.png")),
        (res.EQ_B_PINK2 = loadImg("EQ_B_PINK2.png")),
        (res.CPA_LINK = loadImg("CPA_LINK.png")),
        (res.BMSL_SILVER = loadImg("BMSL_SILVER.png")),
        (res.BMSL_SILVER_V = loadImg("BMSL_VERTICAL.png")),
        (res.BMSL_GOLD = loadImg("BMSL_GOLD.png")),
        (res.BMSL_RED = loadImg("BMSL_RED.png")),
        (res.BMSL_GREEN = loadImg("BMSL_GREEN.png")),
        (res.BMSL_BROWN = loadImg("BMSL_BROWN.png")),
        (res.BMSL_BLUE = loadImg("BMSL_BLUE.png")),
        (res.BMSL_PURPLE = loadImg("BMSL_PURPLE.png")),
        (res.BMSL_LEX = loadImg("BMSL_LEX.png")));
      checkFonts();
    }
    var topWidget = null,
      bottomWidget = null,
      masterWidget = null,
      mixerWidget = null,
      gainMixer = null,
      auxWidget = null,
      fxSendsWidget = null,
      editWidget = null,
      editStripWidget = null,
      settingsWidget = null,
      playerStrips = null,
      playerLabels = null,
      slideOutWidget = null,
      auxoutWidget = null,
      fxoutWidget = null,
      modalsWidget = null,
      playerWidget = null,
      fsGEQ = null,
      fsPEQ = null,
      pongGame = null,
      moremeWidget = null,
      networkWidget = null,
      bigWidget = null,
      udpPage = null,
      bmMeters = null,
      bmSlideOut = null,
      bmEqdyn = null,
      bmSends = null,
      bmMode = 0;
    showsPopup = metersWidget = null;
    function settingsCheck() {
      curSetup.rec || (settings.f1func == E_FFUNC.REC && settingsStorage.set("f1func", E_FFUNC.PLAY), settings.f2func == E_FFUNC.REC && settingsStorage.set("f2func", E_FFUNC.NEWSNAP));
      1 > settings.drawRate && settingsStorage.set("drawRate", 1);
      settings.customScaleEnabled = !1;
      IS_UI_24 || ((settings.customStripWidthEnabled = !1), (settings.eqStrip = !1));
    }
    bgPattern = color.eqBg;
    function initGUI() {
      IMG_LOAD_0 = null;
      1080 <= screenHeight && ((BM_TOP_H = 90), (BM_BOT_H += 30));
      WEBSITE_MODE && loadDemoUserSnapshot();
      if ("ch" == settings.lang) for (var a = Object.keys(font), b = 0; b < a.length; b++) font[a[b]] = font[a[b]].replace("open_sans_condensedbold", "Tahoma");
      isLocal && initLocal();
      if ((PATTERNED = isLocal ? !1 : settings.patterned)) (bgPattern = createPattern(res.bg, "repeat")), (color.eqBg = bgPattern);
      sendTime();
      setInterval(function () {
        sendMessage("ALIVE");
      }, 1e3);
      settingsCheck();
      initGradients();
      HAVE_HP && (hideHPAUX = 0 == getValue("var.hpaux"));
      topWidget = new TopWidget();
      auxoutWidget = new AUXOUTStrip();
      fxoutWidget = new FXOUTStrip();
      bottomWidget = new BottomWidget2();
      mixerWidget = new MainMixer();
      gainMixer = new GainMixer();
      selectedStrip = inStrips[0];
      masterWidget = new MasterStrip();
      slideOutWidget = IS_UI_24 && settings.bigSlideOut ? new SlideOut2() : new SlideOut();
      auxWidget = new AUXSendsPage();
      fxSendsWidget = new FXSENDSPage();
      settingsWidget = new SETTINGS();
      modalsWidget = new MODALS();
      playerStrips = new MEDIA_STRIPS();
      playerLabels = new MEDIA_LABELS();
      playerWidget = IS_UI_24 ? new PLAYER_PAGE() : new PLAYER();
      editWidget = new EDIT_PAGE();
      editStripWidget = new EDIT_STRIP();
      moremeWidget = new MOREME();
      pongGame = new PONG();
      udpPage = new UDP_CUSTOM_PAGE();
      IS_UI_24 && settings.bigD && ((bmSlideOut = new BM_SLIDEOUT()), (bmEqdyn = new BM_EQDYN()), (bmSends = new BM_SENDS()), (bmMeters = new BM_METERS()));
      prepareF1F2();
      resumeShowGroup();
      guiReady = !0;
      mode = E_MODE.MIX;
      isPortrait && settings.moremeportrait ? setMode(E_MODE.MOREME, 2) : setMode(E_MODE.MIX);
      syncHPAUX();
      selectFirstVisible();
      setTimeout(updateSomeStuff, 500);
      setInterval(updateSomeStuff, 3e3);
      WEBSITE_MODE && setInterval(saveDemoUserSnapshot, 5e3);
      EMULATE && setInterval(emulate, 50);
    }
    function saveDemoUserSnapshot() {
      settingsStorage.put("DEMO_SNAP_VER", "ui" + curSetup.input);
      settingsStorage.put("DEMO_SNAP_DATA", dataValue);
    }
    function loadDemoUserSnapshot() {
      var a = settingsStorage.get("DEMO_SNAP_VER"),
        b = settingsStorage.get("DEMO_SNAP_DATA");
      a == "ui" + curSetup.input && b && "object" === typeof b && Object.extend(dataValue, b);
    }
    var keyboard = null,
      keyboardCheckTimer = null;
    function initLocal() {
      isLocal &&
      isDefined($j) &&
      ($j("#eb2").keyboard({
        layout: "custom",
        customLayout: {
          normal: ["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}", "q w e r t y u i o p [ ] \\", "a s d f g h j k l ; ' {accept}", "{shift} z x c v b n m , . / {shift}", "{accept} {alt} {space} {alt} {cancel}"],
          shift: ["~ ! @ # $ % ^ & * ( ) _ + {bksp}", "Q W E R T Y U I O P { } |", 'A S D F G H J K L : " {accept}', "{shift} Z X C V B N M < > ? {shift}", "{accept} {alt} {space} {alt} {cancel}"],
          alt: ["~ ¡ ² ³ ¤ € ¼ ½ ¾ ‘ ’ ¥ × {bksp}", "ä å é ® þ ü ú í ó ö « » ¬", "á ß ð f g h j k ø ¶ ´ {accept}", "{shift} æ x © v b ñ µ ç > ¿ {shift}", "{accept} {alt} {space} {alt} {cancel}"],
          "alt-shift": ["~ ¹ ² ³ £ € ¼ ½ ¾ ‘ ’ ¥ ÷ {bksp}", "Ä Å É ® Þ Ü Ú Í Ó Ö « » ¦", "Ä § Ð F G H J K Ø ° ¨ {accept}", "{shift} Æ X ¢ V B Ñ µ Ç . ¿ {shift}", "{accept} {alt} {space} {alt} {cancel}"],
        },
        display: { accept: "OK", cancel: "CANCEL", shift: "SHIFT", alt: "ALT", bksp: "←" },
        userClosed: !0,
        usePreview: !1,
        cancelClose: !1,
        accepted: function (a, b, c) {
          editOk.valueFunc();
          hideEditBox2();
        },
        canceled: function (a, b, c) {
          hideEditBox2();
        },
      }),
        (keyboard = $j("#eb2").getkeyboard()),
        (keyboardCheckTimer = setInterval(function () {
          "none" == editContainer.style.display && keyboard.isVisible() && keyboard.close();
          "block" != editContainer.style.display || keyboard.isVisible() || (keyboard.reveal(), editBox2.focus(), editBox2.setSelectionRange(0, 9999));
        }, 250)));
    }
    function onDataINIT() {
      updateSomeStuff();
    }
    function updateSomeStuff() {
      updateCurSnapList();
    }
    function updateCurSnapList() {
      var a = getValue("var.currentShow");
      a && sendMessage(E_COMMANDS.SNAP_LIST + "^" + a);
    }
    function selectFirstVisible() {
      for (var a = 0, b = 0; b < allStrips.length; b++)
        if (allStrips[b].enabled) {
          a = b;
          break;
        }
      setSelected(a);
    }
    function resumeShowGroup() {
      setViewGroup(settings.currentViewGroup);
    }
    function setViewGroup(a) {
      if (-1 != a)
        if (300 <= a && IS_UI_24) mixerWidget.showVCA(bound(a - 300, 0, 6));
        else if (200 <= a) mixerWidget.showSG(bound(a - 200, 0, 6));
        else if (100 <= a)
          switch (a) {
            case E_VG.INPUTS:
              mixerWidget.showInputsGroup();
              break;
            case E_VG.FXS:
              mixerWidget.showFxGroup();
              break;
            case E_VG.SUBS:
              mixerWidget.showSubGroup();
              break;
            case E_VG.AUXS:
              mixerWidget.showAuxGroup();
              break;
            case E_VG.VCAS:
              mixerWidget.showVCAGroup();
          }
        else mixerWidget.showViewGroup(a);
    }
    function goBack() {
      setMode(lastMode);
    }
    lastMode = E_MODE.MIX;
    modeHistory = [];
    function modeBack() {
      isPortrait || (2 > modeHistory.length ? setMode(E_MODE.MIX) : setMode(modeHistory.pop()));
    }
    function nextBMode() {
      setBMode(2 == bmMode ? 0 : bmMode + 1);
    }
    function setBMode(a) {
      bmMode = a;
      if (mode == E_MODE.BIG) {
        gainMixer.hide();
        bmEqdyn.hide();
        bmSends.hide();
        switch (a) {
          case 0:
            gainMixer.show();
            break;
          case 1:
            bmEqdyn.show();
            break;
          case 2:
            bmSends.show();
        }
        drawAll();
      }
    }
    function setMode(a, b) {
      log("=== " + objKeyByValue(E_MODE, mode) + " -> " + objKeyByValue(E_MODE, a));
      if (null != mixerWidget) {
        settings.bigD && a == E_MODE.MIX && (a = E_MODE.BIG);
        if (isPortrait)
          switch (a) {
            case E_MODE.MIX:
            case E_MODE.BIG:
            case E_MODE.GAIN:
            case E_MODE.AUX:
            case E_MODE.FXSENDS:
            case E_MODE.MOREME:
              break;
            default:
              return;
          }
        lastMode = mode;
        modeHistory.push(mode);
        mode = a;
        clearInterval(ticker);
        for (var c = 0; c < widgets.length; c++) widgets[c].hide();
        topWidget.show();
        masterWidget.show();
        bottomWidget.show();
        mixerWidget.mode != E_MODE.MIX && mixerWidget.setMode(E_MODE.MIX);
        switch (a) {
          case E_MODE.UDP:
            masterWidget.hide();
            bottomWidget.hide();
            udpPage.show();
            break;
          case E_MODE.BIG:
            bmMeters.show();
            switch (bmMode) {
              case 0:
                gainMixer.show();
                break;
              case 1:
                bmEqdyn.show();
                break;
              case 2:
                bmSends.show();
            }
            slideOutWidget.show();
            mixerWidget.show();
            break;
          case E_MODE.MIX:
            mixerWidget.show();
            settings.masterHide && masterWidget.hide();
            if (settings.pinSlideOut || (isDefined(b) && 2 != b)) settings.masterHide && masterWidget.show(), slideOutWidget.show();
            break;
          case E_MODE.GAIN:
            settings.masterHide && masterWidget.hide();
            gainMixer.show();
            break;
          case E_MODE.EDIT:
            editStripWidget.show();
            editWidget.show();
            break;
          case E_MODE.AUX:
            settings.masterHide && masterWidget.hide();
            if (settings.pinSlideOutX || (isDefined(b) && 2 != b)) settings.masterHide && masterWidget.show(), slideOutWidget.show();
            auxoutWidget.show();
            auxWidget.show();
            break;
          case E_MODE.FXSENDS:
            settings.masterHide && masterWidget.hide();
            if (settings.pinSlideOutX || (isDefined(b) && 2 != b)) settings.masterHide && masterWidget.show(), slideOutWidget.show();
            fxSendsWidget.show();
            fxoutWidget.show();
            break;
          case E_MODE.SETTINGS:
            masterWidget.hide();
            bottomWidget.hide();
            settingsWidget.show();
            break;
          case E_MODE.MODALS:
            bottomWidget.hide();
            modalsWidget.show();
            break;
          case E_MODE.PLAYER:
            bottomWidget.hide();
            playerWidget.show();
            IS_UI_24 ? 0 == playerWidget.mode && (playerStrips.show(), playerLabels.show()) : (playerStrips.show(), playerLabels.show());
            break;
          case E_MODE.PONG:
            pongGame.show();
            break;
          case E_MODE.MOREME:
            slideOutWidget.hide(), bottomWidget.hide(), masterWidget.hide(), isDefined(b) && 2 == b && topWidget.hide(), auxoutWidget.show(), moremeWidget.show();
        }
        geomAll();
        bottomWidget.upd();
        drawAll("setMode(" + objKeyByValue(E_MODE, a) + ")");
      }
    }
    function setSelected(a, b, c) {
      if (!isDefined(a) || null == a || (!allStrips[a] && -1 != a)) return !1;
      var d = selectedStrip || inStrips[0];
      c = c || !1;
      if (-1 == a && -1 == selectedChannel && b) return setSelected(prevSelChannel);
      if (selectedChannel == a) return !1;
      -1 != a && (prevSelChannel = a);
      -1 == a ? ((selectedChannel = -1), (selectedStrip = masterWidget), (selectedChID = masterWidget.name.slice(0, -1))) : ((selectedChannel = a), (selectedStrip = allStrips[a]), (selectedChID = selectedStrip.name.slice(0, -1)));
      mode == E_MODE.EDIT && (editStripWidget.setStrip(), editWidget.upd(), regUpdate(editStripWidget));
      regUpdate(selectedStrip);
      regUpdate(d);
      regUpdate(bottomWidget);
      regUpdate(masterWidget);
      mode == E_MODE.PLAYER && regUpdate(playerLabels);
      if (mode == E_MODE.GAIN || mode == E_MODE.BIG) regUpdate(findByID(gainStrips, d.id)), regUpdate(findByID(gainStrips, selectedStrip.id));
      mode == E_MODE.AUX &&
      (regUpdate(findByID(auxSendStrips, d.id)),
        regUpdate(findByID(auxSendStrips, selectedStrip.id)),
        -1 == d.id || -1 == selectedStrip.id ? regUpdate(auxWidget) : (regUpdate(findByID(mtxSendStrips, d.id)), regUpdate(findByID(mtxSendStrips, selectedStrip.id))));
      mode == E_MODE.FXSENDS && ((b = fxSendsWidget.page.strips), regUpdate(findByID(b, d.id)), regUpdate(findByID(b, selectedStrip.id)));
      auxoutWidget.enabled && regUpdate(auxoutWidget);
      fxoutWidget.enabled && regUpdate(fxoutWidget);
      mode == E_MODE.BIG && (bmEqdyn.enabled && bmEqdyn.upd(), bmSends.enabled && bmSends.upd(), regUpdate(bmEqdyn), regUpdate(bmSends));
      settings.sync && !c && sendMessage("BMSG^SYNC^" + settings.sync_id + "^" + a);
      return !0;
    }
    function findByID(a, b) {
      for (var c = 0; c < a.length; c++) if (a[c].id == b) return a[c];
      return null;
    }
    function findStripByKey(a) {
      a.endsWith(".") || (a += ".");
      if (a.contains("m.")) return masterWidget;
      for (var b = 0; b < allStrips.length; b++) if (allStrips[b].name == a) return allStrips[b];
    }
    function sendTime() {
      if ("127.0.0.1" != document.location.host && "#local" != document.location.hash) {
        var a = new Date().getTimezoneOffset();
        sendMessage("USERTIME^" + Date.now() + "^" + a);
      }
    }
    function toggleSlideOut() {
      mode != E_MODE.MIX && mode != E_MODE.GAIN && mode != E_MODE.AUX && mode != E_MODE.FXSENDS
        ? setMode(E_MODE.MIX, !0)
        : (slideOutWidget.enabled ? (settings.masterHide && masterWidget.hide(), slideOutWidget.hide()) : (settings.masterHide && masterWidget.show(), slideOutWidget.show()),
          geomAll(),
          drawAll("slideout " + slideOutWidget.enabled));
    }
    function initGradients() {
      color.grad1 = ctx.createLinearGradient(0, 0, 0, 7);
      color.grad1.addColorStop(0, "rgba(255,255,255,0.1)");
      color.grad1.addColorStop(1, "rgba(255,255,255,0)");
      color.grad2 = ctx.createLinearGradient(0, 7, 0, 0);
      color.grad2.addColorStop(0, "rgba(255,255,255,0.1)");
      color.grad2.addColorStop(1, "rgba(255,255,255,0)");
      color.grad3 = ctx.createLinearGradient(0, 0, 0, 5);
      color.grad3.addColorStop(0, "rgba(255,255,255,0.7)");
      color.grad3.addColorStop(0.15, "rgba(255,255,255,0.2)");
      color.grad3.addColorStop(1, "rgba(255,255,255,0)");
      color.grad4 = ctx.createLinearGradient(0, 5, 0, 0);
      color.grad4.addColorStop(0, "rgba(255,255,255,0.6)");
      color.grad4.addColorStop(0.2, "rgba(255,255,255,0.2)");
      color.grad4.addColorStop(1, "rgba(255,255,255,0)");
      color.grad5 = ctx.createLinearGradient(0, 0, 0, 20);
      color.grad5.addColorStop(0, "rgba(255,255,255,0.0)");
      color.grad5.addColorStop(1, "rgba(255,255,255,0.15)");
      color.grad6 = ctx.createLinearGradient(0, 0, 0, 20);
      color.grad6.addColorStop(0, "rgba(255,255,255,0.15)");
      color.grad6.addColorStop(0.6, "rgba(255,255,255,0.0)");
      color.gradMBL = ctx.createLinearGradient(0, 0, 123, 0);
      color.gradMBL.addColorStop(0, "rgba(255,255,255,0)");
      color.gradMBL.addColorStop(0.5, "rgba(255,255,255,0.2)");
      color.gradMBL.addColorStop(1, "rgba(255,255,255,0)");
      color.panGrad = ctx.createLinearGradient(0, 13, 0, 19);
      color.panGrad.addColorStop(0, "#00ffff");
      color.panGrad.addColorStop(1, "#0D6666");
      color.mPanGrad = ctx.createLinearGradient(0, 13, 0, 19);
      color.mPanGrad.addColorStop(0, "#ffff00");
      color.mPanGrad.addColorStop(1, "#666600");
      color.tvvuGrad = ctx.createLinearGradient(0, 82, 0, 0);
      color.tvvuGrad.addColorStop(0, "green");
      color.tvvuGrad.addColorStop(0.5, "yellow");
      color.tvvuGrad.addColorStop(1, "red");
      color.tvvuGrad2 = ctx.createLinearGradient(0, 82, 0, 0);
      color.tvvuGrad2.addColorStop(0, "#494");
      color.tvvuGrad2.addColorStop(0.5, "#aa3");
      color.tvvuGrad2.addColorStop(1, "#d44");
      color.stripGrad = ctx.createLinearGradient(0, 0, measures.mixerStripWidth, 0);
      color.stripGrad.addColorStop(0, "rgba(255,255,255,0)");
      color.stripGrad.addColorStop(0.5, "rgba(255,255,255,0.2)");
      color.stripGrad.addColorStop(1, "rgba(255,255,255,0)");
      color.grpeak = ctx.createLinearGradient(0, 6, 0, 0);
      color.grpeak.addColorStop(1, "#700");
      color.grpeak.addColorStop(0.3, "#f00");
      color.grpeak.addColorStop(0, "#f00");
    }
    IMG_LOAD_0 = null;
    function drawLoadingScreen() {
      var a = screenWidth,
        b = screenHeight;
      ctx.fillStyle = "#000000";
      ctx.fillRect(0, 0, a, b);
      a = isRetina ? "img2x/" : "img1x/";
      IMG_LOAD_0 = new Image();
      IMG_LOAD_0.onload = IL_LOADED;
      IMG_LOAD_0.src = a + "UI_SPLASH_D.png";
    }
    function IL_LOADED() {
      drawProgress(0);
      startLoadingTime = Date.now();
      CHK_START();
    }
    startLoadingTime = 0;
    function CHK_START() {
      1 == startLoading ? (Date.now(), loadResources()) : (0 == startLoading ? (drawProgress(-1), checkConnection()) : drawProgress(0), setTimeout(CHK_START, 1e3));
    }
    function drawProgress(a) {
      var b = screenWidth,
        c = screenHeight,
        d = 560 > c ? 0.8 : 1,
        f = (b / 2) | 0,
        e = ((b - IMG_LOAD_0.w() * d) / 2) | 0,
        g = ((c - IMG_LOAD_0.h() * d) / 2) | 0,
        g = g + 0;
      550 > c && (g -= 26);
      var h = (g + 40) | 0,
        f = ctx.createRadialGradient(f, h, 0, f, h, 500);
      f.addColorStop(0, "#1C2A34");
      f.addColorStop(1, "#000");
      ctx.fillStyle = "#000";
      ctx.fillRect(0, 0, b, c);
      ctx.fillStyle = f;
      ctx.fillRect(0, 0, b, c);
      drawImageScale(IMG_LOAD_0, e, g, d);
      c = (1 + (b - 338) / 2) | 0;
      d = g + IMG_LOAD_0.h() * d - 10;
      0 > a
        ? ((ctx.font = "bold 48pt open_sans_condensedbold"), (ctx.fillStyle = "#e33"), (ctx.textAlign = "center"), ctx.fillText(lang.OFFLINE, (b / 2) | 0, d + 28))
        : ((ctx.fillStyle = "#004040"),
          (ctx.shadowColor = "#004040"),
          (ctx.shadowBlur = 6),
          ctx.fillRect(c, d, 338, 5),
          (ctx.shadowColor = "#00BFBF"),
          (ctx.shadowBlur = 20),
          (ctx.shadowOffsetX = -1),
          (ctx.fillStyle = "#00BFBF"),
          ctx.fillRect(c, d, bound(Math.round(338 * a), 2, 338), 5),
          ctx.setShadow(null));
    }
    var UCA_W,
      UCA_H = 0;
    function updateCacheAll() {
      if (screenWidth != UCA_W || screenHeight != UCA_H)
        log("updateCacheAll()"),
          allStrips.forEach(function (a) {
            a.UPDATE_CACHE();
          }),
          auxSendStrips.forEach(function (a) {
            a.UPDATE_CACHE();
          }),
          fxSendStrips.forEach(function (a) {
            a.UPDATE_CACHE();
          }),
        auxWidget && auxWidget.page.strips[0].cachePaint(),
        fxSendsWidget && fxSendsWidget.page.strips[0].cachePaint(),
        slideOutWidget && slideOutWidget.cachePaint(),
          (UCA_W = screenWidth),
          (UCA_H = screenHeight);
    }
    isPortrait = !1;
    function onResize() {
      var a = screenWidth < screenHeight;
      log("onResize: " + screenWidth + "x" + screenHeight + "; guiReady: " + guiReady);
      a ? (isPortrait || onPortrait(), (isPortrait = !0)) : ((a = isPortrait), (isPortrait = !1), a && onLandscape());
      geomAll();
      updateCacheAll();
      drawAll("resize " + screenWidth + "x" + screenHeight);
    }
    function onLandscape() {
      log("onLandscape()");
      guiReady && (mode == E_MODE.MOREME || settings.moremeportrait) && modeBack();
    }
    function onPortrait() {
      log("onPortrait()");
      if (guiReady)
        if (settings.moremeportrait) setMode(E_MODE.MOREME, 2);
        else
          switch (mode) {
            case E_MODE.BIG:
            case E_MODE.MIX:
            case E_MODE.GAIN:
            case E_MODE.AUX:
            case E_MODE.FXSENDS:
            case E_MODE.MOREME:
              break;
            default:
              setMode(E_MODE.MIX);
          }
    }
    function calcBPMfromArr(a) {
      if (2 > a.length) return -1;
      a = (a.last() - a[0]) / (a.length - 1);
      return Math.round(6e4 / a);
    }
    function getGlobalBpm(a) {
      a = a || !1;
      for (var b = 0, c = 0, d = !1, f = fxStrips.length - 1; 0 < f; f--) {
        var e = fxStrips[f].getNameValue("bpm");
        1 == fxStrips[f].getNameValue("fxtype") && settings["tapbpmfx" + (f + 1)] && ((b = e), 0 != c && c != e && (d = !0), (c = e));
      }
      if (a) return b | 0;
      0 == b && (b = "...");
      return "" + b + (d ? "*" : "");
    }
    BPM_TAP_ARRAY = [];
    function bpmTapHandler(a) {
      isDefined(a) || (a = -1);
      var b = Date.now();
      if (0 == BPM_TAP_ARRAY.length) topWidget.led.setMsg(lang.KEEP_TAPPING), BPM_TAP_ARRAY.push(b);
      else if ((BPM_TAP_ARRAY.length > TAP_TEMPO_AVG_FROM && BPM_TAP_ARRAY.shift(), b - BPM_TAP_ARRAY.last() > TAP_TEMPO_MAX_GAP)) BPM_TAP_ARRAY.clear(), topWidget.led.setMsg(lang.KEEP_TAPPING), BPM_TAP_ARRAY.push(b);
      else if ((BPM_TAP_ARRAY.push(b), !(3 > BPM_TAP_ARRAY.length || ((b = calcBPMfromArr(BPM_TAP_ARRAY)), 10 > b))))
        switch ((topWidget.led.setMsg(b + " " + lang.BPM), a)) {
          case -1:
            for (a = 0; a < fxStrips.length; a++) settings["tapbpmfx" + (a + 1)] && fxStrips[a].setNameValue("bpm", b);
            break;
          case 0:
            fxStrips[0].setNameValue("bpm", b);
            break;
          case 1:
            fxStrips[1].setNameValue("bpm", b);
            break;
          case 2:
            fxStrips[2] && fxStrips[2].setNameValue("bpm", b);
            break;
          case 3:
            fxStrips[3] && fxStrips[3].setNameValue("bpm", b);
        }
    }
    function askBpm(a) {
      isDefined(a) || (a = -1);
      var b = [];
      switch (a) {
        case -1:
          for (var c = 0; c < fxStrips.length; c++) b.push(fxStrips[c]);
          break;
        case 0:
          b.push(fxStrips[0]);
          break;
        case 1:
          b.push(fxStrips[1]);
          break;
        case 2:
          fxStrips[2] && b.push(fxStrips[2]);
          break;
        case 3:
          fxStrips[3] && b.push(fxStrips[3]);
      }
      editOk.arr = b;
      editOk.valueFunc = function () {
        var a = editBox2.value;
        if (null != a && 0 != a.length && ((a = parseInt(a)), !isNaN(a)))
          if (20 > a || 400 < a) showPopupMsg(lang.OUT_OF_RANGE);
          else {
            for (var b = 0; b < this.arr.length; b++) settings["tapbpmfx" + (b + 1)] && this.arr[b].setNameValue("bpm", a);
            topWidget.led.setMsg(a + " " + lang.BPM);
            drawAll();
          }
      };
      a = -1 != a ? b[0].getNameValue("bpm") : getGlobalBpm(!0);
      showEditBox2(lang.ENTER_BPM, "" + a);
    }
    function prepareF1F2() {
      regUpdate(masterWidget);
    }
    function doFfunc(a) {
      if (EMULATE) showPopupMsg(lang.DEMO_VERSION);
      else
        switch (a) {
          case E_FFUNC.NEWSNAP:
            if (isBlocked("shows")) {
              showPopupMsg(lang.LOCKED, 800);
              break;
            }
            settingsWidget.setMode(2);
            setMode(E_MODE.SETTINGS);
            showsPage.bSNAPSAVE.click();
            break;
          case E_FFUNC.UPDCURSNAP:
            if (isBlocked("shows")) {
              showPopupMsg(lang.LOCKED, 800);
              break;
            }
            a = getValue("var.currentShow");
            var b = getValue("var.currentSnapshot");
            if (!a || !b) {
              showPopupMsg(lang.NO_CURRENT_SNAPSHOT, 1e3);
              break;
            }
            confOk.valueFunc = function () {
              var a = getValue("var.currentShow"),
                b = getValue("var.currentSnapshot");
              a && b ? sendMessage(E_COMMANDS.SNAP_SAVE + "^" + a + "^" + b) : showPopupMsg(lang.NO_CURRENT_SNAPSHOT, 1e3);
            };
            showConfBox(lang.UPDATE_CURRENT_SNAPSHOT);
            break;
          case E_FFUNC.PLAY:
            if (isBlocked("player")) {
              showPopupMsg(lang.LOCKED, 800);
              break;
            }
            if ((a = 2 == getValue("var.currentState"))) player2track.STOP.onPress();
            else player2track.PLAY.onToggleUp();
            break;
          case E_FFUNC.REC:
            toggleRec();
            break;
          case E_FFUNC.MTK_REC:
            toggleMTKRec();
            break;
          case E_FFUNC.MTK_PLAY:
            if (isBlocked("player")) {
              showPopupMsg(lang.LOCKED, 800);
              break;
            }
            if ((a = 2 == getValue("var.mtk.currentState"))) mtkPlay.STOP.onPress();
            else mtkPlay.PLAY.onToggleUp();
            break;
          case E_FFUNC.NEXT_SNAP:
            if (isBlocked("shows")) {
              showPopupMsg(lang.LOCKED, 800);
              break;
            }
            a = getValue("var.currentShow");
            b = getValue("var.currentSnapshot");
            b = CURRENT_SNAPS_LIST.indexOf(b);
            (b = CURRENT_SNAPS_LIST[b + 1] || CURRENT_SNAPS_LIST[0]) && sendMessage(E_COMMANDS.SNAP_LOAD + "^" + a + "^" + b);
            break;
          case E_FFUNC.PREV_SNAP:
            if (isBlocked("shows")) {
              showPopupMsg(lang.LOCKED, 800);
              break;
            }
            a = getValue("var.currentShow");
            b = getValue("var.currentSnapshot");
            b = CURRENT_SNAPS_LIST.indexOf(b);
            (b = CURRENT_SNAPS_LIST[b - 1] || CURRENT_SNAPS_LIST.last()) && sendMessage(E_COMMANDS.SNAP_LOAD + "^" + a + "^" + b);
            break;
          case E_FFUNC.SWAP_USB:
            if (isBlocked()) {
              showPopupMsg(lang.LOCKED, 800);
              break;
            }
            sendMessage("SWAPUSB");
            break;
          case E_FFUNC.MUTE_ALL:
            isMuteAll() ? mixerWidget.cancelMuteAll() : mixerWidget.muteAll();
            break;
          case E_FFUNC.DIM:
            (a = getValue("m.dim")), setValue("m.dim", a ? 0 : 1);
        }
    }
    var CURRENT_SNAPS_LIST = [];
    function toggleRec() {
      isBlocked("player") ? showPopupMsg(lang.LOCKED, 800) : (getValue("var.isRecording"), 0.5 <= getValue("var.recBusy") || (sendMessage(E_COMMANDS.TOGGLE_REC), regUpdate(player2track), regUpdate(masterWidget)));
    }
    function toggleMTKRec() {
      isBlocked("player") ? showPopupMsg(lang.LOCKED, 800) : 0.5 <= getValue("var.mtk.rec.busy") || (getValue("var.mtk.rec.currentState"), sendMessage(E_COMMANDS.TOGGLE_MTK_REC), regUpdate(mtkRec), regUpdate(masterWidget));
    }
    ignoreClearModal = !1;
    function handleKey(a, b, c) {
      if (guiReady && "block" != editBox.style.display && "block" != editContainer.style.display) {
        switch (b) {
          case E_KEYS.escape:
            mixerWidget.showAll();
            break;
          case E_KEYS.backspace:
          case E_KEYS.tab:
            c.preventDefault();
        }
        switch (b) {
          case E_KEYS.backspace:
            setMode(lastMode);
            break;
          case E_KEYS.tab:
            switch (mode) {
              case E_MODE.BIG:
                nextBMode();
                break;
              case E_MODE.MIX:
                slideOutWidget.enabled && "SlideOut2" == slideOutWidget.widgetName && slideOutWidget.nextMode();
                break;
              case E_MODE.EDIT:
                editWidget.nextMode();
                break;
              case E_MODE.AUX:
                auxWidget.nextMode();
                break;
              case E_MODE.FXSENDS:
                fxSendsWidget.nextMode();
                break;
              case E_MODE.SETTINGS:
                settingsWidget.nextMode();
                break;
              case E_MODE.MODALS:
                modalsWidget.nextMode();
                break;
              case E_MODE.PLAYER:
                IS_UI_24 && playerWidget.nextMode();
            }
            break;
          case E_KEYS.down_arrow:
            switch (mode) {
              case E_MODE.BIG:
              case E_MODE.MIX:
              case E_MODE.GAIN:
              case E_MODE.EDIT:
              case E_MODE.AUX:
              case E_MODE.FXSENDS:
                bottomWidget.goLeft();
            }
            break;
          case E_KEYS.up_arrow:
            switch (mode) {
              case E_MODE.BIG:
              case E_MODE.MIX:
              case E_MODE.GAIN:
              case E_MODE.EDIT:
              case E_MODE.AUX:
              case E_MODE.FXSENDS:
                bottomWidget.goRight();
            }
            break;
          case E_KEYS.left_arrow:
            switch (mode) {
              case E_MODE.BIG:
              case E_MODE.MIX:
              case E_MODE.GAIN:
              case E_MODE.EDIT:
              case E_MODE.AUX:
              case E_MODE.FXSENDS:
                break;
              default:
                return;
            }
            selectPrevChannel();
            break;
          case E_KEYS.right_arrow:
            switch (mode) {
              case E_MODE.BIG:
              case E_MODE.MIX:
              case E_MODE.GAIN:
              case E_MODE.EDIT:
              case E_MODE.AUX:
              case E_MODE.FXSENDS:
                break;
              default:
                return;
            }
            selectNextChannel();
        }
        switch (a) {
          case "1":
            topWidget.bTOTAL.click();
            break;
          case "2":
            topWidget.bMix.click();
            break;
          case "3":
            topWidget.bEDIT.click();
            break;
          case "4":
            topWidget.bAUX.click();
            break;
          case "5":
            topWidget.bFX.click();
            break;
          case "6":
            topWidget.bPlayer.click();
            break;
          case "7":
            topWidget.bSet.click();
            break;
          case "8":
          case " ":
            topWidget.bLogo.click();
            break;
          case "Q":
            slideOutWidget.inp.click();
            break;
          case "W":
            slideOutWidget.fx.click();
            break;
          case "E":
            slideOutWidget.sub.click();
            break;
          case "R":
            slideOutWidget.aux.click();
            break;
          case "T":
            IS_UI_24 && slideOutWidget.vca.click();
            break;
          case "D":
            DEPLOY || ((dbgWidgets = !dbgWidgets), drawAll());
            break;
          case "P":
            mode == E_MODE.EDIT && (null != currentPresetWindow ? currentPresetWindow.close() : editWidget.showPresets());
            if (mode == E_MODE.MIX || mode == E_MODE.BIG) {
              switch (selectedStrip.type) {
                case E_STRIP_TYPE.MASTER:
                case E_STRIP_TYPE.VCA:
                  return;
              }
              mWidgets.length ? "PRESET_MENU" == mWidgets[0].widgetName && clearModals() : (clearModals(), mixerWidget.showPresets());
            }
            return;
          case "F":
          case "n":
            toggleMuteFX();
            break;
          case "A":
          case "`":
            toggleMuteAll();
            break;
          case "M":
            switch (mode) {
              case E_MODE.MIX:
              case E_MODE.BIG:
              case E_MODE.EDIT:
                selectedStrip.mute && selectedStrip.mute.click();
                break;
              case E_MODE.AUX:
                (a = 1 == auxStrips[auxWidget.mode].getNameValue("matrix") ? findByID(mtxSendStrips, selectedStrip.id) : findByID(auxSendStrips, selectedStrip.id)) && a.mute && a.mute.click();
                break;
              case E_MODE.FXSENDS:
                (a = findByID(fxSendStrips, selectedStrip.id)) && a.mute && a.mute.click();
                break;
              default:
                return;
            }
            break;
          case "S":
            switch (mode) {
              case E_MODE.MIX:
              case E_MODE.BIG:
              case E_MODE.EDIT:
                break;
              default:
                return;
            }
            selectedStrip.solo && (selectedStrip.solo.click(), mode == E_MODE.MODALS && regUpdate(tvWidget));
            break;
          case "C":
            if (mWidgets.length) "SUBMENU" == mWidgets[0].widgetName && clearModals();
            else if (bottomWidget.enabled && -1 != bottomWidget.IDS.indexOf(selectedChannel)) bottomWidget.onHold(!0);
            return;
          case "a":
            muteGroupToggle(0);
            break;
          case "b":
            muteGroupToggle(1);
            break;
          case "c":
            muteGroupToggle(2);
            break;
          case "d":
            muteGroupToggle(3);
            break;
          case "e":
            muteGroupToggle(4);
            break;
          case "f":
            muteGroupToggle(5);
            break;
          case "Z":
            masterWidget.f1c.enabled && masterWidget.f1c.click();
            break;
          case "X":
            masterWidget.f2c.enabled && masterWidget.f2c.click();
            break;
          case "q":
            switch (mode) {
              case E_MODE.BIG:
              case E_MODE.MIX:
              case E_MODE.GAIN:
              case E_MODE.EDIT:
              case E_MODE.AUX:
              case E_MODE.FXSENDS:
                break;
              default:
                return;
            }
            callChannelRename();
        }
        !ignoreClearModal && mWidgets.length && clearModals();
        ignoreClearModal = !1;
      }
    }
    function callChannelRename() {
      var a = selectedStrip;
      if (null != a && a.type != E_STRIP_TYPE.MASTER) {
        editOk.valueFunc = function () {
          var b = editBox2.value.toUpperCase();
          a.setName(b);
          drawAll("RENAMING");
        };
        var b = a.getNameValue("name");
        showEditBox2(lang.RENAME_CHANNEL.format(a.text), b);
        $("REN_NAV").show();
      }
    }
    function renameNext() {
      editOk.valueFunc();
      hideEditBox2();
      selectNextChannel();
      callChannelRename();
    }
    function renamePrev() {
      editOk.valueFunc();
      hideEditBox2();
      selectPrevChannel();
      callChannelRename();
    }
    function toggleMuteAll() {
      checkBit(getValue("mgmask"), MUTEALL_BIT_IDX) ? mixerWidget.cancelMuteAll() : mixerWidget.muteAll();
      regUpdate(slideOutWidget);
      regUpdate(playerWidget);
    }
    function toggleMuteFX() {
      checkBit(getValue("mgmask"), MUTEFX_BIT_IDX) ? mixerWidget.unMuteFX() : mixerWidget.muteFX();
      regUpdate(slideOutWidget);
      regUpdate(playerWidget);
    }
    function selectNextChannel() {
      var a = -1,
        b = allStrips;
      if (0 <= activeViewGroup && 10 > activeViewGroup && inView) (a = inView.indexOf(selectedChannel)), (a = inView.length - 1 == a ? -1 : a + 1), (a = -1 == a ? -1 : inView[a]), setSelected(a), bottomWidget.gotoID2(a);
      else {
        for (var c = selectedChannel + 1; c < b.length; c++) {
          var d = b[c];
          if (-1 != bottomWidget.IDS.indexOf(d.id)) {
            a = d.id;
            setSelected(a);
            bottomWidget.gotoID2(a);
            return;
          }
        }
        -1 == a && (mode == E_MODE.AUX || mode == E_MODE.FXSENDS ? (setSelected(0), bottomWidget.gotoID2(0)) : setSelected(-1));
      }
    }
    function selectPrevChannel() {
      var a = -1,
        b = allStrips;
      if (0 <= activeViewGroup && 10 > activeViewGroup && inView)
        (a = inView.indexOf(selectedChannel)), (a = 0 == a ? -1 : -1 == a ? inView.length - 1 : a - 1), (a = -1 == a ? -1 : inView[a]), setSelected(a), bottomWidget.gotoID2(a);
      else if (-1 == selectedChannel) {
        for (var c = b.length - 1; 0 <= c; c--) {
          var d = b[c];
          if (-1 != bottomWidget.IDS.indexOf(d.id)) {
            a = d.id;
            break;
          }
        }
        setSelected(a);
        -1 != selectedChannel && bottomWidget.gotoID3(a);
      } else {
        for (c = selectedChannel - 1; 0 <= c; c--)
          if (((d = b[c]), -1 != bottomWidget.IDS.indexOf(d.id))) {
            a = d.id;
            setSelected(a);
            bottomWidget.gotoID3(a);
            break;
          }
        -1 == a && (mode == E_MODE.AUX || mode == E_MODE.FXSENDS ? ((a = bottomWidget.IDS.last()), setSelected(a), bottomWidget.gotoID3(a)) : setSelected(-1));
      }
    }
    var SRV_TIME = null,
      SRV_TIME_DIFF = null,
      SRV_TIME_ZONE = null;
    function getCurrentTime() {
      if (null == SRV_TIME_ZONE || null == SRV_TIME || null == SRV_TIME_DIFF) return Date.now() - 6e4 * new Date(Date.now()).getTimezoneOffset();
      var a = Date.now() + SRV_TIME_DIFF;
      return (5e3 < Math.abs(a - SRV_TIME) ? a : SRV_TIME) + 6e4 * -SRV_TIME_ZONE;
    }
    function setSrvTime(a, b, c, d, f, e, g) {
      sendMessage("SETTIME^" + [a, b, c, d, f, e, g].join());
    }
    wsock = null;
    netConnectCache = netConnectState = wsockFailures = 0;
    netConnectTimer = null;
    netwFrameCounter = 0;
    noConnectMessage = null;
    function networkTick() {
      if (null == wsock) {
        var a = document.URL.replace("http:", "ws:"),
          a = a.replace("/phone.html", ""),
          a = a.replace("/mixer.html", "");
        log(a);
        noConnectMessage = $("noConnectMessage");
        wsock = io.connect(a, { "reconnection limit": 3e3, "max reconnection attempts": Infinity });
        wsock.on("connect", function () {
          wsockFailures = 0;
          sendTimeNetwork();
          sendMessage("SERIAL");
        });
        wsock.on("disconnect", function () {
          wsockFailures++;
        });
        wsock.on("reconnect_failed", function () {
          log("reconnect failed");
          wsockFailures++;
          wsock.disconnect();
          wsock.socket.reconnect();
        });
        wsock.on("error", function (a) {
          log("Socket.io ERROR: " + a.message);
          wsockFailures++;
          wsock.disconnect();
          wsock.socket.reconnect();
        });
        wsock.on("message", receiveMessage);
      }
      netwFrameCounter & 7 ||
      ((netConnectState = isSocketConnected()),
      netConnectCache !== netConnectState &&
      (netConnectState
        ? (conMessageHide(), clearTimeout(netConnectTimer), onNetConnect())
        : ((netConnectTimer = setTimeout(function () {
          conMessageShow();
        }, 2e3)),
          onNetDisconnect()),
        (netConnectCache = netConnectState)));
      netwFrameCounter++;
      15e3 <= netwFrameCounter && (netwFrameCounter = 0);
    }
    function isSocketConnected() {
      return null != wsock && wsock.socket.connected;
    }
    function sendMessage(a) {
      dbgNetwork && log(a);
      return null != wsock && wsock.socket.connected ? (wsock.send(a), !0) : !1;
    }
    function onNetConnect() {
      log("#onNetConnect");
      topWidget && regUpdate(topWidget);
    }
    function onNetDisconnect() {
      log("#onNetDisconnect");
      topWidget && regUpdate(topWidget);
    }
    function conMessageShow() {
      log("#conMessageShow");
      "visible" != noConnectMessage.style.visibility && (noConnectMessage.style.visibility = "visible");
    }
    function conMessageHide() {
      log("#conMessageHide");
      "hidden" != noConnectMessage.style.visibility && (noConnectMessage.style.visibility = "hidden");
    }
    function iosys(a) {
      sendMessage("IOSYS^" + a);
    }
    function sendTimeNetwork() {
      if ("127.0.0.1" != document.location.host && "#local" != document.location.hash) {
        var a = new Date().getTimezoneOffset();
        sendMessage("USERTIME^" + Date.now() + "^" + a);
      }
    }
    initSent = !1;
    msgCount2 = msgCount = 0;
    function receiveMessage2(a) {
      msgCount2++;
      try {
        if (null != a)
          if (a.startsWith("SETD^")) {
            var b = a.split("^", 3);
            3 > b.length || putValue(b[1], parseFloat(b[2]));
          } else a.startsWith("SETS^") ? ((b = a.split("^", 3)), 3 > b.length || putValue(b[1], b[2])) : parseCommand(a);
      } catch (c) {
        showPopupMsg(c.message), log(c.stack), initSent || sendMessage("INIT"), (initSent = !0);
      }
    }
    function receiveMessage(a) {
      msgCount++;
      if (a.contains("\n")) {
        a = a.split("\n");
        for (var b = 0; b < a.length; b++) receiveMessage2(a[b]);
      } else receiveMessage2(a);
    }
    networkPollTick = networkTick;
    function VtoPAN(a) {
      return (200 * a - 100) | 0;
    }
    function PANtoV(a) {
      return bound((a + 100) / 200, 0, 1);
    }
    function VtoLIN(a) {
      return 2.676529517952372e-4 * Math.exp(a * (23.90844819639692 + a * (-26.23877598214595 + (12.195249692570245 - 0.4878099877028098 * a) * a))) * (0.055 > a ? Math.sin(28.559933214452666 * a) : 1);
    }
    zeroDbPos = 0.7647058823529421;
    SOUND_SPEED = 331.3 + 0.606 * 22;
    SAMPLE_RATE = 44100;
    ONE_FOOT_IN_METERS = 0.3048;
    function VtoDB(a) {
      var b = VtoLIN(a);
      0.001 > a ? (a = "- @ ") : ((b = ((((20 * Math.log(b)) / Math.log(10)) * 10 + 0.45) | 0) / 10), -20 >= b ? (b = "" + (b | 0)) : -1 == ("" + b).indexOf(".") && (b += ".0"), (a = b + " dB"), -120 > b && (this.text = "- @ "));
      return a;
    }
    function VtoDB2(a) {
      var b = VtoLIN(a);
      0.001 > a ? (a = "-inf") : ((b = ((((20 * Math.log(b)) / Math.log(10)) * 10 + 0.45) | 0) / 10), -20 >= b ? (b = "" + (b | 0)) : -1 == ("" + b).indexOf(".") && (b += ".0"), (a = b), -120 > b && (this.text = "-inf"));
      return a;
    }
    function VtoDBf(a) {
      a = VtoLIN(a);
      return 1e-10 > a ? -200 : (20 * Math.log(a)) / Math.log(10);
    }
    function VtoDBf3(a) {
      a = VtoLIN(a);
      return ((((20 * Math.log(a)) / Math.log(10)) * 10 + 0.45) | 0) / 10;
    }
    function DBtoVf2(a) {
      return findV(VtoDBf3, a);
    }
    function DBtoVf(a) {
      if (-200 >= a) return 0;
      if (10 <= a) return 1;
      a = Math.pow(10, a / 20);
      for (var b = 0, c = 1, d = 0; 128 > d; d++) {
        var f = 0.5 * (b + c),
          e = VtoLIN(f);
        if (1e-10 > Math.abs(e - a)) return f;
        e > a ? (c = f) : (b = f);
      }
      return 0.5 * (b + c);
    }
    function findV(a, b) {
      for (var c = 0, d = 1, f = 0; 128 > f; f++) {
        var e = 0.5 * (c + d),
          g = a(e);
        if (1e-10 > Math.abs(g - b)) return e;
        g > b ? (d = e) : (c = e);
      }
      return 0.5 * (c + d);
    }
    function VtoGAINP(a) {
      return 90 * a - 40;
    }
    function GAINPtoV(a) {
      return bound((a + 40) / 90, 0, 1);
    }
    ui24pgains = [
      -5,
      -5,
      -3,
      -3,
      -1,
      -1,
      1,
      1,
      3,
      3,
      5,
      5,
      7,
      7,
      9,
      9,
      11,
      11,
      13,
      13,
      15,
      15,
      17,
      17,
      19,
      19,
      21,
      21,
      23,
      23,
      25,
      25,
      27,
      28,
      29,
      30,
      31,
      32,
      33,
      34,
      35,
      36,
      37,
      38,
      39,
      40,
      41,
      42,
      43,
      44,
      45,
      46,
      47,
      48,
      49,
      50,
      51,
      52,
      53,
      54,
      55,
      56,
      57,
      58,
    ];
    function VtoGAIN24(a) {
      a = parseInt(64 * a);
      0 > a && (a = 0);
      63 < a && (a = 63);
      return ui24pgains[a] - 1;
    }
    function GAIN24toV(a) {
      return bound((a + 6) / 63, 0, 1);
    }
    function VtoLATENCY(a) {
      return 0 == a ? "0" + lang.MS : a <= 47 / SAMPLE_RATE ? Math.round(SAMPLE_RATE * a) + lang.SMPL : precision(1e3 * a, 1) + lang.MS;
    }
    function askForDelay(a, b, c, d) {
      c = c || "delay";
      editOk.valueFunc = function () {
        $("DELAY_TIME").hide();
        var d = $$("input[type=radio]:checked")[0].value,
          f = parseFloat(editBox2.value);
        if (isNaN(f) && "fps" != d) showPopupMsg(lang.WRONG_VALUE);
        else {
          switch (d) {
            case lang.MS:
              f /= 1e3;
              break;
            case "smpl":
              f = (f | 0) / SAMPLE_RATE;
              break;
            case "meters":
              f = m2ms(f) / 1e3;
              break;
            case "ft":
              f = m2ms(f * ONE_FOOT_IN_METERS) / 1e3;
              break;
            case "fps":
              f = editBox2.value || "";
              f = f.replace("\\", "/");
              if (20 < f.length || !f.contains("/")) {
                showPopupMsg(lang.SYNTAX_FPS_ENTER);
                return;
              }
              f = eval(f);
              if (!isDefined(f) || isNaN(f)) {
                showPopupMsg(lang.SYNTAX_FPS_ENTER);
                return;
              }
          }
          if (f > b) {
            var h = b,
              k = "";
            switch (d) {
              case "fps":
              case "ms":
                h = precision(1e3 * h, 2);
                k = h + lang.MS;
                break;
              case "smpl":
                h = Math.round(h * SAMPLE_RATE);
                k = h + lang.SMPL;
                break;
              case "meters":
                h = s2m(h);
                h = precision(h, 2);
                k = h + lang.METERS;
                break;
              case "ft":
                (h = s2m(h) / ONE_FOOT_IN_METERS), (h = precision(h, 2)), (k = h + lang.FT);
            }
            showPopupMsg(lang.EXCEEDS_MAXIMUM_DELAY + " (" + k + ")");
          }
          f = bound(f, 0, b);
          a.setNameValue(c, f);
          regUpdate(a);
        }
      };
      var f = a.getNameValue(c);
      switch ($$("input[type=radio]:checked")[0].value) {
        case "ms":
          f = precision(1e3 * f, 2);
          break;
        case "smpl":
          f = Math.round(f * SAMPLE_RATE);
          break;
        case "meters":
          f = s2m(f);
          f = precision(f, 2);
          break;
        case "ft":
          f = s2m(f) / ONE_FOOT_IN_METERS;
          f = precision(f, 2);
          break;
        case "fps":
          f = "";
      }
      showEditBox2(d, "" + f);
      $("DELAY_TIME").show();
    }
    cachedStripLinein = cachedStripGain2 = cachedStripGain = cachedStripAux = cachedStrip = null;
    cachedStripGain2H = cachedStripGainH = cachedStripH = -1;
    cachedMStripH = cachedMStrip = null;
    settingsBuffer = {};
    settingsBufferType = -1;
    function blockGainBySrc(a) {
      log("blockGainBySrc: " + a);
      if (HAVE_ROUTING && a && a.startsWith("hw.")) {
        var b = getValue(a + ".phantom") ? 4e3 : 17e3;
        log(a + " " + b);
        for (var c = 0, d = gainStrips.length; c < d; c++)
          if (gainStrips[c].getNameValue("src") == a) {
            var f = gainStrips[c];
            f.slGain.disabled = !0;
            f.blocked_gain = !0;
            regUpdate(f);
            clearTimeout(f.btimer);
            f.btimer = setTimeout(
              function () {
                this.blocked_gain = this.slGain.disabled = !1;
                regUpdate(this);
              }.bind(f),
              b
            );
          }
        c = 0;
        for (d = gainStrips2.length; c < d; c++)
          gainStrips2[c].name == a + "." &&
          ((f = gainStrips2[c]),
            (f.slGain.disabled = !0),
            (f.blocked_gain = !0),
            regUpdate(f),
            clearTimeout(f.btimer),
            (f.btimer = setTimeout(
              function () {
                this.blocked_gain = this.slGain.disabled = !1;
                regUpdate(this);
              }.bind(f),
              b
            )));
      }
    }
    function blockStrip(a, b) {
      var c = inStrips[a],
        d = gainStrips[a],
        f = gainStrips2[a];
      c &&
      ((c.blocked_gain = !0),
        regUpdate(c),
      d && ((d.slGain.disabled = !0), (d.blocked_gain = !0), regUpdate(d)),
      f && ((f.slGain.disabled = !0), (f.blocked_gain = !0), regUpdate(f)),
        clearTimeout(c.btimer),
        (c.btimer = setTimeout(function () {
          c.blocked_gain = !1;
          regUpdate(c);
          d && ((d.slGain.disabled = !1), (d.blocked_gain = !1), regUpdate(d));
          f && ((f.slGain.disabled = !1), (f.blocked_gain = !1), regUpdate(f));
        }, b || 3e3)));
    }
    function ms2m(a) {
      return (a / 1e3) * SOUND_SPEED;
    }
    function s2m(a) {
      return a * SOUND_SPEED;
    }
    function m2ms(a) {
      return (a / SOUND_SPEED) * 1e3;
    }
    function m2s(a) {
      return a / SOUND_SPEED;
    }
    var MAX_DELAY_INPUT = 0.25,
      MAX_DELAY_OUTPUT = 0.5;
    function setStripWidth(a, b) {
      settingsStorage.set("customStripWidthEnabled", b);
      settingsStorage.set("customStripWidth", a);
      mixerWidget.arrangeStrips();
      bottomWidget.upd();
      drawAll();
    }
    var Strip = Class.create(Widget, {
        initialize: function ($super, b, c, d, f) {
          $super(b);
          this.CACHED_DRAWING = CACHE_TECHNOLOGIES;
          this.widgetName = "Strip";
          this.id = c;
          this.subId = f;
          this.type = d;
          this.name = "zz.xx";
          this.w = measures.mixerStripWidth;
          this.text = "CH 0";
          this.mode = E_STRIP_MODE.MIX;
          this.color = "#FFFFFF";
          this.subGroup = -1;
          this.stereo = !1;
          this.defaultSRC = "";
          this.haveVCA = !1;
          switch (this.type) {
            case E_STRIP_TYPE.IN:
              this.name = "i." + f + ".";
              this.defaultSRC = "hw." + f;
              this.color = color.INPUT;
              this.haveVCA = IS_UI_24;
              break;
            case E_STRIP_TYPE.FX:
              this.name = "f." + f + ".";
              this.stereo = !0;
              this.color = color.blue;
              this.haveVCA = IS_UI_24;
              break;
            case E_STRIP_TYPE.SUB:
              this.name = "s." + f + ".";
              this.stereo = !0;
              this.color = color.sub;
              break;
            case E_STRIP_TYPE.AUX:
              this.name = "a." + f + ".";
              this.color = color.AUX;
              this.haveVCA = IS_UI_24;
              break;
            case E_STRIP_TYPE.MEDIA:
              this.name = "p." + f + ".";
              this.color = color.media;
              this.haveVCA = IS_UI_24;
              break;
            case E_STRIP_TYPE.LINEIN:
              this.name = "l." + f + ".";
              this.defaultSRC = "li." + f;
              this.color = color.LINEIN;
              this.haveVCA = IS_UI_24;
              break;
            case E_STRIP_TYPE.VCA:
              (this.name = "v." + f + "."), (this.color = color.green);
          }
          this.gainName = this.name;
          this.widgetName += "(" + this.name + ")";
          this.AUXS = [];
          this.FXS = [];
          this.MTX = null;
          this.linked = this.isClipping = !1;
          this.linkTarget = null;
          this.firstInGroup = this.lastInGroup2 = this.lastInGroup = !1;
          this.cacheGain = this.cache = null;
          this.cacheH = 0;
          this.gtimer = null;
          this.blocked_gain = !1;
          this.btimer = null;
          this.initWidgets();
        },
        updGain: function () {},
        getMuteState: function (a, b) {
          a = a || !1;
          var c = b ? !1 : this.getNameValue("mute"),
            d = getValue("mgmask"),
            f = this.getNameValue("mgmask"),
            f = d & f,
            e = checkBit(d, MUTEALL_BIT_IDX),
            d = this.type == E_STRIP_TYPE.FX && checkBit(d, MUTEFX_BIT_IDX),
            g = !1;
          if (IS_UI_24 && this.haveVCA) {
            var h = this.getNameValue("vca");
            vcaStrips[h] && (g = vcaStrips[h].getMuteState());
          }
          if (f || e || d || g) c = 1;
          f = this.getNameValue("forceunmute");
          !a && f && (c = 0);
          return c;
        },
        initWidgets: function () {
          var a = this;
          if (this.type == E_STRIP_TYPE.VCA)
            (this.led = new LED(this)),
              this.led.setPos(6, 4),
              this.led.setSize(100, 38),
              (this.led.onInput = function (b) {
                b = parseFloat(b);
                a.sl.setValue(DBtoVf2(b));
              }),
              (this.led.onDouble = function () {
                mode == E_MODE.MIX && a.sl.setValue(zeroDbPos);
              }),
              (this.mute = new CheckBox(this)),
              this.mute.setPos(4, 88),
              this.mute.setImages(res.bMuteOff, res.bMuteOn, res.bMuteOff_F),
              (this.mute.getState = function () {
                this.state = a.getNameValue("mute");
                var b = getValue("mgmask"),
                  c = a.getNameValue("mgmask"),
                  c = b & c,
                  b = checkBit(b, MUTEALL_BIT_IDX);
                if (c || b) this.state = 1;
                1 == a.getNameValue("forceunmute") ? ((this.state = 0), (this.img0 = res.bMuteOff_F)) : (this.img0 = res.bMuteOff);
                return this.state;
              }),
              (this.mute.onToggle = function () {
                handle_mgmask(!1);
              }),
              (this.mute.onToggleUp = function () {
                var b = getValue("mgmask"),
                  c = a.getNameValue("mgmask"),
                  c = b & c,
                  b = checkBit(b, MUTEALL_BIT_IDX);
                c || b || a.setNameValue("mute", 1);
                a.setNameValue("forceunmute", 0);
              }),
              (this.mute.onToggleDown = function () {
                var b = getValue("mgmask"),
                  c = a.getNameValue("mgmask"),
                  c = b & c,
                  b = checkBit(b, MUTEALL_BIT_IDX);
                c || b ? a.setNameValue("forceunmute", 1) : a.setNameValue("mute", 0);
              }),
              (this.spread = new CheckBox(this)),
              this.spread.setAnchors(4, null, null, 30),
              this.spread.setImages(res.FFUNC_OFF, res.FFUNC_GRE),
              (this.spread.redrawParent = !0),
              (this.spread.idx = this.subId),
              (this.spread.font = "14px open_sans_condensedbold"),
              (this.spread.textColor = color.black2),
              (this.spread.textColorActive = color.black2),
              (this.spread.disabledHide = !0),
              (this.spread.textParam = {
                font: "14px open_sans_condensedbold",
                x: null,
                y: null,
                offsetX: 1,
                offsetY: -3,
                pressOffsetX: 0,
                pressOffsetY: 1,
                align: "center",
                valign: "middle",
                shadow: ["#ccc", 0, 1, 1],
                dy: 12,
              }),
              (this.spread.getState = function () {
                this.text = (this.state = activeViewGroup == 300 + this.idx ? 1 : 0) ? lang.CLOSE : lang.SPILL;
                this.disabled = !0;
                for (var a = 0, c = allStrips.length; a < c; a++)
                  if (allStrips[a].haveVCA && allStrips[a].getNameValue("vca") === this.idx) {
                    this.disabled = !1;
                    break;
                  }
              }),
              (this.spread.onToggleUp = function () {
                (settings.sync && settings.sync_vca) || mixerWidget.showVCA(this.idx);
                sendMessage("BMSG^SYNC_VG^" + settings.sync_id + "^" + (300 + this.idx));
                this.state = activeViewGroup == 300 + this.idx ? 1 : 0;
              }),
              (this.spread.onToggleDown = function () {
                resumeLastActiveVG();
                sendMessage("BMSG^SYNC_VG^" + settings.sync_id + "^-1");
                this.state = activeViewGroup == 300 + this.idx ? 1 : 0;
              }),
              (this.sl = new Slider(this, this.type)),
              this.sl.setPos(0, 134),
              this.sl.setKey(this.name + "mix"),
              (this.sl.color = this.color),
              (this.sl.w = this.w),
              (this.sl.laneOffset = 36),
              (this.sl.faderX = 60),
              (this.sl.bottomMargin = 24),
              (this.sl.lane = !0);
          else {
            this.led = new LED(this);
            this.led.setPos(6, 4);
            this.led.setSize(100, 38);
            this.type == E_STRIP_TYPE.IN &&
            IS_UI_24 &&
            (this.led.getState = function () {
              var b = a.getNameValue("vca"),
                c = mode != E_MODE.GAIN;
              this.color = 0 <= b && 7 > b && c ? color.ledTextVCA : color.ledText;
            });
            this.led.onInput = function (b) {
              b = parseFloat(b);
              isNaN(b) ? showPopupMsg(lang.WRONG_VALUE) : (mode == E_MODE.GAIN ? a.slGain.setValue(GAINPtoV(b)) : a.sl.setValue(DBtoVf2(b)), a.led.showDB());
            };
            this.led.onDouble = function () {
              mode != E_MODE.GAIN && (a.sl.setValue(zeroDbPos), a.led.showDB());
            };
            this.type != E_STRIP_TYPE.AUX
              ? ((this.pan = new PanSlider(this)),
                (this.pan.key = this.name + "pan"),
                this.pan.setPos(5, 46),
                this.pan.setSize(102, 30),
                (this.pan.onValue = function () {
                  a.led.showDB();
                }))
              : HAVE_LATENCY &&
              ((this.delay = new TButton(this)),
                this.delay.setPos(58, 46),
                this.delay.setImages(res.cl_s_btn_off, res.cl_s_btn_on),
                (this.delay.redrawParent = !0),
                (this.delay.opaque = !1),
                this.delay.setKey(this.name + "delay"),
                (this.delay.getState = function () {
                  this.text = VtoLATENCY(a.getNameValue("delay"));
                }),
                (this.delay.onPress = function () {
                  askForDelay(a, MAX_DELAY_OUTPUT, "delay", a.getName() + " " + lang.OUTPUT_DELAY);
                }));
            this.mute = new CheckBox(this);
            this.mute.setPos(4, 88);
            this.mute.setImages(res.bMuteOff, res.bMuteOn, res.bMuteOff_F);
            this.mute.getState = function () {
              this.state = a.getMuteState();
              this.img0 = a.getNameValue("forceunmute") ? res.bMuteOff_F : res.bMuteOff;
              return this.state;
            };
            this.mute.onToggle = function () {
              checkMutes();
              mode == E_MODE.EDIT && updateByKey(a.name + "mute");
              isDefined(this.parent.id) && selectedChannel != this.parent.id && setSelected(this.parent.id);
            };
            this.mute.onToggleUp = function () {
              var b = getValue("mgmask"),
                c = a.getNameValue("mgmask"),
                c = b & c,
                d = checkBit(b, MUTEALL_BIT_IDX),
                b = checkBit(b, MUTEFX_BIT_IDX) && a.type == E_STRIP_TYPE.FX,
                f = !1;
              if (IS_UI_24 && this.haveVCA) {
                var e = a.getNameValue("vca");
                vcaStrips[e] && (f = vcaStrips[e].getMuteState());
              }
              c || d || b || f || a.setNameValue("mute", 1);
              a.setNameValue("forceunmute", 0);
            };
            this.mute.onToggleDown = function () {
              a.getMuteState(!0, !0) ? a.setNameValue("forceunmute", 1) : a.setNameValue("mute", 0);
            };
            this.solo = new CheckBox(this);
            this.solo.setPos(58, 88);
            this.solo.setImages(res.bSoloOff, res.bSoloOn);
            this.solo.getState = function () {
              this.state = a.getNameValue("solo");
            };
            this.solo.onToggle = function () {
              checkSolos();
              isDefined(this.parent.id) && selectedChannel != this.parent.id && setSelected(this.parent.id);
            };
            this.solo.onToggleUp = function () {
              if (0 == getValue("settings.multiplesolo")) for (var b = 0; b < allStrips.length; b++) allStrips[b].type != E_STRIP_TYPE.VCA && allStrips[b].setNameValue("solo", 0);
              a.setNameValue("solo", 1);
            };
            this.solo.onToggleDown = function () {
              a.setNameValue("solo", 0);
            };
            this.sl = new Slider(this, this.type);
            this.sl.setPos(0, 134);
            this.sl.color = this.color;
            this.sl.param = "mix";
            this.sl.key = this.name + "mix";
            this.sl.w = this.w;
            this.sl.laneOffset = 36;
            this.sl.faderX = 60;
            this.sl.bottomMargin = 24;
            this.sl.lane = this.type != E_STRIP_TYPE.IN;
            this.sl.onValue = function () {
              a.led.showDB();
            };
            this.type == E_STRIP_TYPE.AUX &&
            (this.sl.getState = function () {
              var b = 1 == a.getNameValue("matrix");
              this.fader = b ? res.mtxFader : res.auxFader;
              this.color = b ? color.MATRIX : a.color;
              IS_UI_24 && (this.disabled = a.getNameValue("link2master") || !1);
            });
            switch (this.type) {
              case E_STRIP_TYPE.AUX:
                this.sl.onDoubleKnob = function () {
                  editWidget.setMode(editWidget.arr[0]);
                  setMode(E_MODE.EDIT);
                };
                this.sl.onDouble = function () {
                  auxWidget.setMode(a.subId);
                  setMode(E_MODE.AUX);
                };
                break;
              case E_STRIP_TYPE.FX:
                this.sl.onDoubleKnob = function () {
                  editWidget.setMode(editWidget.arr[0]);
                  setMode(E_MODE.EDIT);
                };
                this.sl.onDouble = function () {
                  fxSendsWidget.setMode(a.subId);
                  setMode(E_MODE.FXSENDS);
                };
                break;
              case E_STRIP_TYPE.MEDIA:
                this.sl.onDoubleKnob = function () {
                  editWidget.setMode(editWidget.arr[0]);
                  setMode(E_MODE.EDIT);
                };
                this.sl.onDouble = function () {
                  mode == E_MODE.PLAYER ? setMode(E_MODE.MIX) : setMode(E_MODE.PLAYER);
                };
                break;
              default:
                (this.sl.onDoubleKnob = function () {
                  editWidget.setMode(editWidget.arr[0]);
                  setMode(E_MODE.EDIT);
                  editWidget.setMode(editWidget.arr[0]);
                }),
                  (this.sl.onDouble = function () {
                    modalsWidget.setMode(0);
                    setMode(E_MODE.MODALS);
                  });
            }
            this.stereo
              ? ((this.vu = new VUMeter(this)),
                this.vu.setAnchors(15, 149, null, settings.disableVUs2 ? 25 : 101),
                (this.clip = new ClipBulb(this)),
                this.clip.setPos(9, 127),
              settings.disableVUs2 ||
              ((this.gi = new GATEind(this)), (this.gi.x = 15), (this.gr = new GRMeter(this)), (this.gr.x = 15), (this.gi2 = new GATEind(this)), (this.gi2.x = 32), (this.gr2 = new GRMeter(this)), (this.gr2.x = 32)),
                (this.vu2 = new VUMeter(this)),
                this.vu2.setAnchors(32, 149, null, settings.disableVUs2 ? 25 : 101),
                (this.clip2 = new ClipBulb(this)),
                this.clip2.setPos(26, 127),
                (this.tvvu2 = this.tvvu = null))
              : ((this.vu = new VUMeter(this)),
                this.vu.setAnchors(21, 149, null, settings.disableVUs2 ? 25 : 101),
                (this.clip = new ClipBulb(this)),
                this.clip.setPos(15, 127),
              settings.disableVUs2 || ((this.gi = new GATEind(this)), (this.gi.x = 21), (this.gr = new GRMeter(this)), (this.gr.x = 21)),
                (this.tvvu = null));
          }
        },
        setMode: function (a) {
          this.mode = a;
          switch (a) {
            case E_STRIP_MODE.MIX:
              this.enabled = !0;
              this.type == E_STRIP_TYPE.IN &&
              (isDefined(this.gr) && (this.gr.enabled = !0),
              isDefined(this.gi) && (this.gi.enabled = !0),
              isDefined(this.hiz) && (this.hiz.enabled = !1),
              isDefined(this.delay) && (this.delay.enabled = !1),
                (this.phantom.enabled = !1),
                (this.slGain.enabled = !1),
                (this.polarity.enabled = !1),
                (this.vuPre.enabled = !1),
                (this.clipPre.enabled = !1),
                (this.pan.enabled = !0),
                (this.mute.enabled = !0),
                (this.solo.enabled = !0),
                (this.sl.enabled = !0),
                (this.vu.enabled = !0),
                (this.clip.enabled = !0),
                (this.color = color.INPUT));
              break;
            case E_STRIP_MODE.GAIN:
              this.type != E_STRIP_TYPE.IN
                ? (this.enabled = !1)
                : (isDefined(this.gr) && (this.gr.enabled = !1),
                isDefined(this.gi) && (this.gi.enabled = !1),
                  (this.mute.enabled = !1),
                  (this.solo.enabled = !1),
                  (this.pan.enabled = !1),
                  (this.sl.enabled = !1),
                  (this.vu.enabled = !1),
                  (this.clip.enabled = !1),
                isDefined(this.hiz) && (this.hiz.enabled = !0),
                isDefined(this.delay) && (this.delay.enabled = !0),
                  (this.phantom.enabled = !0),
                  (this.polarity.enabled = !0),
                  (this.slGain.enabled = !0),
                  (this.vuPre.enabled = !0),
                  (this.clipPre.enabled = !0),
                  (this.color = color.red));
              getValue("settings.demo") && 20 > curSetup.input && 2 > this.id && this.phantom.hide();
              this.updGain();
              break;
            default:
              return;
          }
          this.NEED_UPDATE = !0;
        },
        calcGeometry: function () {
          this.h = this.parent.h;
          isDefined(this.gr) && (this.gr.y = this.h - this.gr.h - 26);
          isDefined(this.gi) && (this.gi.y = this.h - this.gr.h - 26 - 13);
          isDefined(this.gr2) && (this.gr2.y = this.h - this.gr2.h - 26);
          isDefined(this.gi2) && (this.gi2.y = this.h - this.gr2.h - 26 - 13);
          this.gr && ((this.gr.enabled = 220 < this.h), (this.gi.enabled = 220 < this.h), (this.sl.enabled = 220 < this.h), this.gr2 && ((this.gr2.enabled = 220 < this.h), (this.gi2.enabled = 220 < this.h)));
        },
        reset: function () {
          0 == this.getNameValue("stereoIndex") && (this.setLinked(!1), allStrips[this.id + 1].setLinked(!1), this.type != E_STRIP_TYPE.MEDIA && allStrips[this.id + 1].setNameValue("pan", 0.5));
          1 == this.getNameValue("stereoIndex") && (this.setLinked(!1), allStrips[this.id - 1].setLinked(!1), this.type != E_STRIP_TYPE.MEDIA && allStrips[this.id - 1].setNameValue("pan", 0.5));
          if (this.type == E_STRIP_TYPE.VCA) {
            var a = this.subId;
            allStrips.each(function (b) {
              b.getNameValue("vca") == a && (b.setNameValue("vca", -1), regUpdate(b));
            });
            activeViewGroup == E_VG.VCA1 + a && mixerWidget.showAll();
          }
          resetChannel(this.name.slice(0, -1));
          regUpdate(this);
          regUpdate(bottomWidget);
          regUpdate(gainMixer);
          mode == E_MODE.FXSENDS && regUpdate(fxSendsWidget);
          mode == E_MODE.PLAYER && regUpdate(playerLabels);
          mode == E_MODE.EDIT && regUpdate(editWidget);
        },
        copySettings: function (a) {
          settingsBuffer = {};
          a = isDefined(a);
          for (var b in dataValue)
            if (
              !(
                !dataValue.hasOwnProperty(b) ||
                !b.contains(this.name) ||
                b.endsWith(".iosyscmd") ||
                b.endsWith(".iosysname") ||
                b.endsWith(".disablegain") ||
                b.contains(".name") ||
                b.contains(".defname") ||
                b.contains(".stereoIndex") ||
                b.contains(".slave") ||
                b.contains(".stereo") ||
                (!a && b.contains(".mgmask")) ||
                (!a && b.contains(".subgroup"))
              )
            ) {
              if (!settings.copyGainToo || IS_UI_24) {
                if (b.contains(".gain") && !b.contains(".eq.")) continue;
                if (b.contains(".phantom")) continue;
                if (b.contains(".invert")) continue;
                if (b.contains(".hiz")) continue;
              }
              if (
                !(
                  b.contains(".digitech") ||
                  b.contains(".safe") ||
                  b.contains(".src") ||
                  b.contains(".scsrc") ||
                  (!a && b.contains(".mute") && !b.contains(".aux.") && !b.contains(".fx.")) ||
                  (!a && b.contains(".solo")) ||
                  (!a && b.contains(".forceunmute"))
                )
              ) {
                if (this.type == E_STRIP_TYPE.FX) {
                  if (b.endsWith(".bpm")) continue;
                  if (b.endsWith(".fxtype")) continue;
                  if (b.contains(".par")) continue;
                  if (b.endsWith(".prmod")) continue;
                  if (b.endsWith(".prname")) continue;
                }
                settingsBuffer[b.replace(this.name, "")] = dataValue[b];
              }
            }
          this.type == E_STRIP_TYPE.IN &&
          IS_UI_24 &&
          settings.copyGainToo &&
          (b = this.getNameValue("src")) &&
          b.startsWith("hw.") &&
          ((settingsBuffer["!gain"] = getValue(b + ".gain")),
            (settingsBuffer["!phantom"] = getValue(b + ".phantom")),
            (settingsBuffer["!invert"] = getValue(this.name + "invert")),
          hasHIZ(this) && (settingsBuffer["!hiz"] = getValue(b + ".hiz")));
          settingsBufferType = this.type;
        },
        pasteSettings: function () {
          if (settingsBufferType != this.type) showPopupMsg(lang.INCOMPATIBLE_CHANNEL_TYPE, 1e3);
          else {
            for (var a in settingsBuffer) settingsBuffer.hasOwnProperty(a) && isDefined(dataValue[this.name + a]) && !a.startsWith("!") && (setValue(this.name + a, settingsBuffer[a]), updateByKey(this.name + a));
            this.type == E_STRIP_TYPE.IN &&
            IS_UI_24 &&
            settings.copyGainToo &&
            (a = this.getNameValue("src")) &&
            a.startsWith("hw.") &&
            (setValue(a + ".gain", settingsBuffer["!gain"]),
              setValue(a + ".phantom", settingsBuffer["!phantom"]),
              setValue(this.name + "invert", settingsBuffer["!invert"]),
              updateByKey(a + ".gain"),
              updateByKey(a + ".phantom"),
              updateByKey(this.name + "invert"),
            hasHIZ(this) && "!hiz" in settingsBuffer && (setValue(a + ".hiz", settingsBuffer["!hiz"]), updateByKey(a + ".hiz")));
          }
        },
        getLabel: function () {
          var a = this.text;
          this.type == E_STRIP_TYPE.AUX && HAVE_MATRIX && this.getNameValue("matrix") && (a = "MTX " + (this.subId + 1));
          this.getNameValue("stereoIndex");
          return a;
        },
        getColor: function () {
          return this.type == E_STRIP_TYPE.AUX && HAVE_MATRIX && this.getNameValue("matrix") ? color.MATRIX : this.color;
        },
        getName: function (a) {
          a = a || !1;
          var b = getValue(this.name + "name");
          a && (b = null);
          if (!b)
            switch (this.type) {
              case E_STRIP_TYPE.VCA:
                b = lang.VCA + " " + (this.subId + 1);
                break;
              case E_STRIP_TYPE.IN:
                b = lang.CH + " " + (this.subId + 1);
                break;
              case E_STRIP_TYPE.AUX:
                b = lang.AUX + " " + (this.subId + 1);
                HAVE_MATRIX && this.getNameValue("matrix") && (b = lang.MTX + " " + (this.subId + 1));
                break;
              case E_STRIP_TYPE.FX:
                a = this.getNameValue("fxtype");
                b = lang.FX + " " + (this.subId + 1);
                switch (a) {
                  case E_FX.REVERB:
                    b += " " + lang.REVERB;
                    break;
                  case E_FX.DELAY:
                    b += " " + lang.DELAY;
                    break;
                  case E_FX.CHORUS:
                    b += " " + lang.CHORUS;
                    break;
                  case E_FX.ROOM:
                    b += " " + lang.ROOM;
                }
                break;
              case E_STRIP_TYPE.SUB:
                b = lang.SUB + " " + (this.subId + 1);
                break;
              case E_STRIP_TYPE.LINEIN:
                b = lang.LINE_IN;
                1 < curSetup.linein && (b += " " + (0 == this.subId % 2 ? lang.L : lang.R));
                break;
              case E_STRIP_TYPE.MEDIA:
                b = lang.PLAYER + " " + (0 == this.subId % 2 ? lang.L : lang.R);
            }
          return b;
        },
        setName: function (a) {
          setValue(this.name + "name", a);
          regUpdate(bottomWidget);
        },
        getNameValue: function (a) {
          return getValue(this.name + a);
        },
        setNameValue: function (a, b) {
          setValue(this.name + a, b);
          regUpdate(this);
        },
        setLinked: function (a) {
          if (a) {
            if (this.type == E_STRIP_TYPE.AUX) {
              if (isBlocked("auxlvl", this.subId)) {
                showPopupMsg(lang.LOCKED, 1e3);
                return;
              }
              if (isBlocked("auxlvl", this.subId + 1)) {
                showPopupMsg(lang.LOCKED, 1e3);
                return;
              }
            }
            this.linkTarget = allStrips[this.id + 1];
            if (!this.linkTarget || this.linkTarget.type != this.type) return;
            this.copySettings(!0);
            this.linkTarget.pasteSettings();
            setValue(this.name + "stereoIndex", 0);
            setValue(this.linkTarget.name + "stereoIndex", 1);
            settings.me.contains(this.id) ? settings.me.push(this.linkTarget.id) : settings.me.contains(this.linkTarget.id) && settings.me.push(this.id);
            if (this.type == E_STRIP_TYPE.AUX) {
              a = this.subId;
              for (var b = 0; b < inStrips.length; b++)
                setValue(inStrips[b].name + "aux." + (a + 1) + ".value", inStrips[b].getNameValue("aux." + a + ".value")),
                  setValue(inStrips[b].name + "aux." + (a + 1) + ".post", inStrips[b].getNameValue("aux." + a + ".post")),
                  setValue(inStrips[b].name + "aux." + (a + 1) + ".mute", inStrips[b].getNameValue("aux." + a + ".mute"));
              for (b = 0; b < lineinStrips.length; b++)
                setValue(lineinStrips[b].name + "aux." + (a + 1) + ".value", lineinStrips[b].getNameValue("aux." + a + ".value")),
                  setValue(lineinStrips[b].name + "aux." + (a + 1) + ".post", lineinStrips[b].getNameValue("aux." + a + ".post")),
                  setValue(lineinStrips[b].name + "aux." + (a + 1) + ".mute", lineinStrips[b].getNameValue("aux." + a + ".mute"));
              for (b = 0; b < mediaStrips.length; b++)
                setValue(mediaStrips[b].name + "aux." + (a + 1) + ".value", mediaStrips[b].getNameValue("aux." + a + ".value")),
                  setValue(mediaStrips[b].name + "aux." + (a + 1) + ".post", mediaStrips[b].getNameValue("aux." + a + ".post")),
                  setValue(mediaStrips[b].name + "aux." + (a + 1) + ".mute", mediaStrips[b].getNameValue("aux." + a + ".mute"));
              for (b = 0; b < fxStrips.length; b++)
                setValue(fxStrips[b].name + "aux." + (a + 1) + ".value", fxStrips[b].getNameValue("aux." + a + ".value")),
                  setValue(fxStrips[b].name + "aux." + (a + 1) + ".post", fxStrips[b].getNameValue("aux." + a + ".post")),
                  setValue(fxStrips[b].name + "aux." + (a + 1) + ".mute", fxStrips[b].getNameValue("aux." + a + ".mute"));
              if (HAVE_MATRIX) {
                for (b = 0; b < auxStrips.length; b++)
                  setValue(auxStrips[b].name + "mtx." + (a + 1) + ".value", auxStrips[b].getNameValue("mtx." + a + ".value")),
                    setValue(auxStrips[b].name + "mtx." + (a + 1) + ".mute", auxStrips[b].getNameValue("mtx." + a + ".mute"));
                for (b = 0; b < subStrips.length; b++)
                  setValue(subStrips[b].name + "mtx." + (a + 1) + ".value", subStrips[b].getNameValue("mtx." + a + ".value")),
                    setValue(subStrips[b].name + "mtx." + (a + 1) + ".mute", subStrips[b].getNameValue("mtx." + a + ".mute"));
                setValue("m.mtx." + (a + 1) + ".value", getValue("m.mtx." + a + ".value"));
                setValue("m.mtx." + (a + 1) + ".mute", getValue("m.mtx." + a + ".mute"));
                setValue("m.mtx." + (a + 1) + ".r.value", getValue("m.mtx." + a + ".r.value"));
                setValue("m.mtx." + (a + 1) + ".r.mute", getValue("m.mtx." + a + ".r.mute"));
                for (b = 0; b < curSetup.aux; b++) setValue(this.name + "mtx." + b + ".pan", 0), setValue(this.linkTarget.name + "mtx." + b + ".pan", 1);
              }
            }
            if (this.type == E_STRIP_TYPE.IN || this.type == E_STRIP_TYPE.MEDIA || this.type == E_STRIP_TYPE.LINEIN)
              for (setValue(this.name + "pan", 0), setValue(this.linkTarget.name + "pan", 1), b = 0; b < curSetup.aux; b++)
                setValue(this.name + "aux." + b + ".pan", 0), setValue(this.linkTarget.name + "aux." + b + ".pan", 1);
            regUpdate(this);
            regUpdate(this.linkTarget);
            mode == E_MODE.EDIT && (editWidget.upd(), regUpdate(editWidget));
          } else {
            a = 0 == getValue(this.name + "stereoIndex");
            if (this.type == E_STRIP_TYPE.AUX) {
              if (isBlocked("auxlvl", this.subId)) {
                showPopupMsg(lang.LOCKED, 1e3);
                return;
              }
              if (isBlocked("auxlvl", this.subId + (a ? 1 : -1))) {
                showPopupMsg(lang.LOCKED, 1e3);
                return;
              }
            }
            this.linkTarget = allStrips[this.id + (a ? 1 : -1)];
            if (!this.linkTarget || this.linkTarget.type != this.type) return;
            setValue(this.name + "stereoIndex", -1);
            setValue(this.linkTarget.name + "stereoIndex", -1);
            if (this.type == E_STRIP_TYPE.IN || this.type == E_STRIP_TYPE.MEDIA || this.type == E_STRIP_TYPE.LINEIN)
              for (b = 0; b < curSetup.aux; b++) setValue(this.name + "aux." + b + ".pan", 0.5), setValue(this.linkTarget.name + "aux." + b + ".pan", 0.5);
            if (this.type == E_STRIP_TYPE.AUX && HAVE_MATRIX) for (b = 0; b < curSetup.aux; b++) setValue(this.name + "mtx." + b + ".pan", 0.5), setValue(this.linkTarget.name + "mtx." + b + ".pan", 0.5);
            regUpdate(this);
            regUpdate(this.linkTarget);
            mode == E_MODE.EDIT && (editWidget.upd(), regUpdate(editWidget));
            this.linkTarget = null;
          }
          if (mode == E_MODE.AUX) auxWidget.onShow();
        },
        setVU: function (a, b, c, d, f, e, g, h) {
          if (this.type != E_STRIP_TYPE.VCA) {
            1 <= b ? this.clip.clip() : this.clip.state && !this.clip.releasing && this.clip.release();
            this.vu.setValueExt(a, b);
            settings.disableVUs2 || (this.gr.setValue(f), this.gi.setValue(g));
            for (var k = 0; k < this.AUXS.length; k++) this.AUXS[k].setVU(a, b);
            for (k = 0; k < this.FXS.length; k++) this.FXS[k].setVU(a, b);
            HAVE_MATRIX && this.MTX && this.MTX.setVU(a, b);
            this.stereo
              ? (1 <= d ? this.clip2.clip() : this.clip2.state && !this.clip2.releasing && this.clip2.release(),
                this.vu2.setValueExt(c, d),
              settings.disableVUs2 || (this.gr2.setValue(e), this.gi2.setValue(h)),
                modalsWidget.pages[0].m.setValue(b, f, g, this.id, d, e, h))
              : modalsWidget.pages[0].m.setValue(b, f, g, this.id);
          }
        },
        drawMarksGain: function (a) {
          var b = this.sl.h - 80;
          a.fillStyle = "rgba(255,255,255,0.35)";
          a.textAlign = "center";
          a.font = font.stripMarks;
          GAINPtoV(30);
          GAINPtoV(0);
          GAINPtoV(-20);
          IS_UI_24 && (GAIN24toV(30), GAIN24toV(0));
          a.shadowColor = "transparent";
          var c = [1, GAINPtoV(40), GAINPtoV(30), GAINPtoV(20), GAINPtoV(10), GAINPtoV(-10), GAINPtoV(-20), GAINPtoV(-30), 0];
          IS_UI_24 && (c = [1, GAIN24toV(50), GAIN24toV(40), GAIN24toV(30), GAIN24toV(20), GAIN24toV(10), 0]);
          for (var d = 0; d < c.length; d++) {
            var f = Math.floor(b * (1 - c[d])) + 35;
            a.fillStyle = "rgba(0,0,0,0.2)";
            a.fillRect(92, 134 + f, 10, 1);
            a.fillStyle = "rgba(255,255,255,0.26)";
            a.fillRect(92, 134 + f + 1, 10, 1);
          }
          f = b * (1 - GAINPtoV(0)) + 35;
          IS_UI_24 && (f = b * (1 - GAIN24toV(0)) + 35);
          a.fillStyle = "#939394";
          a.fillRect(92, 134 + (f | 0), 12, 3);
        },
        DRAW_UPDATE_CHECK: function () {
          var a;
          a = this.getNameValue("mix");
          var b = this.getNameValue("mute"),
            c = this.getNameValue("forceunmute"),
            d = this.getNameValue("mgmask"),
            f = getValue("mgmask"),
            e = this.getNameValue("solo"),
            g = this.getNameValue("pan"),
            h = this.getNameValue("stereoIndex");
          a = "" + a + b + c + d + f + e + g + (selectedStrip == this) + h + this.firstInGroup + this.lastInGroup + this.sl.slowMode;
          settings.eqStrip &&
          ((a += settings.eqStrip),
            (a += this.getNameValue("eq.bypass")),
            (a += this.getNameValue("eq.hpf.freq")),
            (a += this.getNameValue("eq.hpf.slope")),
            (a += this.getNameValue("eq.lpf.freq")),
            (a += this.getNameValue("eq.lpf.slope")),
            (a += this.getNameValue("eq.b1.freq")),
            (a += this.getNameValue("eq.b1.q")),
            (a += this.getNameValue("eq.b1.gain")),
            (a += this.getNameValue("eq.b2.freq")),
            (a += this.getNameValue("eq.b2.q")),
            (a += this.getNameValue("eq.b2.gain")),
            (a += this.getNameValue("eq.b3.freq")),
            (a += this.getNameValue("eq.b3.q")),
            (a += this.getNameValue("eq.b3.gain")),
            (a += this.getNameValue("eq.b4.freq")),
            (a += this.getNameValue("eq.b4.q")),
            (a += this.getNameValue("eq.b4.gain")),
            (a += this.getNameValue("eq.b5.freq")),
            (a += this.getNameValue("eq.b5.q")),
            (a += this.getNameValue("eq.b5.gain")));
          switch (this.type) {
            case E_STRIP_TYPE.IN:
              (a += this.blocked_gain), IS_UI_24 && ((b = this.getNameValue("amixgroup")), (a += b), 0 == b && (a += getValue("automix.a.on")), 1 == b && (a += getValue("automix.b.on")));
            case E_STRIP_TYPE.LINEIN:
              a += this.getNameValue("src");
            case E_STRIP_TYPE.MEDIA:
              (a += this.getNameValue("subgroup")), (a += -1 != settings.me.indexOf(this.id));
            case E_STRIP_TYPE.FX:
              IS_UI_24 && ((a += this.getNameValue("src")), (b = this.getNameValue("vca")), null == b && (b = -1), (a = a + b + (0 <= b ? vcaStrips[b] && vcaStrips[b].getMuteState() : !1)));
              break;
            case E_STRIP_TYPE.VCA:
              a += activeViewGroup == 300 + this.subId;
              a += this.spread.state;
              b = !0;
              c = 0;
              for (d = allStrips.length; c < d; c++)
                if (allStrips[c].haveVCA && allStrips[c].getNameValue("vca") === this.subId) {
                  b = !1;
                  break;
                }
              a += b;
              break;
            case E_STRIP_TYPE.AUX:
              IS_UI_24 &&
              ((a += this.getNameValue("delay")),
                (a += this.getNameValue("matrix")),
                (b = this.getNameValue("vca")),
              null == b && (b = -1),
                (a = a + b + (0 <= b ? vcaStrips[b] && vcaStrips[b].getMuteState() : !1)),
                (a += this.getNameValue("link2master")));
              a += settings.meout;
              a += this.subId == settings.meout;
              break;
            case E_STRIP_TYPE.SUB:
              IS_UI_24 && (a += this.getNameValue("exclude"));
          }
          if (a === this.CACHED_PARAMS) return !1;
          this.CACHED_PARAMS = a;
          return !0;
        },
        paint: function () {
          this.cacheH != this.h && this.cachePaint();
          drawImage(this.cache, 0, 0);
          var a = this.getNameValue("stereoIndex"),
            b = selectedStrip.id == this.id,
            c = !1;
          switch (this.type) {
            case E_STRIP_TYPE.IN:
            case E_STRIP_TYPE.MEDIA:
            case E_STRIP_TYPE.LINEIN:
              settings.me.contains(this.id) && (c = !0);
              0 == a && settings.me.contains(this.id + 1) && (c = !0);
              1 == a && settings.me.contains(this.id - 1) && (c = !0);
              break;
            case E_STRIP_TYPE.AUX:
              settings.meout == this.subId && (c = !0), 0 == a && settings.meout == this.subId + 1 && (c = !0), 1 == a && settings.meout == this.subId - 1 && (c = !0);
          }
          b && ((ctx.globalAlpha = 0.055), (ctx.fillStyle = "#fff"), ctx.fillRect(1, 1, this.w - 2, this.h - 2), (ctx.globalAlpha = 1));
          ctx.fillStyle = this.color;
          ctx.fillRect(0 + (this.firstInGroup ? 2 : 0), this.h - 3, this.w - (this.firstInGroup ? 2 : 0) - (this.lastInGroup ? 2 : 0), 3);
          ctx.textBaseline = "alphabetic";
          b = this.text;
          this.type == E_STRIP_TYPE.AUX
            ? (HAVE_MATRIX && (b = this.getNameValue("matrix") ? "MTX " + (this.subId + 1) : "AUX " + (this.subId + 1)), 0 == a ? (b += "L") : 1 == a && (b += "R"))
            : !HAVE_ROUTING ||
            (this.type != E_STRIP_TYPE.IN && this.type != E_STRIP_TYPE.LINEIN) ||
            ((a = this.getNameValue("src")) &&
              isString(a) &&
              a != this.defaultSRC &&
              ((a = E_SRC_NAMES[a] || a), (ctx.fillStyle = "#999999"), (ctx.textAlign = "center"), (ctx.font = "9pt open_sans_condensedbold"), ctx.fillText(a, this.w - 16, this.h - 10, 28)));
          ctx.textAlign = "left";
          ctx.font = font.stripChannel;
          ctx.fillStyle = c ? color.me : "#B5B5B5";
          ctx.fillText(b, 11, this.h - 10);
          ctx.textAlign = "center";
          this.subGroup = getValue(this.name + "subgroup");
          null != this.subGroup && 0 <= this.subGroup && ((ctx.fillStyle = "#B55B7F"), ctx.fillText("S" + (this.subGroup + 1), this.w - 11, this.h - 25));
          c = IS_UI_24 && this.haveVCA ? getValue(this.name + "vca") : -1;
          IS_UI_24 && 0 <= c && ((ctx.fillStyle = "#58AE6E"), ctx.fillText("V" + (c + 1), this.w - 11, this.h - 40));
          HAVE_HP &&
          this.type == E_STRIP_TYPE.AUX &&
          this.subId >= curSetup.aux - 2 &&
          ((ctx.shadowColor = "transparent"),
            (ctx.fillStyle = "#252522"),
            ctx.fillRect(this.w - 51, this.h - 22, 30, 15),
            (ctx.fillStyle = color.white),
            ctx.fillText(lang.HP + " " + (0 == this.subId % 2 ? lang.L : lang.R), this.w - 36, this.h - 10));
          if (mode != E_MODE.GAIN) {
            var d = dataValue.mgmask,
              b = this.getNameValue("mgmask"),
              a = b & d,
              f = this.getNameValue("mute"),
              e = d & (1 << MUTEALL_BIT_IDX),
              g = this.type == E_STRIP_TYPE.FX && d & (1 << MUTEFX_BIT_IDX),
              d = !1;
            IS_UI_24 && vcaStrips[c] && (d = vcaStrips[c].mute.getState());
            var h = this.getNameValue("forceunmute");
            ctx.fillStyle = h ? color.tvMuteUn : color.tvMuteMG;
            ctx.textAlign = "center";
            ctx.font = "10pt open_sans_condensedbold";
            var k = 0,
              m = this.stereo ? 9 : 11;
            e && ctx.fillText("A", m, 142 + 16 * k);
            k++;
            f && ctx.fillText("M", m, 142 + 16 * k);
            k++;
            g && ctx.fillText("F", m, 142 + 16 * k);
            k++;
            for (f = 0; 6 > f; f++) b & (1 << f) && ((ctx.fillStyle = a & (1 << f) ? (h ? color.tvMuteUn : color.tvMuteMG) : "#888"), ctx.fillText(f + 1 + "", m, 142 + 16 * k)), k++;
            IS_UI_24 && 0 <= c && ((ctx.fillStyle = d ? (h ? color.tvMuteUn : color.tvMuteMG) : "#888"), ctx.fillText("V" + (c + 1), m, 142 + 16 * k));
          }
          this.blocked_gain && ((ctx.fillStyle = color.yellow), ctx.fillRoundRect(4, 190, 16, 18, 4), drawImage(res.bolt_icon, 4, 191));
          IS_UI_24 && this.type == E_STRIP_TYPE.SUB && this.getNameValue("exclude") && drawImage(res.SPEAKER_MINUS, this.w - 18, this.h - 20);
          IS_UI_24 && this.type == E_STRIP_TYPE.AUX && this.getNameValue("link2master") && drawImage(res.LINK, this.w - 19, this.h - 20);
          if (IS_UI_24 && this.type == E_STRIP_TYPE.IN)
            switch (((c = this.getNameValue("amixgroup")), c)) {
              case 0:
              case 1:
                (ctx.fillStyle = "#666"),
                0 == c && getValue("automix.a.on") && (ctx.fillStyle = "#A14FCA"),
                1 == c && getValue("automix.b.on") && (ctx.fillStyle = "#A14FCA"),
                  (ctx.textAlign = "center"),
                  ctx.fillText("A" + (1 == c ? "B" : "A"), this.w - 11, this.h - 54);
            }
        },
        cachePaint: function (a) {
          a
            ? (a = ctx)
            : ((this.cache = document.createElement("canvas")),
              (a = this.cache.getContext("2d")),
              isRetina ? ((this.cache.width = 2 * this.w), (this.cache.height = 2 * this.h), a.scale(2, 2)) : ((this.cache.width = this.w), (this.cache.height = this.h)));
          switch (this.type) {
            case E_STRIP_TYPE.VCA:
            case E_STRIP_TYPE.AUX:
              fillVertPatternCtx(res.stripTile, this.h, a);
              drawImageCtx(res.stripBottom, 0, this.h - res.stripBottom.h(), a);
              HAVE_LATENCY ? drawImageCtx(res.stripAuxTop, 0, 0, a) : drawImageCtx(res.stripAuxTop2, 0, 0, a);
              break;
            default:
              fillVertPatternCtx(res.stripTile, this.h, a), drawImageCtx(res.stripBottom, 0, this.h - res.stripBottom.h(), a), drawImageCtx(res.stripTop, 0, 0, a);
          }
          if (this.type != E_STRIP_TYPE.IN) {
            switch (this.type) {
              case E_STRIP_TYPE.FX:
                a.globalAlpha = 0.08;
                break;
              case E_STRIP_TYPE.MEDIA:
                a.globalAlpha = 0.05;
                break;
              case E_STRIP_TYPE.SUB:
                a.globalAlpha = 0.07;
                break;
              case E_STRIP_TYPE.AUX:
                a.globalAlpha = 0.07;
                break;
              case E_STRIP_TYPE.LINEIN:
                a.globalAlpha = 0.07;
                break;
              default:
                a.globalAlpha = 0.07;
            }
            a.fillStyle = this.color;
            a.fillRect(0, 0, this.w, this.h);
            a.globalAlpha = 1;
          }
          drawMarksDB(this.sl.h, 134, 100, a);
          this.stereo ? drawVUMarks(this.vu2, this.gr2, a) : drawVUMarks(this.vu, this.gr, a);
          this.cacheH = this.h;
        },
        cachePaintGain: function () {
          cachedStripGain = document.createElement("canvas");
          var a = cachedStripGain.getContext("2d");
          isRetina ? ((cachedStripGain.width = 2 * this.w), (cachedStripGain.height = 2 * this.h), a.scale(2, 2)) : ((cachedStripGain.width = this.w), (cachedStripGain.height = this.h));
          fillVertPatternCtx(res.stripTile, this.h, a);
          drawImageCtx(res.stripBottom, 0, this.h - res.stripBottom.h(), a);
          drawImageCtx(res.stripAuxTop, 0, 0, a);
          a.globalAlpha = 0.07;
          a.fillStyle = "#f00";
          a.fillRect(0, 0, this.w, this.h);
          a.globalAlpha = 1;
          this.drawMarksGain(a);
          drawVUMarks(this.vuPre, null, a);
          cachedStripH = this.h;
        },
      }),
      GainStrip = Class.create(Widget, {
        initialize: function ($super, b, c) {
          $super(b);
          this.CACHED_DRAWING = CACHE_TECHNOLOGIES;
          this.widgetName = "Strip";
          this.subId = this.id = c;
          this.type = E_STRIP_TYPE.GAIN;
          this.name = "zz.xx";
          this.w = measures.mixerStripWidth;
          this.setAnchors(null, 0, null, 0);
          this.text = "CH 0";
          this.color = color.red;
          this.subGroup = -1;
          this.stereo = !1;
          this.gainName = this.name = allStrips[c].name;
          HAVE_ROUTING && (this.gainName = "hw." + this.subId + ".");
          this.defaultSRC = "hw." + this.subId;
          this.widgetName += "(" + this.name + ")";
          this.linked = this.isClipping = !1;
          this.linkTarget = null;
          this.firstInGroup = this.lastInGroup2 = this.lastInGroup = !1;
          this.cacheGain = this.cache = null;
          this.cacheH = 0;
          this.gtimer = null;
          this.blocked_gain = !1;
          this.btimer = null;
          this.noGain = !1;
          this.initWidgets();
          this.updGain();
        },
        onShow: function () {
          this.updGain();
          mode == E_MODE.BIG
            ? ((this.slGain.fader = res.BMSL_SILVER), (this.slGain.faderH = res.BMSL_SILVER.h() - 3), (this.slGain.faderX = 61))
            : ((this.slGain.fader = res.gainFader), (this.slGain.faderH = res.gainFader.h() - 12), (this.slGain.faderX = 60));
        },
        updGain: function () {
          if (HAVE_ROUTING) {
            var a = this.getNameValue("src");
            (isString(a) && a) || ((a = "hw." + this.subId), this.setNameValue("src", a));
            this.led.state = 0;
            this.slGain.disabled = !1;
            this.noGain = this.slGain.hideOnDisabled = !1;
            this.polarity.setKey(this.name + "invert", !0);
            this.delay.setKey(this.name + "delay", !0);
            a.startsWith("hw.")
              ? (this.phantom.show(),
                this.slGain.show(),
                (this.gainName = a += "."),
                this.unRegAllKeys(),
                this.regKey(a + "hiz"),
                this.regKey(a + "disablegain"),
                this.phantom.setKey(a + "phantom", !0),
                this.slGain.setKey(a + "gain", !0),
                (this.led.state = 0),
                (this.led.keyPrefix = a),
                this.led.unRegAllKeys(),
                this.led.regKey(a + "gain"),
                this.led.regKey(a + "disablegain"),
                this.hiz.setKey(a + "hiz", !0),
                hasHIZ(this) ? this.hiz.show() : this.hiz.hide())
              : (this.phantom.hide(), this.hiz.hide(), (this.slGain.disabled = !0), (this.slGain.hideOnDisabled = !0), (this.led.state = 2), (this.led.msg = "..."), (this.noGain = !0));
          }
        },
        initWidgets: function () {
          var a = this;
          this.led = new LED(this);
          this.led.setPos(6, 4);
          this.led.setSize(100, 38);
          this.led.redrawParent = !0;
          IS_UI_24 &&
          (this.led.getState = function () {
            if (2 == this.state) {
              var b = a.getNameValue("src");
              this.msg = b = E_SRC_NAMES[b] || "...";
            }
          });
          this.led.onInput = function (b) {
            b = parseFloat(b);
            isNaN(b) ? showPopupMsg(lang.WRONG_VALUE) : a.slGain.setValue((IS_UI_24 ? GAIN24toV : GAINPtoV)(b));
          };
          this.led.onDouble = function () {
            a.slGain.setValue((IS_UI_24 ? GAIN24toV : GAINPtoV)(0));
          };
          this.phantom = new CheckBox(this);
          this.phantom.param = "phantom";
          this.phantom.setKey(this.gainName + "phantom", !0);
          this.phantom.setPos(4, 46);
          this.phantom.setImages(res.b48Off, res.b48On);
          this.phantom.getState = function () {
            this.disabled = getValue(a.gainName + "disablegain");
            hasHIZ(a) && !this.disabled && (this.disabled = 1 == a.getGainNameValue("hiz"));
          };
          HAVE_ROUTING
            ? (this.phantom.onToggle = function () {
              blockGainBySrc(this.key.replace(".phantom", ""));
              updateByKey(this.key);
            })
            : ((this.phantom.onToggleDown = function () {
              blockStrip(a.id, PHANTOM_OFF_DELAY);
            }),
              (this.phantom.onToggleUp = function () {
                blockStrip(a.id, PHANTOM_ON_DELAY);
              }));
          this.polarity = new CheckBox(this);
          this.polarity.param = "invert";
          this.polarity.setKey(this.name + "invert", !0);
          this.polarity.setPos(58, 46);
          this.polarity.setImages(res.bPIOff, res.bPIOn);
          this.hiz = new CheckBox(this);
          this.hiz.setKey(this.gainName + "hiz", !0);
          this.hiz.setPos(4, 88);
          this.hiz.setImages(res.hiz_off, res.hiz_on);
          this.hiz.getState = function () {
            this.disabled = getValue(a.gainName + "disablegain");
          };
          this.hiz.onToggleUp = function () {
            1 == a.getGainNameValue("phantom") && (a.setGainNameValue("phantom", 0), HAVE_ROUTING ? blockGainBySrc(this.key.replace(".hiz", "")) : blockStrip(a.id, PHANTOM_OFF_DELAY));
          };
          HAVE_ROUTING
            ? (this.hiz.onToggle = function () {
              updateByKey(this.key);
            })
            : hasHIZ(this) || this.hiz.hide();
          HAVE_LATENCY &&
          ((this.delay = new TButton(this)),
            this.delay.setPos(58, 88),
            this.delay.setImages(res.cl_s_btn_off, res.cl_s_btn_on),
            (this.delay.redrawParent = !0),
            (this.delay.opaque = !1),
            this.delay.setKey(this.name + "delay", !0),
            (this.delay.getState = function () {
              this.text = VtoLATENCY(a.getNameValue("delay"));
            }),
            (this.delay.onPress = function () {
              askForDelay(a, MAX_DELAY_INPUT, "delay", a.getName() + " " + lang.INPUT_DELAY);
            }));
          this.slGain = new Slider(this, this.type);
          this.slGain.fader = res.gainFader;
          this.slGain.param = "gain";
          this.slGain.setKey(this.name + "gain", !0);
          this.slGain.setPos(0, 134);
          this.slGain.color = color.red;
          this.slGain.w = this.w;
          this.slGain.laneOffset = 36;
          this.slGain.faderX = 60;
          this.slGain.bottomMargin = 24;
          this.slGain.noStereoArrows = !0;
          this.slGain.isGain = !0;
          for (var b = 0.29, c = []; 1 > b; ) c.push(b), (b += 0.0225);
          c.push(1);
          this.slGain.latch = !1;
          this.slGain.latchArr = c;
          this.slGain.latchStep = 0.0225;
          this.slGain.getState = function () {
            this.disabled = this.disabled || getValue(a.gainName + "disablegain");
          };
          this.slGain.onDouble = function () {
            setMode(E_MODE.MIX);
          };
          this.slGain.onDoubleKnob = function () {
            editWidget.setMode(editWidget.arr[0]);
            setMode(E_MODE.EDIT);
          };
          HAVE_ROUTING &&
          (this.slGain.onValue = function () {
            updateByKey(this.key);
          });
          this.vuPre = new VUMeter(this);
          this.vuPre.setAnchors(21, 149, null, 26);
          this.vuPre.gain = !0;
          this.clipPre = new ClipBulb(this);
          this.clipPre.setPos(15, 127);
          this.clipPre.master = !0;
        },
        getLabel: function () {
          return this.text;
        },
        getColor: function () {
          return this.color;
        },
        getName: function () {
          return this.st.getName();
        },
        setName: function (a) {
          setValue(this.name + "name", a);
          regUpdate(bottomWidget);
        },
        getGainNameValue: function (a) {
          return getValue(this.gainName + a);
        },
        setGainNameValue: function (a, b) {
          return setValue(this.gainName + a, b);
        },
        getNameValue: function (a) {
          return getValue(this.name + a);
        },
        setNameValue: function (a, b) {
          setValue(this.name + a, b);
          regUpdate(this);
        },
        setVUPre: function (a) {
          if (1 <= a) this.clipPre.clip(), (this.slGain.noUp = !0), (this.slGain.noUpValue = this.slGain.value), masterWidget.setClipped();
          else if (this.clipPre.state && !this.clipPre.releasing) {
            this.clipPre.release();
            masterWidget.clipRelease();
            var b = this;
            clearTimeoutC(this.gtimer);
            this.gtimer = setTimeout(function () {
              b.slGain.noUp = !1;
            }, CLIP_HOLD_TIME);
          }
          this.vuPre.setValueExt(0, a);
        },
        drawMarksGain: function (a) {
          var b = 80,
            c = 35;
          mode == E_MODE.BIG && ((b = 47), (c = 18));
          b = this.slGain.h - b;
          a.fillStyle = "rgba(255,255,255,0.35)";
          a.textAlign = "center";
          a.font = font.stripMarks;
          GAINPtoV(30);
          GAINPtoV(0);
          GAINPtoV(-20);
          IS_UI_24 && (GAIN24toV(30), GAIN24toV(0));
          var d = [1, GAINPtoV(40), GAINPtoV(30), GAINPtoV(20), GAINPtoV(10), GAINPtoV(-10), GAINPtoV(-20), GAINPtoV(-30), 0];
          IS_UI_24 && (d = [1, GAIN24toV(50), GAIN24toV(40), GAIN24toV(30), GAIN24toV(20), GAIN24toV(10), 0]);
          for (var f = 0; f < d.length; f++) {
            var e = Math.floor(b * (1 - d[f])) + c;
            a.fillStyle = "rgba(0,0,0,0.2)";
            a.fillRect(92, 134 + e, 10, 1);
            a.fillStyle = "rgba(255,255,255,0.26)";
            a.fillRect(92, 134 + e + 1, 10, 1);
          }
          e = b * (1 - GAINPtoV(0)) + c;
          IS_UI_24 && (e = b * (1 - GAIN24toV(0)) + c);
          a.fillStyle = "#939394";
          a.fillRect(92, 134 + (e | 0), 12, 3);
        },
        DRAW_UPDATE_CHECK: function () {
          var a;
          a = this.getGainNameValue("gain");
          var b = this.getGainNameValue("phantom"),
            c = this.getNameValue("invert");
          a = "" + a + b + c + this.blocked_gain + (selectedStrip.id == this.id);
          a += this.firstInGroup;
          a += this.lastInGroup;
          a += this.slGain.slowMode;
          HAVE_ROUTING && (a += this.getNameValue("src"));
          IS_UI_24 && (a += this.getNameValue("delay"));
          hasHIZ(this) && (a += this.getGainNameValue("hiz"));
          if (a == this.CACHED_PARAMS) return !1;
          this.CACHED_PARAMS = a;
          return !0;
        },
        paint: function () {
          cachedStripGainH != this.h && this.cachePaint();
          drawImage(cachedStripGain, 0, 0);
          this.noGain && ((ctx.fillStyle = "rgba(0,0,0,0.3)"), ctx.fillRect(0, 0, this.w, this.h));
          var a = this.getNameValue("stereoIndex"),
            b = selectedStrip.id == this.id,
            c = !1;
          switch (this.type) {
            case E_STRIP_TYPE.IN:
            case E_STRIP_TYPE.MEDIA:
              settings.me.contains(this.id) && (c = !0);
              0 == a && settings.me.contains(this.id + 1) && (c = !0);
              1 == a && settings.me.contains(this.id - 1) && (c = !0);
              break;
            case E_STRIP_TYPE.AUX:
              settings.meout == this.subId && (c = !0), 0 == a && settings.meout == this.subId + 1 && (c = !0), 1 == a && settings.meout == this.subId - 1 && (c = !0);
          }
          b && ((ctx.globalAlpha = 0.055), (ctx.fillStyle = "#fff"), ctx.fillRect(1, 0, this.w - 2, this.h), (ctx.globalAlpha = 1));
          ctx.fillStyle = this.color;
          ctx.fillRect(0 + (this.firstInGroup ? 2 : 0), this.h - 3, this.w - (this.firstInGroup ? 2 : 0) - (this.lastInGroup ? 2 : 0), 3);
          ctx.textBaseline = "alphabetic";
          a = this.text;
          HAVE_ROUTING &&
          (b = this.getNameValue("src")) &&
          isString(b) &&
          b != this.defaultSRC &&
          ((b = E_SRC_NAMES[b] || b), (ctx.fillStyle = "#999999"), (ctx.textAlign = "center"), (ctx.font = "9pt open_sans_condensedbold"), ctx.fillText(b, this.w - 16, this.h - 10, 28));
          ctx.textAlign = "left";
          ctx.font = font.stripChannel;
          ctx.fillStyle = c ? color.me : "#B5B5B5";
          ctx.fillText(a, 11, this.h - 10);
          this.blocked_gain && (ctx.setShadow(null), (ctx.fillStyle = color.yellow), ctx.fillRoundRect(4, 190, 16, 18, 4), drawImage(res.bolt_icon, 4, 191));
        },
        cachePaint: function () {
          cachedStripGain = document.createElement("canvas");
          var a = cachedStripGain.getContext("2d");
          isRetina ? ((cachedStripGain.width = 2 * this.w), (cachedStripGain.height = 2 * this.h), a.scale(2, 2)) : ((cachedStripGain.width = this.w), (cachedStripGain.height = this.h));
          fillVertPatternCtx(res.stripTile, this.h, a);
          drawImageCtx(res.stripBottom, 0, this.h - res.stripBottom.h(), a);
          drawImageCtx(res.stripAuxTop, 0, 0, a);
          a.globalAlpha = 0.07;
          a.fillStyle = "#f00";
          a.fillRect(0, 0, this.w, this.h);
          a.globalAlpha = 1;
          this.drawMarksGain(a);
          drawVUMarks(this.vuPre, null, a);
          cachedStripGainH = this.h;
        },
      }),
      GainStrip2 = Class.create(Widget, {
        initialize: function ($super, b, c, d) {
          $super(b);
          this.CACHED_DRAWING = CACHE_TECHNOLOGIES;
          this.widgetName = "Strip";
          this.id = c;
          this.subId = d;
          this.type = 777;
          this.name = "zz.xx";
          this.w = measures.mixerStripWidth;
          this.setAnchors(null, 0, null, 0);
          this.text = "HW " + (this.subId + 1);
          this.color = color.red;
          this.subGroup = -1;
          this.stereo = !1;
          this.gainName = this.name = "hw." + this.subId + ".";
          this.widgetName += "(" + this.name + ")";
          this.linked = this.isClipping = !1;
          this.linkTarget = null;
          this.firstInGroup = this.lastInGroup2 = this.lastInGroup = !0;
          this.cacheGain = this.cache = null;
          this.cacheH = 0;
          this.gtimer = null;
          this.blocked_gain = !1;
          this.btimer = null;
          this.initWidgets();
        },
        onShow: function () {
          mode == E_MODE.BIG
            ? ((this.slGain.fader = res.BMSL_SILVER), (this.slGain.faderH = res.BMSL_SILVER.h() - 3), (this.slGain.faderX = 61))
            : ((this.slGain.fader = res.gainFader), (this.slGain.faderH = res.gainFader.h() - 12), (this.slGain.faderX = 60));
        },
        updGain: function () {},
        initWidgets: function () {
          var a = this;
          this.unRegAllKeys();
          this.regKey(this.name + "hiz");
          this.regKey(this.name + "disablegain");
          this.led = new LED(this);
          this.led.setPos(6, 4);
          this.led.setSize(100, 38);
          this.led.regKey(this.name + "gain");
          this.led.needStereo = !1;
          this.led.keyPrefix = this.gainName;
          this.led.onInput = function (b) {
            b = parseFloat(b);
            isNaN(b) ? showPopupMsg(lang.WRONG_VALUE) : a.slGain.setValue((IS_UI_24 ? GAIN24toV : GAINPtoV)(b));
          };
          this.led.onDouble = function () {
            a.slGain.setValue((IS_UI_24 ? GAIN24toV : GAINPtoV)(0));
          };
          this.phantom = new CheckBox(this);
          this.phantom.param = "phantom";
          this.phantom.setKey(this.name + "phantom", !0);
          this.phantom.setPos(4, 46);
          this.phantom.setImages(res.b48Off, res.b48On);
          this.phantom.getState = function () {
            this.disabled = getValue(a.gainName + "disablegain");
            hasHIZ(a) && !this.disabled && (this.disabled = 1 == a.getNameValue("hiz"));
          };
          this.phantom.onToggle = function () {
            blockGainBySrc(this.key.replace(".phantom", ""));
            updateByKey(this.key);
          };
          2 > this.subId % 20 &&
          (this.phantom.regKey(this.name + "hiz"),
            (this.hiz = new CheckBox(this)),
            this.hiz.setKey(this.name + "hiz", !0),
            this.hiz.setPos(4, 88),
            this.hiz.setImages(res.hiz_off, res.hiz_on),
            (this.hiz.getState = function () {
              this.disabled = getValue(a.gainName + "disablegain");
            }),
            (this.hiz.onToggleUp = function () {
              1 == a.getNameValue("phantom") && (a.setNameValue("phantom", 0), blockGainBySrc(this.key.replace(".hiz", "")));
            }),
            (this.hiz.onToggle = function () {
              updateByKey(this.key);
            }));
          this.slGain = new Slider(this, this.type);
          this.slGain.fader = res.gainFader;
          this.slGain.param = "gain";
          this.slGain.noFocus = !0;
          this.slGain.setKey(this.name + "gain", !0);
          this.slGain.setPos(0, 134);
          this.slGain.color = color.red;
          this.slGain.w = this.w;
          this.slGain.laneOffset = 36;
          this.slGain.faderX = 60;
          this.slGain.bottomMargin = 24;
          this.slGain.isGain = !0;
          this.slGain.getState = function () {
            this.disabled = this.disabled || getValue(a.gainName + "disablegain");
          };
          this.slGain.onDouble = function () {
            setMode(E_MODE.MIX);
          };
          this.slGain.onValue = function () {
            updateByKey(this.key);
          };
        },
        getLabel: function () {
          return this.text;
        },
        getColor: function () {
          return this.color;
        },
        getName: function () {
          return "[ in " + (this.subId + 1) + " ]";
        },
        setName: function (a) {},
        getNameValue: function (a) {
          return getValue(this.name + a);
        },
        setNameValue: function (a, b) {
          setValue(this.name + a, b);
          regUpdate(this);
        },
        drawMarksGain: function (a) {
          var b = 80,
            c = 35;
          mode == E_MODE.BIG && ((b = 47), (c = 18));
          b = this.slGain.h - b;
          a.fillStyle = "rgba(255,255,255,0.35)";
          a.textAlign = "center";
          a.font = font.stripMarks;
          GAINPtoV(30);
          GAINPtoV(0);
          GAINPtoV(-20);
          IS_UI_24 && (GAIN24toV(30), GAIN24toV(0));
          a.shadowColor = "transparent";
          var d = [1, GAINPtoV(40), GAINPtoV(30), GAINPtoV(20), GAINPtoV(10), GAINPtoV(-10), GAINPtoV(-20), GAINPtoV(-30), 0];
          IS_UI_24 && (d = [1, GAIN24toV(50), GAIN24toV(40), GAIN24toV(30), GAIN24toV(20), GAIN24toV(10), 0]);
          for (var f = 0; f < d.length; f++) {
            var e = Math.floor(b * (1 - d[f])) + c;
            a.fillStyle = "rgba(0,0,0,0.2)";
            a.fillRect(92, 134 + e, 10, 1);
            a.fillStyle = "rgba(255,255,255,0.26)";
            a.fillRect(92, 134 + e + 1, 10, 1);
          }
          e = b * (1 - GAINPtoV(0)) + c;
          IS_UI_24 && (e = b * (1 - GAIN24toV(0)) + c);
          a.fillStyle = "#939394";
          a.fillRect(92, 134 + (e | 0), 12, 3);
        },
        DRAW_UPDATE_CHECK: function () {
          var a;
          a = this.getNameValue("gain");
          var b = this.getNameValue("phantom");
          a = "" + a + b + this.blocked_gain + this.slGain.slowMode;
          2 > this.subId && (a += this.getNameValue("hiz"));
          if (!this.CACHED_PARAMS.length) return (this.CACHED_PARAMS = a), !0;
          if (a == this.CACHED_PARAMS) return !1;
          this.CACHED_PARAMS = a;
          return !0;
        },
        paint: function () {
          cachedStripGain2H != this.h && this.cachePaint();
          drawImage(cachedStripGain2, 0, 0);
          var a = this.getNameValue("stereoIndex"),
            b = selectedStrip.id == this.id;
          switch (this.type) {
            case E_STRIP_TYPE.IN:
            case E_STRIP_TYPE.MEDIA:
              settings.me.contains(this.id), 0 == a && settings.me.contains(this.id + 1), 1 == a && settings.me.contains(this.id - 1);
          }
          b && ((ctx.globalAlpha = 0.055), (ctx.fillStyle = "#fff"), ctx.fillRect(1, 0, this.w - 2, this.h), (ctx.globalAlpha = 1));
          ctx.fillStyle = this.color;
          ctx.fillRect(0 + (this.firstInGroup ? 2 : 0), this.h - 3, this.w - (this.firstInGroup ? 2 : 0) - (this.lastInGroup ? 2 : 0), 3);
          ctx.textBaseline = "alphabetic";
          a = this.text;
          ctx.textAlign = "left";
          ctx.font = font.stripChannel;
          ctx.fillStyle = "#B5B5B5";
          ctx.fillText(a, 11, this.h - 10);
          this.blocked_gain && (ctx.setShadow(null), (ctx.fillStyle = color.yellow), ctx.fillRoundRect(4, 190, 16, 18, 4), drawImage(res.bolt_icon, 4, 191));
        },
        cachePaint: function () {
          cachedStripGain2 = document.createElement("canvas");
          var a = cachedStripGain2.getContext("2d");
          isRetina ? ((cachedStripGain2.width = 2 * this.w), (cachedStripGain2.height = 2 * this.h), a.scale(2, 2)) : ((cachedStripGain2.width = this.w), (cachedStripGain2.height = this.h));
          fillVertPatternCtx(res.stripTile, this.h, a);
          drawImageCtx(res.stripBottom, 0, this.h - res.stripBottom.h(), a);
          drawImageCtx(res.stripAuxTop, 0, 0, a);
          a.globalAlpha = 0.04;
          a.fillStyle = "#f00";
          a.fillRect(0, 0, this.w, this.h);
          a.globalAlpha = 1;
          this.drawMarksGain(a);
          drawVUMarks(this.vuPre, null, a);
          cachedStripH = this.h;
        },
      }),
      MasterStrip = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "MasterStrip";
          this.name = "m.";
          this.y = measures.topWidgetHeight;
          this.w = measures.masterStripWidth;
          this.botLabelHeight = res.mStripBottomLabel.h();
          this.botHeight = res.mStripBottom.h();
          this.color = color.red;
          this.stereo = !0;
          this.type = E_STRIP_TYPE.MASTER;
          this.subId = this.id = -1;
          this.text = lang.MASTER;
          this.muted = this.soloed = this.clipped = !1;
          this.timer = this.MTX2 = this.MTX = null;
          this.lastClickTime = -1;
          this.regKey("m.dim");
          this.initWidgets();
        },
        setVU2: function (a, b, c, d, f, e, g, h) {
          1 <= b ? this.clip.clip() : this.clip.state && !this.clip.releasing && this.clip.release();
          this.vu.setValueExt(a, b);
          1 <= d ? this.clip2.clip() : this.clip2.state && !this.clip2.releasing && this.clip2.release();
          this.vu2.setValueExt(c, d);
          HAVE_MATRIX && this.MTX && this.MTX.setVU(a, b);
          HAVE_MATRIX && this.MTX2 && this.MTX2.setVU(c, d);
          settings.disableVUs2 || (this.gr.setValue(f), this.gr2.setValue(e), IS_UI_24 || (this.gi.setValue(g), this.gi2.setValue(h)));
        },
        initWidgets: function () {
          this.led = new LED(this);
          this.led.setPos(6, 4);
          this.led.setSize(115, 38);
          this.led.color = color.mLedText;
          this.led.master = !0;
          this.led.onDown = function () {
            mode == E_MODE.MODALS ? setMode(E_MODE.MIX) : (modalsWidget.setMode(0), setMode(E_MODE.MODALS));
          };
          this.pan = new PanSlider(this);
          this.pan.key = this.name + "pan";
          this.pan.setPos(5, 46);
          this.pan.setSize(117, 30);
          var a = this;
          this.sl = new Slider(this, E_STRIP_TYPE.MASTER);
          this.sl.param = "mix";
          this.sl.key = this.name + "mix";
          this.sl.setPos(0, 134);
          this.sl.canScroll = !1;
          this.sl.w = this.w;
          this.sl.laneOffset = 34;
          this.sl.faderX = 77;
          this.sl.bottomMargin = 58;
          this.sl.master = !0;
          this.sl.onhold = function () {
            if (settings.masterLock && this.locked) {
              this.locked = !1;
              this.slide = !0;
              var b = this;
              clearTimeout(this.holdTimer);
              this.holdTimer = setTimeout(function () {
                var c = Math.abs(b.pressPoint[1] - b.currentPoint[1]);
                5 > Math.abs(b.pressPoint[0] - b.currentPoint[0]) && 5 > c && (settings.nudge && (b.slowMode = !0), regUpdate(a));
              }, this.holdTime + 500);
            } else settings.nudge && (this.slowMode = !0);
            regUpdate(a);
          };
          this.sl.onDoubleKnob = function () {
            editWidget.setMode(editWidget.arr[0]);
            mode != E_MODE.EDIT && setMode(E_MODE.EDIT);
            -1 != selectedChannel && setSelected(-1);
          };
          this.f1c = new CheckBox(this);
          this.f1c.setPos(4, 88);
          this.f1c.setImages(res.PLAYS_OFF, res.PLAYS_STOP);
          this.f1c.font = "14px open_sans_condensedbold";
          this.f1c.textColor = color.black2;
          this.f1c.textColorActive = color.white;
          this.f1c.shadowColorActive = "#333";
          this.f1c.shadowColor = "#ccc";
          this.f1c.opaque = !1;
          this.f1c.regKey("mgmask");
          this.f1c.regKey("m.dim");
          this.f1c.regKey("var.currentState");
          this.f1c.regKey("var.recBusy");
          this.f1c.regKey("var.isRecording");
          this.f1c.regKey("var.present");
          this.f1c.regKey("var.mtk.present");
          this.f1c.regKey("var.mtk.currentState");
          this.f1c.regKey("var.mtk.rec.busy");
          this.f1c.regKey("var.mtk.rec.currentState");
          this.f1c.textParam = { font: "14px open_sans_condensedbold", x: null, y: null, offsetX: -1, offsetY: -3, pressOffsetX: 0, pressOffsetY: 1, align: "center", valign: "middle", shadow: ["#ccc", 0, 1, 1], dy: 12 };
          this.f1c.getState = function () {
            this.text = null;
            var a = settings.bigSlideOut && slideOutWidget.enabled ? E_FFUNC.MUTE_ALL : settings.f1func;
            this.buttonMode = this.disabled = !1;
            this.state = 0;
            switch (a) {
              case E_FFUNC.NEWSNAP:
                this.img0 = res.SS_OFF;
                this.img1 = res.SS_ON;
                this.buttonMode = !0;
                break;
              case E_FFUNC.UPDCURSNAP:
                this.img0 = res.SSUPD_OFF;
                this.img1 = res.SSUPD_ON;
                this.buttonMode = !0;
                break;
              case E_FFUNC.NEXT_SNAP:
                this.img0 = res.NXT_SNP_OFF;
                this.img1 = res.NXT_SNP_ON;
                this.buttonMode = !0;
                break;
              case E_FFUNC.PREV_SNAP:
                this.img0 = res.PRV_SNP_OFF;
                this.img1 = res.PRV_SNP_ON;
                this.buttonMode = !0;
                break;
              case E_FFUNC.MUTE_ALL:
                this.state = isMuteAll() ? 1 : 0;
                this.img0 = res.FFUNC_B_OFF;
                this.img1 = res.FFUNC_B_RED;
                this.text = lang.MUTE_ALL.replace(" ", "\n");
                break;
              case E_FFUNC.DIM:
                this.state = getValue("m.dim") ? 1 : 0;
                this.img0 = res.FFUNC_B_OFF;
                this.img1 = res.FFUNC_B_BLU;
                this.text = lang.DIM;
                break;
              case E_FFUNC.PLAY:
                this.state = 2 == getValue("var.currentState") ? 1 : 0;
                this.disabled = 0 == getValue("var.present");
                this.img0 = res.PLAYS_OFF;
                this.img1 = res.PLAYS_STOP;
                break;
              case E_FFUNC.REC:
                this.state = getValue("var.isRecording");
                this.disabled = 0 == getValue("var.present") || 0.5 < getValue("var.recBusy");
                this.img0 = res.RECS_OFF;
                this.img1 = res.RECS_STOP;
                break;
              case E_FFUNC.MTK_PLAY:
                this.state = 2 == getValue("var.mtk.currentState") ? 1 : 0;
                this.disabled = 0 == getValue("var.mtk.present") || 0.5 < getValue("var.mtk.rec.busy") || 0.5 < getValue("var.mtk.rec.currentState");
                this.img0 = res.MTK_PLAY;
                this.img1 = res.MTK_STOP;
                break;
              case E_FFUNC.MTK_REC:
                this.state = getValue("var.mtk.rec.currentState");
                this.disabled = 0 == getValue("var.mtk.present") || 0.5 < getValue("var.mtk.rec.busy") || 0 != getValue("var.mtk.currentState");
                this.img0 = res.MTK_REC_OFF;
                this.img1 = res.MTK_REC_ON;
                break;
              default:
                (this.img1 = res.bF1Off), (this.img2 = res.bF1On);
            }
          };
          this.f1c.onToggle = function () {
            doFfunc(settings.bigSlideOut && slideOutWidget.enabled ? E_FFUNC.MUTE_ALL : settings.f1func);
          };
          this.f2c = new CheckBox(this);
          this.f2c.setPos(67, 88);
          this.f2c.setImages(res.PLAYS_OFF, res.PLAYS_STOP);
          this.f2c.font = "14px open_sans_condensedbold";
          this.f2c.textColor = color.black2;
          this.f2c.textColorActive = color.white;
          this.f2c.shadowColorActive = "#333";
          this.f2c.shadowColor = "#ccc";
          this.f2c.regKey("mgmask");
          this.f2c.regKey("m.dim");
          this.f2c.regKey("var.currentState");
          this.f2c.regKey("var.recBusy");
          this.f2c.regKey("var.isRecording");
          this.f2c.regKey("var.present");
          this.f2c.regKey("var.mtk.present");
          this.f2c.regKey("var.mtk.currentState");
          this.f2c.regKey("var.mtk.rec.busy");
          this.f2c.regKey("var.mtk.rec.currentState");
          this.f2c.textParam = { font: "14px open_sans_condensedbold", x: null, y: null, offsetX: -1, offsetY: -3, pressOffsetX: 0, pressOffsetY: 1, align: "center", valign: "middle", shadow: ["#ccc", 0, 1, 1], dy: 12 };
          this.f2c.getState = function () {
            this.text = null;
            var a = settings.bigSlideOut && slideOutWidget.enabled ? E_FFUNC.DIM : settings.f2func;
            this.buttonMode = this.disabled = !1;
            this.state = 0;
            switch (a) {
              case E_FFUNC.NEWSNAP:
                this.img0 = res.SS_OFF;
                this.img1 = res.SS_ON;
                this.buttonMode = !0;
                break;
              case E_FFUNC.UPDCURSNAP:
                this.img0 = res.SSUPD_OFF;
                this.img1 = res.SSUPD_ON;
                this.buttonMode = !0;
                break;
              case E_FFUNC.NEXT_SNAP:
                this.img0 = res.NXT_SNP_OFF;
                this.img1 = res.NXT_SNP_ON;
                this.buttonMode = !0;
                break;
              case E_FFUNC.PREV_SNAP:
                this.img0 = res.PRV_SNP_OFF;
                this.img1 = res.PRV_SNP_ON;
                this.buttonMode = !0;
                break;
              case E_FFUNC.MUTE_ALL:
                this.state = isMuteAll() ? 1 : 0;
                this.img0 = res.FFUNC_B_OFF;
                this.img1 = res.FFUNC_B_RED;
                this.text = lang.MUTE_ALL.replace(" ", "\n");
                break;
              case E_FFUNC.DIM:
                this.state = getValue("m.dim") ? 1 : 0;
                this.img0 = res.FFUNC_B_OFF;
                this.img1 = res.FFUNC_B_BLU;
                this.text = lang.DIM;
                break;
              case E_FFUNC.PLAY:
                this.state = 2 == getValue("var.currentState") ? 1 : 0;
                this.disabled = 0 == getValue("var.present");
                this.img0 = res.PLAYS_OFF;
                this.img1 = res.PLAYS_STOP;
                break;
              case E_FFUNC.REC:
                this.state = getValue("var.isRecording");
                this.disabled = 0 == getValue("var.present") || 0.5 < getValue("var.recBusy");
                this.img0 = res.RECS_OFF;
                this.img1 = res.RECS_STOP;
                break;
              case E_FFUNC.MTK_PLAY:
                this.state = 2 == getValue("var.mtk.currentState") ? 1 : 0;
                this.disabled = 0 == getValue("var.mtk.present") || 0.5 < getValue("var.mtk.rec.busy") || 0.5 < getValue("var.mtk.rec.currentState");
                this.img0 = res.MTK_PLAY;
                this.img1 = res.MTK_STOP;
                break;
              case E_FFUNC.MTK_REC:
                this.state = getValue("var.mtk.rec.currentState");
                this.disabled = 0 == getValue("var.mtk.present") || 0.5 < getValue("var.mtk.rec.busy") || 0 != getValue("var.mtk.currentState");
                this.img0 = res.MTK_REC_OFF;
                this.img1 = res.MTK_REC_ON;
                break;
              default:
                (this.img1 = res.bF2Off), (this.img2 = res.bF2On);
            }
          };
          this.f2c.onToggle = function () {
            doFfunc(settings.bigSlideOut && slideOutWidget.enabled ? E_FFUNC.DIM : settings.f2func);
          };
          var b = 101 + measures.bottomWidgetHeight;
          this.clip = new ClipBulb(this);
          this.clip.setPos(12, 127);
          this.vu = new VUMeter(this);
          this.vu.setAnchors(18, 149, null, settings.disableVUs2 ? 59 : b);
          settings.disableVUs2 ||
          (IS_UI_24 || ((this.gi = new GATEind(this)), (this.gi.x = 18), (this.gi2 = new GATEind(this)), (this.gi2.x = 37)),
            (this.gr = new GRMeter(this)),
            (this.gr.x = 18),
            (this.gr2 = new GRMeter(this)),
            (this.gr2.x = 37));
          this.clip2 = new ClipBulb(this);
          this.clip2.setPos(31, 127);
          this.vu2 = new VUMeter(this);
          this.vu2.setAnchors(37, 149, null, settings.disableVUs2 ? 59 : b);
        },
        getLabel: function () {
          return this.text;
        },
        getColor: function () {
          return this.color;
        },
        getName: function () {
          return lang.MASTER;
        },
        setNameValue: function (a, b) {
          setValue(this.name + a, b);
          regUpdate(this);
        },
        getNameValue: function (a) {
          return getValue(this.name + a);
        },
        calcGeometry: function () {
          this.x = screenWidth - this.w;
          slideOutWidget.enabled && (this.x -= slideOutWidget.w);
          this.y = measures.topWidgetHeight;
          mode == E_MODE.BIG && (this.y = measures.topWidgetHeight + BM_TOP_H + BM_BOT_H);
          this.h = screenHeight - this.y;
          settings.disableVUs2 ||
          ((this.gr.y = this.h - this.gr.h - 26 - measures.bottomWidgetHeight),
            (this.gr2.y = this.h - this.gr.h - 26 - measures.bottomWidgetHeight),
          IS_UI_24 || ((this.gi.y = this.gr.y - 13), (this.gi2.y = this.gr2.y - 13)));
        },
        setClipped: function () {
          this.clipped = !0;
          regUpdate(this);
        },
        clipRelease: function () {
          var a = this;
          clearTimeoutC(this.timer);
          this.timer = setTimeout(function () {
            a.clipped = !1;
            regUpdate(a);
          }, CLIP_HOLD_TIME);
        },
        setSolo: function (a) {
          this.soloed = a;
          regUpdate(this);
        },
        onDown: function (a, b) {
          this.globalX();
          var c = b - this.globalY();
          this.botDown = !1;
          if (c > this.h - 34)
            if (((this.botDown = !0), (c = Date.now()), c - this.lastClickTime < DBL_CLK_TIME)) this.onDouble(), (this.lastClickTime = c - DBL_CLK_TIME);
            else {
              this.lastClickTime = c;
              var d = this;
              clearTimeout(this.holdTimer);
              this.holdTimer = setTimeout(function () {
                d.onHold();
              }, HOLD_TIME);
            }
        },
        onUp: function () {
          this.botDown && setSelected(-1, !0);
          clearTimeout(this.holdTimer);
        },
        onHold: function () {
          this.botDown = !1;
          -1 != selectedChannel && setSelected(-1);
          var a = new STRIPMENU(null, this);
          a.x = bound(this.x, 0, screenWidth - a.w);
          a.y = screenHeight - a.h - measures.bottomWidgetHeight;
          a.poplineX = 130;
          mWidgets.push(widgets.pop());
          regUpdate(a);
        },
        onDouble: function () {
          this.botDown = !1;
          mode != E_MODE.EDIT ? (editWidget.setMode(editWidget.E_MODE.dyn), -1 != selectedChannel && setSelected(-1), setMode(E_MODE.EDIT)) : (-1 != selectedChannel && setSelected(-1), goBack());
        },
        showPresets: function () {
          this.menu = new PRESET_MENU2(null, "chm", this);
          this.menu.color = this.color;
          this.menu.center = !0;
          this.menu.updateGeometry();
          regUpdate(this.menu);
        },
        savePreset: function () {
          for (
            var a = "m.afs.enabled m.afs.fmode m.afs.cmode m.afs.numtotal m.afs.numfixed m.afs.logic m.afs.livelift m.afs.sensitivity m.l.invert m.r.invert".split(" "),
              a = a.concat(getKeys("m.eq.")),
              a = a.concat(getKeys("m.dyn.")),
              a = a.filter(function (a) {
                return !a.contains(".enabled");
              }),
              a = a.filter(function (a) {
                return !a.contains(".bypass");
              }),
              a = a.filter(function (a) {
                return !a.contains(".prmod");
              }),
              b = {},
              c = 0;
            c < a.length;
            c++
          ) {
            var d = a[c],
              f = a[c].replace("m.", ".");
            b[f] = getValue(d);
          }
          return b;
        },
        loadPreset: function (a, b) {
          applyPreset("m", a);
          isDefined(b) && (setValue("m.eq.prname", b), setValue("m.dyn.prname", b));
          regUpdate(editWidget);
          return !0;
        },
        paint: function () {
          cachedMStripH != this.h && this.cachePaint();
          drawImage(cachedMStrip, 0, 0, this.w, this.h);
          ctx.fillStyle = color.gradMBL;
          ctx.fillRect(2, this.h - 37, this.w - 4, 3);
          ctx.fillStyle = this.color;
          selectedChannel == this.id && ctx.fillRect(2, this.h - this.botLabelHeight, this.w - 4, 35);
          ctx.drawText(lang.MASTER, this.w / 2, this.h - 10, { color: (ctx.fillStyle = color.masterLabel), font: font.botMChLabel, align: "center", shadow: Shadow.main });
          ctx.textAlign = "left";
          for (var a = !1, b = 0; b < allStrips.length; b++)
            if (allStrips[b].getNameValue("mute")) {
              a = !0;
              break;
            }
          b = getValue("mgmask");
          if (a || b) (ctx.fillStyle = "#e22"), (ctx.font = "14px open_sans_condensedbold"), ctx.drawText(b ? "MG" : "M", 11, 20.5, { shadow: Shadow.main });
          a = !1;
          for (b = 0; b < allStrips.length; b++)
            if (allStrips[b].getNameValue("solo")) {
              a = !0;
              break;
            }
          a && ((ctx.font = "14px open_sans_condensedbold"), (ctx.fillStyle = "#ee2"), ctx.drawText("S", 13, 36, { shadow: Shadow.main }));
          IS_UI_24 && getValue("m.dim") && ((ctx.font = "10px open_sans_condensedbold"), (ctx.fillStyle = "#32B6E2"), (ctx.textAlign = "right"), ctx.drawText("DIM", this.w - 10, 37, { shadow: Shadow.main }));
          this.clipped && ((ctx.fillStyle = "#e22"), ctx.fillRoundRect(101, 9, 17, 15, 2), (ctx.fillStyle = color.black), (ctx.textAlign = "left"), (ctx.font = "14px open_sans_condensedbold"), ctx.fillText("C", 106, 21.5));
          ctx.shadowColor = "transparent";
        },
        cachePaint: function () {
          if (cachedMStripH != this.h) {
            cachedMStrip = document.createElement("canvas");
            var a = cachedMStrip.getContext("2d");
            isRetina ? ((cachedMStrip.width = 2 * this.w), (cachedMStrip.height = 2 * this.h), a.scale(2, 2)) : ((cachedMStrip.width = this.w), (cachedMStrip.height = this.h));
            a.fillStyle = "#15171C";
            a.fillRect(0, 0, this.w, this.h);
            fillVertPatternCtx(res.mStripTile, this.h, a);
            drawImageCtx(res.mStripBottom, 0, this.h - this.botHeight - this.botLabelHeight, a);
            drawImageCtx(res.mStripBottomLabel, 0, this.h - this.botLabelHeight, a);
            drawImageCtx(res.mStripTopNCS, 0, 0, a);
            a.globalAlpha = 0.06;
            a.fillStyle = "#fff";
            a.fillRect(0, 0, this.w, this.h);
            a.globalAlpha = 1;
            a.fillStyle = "rgba(255,255,0,0.8)";
            a.fillTriangle(this.w - 18, 10, 3, 4);
            a.fillStyle = this.color;
            a.fillRect(2, this.h - 37, this.w - 4, 3);
            a.font = font.stripChannel;
            a.textAlign = "left";
            a.fillStyle = color.stripChLabel;
            a.setShadow(color.black, 3, 1, 1);
            a.fillText(lang.L, 20, this.h - 43);
            a.fillText(lang.R, 38, this.h - 43);
            drawVUMarks(this.vu2, this.gr2, a);
            drawMarksDB(this.sl.h, 134, 117, a);
            cachedMStripH = this.h;
          }
        },
      });
    function isMuteFX() {
      return checkBit(getValue("mgmask"), MUTEFX_BIT_IDX);
    }
    function isMuteAll() {
      return checkBit(getValue("mgmask"), MUTEALL_BIT_IDX);
    }
    fxStripCache = null;
    fxStripCacheH = -1;
    var FXStrip = Class.create(Widget, {
      initialize: function ($super, b, c, d, f) {
        $super(b);
        this.CACHED_DRAWING = CACHE_TECHNOLOGIES;
        this.id = c;
        this.widgetName = "FXStrip";
        this.name = d;
        this.name2 = f;
        this.w = measures.mixerStripWidth;
        this.x = this.w * c;
        this.st = null;
        this.text = "CH X";
        this.color = b.color;
        this.lastInGroup = this.firstInGroup = !1;
        this.initWidgets();
      },
      setMode: function (a) {
        this.name2 = "fx." + a + ".";
        var b = this.name + this.name2;
        this.mute.setKey(b + "mute");
        this.sl.setKey(b + "value");
        this.led.setKey(b + "value");
        this.post && this.post.setKey(b + "post");
        this.unRegAllKeys();
        this.regKey(this.st.name + "mute");
        b = color.white;
        switch (a) {
          case 0:
            b = color.blue;
            break;
          case 1:
            b = color.brown;
            break;
          case 2:
            b = color.purple;
            break;
          case 3:
            b = color.green;
        }
        this.sl.color = b;
      },
      calcGeometry: function () {
        this.h = this.parent.h;
      },
      setVU: function (a, b, c, d) {
        c = !1;
        IS_UI_24 && (c = 0 == this.post.state);
        b = 0 == this.mute.state ? modVu(c ? a : b, this.sl.value) : 0;
        1 <= b ? this.clip.clip() : this.clip.state && !this.clip.releasing && this.clip.release();
        this.vu.setValueExt(a, b);
      },
      getNameValue: function (a) {
        return getValue(this.name + a);
      },
      getName2Value: function (a) {
        return getValue(this.name + this.name2 + a);
      },
      initWidgets: function () {
        var a = this;
        this.led = new LED(this);
        this.led.key = this.name + this.name2 + "value";
        this.led.setPos(6, 4);
        this.led.setSize(100, 38);
        this.led.onInput = function (b) {
          b = parseFloat(b);
          isNaN(b) ? showPopupMsg(lang.WRONG_VALUE) : a.sl.setValue(DBtoVf2(b));
        };
        this.led.onDouble = function () {
          a.sl.setValue(zeroDbPos);
        };
        this.mute = new CheckBox(this);
        this.mute.key = this.name + this.name2 + "mute";
        this.mute.setPos(4, 48);
        IS_UI_24
          ? (this.mute.setImages(res.bMuteOff, res.bMuteOn),
            (this.mute.getState = function () {
              this.state = a.getName2Value("mute");
              this.disabled = !1;
              a.getName2Value("post") && a.st.getMuteState() && ((this.state = 1), (this.disabled = !0));
            }),
            (this.post = new CheckBox(this)),
            (this.post.key = this.name + this.name2 + "post"),
            (this.post.longClickMark = !0),
            (this.post.clickOnUp = !0),
            this.post.setPos(58, 48),
            this.post.setSize(50, 37),
            this.post.setImages(res.bPre, res.bPost))
          : (this.mute.setSize(102, 29), this.mute.setImages(res.bBMuteOff, res.bBMuteOn));
        this.sl = new Slider(this, this.type);
        this.sl.key = this.name + this.name2 + "value";
        this.sl.color = this.color;
        this.sl.setPos(0, 94);
        this.sl.w = this.w;
        this.sl.laneOffset = 36;
        this.sl.faderX = 60;
        this.sl.bottomMargin = 24;
        this.sl.onDouble = function () {
          setMode(E_MODE.MIX);
        };
        this.vu = new VUMeter(this);
        this.vu.setAnchors(21, 109, null, 26);
        this.clip = new ClipBulb(this);
        this.clip.setPos(15, 87);
      },
      paint: function () {
        fxStripCacheH != this.h && this.cachePaint();
        ctx.drawImage(fxStripCache, 0, 0, this.w, this.h);
        selectedStrip.id == this.id && ((ctx.globalAlpha = 0.06), (ctx.fillStyle = "#fff"), ctx.fillRect(1, 0, this.w - 2, this.h), (ctx.globalAlpha = 1));
        ctx.fillStyle = this.color;
        ctx.fillRect(0 + (this.firstInGroup ? 2 : 0), this.h - 3, this.w - (this.firstInGroup ? 2 : 0) - (this.lastInGroup ? 2 : 0), 3);
        ctx.textAlign = "left";
        ctx.font = font.stripChannel;
        ctx.fillStyle = color.stripChLabel;
        ctx.setShadow(color.black, 3, 1, 1);
        ctx.fillText(this.text, 11, this.h - 10);
        ctx.shadowColor = "transparent";
      },
      DRAW_UPDATE_CHECK: function () {
        var a;
        a = this.getName2Value("value");
        var b = this.getName2Value("mute"),
          c = this.getNameValue("stereoIndex");
        a = "" + a + b + this.clip.state + c + (selectedStrip.id == this.id) + this.sl.slowMode;
        IS_UI_24 && ((a += this.getName2Value("post")), (a += getValue("mgmask")), (a += this.getNameValue("mute")));
        if (a === this.CACHED_PARAMS) return !1;
        this.CACHED_PARAMS = a;
        return !0;
      },
      cachePaint: function () {
        fxStripCache = document.createElement("canvas");
        var a = fxStripCache.getContext("2d");
        isRetina ? ((fxStripCache.width = 2 * this.w), (fxStripCache.height = 2 * this.h), a.scale(2, 2)) : ((fxStripCache.width = this.w), (fxStripCache.height = this.h));
        a.fillStyle = "#15171C";
        a.fillRect(0, 0, this.w, this.h);
        fillVertPatternCtx(res.auxStripTile, this.h, a);
        drawImageCtx(res.auxStripBottom, 0, this.h - res.auxStripBottom.h(), a);
        drawImageCtx(res.auxStripTop, 0, 0, a);
        drawMarksDB(this.sl.h, 94, 100, a);
        drawVUMarks(this.vu, null, a);
        fxStripCacheH = this.h;
      },
    });
    auxStripCache = null;
    auxStripCacheH = -1;
    var AUXStrip = Class.create(Widget, {
      initialize: function ($super, b, c, d, f) {
        $super(b);
        this.CACHED_DRAWING = CACHE_TECHNOLOGIES;
        this.id = c;
        this.widgetName = "AUXStrip";
        this.name = d;
        this.name2 = f;
        this.w = measures.mixerStripWidth;
        this.x = this.w * c;
        this.st = null;
        this.text = "CH X";
        this.mode = 0;
        this.color = b.color;
        this.pre = this.lastInGroup = this.firstInGroup = !1;
        this.initWidgets();
      },
      setMode: function (a) {
        this.mode = a;
        var b = "aux." + a + ".";
        this.name2 = b;
        b = this.name + b;
        this.led.setKey(b + "value");
        this.led.keyPrefix = b;
        this.pan.setKey(b + "pan");
        this.mute.setKey(b + "mute");
        this.post.setKey(b + "post");
        this.sl.setKey(b + "value");
        this.postproc && this.postproc.setKey(b + "postproc");
        this.vu.reset();
        this.unRegAllKeys();
        this.regKey(this.st.name + "mute");
        this.regKey(this.st.name + "stereoIndex");
        this.regKey("a." + a + ".stereoIndex");
        regUpdate(this);
      },
      calcGeometry: function () {
        this.h = this.parent.h;
      },
      setVU: function (a, b) {
        var c = 0 == this.post.state,
          c = 0 == this.mute.state ? modVu(c ? a : b, this.sl.value) : 0;
        1 <= c ? this.clip.clip() : this.clip.state && !this.clip.releasing && this.clip.release();
        this.vu.setValueExt(a, c);
      },
      setNameValue: function (a, b) {
        setValue(this.name + a, b);
      },
      setName2Value: function (a, b) {
        setValue(this.name + this.name2 + a, b);
      },
      getNameValue: function (a) {
        return getValue(this.name + a);
      },
      getName2Value: function (a) {
        return getValue(this.name + this.name2 + a);
      },
      getMuteState: function (a) {
        a = isDefined(a) ? a : this.mode;
        var b = getValue("settings.auxmutelink"),
          c = this.name + ("aux." + a + ".");
        a = getValue(c + "mute");
        c = getValue(c + "post");
        (b || c) && par.st.getMuteState() && (a = 1);
        return a;
      },
      initWidgets: function () {
        var a = this;
        this.led = new LED(this);
        this.led.key = this.name + this.name2 + "value";
        this.led.keyPrefix = this.name + this.name2;
        this.led.setPos(6, 4);
        this.led.setSize(100, 38);
        this.led.onInput = function (b) {
          b = parseFloat(b);
          isNaN(b) ? showPopupMsg(lang.WRONG_VALUE) : a.sl.setValue(DBtoVf2(b));
        };
        this.led.onDouble = function () {
          a.sl.setValue(zeroDbPos);
        };
        this.pan = new PanSlider(this);
        this.pan.key = this.name + this.name2 + "pan";
        this.pan.disabled = !0;
        this.pan.setPos(5, 46);
        this.pan.setSize(102, 30);
        this.pan.onDisabledClick = function () {
          showPopupMsg(lang.NO_PAN_ON_MONO_AUX);
        };
        this.pan.getState = function () {
          this.disabled = -1 == auxStrips[a.parent.auxID].getNameValue("stereoIndex");
        };
        this.mute = new CheckBox(this);
        this.mute.setPos(4, 88);
        this.mute.setImages(res.bMuteOff, res.bMuteOn);
        this.mute.getState = function () {
          this.state = a.getName2Value("mute");
          this.disabled = !1;
          var b = getValue("settings.auxmutelink"),
            c = a.getName2Value("post");
          (b || c) && a.st.getMuteState() && ((this.state = 1), (this.disabled = !0));
        };
        this.post = new CheckBox(this);
        this.post.key = this.name + this.name2 + "post";
        this.post.longClickMark = !0;
        this.post.clickOnUp = !0;
        this.post.setPos(58, 88);
        this.post.setSize(50, 37);
        this.post.setImages(res.bPre, res.bPost);
        this.post.onHold = function () {
          var b = 0 == this.state ? 0 : 1,
            c = a.name2;
          confOk.valueFunc = function () {
            for (var a = 0; a < allStrips.length; a++) {
              switch (allStrips[a].type) {
                case E_STRIP_TYPE.IN:
                case E_STRIP_TYPE.MEDIA:
                case E_STRIP_TYPE.LINEIN:
                case E_STRIP_TYPE.FX:
                  break;
                default:
                  continue;
              }
              allStrips[a].setNameValue(c + "post", b);
              updateByKey(allStrips[a].name + c + "post");
            }
          };
          showConfBox(lang.SET_ALL_CHANNELS_TO.format(b ? lang.POST : lang.PRE));
        };
        IS_UI_24 &&
        ((this.postproc = new CheckBox(this)),
          (this.postproc.key = this.name + this.name2 + "postproc"),
          (this.postproc.longClickMark = !0),
          (this.postproc.clickOnUp = !0),
          this.postproc.setPos(4, 131),
          this.postproc.setSize(50, 37),
          (this.postproc.invertedValue = !0),
          this.postproc.setImages(res.postproc, res.preproc),
          (this.postproc.onHold = function () {
            var a = 0 == this.state ? 0 : 1;
            confOk.valueFunc = function () {
              for (var b = 0; b < auxSendStrips.length; b++) auxSendStrips[b].setName2Value("postproc", a), regUpdate(auxSendStrips[b]);
            };
            showConfBox(lang.SET_ALL_CHANNELS_TO.format(a ? lang.POST_PROCESSING : lang.PRE_PROCESSING));
          }));
        this.sl = new Slider(this, this.type);
        this.sl.key = this.name + this.name2 + "value";
        this.sl.color = this.color;
        this.sl.setPos(0, 134);
        this.sl.w = this.w;
        this.sl.laneOffset = 36;
        this.sl.faderX = 60;
        this.sl.bottomMargin = 24;
        this.sl.onDouble = function () {
          setMode(E_MODE.MIX);
        };
        this.vu = new VUMeter(this);
        this.vu.setAnchors(21, IS_UI_24 ? 193 : 149, null, 26);
        this.clip = new ClipBulb(this);
        this.clip.setPos(15, IS_UI_24 ? 171 : 127);
      },
      getName: function () {
        return this.st.getName();
      },
      DRAW_UPDATE_CHECK: function () {
        var a;
        a = -1 != settings.me.indexOf(this.id);
        var b = getValue("mgmask"),
          c = this.getName2Value("pan"),
          d = this.getName2Value("value"),
          f = this.getName2Value("mute"),
          e = this.getNameValue("mute"),
          g = this.getName2Value("post"),
          h = this.getName2Value("postproc"),
          k = this.clip.state,
          m = this.getNameValue("stereoIndex"),
          p = auxStrips[this.parent.auxID].getNameValue("stereoIndex");
        a = "" + b + d + c + f + e + g + h + a + k + m + p + (selectedStrip.id == this.id) + this.firstInGroup + this.lastInGroup + this.sl.slowMode;
        if (a === this.CACHED_PARAMS) return !1;
        this.CACHED_PARAMS = a;
        return !0;
      },
      paint2: function () {
        ctx.fillStyle = "#15171C";
        ctx.fillRect(0, 0, this.w, this.h);
        fillVertPattern(res.stripTile, this.h);
        drawImage(res.stripBottom, 0, this.h - res.stripBottom.h());
        drawImage(res.stripTop, 0, 0);
        ctx.fillStyle = this.color;
        ctx.fillRect(0 + (this.firstInGroup ? 2 : 0), this.h - 3, this.w - (this.firstInGroup ? 2 : 0) - (this.lastInGroup ? 2 : 0), 3);
        ctx.textAlign = "left";
        ctx.font = font.stripChannel;
        ctx.fillStyle = color.stripChLabel;
        ctx.fillText(this.text, 11, this.h - 10);
        this.drawMarks(ctx);
      },
      paint: function () {
        auxStripCacheH != this.h && this.cachePaint();
        ctx.drawImage(auxStripCache, 0, 0, this.w, this.h);
        this.sl.color = 0 == getValue(this.name + this.name2 + "post") ? color.AUX : color.green;
        selectedStrip.id == this.id && ((ctx.globalAlpha = 0.06), (ctx.fillStyle = "#fff"), ctx.fillRect(1, 0, this.w - 2, this.h), (ctx.globalAlpha = 1));
        var a = this.getNameValue("stereoIndex"),
          b = !1;
        settings.me.contains(this.id) && (b = !0);
        0 == a && settings.me.contains(this.id + 1) && (b = !0);
        1 == a && settings.me.contains(this.id - 1) && (b = !0);
        ctx.fillStyle = this.color;
        ctx.fillRect(0 + (this.firstInGroup ? 2 : 0), this.h - 3, this.w - (this.firstInGroup ? 2 : 0) - (this.lastInGroup ? 2 : 0), 3);
        ctx.textAlign = "left";
        ctx.font = font.stripChannel;
        ctx.fillStyle = b ? color.me : color.stripChLabel;
        ctx.fillText(this.text, 11, this.h - 10);
        ctx.shadowColor = "transparent";
      },
      cachePaint: function () {
        auxStripCache = document.createElement("canvas");
        var a = auxStripCache.getContext("2d");
        isRetina ? ((auxStripCache.width = 2 * this.w), (auxStripCache.height = 2 * this.h), a.scale(2, 2)) : ((auxStripCache.width = this.w), (auxStripCache.height = this.h));
        a.fillStyle = "#15171C";
        a.fillRect(0, 0, this.w, this.h);
        fillVertPatternCtx(res.stripTile, this.h, a);
        drawImageCtx(res.stripBottom, 0, this.h - res.stripBottom.h(), a);
        drawImageCtx(res.stripTop, 0, 0, a);
        drawMarksDB(this.sl.h, 134, 100, a);
        drawVUMarks(this.vu, null, a);
        auxStripCacheH = this.h;
      },
    });
    mtxStripCache = null;
    mtxStripCacheH = -1;
    var MTXStrip = Class.create(Widget, {
        initialize: function ($super, b, c, d, f) {
          $super(b);
          this.CACHED_DRAWING = CACHE_TECHNOLOGIES;
          this.id = c;
          this.widgetName = "MTXStrip";
          this.name = d;
          this.name2 = f;
          this.w = measures.mixerStripWidth;
          this.x = this.w * c;
          this.text = "CH X";
          this.color = color.MATRIX;
          this.pre = this.rr = this.lastInGroup = this.firstInGroup = !1;
          this.initWidgets();
        },
        calcGeometry: function () {
          this.h = this.parent.h;
        },
        setMode: function (a) {
          var b = this.name;
          a = "mtx." + a + ".";
          this.rr && (a += "r.");
          this.name2 = a;
          var c = b + a;
          this.led.setKey(c + "value");
          this.led.keyPrefix = b + a;
          this.pan.setKey(c + "pan");
          this.mute.setKey(c + "mute");
          this.postproc && this.postproc.setKey(c + "postproc");
          this.sl.setKey(c + "value");
          this.vu.reset();
        },
        setVU: function (a, b) {
          var c = 1 == getValue("settings.mtxsendpoint"),
            d = 0 == this.mute.state ? modVu(c ? b : a, this.sl.value) : 0;
          1 <= d ? this.clip.clip() : this.clip.state && !this.clip.releasing && this.clip.release();
          this.vu.setValueExt(c ? b : a, d);
        },
        setNameValue: function (a, b) {
          setValue(this.name + a, b);
        },
        setName2Value: function (a, b) {
          setValue(this.name + this.name2 + a, b);
        },
        getNameValue: function (a) {
          return getValue(this.name + a);
        },
        getName2Value: function (a, b) {
          return getValue(this.name + this.name2 + a);
        },
        initWidgets: function () {
          var a = this;
          this.led = new LED(this);
          this.led.key = this.name + this.name2 + "value";
          this.led.keyPrefix = this.name + this.name2;
          this.led.setPos(6, 4);
          this.led.setSize(100, 38);
          this.led.onInput = function (b) {
            b = parseFloat(b);
            isNaN(b) ? showPopupMsg(lang.WRONG_VALUE) : a.sl.setValue(DBtoVf2(b));
          };
          this.led.onDouble = function () {
            a.sl.setValue(zeroDbPos);
          };
          this.pan = new PanSlider(this);
          this.pan.key = this.name + this.name2 + "pan";
          this.pan.disabled = !0;
          this.pan.setPos(5, 46);
          this.pan.setSize(102, 30);
          this.pan.onDisabledClick = function () {
            showPopupMsg(lang.NO_PAN_ON_MONO_MATRIX);
          };
          this.pan.getState = function () {
            this.disabled = -1 == auxStrips[a.parent.auxID].getNameValue("stereoIndex");
          };
          this.mute = new CheckBox(this);
          this.mute.key = this.name + this.name2 + "mute";
          this.mute.setPos(4, 88);
          this.mute.setImages(res.bMuteOff, res.bMuteOn);
          IS_UI_24 &&
          ((this.postproc = new CheckBox(this)),
            (this.postproc.key = this.name + this.name2 + "postproc"),
            (this.postproc.longClickMark = !0),
            (this.postproc.clickOnUp = !0),
            this.postproc.setPos(58, 88),
            this.postproc.setSize(50, 37),
            (this.postproc.invertedValue = !0),
            this.postproc.setImages(res.postproc, res.preproc),
            (this.postproc.onHold = function () {
              var a = 0 == this.state ? 0 : 1;
              confOk.valueFunc = function () {
                for (var b = 0; b < mtxSendStrips.length; b++) mtxSendStrips[b].setName2Value("postproc", a), regUpdate(mtxSendStrips[b]);
              };
              showConfBox(lang.SET_ALL_CHANNELS_TO.format(a ? lang.POST_PROCESSING : lang.PRE_PROCESSING));
            }));
          this.sl = new Slider(this, this.type);
          this.sl.key = this.name + this.name2 + "value";
          this.sl.color = color.MATRIX;
          this.sl.setPos(0, 134);
          this.sl.w = this.w;
          this.sl.laneOffset = 36;
          this.sl.faderX = 60;
          this.sl.bottomMargin = 24;
          this.sl.onDouble = function () {
            setMode(E_MODE.MIX);
          };
          this.vu = new VUMeter(this);
          this.vu.setAnchors(21, 149, null, 26);
          this.clip = new ClipBulb(this);
          this.clip.setPos(15, 127);
        },
        DRAW_UPDATE_CHECK: function () {
          var a;
          a = this.getName2Value("pan");
          var b = this.getName2Value("value"),
            c = this.getName2Value("mute"),
            d = this.getName2Value("postproc");
          a = "" + b + a + c + d;
          if (a === this.CACHED_PARAMS) return !1;
          this.CACHED_PARAMS = a;
          return !0;
        },
        paint2: function () {
          ctx.fillStyle = "#15171C";
          ctx.fillRect(0, 0, this.w, this.h);
          fillVertPattern(res.stripTile, this.h);
          drawImage(res.stripBottom, 0, this.h - res.stripBottom.h());
          drawImage(res.stripTop, 0, 0);
          ctx.fillStyle = this.color;
          ctx.fillRect(0 + (this.firstInGroup ? 2 : 0), this.h - 3, this.w - (this.firstInGroup ? 2 : 0) - (this.lastInGroup ? 2 : 0), 3);
          ctx.textAlign = "left";
          ctx.font = font.stripChannel;
          ctx.fillStyle = color.stripChLabel;
          ctx.fillText(this.text, 11, this.h - 10);
          this.drawMarks(ctx);
        },
        paint: function () {
          mtxStripCacheH != this.h && this.cachePaint();
          ctx.drawImage(mtxStripCache, 0, 0, this.w, this.h);
          selectedStrip.id == this.id && ((ctx.globalAlpha = 0.06), (ctx.fillStyle = "#fff"), ctx.fillRect(1, 0, this.w - 2, this.h), (ctx.globalAlpha = 1));
          var a = this.getNameValue("stereoIndex"),
            b = !1;
          settings.me.contains(this.id) && (b = !0);
          0 == a && settings.me.contains(this.id + 1) && (b = !0);
          1 == a && settings.me.contains(this.id - 1) && (b = !0);
          ctx.fillStyle = this.color;
          ctx.fillRect(this.firstInGroup ? 2 : 0, this.h - 3, this.w - (this.firstInGroup ? 2 : 0) - (this.lastInGroup ? 2 : 0), 3);
          ctx.textAlign = "left";
          ctx.font = font.stripChannel;
          ctx.fillStyle = b ? color.me : color.stripChLabel;
          ctx.fillText(this.text, 11, this.h - 10);
          ctx.shadowColor = "transparent";
        },
        cachePaint: function () {
          mtxStripCache = document.createElement("canvas");
          var a = mtxStripCache.getContext("2d");
          isRetina ? ((mtxStripCache.width = 2 * this.w), (mtxStripCache.height = 2 * this.h), a.scale(2, 2)) : ((mtxStripCache.width = this.w), (mtxStripCache.height = this.h));
          a.fillStyle = "#15171C";
          a.fillRect(0, 0, this.w, this.h);
          fillVertPatternCtx(res.stripTile, this.h, a);
          drawImageCtx(res.stripBottom, 0, this.h - res.stripBottom.h(), a);
          drawImageCtx(res.stripTop, 0, 0, a);
          a.globalAlpha = 0.07;
          a.fillStyle = this.color;
          a.fillRect(0, 0, this.w, this.h);
          a.globalAlpha = 1;
          drawMarksDB(this.sl.h, 134, 100, a);
          drawVUMarks(this.vu, null, a);
          mtxStripCacheH = this.h;
        },
      }),
      AUXOUTStrip = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "AUX_OUT";
          this.y = measures.topWidgetHeight;
          this.w = measures.masterStripWidth;
          this.botLabelHeight = res.mStripBottomLabel.h();
          this.botHeight = res.mStripBottom.h();
          this.color = color.AUX;
          this.stereo = !1;
          this.idx = 0;
          this.label = "AUX_OUT";
          this.text = "AUX";
          this.holdTimer = this.t = null;
          this.initWidgets();
        },
        onShow: function () {
          this.setAux(auxWidget.mode);
        },
        setVU: function (a, b, c, d) {
          1 <= b ? this.clip.clip() : this.clip.state && !this.clip.releasing && this.clip.release();
          this.vu.setValueExt(a, b);
          settings.disableVUs2 || (this.gr.setValue(c), this.gi.setValue(d));
        },
        setAux: function (a) {
          this.idx = a;
          this.vu.reset();
          this.t = auxStrips[a];
          this.name = a = "a." + a + ".";
          this.led.key = a + "mix";
          this.sl.key = a + "mix";
          this.solo.key = a + "solo";
          this.label = lang.AUX + " " + (this.idx + 1) + " " + lang.SEND;
          this.text = "AUX " + (this.idx + 1);
          regUpdate(this);
        },
        getNameValue: function (a) {
          return getValue(this.t.name + a);
        },
        initWidgets: function () {
          var a = this;
          this.MIXTOAUX = new Button(this);
          this.MIXTOAUX.setPos(4, 5);
          this.MIXTOAUX.setImages(res.bMTA_OFF, res.bMTA_ON);
          this.MIXTOAUX.onPress = function () {
            isBlocked("auxlvl", auxWidget.mode) ? showPopupMsg(lang.LOCKED, 1e3) : new COPY_AUX_MENU(this.parent);
          };
          this.led = new LED(this);
          this.led.setPos(6, 44);
          this.led.setSize(115, 38);
          this.led.color = color.mLedText;
          this.led.onInput = function (b) {
            b = parseFloat(b);
            isNaN(b) ? showPopupMsg(lang.WRONG_VALUE) : a.sl.setValue(DBtoVf2(b));
          };
          this.led.onDouble = function () {
            setValue(a.sl.key, zeroDbPos);
            updateByKey(a.sl.key);
          };
          this.sl = new Slider(this, E_STRIP_TYPE.AUX);
          this.sl.setPos(0, 134);
          this.sl.canScroll = !1;
          this.sl.w = this.w;
          this.sl.laneOffset = 34;
          this.sl.faderX = 77;
          this.sl.bottomMargin = 58;
          this.sl.lane = !1;
          this.sl.onDoubleKnob = function () {
            isPortrait || (mode == E_MODE.MOREME && setMode(E_MODE.AUX), setSelected(a.t.id), editWidget.setMode(editWidget.arr[0]), setMode(E_MODE.EDIT));
          };
          this.sl.getState = function () {
            this.fader = 1 == a.t.getNameValue("matrix") ? res.mtxFader : res.auxFader;
            IS_UI_24 && (this.disabled = a.t.getNameValue("link2master"));
          };
          this.mute = new CheckBox(this);
          this.mute.setPos(4, 88);
          this.mute.setImages(res.mStripMute_OFF, res.mStripMute_ON);
          this.mute.getState = function () {
            this.state = a.t.getNameValue("mute");
            var b = getValue("mgmask"),
              d = a.t.getNameValue("mgmask"),
              f = checkBit(b, MUTEALL_BIT_IDX),
              e = checkBit(b, MUTEFX_BIT_IDX) && a.t.type == E_STRIP_TYPE.FX;
            if (b & d || f || e) this.state = 1;
            1 == a.t.getNameValue("forceunmute") ? ((this.state = 0), (this.img0 = res.mStripMute_OFF_F)) : (this.img0 = res.mStripMute_OFF);
          };
          this.mute.onToggleUp = function () {
            var b = getValue("mgmask"),
              d = a.t.getNameValue("mgmask"),
              d = b & d,
              f = checkBit(b, MUTEALL_BIT_IDX),
              b = checkBit(b, MUTEFX_BIT_IDX) && a.t.type == E_STRIP_TYPE.FX;
            d || f || b ? a.t.setNameValue("forceunmute", 0) : a.t.setNameValue("mute", 1);
          };
          this.mute.onToggleDown = function () {
            var b = getValue("mgmask"),
              d = a.t.getNameValue("mgmask"),
              d = b & d,
              f = checkBit(b, MUTEALL_BIT_IDX),
              b = checkBit(b, MUTEFX_BIT_IDX) && a.t.type == E_STRIP_TYPE.FX;
            d || f || b ? a.t.setNameValue("forceunmute", 1) : a.t.setNameValue("mute", 0);
          };
          this.mute.onToggle = function () {
            checkMutes();
          };
          this.solo = new CheckBox(this);
          this.solo.setPos(67, 88);
          this.solo.setImages(res.mStripSolo_OFF, res.mStripSolo_ON);
          this.solo.onToggle = function () {
            checkSolos();
          };
          this.solo.onToggleUp = function () {
            if (0 == getValue("settings.multiplesolo")) for (var b = 0; b < allStrips.length; b++) allStrips[b].setNameValue("solo", 0);
            a.t.setNameValue("solo", 1);
          };
          var b = 101 + measures.bottomWidgetHeight;
          this.clip = new ClipBulb(this);
          this.clip.setPos(21, 127);
          this.vu = new VUMeter(this);
          this.vu.setAnchors(27, 149, null, settings.disableVUs2 ? 59 : b);
          settings.disableVUs2 || ((this.gi = new GATEind(this)), (this.gi.x = 27), (this.gr = new GRMeter(this)), (this.gr.x = 27));
        },
        onDown: function (a, b) {
          this.globalX();
          var c = this;
          if (b - this.globalY() > this.h - 32) {
            var d = Date.now();
            if (d - this.lastClickTime < DBL_CLK_TIME) isPortrait || (mode != E_MODE.EDIT ? setMode(E_MODE.EDIT) : setMode(lastMode), (this.lastClickTime = d - DBL_CLK_TIME));
            else {
              var f = this.t;
              this.holdTimer = setTimeout(function () {
                if (mode != E_MODE.MOREME) {
                  var a = new STRIPMENU(null, f);
                  a.x = bound(c.globalX(), 0, screenWidth - a.w);
                  a.y = screenHeight - a.h - measures.bottomWidgetHeight;
                  mWidgets.push(widgets.pop());
                  regUpdate(a);
                }
              }, HOLD_TIME);
              this.t && setSelected(this.t.id, !0);
              this.lastClickTime = d;
              regUpdate(this);
            }
          }
        },
        onUp: function () {
          clearTimeout(this.holdTimer);
        },
        calcGeometry: function () {
          this.x = screenWidth - this.w;
          masterWidget.enabled && (this.x -= masterWidget.w);
          slideOutWidget.enabled && (this.x -= slideOutWidget.w);
          this.y = topWidget.enabled ? topWidget.h : 0;
          this.h = screenHeight - this.y;
          settings.disableVUs2 || ((this.gr.y = this.h - this.gr.h - 26 - measures.bottomWidgetHeight), (this.gi.y = this.gr.y - 13));
        },
        paint: function () {
          ctx.fillStyle = color.bg;
          ctx.fillRect(0, 0, this.w, this.h);
          fillVertPattern(res.mStripTile, this.h);
          drawImage(res.mStripBottom, 0, this.h - this.botHeight - this.botLabelHeight);
          drawImage(res.mAUXStripTop, 0, 0);
          drawImage(res.mStripBottomLabel, 0, this.h - this.botLabelHeight);
          ctx.globalAlpha = 0.05;
          ctx.fillStyle = color.AUX;
          ctx.fillRect(0, 0, this.w, this.h);
          ctx.globalAlpha = 1;
          ctx.fillStyle = this.color;
          ctx.fillRect(2, this.h - 3 - this.botLabelHeight, this.w - 4, 3);
          ctx.fillStyle = color.gradMBL;
          ctx.fillRect(2, this.h - 3 - this.botLabelHeight, this.w - 4, 3);
          ctx.fillStyle = this.color;
          var a = selectedChannel == this.t.id;
          a && ctx.fillRect(2, this.h - this.botLabelHeight, this.w - 4, 35);
          ctx.font = font.botMChLabel;
          ctx.textAlign = "center";
          var b = this.t.getName();
          ctx.fillStyle = color.black;
          ctx.fillText(b, (this.w / 2 + 4) | 0, this.h - 10 + 1, this.w - 10);
          ctx.fillStyle = a ? color.white : color.masterLabel;
          ctx.fillText(b, (this.w / 2 + 3) | 0, this.h - 10, this.w - 10);
          ctx.font = font.stripChannel;
          ctx.textAlign = "left";
          a = this.t.getNameValue("matrix") ? lang.MTX + " " + (this.t.subId + 1) : lang.AUX + " " + (this.t.subId + 1);
          b = getValue(this.name + "stereoIndex");
          0 == b ? (a += "L") : 1 == b && (a += "R");
          var c = !1;
          settings.meout == this.idx && (c = !0);
          0 == b && settings.meout == this.idx + 1 && (c = !0);
          1 == b && settings.meout == this.idx - 1 && (c = !0);
          ctx.fillStyle = c ? color.me : color.stripChLabel;
          ctx.fillText(a, 11, this.h - 10 - measures.bottomWidgetHeight);
          ctx.shadowColor = "transparent";
          drawVUMarks(this.vu, this.gr, ctx);
          drawMarksDB(this.sl.h, 134, 117);
          b = getValue("mgmask");
          a = this.t.getNameValue("mgmask") & b;
          b &= 1 << MUTEALL_BIT_IDX;
          c = this.t.getNameValue("forceunmute");
          ctx.fillStyle = c ? color.tvMuteUn : color.tvMuteMG;
          if (b || a) {
            ctx.textAlign = "center";
            ctx.font = "10pt open_sans_condensedbold";
            c = 0;
            b && ctx.fillText("A", 12, 137 + 16 * c++);
            if (a) for (b = 0; 6 > b; b++) a & (1 << b) && ctx.fillText(b + 1 + "", 12, 137 + 16 * c++);
            1 == this.t.getNameValue("mute") && (this.t.getNameValue("forceunmute") && (ctx.fillStyle = "#82C9DE"), ctx.fillText("M", 12, 137 + 16 * c++));
          }
          IS_UI_24 && this.t.getNameValue("link2master") && drawImage(res.LINK, this.w - 19, this.h - 20 - 33);
        },
      }),
      FXOUTStrip = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "FX_OUT";
          this.y = measures.topWidgetHeight;
          this.w = measures.masterStripWidth;
          this.botLabelHeight = res.mStripBottomLabel.h();
          this.botHeight = res.mStripBottom.h();
          this.color = color.blue;
          this.stereo = !0;
          this.text = "FXR";
          this.label = "FX";
          this.idx = 0;
          this.initWidgets();
        },
        initWidgets: function () {
          var a = this;
          this.led = new LED(this);
          this.led.pkey = "mix";
          this.led.setPos(6, 4);
          this.led.setSize(115, 38);
          this.led.color = color.mLedText;
          this.led.onDouble = function () {
            setValue(a.sl.key, zeroDbPos);
            updateByKey(a.sl.key);
          };
          this.led.onInput = function (b) {
            b = parseFloat(b);
            isNaN(b) ? showPopupMsg(lang.WRONG_VALUE) : a.sl.setValue(DBtoVf2(b));
          };
          this.pan = new PanSlider(this);
          this.pan.setPos(5, 46);
          this.pan.setSize(117, 30);
          this.mute = new CheckBox(this);
          this.mute.setPos(4, 88);
          this.mute.setImages(res.mStripMute_OFF, res.mStripMute_ON);
          this.mute.getState = function () {
            this.state = a.t.getNameValue("mute");
            var b = getValue("mgmask"),
              d = a.t.getNameValue("mgmask"),
              f = checkBit(b, MUTEALL_BIT_IDX),
              e = checkBit(b, MUTEFX_BIT_IDX) && a.t.type == E_STRIP_TYPE.FX;
            if (b & d || f || e) this.state = 1;
            1 == a.t.getNameValue("forceunmute") ? ((this.state = 0), (this.img0 = res.mStripMute_OFF_F)) : (this.img0 = res.mStripMute_OFF);
          };
          this.mute.onToggleUp = function () {
            var b = getValue("mgmask"),
              d = a.t.getNameValue("mgmask"),
              d = b & d,
              f = checkBit(b, MUTEALL_BIT_IDX),
              b = checkBit(b, MUTEFX_BIT_IDX) && a.t.type == E_STRIP_TYPE.FX;
            d || f || b ? a.t.setNameValue("forceunmute", 0) : a.t.setNameValue("mute", 1);
          };
          this.mute.onToggleDown = function () {
            var b = getValue("mgmask"),
              d = a.t.getNameValue("mgmask"),
              d = b & d,
              f = checkBit(b, MUTEALL_BIT_IDX),
              b = checkBit(b, MUTEFX_BIT_IDX) && a.t.type == E_STRIP_TYPE.FX;
            d || f || b ? a.t.setNameValue("forceunmute", 1) : a.t.setNameValue("mute", 0);
          };
          this.mute.onToggle = function () {
            checkMutes();
          };
          this.solo = new CheckBox(this);
          this.solo.setPos(67, 88);
          this.solo.setImages(res.mStripSolo_OFF, res.mStripSolo_ON);
          this.solo.onToggle = function () {
            checkSolos();
          };
          this.solo.onToggleUp = function () {
            if (0 == getValue("settings.multiplesolo")) for (var b = 0; b < allStrips.length; b++) allStrips[b].setNameValue("solo", 0);
            a.t.setNameValue("solo", 1);
          };
          this.sl = new Slider(this, E_STRIP_TYPE.FX);
          this.sl.setPos(0, 134);
          this.sl.canScroll = !1;
          this.sl.w = this.w;
          this.sl.laneOffset = 34;
          this.sl.faderX = 77;
          this.sl.bottomMargin = 58;
          this.sl.lane = !1;
          var b = 101 + measures.bottomWidgetHeight;
          this.clip = new ClipBulb(this);
          this.clip.setPos(12, 127);
          this.vu = new VUMeter(this);
          this.vu.setAnchors(18, 149, null, settings.disableVUs2 ? 59 : b);
          settings.disableVUs2 ||
          ((this.gi = new GATEind(this)), (this.gi.x = 18), (this.gr = new GRMeter(this)), (this.gr.x = 18), (this.gi2 = new GATEind(this)), (this.gi2.x = 37), (this.gr2 = new GRMeter(this)), (this.gr2.x = 37));
          this.clip2 = new ClipBulb(this);
          this.clip2.setPos(31, 127);
          this.vu2 = new VUMeter(this);
          this.vu2.setAnchors(37, 149, null, settings.disableVUs2 ? 59 : b);
        },
        onShow: function () {
          this.setFx(fxSendsWidget.mode);
        },
        setVU: function (a, b, c, d, f, e, g, h) {
          1 <= b ? this.clip.clip() : this.clip.state && !this.clip.releasing && this.clip.release();
          this.vu.setValueExt(a, b);
          1 <= d ? this.clip2.clip() : this.clip2.state && !this.clip2.releasing && this.clip2.release();
          this.vu2.setValueExt(c, d);
          settings.disableVUs2 || (this.gr && this.gr.setValue(f), this.gi && this.gi.setValue(g), this.gr2 && this.gr2.setValue(e), this.gi2 && this.gi2.setValue(h));
        },
        setFx: function (a) {
          this.idx = a;
          this.vu.reset();
          this.vu2.reset();
          this.t = fxStrips[a];
          a = "f." + a + ".";
          this.led.keyPrefix = a;
          this.pan.key = a + "pan";
          this.sl.key = a + "mix";
          this.solo.key = a + "solo";
          this.label = this.t.getName();
          this.text = "FXR " + (this.idx + 1) + "";
          this.holdTimer = null;
          regUpdate(this);
        },
        calcGeometry: function () {
          this.x = screenWidth - this.w;
          masterWidget.enabled && (this.x -= masterWidget.w);
          slideOutWidget.enabled && (this.x -= slideOutWidget.w);
          this.y = topWidget.enabled ? topWidget.h : 0;
          this.h = screenHeight - this.y;
          settings.disableVUs2 ||
          ((this.gr.y = this.h - this.gr.h - 26 - measures.bottomWidgetHeight), (this.gi.y = this.gr.y - 13), (this.gr2.y = this.h - this.gr.h - 26 - measures.bottomWidgetHeight), (this.gi2.y = this.gr2.y - 13));
        },
        onDown: function (a, b) {
          var c = a - this.globalX(),
            d = b - this.globalY(),
            f = this;
          this.pressPoint = [c, d];
          if (d > this.h - measures.bottomWidgetHeight)
            if (((c = Date.now()), c - this.lastClickTime < DBL_CLK_TIME)) editWidget.setMode(editWidget.E_MODE.fx), setMode(E_MODE.EDIT), bottomWidget.gotoIDmid(selectedChannel), (this.lastClickTime = c - DBL_CLK_TIME);
            else {
              var e = this.t;
              this.holdTimer = setTimeout(function () {
                var a = new STRIPMENU(null, e);
                a.x = bound(f.globalX(), 0, screenWidth - a.w);
                a.y = screenHeight - a.h - measures.bottomWidgetHeight;
                mWidgets.push(widgets.pop());
                regUpdate(a);
              }, HOLD_TIME);
              this.t && setSelected(this.t.id, !0);
              this.lastClickTime = c;
              regUpdate(this);
            }
        },
        onUp: function () {
          clearTimeout(this.holdTimer);
        },
        paint: function () {
          ctx.fillStyle = color.bg;
          ctx.fillRect(0, 0, this.w, this.h);
          fillVertPattern(res.mStripTile, this.h);
          drawImage(res.mStripTopNCS, 0, 0);
          drawImage(res.mStripBottom, 0, this.h - this.botHeight - this.botLabelHeight);
          drawImage(res.mStripBottomLabel, 0, this.h - this.botLabelHeight);
          ctx.globalAlpha = 0.03;
          ctx.fillStyle = "#99F";
          ctx.fillRect(0, 0, this.w, this.h);
          ctx.globalAlpha = 1;
          ctx.fillStyle = this.color;
          ctx.fillRect(2, this.h - 3 - this.botLabelHeight, this.w - 4, 3);
          ctx.fillStyle = color.gradMBL;
          ctx.fillRect(2, this.h - 3 - this.botLabelHeight, this.w - 4, 3);
          ctx.fillStyle = this.color;
          selectedChannel == this.t.id && ctx.fillRect(2, this.h - this.botLabelHeight, this.w - 4, 35);
          ctx.font = font.botMChLabel;
          ctx.textAlign = "center";
          var a = this.t.getName();
          ctx.fillStyle = color.black;
          ctx.fillText(a, (this.w / 2 + 1) | 0, this.h - 10 + 1, this.w - 2);
          ctx.fillStyle = color.masterLabel;
          ctx.fillText(a, (this.w / 2) | 0, this.h - 10, this.w - 2);
          ctx.font = font.stripChannel;
          ctx.fillStyle = color.stripChLabel;
          ctx.textAlign = "left";
          ctx.fillText(this.text, 11, this.h - 10 - measures.bottomWidgetHeight);
          ctx.shadowColor = "transparent";
          drawVUMarks(this.vu2, this.gr2, ctx);
          drawMarksDB(this.sl.h, 134, 117);
          var b = getValue("mgmask"),
            a = this.t.getNameValue("mgmask") & b,
            c = b & (1 << MUTEALL_BIT_IDX),
            b = this.t.type == E_STRIP_TYPE.FX && b & (1 << MUTEFX_BIT_IDX),
            d = this.t.getNameValue("forceunmute");
          ctx.fillStyle = d ? "#82C9DE" : "#e66";
          if (c || b || a) {
            ctx.textAlign = "center";
            ctx.font = "10pt open_sans_condensedbold";
            d = 0;
            b && ctx.fillText("F", 10, 137 + 16 * d++);
            c && ctx.fillText("A", 10, 137 + 16 * d++);
            if (a) for (c = 0; 6 > c; c++) a & (1 << c) && ctx.fillText(c + 1 + "", 10, 137 + 16 * d++);
            1 == this.t.getNameValue("mute") && (this.t.getNameValue("forceunmute") && (ctx.fillStyle = "#82C9DE"), ctx.fillText("M", 10, 137 + 16 * d++));
          }
        },
      }),
      CPAStrip = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "CPAStrip";
          this.w = measures.masterStripWidth;
          this.setAnchors(null, 0, 0, 0);
          this.botLabelHeight = res.mStripBottomLabel.h();
          this.botHeight = res.mStripBottom.h();
          this.color = color.CPA;
          this.stereo = !0;
          this.label = this.text = "CPA";
          this.idx = 0;
          this.initWidgets();
        },
        initWidgets: function () {
          var a = this;
          this.led = new LED(this);
          this.led.pkey = "mix";
          this.led.setPos(6, 4);
          this.led.setSize(115, 38);
          this.led.color = color.mLedText;
          this.led.onDouble = function () {
            setValue(a.sl.key, zeroDbPos);
            updateByKey(a.sl.key);
          };
          this.led.onInput = function (b) {
            b = parseFloat(b);
            isNaN(b) ? showPopupMsg(lang.WRONG_VALUE) : a.sl.setValue(DBtoVf2(b));
          };
          this.limiter = new CheckBox(this);
          this.limiter.setPos(5, 44);
          this.limiter.setImages(res.bMTA_OFF, res.bMTA_ON);
          this.onoff = new CheckBox(this);
          this.onoff.setPos(6, 89);
          this.onoff.setImages(res.FFUNC_B_OFF, res.FFUNC_B_RED);
          this.onoff.font = "15px open_sansbold";
          this.onoff.textColor = color.black2;
          this.onoff.textColorActive = color.white;
          this.onoff.shadowColorActive = "#333";
          this.onoff.shadowColor = "#ccc";
          this.onoff.textParam = { font: "15px open_sans_condensedbold", x: null, y: null, offsetX: -1, offsetY: -3, pressOffsetX: 0, pressOffsetY: 1, align: "center", valign: "middle", shadow: ["#ccc", 0, 1, 1], dy: 12 };
          this.onoff.getState = function () {
            this.text = this.state ? lang.ON : lang.OFF;
          };
          this.solo = new CheckBox(this);
          this.solo.setPos(67, 88);
          this.solo.setImages(res.mStripSolo_OFF, res.mStripSolo_ON);
          this.solo.onToggle = function () {
            checkSolos();
          };
          this.solo.onToggleUp = function () {
            if (0 == getValue("settings.multiplesolo")) for (var b = 0; b < allStrips.length; b++) allStrips[b].setNameValue("solo", 0);
            a.t.setNameValue("solo", 1);
          };
          this.sl = new Slider(this, E_STRIP_TYPE.CPA);
          this.sl.setPos(0, 134);
          this.sl.canScroll = !1;
          this.sl.w = this.w;
          this.sl.laneOffset = 34;
          this.sl.faderX = 77;
          this.sl.bottomMargin = 58;
          this.sl.lane = !1;
          var b = 101 + measures.bottomWidgetHeight;
          this.clip = new ClipBulb(this);
          this.clip.setPos(12, 127);
          this.vu = new VUMeter(this);
          this.vu.setAnchors(18, 149, null, settings.disableVUs2 ? 59 : b);
          settings.disableVUs2 ||
          ((this.gi = new GATEind(this)), (this.gi.x = 18), (this.gr = new GRMeter(this)), (this.gr.x = 18), (this.gi2 = new GATEind(this)), (this.gi2.x = 37), (this.gr2 = new GRMeter(this)), (this.gr2.x = 37));
          this.clip2 = new ClipBulb(this);
          this.clip2.setPos(31, 127);
          this.vu2 = new VUMeter(this);
          this.vu2.setAnchors(37, 149, null, settings.disableVUs2 ? 59 : b);
        },
        getName: function () {
          return "SRX815P";
        },
        onShow: function () {
          this.setFx(fxSendsWidget.mode);
        },
        setVU: function (a, b, c, d, f, e, g, h) {
          1 <= b ? this.clip.clip() : this.clip.state && !this.clip.releasing && this.clip.release();
          this.vu.setValueExt(a, b);
          1 <= d ? this.clip2.clip() : this.clip2.state && !this.clip2.releasing && this.clip2.release();
          this.vu2.setValueExt(c, d);
          settings.disableVUs2 || (this.gr && this.gr.setValue(f), this.gi && this.gi.setValue(g), this.gr2 && this.gr2.setValue(e), this.gi2 && this.gi2.setValue(h));
        },
        setFx: function (a) {
          this.idx = a;
          this.vu.reset();
          this.vu2.reset();
          this.t = fxStrips[a];
          a = "f." + a + ".";
          this.led.keyPrefix = a;
          this.sl.key = a + "mix";
          this.solo.key = a + "solo";
          this.label = this.t.getName();
          this.text = "";
          this.holdTimer = null;
          regUpdate(this);
        },
        calcGeometry: function () {
          settings.disableVUs2 ||
          ((this.gr.y = this.h - this.gr.h - 26 - measures.bottomWidgetHeight), (this.gi.y = this.gr.y - 13), (this.gr2.y = this.h - this.gr.h - 26 - measures.bottomWidgetHeight), (this.gi2.y = this.gr2.y - 13));
        },
        onDown: function (a, b) {
          var c = a - this.globalX(),
            d = b - this.globalY(),
            f = this;
          this.pressPoint = [c, d];
          if (d > this.h - measures.bottomWidgetHeight)
            if (((c = Date.now()), c - this.lastClickTime < DBL_CLK_TIME)) editWidget.setMode(editWidget.E_MODE.fx), setMode(E_MODE.EDIT), bottomWidget.gotoIDmid(selectedChannel), (this.lastClickTime = c - DBL_CLK_TIME);
            else {
              var e = this.t;
              this.holdTimer = setTimeout(function () {
                var a = new STRIPMENU(null, e);
                a.x = bound(f.globalX(), 0, screenWidth - a.w);
                a.y = screenHeight - a.h - measures.bottomWidgetHeight;
                mWidgets.push(widgets.pop());
                regUpdate(a);
              }, HOLD_TIME);
              this.t && setSelected(this.t.id, !0);
              this.lastClickTime = c;
              regUpdate(this);
            }
        },
        onUp: function () {
          clearTimeout(this.holdTimer);
        },
        paint: function () {
          ctx.fillStyle = color.bg;
          ctx.fillRect(0, 0, this.w, this.h);
          fillVertPattern(res.mStripTile, this.h);
          drawImage(res.mStripTopNCS, 0, 0);
          drawImage(res.mStripBottom, 0, this.h - this.botHeight - this.botLabelHeight);
          drawImage(res.mStripBottomLabel, 0, this.h - this.botLabelHeight);
          ctx.fillStyle = this.color;
          ctx.fillRect(2, this.h - 3 - this.botLabelHeight, this.w - 4, 3);
          ctx.fillStyle = color.gradMBL;
          ctx.fillRect(2, this.h - 3 - this.botLabelHeight, this.w - 4, 3);
          ctx.fillStyle = this.color;
          selectedChannel == this.t.id && ctx.fillRect(2, this.h - this.botLabelHeight, this.w - 4, 35);
          ctx.font = font.botMChLabel;
          ctx.textAlign = "center";
          var a = this.getName();
          ctx.fillStyle = color.black;
          ctx.fillText(a, (this.w / 2 + 1) | 0, this.h - 10 + 1, this.w - 2);
          ctx.fillStyle = this.color;
          ctx.fillText(a, (this.w / 2) | 0, this.h - 10, this.w - 2);
          ctx.font = font.stripChannel;
          ctx.fillStyle = color.stripChLabel;
          ctx.textAlign = "left";
          ctx.fillText(this.text, 11, this.h - 10 - measures.bottomWidgetHeight);
          ctx.shadowColor = "transparent";
          drawVUMarks(this.vu2, this.gr2, ctx);
          drawMarksDB(this.sl.h, 134, 117);
        },
      });
    function drawVUMarks(a, b, c) {
      if (a) {
        c = isDefined(c) ? c : ctx;
        c.fillStyle = "rgba(255,255,255,0.35)";
        c.textAlign = "left";
        c.textBaseline = "middle";
        c.font = font.stripMarks;
        var d = a.x + a.w + 2,
          f = [-96, -90, -80, -70, -60, -50, -40, -24, -12, -6, 0],
          e = a.y + 5,
          g = a.h - 9;
        if (70 < g)
          for (a = 0; a < f.length; a++)
            if (!(f[a] < -VU_RANGE)) {
              var h = e + vuPosMark(f[a], g);
              c.fillText(f[a], d, h);
            }
        if (isDefined(b) && null != b) for (f = ["1", "5", "10", "20"], h = b.y + 5, dy = (b.h - 9) / (f.length - 1), d = b.x + b.w + 2, a = 0; a < f.length; a++) c.fillText(f[a], d, h | 0), (h += dy);
      }
    }
    function drawMarksDB(a, b, c, d) {
      d = isDefined(d) ? d : ctx;
      b = isDefined(b) ? b : 134;
      a = a - 80 + 2;
      if (!(0 > a)) {
        d.fillStyle = "rgba(255,255,255,0.35)";
        d.textAlign = "center";
        d.setShadow(color.black, 0, 2, 1);
        d.font = font.stripMarks;
        for (var f = [1, zeroDbPos, 0.5276, 0.1834, 0.0572, 0], e = 0; e < f.length; e++) 0 == f[e] && (d.font = "bold 11px sans serif");
        d.shadowColor = "transparent";
        var f = [1, 0.8932, 0.6327, 0.5276, 0.3746, 0.1834, 0.0572, 0],
          g = d.createLinearGradient(c - 8, 0, c - 8 + 8, 0);
        g.addColorStop(1, "rgba(255,255,255,0.13)");
        g.addColorStop(0.5, "rgba(255,255,255,0.22)");
        g.addColorStop(0, "rgba(255,255,255,0.3)");
        var h = d.createLinearGradient(c - 8, 0, c - 8 + 12, 0);
        h.addColorStop(1, "rgba(255,255,255,0.16)");
        h.addColorStop(0.5, "rgba(255,255,255,0.22)");
        h.addColorStop(0, "rgba(255,255,255,0.3)");
        for (e = 0; e < f.length; e++) {
          var k = Math.round(a * (1 - f[e]) + 35 - 1);
          d.fillStyle = g;
          d.fillRect(c - 8, b + k + 1, 10, 1);
        }
        k = a * (1 - zeroDbPos) + 35 - 2;
        d.fillStyle = h;
        d.fillRect(c - 8, b + k, 12, 3);
      }
    }
    function vuPosMark(a, b) {
      return ((-a * b) / VU_RANGE + 0.45) | 0;
    }
    function drawMarksVU(a, b, c, d) {
      d = isDefined(d) ? d : ctx;
      b = (isDefined(b) ? b : 24) + 4;
      a -= 4;
      d.fillStyle = "rgba(255,192,128,0.5)";
      d.textAlign = "right";
      d.shadowColor = "transparent";
      d.font = "9px sans serif";
      --c;
      for (var f = [-96, -90, -80, -70, -60, -50, -40, -24, -12, -6, 0], e = 0; e < f.length; e++)
        if (!(f[e] < -VU_RANGE)) {
          var g = vuPosMark(f[e], a) + 4;
          d.fillText(f[e] + "-", c, b + g);
        }
      d.shadowColor = "transparent";
    }
    function copyMixToAux(a) {
      var b = !1;
      -1 != auxStrips[a].getNameValue("stereoIndex") && (b = !0);
      allStrips.forEach(function (c) {
        c.AUXS && (c.setNameValue("aux." + a + ".value", c.getNameValue("mix")), b && c.setNameValue("aux." + a + ".pan", c.getNameValue("pan")));
      });
      drawAll();
    }
    function copyAuxSends(a, b) {
      var c = !1;
      auxStrips[a].getNameValue("matrix")
        ? showPopupMsg()
        : (-1 != auxStrips[a].getNameValue("stereoIndex") && -1 != auxStrips[b].getNameValue("stereoIndex") && (c = !0),
          allStrips.forEach(function (d) {
            d.AUXS && (d.setNameValue("aux." + b + ".value", d.getNameValue("aux." + a + ".value")), c && d.setNameValue("aux." + b + ".pan", d.getNameValue("aux." + a + ".pan")));
          }),
          drawAll());
    }
    function copyMtxSends(a, b) {
      var c = !1;
      1 == auxStrips[a].getNameValue("matrix") &&
      1 == auxStrips[b].getNameValue("matrix") &&
      (-1 != auxStrips[a].getNameValue("stereoIndex") && -1 != auxStrips[b].getNameValue("stereoIndex") && (c = !0),
        allStrips.forEach(function (d) {
          d.MTX && (d.setNameValue("mtx." + b + ".value", d.getNameValue("mtx." + a + ".value")), c && d.setNameValue("mtx." + b + ".pan", d.getNameValue("mtx." + a + ".pan")));
        }),
        drawAll());
    }
    function checkSolos() {
      regUpdate(masterWidget);
    }
    function checkMutes() {
      mode == E_MODE.EDIT && editWidget.mode == editWidget.E_MODE.aux && regUpdate(editWidget);
      regUpdate(masterWidget);
    }
    mPanGrad = panGrad = null;
    scrollLock = mixerTouches = 0;
    var Slider = Class.create(Widget, {
        initialize: function ($super, b, c) {
          $super(b);
          this.widgetName = "Slider";
          this.id = this.parent.id;
          this.key = null;
          this.type = c;
          this.param = null;
          switch (c) {
            case E_STRIP_TYPE.IN:
              this.fader = res.fader;
              this.color = color.INPUT;
              break;
            case E_STRIP_TYPE.MASTER:
              this.fader = res.redFader;
              this.color = "transparent";
              break;
            case E_STRIP_TYPE.FX:
              this.fader = res.blueFader;
              this.color = color.blue;
              break;
            case E_STRIP_TYPE.AUX:
              this.fader = res.auxFader;
              this.color = color.AUX;
              break;
            case E_STRIP_TYPE.SUB:
              this.fader = res.subFader;
              this.color = color.sub;
              break;
            case E_STRIP_TYPE.MEDIA:
            case E_STRIP_TYPE.LINEIN:
              this.fader = res.fader;
              this.color = color.media;
              break;
            case E_STRIP_TYPE.CPA:
              this.fader = res.greenFader;
              this.color = color.sub;
              break;
            default:
              (this.fader = res.fader), (this.color = "#ffffff");
          }
          this.x = this.w = 0;
          this.y = 90;
          this.laneOffset = this.faderX = this.bottomMargin = 0;
          this.needMoveEvt = this.redrawParent = !0;
          this.oldValue = this.value = this.lastClickTime = 0;
          this.faderH = this.fader.h() - 12;
          this.faderW = this.fader.w();
          this.slide = this.pressed = !1;
          this.touchID = -1;
          this.linked = !1;
          this.canScroll = !0;
          this.dy = 0;
          this.lastPressPoint = [-1, -1];
          this.locked = settings.masterLock;
          this.hist = [0, 0];
          this.master = !1;
          this.lane = !0;
          this.noUp = !1;
          this.noUpValue = 1;
          this.slowMode = this.hideOnDisabled = this.disabled = !1;
          this.slowValue = 10;
          this.holdTime = 1e3;
          this.noFocus = this.noStereoArrows = !1;
          this.latchArr = null;
          this.latch = !1;
          this.latchStep = 0;
          this.isGain = !1;
          this.timerWheel = null;
        },
        calcGeometry: function () {
          this.h = this.parent.h - this.y - this.bottomMargin;
        },
        onDown: function (a, b, c) {
          mixerTouches++;
          var d = this;
          clearTimeout(this.holdTimer);
          this.currentPoint = [a, b];
          if (!this.disabled && !this.pressed) {
            this.pressed = !0;
            this.touchID = c;
            var f = this.globalX() + this.faderX,
              e = this.globalY() + (this.h - this.faderH) * (1 - this.getVal()),
              e = e | 0;
            this.slide = f - 10 <= a && f + this.faderW + 10 + 5 >= a && e - 10 <= b && e + this.faderH + 10 >= b;
            this.lastPressPoint = this.pressPoint;
            this.pressPoint = [a, b];
            if (this.slide) {
              this.holdTimer = setTimeout(function () {
                var a = Math.abs(d.pressPoint[1] - d.currentPoint[1]);
                if (5 > Math.abs(d.pressPoint[0] - d.currentPoint[0]) && 5 > a) d.onhold();
              }, this.holdTime);
              scrollLock++;
              this.oldValue = this.getVal();
              if (1 == scrollLock) this.onFocus();
              this.ondown();
            }
            this.master && settings.masterLock ? ((this.locked = !0), (this.slide = !1)) : (this.locked = !1);
          }
          this.canScroll && (this.isGain && mode == E_MODE.BIG ? gainMixer.startScroll(a, c) : bottomWidget.startScroll(a, c));
        },
        onMove: function (a, b, c) {
          this.currentPoint = [a, b];
          if (!this.locked) {
            if (!this.disabled && this.touchID == c && this.slide) {
              b -= this.pressPoint[1];
              this.dy = Math.abs(b);
              var d = b / (this.h - this.faderH);
              this.slowMode && (d /= this.slowValue);
              d = bound(this.oldValue - d, 0, 1);
              if (this.noUp && d > this.noUpValue && 0 > b) return;
              this.setVal(d);
              this.onValue();
              regUpdate(this);
            }
            this.canScroll && (this.isGain && mode == E_MODE.BIG ? gainMixer.setScroll(a, c) : bottomWidget.setScroll(a, c));
          }
        },
        onUp: function (a) {
          mixerTouches--;
          this.canScroll && (this.isGain && mode == E_MODE.BIG ? gainMixer.endScroll(a) : bottomWidget.endScroll(a));
          if (!this.disabled && this.touchID == a)
            if ((this.onup(), clearTimeout(this.holdTimer), this.locked)) 0 < scrollLock && scrollLock--, (this.pressed = !1), (this.touchID = -1), (this.slide = !1), regUpdate(this);
            else {
              this.slide && ((this.oldValue = 0), scrollLock--);
              a = Date.now();
              var b = Math.abs(this.lastPressPoint[1] - this.pressPoint[1]);
              if (15 > Math.abs(this.lastPressPoint[0] - this.pressPoint[0]) && 15 > b && a - this.lastClickTime < DBL_CLK_TIME) {
                if (this.slide) this.onDoubleKnob();
                else this.onDouble();
                this.lastClickTime = a - DBL_CLK_TIME;
              } else this.lastClickTime = a;
              this.pressed = !1;
              this.touchID = -1;
              this.slowMode && regUpdate(this);
              this.slide = this.slowMode = !1;
              this.master && settings.masterLock && (this.locked = !0);
            }
        },
        onhold: function () {
          settings.nudge && ((this.slowMode = !0), regUpdate(this));
        },
        onWheel: function (a) {
          if (!(this.disabled || this.pressed || (this.master && settings.masterLock))) {
            var b = this.getVal(),
              c = a / 120 / 30;
            this.latch && this.latchStep && (c = this.latchStep * (0 > a ? -1 : 1));
            b = bound(b + c, 0, 1);
            (this.noUp && b > this.noUpValue) || (this.setVal(b), this.onValue(), regUpdate(this));
          }
        },
        setVal: function ($super, b) {
          var c = b;
          if (this.latch && this.latchArr) for (var d = 0, f = this.latchArr.length; d < f; d++) b >= this.latchArr[d] && (c = this.latchArr[d]);
          $super(c);
        },
        ondown: function () {
          this.C_CH = !1;
          this.parent.CACHED_DRAWING && ((this.parent.CACHED_DRAWING = !1), (this.C_CH = !0));
        },
        onup: function () {
          this.C_CH && (this.parent.CACHED_DRAWING = !0);
        },
        setValue: function (a) {
          this.setVal(a);
          this.onValue();
          regUpdate(this);
        },
        onDouble: function () {},
        onDoubleKnob: function () {},
        onFocus: function () {
          this.noFocus || !isDefined(this.parent.id) || (-1 == this.parent.id && mode == E_MODE.EDIT) || bottomWidget.setSelected(this.parent.id);
        },
        onValue: function () {},
        getState: function () {},
        paint: function () {
          this.getState();
          this.value = this.getVal();
          var a = (this.h - this.faderH) * (1 - this.value),
            a = a | 0;
          this.disabled && (ctx.globalAlpha = this.hideOnDisabled ? 0 : 0.5);
          if (this.lane && 0 != settings.lanes) {
            ctx.strokeStyle = this.color;
            var b = a + this.faderH - 13,
              c = this.h - 27,
              d = this.w - this.laneOffset;
            0 < c - b && (ctx.beginPath(), ctx.moveTo(d, b), ctx.lineTo(d, c), (ctx.lineCap = "round"), (ctx.lineWidth = 1 == settings.lanes ? 2 : 4), ctx.stroke());
          }
          this.slowMode && ((ctx.shadowColor = "#33CAFF"), (ctx.shadowBlur = 12), (ctx.shadowOffsetX = 0), (ctx.shadowOffsetY = 0));
          drawImage(this.fader, this.faderX, a);
          this.slowMode && ctx.setShadow();
          b = this.faderX;
          a += 34;
          if (isDefined(this.parent.getNameValue) && !this.noStereoArrows)
            switch (this.parent.getNameValue("stereoIndex")) {
              case 0:
                ctx.fillStyle = this.color;
                ctx.fillTriangle2(this.w - 12, a - 10, this.w - 8 - 12, a, this.w - 12, a + 10);
                break;
              case 1:
                (ctx.fillStyle = this.color), ctx.fillTriangle2(b - 8, a - 10, b, a, b - 8, a + 10);
            }
          this.master && settings.masterLock && this.locked && (ctx.setShadow(color.black, 4, 2, 2), drawImage(res.lock, this.faderX + 5.5, this.h - 25));
        },
      }),
      PanSlider = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "PanSlider";
          this.param = "pan";
          this.sliderW = res.panSlider.w();
          this.needMoveEvt = !0;
          this.oldValue = this.value = this.lastClickTime = 0;
          this.defaultValue = 0.5;
          this.grad = this.parent.stereo ? color.mPanGrad : color.panGrad;
          this.timer = null;
          this.disabled = this.moved = this.lastP = this.slide = !1;
        },
        onDown: function (a, b) {
          clearTimeout(this.parent.led.timer);
          clearTimeout(this.timer);
          if (this.disabled) this.onDisabledClick();
          else {
            var c = this.globalX() + (this.w - this.sliderW) * this.getVal(),
              d = this.globalY(),
              c = c | 0;
            this.slide = c - 8 <= a && c + this.sliderW + 8 >= a && d <= b && d + this.h >= b;
            this.moved = !1;
            this.slide && ((this.oldValue = this.getVal()), (this.pressPoint = [a, b]), isDefined(this.parent.id) && -1 != this.parent.id && mode != E_MODE.EDIT && bottomWidget.setSelected(this.parent.id));
            this.parent.led.setState(1);
            regUpdate(this.parent);
          }
        },
        onMove: function (a, b) {
          if (this.slide && !this.disabled) {
            var c = a - this.pressPoint[0];
            3 < Math.abs(c) && (this.moved = !0);
            c = bound(this.oldValue + c / (this.w - this.sliderW), 0, 1);
            this.setVal(c);
            this.onValue();
            regUpdate(this.parent);
          }
        },
        onUp: function () {
          if (!this.disabled) {
            var a = Date.now();
            if (a - this.lastClickTime < DBL_CLK_TIME && !this.moved && !this.lastP) {
              if (this.parent && this.parent.getNameValue)
                switch (this.parent.getNameValue("stereoIndex")) {
                  case 0:
                    this.setVal(0);
                    break;
                  case 1:
                    this.setVal(1);
                    break;
                  default:
                    this.setVal(this.defaultValue);
                }
              else this.setVal(this.defaultValue);
              this.lastClickTime = 0;
              regUpdate(this.parent);
            }
            this.lastP = this.moved;
            this.lastClickTime = a;
            this.slide = this.moved = !1;
            this.oldValue = 0;
            this.pressPoint = [-1, -1];
            var b = this.parent.led;
            this.timer = setTimeout(function () {
              b.setState(0);
            }, 2e3);
            this.onValue();
          }
        },
        onWheel: function (a) {
          var b = this.getVal(),
            b = bound(b + a / 120 / 30, 0, 1);
          this.setVal(b);
          this.parent.led.setState(1);
          this.onValue();
          var c = this.parent.led;
          clearTimeoutC(this.timer);
          this.timer = setTimeout(function () {
            c.setState(0);
          }, 2e3);
          regUpdate(this.parent);
        },
        onDisabledClick: function () {},
        onValue: function () {},
        getState: function () {},
        paint: function () {
          this.getState();
          this.grad = this.parent.stereo ? color.mPanGrad : color.panGrad;
          var a = ((this.w - this.sliderW) * this.getVal() + 0.5) | 0,
            b = this.w / 2;
          this.disabled && (ctx.globalAlpha = 0.5);
          ctx.fillStyle = this.grad;
          ctx.fillRect(b, 12, a - b + ((this.sliderW / 2) | 0), 8);
          drawImage(res.panSlider, a, 0);
          this.disabled && (ctx.globalAlpha = 1);
        },
      });
    vuGradGain = vuGrad4 = vuGrad3 = vuGrad2 = vuGrad = null;
    vuGradH = 0;
    vuPattern = null;
    var VUMeter = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "VUMeter";
          this.ignoreEvents = this.DYNAMIC_WIDGET = !0;
          this.w = measures.vuWidth;
          this.bottomMargin = 0;
          this.bh = 12;
          this.ghostFallVelocity = this.ghostValueBg = this.ghostValue = this.pFallVelocity = this.pValue = this.fallVelocity = this.valueBg = this.value = 0;
          this.clipping = !1;
          this.gridImg = null;
          this.cachedHeight = -1;
          this.gain = !1;
          vuPattern || (vuPattern = createPattern(res.vuTexture, "repeat-y"));
          this.fillTexture = vuPattern;
          this.ignoreGrad = !1;
          this.ptimer = null;
          this.bgColor = color.vuBg;
          this.curpPos = this.curgPos = this.curPos = 0;
          this.isTicking = !1;
          this.peak = this.quant = !0;
          this.vuGradH = 0;
          this.vuGradInv = this.vuGradGain = this.vuGrad4 = this.vuGrad3 = this.vuGrad2 = this.vuGrad = null;
          this.disabled = this.inversed = !1;
          this.m = 2;
        },
        setValueExt: function (a, b) {
          if (!settings.disableVUs) {
            var c = !settings.disableVUpeak && this.peak;
            if (!this.globalEnabled())
              if (((this.value = this.valueBg = bound(b, 0, 4)), (this.ghostValue = this.ghostValueBg = bound(a, 0, 4)), this.valueBg > this.pValue))
                (this.pValue = this.valueBg), (this.pFallVelocity = 0), this.ptimer && (clearTimeout(this.ptimer), (this.ptimer = null));
              else {
                var d = this;
                null == this.ptimer &&
                (this.ptimer = setTimeout(function () {
                  d.pFallVelocity = GLOBAL_VU_FALL_SPEED / 2;
                  d.isTicking || ((d.isTicking = !0), regTick(d));
                  d.ptimer = null;
                }, PEAK_HOLD_TIME));
              }
            else if (!(0.005 > Math.abs(b - this.valueBg) && 0.005 > Math.abs(a - this.ghostValueBg))) {
              this.valueBg = bound(b, 0, 4);
              this.ghostValueBg = bound(a, 0, 4);
              var f = !1,
                e = !1,
                g = (this.h * this.valueBg) | 0;
              g > this.h % 12 && (g = g - (g % 12) + (this.h % 12));
              this.curPos != g && (this.value < this.valueBg ? ((this.value = this.valueBg), (e = !0)) : ((this.fallVelocity = GLOBAL_VU_FALL_SPEED), (f = !0)));
              c &&
              (this.pValue < this.valueBg
                ? ((this.pValue = this.valueBg), (this.pFallVelocity = 0), this.ptimer && (clearTimeout(this.ptimer), (this.ptimer = null)))
                : ((d = this),
                null == this.ptimer &&
                (this.ptimer = setTimeout(function () {
                  d.pFallVelocity = GLOBAL_PEAK_FALL_SPEED;
                  d.isTicking || ((d.isTicking = !0), regTick(d));
                  d.ptimer = null;
                }, PEAK_HOLD_TIME))));
              this.disableVUghost ||
              ((g = (this.h * this.ghostValueBg) | 0),
              g > this.h % 12 && (g = g - (g % 12) + (this.h % 12)),
              this.curgPos != g && (this.ghostValue < this.ghostValueBg ? ((this.ghostValue = this.ghostValueBg), (e = !0)) : ((this.ghostFallVelocity = GLOBAL_VU_FALL_SPEED), (f = !0))));
              f && !this.isTicking && ((this.isTicking = !0), regTick(this));
              e && regUpdate(this);
            }
          }
        },
        reset: function () {
          this.pValue = this.ghostValue = this.ghostValueBg = this.value = this.valueBg = 0;
          regUpdate(this);
        },
        tick: function () {
          var a = !1,
            b = !1,
            c = settings.vuquantise && this.quant,
            d = !settings.disableVUpeak && this.peak;
          if (this.value <= this.valueBg) this.value = this.valueBg;
          else {
            this.value -= this.fallVelocity;
            this.fallVelocity += GLOBAL_VU_FALL_ACC;
            this.value < this.valueBg ? (this.value = this.valueBg) : (a = !0);
            var f = (this.h * this.value) | 0;
            c && f > this.h % 12 && (f = f - (f % 12) + (this.h % 12));
            this.curPos != f && (b = !0);
          }
          this.disableVUghost ||
          (this.ghostValue <= this.ghostValueBg
            ? (this.ghostValue = this.ghostValueBg)
            : ((this.ghostValue -= this.ghostFallVelocity),
              (this.ghostFallVelocity += GLOBAL_VU_FALL_ACC),
              this.ghostValue < this.ghostValueBg ? (this.ghostValue = this.ghostValueBg) : (a = !0),
              (f = (this.h * this.ghostValue) | 0),
            c && f > this.h % 12 && (f = f - (f % 12) + (this.h % 12)),
            this.curgPos != f && (b = !0)));
          d &&
          (this.pValue <= this.valueBg
            ? (this.pValue = this.valueBg)
            : 0 < this.pValue &&
            0 < this.pFallVelocity &&
            ((this.pValue -= this.pFallVelocity),
              (this.pFallVelocity += GLOBAL_PEAK_FALL_ACC),
              this.pValue < this.valueBg ? (this.pValue = this.valueBg) : (a = !0),
              (f = (this.h * this.pValue) | 0),
            c && f > this.h % 12 && (f = f - (f % 12) + (this.h % 12)),
            this.curpPos != f && (b = !0)));
          a ? regTick(this) : (this.isTicking = !1);
          b && regUpdate(this);
        },
        setPos: function ($super, b, c, d) {
          $super(b, c);
          this.bottomMargin = d;
        },
        calcGeometry: function () {},
        onResize: function () {
          this.createGradient();
        },
        createGradient: function () {
          this.vuGradH == this.h ||
          this.ignoreGrad ||
          1 > this.h ||
          ((this.vuGrad = ctx.createLinearGradient(0, this.h, 0, 0)),
            this.vuGrad.addColorStop(0, "green"),
            this.vuGrad.addColorStop(0.5, "yellow"),
            this.vuGrad.addColorStop(1, "red"),
            (this.vuGrad2 = ctx.createLinearGradient(0, this.h, 0, 0)),
            this.vuGrad2.addColorStop(0, "#494"),
            this.vuGrad2.addColorStop(0.5, "#aa3"),
            this.vuGrad2.addColorStop(1, "#d44"),
            (this.vuGrad3 = ctx.createLinearGradient(0, this.h, 0, 0)),
            this.vuGrad3.addColorStop(0, "#345C7F"),
            this.vuGrad3.addColorStop(1, "#698CAF"),
            (this.vuGrad4 = ctx.createLinearGradient(0, this.h, 0, 0)),
            this.vuGrad4.addColorStop(0, "#296BA0"),
            this.vuGrad4.addColorStop(1, "#60A5EA"),
            (this.vuGradGain = ctx.createLinearGradient(0, this.h, 0, 0)),
            this.vuGradGain.addColorStop(0, "#FF9900"),
            this.vuGradGain.addColorStop(1, "#FF0000"),
          this.inverted && ((this.vuGradInv = ctx.createLinearGradient(0, this.h, 0, 0)), this.vuGradInv.addColorStop(0, "#CC7CEC"), this.vuGradInv.addColorStop(1, "#BA4FE6")),
            (this.vuGradH = this.h));
        },
        paint: function () {
          var a = settings.vuquantise && this.quant,
            b = !settings.disableVUpeak && this.peak;
          ctx.fillStyle = this.disabled ? "#060606" : this.bgColor;
          ctx.fillRect(0, 0, this.w, this.h);
          this.disabled && (ctx.globalAlpha = 0.3);
          if (!settings.disableVUs) {
            var c = (this.h * this.value) | 0;
            a && !this.inverted && c > this.h % 12 && (c = c - (c % 12) + (this.h % 12));
            a && this.inverted && c > this.h % 12 && (c -= c % 12);
            this.curPos = c;
            c = bound(c, 0, this.h);
            ctx.fillStyle = this.inverted ? this.vuGradInv : this.gain ? this.vuGradGain : settings.dimVUs ? this.vuGrad2 : this.vuGrad;
            this.inverted ? ctx.fillRect(this.m, 0, this.w - 2 * this.m, c) : ctx.fillRect(this.m, this.h - c, this.w - 2 * this.m, c);
            if (!settings.disableVUghost && !this.inverted) {
              var d = (this.h * this.ghostValue) | 0;
              a && d > this.h % 12 && (d = d - (d % 12) + (this.h % 12));
              this.curgPos = d;
              d = bound(d, 0, this.h);
              d > c && ((ctx.fillStyle = 1 > c ? this.vuGrad4 : this.vuGrad3), ctx.fillRect(this.m, this.h - d, this.w - 2 * this.m, d - c));
            }
            b &&
            ((c = (this.h * this.pValue) | 0),
            a && c > this.h % 12 && (c = c - (c % 12) + (this.h % 12)),
              (this.curpPos = c),
            12 < c && c < this.h && ((ctx.fillStyle = this.gain ? this.vuGradGain : settings.dimVUs ? this.vuGrad2 : this.vuGrad), ctx.fillRect(this.m, this.h - c, this.w - 2 * this.m, a ? 12 : 5)));
          }
          this.fillTexture && ((ctx.fillStyle = this.fillTexture), ctx.fillRect(0, 0, this.w, this.h), (ctx.fillStyle = "#090B0F"), ctx.fillRect(0, this.h - 2, this.w, 2), ctx.fillRect(0, 0, this.w, 2));
        },
      }),
      VUMeterSimple = Class.create(VUMeter, {
        initialize: function ($super, b) {
          $super(b);
          this.fillTexture = null;
          this.peak = this.quant = !1;
          this.w = 4;
          this.m = 1;
          this.bgColor = "#1b1c1f";
          var c = this;
          EMULATE &&
          setInterval(function () {
            c.setValueExt(0, Math.random());
          }, 200);
        },
      }),
      GRMeter = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "GRMeter";
          this.DYNAMIC_WIDGET = !0;
          this.w = measures.vuWidth;
          this.h = 60;
          this.ignoreEvents = !0;
          this.pFallVelocity = this.fallVelocity = this.valueBg = this.value = 0;
        },
        reset: function () {
          this.value = 0;
          regUpdate(this);
        },
        tick: function () {},
        setValue: function (a) {
          settings.disableVUs || ((a = bound(a / COMP_SCALE, 0, 1)), 0.01 > Math.abs(a - this.value) || ((this.value = a), regUpdate(this)));
        },
        paint: function () {
          ctx.fillStyle = "#52545A";
          ctx.fillRect(0, 0, this.w, this.h);
          if (0.015 < this.value) {
            var a = ((this.h - 4) * this.value) | 0,
              a = bound(a, 0, this.h);
            1 < a && ((ctx.fillStyle = "#800"), ctx.fillRect(2, 2, this.w - 4, a), (ctx.fillStyle = "#f00"), ctx.fillRect(2, a + 2, this.w - 4, 1));
            2 < a && ((ctx.fillStyle = "#b00"), ctx.fillRect(2, a - 1 + 2, this.w - 4, 1));
          }
          ctx.fillStyle = vuPattern;
          ctx.fillRect(0, 0, this.w, this.h);
          ctx.fillStyle = "#090B0F";
          ctx.fillRect(0, this.h - 2, this.w, 2);
          ctx.fillRect(0, 0, this.w, 2);
        },
      }),
      GATEind = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "GRMeter";
          this.DYNAMIC_WIDGET = !0;
          this.h = this.w = measures.vuWidth;
          this.value = this.ignoreEvents = !0;
        },
        setValue: function (a) {
          this.value != a && ((this.value = a), regUpdate(this));
        },
        paint: function () {
          ctx.fillStyle = "#111";
          ctx.fillRect(0, 0, this.w, this.h);
          ctx.fillStyle = "#494B51";
          ctx.fillRect(2, 2, this.w - 4, this.h - 4);
          ctx.strokeStyle = "rgba(0,0,0,0.1)";
          ctx.strokeRect(0.5, 0.5, this.w - 1, this.h - 1);
          if (!this.value) {
            ctx.fillStyle = "#e11";
            var a = 2;
            ctx.fillRect(a, a, this.w - 2 * a, this.h - 2 * a);
            ctx.strokeStyle = "rgba(0,0,0,0.8)";
            ctx.lineWidth = 2;
            a = 3;
            ctx.beginPath();
            ctx.moveTo(a, a);
            ctx.lineTo(this.w - a, this.h - a);
            ctx.moveTo(this.w - a, a);
            ctx.lineTo(a, this.h - a);
            ctx.stroke();
          }
        },
      }),
      ModeButton = Class.create(Widget, {
        initialize: function ($super, b, c) {
          $super(b);
          this.widgetName = "ModeButton";
          this.state = 0;
          this.disabled = !1;
          this.mode = c;
          this.img2 = this.img1 = this.img0 = this.mode2 = null;
          this.transMode = !1;
          this.clr0 = "#424242";
          this.clr1 = "#9036b5";
          this.clr2 = "#00c";
          this.holdTimer = null;
          this.stopClick = !1;
        },
        setMode2: function (a) {
          this.mode2 = a;
        },
        setImages: function (a, b) {
          null != a && ((this.img0 = a), (this.img1 = b), (this.w = this.img0.w()), (this.h = this.img0.h()));
        },
        onDown: function () {
          if (!this.disabled) {
            this.valueFunc();
            switch (this.state) {
              case 0:
                setMode(this.mode);
                break;
              case 1:
                null != this.mode2 ? setMode(this.mode2) : setMode(E_MODE.MIX);
                break;
              case 2:
                null != this.mode2 ? setMode(this.mode) : setMode(E_MODE.MIX);
            }
            var a = this;
            clearTimeout(this.holdTimer);
            this.onHold &&
            (this.holdTimer = setTimeout(function () {
              a.onHold();
              a.stopClick = !0;
            }, HOLD_TIME));
          }
        },
        onUp: function () {
          clearTimeout(this.holdTimer);
        },
        setState: function (a) {
          this.state = a;
        },
        valueFunc: function () {},
        getState: function () {
          this.state = mode == this.mode ? 1 : null != this.mode2 && this.mode2 == mode ? 2 : 0;
        },
        paint: function () {
          this.getState();
          this.disabled && (ctx.globalAlpha = 0.6);
          if (this.transMode)
            switch ((ctx.roundRect(4, 6, this.w - 8, this.h - 14, 4), this.state)) {
              case 0:
                ctx.fillStyle = this.clr0;
                ctx.fill();
                this.img0 && drawImage(this.img0, 0, 0);
                break;
              case 1:
                ctx.fillStyle = this.clr1;
                ctx.fill();
                this.img0 && drawImage(this.img1, 0, 0);
                break;
              case 2:
                (ctx.fillStyle = this.clr2), ctx.fill(), this.img0 && drawImage(this.img1, 0, 0);
            }
          else {
            switch (this.state) {
              case 0:
                null != this.img0 ? drawImage(this.img0, 0, 0) : ((ctx.fillStyle = "rgba(60,60,60,0.7)"), ctx.fillRect(0, 0, this.w, this.h));
                break;
              case 1:
                null != this.img1 ? drawImage(this.img1, 0, 0) : (null != this.img0 && drawImage(this.img0, 0, 0), (ctx.fillStyle = "rgba(255,255,0,0.2)"), ctx.fillRect(0, 0, this.w, this.h));
                break;
              case 2:
                null != this.img2 ? drawImage(this.img2, 0, 0) : ((ctx.fillStyle = color.red), ctx.fillRect(0, 0, this.w, this.h));
            }
            this.disabled && (ctx.globalAlpha = 1);
          }
        },
      }),
      TabButton = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "TabButton";
          this.mode = this.state = 0;
          this.text = "null";
          this.img0 = null;
          this.font = font.tabText;
          this.textColor = color.tabText;
          this.it = this.cosmetic = !1;
          this.w = 111;
          this.h = 30;
        },
        onDown: function () {
          this.cosmetic ? this.valueFunc() : this.parent.setMode(this.mode);
        },
        setImage: function (a, b, c) {
          this.img0 = a;
          this.ix = b;
          this.iy = c;
        },
        valueFunc: function () {
          this.parent.setMode(this.mode);
        },
        getState: function () {
          this.cosmetic || (this.state = this.parent.mode == this.mode ? 1 : 0);
        },
        paint: function () {
          this.getState();
          this.dsbld && (ctx.globalAlpha = 0.4);
          0 == this.state
            ? ((ctx.fillStyle = color.eqBg),
              ctx.fillRect(0, 0, this.w, this.h),
              (ctx.strokeStyle = color.tabStroke),
              ctx.strokeRect(0.5, 0.5, this.w - 1, this.h - 2),
              (ctx.fillStyle = "rgba(255,255,255,0.1)"),
              ctx.fillRect(1, this.h, this.w - 2, -10),
              null != this.img0
                ? (this.it && (ctx.globalAlpha = 0.4), drawImage(this.img0, this.ix, this.iy), this.it && (ctx.globalAlpha = 1))
                : ((ctx.font = this.font),
                  (ctx.textAlign = "center"),
                  (ctx.fillStyle = color.black),
                  ctx.fillText(this.text, (this.w / 2 + 1) | 0, 23, this.w - 4),
                  (ctx.fillStyle = this.textColor),
                  ctx.fillText(this.text, (this.w / 2) | 0, 22, this.w - 4)))
            : (isDefined(this.color) ? (ctx.fillStyle = this.color) : (ctx.fillStyle = this.parent.color),
              ctx.fillRect(0, 0, this.w, this.h),
              (ctx.fillStyle = color.grad3),
              ctx.fillRect(0, 0, this.w, 7),
              null != this.img0
                ? (this.it && (ctx.globalAlpha = 0.4), drawImage(this.img0, this.ix, this.iy), this.it && (ctx.globalAlpha = 1))
                : ((ctx.font = font.tabTextSel),
                  (ctx.textAlign = "center"),
                  (ctx.fillStyle = color.black),
                  ctx.fillText(this.text, (this.w / 2 + 1) | 0, 23, this.w - 4),
                  (ctx.fillStyle = color.tabTextSel),
                  ctx.fillText(this.text, (this.w / 2) | 0, 22, this.w - 4),
                  (ctx.shadowColor = "transparent")));
          this.dsbld && (ctx.globalAlpha = 1);
        },
      }),
      CheckBox = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "CheckBox";
          this.img2 = this.img1 = this.img0 = this.param = null;
          this.state = 0;
          this.opaque = !1;
          this.clr0 = "#3E3E3E";
          this.clr1 = "rgba(255,255,255,0.5)";
          this.linked = this.invisible = this.disabledHide = this.disabled = this.invertedValue = !1;
          this.holdTimer = null;
          this.stopClick = this.clickOnUp = this.needBG = this.longClickMark = !1;
          this.lmColor = color.longClickMark;
          this.text = null;
          this.textColorActive = this.textColor = color.white;
          this.shadowColorActive = this.shadowColor = null;
          this.textMargin = 3;
          this.textParam = { font: font.tabText, x: null, y: null, offsetX: 0, offsetY: -2, pressOffsetX: 0, pressOffsetY: 1, align: "center", valign: "middle", shadow: [color.black, 0, 1, 1], dy: 16 };
          this.buttonMode = !1;
        },
        setImages: function (a, b, c) {
          isDefined(a) && ((this.img0 = a), (this.w = this.img0.w()), (this.h = this.img0.h()));
          this.img1 = b;
          isDefined(c) && (this.img2 = c);
        },
        onDownB: function () {
          this.disabled || ((this.longOk = !1), (this.state = 1), this.opaque ? regUpdate(this.parent) : regUpdate(this));
        },
        onUpB: function () {
          this.disabled || ((this.state = 0), this.opaque ? regUpdate(this.parent) : regUpdate(this), this.valueFunc(), this.onToggle());
        },
        onDown: function () {
          if (this.buttonMode) return this.onDownB();
          this.stopClick = !1;
          if (!this.disabled) {
            this.clickOnUp || this.doClick();
            var a = this;
            clearTimeout(this.holdTimer);
            this.onHold &&
            (this.holdTimer = setTimeout(function () {
              a.onHold();
              a.stopClick = !0;
            }, HOLD_TIME));
          }
        },
        onUp: function () {
          if (this.buttonMode) return this.onUpB();
          clearTimeout(this.holdTimer);
          this.clickOnUp && !this.stopClick && (clearTimeout(this.holdTimer), this.doClick());
        },
        doClick: function () {
          switch (this.state) {
            case 0:
            case !1:
              this.state = 1;
              this.onToggleUp();
              break;
            case 1:
            case !0:
              (this.state = 0), this.onToggleDown();
          }
          null != this.key && this.setVal(this.state);
          this.linked && null != this.parent.linkTarget && this.parent.linkTarget.setNameValue(this.param, this.state);
          this.onToggle();
          this.valueFunc(this.state);
          regUpdate(this.parent);
        },
        setState: function (a) {
          this.state = a;
          regUpdate(this.parent);
        },
        onToggle: function () {},
        onToggleUp: function () {},
        onToggleDown: function () {},
        valueFunc: function () {},
        getState: function () {},
        paint: function () {
          null != this.key && (this.state = this.getVal());
          this.getState();
          (isDefined(this.state) && null != this.state) || (this.state = 0);
          if (!this.invisible) {
            this.needBG && ((ctx.fillStyle = color.eqBg), ctx.fillRect(0, 0, this.w, this.h));
            this.disabled && (ctx.globalAlpha = this.disabledHide ? 0 : 0.2);
            switch (this.state) {
              case 0:
              case !1:
                this.invertedValue ? this.drawDOWNState() : this.drawUPState();
                break;
              case 1:
              case !0:
                this.invertedValue ? this.drawUPState() : this.drawDOWNState();
            }
            this.disabled && (ctx.globalAlpha = 1);
            if (this.longClickMark) {
              var a = 4;
              if ((this.invertedValue && !this.state) || (!this.invertedValue && this.state)) a += 1;
              ctx.fillStyle = color.longClickMark2;
              ctx.fillCircle(this.w - 6, a + 1, 3);
              ctx.fillStyle = color.longClickMark;
              ctx.fillCircle(this.w - 6, a + 1, 2);
            }
          }
        },
        drawUPState: function () {
          null != this.img0 ? drawImage(this.img0, 0, 0) : ((ctx.fillStyle = this.clr0), ctx.fillRect(0, 0, this.w, this.h));
          if (this.text) {
            var a = Math.floor(this.textParam.x || this.w / 2) + this.textParam.offsetX,
              b = Math.floor(this.textParam.y || this.h / 2) + this.textParam.offsetY;
            ctx.fillStyle = this.textColor;
            this.textParam.max = this.w - 2 * this.textMargin;
            this.shadowColor && (this.textParam.shadow[0] = this.shadowColor);
            this.disabled && (this.textParam.shadow[0] = "transparent");
            ctx.drawText(this.text, a, b, this.textParam);
          }
        },
        drawDOWNState: function () {
          null != this.img1 ? drawImage(this.img1, 0, 0) : (null != this.img0 && drawImage(this.img0, 0, 0), (ctx.fillStyle = this.clr1), ctx.fillRect(0, 0, this.w, this.h));
          if (this.text) {
            var a = Math.floor(this.textParam.x || this.w / 2) + this.textParam.offsetX,
              b = Math.floor(this.textParam.y || this.h / 2) + this.textParam.offsetY,
              a = a + this.textParam.pressOffsetX,
              b = b + this.textParam.pressOffsetY;
            ctx.fillStyle = this.textColorActive || this.textColor;
            this.textParam.max = this.w - 2 * this.textMargin;
            this.shadowColorActive && (this.textParam.shadow[0] = this.shadowColorActive);
            this.disabled && (this.textParam.shadow[0] = "transparent");
            ctx.drawText(this.text, a, b, this.textParam);
          }
        },
      }),
      Indicator = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "CheckBox";
          this.img2 = this.img1 = this.img0 = this.param = null;
          this.state = 0;
          this.clr0 = "#222";
          this.clr1 = "rgba(255,255,255,0.5)";
          this.clr2 = "#0f0";
        },
        setImages: function (a, b) {
          this.img0 = a;
          this.img1 = b;
          this.w = this.img0.w();
          this.h = this.img0.h();
        },
        setState: function (a) {
          this.state = a;
          regUpdate(this.parent);
        },
        getState: function () {},
        paint: function () {
          null != this.key && (this.state = this.getVal());
          this.getState();
          switch (this.state) {
            case 0:
              null != this.img0 ? drawImage(this.img0, 0, 0) : ((ctx.fillStyle = this.clr0), ctx.fillRoundRect(0, 0, this.w, this.h, 2));
              break;
            case 1:
              null != this.img1 ? drawImage(this.img1, 0, 0) : (null != this.img0 && drawImage(this.img0, 0, 0), (ctx.fillStyle = this.clr1), ctx.fillRoundRect(0, 0, this.w, this.h, 2));
              break;
            case 2:
              null != this.img2 ? drawImage(this.img2, 0, 0) : ((ctx.fillStyle = this.clr2), ctx.fillRoundRect(0, 0, this.w, this.h, 2));
          }
        },
      }),
      Button = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "Button";
          this.img2 = this.img1 = null;
          this.pressed = !1;
          this.timer = null;
          this.longClickMark = this.longOk = !1;
          this.longClickMarkColor = color.longClickMark;
          this.longClickMarkColor2 = color.longClickMark2;
          this.disabled = !1;
          this.disabledHide = !0;
          this.clr1 = "#666";
          this.clr2 = "red";
          this.frame = !1;
          this.frameClr1 = "#333";
          this.frameClr2 = "#eee";
          this.text = null;
          this.textColorActive = this.textColor = color.white;
          this.textMargin = 3;
          this.textParam = { font: font.tabText, x: null, y: null, offsetX: 0, offsetY: 0, pressOffsetX: 0, pressOffsetY: 1, align: "center", valign: "middle", shadow: [color.black, 0, 1, 1], dy: 16 };
        },
        setImages: function (a, b) {
          this.img1 = a;
          this.img2 = b;
          this.w = this.img1.w();
          this.h = this.img1.h();
        },
        onDown: function () {
          if (!this.disabled) {
            this.longOk = !1;
            this.pressed = !0;
            this.valueFunc();
            var a = this;
            clearTimeout(this.timer);
            this.longClickMark &&
            (this.timer = setTimeout(function () {
              a.onHold();
              a.longOk = !0;
            }, HOLD_TIME));
            this.opaque ? regUpdate(this.parent) : regUpdate(this);
          }
        },
        onUp: function () {
          if (!this.disabled && (clearTimeout(this.timer), (this.pressed = !1), this.opaque ? regUpdate(this.parent) : regUpdate(this), !this.longOk)) this.onPress();
        },
        onHold: function () {},
        valueFunc: function () {},
        onValue: function () {},
        onPress: function () {},
        getState: function () {},
        paint: function () {
          this.getState();
          this.disabled && (ctx.globalAlpha = this.disabledHide ? 0 : 0.2);
          this.pressed
            ? null != this.img2
              ? drawImage(this.img2, 0, 0)
              : ((ctx.fillStyle = this.clr2), ctx.fillRect(0, 0, this.w, this.h), this.frame && ((ctx.lineWidth = 1), (ctx.strokeStyle = this.frameClr2), ctx.strokeRect(0.5, 0.5, this.w - 1, this.h - 1)))
            : null != this.img1
              ? drawImage(this.img1, 0, 0)
              : ((ctx.fillStyle = this.clr1), ctx.fillRect(0, 0, this.w, this.h), this.frame && ((ctx.lineWidth = 1), (ctx.strokeStyle = this.frameClr1), ctx.strokeRect(0.5, 0.5, this.w - 1, this.h - 1)));
          if (this.text) {
            var a = Math.floor(this.textParam.x || this.w / 2) + this.textParam.offsetX,
              b = Math.floor(this.textParam.y || this.h / 2) + this.textParam.offsetY;
            this.pressed ? ((a += this.textParam.pressOffsetX), (b += this.textParam.pressOffsetY), (ctx.fillStyle = this.textColorActive || this.textColor)) : (ctx.fillStyle = this.textColor);
            this.textParam.max = this.w - 2 * this.textMargin;
            ctx.drawText(this.text, a, b, this.textParam);
          }
          this.longClickMark &&
          ((b = 4), this.pressed && (b += 1), (ctx.fillStyle = this.longClickMarkColor2), ctx.fillCircle(this.w - 6, b + 1, 3), (ctx.fillStyle = this.longClickMarkColor), ctx.fillCircle(this.w - 6, b + 1, 2));
          this.disabled && (ctx.globalAlpha = 1);
        },
      }),
      ClipBulb = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "CLIP_INDICATOR";
          this.state = 0;
          this.h = this.w = 20;
          this.timer = null;
          this.master = !1;
          this.redrawParent = !0;
          this.releasing = !1;
        },
        clip: function () {
          this.state || ((this.state = 1), (this.releasing = !1), regUpdate(this));
        },
        release: function () {
          this.releasing = !0;
          var a = this;
          clearTimeoutC(this.timer);
          this.timer = setTimeout(function () {
            a.state = 0;
            regUpdate(a);
          }, CLIP_HOLD_TIME);
        },
        paint: function () {
          0 == this.state ? drawImage(res.peakOFF, 0, 0) : drawImage(res.peakON, 0, 0);
        },
      }),
      LED = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "LED";
          this.text = "0.0 db";
          this.msg = "Message";
          null != this.parent && (this.id = this.parent.id);
          this.state = 0;
          this.color = color.ledText;
          this.holdtimer = this.timer = null;
          this.redrawParent = !0;
          this.keyPrefix = this.parent.name;
          this.percentMode = !1;
          this.pkey = "mix";
          this.master = !1;
          this.lastClickTime = 0;
          this.needStereo = !0;
          this.forceDB = !1;
          this.dbTimer = null;
        },
        updateLevel: function () {
          if ("undefined" != typeof this.parent.sl || "undefined" != typeof this.parent.slGain)
            if (isDefined(this.parent.slGain)) {
              var a = getValue(this.keyPrefix + "gain"),
                a = precision((IS_UI_24 ? VtoGAIN24 : VtoGAINP)(a), 1);
              this.text = (0 < a ? "+" : "") + a + " dB";
              getValue(this.keyPrefix + "disablegain") && (this.text = "...");
            } else (a = getValue(this.keyPrefix + this.pkey)), (this.text = VtoDB(a));
        },
        updateLevelByKey: function () {
          if (this.percentMode) this.text = ((100 * getValue(this.key)) | 0) + "%";
          else {
            var a = getValue(this.key);
            this.text = VtoDB(a);
          }
        },
        updatePan: function () {
          if ("undefined" != typeof this.parent.pan) {
            var a = getValue(this.keyPrefix + "pan"),
              a = VtoPAN(a);
            this.text = 0 < a ? "R " + a : 0 > a ? "L " + -a : lang.CENTER;
          }
        },
        setState: function (a) {
          this.state = a;
          this.parent.NEED_UPDATE = !0;
          regUpdate(this.parent);
        },
        setMsg: function (a) {
          this.msg = a;
          this.state = 2;
          regUpdate(this.parent);
        },
        clearMsg: function () {
          this.state = 0;
          regUpdate(this.parent);
        },
        valueFunc: function () {},
        showPan: function () {
          this.state = 1;
          var a = this;
          clearTimeoutC(this.timer);
          this.timer = setTimeout(function () {
            a.setState(0);
          }, 1e3);
        },
        onDown: function () {
          this.valueFunc();
          var a = this;
          clearTimeoutC(this.holdtimer);
          this.holdtimer = setTimeout(function () {
            a.onHold();
          }, HOLD_TIME);
        },
        onUp: function () {
          clearTimeoutC(this.holdtimer);
          this.holdtimer = null;
          var a = Date.now();
          a - this.lastClickTime < DBL_CLK_TIME ? (this.onDouble(), (this.lastClickTime = a - DBL_CLK_TIME)) : (this.lastClickTime = a);
        },
        onPress: function () {},
        onHold: function () {
          var a = this;
          editOk.valueFunc = function () {
            a.onInput(editBox2.value);
          };
          showEditBox2(lang.NEW_VALUE, "");
        },
        onDouble: function () {},
        onInput: function (a) {
          showPopupMsg("" + a);
        },
        getState: function () {},
        getState2: function () {
          null == this.key ? (0 == this.state && this.updateLevel(), 1 == this.state && this.updatePan()) : 1 == this.state ? this.updatePan() : this.updateLevelByKey();
        },
        designPeak: function (a, b, c, d) {
          if (-0.001 <= d && 0.001 >= d) return [1, 0, 0, 1, 0, 0];
          d = Math.pow(10, d / 40);
          b = (2 * Math.PI * b) / a;
          a = Math.cos(b);
          c = (b * (2 * Math.PI - b)) / (c * (4 * Math.PI - b));
          b = 1 + c / d;
          var f = Math.pow(10, 0) / b;
          return [(1 + c * d) * f, -(2 * a) * f, (1 - c * d) * f, 1, -(2 * a) / b, (1 - c / d) / b];
        },
        designHP: function (a, b, c) {
          if (20.1 > b) return [1, 0, 0, 1, 0, 0];
          b = (2 * Math.PI * b) / a;
          a = Math.cos(b);
          c = Math.sin(b) / (2 * c);
          b = 1 + c;
          var d = Math.pow(10, 0) / b;
          return [0.5 * (1 + a) * d, -(1 + a) * d, 0.5 * (1 + a) * d, 1, -(2 * a) / b, (1 - c) / b];
        },
        designLP: function (a, b, c) {
          if (22049.9 < b) return [1, 0, 0, 1, 0, 0];
          b = (2 * Math.PI * b) / a;
          a = Math.cos(b);
          c = Math.sin(b) / (2 * c);
          b = 1 + c;
          var d = Math.pow(10, 0) / b;
          return [0.5 * (1 - a) * d, (1 - a) * d, 0.5 * (1 - a) * d, 1, -(2 * a) / b, (1 - c) / b];
        },
        eqCalc: function () {
          var a = this.parent;
          this.RATE = 48e3;
          var b = "hpf b1 b2 b3 b4 lpf".split(" ");
          this.bands = IS_UI_24 && a.type == E_STRIP_TYPE.IN ? 6 : 5;
          var c = a.name + "eq.";
          this.bypass = toBool(getValue(c + "bypass"));
          IS_UI_24 && ((this.hp_slope = a.getNameValue("eq.hpf.slope")), (this.lp_slope = a.getNameValue("eq.lpf.slope")));
          a = !0;
          this.peaks = [];
          for (var d = 0; d < this.bands; d++) {
            var f = c + b[d],
              e = getValue(f + ".freq"),
              g = VtoFREQ(e);
            0 == d || 5 == d
              ? (0 == d && 0 != e && (a = !1), 5 == d && 1 != e && (a = !1), this.peaks.push([g, 1, 0]))
              : ((e = VtoQ(getValue(f + ".q"))), (f = VtoEQGAIN20(getValue(f + ".gain"))), 0 != f && (a = !1), this.peaks.push([g, e, f]));
          }
          b = this.peaks;
          if (a) return a;
          c = this.w;
          if (null == this.freqPlot || this.freqPlot.length != c) {
            this.freqPlot = Array(c);
            this.xToFreq = Array(c);
            this.xToAngular = Array(c);
            this.xCos1 = Array(c);
            this.xCos2 = Array(c);
            for (var h = 0; h < c; h++) {
              var d = 20 * Math.pow(1102.5, (1 * h) / c),
                g = (2 * d * Math.PI) / this.RATE,
                k = Math.cos(g),
                m = Math.cos(2 * g);
              this.xToFreq[h] = d;
              this.xToAngular[h] = g;
              this.xCos1[h] = k;
              this.xCos2[h] = m;
            }
          }
          for (d = 0; d < c; d++) this.freqPlot[d] = 0;
          for (d = 0; d < this.bands; d++) {
            g = 1;
            switch (d) {
              case 0:
                f = this.designHP(48e3, bound(b[d][0], 20, 1e3), Math.sqrt(2) / 2);
                g = this.hp_slope + 1;
                break;
              case 5:
                f = this.designLP(48e3, bound(b[d][0], 1e3, 22050), Math.sqrt(2) / 2);
                g = this.lp_slope + 1;
                break;
              default:
                f = this.designPeak(48e3, b[d][0], b[d][1], b[d][2]);
            }
            for (
              var h = f[3], p = f[0], e = f[1], q = f[2], r = f[4], k = f[5], f = p * p + e * e + q * q, e = 2 * e * (p + q), p = 2 * p * q, q = h * h + r * r + k * k, r = 2 * r * (h + k), n = 2 * h * k, h = 0;
              h < c;
              h++
            )
              (k = this.xCos1[h]), (m = this.xCos2[h]), (k = 4.3429448190325175 * Math.log((f + e * k + p * m) / (q + r * k + n * m))), (k *= g | 0), (this.freqPlot[h] += k);
          }
          return a;
        },
        showDB: function (a) {
          if (settings.eqStrip) {
            var b = this;
            this.forceDB = !0;
            regUpdate(this);
            clearTimeout(this.dbTimer);
            this.dbTimer = setTimeout(function () {
              b.forceDB = !1;
              regUpdate(b);
            }, a || 1500);
          }
        },
        paint: function () {
          this.getState();
          this.getState2();
          if (this.needStereo) {
            var a = getValue(this.parent.name + "stereoIndex");
            0 == a && ((ctx.fillStyle = this.parent.color), ctx.fillRect(0, 1, this.w + 5, 2), ctx.beginPath(), ctx.triangle2(0, 1, 18, 1, 0, 19), ctx.fill());
            1 == a && ((ctx.fillStyle = this.parent.color), ctx.fillRect(-5, 1, this.w + 4, 2), ctx.beginPath(), ctx.triangle2(this.w - 18, 1, this.w, 1, this.w, 19), ctx.fill());
          }
          var b = settings.eqStrip,
            c = this.parent,
            a = !0;
          if ((2 == settings.eqStrip || (settings.eqStrip && b && !this.forceDB)) && mode != E_MODE.AUX && mode != E_MODE.FX)
            switch (c.type) {
              case E_STRIP_TYPE.IN:
              case E_STRIP_TYPE.MEDIA:
              case E_STRIP_TYPE.LINEIN:
              case E_STRIP_TYPE.FX:
              case E_STRIP_TYPE.SUB:
                if (((a = this.eqCalc()), !a)) {
                  var b = this.w,
                    d = this.h,
                    c = (0.5 * (d - 8)) / 20,
                    d = (d / 2) | 0,
                    f = this.parent.getNameValue("eq.bypass");
                  ctx.save();
                  ctx.beginPath();
                  ctx.rect(0, 0, this.w, this.h);
                  ctx.clip();
                  ctx.strokeStyle = f ? "rgba(180,200,200,1)" : this.color;
                  2 != settings.eqStrip || f || (ctx.strokeStyle = "#ff4");
                  ctx.lineWidth = 2;
                  ctx.beginPath();
                  for (f = 0; f < b; f++)
                    if (
                      !(1 == (f & 1) && f < b - 1) ||
                      (this.freqPlot[f] > this.freqPlot[f - 1] && this.freqPlot[f] > this.freqPlot[f + 1]) ||
                      (this.freqPlot[f] < this.freqPlot[f - 1] && this.freqPlot[f] < this.freqPlot[f + 1])
                    ) {
                      var e = d - c * this.freqPlot[f];
                      0 == f && ctx.moveTo(f, e | 0);
                      ctx.lineTo(f, e | 0);
                    }
                  ctx.globalAlpha = 0.7;
                  2 == settings.eqStrip && (ctx.globalAlpha = 0.5);
                  ctx.stroke();
                  ctx.globalAlpha = 1;
                  ctx.restore();
                }
            }
          a || 2 != settings.eqStrip || (a = !0);
          ctx.font = font.led;
          ctx.textAlign = "center";
          2 == this.state
            ? ((ctx.fillStyle = this.color), ctx.fillText(this.msg, (this.w / 2) | 0, 27))
            : a && ((ctx.fillStyle = color.black), ctx.fillText(this.text, (this.w / 2 + 1) | 0, 28), (ctx.fillStyle = this.color), ctx.fillText(this.text, (this.w / 2) | 0, 27));
        },
      }),
      TopLED = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "LED";
          this.needClip = !0;
          this.text = "...";
          this.msg = "MSG";
          this.w = 160;
          this.h = 50;
          this.state = 0;
          this.color = color.ledText;
          this.msgColor = "#FF0";
          this.clickTimer = this.timer = null;
          this.clickTime = -1;
          this.usbTimer = null;
          this.usbMTK = this.usbFill = 0;
          IS_UI_24 && (this.regKey("var.mtk.soundcheck"), this.regKey("var.mtk.rec.currentState"), this.regKey("var.mtk.rec.busy"));
          this.regKey("var.recBusy");
          this.regKey("var.isRecording");
          var c = this;
          HAVE_MTK
            ? (this.usbTimer = setInterval(function () {
              var b = getValue("var.usbfill"),
                f = getValue("var.mtk.bufferfill");
              f > b ? ((b = f), (c.usbMTK = 1)) : (c.usbMTK = 0);
              b = bound(b, 0, 1);
              isNear(b, c.usbFill, 0.01) || ((c.usbFill = b), regUpdate(c));
            }, 500))
            : HAVE_REC &&
            (this.usbTimer = setInterval(function () {
              var b = getValue("var.usbfill"),
                b = bound(b, 0, 1);
              isNear(b, c.usbFill, 0.01) || ((c.usbFill = b), regUpdate(c));
            }, 500));
        },
        setText: function (a) {
          this.text = a;
          this.state = 0;
          regUpdate(this);
        },
        setMsg: function (a, b) {
          this.msg = a;
          this.state = 1;
          isDefined(b) && (this.msgColor = b);
          regUpdate(this);
          clearTimeoutC(this.timer);
          var c = this;
          this.timer = setTimeout(function () {
            c.state = 0;
            regUpdate(c);
          }, 3e3);
        },
        clearMsg: function () {
          clearTimeoutC(this.timer);
          this.state = 0;
          regUpdate(this);
        },
        onDown: function () {
          this.clickTime = Date.now();
          var a = this;
          clearTimeout(this.clickTimer);
          this.clickTimer = setTimeout(function () {
            a.onLong();
          }, HOLD_TIME);
        },
        onUp: function () {
          clearTimeout(this.clickTimer);
          Date.now() - this.clickTime > HOLD_TIME || ((this.menu = new SHOW_MENU(null)), (this.menu.color = this.color), regUpdate(this.menu));
        },
        onLong: function () {
          settingsWidget.setMode(2);
          setMode(E_MODE.SETTINGS);
        },
        paint: function () {
          979 < this.parent.w ? drawImage(res.topBarRight, -160, -15) : drawImage(res.topBarTile, -10, -15);
          drawImage(res.topBarLED, 0, 0);
          ctx.textAlign = "center";
          ctx.font = font.topLed;
          var a = (this.w / 2) | 0;
          ctx.lineWidth = 1;
          if (0.9 <= this.usbFill) {
            ctx.fillStyle = "#e11";
            ctx.strokeStyle = "#e11";
            ctx.font = "10pt open_sans_condensedbold";
            var b = lang.RECORDING_DROPOUT;
            this.usbMTK && (b = lang.MTK + " " + b);
            ctx.fillText(b, a, 20, this.w - 16);
            ctx.strokeRect(20.5, 23.5, 120, 10);
            ctx.fillRect(20, 23, (120 * this.usbFill) | 0, 10);
          } else if (0.6 <= this.usbFill)
            (ctx.fillStyle = "#e81"),
              (ctx.strokeStyle = "#e81"),
              (ctx.font = "10pt open_sans_condensedbold"),
              (b = lang.USB_REC_TOO_SLOW),
            this.usbMTK && (b = lang.MTK + " " + b),
              ctx.fillText(b, a, 20, this.w - 16),
              ctx.strokeRect(20.5, 23.5, 120, 10),
              ctx.fillRect(20, 23, (120 * this.usbFill) | 0, 10);
          else if (0.2 <= this.usbFill)
            (ctx.fillStyle = "#ee1"),
              (ctx.strokeStyle = "#ee1"),
              (ctx.font = "10pt open_sans_condensedbold"),
              (b = lang.USB_REC_BUFFER),
            this.usbMTK && (b = lang.MTK + " " + b),
              ctx.fillText(b, a, 20, this.w - 16),
              ctx.strokeRect(20.5, 23.5, 120, 10),
              ctx.fillRect(20, 23, (120 * this.usbFill) | 0, 10);
          else if (0 == this.state) {
            var b = 0.5 < getValue("var.recBusy"),
              c = 0.5 < getValue("var.isRecording"),
              d = IS_UI_24 && 0.5 < getValue("var.mtk.rec.busy");
            ctx.fillStyle = this.color;
            if ((c && b) || d) {
              ctx.font = "11pt open_sans_condensedbold";
              ctx.fillStyle = color.yellow;
              b = lang.RECORDER_IS_BUSY;
              if (this.usbMTK || d) b = lang.MTK + " " + b;
              ctx.fillText(b, a, 30, this.w - 16);
            } else (d = getValue("var.currentSnapshot")) && 0 == d.length && (d = lang.NO_SNAPSHOT), ctx.fillText(d, a, 30, this.w - 16);
          } else 1 == this.state && ((ctx.fillStyle = this.msgColor), ctx.fillText(this.msg, a, 30, this.w - 16));
          IS_UI_24 &&
          ((a = getValue("var.mtk.rec.currentState")),
            (d = getValue("var.mtk.soundcheck")),
            (b = 8),
            (c = 5),
          a &&
          ((ctx.fillStyle = color.red),
            ctx.fillRoundRect(b, c, 25, 14, 4),
            (ctx.textAlign = "left"),
            (ctx.font = "8pt open_sans_condensedbold"),
            (ctx.fillStyle = color.white),
            ctx.drawText("MTK", b + 3, c + 11, { shadow: [color.black, 0, 1, 1] }),
            (b += 27)),
          d &&
          ((ctx.fillStyle = "#4FCA3F"),
            ctx.fillRoundRect(b, c, 16, 14, 4),
            (ctx.textAlign = "left"),
            (ctx.font = "8pt open_sans_condensedbold"),
            (ctx.fillStyle = color.white),
            ctx.drawText("SC", b + 3, c + 11, { shadow: [color.black, 0, 1, 1] })));
          netConnectState ||
          ((b = this.w - 24),
            (c = 5),
            (ctx.fillStyle = "#E2464F"),
            ctx.fillRoundRect(b, c, 16, 14, 4),
            (ctx.textAlign = "center"),
            (ctx.font = "10pt open_sans_condensedbold"),
            (ctx.fillStyle = color.white),
            ctx.drawText("!", b + 8, c + 12, { shadow: [color.black, 0, 1, 1] }));
        },
      });
    function usbFillCheck() {}
    var TopWidget = Class.create(Widget, {
      initialize: function ($super, b) {
        $super(b);
        this.widgetName = "TopWidget";
        this.y = this.x = 0;
        this.needClip = !0;
        this.h = measures.topWidgetHeight;
        this.cachedStrip = null;
        this.cachedStripHeight = 0;
        this.initWidgets();
      },
      initWidgets: function () {
        var a = 31;
        this.bTOTAL = new ModeButton(this, E_MODE.MODALS);
        this.bTOTAL.setPos(a, 13);
        this.bTOTAL.setImages(res.bTVOff, res.bTVOn);
        this.bTOTAL.getState = function () {
          this.state = mode == this.mode ? 1 : null != this.mode2 && this.mode2 == mode ? 2 : 0;
          this.disabled = isPortrait;
        };
        this.bTOTAL.valueFunc = function () {
          modalsWidget.setMode(0);
        };
        a += this.bTOTAL.w + 4;
        this.bMix = new ModeButton(this, settings.bigD ? E_MODE.BIG : E_MODE.MIX);
        this.bMix.setPos(a, 13);
        this.bMix.setImages(res.bMixGainOff, res.bMixGainOn);
        this.bMix.setMode2(E_MODE.GAIN);
        this.bMix.img2 = res.bMixGain2;
        a += this.bMix.w + 26;
        this.bEDIT = new ModeButton(this, E_MODE.EDIT);
        this.bEDIT.setPos(a, 13);
        this.bEDIT.transMode = !0;
        this.bEDIT.setImages(res.bEDITOff, res.bEDIT_T);
        this.bEDIT.getState = function () {
          this.state = mode == this.mode ? 1 : null != this.mode2 && this.mode2 == mode ? 2 : 0;
          this.disabled = isPortrait;
        };
        this.bEDIT.valueFunc = function () {
          mode == E_MODE.AUX && editWidget.setMode(editWidget.E_MODE.aux);
          mode == E_MODE.FXSENDS && editWidget.setMode(editWidget.E_MODE.fx);
        };
        a += this.bEDIT.w + 26;
        this.bAUX = new ModeButton(this, E_MODE.AUX);
        this.bAUX.setPos(a, 13);
        this.bAUX.setImages(res.bAUXOff, res.bAUXOn);
        a += this.bAUX.w + 5;
        this.bFX = new ModeButton(this, E_MODE.FXSENDS);
        this.bFX.setPos(a, 13);
        this.bFX.setImages(res.bFXOff, res.bFXOn);
        a += this.bFX.w + 25;
        this.bPlayer = new CheckBox(this);
        this.bPlayer.setPos(a, 13);
        this.bPlayer.setImages(res.bPlayerOff, res.bPlayerOn);
        this.bPlayer.onHold = function () {
          setMode(E_MODE.UDP);
        };
        this.bPlayer.getState = function () {
          this.state = mode == E_MODE.PLAYER ? 1 : 0;
          this.disabled = isPortrait;
        };
        this.bPlayer.onDown = function () {
          this.stopClick = !1;
          if (!this.disabled) {
            this.clickOnUp || this.doClick();
            var a = this;
            clearTimeout(this.holdTimer);
            this.holdTimer = setTimeout(function () {
              a.onHold();
              a.stopClick = !0;
            }, 4e3);
          }
        };
        this.bPlayer.onToggleUp = function () {
          setMode(E_MODE.PLAYER);
        };
        this.bPlayer.onToggleDown = function () {
          setMode(E_MODE.MIX);
        };
        a += this.bPlayer.w + 3;
        this.bSet = new ModeButton(this, E_MODE.SETTINGS);
        this.bSet.setPos(a, 13);
        this.bSet.setImages(res.bSettingsOff, res.bSettingsOn);
        this.bSet.getState = function () {
          this.state = mode == this.mode ? 1 : null != this.mode2 && this.mode2 == mode ? 2 : 0;
          this.disabled = isPortrait;
        };
        this.led = new TopLED(this);
        this.bLogo = new CheckBox(this);
        this.bLogo.setImages(res.topBarLogo, res.topBarLogo2);
        this.bLogo.getState = function () {
          this.state = slideOutWidget.enabled ? 1 : 0;
        };
        DEPLOY ||
        (this.bLogo.onHold = function () {
          confOk.valueFunc = function () {
            location.reload();
          };
          showConfBox(lang.RELOAD_UI);
        });
        this.bLogo.onToggle = function () {
          clearInterval(ticker);
          toggleSlideOut();
        };
      },
      calcGeometry: function () {
        this.w = screenWidth;
        this.led.setPos(this.w - 270, 15);
        this.bLogo.setPos(this.w - this.bLogo.w - 25, 13);
        this.led.enabled = this.led.x > this.bSet.x + this.bSet.w + 4;
        this.bLogo.enabled = this.bLogo.x > this.bSet.x + this.bSet.w + 4;
      },
      paint: function () {
        this.cachedStripHeight != this.w && this.cachePaint();
        ctx.drawImage(this.cachedStrip, 0, 0, this.w, this.h);
      },
      drawSeparator: function (a, b) {
        b.fillStyle = "rgba(255,255,255,0.08)";
        b.fillRect(a - 1, 2, 3, measures.topWidgetHeight - 4);
        b.fillStyle = "rgba(0,0,0,0.41)";
        b.fillRect(a, 2, 1, measures.topWidgetHeight - 4);
      },
      cachePaint: function () {
        null != this.cachedStrip && delete this.cachedStrip;
        this.cachedStrip = document.createElement("canvas");
        var a = this.cachedStrip.getContext("2d");
        isRetina ? ((this.cachedStrip.width = 2 * this.w), (this.cachedStrip.height = 2 * this.h), a.scale(2, 2)) : ((this.cachedStrip.width = this.w), (this.cachedStrip.height = this.h));
        a.fillStyle = "#E3E3E4";
        a.fillRect(0, 0, this.w, this.h);
        fillHorPatternCtx(res.topBarTile, this.w, a);
        979 < this.w && drawImageCtx(res.topBarRight, this.w - res.topBarRight.w(), 0, a);
        drawImageCtx(res.topBarLeft, 0, 0, a);
        this.drawSeparator(191, a);
        this.drawSeparator(309, a);
        this.drawSeparator(524, a);
        this.cachedStripHeight = this.w;
      },
    });
    velocity = ticker = null;
    amplitude = position = 0;
    timestamp = null;
    step = frame = 0;
    function syncHPAUX() {
      HAVE_HP &&
      ((hideHPAUX = 0 == getValue("var.hpaux")),
        null == inView ? mixerWidget.showAll() : mixerWidget.arrangeStrips("syncHPAUX"),
        editWidget.pages[editWidget.E_MODE.aux].sync(),
      hideHPAUX && auxWidget.mode > curSetup.aux - 3 && auxWidget.setMode(0),
      mode == E_MODE.AUXSENDS && (auxWidget.onShow(), regUpdate(auxWidget)),
        regUpdate(settingsWidget));
    }
    var OFFS_ARR = [],
      BottomWidget2 = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "BottomWidget2";
          this.x = 0;
          this.h = measures.bottomWidgetHeight;
          this.needClip = this.needMoveEvt = !0;
          this.step = measures.mixerStripWidth;
          this.rw = 0;
          this.holdTimer = null;
          this.IDS = [0];
          this.maxOffset = 0;
          this.color = "white";
          this.ownColor = !1;
          this.COLORS = ["red"];
          this.move = this.editMode = !1;
          this.scrollX = this.touchID = -1;
          this.internia = 0;
          this.prevSelected = this.lastClickTime = -1;
          this.grd = null;
          this.strips_arr = allStrips;
        },
        addFrom: function (a, b) {
          for (var c = 0; c < a.length; c++) (a[c].enabled || isDefined(b)) && this.IDS.push(a[c].id);
        },
        addFrom2: function (a) {
          for (var b = 0; b < a.length; b++) this.IDS.push(a[b].id), this.COLORS.push(a[b].color);
        },
        addFromWithColors: function (a, b) {
          for (var c = 0; c < a.length; c++) if (a[c].enabled || isDefined(b)) this.IDS.push(a[c].id), this.COLORS.push(a[c].color);
        },
        upd: function () {
          if (this.enabled) {
            this.ownColor = !1;
            this.rw = 0;
            this.IDS = [];
            this.COLORS = [];
            this.editMode = !1;
            this.strips_arr = mixerWidget.strips;
            this.step = settings.customStripWidthEnabled ? settings.customStripWidth : measures.mixerStripWidth;
            mode != E_MODE.MIX && mode != E_MODE.GAIN && (this.step = measures.mixerStripWidth);
            switch (mode) {
              default:
                var a = !1;
                mode != E_MODE.EDIT && (this.ownColor = !0);
                if (0 <= activeViewGroup && 10 > activeViewGroup && inView) {
                  var b = [];
                  inView.forEach(function (a) {
                    b.push(allStrips[a]);
                  });
                  for (var c = 0; c < b.length; c++) {
                    var d = b[c];
                    d && (mode != E_MODE.EDIT || d.type != E_STRIP_TYPE.VCA) && d.enabled && (this.IDS.push(d.id), this.COLORS.push(d.color));
                  }
                  break;
                }
                settings.mediaFirst && (this.addFrom(mediaStrips), mediaStrips[0].enabled && this.COLORS.push(mediaStrips[0].color), mediaStrips[1].enabled && this.COLORS.push(mediaStrips[1].color), (a = !0));
                for (c = 0; c < this.strips_arr.length; c++)
                  (d = this.strips_arr[c]), (mode == E_MODE.EDIT && d.type == E_STRIP_TYPE.VCA) || !d.enabled || (a && d.type == E_STRIP_TYPE.MEDIA) || (this.IDS.push(d.id), this.COLORS.push(d.color));
                break;
              case E_MODE.GAIN:
                this.color = color.INPUT;
                this.strips_arr = gainMixer.strips;
                this.addFrom(this.strips_arr);
                break;
              case E_MODE.AUX:
                if (auxWidget.page2 && auxWidget.page2.enabled) (this.ownColor = !1), (this.color = color.MATRIX), this.addFrom(mtxSendStrips);
                else if (((this.ownColor = !0), (this.color = color.AUX), (this.strips_arr = auxSendStrips), 0 <= activeViewGroup && 10 > activeViewGroup && inView))
                  for (
                    b = [],
                      inView.forEach(function (a) {
                        (a = allStrips[a].AUXS[0]) && b.push(a);
                      }),
                      c = 0;
                    c < b.length;
                    c++
                  )
                    (d = b[c]), d.enabled && (this.IDS.push(d.id), this.COLORS.push(d.color));
                else this.addFromWithColors(this.strips_arr);
                break;
              case E_MODE.FXSENDS:
                this.color = color.blue;
                this.ownColor = !0;
                this.addFrom(inStrips, !0);
                this.addFrom(lineinStrips, !0);
                this.addFrom(mediaStrips, !0);
                this.addFrom(subStrips, !0);
                for (c = 0; c < inStrips.length; c++) this.COLORS.push(fxSendsWidget.page.color);
                for (c = 0; c < lineinStrips.length; c++) this.COLORS.push(color.LINEIN);
                for (c = 0; c < mediaStrips.length; c++) this.COLORS.push(color.media);
                for (c = 0; c < subStrips.length; c++) this.COLORS.push(color.sub);
            }
            this.calcContent();
            a = OFFS_ARR[mode] || 0;
            mode == E_MODE.EDIT ? this.gotoIDmid(selectedStrip.id) : mode == E_MODE.GAIN && selectedStrip.type == E_STRIP_TYPE.IN ? this.gotoIDmid(selectedStrip.id) : this.setOffset(a);
          }
        },
        onDown: function (a, b, c) {
          this.pressPoint = [a, b];
          this.prX = a - this.x + this.offsetX;
          this.dx = 0;
          this.touchID = c;
          this.move = !0;
          if (!(((this.prX / this.step) | 0) >= this.IDS.length)) {
            var d = this;
            clearTimeout(this.holdTimer);
            this.holdTimer = setTimeout(function () {
              d.onHold();
            }, HOLD_TIME);
            this.velStart();
          }
        },
        onMove: function (a, b, c) {
          this.touchID != c ||
          !this.move ||
          0 < scrollLock ||
          ((this.dx = a - this.pressPoint[0]), 3 < Math.abs(this.dx) && this.holdTimer && (clearTimeout(this.holdTimer), (this.holdTimer = null)), this.setOffset(this.offsetXold - this.dx * SCROLL_SCALE));
        },
        onUp: function (a) {
          if (this.touchID == a || -123 == a) {
            clearTimeoutC(this.holdTimer);
            this.holdTimer = null;
            if (8 > Math.abs(this.dx)) {
              var b = (this.prX / this.step) | 0;
              if (0 <= b && b < this.IDS.length) {
                var c = this.IDS[b];
                (mode == E_MODE.GAIN && 777 == this.strips_arr[c].type) || this.setSelected(this.IDS[b]);
              }
            }
            this.move = !1;
            this.touchID = -1;
            this.pressPoint = [-1, -1];
            this.offsetXold = this.offsetX;
            c = Date.now();
            (!IS_UI_24 || this.IDS[b] < vcaStrips[0].id) && c - this.lastClickTime < DBL_CLK_TIME && -123 != a && 8 > Math.abs(this.dx)
              ? (this.onDouble(), (this.lastClickTime = c - DBL_CLK_TIME))
              : ((this.lastClickTime = c), (this.prevSelected = selectedChannel), this.velRelease());
          }
        },
        onHold: function (a) {
          if (0 == mWidgets.length) {
            if (!a) this.onUp(-123);
            bottomWidget.move = !1;
            switch (mode) {
              case E_MODE.MIX:
              case E_MODE.BIG:
              case E_MODE.GAIN:
              case E_MODE.EDIT:
              case E_MODE.AUX:
              case E_MODE.FXSENDS:
              case E_MODE.VCA:
                break;
              default:
                return;
            }
            if (mode == E_MODE.EDIT) {
              a = (this.prX / this.step) | 0;
              if (a >= this.IDS.length) return;
              this.setSelected(this.IDS[a]);
            }
            if (-1 != selectedChannel) {
              a = new STRIPMENU(null, selectedStrip);
              var b = bottomWidget.IDS.indexOf(selectedStrip.id);
              a.x = bottomWidget.x + b * this.step - bottomWidget.offsetX - 20;
              a.x = bound(a.x, 0, screenWidth - a.w);
              a.y = screenHeight - a.h - measures.bottomWidgetHeight;
              mWidgets.push(widgets.pop());
              regUpdate(a);
            }
          }
        },
        onDouble: function () {
          if (this.prevSelected == selectedChannel) {
            var a = (this.prX / this.step) | 0,
              b = !0;
            0 > a && a >= this.IDS.length && (b = !1);
            a = this.IDS[a];
            mode == E_MODE.GAIN && 777 == this.strips_arr[a].type && (b = !1);
            b && (mode != E_MODE.EDIT ? (selectedStrip.type == E_STRIP_TYPE.FX ? editWidget.setMode(editWidget.E_MODE.fx) : editWidget.setMode(editWidget.E_MODE.dyn), setMode(E_MODE.EDIT)) : setMode(lastMode));
          }
        },
        setSelected: function (a) {
          setSelected(a);
        },
        velStart: function () {
          velocity = amplitude = 0;
          timestamp = Date.now();
          clearInterval(ticker);
          frame = bottomWidget.offsetX;
          ticker = setInterval(this.velTrack, 1e3 / fps);
        },
        velTrack: function () {
          var a, b;
          a = Date.now();
          b = a - timestamp;
          timestamp = a;
          a = bottomWidget.offsetX - frame;
          frame = bottomWidget.offsetX;
          b = (1e3 * a) / (1 + b);
          velocity = 0 == velocity ? b : 0.3 * b + 0.7 * velocity;
        },
        velRelease: function () {
          clearInterval(ticker);
          Date.now() - timestamp < 1e3 / fps && this.velTrack();
          5 < Math.abs(velocity) && this.mScroll(velocity);
        },
        mScroll: function (a) {
          if (!settings.kinetic) {
            var b = 1e3 / fps;
            position = this.offsetX;
            amplitude = 0.2 * a;
            step = 0;
            var c = this;
            clearInterval(ticker);
            ticker = setInterval(function () {
              var a = (amplitude / b) * 2;
              position += a;
              amplitude -= a;
              step += 1;
              0.5 > Math.abs(a) && clearInterval(ticker);
              step > 3 * fps && clearInterval(ticker);
              (0 >= position || position > c.maxOffset) && clearInterval(ticker);
              c.offsetX != (position | 0) && c.setOffset(position | 0);
            }, b);
          }
        },
        syncOffset: function (a) {
          a = a || !1;
          switch (mode) {
            case E_MODE.GAIN:
              gainMixer.setOffset(this.offsetX);
              break;
            case E_MODE.MIX:
            case E_MODE.BIG:
              mixerWidget.setOffset(this.offsetX);
              break;
            case E_MODE.AUX:
              auxWidget.setOffset(this.offsetX);
              break;
            case E_MODE.FXSENDS:
              fxSendsWidget.setOffset(this.offsetX);
          }
          a || (OFFS_ARR[mode] = this.offsetX);
        },
        startScroll: function (a, b) {
          scrollLock || (mixerTouches != (settings.oneFingerScroll ? 1 : 2) && b != mouseID) || this.move || ((this.touchID = b), (this.scrollX = a), (this.move = !0), this.velStart());
        },
        setScroll: function (a, b) {
          scrollLock ||
          (mixerTouches != (settings.oneFingerScroll ? 1 : 2) && b != mouseID) ||
          this.touchID != b ||
          ((this.offsetX = bound((this.offsetXold - (a - this.scrollX) * SCROLL_SCALE) | 0, 0, this.maxOffset)), this.syncOffset(), regUpdate(this), this.velTrack());
        },
        endScroll: function (a) {
          this.touchID == a && ((this.touchID = this.scrollX = -1), (this.move = !1), (this.offsetXold = this.offsetX), this.velRelease());
        },
        setOffset: function (a) {
          this.offsetX = bound(a | 0, 0, this.maxOffset);
          this.move || (this.offsetXold = this.offsetX);
          this.syncOffset();
          regUpdate(this);
        },
        setOffset2: function (a) {
          this.offsetXold = this.offsetX = bound(a | 0, 0, this.maxOffset);
          regUpdate(this);
        },
        gotoID: function (a) {
          clearInterval(ticker);
          0 > a || ((a = this.IDS.indexOf(a)), 0 <= a && this.setOffset(a * this.step));
        },
        gotoID2: function (a) {
          clearInterval(ticker);
          0 > a || ((a = this.IDS.indexOf(a)), 0 <= a && ((a *= this.step), (a - this.offsetX > this.w - this.step || 0 > a - this.offsetX) && this.setOffset(a + this.step - this.w)));
        },
        gotoID3: function (a) {
          clearInterval(ticker);
          0 > a || ((a = this.IDS.indexOf(a)), 0 <= a && ((a *= this.step), (0 > a - this.offsetX || a - this.offsetX > this.w) && this.setOffset(a)));
        },
        gotoIDmid: function (a) {
          clearInterval(ticker);
          0 > a || ((a = this.IDS.indexOf(a)), -1 != a && ((a = this.step * a - (this.w - this.step) / 2), this.setOffset(a | 0), mixerWidget.setOffset(a | 0)));
        },
        goLeft: function () {
          this.setOffset(this.offsetX - this.step * curSetup.bankSize);
          this.syncOffset();
        },
        goRight: function () {
          this.setOffset(this.offsetX + this.step * curSetup.bankSize);
          this.syncOffset();
        },
        gotoSelected: function () {
          this.gotoID(selectedStrip.id);
        },
        gotoSelected2: function () {
          this.gotoIDmid(selectedStrip.id);
        },
        gotoAUX: function () {
          this.gotoID(auxStrips[0].id);
        },
        gotoFX: function () {
          this.gotoID(fxStrips[0].id);
        },
        gotoSUB: function () {
          this.gotoID(subStrips[0].id);
        },
        gotoStart: function () {
          this.setOffset(0);
        },
        gotoEnd: function () {
          this.setOffset(this.maxOffset);
        },
        calcContent: function () {
          this.rw = this.IDS.length * this.step;
          this.maxOffset = this.rw - this.w;
          0 > this.maxOffset && (this.maxOffset = 0);
          this.offsetX > this.maxOffset && (this.setOffset2(this.maxOffset), this.syncOffset(!0));
        },
        calcGeometry: function () {
          this.enabled &&
          ((this.w = screenWidth),
          masterWidget.enabled && (this.w -= masterWidget.w),
          fxoutWidget.enabled && (this.w -= fxoutWidget.w),
          auxoutWidget.enabled && (this.w -= auxoutWidget.w),
            (this.x = editStripWidget && editStripWidget.enabled ? editStripWidget.w : 0),
            (this.w -= this.x),
          slideOutWidget.enabled && (this.w -= slideOutWidget.w),
            (this.y = screenHeight - this.h),
            this.calcContent());
        },
        paint: function () {
          ctx.fillStyle = color.botBG;
          ctx.fillRect(this.offsetX, 0, this.w, this.h);
          var a = this.IDS.length,
            b = this.step,
            c = measures.mixerStripWidth;
          if (a * b < this.w) for (var d = a * b; d < this.w; d += b) drawImage(res.blStripLabel, d, 0);
          b = (this.offsetX / this.step) | 0;
          d = ((this.offsetX + this.w) / this.step) | 0;
          ctx.font = font.botChLabel;
          ctx.textAlign = "center";
          for (var f = 0, e = 0; e < a; e++)
            if (!(e < b)) {
              if (e > d) break;
              var g = this.IDS[e],
                h = this.step * e;
              drawImage(res.stripLabel, h, 0);
              f++;
              var k = color.labelText;
              switch (mode) {
                case E_MODE.EDIT:
                  switch (this.strips_arr[g].type) {
                    case E_STRIP_TYPE.IN:
                      k = "#C97247";
                      break;
                    case E_STRIP_TYPE.AUX:
                      k = color.AUX;
                      break;
                    case E_STRIP_TYPE.FX:
                      k = color.blue;
                      break;
                    case E_STRIP_TYPE.SUB:
                      k = "#CC88A2";
                      break;
                    case E_STRIP_TYPE.MEDIA:
                      k = "#AB2152";
                      break;
                    case E_STRIP_TYPE.LINEIN:
                      k = color.LINEIN;
                  }
                  this.color = editWidget.buttons[editWidget.mode].color;
                  break;
                case E_MODE.GAIN:
                  this.color = color.red;
              }
              ctx.fillStyle = k;
              var m = !1;
              -1 != g && 1 == Math.abs(selectedChannel - g) && ((m = this.strips_arr[g].getNameValue("stereoIndex")), (m = (1 == m && selectedChannel == g - 1) || (0 == m && selectedChannel == g + 1)));
              var p = selectedChannel == g;
              mode == E_MODE.GAIN && (777 == this.strips_arr[g].type && ((p = !1), (k = "#888")), (m = !1));
              if (p || m)
                (ctx.fillStyle = this.ownColor ? this.COLORS[e] : this.color),
                m && (ctx.fillStyle = hexToRGBA(ctx.fillStyle, 0.5)),
                  ctx.fillRect(h + 2, 0, c - 4, this.h - 2),
                  ctx.translate(0, this.h - 7),
                  (ctx.fillStyle = color.grad4),
                m || ctx.fillRect(h + 3, 0, c - 6, 5),
                  ctx.translate(0, -(this.h - 7)),
                  (ctx.fillStyle = color.labelTextSel);
              var q = this.strips_arr[g];
              -1 == g && (q = masterWidget);
              if (q) {
                var r = -1 == g ? 0 : q.getNameValue("color") || 0;
                if (r) {
                  if (p || m) (ctx.fillStyle = 7 == r ? "rgba(255,255,255,0.1)" : "rgba(0,0,0,0.1)"), ctx.fillRect(h + 2, 27, c - 4, 1);
                  ctx.fillStyle = color.ARR[r];
                  ctx.fillRect(h + 2, 28, c - 4, 3);
                }
                h = (h + c / 2) | 0;
                r = 24;
                if (IS_UI_24 && settings.cpa) {
                  var n = q.getNameValue("iosyscmd");
                  n ? ((ctx.font = "12pt open_sans_condensedbold"), (ctx.fillStyle = "#1ef"), ctx.drawText(n, h, r + 6, { shadow: [color.black, 0, 2, 1], max: this.step - 6 }), (r -= 9)) : (ctx.font = font.botChLabel);
                }
                g = -1 == g ? lang.MASTER : q.getName();
                ctx.fillStyle = color.black;
                ctx.fillText(g, h + 2, r + 1, this.step - 6);
                ctx.fillStyle = p || m ? color.labelTextSel : k;
                ctx.fillText(g, h, r, this.step - 6);
              }
            }
          0 < this.maxOffset &&
          ((ctx.fillStyle = "#99b"), (a = this.w - 2), ctx.fillRect(this.offsetX + 2 + (((this.offsetX / (this.maxOffset + this.w)) * a) | 0), this.h - 3, ((this.w / (this.maxOffset + this.w)) * a) | 0, 2));
        },
      }),
      E_KEYTONAME = {};
    function createKeyToNameArr() {
      E_KEYTONAME = {};
      for (var a = 0, b = allStrips.length; a < b; a++) E_KEYTONAME[chopLastDot(allStrips[a].name)] = allStrips[a].text;
    }
    function keyToName2(a) {
      return E_KEYTONAME[a] || "";
    }
    function checkOrderedVG(a) {
      var b;
      if ((b = isDefined(a) ? getVG(a) : inView)) {
        for (var c = 0; c < b.length; c++) {
          var d = b[c],
            f = allStrips[d];
          if (f) {
            var e = f.getNameValue("stereoIndex");
            null == e && (e = -1);
            f = 1 == e ? -1 : e + 1;
            -1 != e && b.contains(d + f) && ((d = b.indexOf(d + f)), (f = c + f), d != f && b.move(d, f));
          }
        }
        isDefined(a) && settingsStorage.put("viewGroups", settings.viewGroups);
      }
    }
    var MainMixer = Class.create(Widget, {
      initialize: function ($super, b) {
        $super(b);
        this.widgetName = "MainMixer";
        this.y = measures.topWidgetHeight;
        this.needMoveEvt = this.needClip = !0;
        this.mode = 0;
        this.strips = [];
        this.muteBackup = [];
        this.moveX = this.moveTID = -1;
        this.vis = this.realWidth = 0;
        this.stw = settings.customStripWidthEnabled ? settings.customStripWidth : measures.mixerStripWidth;
        this.createStrips();
      },
      onDown: function (a, b, c) {
        clearInterval(ticker);
        1 < mouseTargets.length || ((tHash[c] && 1 != tHash[c].length) || mixerTouches++, bottomWidget.startScroll(a, c));
      },
      onMove: function (a, b, c) {
        1 < mouseTargets.length || bottomWidget.setScroll(a, c);
      },
      onUp: function (a) {
        1 < mouseTargets.length || ((tHash[a] && 1 != tHash[a].length) || mixerTouches--, bottomWidget.endScroll(a));
      },
      addButtons: function (a) {
        a.mute = new CheckBox(a);
        a.mute.setPos(4, 89);
        a.mute.setImages(res.bMuteOff, null);
        a.mute.setSize(50, 30);
        a.solo = new CheckBox(a);
        a.solo.setPos(57, 87);
        a.solo.setImages(res.bSoloOff, res.bSoloOn);
        a.solo.setSize(50, 30);
        a.phantom = new CheckBox(a);
        a.phantom.enabled = !1;
        a.phantom.setPos(4, 89);
        a.phantom.setImages(res.bPhantomOff, null);
        a.phantom.setSize(102, 30);
      },
      setMode: function (a) {},
      createStrips: function () {
        for (var a = curSetup.input, b = curSetup.fx, c = curSetup.linein, d = curSetup.sub, f = curSetup.aux, e = 0, g = 0; g < a; g++) {
          var h = new Strip(this, e, E_STRIP_TYPE.IN, g);
          0 == g && (h.firstInGroup = !0);
          g == a - 1 && (h.lastInGroup2 = h.lastInGroup = !0);
          h.text = "CH " + (g + 1);
          this.strips.push(h);
          inStrips.push(h);
          allStrips.push(h);
          e++;
        }
        for (g = 0; g < c; g++)
          (h = new Strip(this, e, E_STRIP_TYPE.LINEIN, g)),
          0 == g && (h.firstInGroup = !0),
          g == c - 1 && (h.lastInGroup2 = h.lastInGroup = !0),
            (h.text = "LINE IN " + (0 == g ? "L" : "R")),
          1 < g && (h.text += " " + Math.floor(g / 2 + 1)),
            (h.label = "LINE IN " + (0 == g ? "L" : "R")),
            allStrips.push(h),
            lineinStrips.push(h),
            this.strips.push(h),
            e++;
        h = new Strip(this, e, E_STRIP_TYPE.MEDIA, 0);
        h.firstInGroup = !0;
        h.lastInGroup = !1;
        h.text = "PLAYER L";
        h.label = "MEDIA L";
        allStrips.push(h);
        mediaStrips.push(h);
        this.strips.push(h);
        e++;
        h = new Strip(this, e, E_STRIP_TYPE.MEDIA, 1);
        h.firstInGroup = !1;
        h.lastInGroup2 = h.lastInGroup = !0;
        h.text = "PLAYER R";
        h.label = "MEDIA R";
        allStrips.push(h);
        mediaStrips.push(h);
        this.strips.push(h);
        e++;
        for (g = 0; g < b; g++)
          (h = new Strip(this, e, E_STRIP_TYPE.FX, g)),
          0 == g && (h.firstInGroup = !0),
          g == b - 1 && (h.lastInGroup2 = h.lastInGroup = !0),
            (h.text = "FXR " + (g + 1)),
            this.strips.push(h),
            fxStrips.push(h),
            allStrips.push(h),
            e++;
        for (g = 0; g < d; g++)
          (h = new Strip(this, e, E_STRIP_TYPE.SUB, g)),
          0 == g && (h.firstInGroup = !0),
          g == d - 1 && (h.lastInGroup2 = h.lastInGroup = !0),
            (h.text = "SUB " + (g + 1)),
            (h.SGIDX = g),
            this.strips.push(h),
            subStrips.push(h),
            allStrips.push(h),
            e++;
        for (g = 0; g < f; g++)
          (h = new Strip(this, e, E_STRIP_TYPE.AUX, g)),
          0 == g && (h.firstInGroup = !0),
          g == f - 1 && (h.lastInGroup2 = h.lastInGroup = !0),
            (h.text = "AUX " + (g + 1)),
            this.strips.push(h),
            auxStrips.push(h),
            allStrips.push(h),
            e++;
        allStripsNoVca = copyObject(allStrips);
        if (IS_UI_24)
          for (g = 0; 6 > g; g++)
            (h = new Strip(this, e, E_STRIP_TYPE.VCA, g)),
            0 == g && (h.firstInGroup = !0),
            g == f - 1 && (h.lastInGroup2 = h.lastInGroup = !0),
              (h.text = "VCA " + (g + 1)),
              this.strips.push(h),
              vcaStrips.push(h),
              allStrips.push(h),
              e++;
        createKeyToNameArr();
        this.arrangeStrips("createStrips");
      },
      arrangeStrips: function (a) {
        if (mode != E_MODE.PLAYER) {
          var b = 0;
          a = this.strips;
          var c = 0 <= activeViewGroup && 10 > activeViewGroup && inView;
          c && checkOrderedVG();
          settings.mediaFirst && !c && (mediaStrips[0].enabled && (b += 1), mediaStrips[1].enabled && (b += 1));
          for (var d = auxStrips.length - 2; d < auxStrips.length; d++) inView && inView.contains(auxStrips[d].id) ? (auxStrips[d].enabled = !hideHPAUX) : hideHPAUX && (auxStrips[d].enabled = !1);
          for (var f = (this.stw = settings.customStripWidthEnabled ? settings.customStripWidth : measures.mixerStripWidth), e = 0, d = 0; d < a.length; d++) {
            var g = a[d];
            if (g.enabled) {
              e++;
              if (c) (b = inView.indexOf(g.id)), (g.firstInGroup = !0), (g.lastInGroup = !0);
              else if (settings.mediaFirst && g.type == E_STRIP_TYPE.MEDIA) {
                g.x = g.subId * f;
                continue;
              }
              g.x = b * f;
              b++;
            }
          }
          var b = -1,
            h = null;
          if (!c)
            for (d = 0; d < a.length; d++)
              (g = a[d]),
                g.enabled
                  ? (b != g.type ? ((g.firstInGroup = !0), (g.lastInGroup = !1), null != h && (h.lastInGroup = !0), (b = g.type)) : ((g.firstInGroup = !1), (g.lastInGroup = !1)), (h = g))
                  : ((g.firstInGroup = !1), (g.lastInGroup = !1));
          h && (h.lastInGroup = !0);
          this.realWidth = e * f;
          this.vis = e;
          onVGupdate();
        }
      },
      gotoEnd: function () {
        var a = this.vis * this.stw - this.w;
        0 > a && (a = 0);
        this.setOffset(a);
        this.syncOffset();
      },
      gotoStart: function () {
        this.setOffset(0);
        this.syncOffset();
      },
      gotoIdx: function (a) {
        a > this.strips.length || (this.setOffset(this.strips[a].x), this.syncOffset());
      },
      gotoBank: function (a) {
        var b = curSetup.bankSize * a;
        0 > b || b > this.strips.length - 1 || ((bankIdx = a), this.setOffset(this.strips[b].x), this.syncOffset());
      },
      goLeft: function () {
        this.setOffset(this.offsetX - this.w);
        this.syncOffset();
      },
      goRight: function () {
        this.setOffset(this.offsetX + this.w);
        this.syncOffset();
      },
      gotoFX: function () {
        clearInterval(ticker);
        this.setOffset(fxStrips[fxStrips.length - 1].x + this.stw - this.w, !0);
        this.syncOffset();
      },
      gotoAUX: function () {
        clearInterval(ticker);
        this.setOffset((auxStrips[auxStrips.length - 1].id + 1) * this.stw - bottomWidget.w, !0);
        this.syncOffset();
      },
      gotoSUB: function () {
        clearInterval(ticker);
        this.setOffset(subStrips[subStrips.length - 1].x + this.stw - this.w, !0);
        this.syncOffset();
      },
      syncOffset: function () {
        mode != E_MODE.MODALS && (bottomWidget.setOffset2(this.offsetX), bottomWidget.offsetX != this.offsetX && this.setOffset(bottomWidget.offsetX));
      },
      onShow: function () {
        this.syncOffset();
      },
      muteFX: function () {
        if (isBlocked()) showPopupMsg(lang.LOCKED, 1e3);
        else {
          for (var a = getValue("mgmask") | (1 << MUTEFX_BIT_IDX), b = 0; b < fxStrips.length; b++) {
            var c = fxStrips[b];
            c.setNameValue("forceunmute", 0);
            regUpdate(c);
          }
          setValue("mgmask", a);
          topWidget.led.setMsg(lang.MUTE_FX);
          showPopupMsg(lang.MUTE_FX, 1e3);
          mode == E_MODE.MODALS && regUpdate(tvWidget);
          regUpdate(editWidget);
          regUpdate(fxoutWidget);
          regUpdate(auxWidget);
          checkMutes();
        }
      },
      unMuteFX: function () {
        if (isBlocked()) showPopupMsg(lang.LOCKED, 1e3);
        else {
          for (var a = getValue("mgmask"), b = a & ~(1 << MUTEFX_BIT_IDX), c = checkBit(a, MUTEALL_BIT_IDX), d = 0; d < fxStrips.length; d++) {
            var f = fxStrips[d],
              e = f.getNameValue("mgmask");
            1 != f.getNameValue("forceunmute") || 0 != (e & a) || c || (f.setNameValue("forceunmute", 0), f.setNameValue("mute", 0));
            regUpdate(f);
          }
          setValue("mgmask", b);
          topWidget.led.setMsg(lang.MUTE_FX_CANCEL);
          showPopupMsg(lang.MUTE_FX_CANCEL, 1e3);
          mode == E_MODE.MODALS && regUpdate(tvWidget);
          regUpdate(editWidget);
          regUpdate(fxoutWidget);
          regUpdate(auxWidget);
          regUpdate(slideOutWidget);
          checkMutes();
        }
      },
      clearSolos: function () {
        if (isBlocked()) showPopupMsg(lang.LOCKED, 1e3);
        else {
          for (var a = 0; a < allStrips.length; a++) allStrips[a].setNameValue("solo", 0);
          checkSolos();
          topWidget.led.setMsg(lang.CLEAR_ALL_SOLOS);
          showPopupMsg(lang.CLEAR_ALL_SOLOS, 1e3);
        }
      },
      clearMutes: function () {
        if (isBlocked()) showPopupMsg(lang.LOCKED, 1e3);
        else {
          isMuteAll() && this.cancelMuteAll();
          isMuteFX() && this.unMuteFX();
          for (var a = getValue("mgmask"), b = 0; 6 > b; b++) a & (1 << b) && muteGroupOFF(b);
          for (b = 0; b < allStrips.length; b++) allStrips[b].setNameValue("mute", 0), allStrips[b].setNameValue("forceunmute", 0);
          checkMutes();
          topWidget.led.setMsg(lang.CLEAR_ALL_MUTES);
          showPopupMsg(lang.CLEAR_ALL_MUTES, 1e3);
        }
      },
      muteAll: function () {
        if (isBlocked()) showPopupMsg(lang.LOCKED, 1e3);
        else {
          for (var a = getValue("mgmask") | (1 << MUTEALL_BIT_IDX), b = 0; b < allStrips.length; b++) allStrips[b].setNameValue("forceunmute", 0);
          setValue("mgmask", a);
          topWidget.led.setMsg(lang.MUTE_ALL);
          showPopupMsg(lang.MUTE_ALL, 1e3);
          mode == E_MODE.MODALS && regUpdate(modalsWidget.pages[0]);
          regUpdate(this);
          regUpdate(auxoutWidget);
          regUpdate(fxoutWidget);
          regUpdate(editWidget);
          regUpdate(auxWidget);
          regUpdate(fxSendsWidget);
          regUpdate(playerStrips);
          regUpdate(editStripWidget);
          checkMutes();
        }
      },
      cancelMuteAll: function () {
        if (isBlocked()) showPopupMsg(lang.LOCKED, 1e3);
        else {
          for (var a = getValue("mgmask"), b = a & ~(1 << MUTEALL_BIT_IDX), c = checkBit(a, MUTEFX_BIT_IDX), d = 0; d < allStrips.length; d++) {
            var f = allStrips[d],
              e = f.getNameValue("mgmask");
            1 != f.getNameValue("forceunmute") || 0 != (e & a) || (c && f.type == E_STRIP_TYPE.FX) || (f.setNameValue("forceunmute", 0), f.setNameValue("mute", 0));
          }
          setValue("mgmask", b);
          topWidget.led.setMsg(lang.MUTE_ALL_CANCEL);
          showPopupMsg(lang.MUTE_ALL_CANCEL, 1e3);
          mode == E_MODE.MODALS && regUpdate(modalsWidget.pages[0]);
          regUpdate(this);
          regUpdate(auxoutWidget);
          regUpdate(fxoutWidget);
          regUpdate(editWidget);
          regUpdate(auxWidget);
          regUpdate(fxSendsWidget);
          regUpdate(playerStrips);
          regUpdate(editStripWidget);
          checkMutes();
        }
      },
      hideAll: function () {
        inView = null;
        -1 != activeViewGroup && ((activeViewGroup = -1), regUpdate(slideOutWidget));
        -1 != activeSubGroup && ((activeSubGroup = -1), regUpdate(slideOutWidget));
        for (var a = 0; a < this.strips.length; a++) this.strips[a].enabled = !1;
      },
      showAll: function () {
        mode == E_MODE.EDIT && editStripWidget.unStrip();
        for (var a = 0; a < this.strips.length; a++) this.strips[a].enabled = !0;
        inView = null;
        -1 != activeViewGroup && ((activeViewGroup = -1), regUpdate(slideOutWidget));
        -1 != activeSubGroup && ((activeSubGroup = -1), regUpdate(slideOutWidget));
        gainMixer.showAll();
        this.arrangeStrips("showAll");
        bottomWidget.upd();
        slideOutWidget.clearViewButtons();
        settingsStorage.set("currentViewGroup", -1);
        mode == E_MODE.EDIT && editStripWidget.setStrip();
        mode == E_MODE.GAIN && mixerWidget.setMode(E_MODE.GAIN);
        regUpdate(bottomWidget);
        regUpdate(this);
      },
      showSG: function (a) {
        if (0 > a || a >= curSetup.sub) this.showAll(), (activeSubGroup = -1);
        else {
          for (var b = 0, c = 0; c < this.strips.length; c++) this.strips[c].getNameValue("subgroup") == a && b++;
          if (0 == b) this.showAll(), showPopupMsg(lang.NO_ASSIGNED_SUBGROUP.format(a + 1), 1e3);
          else {
            mode == E_MODE.EDIT && editStripWidget.unStrip();
            this.hideAll();
            inView = [];
            for (c = 0; c < this.strips.length; c++) this.strips[c].getNameValue("subgroup") == a && ((this.strips[c].enabled = !0), inView.push(this.strips[c].id));
            inView.push(subStrips[a].id);
            subStrips[a].enabled = !0;
            activeSubGroup = a;
            activeViewGroup = 200 + a;
            settingsStorage.set("currentViewGroup", activeViewGroup);
            this.arrangeStrips("showSG");
            gainMixer.syncVG();
            bottomWidget.upd();
            bottomWidget.gotoStart();
            mode == E_MODE.EDIT && editStripWidget.setStrip();
            regUpdate(mixerWidget);
            regUpdate(bottomWidget);
            regUpdate(slideOutWidget);
          }
        }
      },
      showVCA: function (a) {
        for (var b = 0, c = 0; c < this.strips.length; c++) this.strips[c].getNameValue("vca") == a && b++;
        if (0 == b) showPopupMsg(lang.NO_ASSIGNED_CHANNELS, 1e3);
        else if ((104 == activeViewGroup ? ((lastActiveViewPosition = mixerWidget.offsetX), (lastActiveViewGroup = 104)) : saveLastActiveVG(), 0 > a || 6 <= a || !IS_UI_24)) this.showAll();
        else {
          mode == E_MODE.EDIT && editStripWidget.unStrip();
          this.hideAll();
          inView = [];
          for (c = 0; c < this.strips.length; c++) (b = this.strips[c]), b.haveVCA && b.getNameValue("vca") == a && (b.show(), inView.push(b.id));
          inView.push(vcaStrips[a].id);
          vcaStrips[a].enabled = !0;
          activeSubGroup = a;
          activeViewGroup = 300 + a;
          settingsStorage.set("currentViewGroup", activeViewGroup);
          this.arrangeStrips("showVCA");
          gainMixer.syncVG();
          bottomWidget.upd();
          bottomWidget.gotoEnd();
          mode == E_MODE.EDIT && editStripWidget.setStrip();
          regUpdate(mixerWidget);
          regUpdate(bottomWidget);
          regUpdate(slideOutWidget);
        }
      },
      showViewGroup: function (a) {
        if (0 > a || 5 < a) this.showAll(), (activeViewGroup = -1), settingsStorage.set("currentViewGroup", -1), regUpdate(slideOutWidget);
        else {
          var b = getVG(a);
          b.length
            ? ((activeSubGroup = -1), (activeViewGroup = a), settingsStorage.set("currentViewGroup", a), this.applyVG(b, a), (activeViewGroup = a), slideOutWidget.clearGotoButtons(), regUpdate(slideOutWidget))
            : (this.showAll(), (activeViewGroup = -1), settingsStorage.set("currentViewGroup", -1), regUpdate(slideOutWidget), showPopupMsg(lang.NO_ASSIGNED_VIEWGROUP.format(a + 1), 1e3));
        }
      },
      applyVG: function (a, b) {
        if (0 == a.length) this.showAll(), (activeSubGroup = activeViewGroup = -1), settingsStorage.set("currentViewGroup", -1), regUpdate(slideOutWidget);
        else {
          this.hideAll();
          inView = a;
          for (var c = 0; c < a.length; c++) {
            var d = this.strips[a[c]];
            d && (d.enabled = !0);
          }
          isDefined(b) && (activeViewGroup = b);
          this.arrangeStrips("applyVG");
          gainMixer.syncVG();
          bottomWidget.upd();
          bottomWidget.gotoStart();
          regUpdate(mixerWidget);
        }
      },
      showInputsGroup: function () {
        saveLastActiveVG();
        for (var a = [], b = 0; b < inStrips.length; b++) a.push(inStrips[b].id);
        mixerWidget.applyVG(a);
        activeViewGroup = E_VG.INPUTS;
        settingsStorage.set("currentViewGroup", activeViewGroup);
      },
      showFxGroup: function () {
        saveLastActiveVG();
        for (var a = [], b = 0; b < fxStrips.length; b++) a.push(fxStrips[b].id);
        mixerWidget.applyVG(a);
        activeViewGroup = E_VG.FXS;
        settingsStorage.set("currentViewGroup", activeViewGroup);
      },
      showSubGroup: function () {
        saveLastActiveVG();
        for (var a = [], b = 0; b < subStrips.length; b++) a.push(subStrips[b].id);
        mixerWidget.applyVG(a);
        activeViewGroup = E_VG.SUBS;
        settingsStorage.set("currentViewGroup", activeViewGroup);
      },
      showAuxGroup: function () {
        saveLastActiveVG();
        for (var a = [], b = 0; b < auxStrips.length; b++) a.push(auxStrips[b].id);
        mixerWidget.applyVG(a);
        activeViewGroup = E_VG.AUXS;
        settingsStorage.set("currentViewGroup", activeViewGroup);
      },
      showVCAGroup: function () {
        saveLastActiveVG();
        for (var a = [], b = 0; b < vcaStrips.length; b++) a.push(vcaStrips[b].id);
        mixerWidget.applyVG(a);
        activeViewGroup = E_VG.VCAS;
        settingsStorage.set("currentViewGroup", activeViewGroup);
      },
      showPresets: function () {
        this.menu = new PRESET_MENU2(null, "ch", this);
        this.menu.color = selectedStrip.color;
        regUpdate(this.menu);
      },
      savePreset2: function () {
        for (
          var a = ".eq.easy .eq.bass .eq.mid .eq.treble .eq.hpf.freq .eq.b1.freq .eq.b1.q .eq.b1.gain .eq.b2.freq .eq.b2.q .eq.b2.gain .eq.b3.freq .eq.b3.q .eq.b3.gain .eq.b4.freq .eq.b4.q .eq.b4.gain .dyn.threshold .dyn.gain .dyn.ratio .dyn.softknee .dyn.attack .dyn.outgain .dyn.release .gate.enabled .gate.bypass .gate.thresh .gate.attack .gate.hold .gate.release .gate.depth".split(
              " "
            ),
            b = {},
            c = selectedStrip.name.split("."),
            c = c[0] + "." + c[1],
            d = 0;
          d < a.length;
          d++
        ) {
          var f = getValue(c + a[d]);
          isDefined(f) && (b[a[d]] = getValue(c + a[d]));
        }
        return b;
      },
      savePreset: function () {
        for (
          var a = selectedStrip.name,
            b = [],
            b = b.concat(getKeys(a + "eq.")),
            b = b.concat(getKeys(a + "dyn.")),
            b = b.concat(getKeys(a + "gate.")),
            b = b.filter(function (a) {
              return !a.contains(".enabled");
            }),
            b = b.filter(function (a) {
              return !a.contains(".bypass");
            }),
            b = b.filter(function (a) {
              return !a.contains(".prmod");
            }),
            c = {},
            d = 0;
          d < b.length;
          d++
        ) {
          var f = b[d],
            e = b[d].replace(a, ".");
          c[e] = getValue(f);
        }
        return c;
      },
      loadPreset: function (a, b) {
        var c = selectedStrip.name.slice(0, -1);
        applyPreset(c, a);
        regUpdate(editWidget);
        return !0;
      },
      setOffset: function (a, b) {
        if ((this.offsetX | 0) != (a | 0)) {
          var c = this.vis * this.stw - this.w;
          0 > c && (c = 0);
          this.offsetXold = this.offsetX = bound(a | 0, 0, c);
          regUpdate(this);
        }
      },
      calcGeometry: function () {
        this.w = screenWidth;
        masterWidget.enabled && (this.w -= masterWidget.w);
        slideOutWidget.enabled && (this.w -= slideOutWidget.w);
        this.y = measures.topWidgetHeight;
        mode == E_MODE.BIG && (this.y = measures.topWidgetHeight + BM_TOP_H + BM_BOT_H);
        this.h = screenHeight - this.y - bottomWidget.h;
      },
      paint: function () {
        ctx.fillStyle = color.bg;
        ctx.fillRect(this.offsetX, 0, this.w, this.h);
        if (this.vis * this.stw < this.w)
          for (var a = this.vis * this.stw; a < this.w; a += this.stw) fillVertPattern(res.blStripTile, this.h, a), drawImage(res.blStripBottom, a, this.h - res.blStripBottom.h()), drawImage(res.blStripTop, a, 0);
      },
    });
    function getVGName(a) {
      a = bound(a | 0, 0, 5);
      return settings.globalVG ? getValue("vg." + a + ".name") || "" : settings.viewGroupsNames[a] || "";
    }
    function setVGName(a, b) {
      b = b || "";
      a = bound(a | 0, 0, 5);
      settings.globalVG ? (isBlocked("shows") ? showPopupMsg(lang.LOCKED, 1e3) : setValue("vg." + a + ".name", b)) : ((settings.viewGroupsNames[a] = b), settingsStorage.put("viewGroupsNames", settings.viewGroupsNames));
    }
    function getVG(a) {
      a = bound(a | 0, 0, 5);
      a = settings.globalVG ? JSON.parse(getValue("vg." + a)) || [] : settings.viewGroups[a] || [];
      return checkVG(a);
    }
    function saveVG(a, b) {
      b = b || [];
      a = bound(a | 0, 0, 5);
      settings.globalVG ? (isBlocked("shows") ? showPopupMsg(lang.LOCKED, 1e3) : setValue("vg." + a, JSON.stringify(b))) : ((settings.viewGroups[a] = b), settingsStorage.set("viewGroups", settings.viewGroups));
    }
    function checkVG(a) {
      a = a || [];
      for (var b = [], c = 0; c < a.length; c++) {
        var d = allStrips[a[c]];
        d && ((d.type == E_STRIP_TYPE.AUX && hideHPAUX && d.subId > auxStrips.length - 3) || b.push(a[c]));
      }
      return b;
    }
    function onVGupdate() {
      auxWidget && mode == E_MODE.AUX && (auxWidget.page.arrangeStrips(), regUpdate(auxWidget), bottomWidget.upd(), regUpdate(bottomWidget));
    }
    var GainMixer = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "GainMixer";
          this.y = measures.topWidgetHeight;
          this.needClip = !0;
          this.color = color.red;
          this.strips = [];
          this.vis = 0;
          this.move = !1;
          this.scrollX = this.touchID = -1;
          this.internia = 0;
          this.prevSelected = this.lastClickTime = -1;
          this.createStrips();
        },
        onShow: function () {
          for (var a = 0; a < this.strips.length; a++) this.strips[a].onShow();
        },
        arrangeStrips: function () {
          for (var a = 0, b = 0; b < this.strips.length; b++) this.strips[b].enabled && (this.strips[b].x = a++ * measures.mixerStripWidth);
          this.vis = a;
          this.syncLine();
        },
        createStrips: function () {
          for (var a = curSetup.input, b = curSetup.linein, c = 0, d = 0; d < a; d++) {
            var f = inStrips[d],
              e = new GainStrip(this, f.id);
            0 == d && (e.firstInGroup = !0);
            d == a - 1 && (e.lastInGroup = !0);
            e.id = inStrips[d].id;
            e.color = this.color;
            e.text = inStrips[d].text;
            e.st = f;
            this.strips.push(e);
            gainStrips.push(e);
            c++;
          }
          if (HAVE_ROUTING)
            for (d = 0; d < b; d++)
              (f = lineinStrips[d]),
                (e = new GainStrip(this, f.id)),
              0 == d && (e.firstInGroup = !0),
              d == a - 1 && (e.lastInGroup = !0),
                (e.id = f.id),
                (e.color = this.color),
                (e.text = f.text),
                (e.st = f),
                (e.name = f.name),
                this.strips.push(e),
                gainStrips.push(e),
                (lineinStrips[d].gainst = e),
                c++;
          if (HAVE_ROUTING) for (d = 0; 20 > d; d++) (f = inStrips[d]), (e = new GainStrip2(this, c, d)), (e.color = this.color), (e.st = f), this.strips.push(e), gainStrips2.push(e), c++;
          this.arrangeStrips();
        },
        showAll: function () {
          this.strips.each(function (a) {
            a.show();
          });
          this.arrangeStrips();
          regUpdate(this);
        },
        setVG: function (a) {
          a &&
          a.length &&
          (gainStrips.each(function (b) {
            a.contains(b.id) ? b.show() : b.hide();
          }),
            this.arrangeStrips(),
            regUpdate(this));
        },
        syncLine: function () {
          for (var a = -1, b = null, c = this.strips, d = 0; d < c.length; d++) {
            var f = c[d];
            f.enabled
              ? (a != f.type ? ((f.firstInGroup = !0), (f.lastInGroup = !1), null != b && (b.lastInGroup = !0), (a = f.type)) : ((f.firstInGroup = !1), (f.lastInGroup = !1)), (b = f))
              : ((f.firstInGroup = !1), (f.lastInGroup = !1));
          }
          null != b && (b.lastInGroup = !0);
        },
        syncVG: function () {},
        syncOffset: function () {
          mode != E_MODE.MODALS && mode != E_MODE.BIG && (bottomWidget.setOffset2(this.offsetX), bottomWidget.offsetX != this.offsetX && this.setOffset(bottomWidget.offsetX));
        },
        setOffset: function (a) {
          this.offsetX = a;
          0 > this.offsetX && (this.offsetX = 0);
          a = this.strips.length * measures.mixerStripWidth - this.w;
          0 > a && (a = 0);
          this.maxOffset = a;
          this.offsetX > a && (this.offsetX = a);
          this.offsetXold = this.offsetX;
          regUpdate(this);
        },
        startScroll: function (a, b) {
          scrollLock || (mixerTouches != (settings.oneFingerScroll ? 1 : 2) && b != mouseID) || this.move || ((this.touchID = b), (this.scrollX = a), (this.move = !0), this.velStart());
        },
        setScroll: function (a, b) {
          scrollLock ||
          (mixerTouches != (settings.oneFingerScroll ? 1 : 2) && b != mouseID) ||
          this.touchID != b ||
          ((this.offsetX = bound((this.offsetXold - (a - this.scrollX) * SCROLL_SCALE) | 0, 0, this.maxOffset)), mode != E_MODE.BIG && this.syncOffset(), regUpdate(this), this.velTrack());
        },
        endScroll: function (a) {
          this.touchID == a && ((this.touchID = this.scrollX = -1), (this.move = !1), (this.offsetXold = this.offsetX), this.velRelease());
        },
        velStart: function () {
          velocity = amplitude = 0;
          timestamp = Date.now();
          clearInterval(ticker);
          frame = gainMixer.offsetX;
          ticker = setInterval(this.velTrack, 1e3 / fps);
        },
        velTrack: function () {
          var a, b;
          a = Date.now();
          b = a - timestamp;
          timestamp = a;
          a = gainMixer.offsetX - frame;
          frame = gainMixer.offsetX;
          b = (1e3 * a) / (1 + b);
          velocity = 0 == velocity ? b : 0.3 * b + 0.7 * velocity;
        },
        velRelease: function () {
          clearInterval(ticker);
          Date.now() - timestamp < 1e3 / fps && this.velTrack();
          5 < Math.abs(velocity) && this.mScroll(velocity);
        },
        mScroll: function (a) {
          if (!settings.kinetic) {
            var b = 1e3 / fps;
            position = this.offsetX;
            amplitude = 0.2 * a;
            step = 0;
            var c = this;
            clearInterval(ticker);
            ticker = setInterval(function () {
              var a = (amplitude / b) * 2;
              position += a;
              amplitude -= a;
              step += 1;
              0.5 > Math.abs(a) && clearInterval(ticker);
              step > 3 * fps && clearInterval(ticker);
              (0 >= position || position > c.maxOffset) && clearInterval(ticker);
              c.offsetX != (position | 0) && c.setOffset(position | 0);
            }, b);
          }
        },
        calcGeometry: function () {
          this.y = measures.topWidgetHeight;
          this.w = screenWidth;
          masterWidget.enabled && (this.w -= masterWidget.w);
          slideOutWidget.enabled && (this.w -= slideOutWidget.w);
          this.h = screenHeight - this.y - bottomWidget.h;
          mode == E_MODE.BIG && ((this.y = measures.topWidgetHeight + BM_TOP_H), (this.h = BM_BOT_H), (this.w = screenWidth - BM_SO_W));
          var a = this.strips.length * measures.mixerStripWidth - this.w;
          0 > a && (a = 0);
          this.offsetX > a && this.setOffset(this.offsetX);
        },
        paint: function () {
          ctx.fillStyle = color.bg;
          ctx.fillRect(this.offsetX, 0, this.w, this.h);
          if (this.vis * measures.mixerStripWidth < this.w)
            for (var a = this.vis * measures.mixerStripWidth; a < this.w; a += measures.mixerStripWidth)
              fillVertPattern(res.blStripTile, this.h, a), drawImage(res.blStripBottom, a, this.h - res.blStripBottom.h()), drawImage(res.blStripTop, a, 0);
        },
      }),
      SlideOut = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "SlideOut";
          this.y = measures.topWidgetHeight;
          this.w = measures.mixerStripWidth;
          this.mode = 0;
          this.cachedStrip = null;
          this.cachedStripHeight = 0;
          this.initWidgets();
          this.enabled = !1;
          this.muteg.click();
        },
        setMode: function (a) {
          this.mode = a;
        },
        clearGotoButtons: function () {
          this.inp.state && this.inp.setState(0);
          this.fx.state && this.fx.setState(0);
          this.aux.state && this.aux.setState(0);
          this.sub.state && this.sub.setState(0);
        },
        clearViewButtons: function () {
          for (var a = 0; a < this.buttonsVG.length; a++) this.buttonsVG[a].state && this.buttonsVG[a].setState(0);
        },
        onShow: function () {
          this.startBPM();
        },
        onHide: function () {
          this.stopBPM();
        },
        startBPM: function () {
          this.bpmTimer = null;
          this.calcBPM();
        },
        calcBPM: function () {
          var a = this,
            b = getGlobalBpm(!0);
          this.lastbpmValue = b;
          this.beepTime = 6e4 / b;
          80 > this.beepTime && (this.beepTime = 80);
          3e3 < this.beepTime && (this.beepTime = 3e3);
          1 > b && (this.beepTime = 500);
          clearInterval(this.bpmTimer);
          this.bpmTimer = setInterval(function () {
            var b = getGlobalBpm(!0);
            1 < b && a.tap.doBeep();
            b != a.lastbpmValue && a.calcBPM();
          }, this.beepTime);
        },
        stopBPM: function () {
          clearInterval(this.bpmTimer);
          this.lastbpmValue = -1;
        },
        initWidgets: function () {
          var a = this,
            b = 9;
          this.inp = new CheckBox(this);
          this.inp.setPos(6, b);
          this.inp.setImages(res.bINPUTS_OFF, res.bINPUTS_ON);
          this.inp.idx = 100;
          this.inp.getState = function () {
            this.state = activeViewGroup == this.idx ? 1 : 0;
          };
          this.inp.onToggleUp = function () {
            mode != E_MODE.MIX && setMode(E_MODE.MIX);
            mixerWidget.showInputsGroup();
          };
          this.inp.onToggleDown = function () {
            resumeLastActiveVG();
          };
          this.fx = new CheckBox(this);
          this.fx.setPos(6, (b += 41));
          this.fx.setImages(res.bFXRet_OFF, res.bFXRet_ON);
          this.fx.idx = 101;
          this.fx.getState = function () {
            this.state = activeViewGroup == this.idx ? 1 : 0;
          };
          this.fx.onToggleUp = function () {
            mode != E_MODE.MIX && setMode(E_MODE.MIX);
            mixerWidget.showFxGroup();
          };
          this.fx.onToggleDown = function () {
            resumeLastActiveVG();
          };
          this.sub = new CheckBox(this);
          this.sub.longClickMark = !0;
          this.sub.setPos(6, (b += 41));
          this.sub.setImages(res.bSUBGr_OFF, res.bSUBGr_ON);
          this.sub.getState = function () {
            this.state = 102 == activeViewGroup ? 1 : 0;
          };
          this.sub.onToggleUp = function () {
            mode != E_MODE.MIX && setMode(E_MODE.MIX);
            mixerWidget.showSubGroup();
          };
          this.sub.onToggleDown = function () {
            100 > lastActiveViewGroup ? mixerWidget.showViewGroup(lastActiveViewGroup) : 200 <= lastActiveViewGroup && mixerWidget.showSG(lastActiveViewGroup - 200);
            lastActiveViewGroup = -1;
          };
          this.sub.onHold = function () {
            modalsWidget.setMode(E_MODAL_MODE.SUBS);
            setMode(E_MODE.MODALS);
          };
          this.aux = new CheckBox(this);
          this.aux.setPos(6, (b += 41));
          this.aux.setImages(res.bAUXMast_OFF, res.bAUXMast_ON);
          this.aux.getState = function () {
            this.state = 103 == activeViewGroup ? 1 : 0;
          };
          this.aux.onToggleUp = function () {
            mode != E_MODE.MIX && setMode(E_MODE.MIX);
            mixerWidget.showAuxGroup();
          };
          this.aux.onToggleDown = function () {
            resumeLastActiveVG();
          };
          this.vca = new CheckBox(this);
          this.vca.setImages(res.SO_B_BTN_OFF, res.SO_B_BTN_YLW);
          this.vca.setAnchors(6, b + 41);
          this.vca.textParam.font = "11pt open_sans_condensedbold";
          this.vca.idx = E_VG.VCAS;
          this.vca.text = formatButtonText(lang.VCA_MASTERS);
          this.vca.getState = function () {
            this.state = activeViewGroup == this.idx ? 1 : 0;
          };
          this.vca.onToggleUp = function () {
            mode != E_MODE.MIX && setMode(E_MODE.MIX);
            mixerWidget.showVCAGroup();
          };
          this.vca.onToggleDown = function () {
            resumeLastActiveVG();
          };
          this.vca.hide();
          this.GOTOS = [this.inp, this.fx, this.sub, this.aux];
          this.buttonsB = [];
          this.buttonsVG = [];
          this.buttonsMG = [];
          this.viewg = new EQButton(this);
          this.viewg.needBG = !1;
          this.viewg.longClickMark = !0;
          this.viewg.mode = 1;
          this.viewg.setPos(6, 184);
          this.viewg.setImages(res.bVIEWGr_OFF, res.bVIEWGr_ON);
          this.viewg.valueFunc = function () {
            for (var b = 0; b < a.buttonsVG.length; b++) a.buttonsVG[b].enabled = !0;
            for (b = 0; b < a.buttonsMG.length; b++) a.buttonsMG[b].enabled = !1;
          };
          this.viewg.onHold = function () {
            modalsWidget.setMode(E_MODAL_MODE.VIEWS);
            setMode(E_MODE.MODALS);
          };
          this.muteg = new EQButton(this);
          this.muteg.needBG = !1;
          this.muteg.longClickMark = !0;
          this.muteg.mode = 2;
          this.muteg.setPos(6, 225);
          this.muteg.setImages(res.bMuteGr_OFF, res.bMuteGr_ON);
          this.muteg.valueFunc = function () {
            for (var b = 0; b < a.buttonsVG.length; b++) a.buttonsVG[b].enabled = !1;
            for (b = 0; b < a.buttonsMG.length; b++) a.buttonsMG[b].enabled = !0;
          };
          this.muteg.onHold = function () {
            modalsWidget.setMode(E_MODAL_MODE.MUTES);
            setMode(E_MODE.MODALS);
          };
          for (b = 0; 6 > b; b++) {
            var c = new CheckBox(this);
            c.setPos(0 == b % 2 ? 6 : 65, 273 + 40 * ((b / 2) | 0));
            c.setImages(res["b" + (b + 1)], res["b" + (b + 1) + "B"]);
            c.setSize(40, 30);
            c.idx = b;
            c.getState = function () {
              this.state = activeViewGroup == this.idx ? 1 : 0;
            };
            c.onToggleUp = function () {
              0 == getVG(this.idx).length ? (showPopupMsg(lang.NO_ASSIGNED_VIEWGROUP.format(this.idx + 1), 800), (this.state = 0)) : mixerWidget.showViewGroup(this.idx);
            };
            c.onToggleDown = function () {
              mixerWidget.showAll();
            };
            this.buttonsVG.push(c);
          }
          for (b = 0; 6 > b; b++)
            (c = new CheckBox(this)),
              c.setPos(0 == b % 2 ? 6 : 65, 273 + 40 * ((b / 2) | 0)),
              c.setImages(res["b" + (b + 1)], res["b" + (b + 1) + "R"]),
              c.setSize(40, 30),
              (c.idx = b),
              (c.getState = function () {
                this.state = getMGroupState(this.idx);
              }),
              (c.onToggleUp = function () {
                muteGroupON(this.idx);
              }),
              (c.onToggleDown = function () {
                muteGroupOFF(this.idx);
              }),
              this.buttonsMG.push(c);
          this.tap = new Button(this);
          this.tap.lastTapTime = 0;
          this.tap.longClickMark = !0;
          this.tap.setImages(res.bTAP, res.bTAP_Pressed);
          this.tap.setPos(6, 400);
          this.tap.valueFunc = bpmTapHandler;
          this.tap.onHold = askBpm;
          this.tap.opaque = !1;
          this.tap.doBeep = function () {
            var a = this;
            this.longClickMarkColor = "#2ee";
            this.longClickMarkColor2 = "#066";
            regUpdate(this);
            clearTimeout(this.beepTimer);
            this.beepTimer = setTimeout(function () {
              a.longClickMarkColor = color.longClickMark;
              a.longClickMarkColor2 = color.longClickMark2;
              regUpdate(a);
            }, 80);
          };
          this.mutefx = new CheckBox(this);
          this.mutefx.setPos(63, 458);
          this.mutefx.setImages(res.bMuteFX_OFF, res.bMuteFX_ON);
          this.mutefx.getState = function () {
            this.state = checkBit(getValue("mgmask"), MUTEFX_BIT_IDX) ? 1 : 0;
          };
          this.mutefx.onToggleUp = function () {
            mixerWidget.muteFX();
          };
          this.mutefx.onToggleDown = function () {
            mixerWidget.unMuteFX();
          };
          this.muteall = new CheckBox(this);
          this.muteall.setPos(6, 458);
          this.muteall.setImages(res.bMuteAll_OFF, res.bMuteAll_ON);
          this.muteall.getState = function () {
            this.state = checkBit(getValue("mgmask"), MUTEALL_BIT_IDX) ? 1 : 0;
          };
          this.muteall.onToggleUp = function () {
            mixerWidget.muteAll();
          };
          this.muteall.onToggleDown = function () {
            mixerWidget.cancelMuteAll();
          };
          this.MOREME = new Button(this);
          this.MOREME.setImages(res.MOME_OFF, res.MOME_ON);
          this.MOREME.setPos(6, 518);
          this.MOREME.onPress = function () {
            modalsWidget.setMode(E_MODAL_MODE.MOREME);
            setMode(E_MODE.MODALS);
          };
        },
        calcGeometry: function () {
          this.x = screenWidth - this.w;
          this.y = topWidget.enabled ? topWidget.h : 0;
          mode == E_MODE.BIG && (this.y = measures.topWidgetHeight + BM_TOP_H + BM_BOT_H);
          this.h = screenHeight - this.y;
        },
        paint: function () {
          this.cachedStripHeight != this.w && this.cachePaint();
          ctx.drawImage(this.cachedStrip, 0, 0, this.w, this.h);
          var a = 174;
          ctx.fillStyle = "rgba(0,0,0,0.1)";
          ctx.fillRect(10, a - 1, this.w - 20, 3);
          ctx.fillStyle = "rgba(255,255,255,0.3)";
          ctx.fillRect(10, a, this.w - 20, 1);
          a = 392;
          ctx.fillStyle = "rgba(0,0,0,0.1)";
          ctx.fillRect(10, a - 1, this.w - 20, 3);
          ctx.fillStyle = "rgba(255,255,255,0.3)";
          ctx.fillRect(10, a, this.w - 20, 1);
          a = 508;
          ctx.fillStyle = "rgba(0,0,0,0.1)";
          ctx.fillRect(10, a - 1, this.w - 20, 3);
          ctx.fillStyle = "rgba(255,255,255,0.3)";
          ctx.fillRect(10, a, this.w - 20, 1);
          666 < this.h && drawImage(res.soBottom, 0, this.h - res.soBottom.h() + (697 > this.h ? 16 : 0));
        },
        cachePaint: function () {
          null != this.cachedStrip && delete this.cachedStrip;
          this.cachedStrip = document.createElement("canvas");
          var a = this.cachedStrip.getContext("2d");
          isRetina ? ((this.cachedStrip.width = 2 * this.w), (this.cachedStrip.height = 2 * this.h), a.scale(2, 2)) : ((this.cachedStrip.width = this.w), (this.cachedStrip.height = this.h));
          fillVertPatternCtx(res.soTile, this.h, a);
          drawImageCtx(res.soTop, 0, 0, a);
          this.cachedStripHeight = this.w;
        },
      }),
      SlideOut2 = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "SlideOut2";
          this.y = measures.topWidgetHeight;
          this.w = 2 * measures.mixerStripWidth;
          this.view = 0;
          this.color = "#1593C0";
          this.cachedStrip = null;
          this.cachedStripHeight = 0;
          this.condensed = 740 > Math.min(screenHeight, screenWidth);
          this.initWidgets();
          this.mode = 0;
          this.enabled = !1;
        },
        setView: function (a) {
          this.view = a;
          this.BANKS_B.each(function (a) {
            a.hide();
          });
          this.PLAYER_B.each(function (a) {
            a.hide();
          });
          this.FUNCS_B.each(function (a) {
            a.hide();
          });
          switch (a) {
            case 0:
              this.BANKS_B.each(function (a) {
                a.show();
              });
              break;
            case 1:
              this.PLAYER_B.each(function (a) {
                a.show();
              });
              break;
            case 2:
              this.FUNCS_B.each(function (a) {
                a.show();
              });
          }
          regUpdate(this);
        },
        calcGeometry: function () {
          this.x = screenWidth - this.w;
          this.y = topWidget.enabled ? topWidget.h : 0;
          mode == E_MODE.BIG && (this.y = measures.topWidgetHeight + BM_TOP_H);
          bmSlideOut && bmSlideOut.enabled && (this.y += bmSlideOut.h);
          this.h = screenHeight - this.y;
        },
        clearGotoButtons: function () {
          regUpdate(this);
        },
        clearViewButtons: function () {
          regUpdate(this);
        },
        setMode: function (a) {
          this.mode = a;
          regUpdate(this);
        },
        nextMode: function () {
          for (var a = this.view + 1; a < this.buttons.length; a++)
            if (this.buttons[a].enabled) {
              this.buttons[a].click();
              return;
            }
          for (a = 0; a < this.view; a++) this.buttons[a].enabled && this.buttons[a].click();
        },
        onShow: function () {
          this.startBPM();
          this.gain && (mode != E_MODE.BIG ? ((this.gain.disabled = !0), (this.eqdyn.disabled = !0), (this.sends.disabled = !0)) : ((this.gain.disabled = !1), (this.eqdyn.disabled = !1), (this.sends.disabled = !1)));
        },
        onHide: function () {
          this.stopBPM();
        },
        startBPM: function () {
          this.bpmTimer = null;
          this.calcBPM();
        },
        calcBPM: function () {
          var a = this,
            b = getGlobalBpm(!0);
          this.lastbpmValue = b;
          this.beepTime = 6e4 / b;
          80 > this.beepTime && (this.beepTime = 80);
          3e3 < this.beepTime && (this.beepTime = 3e3);
          1 > b && (this.beepTime = 500);
          clearInterval(this.bpmTimer);
          this.bpmTimer = setInterval(function () {
            var b = getGlobalBpm(!0);
            1 < b && a.tap.doBeep();
            b != a.lastbpmValue && a.calcBPM();
          }, this.beepTime);
        },
        stopBPM: function () {
          clearInterval(this.bpmTimer);
          this.lastbpmValue = -1;
        },
        initWidgets: function () {
          var a = this,
            b = 6,
            c = 7;
          this.banks = new CHECKBUTTON(this);
          this.banks.text = lang.BANKS;
          this.banks.setAnchors(c, b);
          this.banks.w = 65;
          this.banks.color = "#1FC8F2";
          this.banks.bgColor = "#2555A4";
          this.banks.strokeColor = "#1AA6C9";
          this.banks.textColor = "#e9e9f9";
          this.banks.idx = 0;
          this.banks.getState = function () {
            this.state = a.view == this.idx;
          };
          this.banks.onToggleUp = function () {
            a.setView(this.idx);
          };
          this.player = new CHECKBUTTON(this);
          this.player.setAnchors(c + this.banks.w + 2, b);
          this.player.w = 65;
          this.player.text = lang.PLAYER;
          this.player.color = "#1FC8F2";
          this.player.bgColor = "#2555A4";
          this.player.strokeColor = "#1AA6C9";
          this.player.textColor = "#e9e9f9";
          this.player.idx = 1;
          this.player.getState = function () {
            this.state = a.view == this.idx;
          };
          this.player.onToggleUp = function () {
            a.setView(this.idx);
          };
          this.funcs = new CHECKBUTTON(this);
          this.funcs.setAnchors(c + this.banks.w + 2 + this.player.w + 2, b);
          this.funcs.w = 76;
          this.funcs.text = lang.FUNCTIONS;
          this.funcs.color = "#1FC8F2";
          this.funcs.bgColor = "#2555A4";
          this.funcs.strokeColor = "#1AA6C9";
          this.funcs.textColor = "#e9e9f9";
          this.funcs.idx = 2;
          this.funcs.getState = function () {
            this.state = a.view == this.idx;
          };
          this.funcs.onToggleUp = function () {
            a.setView(this.idx);
          };
          this.buttons = [this.banks, this.player, this.funcs];
          var b = 50,
            d = 41,
            c = 40;
          this.BANKS_B = [];
          this.PLAYER_B = [];
          this.FUNCS_B = [];
          c = 41;
          this.bank_l = new TButton(this);
          this.bank_l.setAnchors(c, b + d + 1);
          this.bank_l.setImages(res.FFUNC_B_OFF, res.FFUNC_B_YLW);
          this.bank_l.text = "<";
          this.bank_l.onPress = function () {
            bottomWidget.goLeft();
          };
          this.bank_r = new TButton(this);
          this.bank_r.setAnchors(null, b + d + 1, c);
          this.bank_r.setImages(res.FFUNC_B_OFF, res.FFUNC_B_YLW);
          this.bank_r.text = ">";
          this.bank_r.onPress = function () {
            bottomWidget.goRight();
          };
          this.bank_s = new TButton(this);
          this.bank_s.setAnchors(c, b + 1);
          this.bank_s.setImages(res.FFUNC_B_OFF, res.FFUNC_B_YLW);
          this.bank_s.text = lang.START;
          this.bank_s.onPress = function () {
            bottomWidget.gotoStart();
          };
          this.bank_e = new TButton(this);
          this.bank_e.setAnchors(null, b + 1, c);
          this.bank_e.setImages(res.FFUNC_B_OFF, res.FFUNC_B_YLW);
          this.bank_e.text = lang.END;
          this.bank_e.onPress = function () {
            bottomWidget.gotoEnd();
          };
          this.BANKS_B.push(this.bank_l);
          this.BANKS_B.push(this.bank_r);
          this.BANKS_B.push(this.bank_s);
          this.BANKS_B.push(this.bank_e);
          c = 40;
          this.pl = new CheckBox(this);
          this.pl.setAnchors(c, b + d);
          this.pl.setImages(res.PLAYS_OFF, res.PLAYS_STOP);
          this.pl.regKey("var.currentState");
          this.pl.regKey("var.present");
          this.pl.getState = function () {
            this.disabled = 0 == getValue("var.present");
            this.state = 2 == getValue("var.currentState") ? 1 : 0;
          };
          this.pl.onToggle = function () {
            doFfunc(E_FFUNC.PLAY);
          };
          this.rec = new CheckBox(this);
          this.rec.setAnchors(null, b + d, c);
          this.rec.setImages(res.RECS_OFF, res.RECS_STOP);
          this.rec.regKey("var.recBusy");
          this.rec.regKey("var.isRecording");
          this.rec.regKey("var.present");
          this.rec.getState = function () {
            this.state = getValue("var.isRecording");
            this.disabled = 0 == getValue("var.present") || 0.5 < getValue("var.recBusy");
          };
          this.rec.onToggle = function () {
            doFfunc(E_FFUNC.REC);
          };
          this.mtkpl = new CheckBox(this);
          this.mtkpl.setAnchors(c, b);
          this.mtkpl.setImages(res.MTK_PLAY, res.MTK_STOP);
          this.mtkpl.regKey("var.mtk.currentState");
          this.mtkpl.regKey("var.mtk.rec.currentState");
          this.mtkpl.regKey("var.mtk.rec.busy");
          this.mtkpl.regKey("var.mtk.present");
          this.mtkpl.getState = function () {
            this.state = 2 == getValue("var.mtk.currentState") ? 1 : 0;
            this.disabled = 0 == getValue("var.mtk.present") || 0.5 < getValue("var.mtk.rec.busy") || 0.5 < getValue("var.mtk.rec.currentState");
          };
          this.mtkpl.onToggle = function () {
            doFfunc(E_FFUNC.MTK_PLAY);
          };
          this.mtkrec = new CheckBox(this);
          this.mtkrec.setAnchors(null, b, c);
          this.mtkrec.setImages(res.MTK_REC_OFF, res.MTK_REC_ON);
          this.mtkrec.regKey("var.mtk.rec.currentState");
          this.mtkrec.regKey("var.mtk.rec.busy");
          this.mtkrec.regKey("var.mtk.currentState");
          this.mtkrec.regKey("var.mtk.present");
          this.mtkrec.getState = function () {
            this.state = getValue("var.mtk.rec.currentState");
            this.disabled = 0 == getValue("var.mtk.present") || 0.5 < getValue("var.mtk.rec.busy") || 0 != getValue("var.mtk.currentState");
          };
          this.mtkrec.onToggle = function () {
            doFfunc(E_FFUNC.MTK_REC);
          };
          this.PLAYER_B.push(this.pl);
          this.PLAYER_B.push(this.rec);
          this.PLAYER_B.push(this.mtkpl);
          this.PLAYER_B.push(this.mtkrec);
          this.newsnap = new Button(this);
          this.newsnap.setAnchors(null, b, c);
          this.newsnap.setImages(res.SS_OFF, res.SS_ON);
          this.newsnap.onPress = function () {
            doFfunc(E_FFUNC.NEWSNAP);
          };
          this.nextsnap = new Button(this);
          this.nextsnap.setAnchors(null, b + d, c);
          this.nextsnap.setImages(res.NXT_SNP_OFF, res.NXT_SNP_ON);
          this.nextsnap.onPress = function () {
            doFfunc(E_FFUNC.NEXT_SNAP);
          };
          this.updsnap = new Button(this);
          this.updsnap.setAnchors(c, b);
          this.updsnap.setImages(res.SSUPD_OFF, res.SSUPD_ON);
          this.updsnap.onPress = function () {
            doFfunc(E_FFUNC.UPDCURSNAP);
          };
          this.prevsnap = new Button(this);
          this.prevsnap.setAnchors(c, b + d);
          this.prevsnap.setImages(res.PRV_SNP_OFF, res.PRV_SNP_ON);
          this.prevsnap.onPress = function () {
            doFfunc(E_FFUNC.PREV_SNAP);
          };
          this.FUNCS_B.push(this.newsnap);
          this.FUNCS_B.push(this.nextsnap);
          this.FUNCS_B.push(this.updsnap);
          this.FUNCS_B.push(this.prevsnap);
          this.PLAYER_B.each(function (a) {
            a.hide();
          });
          this.FUNCS_B.each(function (a) {
            a.hide();
          });
          settings.bigD &&
          ((c = 16),
            (b = 171),
            (d = 42),
            (this.gain = new CheckBox(this)),
            this.gain.setPos(c, b),
            this.gain.setImages(res.SO_L_BTN_OFF, res.SO_L_BTN_TUR),
            (this.gain.text = lang.GAIN),
            (this.gain.textParam.offsetY = -3),
            (this.gain.getState = function () {
              this.state = 0 == bmMode;
            }),
            (this.gain.onToggleUp = function () {
              setBMode(0);
            }),
            (this.eqdyn = new CheckBox(this)),
            this.eqdyn.setPos(c, (b += d)),
            this.eqdyn.setImages(res.SO_L_BTN_OFF, res.SO_L_BTN_TUR),
            (this.eqdyn.text = lang.DYN + " / " + lang.EQ),
            (this.eqdyn.textParam.offsetY = -3),
            (this.eqdyn.getState = function () {
              this.state = 1 == bmMode;
            }),
            (this.eqdyn.onToggleUp = function () {
              setBMode(1);
            }),
            (this.sends = new CheckBox(this)),
            this.sends.setPos(c, (b += d)),
            this.sends.setImages(res.SO_L_BTN_OFF, res.SO_L_BTN_TUR),
            (this.sends.text = lang.SENDS),
            (this.sends.textParam.offsetY = -3),
            (this.sends.getState = function () {
              this.state = 2 == bmMode;
            }),
            (this.sends.onToggleUp = function () {
              setBMode(2);
            }));
          c = 16;
          b = 164;
          this.condensed && (b = 158);
          settings.bigD && (b += 165);
          this.views = new CheckBox(this);
          this.views.setImages(res.SO_M_BTN_OFF, res.SO_M_BTN_TUR);
          this.views.setAnchors(c, b);
          this.views.text = lang.VIEWS;
          this.views.textParam.offsetY = -3;
          this.views.getState = function () {
            this.state = 0 == a.mode;
          };
          this.views.onToggleUp = function () {
            a.setMode(0);
          };
          this.mutes = new CheckBox(this);
          this.mutes.setImages(res.SO_M_BTN_OFF, res.SO_M_BTN_RED);
          this.mutes.setAnchors(null, b, c);
          this.mutes.text = lang.MUTES;
          this.mutes.textParam.offsetY = -3;
          this.mutes.getState = function () {
            this.state = 1 == a.mode;
          };
          this.mutes.onToggleUp = function () {
            a.setMode(1);
          };
          b = 213;
          this.condensed && (b = 202);
          settings.bigD && (b += 165);
          for (var d = 40, f = 0; 6 > f; f++) {
            var e = new CheckBox(this);
            e.setImages(res.SO_L_BTN_OFF, res.SO_L_BTN_RED);
            e.setPos(c, b + d * f);
            e.idx = f;
            e.clickOnUp = !0;
            e.longClickMark = !0;
            e.textParam.offsetY = -3;
            e.text = "NAMED GROUP " + f;
            e.getState = function () {
              if (0 == a.mode) {
                var b = 0 == getVG(this.idx).length;
                this.state = activeViewGroup == this.idx ? 1 : 0;
                this.text = getVGName(this.idx) || lang.VIEW_GROUP + " " + (this.idx + 1);
                this.textColor = b ? color.gray : color.vgText;
                this.img1 = res.SO_L_BTN_TUR;
              } else
                (b = muteGroupEmpty(this.idx)),
                  (this.state = getMGroupState(this.idx)),
                  (this.text = getValue("mg." + this.idx + ".name") || lang.MUTE_GROUP + " " + (this.idx + 1)),
                  (this.textColor = b ? color.gray : color.mgText),
                  (this.img1 = res.SO_L_BTN_RED);
            };
            e.onToggleUp = function () {
              0 == a.mode ? (0 == getVG(this.idx).length ? (showPopupMsg(lang.NO_ASSIGNED_VIEWGROUP.format(this.idx + 1), 800), (this.state = 0)) : mixerWidget.showViewGroup(this.idx)) : muteGroupON(this.idx);
            };
            e.onToggleDown = function () {
              0 == a.mode ? mixerWidget.showAll() : muteGroupOFF(this.idx);
            };
            e.onHold = function () {
              0 == a.mode
                ? (modalsWidget.setMode(E_MODAL_MODE.VIEWS), modalsWidget.pages[E_MODAL_MODE.VIEWS].setMode(this.idx))
                : (modalsWidget.setMode(E_MODAL_MODE.MUTES), modalsWidget.pages[E_MODAL_MODE.MUTES].setMode(this.idx));
              setMode(E_MODE.MODALS);
            };
          }
          b = 462;
          this.condensed && (b = 450);
          settings.bigD && (b += 165);
          this.mutefx = new CheckBox(this);
          this.mutefx.setPos(c, b);
          this.mutefx.setImages(res.SO_M_BTN_OFF, res.SO_M_BTN_BLU);
          this.mutefx.text = lang.MUTE_FX;
          this.mutefx.textParam.offsetY = -3;
          this.mutefx.getState = function () {
            this.state = checkBit(getValue("mgmask"), MUTEFX_BIT_IDX) ? 1 : 0;
          };
          this.mutefx.onToggleUp = function () {
            mixerWidget.muteFX();
          };
          this.mutefx.onToggleDown = function () {
            mixerWidget.unMuteFX();
          };
          this.tap = new Button(this);
          this.tap.setAnchors(null, b, c);
          this.tap.lastTapTime = 0;
          this.tap.longClickMark = !0;
          this.tap.textParam.offsetY = -3;
          this.tap.setImages(res.SO_M_BTN_OFF, res.SO_M_BTN_RED);
          this.tap.text = lang.TAP_TEMPO;
          this.tap.valueFunc = bpmTapHandler;
          this.tap.onHold = askBpm;
          this.tap.opaque = !1;
          this.tap.doBeep = function () {
            var a = this;
            this.longClickMarkColor = "#2ee";
            this.longClickMarkColor2 = "#066";
            regUpdate(this);
            clearTimeout(this.beepTimer);
            this.beepTimer = setTimeout(function () {
              a.longClickMarkColor = color.longClickMark;
              a.longClickMarkColor2 = color.longClickMark2;
              regUpdate(a);
            }, 80);
          };
          settings.bigD &&
          ((b += 47),
            (this.clearsolo = new Button(this)),
            this.clearsolo.setImages(res.SO_M_BTN_OFF, res.SO_M_BTN_RED),
            this.clearsolo.setAnchors(c, b, null, null),
            (this.clearsolo.text = lang.CLEAR_SOLO),
            (this.clearsolo.textParam.offsetY = -3),
            (this.clearsolo.textParam.font = "12pt open_sans_condensedbold"),
            (this.clearsolo.onPress = function () {
              mixerWidget.clearSolos();
              regUpdate(a);
            }),
            (this.clearmute = new Button(this)),
            this.clearmute.setImages(res.SO_M_BTN_OFF, res.SO_M_BTN_RED),
            this.clearmute.setAnchors(null, b, c, null),
            (this.clearmute.text = lang.CLEAR_MUTE),
            (this.clearmute.textParam.offsetY = -3),
            (this.clearmute.textParam.font = "12pt open_sans_condensedbold"),
            (this.clearmute.onPress = function () {
              mixerWidget.clearMutes();
              regUpdate(a);
            }));
          b = 539;
          this.condensed && (b = 513);
          settings.bigD && (b += 207);
          this.inp = new CheckBox(this);
          this.inp.setImages(res.SO_B_BTN_OFF, res.SO_B_BTN_YLW);
          this.inp.setAnchors(c, b);
          this.inp.text = lang.INPUTS;
          this.inp.textColor = color.INPUT;
          this.inp.idx = E_VG.INPUTS;
          this.inp.textParam.offsetY = -3;
          this.inp.getState = function () {
            this.state = activeViewGroup == this.idx ? 1 : 0;
          };
          this.inp.onToggleUp = function () {
            mode != E_MODE.MIX && setMode(E_MODE.MIX);
            mixerWidget.showInputsGroup();
          };
          this.inp.onToggleDown = function () {
            resumeLastActiveVG();
          };
          this.inp.hide();
          this.fx = new CheckBox(this);
          this.fx.setImages(res.AUXM_OFF, res.AUXM_ON);
          this.fx.setAnchors(c, b);
          this.fx.textColor = "#76A8D6";
          this.fx.text = formatButtonText(lang.FX_MASTERS);
          this.fx.textParam.font = "11pt open_sans_condensedbold";
          this.fx.textParam.offsetY = -3;
          this.fx.idx = E_VG.FXS;
          this.fx.getState = function () {
            this.state = activeViewGroup == this.idx ? 1 : 0;
          };
          this.fx.onToggleUp = function () {
            mode != E_MODE.MIX && setMode(E_MODE.MIX);
            mixerWidget.showFxGroup();
          };
          this.fx.onToggleDown = function () {
            resumeLastActiveVG();
          };
          this.fx.contains = function (b, c) {
            if (!this.enabled || !this.visible) return !1;
            var d = b - a.home.x,
              e = c - a.home.y,
              f = a.home.w / 2,
              g = a.home.h / 2;
            return this.enabled && this.visible ? this.x <= b && this.x + this.w > b && this.y <= c && this.y + this.h > c && !isInCircle(f, g, 24, d, e) : !1;
          };
          this.sub = new CheckBox(this);
          this.sub.setImages(res.FXM_OFF, res.FXM_ON);
          this.sub.setAnchors(null, b, c);
          this.sub.textColor = "#D8A5B9";
          this.sub.textParam.font = "11pt open_sans_condensedbold";
          this.sub.textParam.offsetY = -3;
          this.sub.idx = E_VG.SUBS;
          this.sub.text = formatButtonText(lang.SUB_GROUPS);
          this.sub.getState = function () {
            this.state = activeViewGroup == this.idx ? 1 : 0;
          };
          this.sub.onToggleUp = function () {
            mode != E_MODE.MIX && setMode(E_MODE.MIX);
            mixerWidget.showSubGroup();
          };
          this.sub.onToggleDown = function () {
            resumeLastActiveVG();
          };
          this.sub.onHold = function () {
            modalsWidget.setMode(E_MODAL_MODE.SUBS);
            setMode(E_MODE.MODALS);
          };
          this.sub.contains = function (b, c) {
            if (!this.enabled || !this.visible) return !1;
            var d = b - a.home.x,
              e = c - a.home.y,
              f = a.home.w / 2,
              g = a.home.h / 2;
            return this.enabled && this.visible ? this.x <= b && this.x + this.w > b && this.y <= c && this.y + this.h > c && !isInCircle(f, g, 24, d, e) : !1;
          };
          this.aux = new CheckBox(this);
          this.aux.setImages(res.SUBG_OFF, res.SUBG_ON);
          this.aux.setAnchors(c, b + 71);
          this.aux.textColor = "#DBCB7A";
          this.aux.textParam.font = "11pt open_sans_condensedbold";
          this.aux.textParam.offsetY = -3;
          this.aux.idx = E_VG.AUXS;
          this.aux.text = formatButtonText(lang.AUX_MASTERS);
          this.aux.getState = function () {
            this.state = activeViewGroup == this.idx ? 1 : 0;
          };
          this.aux.onToggleUp = function () {
            mode != E_MODE.MIX && setMode(E_MODE.MIX);
            mixerWidget.showAuxGroup();
          };
          this.aux.onToggleDown = function () {
            resumeLastActiveVG();
          };
          this.aux.contains = function (b, c) {
            if (!this.enabled || !this.visible) return !1;
            var d = b - a.home.x,
              e = c - a.home.y,
              f = a.home.w / 2,
              g = a.home.h / 2;
            return this.enabled && this.visible ? this.x <= b && this.x + this.w > b && this.y <= c && this.y + this.h > c && !isInCircle(f, g, 24, d, e) : !1;
          };
          this.vca = new CheckBox(this);
          this.vca.setImages(res.VCA_OFF, res.VCA_ON);
          this.vca.setAnchors(null, b + 71, c);
          this.vca.textColor = "#8BD08B";
          this.vca.textParam.font = "11pt open_sans_condensedbold";
          this.vca.textParam.offsetY = -3;
          this.vca.idx = E_VG.VCAS;
          this.vca.text = formatButtonText(lang.VCA_MASTERS);
          this.vca.getState = function () {
            this.state = activeViewGroup == this.idx ? 1 : 0;
          };
          this.vca.onToggleUp = function () {
            mode != E_MODE.MIX && setMode(E_MODE.MIX);
            mixerWidget.showVCAGroup();
          };
          this.vca.onToggleDown = function () {
            resumeLastActiveVG();
          };
          this.vca.contains = function (b, c) {
            if (!this.enabled || !this.visible) return !1;
            var d = b - a.home.x,
              e = c - a.home.y,
              f = a.home.w / 2,
              g = a.home.h / 2;
            return this.enabled && this.visible ? this.x <= b && this.x + this.w > b && this.y <= c && this.y + this.h > c && !isInCircle(f, g, 24, d, e) : !1;
          };
          this.home = new Button(this);
          this.home.setImages(res.HOME_OFF, res.HOME_ON);
          this.home.setAnchors(c + 71, b + 37);
          this.home.contains = function (a, b) {
            return this.enabled && this.visible ? isInCircle(this.w / 2, this.h / 2, 24, a - this.x, b - this.y) : !1;
          };
          this.home.onPress = function () {
            mode != E_MODE.MIX && setMode(E_MODE.MIX);
            mixerWidget.showAll();
          };
        },
        paint: function () {
          this.cachedStripHeight != this.h && this.cachePaint();
          ctx.drawImage(this.cachedStrip, 0, 0, this.w, this.h);
          this.banks.enabled && ((ctx.fillStyle = "#1FC8F2"), ctx.fillRect(7, this.banks.y + this.banks.h + 1, this.w - 14, 3));
        },
        drawHeader: function (a, b, c) {
          c.font = "12pt open_sans_condensedbold";
          var d = c.measureText(a).width,
            d = ((this.w - d - 20 - 34) / 2) | 0;
          c.fillStyle = "#0A1957";
          c.fillRect(17, b - 2, d, 2);
          c.fillRect(this.w - 17, b - 2, -d, 2);
          c.fillStyle = "#3A88E1";
          c.fillRect(17, b, d, 1);
          c.fillRect(this.w - 17, b, -d, 1);
          if (this.condensed || settings.bigD) b += 10;
          c.drawText(a, this.w / 2, b - 6, { shadow: [color.black, 0, 1, 1], color: "#E0E0E0", align: "center", font: "12pt open_sans_condensedbold" });
        },
        cachePaint: function () {
          null != this.cachedStrip && delete this.cachedStrip;
          this.cachedStrip = document.createElement("canvas");
          var a = this.cachedStrip.getContext("2d");
          isRetina ? ((this.cachedStrip.width = 2 * this.w), (this.cachedStrip.height = 2 * this.h), a.scale(2, 2)) : ((this.cachedStrip.width = this.w), (this.cachedStrip.height = this.h));
          a.fillStyle = "#2353A2";
          a.fillRect(0, 0, this.w, this.h);
          fillVertPatternCtx(res.SO2_TILE, this.h, a);
          drawImageCtx(res.SO2_BOTTOM, 0, this.h - res.soBottom.h(), a);
          drawImageCtx(res.SO2_TOP, 0, 0, a);
          if (settings.bigD) this.drawHeader(lang.EDIT_VIEW, this.gain.y - 18, a), this.drawHeader(lang.GROUPS, this.views.y - 18, a), this.drawHeader(lang.MASTERS, this.fx.y - 18, a);
          else if (this.condensed) {
            var b = 144;
            settings.bigD && (b -= 144);
            settings.bigD || this.drawHeader(lang.GROUPS, b, a);
            b = 500;
            settings.bigD && (b -= 144);
            this.drawHeader(lang.MASTERS, b, a);
          } else this.drawHeader(lang.GROUPS, this.views.y - 12, a), this.drawHeader(lang.MASTERS, this.fx.y - 13, a);
          this.cachedStripHeight = this.h;
        },
      });
    function saveLastActiveVG() {
      (100 <= activeViewGroup && 200 > activeViewGroup) || 300 <= activeViewGroup || ((lastActiveViewPosition = mixerWidget.offsetX), (lastActiveViewGroup = activeViewGroup));
    }
    function resumeLastActiveVG(a) {
      100 > lastActiveViewGroup
        ? mixerWidget.showViewGroup(lastActiveViewGroup)
        : 300 <= lastActiveViewGroup
          ? mixerWidget.showVCA(lastActiveViewGroup - 300)
          : 200 <= lastActiveViewGroup
            ? mixerWidget.showSG(lastActiveViewGroup - 200)
            : 104 == lastActiveViewGroup && mixerWidget.showVCAGroup();
      bottomWidget.setOffset(lastActiveViewPosition);
      lastActiveViewGroup = -1;
    }
    function muteGroupReset(a) {
      if (isBlocked("mixlvl")) showPopupMsg(lang.LOCKED, 1e3);
      else {
        var b = getValue("mgmask"),
          c = 1 << a;
        b & c && muteGroupOFF(a);
        a = mixerWidget.strips;
        for (b = 0; b < a.length; b++) {
          var d = a[b],
            f = d.getNameValue("mgmask"),
            f = f & ~c;
          d.setNameValue("mgmask", f);
          setValue("var.unsaved.mutegroups", 1);
        }
      }
    }
    function getMGroupState(a) {
      return 0 != (getValue("mgmask") & (1 << a)) ? 1 : 0;
    }
    function muteGroupON(a) {
      if (isBlocked("mixlvl")) showPopupMsg(lang.LOCKED, 1e3);
      else {
        for (var b = getValue("mgmask"), c = 1 << a, b = b | c, d = [], f = mixerWidget.strips, e = 0; e < f.length; e++) {
          var g = f[e];
          if (g.getNameValue("mgmask") & c && (d.push(g), g.type == E_STRIP_TYPE.VCA)) for (var h = 0; h < inStrips.length; h++) inStrips[h].getNameValue("vca") == g.subId && d.push(inStrips[h]);
        }
        d = d.uniq();
        c = d.length;
        for (e = 0; e < d.length; e++) (g = d[e]), g.setNameValue("forceunmute", 0);
        0 == c ? showPopupMsg(lang.NO_ASSIGNED_MG.format(a + 1), 700) : (setValue("mgmask", b), showPopupMsg(lang.MUTEGROUP_1_ACTIVATED.format(a + 1), 700), handle_mgmask(!1));
      }
    }
    function muteGroupOFF(a) {
      if (isBlocked("mixlvl")) showPopupMsg(lang.LOCKED, 1e3);
      else {
        var b = getValue("mgmask"),
          c = b & ~(1 << a);
        checkBit(b, MUTEALL_BIT_IDX);
        checkBit(b, MUTEFX_BIT_IDX);
        b = mixerWidget.strips;
        setValue("mgmask", c);
        for (c = 0; c < b.length; c++) {
          var d = b[c];
          1 != d.getNameValue("forceunmute") || d.getMuteState(!0, !0) || (d.setNameValue("forceunmute", 0), d.setNameValue("mute", 0));
        }
        showPopupMsg(lang.MUTEGROUP_1_DEACTIVATED.format(a + 1), 700);
        handle_mgmask(!1);
      }
    }
    function muteGroupToggle(a) {
      getMGroupState(a) ? muteGroupOFF(a) : muteGroupON(a);
    }
    function muteGroupEmpty(a) {
      a = 1 << a;
      for (var b = mixerWidget.strips, c = 0; c < b.length; c++) if (b[c].getNameValue("mgmask") & a) return !1;
      return !0;
    }
    var STRIPMENU = Class.create(Widget, {
      initialize: function ($super, b, c) {
        $super(b);
        this.widgetName = "SUBMENU";
        this.w = 200;
        this.h = 380;
        this.needMoveEvt = !0;
        this.items = [];
        this.colors = Array(10);
        this.subs = {};
        this.title = c.getName();
        this.titleColor = c.color;
        this.target = c;
        this.tID = c.id;
        switch (c.type) {
          case E_STRIP_TYPE.VCA:
            this.items = [lang.RENAME, lang.RESET_CHANNEL];
            break;
          case E_STRIP_TYPE.IN:
          case E_STRIP_TYPE.LINEIN:
          case E_STRIP_TYPE.MEDIA:
            this.items = [lang.CHANNEL_PRESETS, lang.RENAME, lang.COPY_SETTINGS];
            IS_UI_24 && settings.cpa && c.type != E_STRIP_TYPE.MEDIA && this.items.splice(1, 0, lang.CLEAR_CPA);
            settingsBufferType == c.type && this.items.push(lang.PASTE_SETTINGS);
            b = this.target.getNameValue("subgroup");
            0 <= b ? ((this.subs[this.items.length] = -1), this.items.push(lang.UNASSIGN_SUB_GROUP.format(b + 1))) : this.items.push(lang.ASSIGN_SUB_GROUP.replace(" {0}", ""));
            this.colors[this.items.length - 1] = "#40202C";
            IS_UI_24 &&
            c.haveVCA &&
            ((b = this.target.getNameValue("vca")), null != b && 0 <= b ? this.items.push(lang.UNASSIGN_VCA + " " + (b + 1)) : this.items.push(lang.ASSIGN_VCA), (this.colors[this.items.length - 1] = "#1A401A"));
            -1 != c.getNameValue("stereoIndex") || c.lastInGroup2 || ((b = allStrips[c.id + 1]) && -1 == b.getNameValue("stereoIndex") && this.items.push(lang.STEREO_LINK));
            -1 != c.getNameValue("stereoIndex") && this.items.push(lang.DISABLE_STEREO_LINK);
            c.type == E_STRIP_TYPE.IN && this.items.push(lang.COLOR);
            this.items.push(lang.RESET_CHANNEL);
            c.type == E_STRIP_TYPE.MEDIA && this.items.push(settings.mediaFirst ? lang.PLACE_AFTER_INPUTS : lang.PLACE_BEFORE_INPUTS);
            settings.me.contains(c.id) ? this.items.push(lang.UNASSIGN_ME) : this.items.push(lang.ASSIGN_ME);
            this.colors[this.items.length - 1] = "#402600";
            break;
          case E_STRIP_TYPE.FX:
            this.items = [lang.CHANNEL_PRESETS, lang.RENAME, lang.COPY_SETTINGS];
            settingsBufferType == c.type && this.items.push(lang.PASTE_SETTINGS);
            IS_UI_24 &&
            c.haveVCA &&
            ((b = this.target.getNameValue("vca")), null != b && 0 <= b ? this.items.push(lang.UNASSIGN_VCA + " " + (b + 1)) : this.items.push(lang.ASSIGN_VCA), (this.colors[this.items.length - 1] = "#1A401A"));
            this.items.push(lang.RESET_CHANNEL);
            break;
          case E_STRIP_TYPE.SUB:
            this.items = [lang.CHANNEL_PRESETS, lang.RENAME, lang.COPY_SETTINGS];
            settingsBufferType == c.type && this.items.push(lang.PASTE_SETTINGS);
            this.items.push(lang.RESET_CHANNEL);
            (mode != E_MODE.MIX && mode != E_MODE.EDIT) || activeSubGroup == c.subId || this.items.push(lang.SUB_GROUP_SPREAD);
            IS_UI_24 && this.items.push(c.getNameValue("exclude") ? lang.SEND_TO_MASTER : lang.EXCLUDE_FROM_MASTER);
            break;
          case E_STRIP_TYPE.AUX:
            this.items = [lang.CHANNEL_PRESETS, lang.RENAME, lang.COPY_SETTINGS];
            settingsBufferType == c.type && this.items.push(lang.PASTE_SETTINGS);
            IS_UI_24 &&
            c.haveVCA &&
            ((b = this.target.getNameValue("vca")), null != b && 0 <= b ? this.items.push(lang.UNASSIGN_VCA + " " + (b + 1)) : this.items.push(lang.ASSIGN_VCA), (this.colors[this.items.length - 1] = "#1A401A"));
            -1 != c.getNameValue("stereoIndex") || c.lastInGroup2 || ((b = allStrips[c.id + 1]), -1 == b.getNameValue("stereoIndex") && this.items.push(lang.STEREO_LINK));
            -1 != c.getNameValue("stereoIndex") && this.items.push(lang.DISABLE_STEREO_LINK);
            this.items.push(lang.RESET_CHANNEL);
            HAVE_MATRIX && ((b = c.getNameValue("matrix")), this.items.push(b ? lang.SWITCH_TO_AUX : lang.SWITCH_TO_MATRIX));
            mode == E_MODE.AUX && HAVE_LATENCY && ((b = VtoLATENCY(c.getNameValue("delay"))), this.items.push(lang.SET_OUTPUT_DELAY + " (" + b + ")"));
            IS_UI_24 && this.items.push(c.getNameValue("link2master") ? lang.UNLINK_FROM_MASTER : lang.LINK_TO_MASTER);
            this.items.push(settings.meout == c.subId ? lang.UNASSIGN_MY_OUT : lang.ASSIGN_MY_OUT);
            break;
          case E_STRIP_TYPE.MASTER:
            (this.items = [lang.SET_TO_ZERO_DB, lang.MASTER_PRESETS]),
            IS_UI_24 && this.items.push(lang.TOGGLE_DIM),
            HAVE_LATENCY &&
            ((b = VtoLATENCY(getValue("m.delayL"))),
              (c = VtoLATENCY(getValue("m.delayR"))),
              this.items.push(lang.SET_OUTPUT_DELAY_LEFT + " (" + b + ")"),
              this.items.push(lang.SET_OUTPUT_DELAY_RIGHT + " (" + c + ")"));
        }
        !inView || (mode != E_MODE.MIX && mode != E_MODE.GAIN && mode != E_MODE.EDIT) || this.items.push(lang.SHOW_ALL_CHANNELS);
        this.rh = 30;
        this.h = 94 + this.rh * this.items.length;
        this.mstart = 50;
        this.selected = -1;
        this.startPoint = [-1, -1];
        this.lastPoint = [-1, -1];
        this.poplineX = 50;
      },
      onDown: function (a, b) {
        this.startPoint = this.lastPoint = [a, b];
        var c = Math.floor((b - this.globalY() - this.mstart) / this.rh);
        c >= this.items.length || 0 > c || ((this.selected = c), regUpdate(this));
      },
      onMove: function (a, b) {
        this.lastPoint = [a, b];
        if (40 < Math.abs(this.lastPoint[0] - this.startPoint[0]) || 40 < Math.abs(this.lastPoint[1] - this.startPoint[1])) this.selected = -1;
        regUpdate(this);
      },
      onUp: function () {
        if (20 < Math.abs(this.lastPoint[0] - this.startPoint[0]) || 20 < Math.abs(this.lastPoint[1] - this.startPoint[1])) this.selected = -1;
        -1 != this.selected && this.doFunc();
      },
      doFunc: function () {
        var a = this.items[this.selected];
        if (a.contains(lang.UNASSIGN_SUB_GROUP.replace(" {0}", ""))) {
          var b = activeSubGroup == this.target.getNameValue("subgroup");
          this.target.setNameValue("subgroup", -1);
          b && mixerWidget.showSG(activeSubGroup);
          updateByKey(this.target.name + "subgroup");
        }
        a.contains(lang.UNASSIGN_VCA) && (this.target.setNameValue("vca", -1), updateByKey(this.target.name + "vca"));
        var c = this.target;
        a.startsWith(lang.SET_OUTPUT_DELAY_LEFT)
          ? askForDelay(masterWidget, MAX_DELAY_OUTPUT, "delayL", lang.MASTER + " " + lang.OUTPUT_DELAY + " (" + lang.LEFT + ")")
          : a.startsWith(lang.SET_OUTPUT_DELAY_RIGHT)
            ? askForDelay(masterWidget, MAX_DELAY_OUTPUT, "delayR", lang.MASTER + " " + lang.OUTPUT_DELAY + " (" + lang.RIGHT + ")")
            : a.startsWith(lang.SET_OUTPUT_DELAY) && askForDelay(c, MAX_DELAY_OUTPUT, "delay", c.getName() + " " + lang.OUTPUT_DELAY);
        switch (a) {
          case lang.CLEAR_CPA:
            c.setNameValue("iosyscmd", "");
            c.setNameValue("iosysname", "");
            break;
          case lang.COLOR:
            clearModals();
            assignMenu = new ASSIGN_COLOR_MENU(this.target);
            return;
          case lang.LINK_TO_MASTER:
            c.setNameValue("link2master", 1);
            c.setNameValue("mix", getValue("m.mix"));
            regUpdate(c);
            break;
          case lang.UNLINK_FROM_MASTER:
            c.setNameValue("link2master", 0);
            regUpdate(c);
            break;
          case lang.EXCLUDE_FROM_MASTER:
            c.setNameValue("exclude", 1);
            regUpdate(c);
            break;
          case lang.SEND_TO_MASTER:
            c.setNameValue("exclude", 0);
            regUpdate(c);
            break;
          case lang.TOGGLE_DIM:
            setValue("m.dim", getValue("m.dim") ? 0 : 1);
            regUpdate(masterWidget);
            break;
          case lang.SWITCH_TO_MATRIX:
            c.setNameValue("matrix", 1);
            mode == E_MODE.AUX && auxWidget.upd2();
            break;
          case lang.SWITCH_TO_AUX:
            c.setNameValue("matrix", 0);
            mode == E_MODE.AUX && auxWidget.upd2();
            break;
          case lang.MASTER_PRESETS:
            clearModals();
            masterWidget.showPresets();
            return;
          case lang.SET_TO_ZERO_DB:
            c.setNameValue("mix", zeroDbPos);
            regUpdate(c);
            break;
          case lang.UNASSIGN_ME:
            settings.me.deleteItem(this.target.id);
            switch (this.target.getNameValue("stereoIndex")) {
              case 0:
                settings.me.deleteItem(this.target.id + 1);
                regUpdate(allStrips[this.target.id + 1]);
                break;
              case 1:
                settings.me.deleteItem(this.target.id - 1), regUpdate(allStrips[this.target.id - 1]);
            }
            settingsStorage.save();
            break;
          case lang.ASSIGN_ME:
            settings.me.push(this.target.id);
            switch (this.target.getNameValue("stereoIndex")) {
              case 0:
                settings.me.push(this.target.id + 1);
                regUpdate(allStrips[this.target.id + 1]);
                break;
              case 1:
                settings.me.push(this.target.id - 1), regUpdate(allStrips[this.target.id - 1]);
            }
            settingsStorage.save();
            break;
          case lang.UNASSIGN_MY_OUT:
            settings.meout = -1;
            settingsStorage.save();
            drawAll();
            break;
          case lang.ASSIGN_MY_OUT:
            settings.meout = this.target.subId;
            settingsStorage.save();
            drawAll();
            break;
          case lang.ASSIGN_SUB_GROUP.replace(" {0}", ""):
            clearModals();
            assignMenu = new ASSIGNSG_MENU(this.target);
            return;
          case lang.ASSIGN_VCA:
            clearModals();
            assignMenu = new ASSIGN_VCA_MENU(this.target);
            return;
          case lang.RENAME:
            callChannelRename();
            break;
          case lang.COPY_SETTINGS:
            this.target.copySettings();
            break;
          case lang.PASTE_SETTINGS:
            this.target.pasteSettings();
            break;
          case lang.RESET_CHANNEL:
            confOk.valueFunc = function () {
              var a = c.getNameValue("subgroup");
              c.reset();
              0 <= a && activeSubGroup == a && mixerWidget.showSG(activeSubGroup);
              mode == E_MODE.AUX && (auxWidget.onShow(), auxWidget.setMode(auxWidget.mode));
            };
            showConfBox(lang.RESET_CHANNEL);
            break;
          case lang.STEREO_LINK:
            this.target.setLinked(!0);
            mode == E_MODE.AUX && (auxWidget.onShow(), auxWidget.setMode(auxWidget.mode));
            mode == E_MODE.FXSENDS && (fxSendsWidget.onShow(), fxSendsWidget.setMode(auxWidget.mode));
            inView && (mixerWidget.arrangeStrips(), regUpdate(mixerWidget));
            break;
          case lang.DISABLE_STEREO_LINK:
            this.target.setLinked(!1);
            mode == E_MODE.AUX && (auxWidget.onShow(), auxWidget.setMode(auxWidget.mode));
            break;
          case lang.SUB_GROUP_SPREAD:
            mixerWidget.showSG(this.target.subId);
            break;
          case lang.VCA_GROUP_SPREAD:
            mixerWidget.showVCA(this.target.subId);
            break;
          case lang.SHOW_ALL_CHANNELS:
            mixerWidget.showAll();
            break;
          case lang.PLACE_AFTER_INPUTS:
            settingsStorage.set("mediaFirst", 0);
            mode == E_MODE.EDIT && editStripWidget.unStrip();
            mixerWidget.arrangeStrips("PLACE_AFTER_INPUTS");
            bottomWidget.upd();
            mode == E_MODE.EDIT && editStripWidget.setStrip();
            bottomWidget.gotoID2(selectedChannel);
            break;
          case lang.PLACE_BEFORE_INPUTS:
            settingsStorage.set("mediaFirst", 1);
            mode == E_MODE.EDIT && editStripWidget.unStrip();
            mixerWidget.arrangeStrips("PLACE_BEFORE_INPUTS");
            bottomWidget.upd();
            mode == E_MODE.EDIT && editStripWidget.setStrip();
            bottomWidget.gotoStart();
            break;
          case lang.CHANNEL_PRESETS:
            clearModals();
            mixerWidget.showPresets();
            return;
        }
        clearModals();
      },
      onDelete: function () {},
      calcGeometry: function () {
        this.x = this.target.globalX() - 20;
        0 > this.x && (this.x = 0);
        this.y = screenHeight - this.h - measures.bottomWidgetHeight;
      },
      paint: function () {
        var a = this.w,
          b = this.h,
          c = b - 20;
        ctx.fillStyle = "#111";
        ctx.strokeStyle = "#BBB";
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(14, 0);
        ctx.arcTo(a, 0, a, c, 14);
        ctx.arcTo(a, c, 0, c, 14);
        ctx.lineTo(this.poplineX + 20, c);
        ctx.lineTo(this.poplineX, b);
        ctx.lineTo(this.poplineX - 20, c);
        ctx.arcTo(0, c, 0, 0, 14);
        ctx.arcTo(0, 0, a, 0, 14);
        ctx.closePath();
        ctx.fill();
        ctx.stroke();
        c = ctx.createLinearGradient(0, 0, 0, this.h);
        c.addColorStop(0, "rgba(255,255,255,0.1)");
        c.addColorStop(0.2, "rgba(255,255,255,0)");
        c.addColorStop(1, "rgba(255,255,255,0)");
        ctx.fillStyle = c;
        ctx.fill();
        ctx.font = font.tabTextSel;
        ctx.textAlign = "center";
        ctx.fillStyle = this.titleColor;
        ctx.drawText(this.title, this.w / 2, 30, { max: this.w - 6, shadow: [color.black, 0, 1, 1] });
        ctx.fillStyle = "#f0f0f0";
        ctx.beginPath();
        ctx.roundRect(4, 50, a - 8, b - 50 - 40, 6);
        ctx.closePath();
        ctx.fill();
        ctx.fillStyle = "black";
        ctx.textAlign = "left";
        b = (this.rh / 2) | 0;
        ctx.textBaseline = "middle";
        ctx.setShadow(null);
        for (c = 0; c < this.items.length; c++)
          (ctx.fillStyle = this.colors[c] || color.black),
          this.selected == c && ((ctx.fillStyle = "rgba(0,0,0,0.1)"), ctx.fillRect(6, this.mstart + c * this.rh, a - 12, this.rh), (ctx.fillStyle = "red")),
            ctx.fillText(this.items[c], 12, this.mstart + c * this.rh + b, this.w - 18),
            (ctx.fillStyle = "rgba(0,0,0,0.2)"),
            ctx.fillRect(6, this.mstart + (c + 1) * this.rh, a - 12, 1);
      },
    });
    assignMenu = null;
    var ASSIGNSG_MENU = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(-1);
          this.widgetName = "ASSIGNSG_MENU";
          this.w = 220;
          this.h = 150;
          this.t = b.name;
          this.tar = b;
          this.text = lang.ASSIGN_SUB_GROUP.format("(" + this.tar.text + ")");
          this.init2();
          this.initWidgets();
          this.calcGeometry();
          regUpdate(this);
        },
        init2: function () {
          this.color = color.sub;
        },
        valueFunc: function (a) {
          setValue(this.t + "subgroup", a);
          activeSubGroup == a && mixerWidget.showSG(activeSubGroup);
          this.close();
        },
        initWidgets: function () {
          var a = 10,
            b = this,
            c = 0;
          this.b1 = new SButton(this);
          this.b1.idx = c++;
          this.b1.text = "1";
          this.b1.textColor = this.color;
          this.b1.font = "14pt open_sans_condensedbold";
          this.b1.setPos(a, 32);
          this.b1.setSize(60, 50);
          this.b1.onPress = function () {
            b.valueFunc(this.idx);
          };
          this.b2 = new SButton(this);
          this.b2.idx = c++;
          this.b2.text = "2";
          this.b2.textColor = this.color;
          this.b2.font = "14pt open_sans_condensedbold";
          this.b2.setPos((a += 70), 32);
          this.b2.setSize(60, 50);
          this.b2.onPress = function () {
            b.valueFunc(this.idx);
          };
          this.b3 = new SButton(this);
          this.b3.idx = c++;
          this.b3.text = "3";
          this.b3.textColor = this.color;
          this.b3.font = "14pt open_sans_condensedbold";
          this.b3.setPos((a += 70), 32);
          this.b3.setSize(60, 50);
          this.b3.onPress = function () {
            b.valueFunc(this.idx);
          };
          a = 10;
          this.b4 = new SButton(this);
          this.b4.idx = c++;
          this.b4.text = "4";
          this.b4.textColor = this.color;
          this.b4.font = "14pt open_sans_condensedbold";
          this.b4.setPos(a, 90);
          this.b4.setSize(60, 50);
          this.b4.onPress = function () {
            b.valueFunc(this.idx);
          };
          this.b5 = new SButton(this);
          this.b5.idx = c++;
          this.b5.text = "5";
          this.b5.textColor = this.color;
          this.b5.font = "14pt open_sans_condensedbold";
          this.b5.setPos((a += 70), 90);
          this.b5.setSize(60, 50);
          this.b5.onPress = function () {
            b.valueFunc(this.idx);
          };
          this.b6 = new SButton(this);
          this.b6.idx = c++;
          this.b6.text = "6";
          this.b6.textColor = this.color;
          this.b6.font = "14pt open_sans_condensedbold";
          this.b6.setPos((a += 70), 90);
          this.b6.setSize(60, 50);
          this.b6.onPress = function () {
            b.valueFunc(this.idx);
          };
          3 > curSetup.sub && this.b3.hide();
          4 > curSetup.sub && this.b4.hide();
          5 > curSetup.sub && this.b5.hide();
          6 > curSetup.sub && this.b6.hide();
        },
        calcGeometry: function () {
          this.x = ((screenWidth - this.w) / 2) | 0;
          this.y = ((screenHeight - this.h) / 2) | 0;
        },
        onDelete: function () {},
        paint: function () {
          ctx.fillStyle = color.eqBg2;
          ctx.fillRoundRect(0, 0, this.w, this.h, 10);
          var a = ctx.createLinearGradient(0, 0, this.w, this.h);
          a.addColorStop(0, "rgba(255,255,255,0)");
          a.addColorStop(0.2, "rgba(255,255,255,0)");
          a.addColorStop(0.5, "rgba(255,255,255,0.12)");
          a.addColorStop(0.8, "rgba(255,255,255,0)");
          a.addColorStop(1, "rgba(255,255,255,0)");
          ctx.fillStyle = a;
          ctx.fillRoundRect(0, 0, this.w, this.h, 10);
          ctx.roundRect(0, 0, this.w, this.h, 10);
          ctx.strokeStyle = "#333";
          ctx.lineWidth = 2;
          ctx.stroke();
          ctx.drawText(this.text, this.w / 2, 16, { max: this.w - 10, font: "13pt open_sans_condensedbold", color: this.color, shadow: Shadow.main, align: "center", valign: "middle" });
        },
      }),
      ASSIGN_VCA_MENU = Class.create(ASSIGNSG_MENU, {
        init2: function () {
          this.name = "ASSIGN_VCA_MENU";
          this.color = color.green;
          this.text = lang.ASSIGN_VCA + " (" + this.tar.text + ")";
        },
        valueFunc: function (a) {
          setValue(this.t + "vca", a);
          this.close();
        },
      }),
      ASSIGN_COLOR_MENU = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(-1);
          this.widgetName = "ASSIGN_COLOR_MENU";
          this.w = 210;
          this.h = 180;
          this.t = b.name;
          this.tar = b;
          this.text = lang.COLOR + " (" + this.tar.text + ")";
          this.init2();
          this.initWidgets();
          this.calcGeometry();
          regUpdate(this);
        },
        init2: function () {
          this.color = color.INPUT;
        },
        valueFunc: function (a) {
          setValue(this.t + "color", a);
          this.close();
        },
        initWidgets: function () {
          var a = this,
            b = 0,
            c = color.ARR;
          this.BUTTONS = [];
          for (var d = 0, f = 0, e = 0; e < c.length; e++) {
            var g = new Button(this);
            this.BUTTONS.push(g);
            g.idx = b++;
            g.text = "";
            0 == e && (g.text = lang.OFF);
            g.clr2 = g.clr1 = c[e] || "transparent";
            g.val = e;
            g.frame = !0;
            g.setPos(10 + 50 * d, 28 + 52 * f);
            g.setSize(40, 40);
            g.onPress = function () {
              a.valueFunc(this.val);
            };
            d++;
            4 == d && ((d = 0), f++);
          }
        },
        calcGeometry: function () {
          this.x = ((screenWidth - this.w) / 2) | 0;
          this.y = ((screenHeight - this.h) / 2) | 0;
        },
        onDelete: function () {},
        paint: function () {
          ctx.fillStyle = "#111";
          ctx.fillRoundRect(0, 0, this.w, this.h, 10);
          var a = ctx.createLinearGradient(0, 0, this.w, this.h);
          a.addColorStop(0, "rgba(255,255,255,0)");
          a.addColorStop(0.2, "rgba(255,255,255,0)");
          a.addColorStop(0.5, "rgba(255,255,255,0.15)");
          a.addColorStop(0.8, "rgba(255,255,255,0)");
          a.addColorStop(1, "rgba(255,255,255,0)");
          ctx.fillStyle = a;
          ctx.fillRoundRect(0, 0, this.w, this.h, 10);
          ctx.roundRect(0, 0, this.w, this.h, 10);
          ctx.strokeStyle = "#333";
          ctx.lineWidth = 2;
          ctx.stroke();
          ctx.drawText(this.text, this.w / 2, 14, { font: font.tabText, color: this.color, shadow: Shadow.main, align: "center", valign: "middle" });
        },
      });
    function hasHIZ(a) {
      switch (a.type) {
        case E_STRIP_TYPE.IN:
        case E_STRIP_TYPE.GAIN:
        case E_STRIP_TYPE.HW:
          break;
        default:
          return !1;
      }
      if (HAVE_ROUTING) {
        if (a.type == E_STRIP_TYPE.HW) return !!a.hiz;
        switch (a.getNameValue("src")) {
          case "hw.0":
          case "hw.1":
          case "hw.24":
          case "hw.25":
            return !0;
        }
      } else
        switch (a.subId) {
          case 0:
          case 1:
          case 24:
          case 25:
            return !0;
        }
      return !1;
    }
    function hasDigi(a) {
      switch (a.type) {
        case E_STRIP_TYPE.IN:
        case E_STRIP_TYPE.GAIN:
          break;
        default:
          return !1;
      }
      switch (a.subId) {
        case 0:
        case 1:
        case 24:
        case 25:
          return !0;
      }
      return !1;
    }
    var EDIT_PAGE = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "EDIT_PAGE";
          this.buttons = [];
          this.pages = [];
          this.mode = -1;
          this.color = color.white;
          this.lineOverGrad = null;
          this.arr = [];
          this.E_MODE = { digi: 0, eqch: 1, eqaux: 2, eqm: 3, gate: 4, dyn: 5, fx: 6, aux: 7, uix: 8, misc: 9 };
          this.initWidgets();
          this.setMode(0);
        },
        initWidgets: function () {
          this.stereo = new STEREOSEL(this);
          this.stereo.setPos(440, 3);
          this.pages.push(new DIGITECH(this));
          this.pages.push(new EQChannel(this));
          this.pages.push(new EQAux(this));
          this.pages.push(new EQMaster(this));
          this.pages.push(new GATE_PAGE(this));
          this.pages.push(new DYNSubPage(this));
          this.pages.push(new FX_SENDS_EDIT_PAGE(this));
          this.pages.push(new AUX_EDIT_PAGE(this));
          this.pages.push(new UIX_PAGE(this));
          this.pages.push(new ROUTING_EDIT_PAGE(this));
          var a = 0,
            b = new TabButton(this);
          b.textColor = b.color = "#A3A1A2";
          b.mode = a++;
          b.setImage(res.digitech_logo, 5, 8);
          b.setSize(112, 30);
          b.getState = function () {
            this.state = this.parent.mode == this.mode ? 1 : 0;
            this.it = 0 == selectedStrip.getNameValue("digitech.enabled");
          };
          this.buttons.push(b);
          var c = [lang.EQ, lang.EQ, lang.EQ, lang.GATE];
          c.push(HAVE_GATE ? lang.COMP : lang.DYN);
          c.push(lang.FX_SENDS, lang.AUX_SENDS);
          var d = [color.EQ, color.EQ, color.EQ, color.GATE, color.DYN, color.FX, color.AUX],
            f = ["#BF4545", "#BF4545", "#BF4545", color.GATE, color.DYN, color.FX, "#CCB337"];
          c.push("Ui X");
          d.push(color.orange);
          f.push(color.orange);
          HAVE_ROUTING && (c.push(lang.PATCHING), d.push(color.purple), f.push("#9A44AB"));
          for (var e = 0; e < f.length; e++) f[e] = LightenDarkenColor(f[e], 10);
          for (e = 0; e < c.length; e++) (b = new TabButton(this)), (b.color = d[e]), (b.textColor = f[e]), (b.mode = a++), (b.font = "13pt open_sans_condensedbold"), (b.text = c[e]), b.setSize(112, 30), this.buttons.push(b);
        },
        setMode: function (a) {
          if (this.mode != a)
            if (-1 == a) {
              for (var b = 0; b < this.pages.length; b++) this.pages[b].hide();
              regUpdate(this);
            } else if ("undefined" != typeof this.buttons && "undefined" != typeof this.buttons[a] && this.buttons[a].enabled) {
              this.mode = a;
              for (b = 0; b < this.pages.length; b++) this.pages[b].enabled && this.pages[b].hide();
              this.pages[a].show();
              this.color = this.buttons[a].color;
              topWidget.bEDIT.clr1 = this.buttons[a].color;
              regUpdate(topWidget);
              regUpdate(bottomWidget);
              regUpdate(this);
            }
        },
        nextMode: function () {
          for (var a = this.mode + 1; a < this.buttons.length; a++)
            if (this.buttons[a].enabled) {
              this.buttons[a].click();
              return;
            }
          for (a = 0; a < this.mode; a++) this.buttons[a].enabled && this.buttons[a].click();
        },
        showPresets: function () {
          this.pages[this.mode].showPresets && this.pages[this.mode].showPresets();
        },
        onShow: function () {
          this.upd();
        },
        upd: function () {
          if (null != selectedStrip) {
            var a = selectedStrip.stereo;
            a || (a = 1 == selectedStrip.getNameValue("stereo") || -1 != selectedStrip.getNameValue("stereoIndex"));
            for (var b = 0; b < this.buttons.length; b++) this.buttons[b].enabled = !1;
            selectedStrip.getNameValue("src");
            var c = [];
            switch (selectedStrip.type) {
              case E_STRIP_TYPE.IN:
              case E_STRIP_TYPE.LINEIN:
              case E_STRIP_TYPE.MEDIA:
                c = [this.E_MODE.eqch, this.E_MODE.dyn];
                HAVE_GATE && c.push(this.E_MODE.gate);
                c.push(this.E_MODE.fx, this.E_MODE.aux);
                hasDigi(selectedStrip) && c.push(this.E_MODE.digi);
                HAVE_ROUTING && selectedStrip.type != E_STRIP_TYPE.MEDIA && c.push(this.E_MODE.misc);
                break;
              case E_STRIP_TYPE.FX:
                c = [this.E_MODE.eqch, this.E_MODE.dyn];
                HAVE_GATE && c.push(this.E_MODE.gate);
                c.push(this.E_MODE.fx, this.E_MODE.aux);
                break;
              case E_STRIP_TYPE.SUB:
                c = [this.E_MODE.eqch, this.E_MODE.dyn];
                HAVE_GATE && c.push(this.E_MODE.gate);
                c.push(this.E_MODE.fx);
                break;
              case E_STRIP_TYPE.AUX:
                c = [this.E_MODE.eqaux, this.E_MODE.dyn];
                HAVE_GATE && c.push(this.E_MODE.gate);
                c.push(this.E_MODE.fx);
                break;
              case E_STRIP_TYPE.MASTER:
                (c = [this.E_MODE.eqm, this.E_MODE.dyn]), c.push(this.E_MODE.fx, this.E_MODE.aux);
            }
            for (b = 0; b < c.length; b++) this.buttons[c[b]].enabled = !0;
            0 == c.length
              ? this.setMode(-1)
              : (-1 == c.indexOf(this.mode) && this.setMode(c[0]),
                (this.arr = c),
                this.calcGeometry(),
              this.pages[this.mode].enabled || this.pages[this.mode].show(),
                this.pages[this.mode].onShow(),
                (this.stereo.enabled = !(920 > this.w && 6 < this.arr.length)),
              this.stereo.enabled && (this.stereo.enabled = a),
                regUpdate(this));
          }
        },
        calcGeometry: function () {
          this.x = editStripWidget.w;
          this.y = topWidget.h;
          this.w = screenWidth - this.x;
          masterWidget.enabled && (this.w -= masterWidget.w);
          fxoutWidget.enabled && (this.w -= fxoutWidget.w);
          this.h = screenHeight - this.y - bottomWidget.h;
          var a = 0,
            b = 0;
          this.needClip = 700 > this.w;
          for (var c = 0; c < this.buttons.length; c++) this.buttons[c].enabled && b++;
          (c = selectedStrip.stereo) || (c = 1 == selectedStrip.getNameValue("stereo") || -1 != selectedStrip.getNameValue("stereoIndex"));
          this.stereo.enabled = !(920 > this.w && 6 < this.arr.length);
          this.stereo.enabled && (this.stereo.enabled = c);
          this.stereo.x = this.w - this.stereo.w - 10;
          if (HAVE_ROUTING) {
            for (var b = 0, d = 112, c = 0; c < this.buttons.length; c++) this.buttons[c].enabled && b++;
            this.stereo.enabled && b++;
            807 > this.w && 6 < b && (d = 100);
            for (c = 1; c < this.buttons.length; c++) this.buttons[c].w = d;
          }
          b = 17;
          for (c = 0; c < this.buttons.length; c++) this.buttons[c].enabled && (this.buttons[c].setPos(b, 5), (b += this.buttons[c].w + 1), a++);
        },
        paint: function () {
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, 0, this.w, this.h);
          ctx.fillStyle = this.color;
          ctx.fillRect(0, this.h - 3, this.w, 3);
          ctx.fillRect(0, 35, this.w, 4);
          ctx.fillStyle = "#ff0";
          ctx.font = "20pt open_sans_condensedbold";
          ctx.textAlign = "center";
          ctx.fillText(lang.NO_CONTROLS_FOR_THIS_CHANNEL, (this.w / 2) | 0, (this.h / 2) | 0);
        },
      }),
      EDIT_STRIP = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "EDIT_STRIP";
          this.strip = this.buff = null;
          this.lastClickTime = -1;
          this.onLabel = !1;
        },
        onShow: function () {
          this.setStrip();
        },
        onHide: function () {
          this.unStrip();
        },
        setStrip: function () {
          null != this.strip && this.unStrip();
          -1 != selectedChannel &&
          ((this.strip = mixerWidget.strips[selectedChannel]),
            (this.strip.parent = this),
            (this.buff = [this.strip.x, this.strip.enabled, this.strip.lastInGroup, this.strip.firstInGroup]),
            (this.strip.x = 0),
            (this.strip.enabled = !0),
            (this.strip.lastInGroup = !0),
            (this.strip.firstInGroup = !0),
            this.strip.updateGeometry(),
            this.widgets.push(this.strip));
        },
        unStrip: function () {
          null != this.strip &&
          (this.widgets.pop(),
            (this.strip.parent = mixerWidget),
          this.buff && ((this.strip.x = this.buff[0]), (this.strip.enabled = this.buff[1]), (this.strip.lastInGroup = this.buff[2]), (this.strip.firstInGroup = this.buff[3])),
            (this.buff = this.strip = null));
        },
        calcGeometry: function () {
          this.x = 0;
          this.y = measures.topWidgetHeight;
          this.w = measures.mixerStripWidth;
          this.h = screenHeight - this.y - bottomWidget.h;
        },
        paint: function () {
          if (null != this.strip) {
            ctx.fillStyle = color.bg;
            ctx.fillRect(0, 0, this.w, this.h + bottomWidget.h);
            ctx.fillStyle = color.botBG;
            ctx.fillRect(0, 0, this.w, this.h);
            drawImage(res.stripLabel, 0, this.h);
            ctx.fillStyle = this.strip.color;
            ctx.fillRect(2, this.h, this.w - 4, bottomWidget.h - 2);
            ctx.font = font.botChLabel;
            ctx.textAlign = "center";
            var a = this.strip.getNameValue("color") || 0;
            a && ((ctx.fillStyle = 7 == a ? "rgba(255,255,255,0.1)" : "rgba(0,0,0,0.1)"), ctx.fillRect(2, this.h + 27, this.w - 4, 1), (ctx.fillStyle = color.ARR[a]), ctx.fillRect(2, this.h + 28, this.w - 4, 3));
            a = this.strip.getName();
            ctx.fillStyle = color.black;
            ctx.fillText(a, (this.w / 2 + 2) | 0, this.h + 24 + 1, this.w - 6);
            ctx.fillStyle = color.labelText;
            ctx.fillText(a, (this.w / 2) | 0, this.h + 24, this.w - 6);
          } else fillVertPattern(res.blStripTile, this.h), drawImage(res.blStripBottom, 0, this.h - res.blStripBottom.h()), drawImage(res.blStripLabel, 0, this.h), drawImage(res.blStripTop, 0, 0);
        },
      }),
      USB_SLOTS = 22,
      DAW_SLOTS = 32,
      CASC_SLOTS = 32,
      ROUTING_EDIT_PAGE = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "MISC_PAGE";
          this.needClip = !0;
          this.y = 40;
          this.enabled = !1;
          this.color = color.purple;
          this.inmode = this.scmode = 0;
          this.left = !0;
          this.offsetY = 0;
          this.hh = this.maxY = 900;
          this.needMoveEvt = this.needClip = !0;
          this.BUTTONS = [];
          this.BUTTONS2 = [];
          this.initWidgets();
        },
        onDown: function (a, b, c) {
          this.lastPressPoint = this.pressPoint;
          this.pressPoint = [a, b + this.offsetY];
        },
        onMove: function (a, b, c) {},
        onUp: function (a) {
          var b = Date.now(),
            c = Math.abs(this.lastPressPoint[0] - this.pressPoint[0]),
            d = Math.abs(this.lastPressPoint[1] - this.pressPoint[1]);
          2 < mouseTargets.length ||
          (isDefined(tHash[a]) && 2 < tHash[a].length) ||
          (30 > c && 30 > d && b - this.lastClickTime < DBL_CLK_TIME ? (this.onDouble(), (this.lastClickTime = b - DBL_CLK_TIME)) : (this.lastClickTime = b));
        },
        onDouble: function () {
          setMode(E_MODE.MIX);
        },
        setMode: function (a) {
          this.scmode = a;
          this.inmode = 0;
          this.sync();
          regUpdate(this);
        },
        setInsertMode: function (a) {
          this.scmode = 0;
          this.inmode = a;
          this.sync();
          regUpdate(this);
        },
        setLeft: function (a) {
          this.left = a;
          this.sync();
          regUpdate(this);
        },
        sync: function () {
          var a = 1 == this.inmode,
            b = selectedStrip.getNameValue(1 == this.scmode ? "scsrc" : "src"),
            c = 0;
          if (isString(b))
            switch (b.split(".")[0]) {
              case "hw":
              case "li":
                c = 0;
                break;
              case "ua":
              case "uc":
                c = 1;
                break;
              case "ub":
              case "ud":
                c = 2;
                break;
              case "cascade":
                c = 3;
                break;
              case "m":
              case "a":
              case "hp":
                c = 4;
                SHOW_WIP || (c = 3);
                break;
              default:
                c = 0;
            }
          if (a || !this.insource.enabled) c = 2;
          this.insource.state = c;
          CASCADE_MODE && (20 > selectedStrip.subId ? this.insource.setItems([lang.M_LOCAL, lang.M_USB_A, lang.M_USB_B]) : this.insource.setItems([lang.S_LOCAL, lang.S_USB_A, lang.S_USB_B]));
        },
        onShow: function () {
          this.inmode = 0;
          this.left = !0;
          this.sync();
        },
        calcGeometry: function () {
          this.w = this.parent.w - this.x;
          this.h = this.parent.h - this.y - 5;
          this.maxY = this.hh - this.h;
          0 > this.maxY && (this.maxY = 0);
          this.offsetY = bound(this.offsetY, 0, this.maxY);
        },
        initWidgets: function () {
          var a = this,
            b = 60,
            c = 0;
          this.clrArr = ["#d78c61", "#BCA633", "#458DC8"];
          this.overview = new MENUBUTTON(this);
          this.overview.text = lang.OVERVIEW;
          this.overview.setPos(15, 30);
          this.overview.setSize(86, 40);
          this.overview.onPress = function () {
            settingsWidget.setMode(4);
            setMode(E_MODE.SETTINGS);
          };
          this.insource = new SWITCHBOX(this);
          var b = [lang.LOCAL, lang.USB_A, lang.USB_B],
            d = 124,
            f = 207;
          IS_UI_24 && (SHOW_WIP && (b.push(lang.CASCADE), this.clrArr.push("#af56dc")), b.push(lang.MASTERS), this.clrArr.push("#d65959"), (d = 93), (f = 160), SHOW_WIP || (f = 207));
          this.insource.setItems(b);
          this.insource.setItemWidth(d);
          this.insource.setPos(f, 30);
          this.insource.h = 40;
          this.insource.colors = this.clrArr;
          this.insource.font = font.settingsLabel;
          this.insource.setState = function (b) {
            a.inmode && (b = 2);
            this.state = b;
          };
          this.insource.valueFunc = function () {
            regUpdate(a);
          };
          this.none = new CHECKBUTTON(this);
          this.none.setSize(86, 40);
          ROUTING_TEST_MODE && this.none.setPos(207, 30);
          this.none.text = lang.NONE;
          this.none.color = color.gray;
          this.none.textColor = color.gray;
          this.none.textColor2 = color.white;
          this.none.font = font.sans13pt;
          this.none.getState = function () {
            var b = "src";
            1 == a.scmode && (b = "scsrc");
            this.state = "none" == selectedStrip.getNameValue(b);
          };
          this.none.onToggleUp = function () {
            if (isMTKbusy()) showPopupMsg(lang.PATCHING_DURING_MTK, 1e3);
            else {
              var b = "src";
              1 == a.scmode && (b = "scsrc");
              selectedStrip.setNameValue(b, "none");
              regUpdate(a);
            }
          };
          this.none.onToggleDown = function () {
            isMTKbusy() ? showPopupMsg(lang.PATCHING_DURING_MTK, 1e3) : 1 == a.scmode && (selectedStrip.setNameValue("scsrc", "none"), regUpdate(a));
          };
          this.scheck = new CHECKBUTTON(this);
          this.scheck.setAnchors(687, 30);
          this.scheck.setSize(86, 40);
          this.scheck.text = formatButtonText(lang.SOUNDCHECK_ASSIGN);
          this.scheck.font = font.stripChannel;
          this.scheck.dy = 15;
          this.scheck.textColor = this.scheck.color = color.green;
          this.scheck.textColor2 = color.white;
          this.scheck.getState = function () {
            this.state = a.scmode;
            this.textColor = selectedStrip.getNameValue("scsrc") ? color.green : "#888";
          };
          this.scheck.onToggleUp = function () {
            a.setMode(1);
          };
          this.scheck.onToggleDown = function () {
            a.setMode(0);
          };
          b = 58;
          this.mnames = [];
          this.mkeys = [];
          this.mnames.push(lang.MASTER + " " + lang.L);
          this.mkeys.push("m.0");
          this.mnames.push(lang.MASTER + " " + lang.R);
          this.mkeys.push("m.1");
          for (d = 0; d < auxStrips.length; d++) this.mnames.push(lang.AUX + " " + (d + 1)), this.mkeys.push("a." + d);
          for (d = 0; 4 > d; d++) this.mnames.push(lang.HP_DSP + " " + ((d / 2 + 1) | 0) + (d % 2 ? " R" : " L")), this.mkeys.push("hp." + d);
          for (d = 0; 32 > d; d++)
            (f = new CHECKBUTTON(this)),
            0 == d % 8 && 0 != d && c++,
              f.setSize(86, 46),
              f.setPos(15 + 96 * (d - 8 * c), 86 + b * c),
              (f.idx = d),
              (f.idx_orig = d),
              (f.text = "" + (d + 1)),
              (f.textColor = color.white),
              (f.textColor2 = color.white),
              (f.font = font.sans13pt),
              (f.getState = function () {
                var b = a.insource.state;
                ROUTING_TEST_MODE && (b = a.insource.state ? 2 : 0);
                SHOW_WIP || 3 != b || (b = 4);
                var c = 1 == a.scmode;
                this.state = this.disabled = !1;
                this.idx = this.idx_orig;
                CASCADE_MODE && 20 <= selectedStrip.subId && 0 == b && (this.idx += 20);
                var d = "",
                  f = "";
                switch (b) {
                  case 0:
                    20 <= this.idx_orig ? ((d = lang.LINE_IN + " " + (this.idx_orig % 2 ? "R" : "L")), (f = "li"), (this.idx = this.idx_orig % 2)) : ((d = lang.INPUT + " " + ((this.idx_orig % 22) + 1)), (f = "hw"));
                    this.hidden = 22 <= this.idx_orig;
                    break;
                  case 1:
                    d = lang.SLOT + " " + (this.idx + 1);
                    f = "ua";
                    this.hidden = this.idx_orig >= USB_SLOTS;
                    selectedStrip.type == E_STRIP_TYPE.IN && 20 <= selectedStrip.subId && (this.disabled = !0);
                    break;
                  case 2:
                    d = lang.SLOT + " " + (this.idx + 1);
                    this.hidden = this.idx_orig >= DAW_SLOTS;
                    f = "ub";
                    break;
                  case 3:
                    d = lang.SLOT + " " + (this.idx + 1);
                    this.hidden = this.idx_orig >= CASC_SLOTS;
                    f = "cs";
                    break;
                  case 4:
                    if ((this.hidden = this.idx_orig >= a.mnames.length)) return;
                    var d = a.mnames[this.idx_orig],
                      m = a.mkeys[this.idx_orig].split("."),
                      f = m[0];
                    this.idx = m[1] | 0;
                }
                this.color = this.textColor = a.clrArr[a.insource.state];
                this.text = d;
                d = "src";
                c && (d = "scsrc");
                c = selectedStrip.getNameValue(d);
                if (isString(c)) {
                  c = c.split(".");
                  d = parseInt(c[1]);
                  m = -1;
                  switch (c[0]) {
                    case "hw":
                      m = E_CH_SRC_TYPE.HARDWARE;
                      break;
                    case "li":
                      m = E_CH_SRC_TYPE.HARDWARE;
                      break;
                    case "pl":
                      m = E_CH_SRC_TYPE.HARDWARE;
                      break;
                    case "ua":
                      m = E_CH_SRC_TYPE.USB_A;
                      break;
                    case "ub":
                      m = E_CH_SRC_TYPE.USB_B;
                      break;
                    case "uc":
                      m = E_CH_SRC_TYPE.USB_A;
                      break;
                    case "ud":
                      m = E_CH_SRC_TYPE.USB_B;
                      break;
                    case "cs":
                      m = E_CH_SRC_TYPE.OTHER;
                      break;
                    case "m":
                      m = E_CH_SRC_TYPE.USB_D;
                      break;
                    case "a":
                      m = E_CH_SRC_TYPE.USB_D;
                      break;
                    case "hp":
                      m = E_CH_SRC_TYPE.USB_D;
                  }
                  this.state = m == b && this.idx == d && f == c[0];
                }
              }),
              (f.onToggleUp = function () {
                if (isMTKbusy()) showPopupMsg(lang.PATCHING_DURING_MTK, 1e3);
                else {
                  var b = a.insource.state;
                  ROUTING_TEST_MODE && (b = a.insource.state ? 2 : 0);
                  SHOW_WIP || 3 != b || (b = 4);
                  var c = 1 == a.scmode,
                    d = "",
                    f = !0;
                  switch (b) {
                    case 0:
                      d = 20 <= this.idx_orig ? "li." : "hw.";
                      break;
                    case 1:
                      d = "ua.";
                      break;
                    case 2:
                      d = "ub.";
                      break;
                    case 3:
                      d = "cs.";
                      break;
                    case 4:
                      (d = a.mkeys[this.idx_orig]), (f = !1);
                  }
                  f && (d += this.idx);
                  selectedStrip.setNameValue(c ? "scsrc" : "src", d);
                  regUpdate(a);
                }
              }),
              (f.onToggleDown = function () {
                isMTKbusy()
                  ? showPopupMsg(lang.PATCHING_DURING_MTK, 1e3)
                  : 1 == a.scmode
                    ? (selectedStrip.setNameValue("scsrc", "none"), regUpdate(a))
                    : ROUTING_TEST_MODE && (selectedStrip.setNameValue("src", "none"), regUpdate(a));
              }),
              this.BUTTONS.push(f);
          c++;
          ROUTING_TEST_MODE || this.none.setPos(687, b * c + 96);
          this.reset = new MENUBUTTON(this);
          this.reset.text = lang.RESET;
          this.reset.setAnchors(15, b * c + 96, null, null);
          this.reset.color = color.purple;
          this.reset.w = 86;
          this.reset.h = 40;
          this.reset.onPress = function () {
            if (isMTKbusy()) showPopupMsg(lang.PATCHING_DURING_MTK, 1e3);
            else {
              var b = 1 == a.scmode,
                c = selectedStrip,
                d = c.subId;
              c.type == E_STRIP_TYPE.IN && (c.setNameValue("src", "hw." + c.subId), c.setNameValue("scsrc", ROUTING_TEST_MODE ? "ub." + c.subId : "ua." + c.subId));
              c.type == E_STRIP_TYPE.LINEIN && (c.setNameValue("src", "li." + c.subId), (d += 20), c.setNameValue("scsrc", ROUTING_TEST_MODE ? "ub." + d : "ua." + d));
              a.insource.state = b ? (ROUTING_TEST_MODE ? 2 : 1) : 0;
              regUpdate(a);
            }
          };
          this.hh = 86 + b * c + b - 10;
        },
        paint: function () {
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, this.offsetY, this.w, this.h);
          this.scmode && ((ctx.fillStyle = "rgba(0,255,0,0.1)"), ctx.fillRect(3, 3, this.w - 6, this.none.y + this.none.h + 3));
          this.inmode && ((ctx.fillStyle = "rgba(255,100,0,0.1)"), ctx.fillRect(9, this.offsetY + 75, 770, 231));
          ctx.textAlign = "center";
          ctx.font = font.settingsLabel;
          var a = lang.CHANNEL_SOURCE + ":";
          ctx.fillStyle = color.white;
          this.insource.enabled && ctx.fillText(a, this.insource.x + this.insource.w / 2, this.insource.y - 8);
        },
      });
    function isCascade() {
      return !0;
    }
    var UIX_PAGE = Class.create(Widget, {
      initialize: function ($super, b) {
        $super(b);
        this.widgetName = "UIX_PAGE";
        this.needClip = !0;
        this.y = 40;
        this.enabled = !1;
        this.color = color.orange;
        this.initWidgets();
      },
      onShow: function () {
        this.sync();
      },
      sync: function () {},
      initWidgets: function () {},
      calcGeometry: function () {
        this.w = this.parent.w - this.x;
        this.h = this.parent.h - this.y - 5;
      },
      paint: function () {
        ctx.fillStyle = "#0B0B0B";
        ctx.fillRect(0, this.offsetY, this.w, this.h);
      },
    });
    function formatValue(a, b, c, d, f) {
      d = d || !1;
      c = c || "";
      if (isDefined(f) && a <= f) return "-∞";
      b = "" + precision(a, b) + c;
      d && 0 < a && (b = "+" + b);
      return b;
    }
    function VtoGATE_THRESH(a) {
      return 96 * a - 90;
    }
    function VtoGATE_ATTACK(a) {
      return 1 * Math.pow(400, desqr(a));
    }
    function VtoGATE_RELEASE(a) {
      return 5 * Math.pow(400, desqr(a));
    }
    function VtoGATE_HOLD(a) {
      return 1 * Math.pow(2e3, desqr(a));
    }
    function VtoGATE_DEPTH(a) {
      return 60 * a - 60;
    }
    var GATE_PAGE = Class.create(Widget, {
        initialize: function ($super, b, c) {
          $super(b);
          this.widgetName = "GATE_PAGE";
          this.y = 40;
          this.enabled = !1;
          this.color = color.GATE;
          this.condensed = c || !1;
          this.initWidgets();
        },
        calcGeometry: function () {
          this.w = this.parent.w - this.x;
          this.h = this.parent.h - this.y - 5;
        },
        onShow: function () {
          this.syncSliders();
        },
        onDown: function (a, b) {
          this.lastPressPoint = this.pressPoint;
          this.pressPoint = [a, b];
        },
        onUp: function (a) {
          var b = Date.now(),
            c = Math.abs(this.lastPressPoint[0] - this.pressPoint[0]),
            d = Math.abs(this.lastPressPoint[1] - this.pressPoint[1]);
          2 < mouseTargets.length ||
          (isDefined(tHash[a]) && 2 < tHash[a].length) ||
          (30 > c && 30 > d && b - this.lastClickTime < DBL_CLK_TIME ? (this.onDouble(), (this.lastClickTime = b - DBL_CLK_TIME)) : (this.lastClickTime = b));
        },
        onDouble: function () {
          setMode(E_MODE.MIX);
        },
        syncSliders: function () {
          this.enabled &&
          null != selectedStrip &&
          ((this.keyPrefix = selectedStrip.name),
            this.led_thresh.setKeyPrefix(this.keyPrefix),
            this.led_attack.setKeyPrefix(this.keyPrefix),
            this.led_release.setKeyPrefix(this.keyPrefix),
            this.led_hold.setKeyPrefix(this.keyPrefix),
            this.led_depth.setKeyPrefix(this.keyPrefix),
            this.slTHRESH.setKeyPrefix(this.keyPrefix),
            this.slATTACK.setKeyPrefix(this.keyPrefix),
            this.slRELEASE.setKeyPrefix(this.keyPrefix),
            this.slHOLD.setKeyPrefix(this.keyPrefix),
            this.slDEPTH.setKeyPrefix(this.keyPrefix),
            this.bypass.setKeyPrefix(this.keyPrefix),
            this.vuIN.reset(),
            this.vuOUT.reset());
        },
        initWidgets: function () {
          var a = this,
            b = 32,
            c = 30;
          this.condensed && ((b = 12), (c = 10));
          this.gate = new GATE_WIDGET(this);
          this.gate.setAnchors(40, b, 396, 86);
          this.vuIN = new DYNVU(this);
          this.vuIN.setAnchors(null, c, 370, 86);
          this.vuIN.needGate = !0;
          this.vuOUT = new DYNVU(this);
          this.vuOUT.setAnchors(null, c, 346, 86);
          b = 90;
          c = 46;
          this.condensed && ((b = 44), (c = 0));
          this.led_thresh = new FXLEDPlain(this);
          this.led_thresh.setAnchors(null, null, 336, 13);
          this.led_thresh.keyPart = "gate.thresh";
          this.led_thresh.label = lang.THRESHOLD;
          this.led_thresh.sign = lang.DB;
          this.led_thresh.formatValue = function (a) {
            return formatValue(VtoGATE_THRESH(a), 1, "", !1, -90);
          };
          this.slTHRESH = new EQHSlider2(this);
          this.slTHRESH.setAnchors(16, null, 416, -1);
          this.slTHRESH.keyPart = "gate.thresh";
          this.slTHRESH.defaultValue = -1;
          this.slTHRESH.valueFunc = function () {
            regUpdate(a.gate);
            regUpdate(a.vuIN);
            regUpdate(a.led_thresh);
            selectedStrip.setNameValue("gate.prmod", 1);
          };
          this.led_attack = new FXLEDPlain(this);
          this.led_attack.setAnchors(null, c, 261, null);
          this.led_attack.w = 60;
          this.led_attack.keyPart = "gate.attack";
          this.led_attack.label = lang.ATTACK;
          this.led_attack.sign = lang.MS;
          this.led_attack.formatValue = function (a) {
            return formatValue(VtoGATE_ATTACK(a), 0);
          };
          this.slATTACK = new EQSlider(this);
          this.slATTACK.setAnchors(null, b, 267, 87);
          this.slATTACK.keyPart = "gate.attack";
          this.slATTACK.textBot = lang.ATTACK;
          this.slATTACK.mV = [1, findV(VtoGATE_ATTACK, 10), findV(VtoGATE_ATTACK, 50), findV(VtoGATE_ATTACK, 100), findV(VtoGATE_ATTACK, 200), findV(VtoGATE_ATTACK, 300), 0];
          this.slATTACK.valueFunc = function () {
            regUpdate(a.led_attack);
            0 == selectedStrip.getNameValue("gate.prmod") && (selectedStrip.setNameValue("gate.prmod", 1), regUpdate(a.gate));
          };
          this.led_release = new FXLEDPlain(this);
          this.led_release.setAnchors(null, c, 95, null);
          this.led_release.w = 60;
          this.led_release.keyPart = "gate.release";
          this.led_release.label = lang.RELEASE;
          this.led_release.sign = lang.MS;
          this.led_release.formatValue = function (a) {
            return formatValue(VtoGATE_RELEASE(a), 0);
          };
          this.slRELEASE = new EQSlider(this);
          this.slRELEASE.setAnchors(null, b, 101, 87);
          this.slRELEASE.keyPart = "gate.release";
          this.slRELEASE.textBot = lang.RELEASE;
          this.slRELEASE.mV = [1, findV(VtoGATE_RELEASE, 10), findV(VtoGATE_RELEASE, 50), findV(VtoGATE_RELEASE, 100), findV(VtoGATE_RELEASE, 200), findV(VtoGATE_RELEASE, 500), findV(VtoGATE_RELEASE, 1e3), 0];
          this.slRELEASE.valueFunc = function () {
            regUpdate(a.led_release);
            0 == selectedStrip.getNameValue("gate.prmod") && (selectedStrip.setNameValue("gate.prmod", 1), regUpdate(a.gate));
          };
          this.led_hold = new FXLEDPlain(this);
          this.led_hold.setAnchors(null, c, 178, null);
          this.led_hold.w = 60;
          this.led_hold.keyPart = "gate.hold";
          this.led_hold.label = lang.HOLD;
          this.led_hold.sign = lang.MS;
          this.led_hold.formatValue = function (a) {
            return formatValue(VtoGATE_HOLD(a), 0);
          };
          this.slHOLD = new EQSlider(this);
          this.slHOLD.setAnchors(null, b, 184, 87);
          this.slHOLD.keyPart = "gate.hold";
          this.slHOLD.textBot = lang.HOLD;
          this.slHOLD.mV = [1, findV(VtoGATE_HOLD, 10), findV(VtoGATE_HOLD, 100), findV(VtoGATE_HOLD, 200), findV(VtoGATE_HOLD, 500), findV(VtoGATE_HOLD, 1e3), 0];
          this.slHOLD.valueFunc = function () {
            regUpdate(a.led_hold);
            0 == selectedStrip.getNameValue("gate.prmod") && (selectedStrip.setNameValue("gate.prmod", 1), regUpdate(a.gate));
          };
          this.led_depth = new FXLEDPlain(this);
          this.led_depth.setAnchors(null, c, 12, null);
          this.led_depth.w = 60;
          this.led_depth.keyPart = "gate.depth";
          this.led_depth.label = lang.DEPTH;
          this.led_depth.sign = lang.DB;
          this.led_depth.formatValue = function (a) {
            return formatValue(VtoGATE_DEPTH(a), 1, "", !1, -60);
          };
          this.slDEPTH = new EQSlider(this);
          this.slDEPTH.setAnchors(null, b, 18, 87);
          this.slDEPTH.keyPart = "gate.depth";
          this.slDEPTH.textBot = lang.DEPTH;
          this.slDEPTH.mV = [1, findV(VtoGATE_DEPTH, -10), findV(VtoGATE_DEPTH, -20), findV(VtoGATE_DEPTH, -30), findV(VtoGATE_DEPTH, -40), findV(VtoGATE_DEPTH, -50), 0];
          this.slDEPTH.valueFunc = function () {
            regUpdate(a.gate);
            regUpdate(a.led_depth);
            0 == selectedStrip.getNameValue("gate.prmod") && selectedStrip.setNameValue("gate.prmod", 1);
          };
          this.condensed &&
          (this.slATTACK.setFader(res.BMSL_SILVER, 18, 0, 6),
            this.slRELEASE.setFader(res.BMSL_SILVER, 18, 0, 6),
            this.slHOLD.setFader(res.BMSL_SILVER, 18, 0, 6),
            this.slDEPTH.setFader(res.BMSL_SILVER, 18, 0, 6),
            this.slTHRESH.setFader(res.BMSL_SILVER_V, 18, 0, 6));
          this.bypass = new CheckBox(this);
          this.bypass.keyPart = "gate.bypass";
          this.bypass.setAnchors(null, null, 18, 10);
          this.bypass.setImages(res.bBYPASS_OFF, res.bBYPASS_ON);
          this.bypass.onToggleUp = function () {
            regUpdate(a);
          };
          this.bypass.onToggleDown = function () {
            regUpdate(a);
          };
          this.reset = new Button(this);
          this.reset.setAnchors(null, null, 244, 10);
          this.reset.setImages(res.bRESET_OFF, res.bRESET_ON);
          this.reset.valueFunc = function () {
            a.doReset();
          };
          this.preset = new MENUBUTTON(this);
          this.preset.setSize(130, 29);
          this.preset.setAnchors(null, 10, 10, null);
          this.preset.text = lang.PRESETS;
          this.preset.color = color.green;
          this.preset.onPress = function () {
            a.showPresets();
          };
          this.condensed && this.preset.hide();
        },
        resetVUs: function () {
          this.vuIN.reset();
          this.vuOUT.reset();
        },
        doReset: function () {
          resetGate(selectedChID);
          regUpdate(this);
        },
        showPresets: function () {
          this.menu = new PRESET_MENU2(null, "gate", this, this.parent.color);
          regUpdate(this.menu);
        },
        savePreset: function (a) {
          var b = [".gate.thresh", ".gate.attack", ".gate.release", ".gate.hold", ".gate.depth"],
            c = {},
            d = this.keyPrefix.split(".");
          key = d[0] + "." + d[1];
          for (d = 0; d < b.length; d++) c[b[d]] = getValue(key + b[d]);
          selectedStrip.setNameValue("gate.prmod", 0);
          selectedStrip.setNameValue("gate.prname", a || "");
          return c;
        },
        loadPreset: function (a, b) {
          var c = selectedStrip.name.slice(0, -1);
          applyPreset(c, a);
          selectedStrip.setNameValue("gate.prmod", 0);
          selectedStrip.setNameValue("gate.prname", b || "");
          regUpdate(this);
          return !0;
        },
        paint: function () {
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, 0, this.w, this.h);
          this.condensed || drawImage(res.dbx, this.preset.x - 48, 13);
          var a = 10;
          this.condensed && (a = 0);
          ctx.fillStyle = "#101115";
          ctx.fillRect(16, a, this.w - 16 - 335, this.h - a - 60);
          ctx.translate(16, a);
          ctx.fillStyle = color.grad1;
          ctx.fillRect(1, 0, this.w - 16 - 335 - 2, 7);
          ctx.translate(-16, -a);
          ctx.textAlign = "center";
          ctx.font = "10px open_sans_condensedbold";
          ctx.fillStyle = "#747577";
          ctx.fillText("IN", this.vuIN.x + 4, this.vuIN.y + this.vuIN.h + 15);
          ctx.fillText("OUT", this.vuOUT.x + 4, this.vuOUT.y + this.vuOUT.h + 15);
          var a = this.gate.h,
            b = this.gate.w,
            c = b / 96,
            d = a / 96;
          ctx.font = font.eqMarks;
          ctx.fillStyle = color.graphMarks;
          var f = "-90 -80 -70 -60 -50 -40 -30 -20 -10 0 +6".split(" ");
          ctx.save();
          ctx.translate(this.gate.x, this.gate.y);
          ctx.textAlign = "left";
          ctx.fillText("-90", 0, a + 15);
          ctx.fillText("+6", b - 10, a + 15);
          ctx.textAlign = "center";
          for (var b = 1, e = 10; 90 >= e; e += 10) ctx.fillText(f[b++], c * e, a + 15);
          b = 1;
          ctx.textAlign = "right";
          ctx.fillText("-90", -5, a - 2);
          ctx.fillText("+6", -5, this.condensed ? 4 : 99);
          for (e = 10; 90 >= e; e += 10) ctx.fillText(f[b++], -5, a - d * e + 4);
          ctx.restore();
        },
      }),
      GATE_WIDGET = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "GATE_WIDGET";
          this.needMoveEvt = this.needClip = !0;
          this.grad = null;
          this.bypass = !1;
          this.cachedBgBypass = this.cachedBg = null;
          this.cachedBgW = this.cachedBgH = 0;
          this.lineColor = "#5ada72";
          this.gradColor1 = "#0a3a24";
          this.gradColor2 = "#00eb58";
          this.touchRadius = 32;
          this.idx = 2;
          this.showPreset = !0;
          this.lastClickIdx = -1;
          this.lastClickPos = [-1, -1];
          this.clickPos = [-1, -1];
          this.lastClickTime = -1;
          this.lastP = !1;
        },
        calcGeometry: function () {
          var a = 0 < this.w ? this.w : 1,
            b = 0 < this.h ? this.h : 1;
          this.grad = ctx.createRadialGradient(a / 2, -10, a / 10, a / 2, -10, a / 2 + 10);
          this.grad.addColorStop(0, "rgba(255,255,255,0.2)");
          this.grad.addColorStop(1, "rgba(255,255,255,0)");
          this.grad_active = ctx.createLinearGradient(0, b, a / 2, 0);
          this.grad_active.addColorStop(0, this.gradColor2);
          this.grad_active.addColorStop(1, this.gradColor1);
          this.grad_bypass = ctx.createLinearGradient(0, b, a / 2, 0);
          this.grad_bypass.addColorStop(0, "#A0A0A0");
          this.grad_bypass.addColorStop(1, "#505050");
        },
        onDown: function (a, b, c) {
          if (!this.pressed) {
            a -= this.globalX();
            b -= this.globalY();
            this.clickPos = [a, b];
            this.touchID = c;
            this.pressed = !1;
            this.delta = [0, 0];
            c = this.w;
            var d = this.h,
              f = this.h / 96,
              e = selectedStrip.getNameValue("gate.thresh"),
              g = selectedStrip.getNameValue("gate.depth");
            c *= e;
            d *= 1 - e;
            f = bound(d + -(60 * g - 60) * f, d, this.h - 7);
            g = this.touchRadius + 5;
            e = this.touchRadius + 5;
            if (20 > c || c > this.w - 20 || 20 > d || d > this.h - 20) g = this.touchRadius + 14;
            if (20 > c || c > this.w - 20 || 20 > f || f > this.h - 20) e = this.touchRadius + 14;
            isInCircle(c, d, g, a, b) ? ((this.idx = 0), (this.delta = [c - a, d - b]), (this.pressed = !0)) : isInCircle(c, f, e, a, b) && ((this.idx = 1), (this.delta = [c - a, f - b]), (this.pressed = !0));
            regUpdate(this);
          }
        },
        onMove: function (a, b, c) {
          if (this.pressed && this.touchID == c) {
            a += this.delta[0];
            b += this.delta[1];
            a = bound(a - this.globalX(), 0, this.w);
            b = bound(b - this.globalY(), 0, this.h);
            var d = this.h;
            c = this.h / 96;
            var f = selectedStrip.getNameValue("gate.thresh");
            selectedStrip.getNameValue("gate.depth");
            d *= 1 - f;
            switch (this.idx) {
              case 0:
                a = bound(a / this.w, 0, 1);
                selectedStrip.setNameValue("gate.thresh", a);
                regUpdate(this.parent);
                break;
              case 1:
                (a = b > this.h - 4 ? 0 : (60 - bound(b - d, 0, this.h - d) / c) / 60), (a = bound(a, 0, 1)), selectedStrip.setNameValue("gate.depth", a), regUpdate(this.parent);
            }
            regUpdate(this);
          }
        },
        onUp: function (a) {
          if (this.touchID == a) {
            this.delta = [0, 0];
            a = Date.now();
            var b = Math.abs(this.lastClickPos[0] - this.clickPos[0]),
              c = Math.abs(this.lastClickPos[1] - this.clickPos[1]);
            a - this.lastClickTime < DBL_CLK_TIME && 30 > b && 30 > c && this.lastClickIdx == this.idx && this.lastP == !this.pressed && setMode(E_MODE.MIX);
            this.moved || (this.lastClickTime = a);
            this.lastClickPos = this.clickPos;
            this.lastClickIdx = this.idx;
            this.lastP = !this.peakGrab;
            this.pressed = !1;
            this.touchID = -1;
          }
        },
        drawCircle: function (a, b, c, d, f) {
          d = d || "#fff";
          c = c || !1;
          ctx.lineWidth = c ? 3 : 2;
          ctx.fillStyle = d;
          ctx.strokeStyle = d;
          this.bypass && ((ctx.fillStyle = "rgba(255,255,255,0.4)"), (ctx.strokeStyle = "rgba(255,255,255,0.3)"));
          ctx.beginPath();
          ctx.arc(a, b, 13, 0, 2 * Math.PI);
          ctx.fill();
          ctx.beginPath();
          ctx.arc(a, b, this.touchRadius + 0, 0, 2 * Math.PI);
          ctx.globalAlpha = 0.38;
          ctx.fill();
          ctx.globalAlpha = 1;
          c && ctx.stroke();
          ctx.drawText(f, a, b, { align: "center", valign: "middle", font: "bold 14px open_sans_condensedbold", color: "#f0f0f0", shadow: ["#060606", 0, 1, 1] });
        },
        paint: function () {
          ctx.shadowColor = "transparent";
          var a = selectedStrip.getNameValue("gate.bypass"),
            b = selectedStrip.getNameValue("gate.enabled"),
            c = selectedStrip.getNameValue("gate.thresh"),
            d = selectedStrip.getNameValue("gate.depth");
          (this.cachedBgW == this.w && this.cachedBgH == this.h) || this.cachePaint();
          ctx.drawImage(this.cachedBg, 0, 0, this.w, this.h);
          var f = this.w,
            e = this.h,
            g = this.w / 96,
            h = this.h / 96;
          !a && b ? ((ctx.fillStyle = this.grad_active), (ctx.strokeStyle = this.lineColor)) : ((ctx.fillStyle = this.grad_bypass), (ctx.strokeStyle = "#555"));
          ctx.lineWidth = 2;
          ctx.lineCap = "round";
          var k = c * f,
            b = c * e,
            g = -(60 * d - 60) * g,
            h = -(60 * d - 60) * h;
          ctx.beginPath();
          0.001 < d ? (ctx.moveTo(g, e), ctx.lineTo(k, e - b + h)) : ctx.moveTo(k, e);
          ctx.lineTo(k, e - b);
          ctx.lineTo(f, 0);
          ctx.stroke();
          ctx.lineTo(f, e);
          ctx.closePath();
          ctx.globalAlpha = 0.4;
          ctx.fill();
          ctx.globalAlpha = 1;
          k = c * f;
          c = (1 - c) * e;
          g = k;
          b = e - b + h;
          k = bound(k, 7, this.w - 7);
          c = bound(c, 7, this.h - 7);
          g = bound(g, 7, this.w - 7);
          b = bound(b, c, this.h - 7);
          this.drawCircle(g, b, 1 == this.idx, a ? "#666" : 1e-4 > d ? "#8a8" : "#00eb58", "D");
          this.drawCircle(k, c, 0 == this.idx, a ? "#666" : "#00eb58", "T");
          ctx.lineWidth = 1;
          ctx.strokeStyle = "#222";
          ctx.strokeRect(0.5, 0.5, f - 1, e - 1);
          this.showPreset &&
          ((a = 1 == selectedStrip.getNameValue("gate.prmod")),
            (d = selectedStrip.getNameValue("gate.prname")),
            (ctx.textAlign = "left"),
            (ctx.fillStyle = a ? "#444" : color.green),
            (ctx.font = "18px open_sans_condensedbold"),
            ctx.fillText(d, 4, 18, this.w - 10));
        },
        cachePaint: function () {
          null != this.cachedBg && delete this.cachedBg;
          this.cachedBg = document.createElement("canvas");
          var a = this.cachedBg.getContext("2d");
          isRetina ? ((this.cachedBg.width = 2 * this.w), (this.cachedBg.height = 2 * this.h), a.scale(2, 2)) : ((this.cachedBg.width = this.w), (this.cachedBg.height = this.h));
          var b = this.w,
            c = this.h,
            d = this.w / 96,
            f = this.h / 96;
          a.fillStyle = "#0A0B0C";
          a.fillRect(0, 0, b, c);
          isSmall || ((a.fillStyle = this.grad), a.fillRect(0, 0, b, c));
          a.strokeStyle = "rgba(255,255,255,0.04)";
          a.lineWidth = 1;
          a.beginPath();
          for (var e = 0; 90 >= e; e += 10) a.moveTo(((d * e) | 0) + 0.5, 0), a.lineTo(((d * e) | 0) + 0.5, c), a.moveTo(0, ((c - f * e) | 0) + 0.5), a.lineTo(b, ((c - f * e) | 0) + 0.5);
          a.stroke();
          a.lineWidth = 1;
          a.strokeStyle = "#222";
          a.strokeRect(0.5, 0.5, b - 1, c - 1);
          this.cachedBgW = this.w;
          this.cachedBgH = this.h;
        },
      }),
      DIGITECH = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "DIGITECH";
          this.y = this.x = 0;
          this.bgColor = color.eqBg;
          this.bgColor2 = "#000";
          this.setAnchors(0, 40, 0, 5);
          this.needClip = !0;
          this.color = color.DIGI;
          this.mode = 0;
          this.initWidgets();
          this.PEDALS[0].onDown();
        },
        onShow: function () {
          this.connectKeys();
        },
        connectKeys: function () {
          var a = selectedStrip.name;
          this.SWITCHER.setKey(a + "digitech.enabled");
          HAVE_ROUTING || this.hiz.setKey(a + "hiz", !0);
          this.sl1.setKey(a + "digitech.gain");
          this.sl2.setKey(a + "digitech.level");
          this.sl3.setKey(a + "digitech.bass");
          this.sl4.setKey(a + "digitech.mid");
          this.sl5.setKey(a + "digitech.treble");
          this.led1.setKey(a + "digitech.gain");
          this.led2.setKey(a + "digitech.level");
          this.led3.setKey(a + "digitech.bass");
          this.led4.setKey(a + "digitech.mid");
          this.led5.setKey(a + "digitech.treble");
        },
        onDown: function (a, b) {},
        setMode: function (a) {
          this.mode = a;
          regUpdate(this);
        },
        initWidgets: function () {
          var a = this,
            b = this.parent,
            c = 10;
          this.SWITCHER = new SWITCHBOX(this);
          this.SWITCHER.setItems([lang.OFF, lang.ON]);
          this.SWITCHER.setAnchors(null, c, 10, null);
          this.SWITCHER.valueFunc = function () {
            regUpdate(b);
          };
          this.hiz = new CHECKBUTTON(this);
          this.hiz.setAnchors(null, c, 160, null);
          this.hiz.w = 50;
          this.hiz.text = lang.HI_Z;
          this.hiz.color = this.hiz.textColor = color.yellow;
          this.hiz.textColor2 = color.white;
          this.hiz.onToggleUp = function () {
            1 == selectedStrip.getNameValue("phantom") && (selectedStrip.setNameValue("phantom", 0), blockStrip(selectedStrip.id, PHANTOM_OFF_DELAY));
          };
          if (HAVE_ROUTING) {
            this.hiz.regKey("i.0.src");
            this.hiz.regKey("i.1.src");
            for (var d = 0; d < gainStrips2.length; d++) this.hiz.regKey(gainStrips2[d].gainName + "hiz");
            this.hiz.onToggleUp = function () {};
            this.hiz.getState = function () {
              this.state = 0;
              this.disabled = !hasHIZ(selectedStrip);
              if (!this.disabled) {
                var a = selectedStrip.getNameValue("src");
                this.state = getValue(a + ".hiz");
              }
            };
            this.hiz.onToggle = function () {
              var a = gainStrips[selectedStrip.subId];
              a.updGain();
              a.hiz.enabled && a.hiz.doClick();
            };
          }
          this.preset = new MENUBUTTON(this);
          this.preset.setSize(130, 30);
          this.preset.text = lang.PRESETS;
          this.preset.setAnchors(null, c, 262, null);
          this.preset.onPress = function () {
            a.showPresets();
          };
          this.PEDALS = [];
          c = [
            {
              name: "FX 1 REVERB",
              color: color.blue,
              regKeys: ["f.0.fxtype"],
              getState: function () {
                this.text = fxStrips[0].getName();
                this.state = selectedStrip.getNameValue("fx.0.mute") ? 0 : 1;
                1 == this.state && (this.state = 0.001 < selectedStrip.getNameValue("fx.0.value"));
              },
              func: function () {
                a.l1.hide();
                a.s1.hide();
                a.l2.show();
                a.s2.show();
                a.l2.label = lang.FX_SEND;
                a.l2.sign = lang.DB;
                a.l2.formatValue = VtoDB2;
                a.l2.setKey(selectedStrip.name + "fx.0.value");
                a.s2.setKey(selectedStrip.name + "fx.0.value");
                var b = this;
                a.s2.valueFunc = function () {
                  regUpdate(a.l2);
                  regUpdate(b);
                };
                a.s2.dbMarks = !0;
                a.s2.fader = res.eqVFaderBlue;
                a.s2.maxValue = 1;
                a.l3.hide();
                a.s3.hide();
                a.l4.hide();
                a.s4.hide();
                a.l5.hide();
                a.s5.hide();
                a.setMode(this.idx);
              },
            },
          ];
          2 <= curSetup.fx &&
          c.push({
            name: "FX 2",
            color: color.orange,
            regKeys: ["f.1.fxtype"],
            getState: function () {
              this.text = fxStrips[1].getName();
              this.state = selectedStrip.getNameValue("fx.1.mute") ? 0 : 1;
              1 == this.state && (this.state = 0.001 < selectedStrip.getNameValue("fx.1.value"));
            },
            func: function () {
              a.l2.show();
              a.s2.show();
              a.l2.label = lang.FX_SEND;
              a.l2.sign = lang.DB;
              a.l2.formatValue = VtoDB2;
              a.l2.setKey(selectedStrip.name + "fx.1.value");
              a.s2.setKey(selectedStrip.name + "fx.1.value");
              a.s2.dbMarks = !0;
              a.s2.fader = res.eqVFaderOrange;
              var b = this;
              a.s2.valueFunc = function () {
                regUpdate(a.l2);
                regUpdate(b);
              };
              a.l1.hide();
              a.s1.hide();
              a.l3.hide();
              a.s3.hide();
              a.l4.hide();
              a.s4.hide();
              a.l5.hide();
              a.s5.hide();
              a.setMode(this.idx);
            },
          });
          3 <= curSetup.fx &&
          c.push({
            name: "FX 3",
            color: color.purple,
            regKeys: ["f.2.fxtype"],
            getState: function () {
              this.text = fxStrips[2].getName();
              this.state = selectedStrip.getNameValue("fx.2.mute") ? 0 : 1;
              1 == this.state && (this.state = 0.001 < selectedStrip.getNameValue("fx.2.value"));
            },
            func: function () {
              a.l2.show();
              a.s2.show();
              a.l2.label = lang.FX_SEND;
              a.l2.sign = lang.DB;
              a.l2.formatValue = VtoDB2;
              a.l2.setKey(selectedStrip.name + "fx.2.value");
              a.s2.setKey(selectedStrip.name + "fx.2.value");
              a.s2.dbMarks = !0;
              a.s2.fader = res.eqVFaderPurple;
              a.s2.maxValue = 1;
              var b = this;
              a.s2.valueFunc = function () {
                regUpdate(a.l2);
                regUpdate(b);
              };
              a.l1.hide();
              a.s1.hide();
              a.l3.hide();
              a.s3.hide();
              a.l4.hide();
              a.s4.hide();
              a.l5.hide();
              a.s5.hide();
              a.setMode(this.idx);
            },
          });
          4 <= curSetup.fx &&
          c.push({
            name: "FX 4",
            regKeys: ["f.3.fxtype"],
            color: color.green,
            getState: function () {
              this.text = fxStrips[3].getName();
              this.state = selectedStrip.getNameValue("fx.3.mute") ? 0 : 1;
              1 == this.state && (this.state = 0.001 < selectedStrip.getNameValue("fx.3.value"));
            },
            func: function () {
              a.l2.show();
              a.s2.show();
              a.l2.label = lang.FX_SEND;
              a.l2.sign = lang.DB;
              a.l2.formatValue = VtoDB2;
              a.l2.setKey(selectedStrip.name + "fx.3.value");
              a.s2.setKey(selectedStrip.name + "fx.3.value");
              a.s2.dbMarks = !0;
              a.s2.fader = res.eqVFaderGreen;
              a.s2.maxValue = 1;
              var b = this;
              a.s2.valueFunc = function () {
                regUpdate(a.l2);
                regUpdate(b);
              };
              a.l1.hide();
              a.s1.hide();
              a.l3.hide();
              a.s3.hide();
              a.l4.hide();
              a.s4.hide();
              a.l5.hide();
              a.s5.hide();
              a.setMode(this.idx);
            },
          });
          c.push(
            {
              name: lang.HPF,
              color: color.red,
              getState: function () {
                this.state = 0 < selectedStrip.getNameValue("eq.hpf.freq");
              },
              func: function () {
                a.l2.show();
                a.s2.show();
                a.l2.label = lang.HPF_FREQ;
                a.l2.sign = "hZ";
                a.l2.formatValue = VtoHPFfreq;
                a.l2.setKey(selectedStrip.name + "eq.hpf.freq");
                a.s2.setKey(selectedStrip.name + "eq.hpf.freq");
                a.s2.dbMarks = !1;
                a.s2.fader = res.eqVFaderGray;
                a.s2.maxValue = FREQtoV(1e3);
                a.s2.mV = [0, findV(VtoFREQ, 50), findV(VtoFREQ, 100), findV(VtoFREQ, 200), findV(VtoFREQ, 500), findV(VtoFREQ, 1e3)];
                a.s2.setDefaultValue(null);
                var b = this;
                a.s2.valueFunc = function () {
                  regUpdate(a.l2);
                  regUpdate(b);
                };
                a.l1.hide();
                a.s1.hide();
                a.l3.hide();
                a.s3.hide();
                a.l4.hide();
                a.s4.hide();
                a.l5.hide();
                a.s5.hide();
                a.setMode(this.idx);
              },
            },
            {
              name: lang.NOTCH_F,
              color: color.red,
              getState: function () {
                var a = selectedStrip.name + "eq.b4.";
                if ((this.state = isNear(getValue(a + "q"), 1))) this.state = isNear(getValue(a + "gain"), 0);
              },
              func: function () {
                a.l2.show();
                a.s2.show();
                a.l2.label = lang.NOTCH_FREQ;
                a.l2.sign = "hZ";
                a.l2.setKey(selectedStrip.name + "eq.b4.freq");
                a.l2.formatValue = VtoFREQ;
                a.s2.setKey(selectedStrip.name + "eq.b4.freq");
                a.s2.dbMarks = !1;
                a.s2.fader = res.eqVFaderPurple;
                a.s2.maxValue = 1;
                a.s2.mV = [0, findV(VtoFREQ, 50), findV(VtoFREQ, 100), findV(VtoFREQ, 200), findV(VtoFREQ, 500), findV(VtoFREQ, 1e3), findV(VtoFREQ, 2e3), findV(VtoFREQ, 5e3), findV(VtoFREQ, 1e4), 1];
                a.s2.setDefaultValue(null);
                var b = this;
                a.s2.valueFunc = function (c) {
                  var d = selectedStrip.name + "eq.b4.";
                  setValue(d + "freq", c);
                  setValue(d + "q", 1);
                  setValue(d + "gain", 0);
                  regUpdate(a.l2);
                  regUpdate(b);
                };
                a.l1.hide();
                a.s1.hide();
                a.l3.hide();
                a.s3.hide();
                a.l4.hide();
                a.s4.hide();
                a.l5.hide();
                a.s5.hide();
                a.setMode(this.idx);
              },
            },
            {
              name: lang.COMPRESSOR,
              color: color.DYN,
              getState: function () {
                this.state = selectedStrip.getNameValue("dyn.bypass") ? 0 : 1;
              },
              func: function () {
                a.l4.show();
                a.s4.show();
                a.l4.label = lang.THRESHOLD;
                a.l4.sign = lang.DB;
                a.l4.setKey(selectedStrip.name + "dyn.threshold");
                a.l4.formatValue = function (a) {
                  a = VtoTHRESH(a) + "";
                  -1 == a.indexOf(".") && (a += ".0");
                  return a;
                };
                a.s4.setKey(selectedStrip.name + "dyn.threshold");
                a.s4.dbMarks = !1;
                a.s4.mV = [
                  0,
                  findV(VtoTHRESH, 0),
                  findV(VtoTHRESH, -10),
                  findV(VtoTHRESH, -20),
                  findV(VtoTHRESH, -30),
                  findV(VtoTHRESH, -40),
                  findV(VtoTHRESH, -50),
                  findV(VtoTHRESH, -60),
                  findV(VtoTHRESH, -70),
                  findV(VtoTHRESH, -80),
                  1,
                ];
                a.s4.setDefaultValue(findV(VtoTHRESH, -6), !1);
                a.s4.fader = res.eqVFaderGray;
                a.l1.show();
                a.s1.show();
                a.l1.label = lang.RATIO;
                a.l1.sign = "";
                a.l1.setKey(selectedStrip.name + "dyn.ratio");
                a.l1.formatValue = function (a) {
                  a = VtoRATIO(a);
                  return (a = 60 < a ? "inf" : 2 > a ? precision(a, 2) + "" : precision(a, 1) + "");
                };
                a.s1.setKey(selectedStrip.name + "dyn.ratio");
                a.s1.dbMarks = !1;
                a.s1.mV = [1, 1 / 1.2, 0.625, 0.5, 1 / 3, 0.2, 0.1, 0];
                a.s1.setDefaultValue(1, !1);
                a.s1.fader = res.eqVFaderYellow;
                a.l2.show();
                a.s1.show();
                a.l2.label = lang.ATTACK;
                a.l2.sign = lang.MS;
                a.l2.setKey(selectedStrip.name + "dyn.attack");
                a.l2.formatValue = VtoATTACK;
                a.s2.setKey(selectedStrip.name + "dyn.attack");
                a.s2.dbMarks = !1;
                a.s2.maxValue = 1;
                a.s2.mV = [1, findV(VtoATTACK, 300), findV(VtoATTACK, 200), findV(VtoATTACK, 100), findV(VtoATTACK, 20), 0];
                a.s2.setDefaultValue(findV(VtoATTACK, 30), !1);
                a.s2.fader = res.eqVFaderGray;
                a.l3.show();
                a.s3.show();
                a.l3.label = lang.RELEASE;
                a.l3.sign = lang.MS;
                a.l3.formatValue = VtoREL;
                a.l3.setKey(selectedStrip.name + "dyn.release");
                a.s3.setKey(selectedStrip.name + "dyn.release");
                a.s3.dbMarks = !1;
                a.s3.mV = [1, findV(VtoREL, 100), findV(VtoREL, 500), findV(VtoREL, 1e3), findV(VtoREL, 1500), 0];
                a.s3.setDefaultValue(findV(VtoREL, 500), !1);
                a.s3.fader = res.eqVFaderGray;
                a.l5.show();
                a.s5.show();
                a.l5.label = lang.GAIN;
                a.l5.sign = lang.DB;
                a.l5.setKey(selectedStrip.name + "dyn.outgain");
                a.l5.formatValue = function (a) {
                  return precision(VtoDYNOUTGAIN(a), 1);
                };
                a.s5.setKey(selectedStrip.name + "dyn.outgain");
                a.s5.dbMarks = !1;
                a.s5.fader = res.eqVFaderRed;
                a.s5.setDefaultValue(findV(VtoDYNOUTGAIN, 0));
                a.s5.mV = [1, findV(VtoDYNOUTGAIN, -12), findV(VtoDYNOUTGAIN, 12), findV(VtoDYNOUTGAIN, 24), findV(VtoDYNOUTGAIN, 36), 0];
                a.setMode(this.idx);
              },
            }
          );
          HAVE_GATE
            ? c.push({
              name: lang.GATE,
              color: color.GATE,
              getState: function () {
                this.state = selectedStrip.getNameValue("gate.enabled") && !selectedStrip.getNameValue("gate.bypass");
              },
              func: function () {
                var b = this;
                a.l4.show();
                a.s4.show();
                a.l4.label = lang.THRESHOLD;
                a.l4.sign = lang.DB;
                a.l4.setKey(selectedStrip.name + "gate.thresh");
                a.l4.formatValue = function (a) {
                  return formatValue(VtoGATE_THRESH(a), 1, "", !1, -90);
                };
                a.s4.setKey(selectedStrip.name + "gate.thresh");
                a.s4.dbMarks = !1;
                a.s4.maxValue = 1;
                a.s4.setDefaultValue(0, !1);
                a.s4.mV = [
                  0,
                  findV(VtoGATE_THRESH, 0),
                  findV(VtoGATE_THRESH, -10),
                  findV(VtoGATE_THRESH, -20),
                  findV(VtoGATE_THRESH, -30),
                  findV(VtoGATE_THRESH, -40),
                  findV(VtoGATE_THRESH, -50),
                  findV(VtoGATE_THRESH, -60),
                  findV(VtoGATE_THRESH, -70),
                  findV(VtoGATE_THRESH, -80),
                  1,
                ];
                a.s4.fader = res.eqVFaderGray;
                a.s4.valueFunc = function () {
                  regUpdate(a.l4);
                  regUpdate(b);
                  selectedStrip.setNameValue("gate.prmod", 1);
                };
                a.l1.show();
                a.s1.show();
                a.l1.label = lang.ATTACK;
                a.l1.sign = lang.MS;
                a.l1.setKey(selectedStrip.name + "gate.attack");
                a.l1.formatValue = function (a) {
                  return formatValue(VtoGATE_ATTACK(a), 0);
                };
                a.s1.setKey(selectedStrip.name + "gate.attack");
                a.s1.dbMarks = !1;
                a.s1.maxValue = 1;
                a.s1.mV = [1, findV(VtoGATE_ATTACK, 10), findV(VtoGATE_ATTACK, 50), findV(VtoGATE_ATTACK, 100), findV(VtoGATE_ATTACK, 200), findV(VtoGATE_ATTACK, 300), 0];
                a.s1.fader = res.eqVFaderGray;
                a.s1.valueFunc = function () {
                  regUpdate(a.l1);
                  regUpdate(b);
                  selectedStrip.setNameValue("gate.prmod", 1);
                };
                a.l2.show();
                a.s2.show();
                a.l2.label = lang.HOLD;
                a.l2.sign = lang.MS;
                a.l2.setKey(selectedStrip.name + "gate.hold");
                a.l2.formatValue = function (a) {
                  return formatValue(VtoGATE_HOLD(a), 0);
                };
                a.s2.setKey(selectedStrip.name + "gate.hold");
                a.s2.dbMarks = !1;
                a.s2.maxValue = 1;
                a.s2.mV = [1, findV(VtoGATE_HOLD, 10), findV(VtoGATE_HOLD, 100), findV(VtoGATE_HOLD, 200), findV(VtoGATE_HOLD, 500), findV(VtoGATE_HOLD, 1e3), 0];
                a.s2.fader = res.eqVFaderGray;
                a.s2.valueFunc = function () {
                  regUpdate(a.l2);
                  regUpdate(b);
                  selectedStrip.setNameValue("gate.prmod", 1);
                };
                a.l3.show();
                a.s3.show();
                a.l3.label = lang.RELEASE;
                a.l3.sign = lang.MS;
                a.l3.setKey(selectedStrip.name + "gate.release");
                a.l3.formatValue = function (a) {
                  return formatValue(VtoGATE_RELEASE(a), 0);
                };
                a.s3.setKey(selectedStrip.name + "gate.release");
                a.s3.dbMarks = !1;
                a.s3.maxValue = 1;
                a.s3.mV = [1, findV(VtoGATE_RELEASE, 10), findV(VtoGATE_RELEASE, 50), findV(VtoGATE_RELEASE, 100), findV(VtoGATE_RELEASE, 200), findV(VtoGATE_RELEASE, 500), findV(VtoGATE_RELEASE, 1e3), 0];
                a.s3.fader = res.eqVFaderGray;
                a.s3.valueFunc = function () {
                  regUpdate(a.l3);
                  regUpdate(b);
                  selectedStrip.setNameValue("gate.prmod", 1);
                };
                a.l5.show();
                a.s5.show();
                a.l5.label = lang.DEPTH;
                a.l5.sign = lang.DB;
                a.l5.setKey(selectedStrip.name + "gate.depth");
                a.l5.formatValue = function (a) {
                  return formatValue(VtoGATE_DEPTH(a), 1, "", !1, -60);
                };
                a.s5.setKey(selectedStrip.name + "gate.depth");
                a.s5.dbMarks = !1;
                a.s5.maxValue = 1;
                a.s5.mV = [1, findV(VtoGATE_DEPTH, -10), findV(VtoGATE_DEPTH, -20), findV(VtoGATE_DEPTH, -30), findV(VtoGATE_DEPTH, -40), findV(VtoGATE_DEPTH, -50), 0];
                a.s5.fader = res.eqVFaderGray;
                a.s5.valueFunc = function () {
                  regUpdate(a.l5);
                  regUpdate(b);
                  selectedStrip.setNameValue("gate.prmod", 1);
                };
                a.setMode(this.idx);
              },
            })
            : c.push({
              name: lang.GATE,
              color: color.GATE,
              getState: function () {
                this.state = 0.001 < selectedStrip.getNameValue("gate.thresh");
              },
              func: function () {
                a.l2.show();
                a.s2.show();
                a.l2.label = lang.THRESHOLD;
                a.l2.sign = lang.DB;
                a.l2.setKey(selectedStrip.name + "gate.thresh");
                a.l2.formatValue = function (a) {
                  return formatValue(VtoGATE_THRESH(a), 1, "", !1, -90);
                };
                a.s2.setKey(selectedStrip.name + "gate.thresh");
                a.s2.dbMarks = !1;
                a.s2.maxValue = 1;
                a.s2.setDefaultValue(0, !1);
                a.s2.mV = [
                  0,
                  findV(VtoGATE_THRESH, 0),
                  findV(VtoGATE_THRESH, -10),
                  findV(VtoGATE_THRESH, -20),
                  findV(VtoGATE_THRESH, -30),
                  findV(VtoGATE_THRESH, -40),
                  findV(VtoGATE_THRESH, -50),
                  findV(VtoGATE_THRESH, -60),
                  findV(VtoGATE_THRESH, -70),
                  findV(VtoGATE_THRESH, -80),
                  1,
                ];
                a.s2.fader = res.eqVFaderGreen;
                var b = this;
                a.s2.valueFunc = function () {
                  regUpdate(a.l2);
                  regUpdate(b);
                };
                a.l1.hide();
                a.s1.hide();
                a.l3.hide();
                a.s3.hide();
                a.l4.hide();
                a.s4.hide();
                a.l5.hide();
                a.s5.hide();
                a.setMode(this.idx);
              },
            });
          for (var f = 0, d = 0; d < c.length; d++) {
            var e = c[d],
              g = new PEDAL(this);
            g.setAnchors(10 + (d % 5) * (g.w + 10), 55 + 90 * ((d / 5) | 0), null, null);
            g.text = e.name;
            g.idx = d;
            g.color = e.color;
            e.onLong && (g.onLong = e.onLong);
            (e.regKeys || []).each(function (a) {
              g.regKey(a);
            });
            g.onDown = e.func;
            g.getState = e.getState;
            this.PEDALS.push(g);
            0 < d && 0 == d % 5 && f++;
          }
          this.CABS = new DIGI_CAB(this);
          this.AMPS = new DIGI_AMP(this);
          d = 11;
          f = d - 11;
          e = 73;
          c = 280;
          this.s1 = new EQSlider(this);
          this.s1.setAnchors(d + 1 * e, 330, null, 10);
          this.s1.fader = res.eqVFaderGreen;
          this.s1.valueFunc = function (b) {
            regUpdate(a.l1);
          };
          this.l1 = new FXLEDPlain(this);
          this.l1.setAnchors(f + 1 * e, c, null, null);
          this.l1.label = "PAR1";
          this.l1.sign = "%";
          this.l1.formatValue = VtoPERCENT;
          this.s2 = new EQSlider(this);
          this.s2.setAnchors(d + 2 * e, 330, null, 10);
          this.s2.fader = res.eqVFaderBlue;
          this.s2.valueFunc = function (b) {
            regUpdate(a.l2);
          };
          this.l2 = new FXLEDPlain(this);
          this.l2.setAnchors(f + 2 * e, c, null, null);
          this.l2.label = "PAR2";
          this.l2.sign = "%";
          this.l2.formatValue = VtoPERCENT;
          this.s3 = new EQSlider(this);
          this.s3.setAnchors(d + 3 * e, 330, null, 10);
          this.s3.fader = res.eqVFaderYellow;
          this.s3.valueFunc = function (b) {
            regUpdate(a.l3);
          };
          this.l3 = new FXLEDPlain(this);
          this.l3.setAnchors(f + 3 * e, c, null, null);
          this.l3.label = "PAR3";
          this.l3.sign = "%";
          this.l3.formatValue = VtoPERCENT;
          this.s4 = new EQSlider(this);
          this.s4.setAnchors(d + 0 * e, 330, null, 10);
          this.s4.fader = res.eqVFaderYellow;
          this.s4.valueFunc = function (b) {
            regUpdate(a.l4);
          };
          this.l4 = new FXLEDPlain(this);
          this.l4.setAnchors(f + 0 * e, c, null, null);
          this.l4.label = "PAR4";
          this.l4.sign = "%";
          this.l4.formatValue = VtoPERCENT;
          this.s5 = new EQSlider(this);
          this.s5.setAnchors(d + 4 * e, 330, null, 10);
          this.s5.fader = res.eqVFaderYellow;
          this.s5.valueFunc = function (b) {
            regUpdate(a.l5);
          };
          this.l5 = new FXLEDPlain(this);
          this.l5.setAnchors(f + 4 * e, c, null, null);
          this.l5.label = "PAR5";
          this.l5.sign = "%";
          this.l5.formatValue = VtoPERCENT;
          d = 15;
          f = d - 11;
          e = 80;
          this.sl5 = new EQSlider(this);
          this.sl5.setAnchors(null, 330, d + 0 * e, 10);
          this.sl5.setDefaultValue(0.5);
          this.sl5.fader = res.eqVFaderPurple;
          this.sl5.valueFunc = function (b) {
            regUpdate(a.led5);
          };
          this.sl5.getState = function () {
            this.disabled = 0 == selectedStrip.getNameValue("digitech.enabled");
          };
          this.led5 = new FXLEDPlain(this);
          this.led5.setAnchors(null, c, f + 0 * e, null);
          this.led5.label = lang.TREBLE;
          this.led5.sign = "%";
          this.led5.formatValue = function (a) {
            return (0.5 < a ? "+" : "") + (VtoLINRANGE(a, -100, 100) | 0);
          };
          this.sl4 = new EQSlider(this);
          this.sl4.setAnchors(null, 330, d + 1 * e, 10);
          this.sl4.setDefaultValue(0.5);
          this.sl4.fader = res.eqVFaderRed;
          this.sl4.valueFunc = function (b) {
            regUpdate(a.led4);
          };
          this.sl4.getState = function () {
            this.disabled = 0 == selectedStrip.getNameValue("digitech.enabled");
          };
          this.led4 = new FXLEDPlain(this);
          this.led4.setAnchors(null, c, f + 1 * e, null);
          this.led4.label = lang.MID;
          this.led4.sign = "%";
          this.led4.formatValue = function (a) {
            return (0.5 < a ? "+" : "") + (VtoLINRANGE(a, -100, 100) | 0);
          };
          this.sl3 = new EQSlider(this);
          this.sl3.setAnchors(null, 330, d + 2 * e, 10);
          this.sl3.setDefaultValue(0.5);
          this.sl3.fader = res.eqVFaderGreen;
          this.sl3.valueFunc = function (b) {
            regUpdate(a.led3);
          };
          this.sl3.getState = function () {
            this.disabled = 0 == selectedStrip.getNameValue("digitech.enabled");
          };
          this.led3 = new FXLEDPlain(this);
          this.led3.setAnchors(null, c, f + 2 * e, null);
          this.led3.label = lang.BASS;
          this.led3.sign = "%";
          this.led3.formatValue = function (a) {
            return (0.5 < a ? "+" : "") + (VtoLINRANGE(a, -100, 100) | 0);
          };
          this.sl2 = new EQSlider(this);
          this.sl2.setAnchors(null, 330, d + 3 * e, 10);
          this.sl2.valueFunc = function (b) {
            regUpdate(a.led2);
          };
          this.sl2.getState = function () {
            this.disabled = 0 == selectedStrip.getNameValue("digitech.enabled");
          };
          this.led2 = new FXLEDPlain(this);
          this.led2.setAnchors(null, c, f + 3 * e, null);
          this.led2.label = lang.LEVEL;
          this.led2.sign = "%";
          this.led2.formatValue = function (a) {
            return VtoPERCENT(a);
          };
          this.sl1 = new EQSlider(this);
          this.sl1.setAnchors(null, 330, d + 4 * e, 10);
          this.sl1.fader = res.eqVFaderOrange;
          this.sl1.valueFunc = function (b) {
            regUpdate(a.led1);
          };
          this.sl1.getState = function () {
            this.disabled = 0 == selectedStrip.getNameValue("digitech.enabled");
          };
          this.led1 = new FXLEDPlain(this);
          this.led1.setAnchors(null, c, f + 4 * e, null);
          this.led1.label = lang.GAIN;
          this.led1.sign = "%";
          this.led1.formatValue = function (a) {
            return VtoPERCENT(a);
          };
        },
        calcGeometry: function () {
          res.AMP_D.h();
          res.CAB_D.h();
          var a = this.w - res.CAB_D.w() + 10,
            b = a + 36,
            c = 50 + res.AMP_D.h();
          this.CABS.setPos(a, c);
          this.AMPS.setPos(b, 50);
        },
        showPresets: function () {
          var a = selectedStrip.getNameValue("digitech.prname");
          this.menu = new PRESET_MENU2(null, "digi", this, "#999", a);
          regUpdate(this.menu);
        },
        savePreset: function () {
          for (
            var a = ".digitech.amp .digitech.bass .digitech.cab .digitech.gain .digitech.level .digitech.mid .digitech.treble .eq.hpf.freq .gate.thresh .dyn.threshold .dyn.ratio .dyn.softknee .dyn.attack .dyn.outgain .dyn.release".split(
                " "
              ),
              b = {},
              c = selectedStrip.name.split("."),
              c = c[0] + "." + c[1],
              d = 0;
            d < a.length;
            d++
          )
            b[a[d]] = getValue(c + a[d]);
          return b;
        },
        loadPreset: function (a, b) {
          var c = selectedStrip.name.slice(0, -1);
          applyPreset(c, a);
          isDefined(b) && setValue(c + ".digitech.prname", b);
          regUpdate(this);
          return !0;
        },
        paint: function () {
          ctx.fillStyle = this.bgColor;
          ctx.fillRect(0, 0, this.w, this.h);
          drawText(lang.SHORTCUTS + ":", 12, 36, { color: color.white, font: "15pt open_sans_condensedbold", align: "left" });
        },
      }),
      DIGI_CAB = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "DIGI_CAB";
          this.w = res.CAB_D.w();
          this.h = 86;
          this.needClip = !0;
          this.mode = 0;
          this.ena = !1;
          this.data = E_CABS2;
          this.keys = Object.keys(E_CABS2);
          this.vals = Object.keys(E_CABS2).map(function (b) {
            return E_CABS2[b];
          });
        },
        onDown: function () {
          var a = this;
          this.ena &&
          ((this.modal = new LIST(-1)),
            this.modal.setItems(this.vals),
            this.modal.setGeometry(this.globalX(), this.globalY(), this.w, 400),
            (this.modal.keys = this.keys),
            (this.modal.getActiveItem = function () {
              var a = "" + getValue(selectedStrip.name + "digitech.cab");
              this.selected = this.keys.indexOf(a);
            }),
            (this.modal.onSelect = function () {
              setValue(selectedStrip.name + "digitech.cab", (this.keys[this.selected] || 0) | 0);
              regUpdate(a);
              clearModals();
            }),
            this.modal.getActiveItem(),
            this.modal.gotoSelected());
        },
        getState: function () {
          this.mode = "" + getValue(selectedStrip.name + "digitech.cab");
          this.ena = getValue(selectedStrip.name + "digitech.enabled");
        },
        paint: function () {
          this.getState();
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, 0, this.w, this.h);
          this.ena ? drawImage(res.CAB_D, 0, 0) : drawImage(res.CAB_G, 0, 0);
          this.ena && ctx.drawText(this.data[this.mode], this.w / 2, this.h / 2, { font: font.botChLabel, align: "center", valign: "middle", color: "#B7B7B7", shadow: Shadow.main });
        },
      }),
      DIGI_AMP = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "DIGI_AMP";
          this.w = res.AMP_D.w();
          this.h = res.AMP_D.h();
          this.mode = 0;
          this.ena = !1;
          this.data = E_AMPS2;
          this.keys = Object.keys(E_AMPS2);
          this.vals = Object.keys(E_AMPS2).map(function (b) {
            return E_AMPS2[b];
          });
        },
        onDown: function () {
          var a = this;
          this.ena &&
          ((this.modal = new LIST(-1)),
            this.modal.setItems(this.vals),
            (this.modal.keys = this.keys),
            this.modal.setGeometry(this.globalX(), this.globalY(), this.w, 400),
            (this.modal.getActiveItem = function () {
              var a = "" + getValue(selectedStrip.name + "digitech.amp");
              this.selected = this.keys.indexOf(a);
            }),
            (this.modal.onSelect = function () {
              setValue(selectedStrip.name + "digitech.amp", (this.keys[this.selected] || 0) | 0);
              regUpdate(a);
              clearModals();
            }),
            this.modal.getActiveItem(),
            this.modal.gotoSelected());
        },
        getState: function () {
          this.mode = "" + getValue(selectedStrip.name + "digitech.amp");
          this.ena = getValue(selectedStrip.name + "digitech.enabled");
        },
        paint: function () {
          this.getState();
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, 0, this.w, this.h);
          this.ena ? drawImage(res.AMP_D, 0, 0) : drawImage(res.AMP_G, 0, 0);
          this.ena && ctx.drawText(this.data[this.mode], this.w / 2, this.h / 2 + 9, { font: font.botChLabel, align: "center", valign: "middle", color: "#B7B7B7", shadow: Shadow.main });
        },
      }),
      RadialKnob = Class.create(Widget, {
        initialize: function ($super, b, c) {
          $super(b);
          this.widgetName = "RadialKnob";
          this.h = this.w = 60;
          this.needMoveEvt = !0;
          this.value = 0.4;
          this.slide = this.pressed = !1;
          this.touchID = -1;
          this.lastPressPoint = [-1, -1];
          this.d = 0;
          this.holdTimer = null;
        },
        onDown: function (a, b, c) {
          clearTimeout(this.holdTimer);
          this.d = this.value;
          regUpdate(this);
        },
        onMove: function (a, b, c) {
          a = b - this.globalY();
          this.value = bound(this.d - a / 1e3, 0, 1);
          regUpdate(this);
        },
        onUp: function (a) {},
        onhold: function () {},
        onDouble: function () {},
        onWheel: function (a) {
          if (!this.master || !settings.masterLock) {
            var b = this.getVal(),
              b = bound(b + a / 120 / 30, 0, 1);
            this.setVal(b);
            regUpdate(this.parent);
          }
        },
        setValue: function (a) {
          this.setVal(a);
          this.onValue();
          regUpdate(this.parent);
        },
        onFocus: function () {},
        onValue: function () {},
        paint: function () {
          var a = this.w / 2;
          ctx.strokeStyle = "rgba(255,255,255,0.2)";
          ctx.lineWidth = 1;
          ctx.fillStyle = "#000";
          ctx.circle(a, a, a);
          ctx.fill();
          ctx.fillStyle = "#911";
          ctx.beginPath();
          ctx.arc(a, a, a - 2, Math.PI, Math.PI + 2 * Math.PI * this.value, !1);
          ctx.lineTo(a, a);
          ctx.closePath();
          ctx.fill();
        },
      }),
      PEDAL = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "PEDAL";
          this.w = 62;
          this.h = 76;
          this.mode = this.idx = 0;
          this.text = "PEDAL XXX";
          this.color = "#999";
          this.state = 0;
        },
        setMode: function (a) {
          this.mode = bound(a | 0, 0, 3);
          regUpdate(this);
        },
        onDown: function (a, b, c) {
          this.globalX();
          this.globalY();
        },
        getState: function () {},
        paint: function () {
          this.getState();
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, 0, this.w, this.h);
          ctx.globalAlpha = this.parent.mode == this.idx ? 1 : 0.7;
          drawImage(res.pedal_grey, 0, 0);
          this.state && drawImage(res.pedal_light, 2, 3);
          drawText(this.text, (this.w / 2) | 0, 21, { max: this.w - 6, font: "9pt open_sans_condensedbold", align: "center", valign: "middle", color: "#161616", sColor: "#aaa", sX: 1, sY: 1, sBlur: 0 });
        },
      }),
      TButton = Class.create(Button, {
        initialize: function ($super, b) {
          $super(b);
          this.text = "0 ms";
          this.font = "14px open_sans_condensedbold";
          this.textColorActive = this.textColor = color.black2;
          this.textParam = { font: "14px open_sans_condensedbold", x: null, y: null, offsetX: 0, offsetY: -2, pressOffsetX: 0, pressOffsetY: 1, align: "center", valign: "middle", shadow: ["#ccc", 0, 1, 1], dy: 14 };
        },
      }),
      TCheckBox = Class.create(CheckBox, {
        initialize: function ($super, b) {
          $super(b);
          this.font = "14px open_sans_condensedbold";
          this.textColorActive = this.textColor = color.black2;
          this.textParam = { font: "14px open_sans_condensedbold", x: null, y: null, offsetX: 0, offsetY: -2, pressOffsetX: 0, pressOffsetY: 1, align: "center", valign: "middle", shadow: ["#ccc", 0, 1, 1], dy: 14 };
        },
      }),
      PerfGraph = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "PerfGraph";
          this.w = 200;
          this.h = 60;
          this.timer = null;
          this.bgColor = color.black;
          this.color = "rgba(255,255,0,0.6)";
          this.color2 = "rgba(0,255,0,0.6)";
          this.data = Util.filledArray(200);
          this.data2 = Util.filledArray(200);
          regTick(this);
        },
        tick: function () {
          this.data.shift();
          this.data.push(0);
          this.data2.shift();
          this.data2.push(0);
          regUpdate(this);
          regTick(this);
        },
        addValue: function (a) {
          this.data[this.data.length - 1] += a;
        },
        addValue2: function (a) {
          this.data2[this.data.length - 1] += a;
        },
        paint: function () {
          ctx.fillStyle = this.bgColor;
          ctx.fillRect(0, 0, this.w, this.h);
          for (var a = Math.max(this.data.max(), this.data2.max()), b = this.data.avg() + this.data2.avg(), c = a - 0, d = 0, f = this.data.length; d < f; d++) {
            var e = this.data[d];
            0.01 < e && ((e = (e - 0) / c), (e *= this.h), (ctx.fillStyle = this.color), ctx.fillRect(d, this.h, 1, -e | 0));
            e = this.data2[d];
            0.01 < e && ((e = (e - 0) / c), (e *= this.h), (ctx.fillStyle = this.color2), ctx.fillRect(d, this.h, 1, -e | 0));
          }
          ctx.fillStyle = color.white;
          ctx.font = font.stripMarks;
          ctx.textAlign = "right";
          ctx.fillText(precision(a, 2) + "ms max", this.w - 2, 10);
          ctx.fillText(precision(b, 2) + "ms avg", this.w - 2, 20);
        },
      }),
      BM_TOP_H = 60,
      BM_BOT_H = 380,
      BM_SO_W = 224,
      E_BIG_MODE = { GAIN: 0, EQDYN: 1, SENDS: 2 },
      BigWidget = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "BigWidget";
          this.h = BM_TOP_H + BM_BOT_H;
          this.mode = 0;
          this.setAnchors(0, measures.topWidgetHeight, 0, null);
          this.initWidgets();
          this.setMode(E_BIG_MODE.EQDYN);
        },
        setMode: function (a) {
          this.mode = a;
          switch (a) {
            case 0:
              this.gain.show();
              break;
            case 1:
              this.eqdyn.show();
              break;
            case 2:
              this.sends.show();
          }
        },
        initWidgets: function () {
          this.so = new BM_SLIDEOUT(this);
          this.so.setAnchors(null, 0, 0, 0);
          var a = this.so.w;
          this.meters = new METERS2(this);
          this.meters.setAnchors(0, 0, 0, null);
          this.meters.y = 70;
          this.gain = new BM_GAIN(this);
          this.gain.setAnchors(0, 0, 0, a);
          this.gain.hide();
          this.eqdyn = new BM_EQDYN(this);
          this.eqdyn.setAnchors(0, 0, 0, a);
          this.eqdyn.hide();
          this.sends = new BM_EQDYN(this);
          this.sends.setAnchors(0, 0, 0, a);
          this.sends.hide();
          this.keyPrefix = "i.0.eq.";
        },
        paint: function () {
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, 0, this.w, this.h);
        },
      }),
      BM_GAIN = Class.create(Widget, {}),
      BM_EQDYN = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "BM_EQDYN";
          this.h = BM_BOT_H;
          this.setAnchors(0, measures.topWidgetHeight + BM_TOP_H, BM_SO_W, null);
          this.initWidgets();
        },
        onShow: function () {
          this.upd();
        },
        upd: function () {
          selectedStrip.type == E_STRIP_TYPE.VCA ? (this.dyn.hide(), this.eq.hide()) : (!this.dyn.enabled && this.dyn.show(), !this.eq.enabled && this.eq.show(), this.dyn.upd(), this.eq.upd());
        },
        onResize: function () {
          this.needClip = 1500 > this.w;
        },
        initWidgets: function () {
          this.dyn = new BM_DYNGATE2(this);
          this.dyn.setAnchors(0, 0, null, 0);
          this.dyn.w = 848;
          this.eq = new BM_EQ2(this);
          this.eq.setAnchors(848, 0, 0, 0);
        },
        paint: function () {
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, 0, this.w, this.h);
        },
      }),
      BM_EQ2 = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "BM_EQ2";
          this.keyPrefix = "i.0.eq.";
          this.mode = -1;
          this.initWidgets();
          this.setMode(0);
        },
        setMode: function (a) {
          this.mode != a
            ? ((this.mode = a),
              this.pages.forEach(function (a) {
                a.hide();
              }),
            this.pages[a] && this.pages[a].show())
            : this.pages[a] && this.pages[a].syncSliders();
        },
        upd: function () {
          if (selectedStrip)
            switch (selectedStrip.type) {
              case E_STRIP_TYPE.IN:
              case E_STRIP_TYPE.LINEIN:
              case E_STRIP_TYPE.MEDIA:
              case E_STRIP_TYPE.FX:
              case E_STRIP_TYPE.SUB:
                this.setMode(0);
                break;
              case E_STRIP_TYPE.AUX:
                this.setMode(1);
                break;
              case E_STRIP_TYPE.VCA:
                this.setMode(-1);
                break;
              case E_STRIP_TYPE.MASTER:
                this.setMode(2);
            }
        },
        initWidgets: function () {
          this.pages = [];
          this.pages.push(new EQChannel(this, !0));
          this.pages.push(new EQAux(this, !0));
          this.pages.push(new EQMaster(this, !0));
          this.pages.forEach(function (a) {
            a.calcGeometry2 = function () {};
            a.setAnchors(0, 0, 0, 0);
          });
        },
        paint: function () {
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, 0, this.w, this.h);
        },
      }),
      BM_DYNGATE2 = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "BM_DYNGATE";
          this.keyPrefix = "i.0.gate.";
          this.initWidgets();
          this.mode = 0;
          this.setMode(0);
        },
        upd: function () {
          if (selectedStrip) {
            selectedStrip.type == E_STRIP_TYPE.MASTER ? (this.sw.hide(), 0 == this.mode && this.setMode(1)) : this.sw.show();
            this.gate.syncSliders();
            this.dyn.syncSliders();
            if (IS_UI_24)
              if (selectedStrip.type == E_STRIP_TYPE.SUB && 0 < selectedStrip.subId) {
                this.ducker.show();
                for (var a = [lang.DUCKER + ": " + lang.NONE], b = 0; b < selectedStrip.subId; b++) a.push(lang.DUCKER + ": " + lang.SG + " " + (b + 1));
                this.ducker.setItems(a);
                this.ducker.setKey(selectedStrip.name + "ducker", !0);
              } else this.ducker.hide();
            this.unRegAllKeys();
            this.regKey(selectedStrip.name + "name");
          }
        },
        setMode: function (a) {
          this.mode = a;
          this.dyn.hide();
          this.gate.hide();
          switch (a) {
            case 0:
              this.gate.show();
              break;
            case 1:
              this.dyn.show();
          }
          regUpdate(this);
        },
        initWidgets: function () {
          var a = this;
          this.sw = new SWITCHBOX(this);
          this.sw.setItems([lang.GATE, lang.COMP]);
          this.sw.setItemWidth(100);
          this.sw.setAnchors(303, 6);
          this.sw.color = color.orange;
          this.sw.getState = function () {
            this.state = a.mode;
          };
          this.sw.onValue = function () {
            a.setMode(this.state);
          };
          this.ducker = new COMBOBOX(this);
          this.ducker.setSize(130, 30);
          this.ducker.setAnchors(null, 6, 170, null);
          this.ducker.itemH = 29;
          this.preset = new SButton(this);
          this.preset.text = lang.PRESETS;
          this.preset.w = 130;
          this.preset.setAnchors(null, 6, 10, null);
          this.preset.onPress = function () {
            a.dyn.enabled && a.dyn.showPresets();
            a.gate.enabled && a.gate.showPresets();
          };
          this.dyn = new DYNSubPage(this, !0);
          this.dyn.calcGeometry2 = function () {};
          this.dyn.setAnchors(0, 44, 0, 0);
          this.gate = new GATE_PAGE(this, !0);
          this.gate.calcGeometry = function () {};
          this.gate.setAnchors(0, 44, 0, 0);
        },
        paint: function () {
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, 0, this.w, this.h);
          var a = selectedStrip.getName();
          ctx.drawText(a, 151, 22, { max: 280, align: "center", valign: "middle", color: selectedStrip.getColor(), font: font.botChLabel, shadow: [color.black, 0, 1, 1] });
        },
      }),
      BM_METERS = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "BM_METERS";
          this.h = BM_TOP_H;
          this.setAnchors(0, measures.topWidgetHeight, 0, null);
          this.m = new METERS2(this);
          this.m.setAnchors(0, 0, 0, 12);
        },
        calcGeometry: function () {},
        paint: function () {
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, this.h - 10, this.w, 10);
          var a = 0,
            b = this.h - 17,
            c = ((this.w - a) / allStripsNoVca.length - 1) | 0;
          ctx.textAlign = "center";
          ctx.font = font.botChLabel;
          ctx.fillStyle = color.INPUT;
          var d = inStrips.length * (c + 1) - 2;
          ctx.fillRect(a, b, d, 16);
          ctx.font = font.botChLabel;
          ctx.fillStyle = "#eee";
          a += d + 1;
          ctx.fillStyle = color.LINEIN;
          d = lineinStrips.length * (c + 1) - 1;
          ctx.fillRect(a, b, d, 16);
          ctx.fillStyle = "#eee";
          a += d + 1;
          ctx.fillStyle = color.media;
          d = mediaStrips.length * (c + 1) - 1;
          ctx.fillRect(a, b, d, 16);
          ctx.fillStyle = "#eee";
          a += d + 1;
          ctx.fillStyle = color.FX;
          d = fxStrips.length * (c + 1) - 1;
          ctx.fillRect(a, b, d, 16);
          ctx.fillStyle = "#eee";
          a += d + 1;
          ctx.fillStyle = color.sub;
          d = subStrips.length * (c + 1) - 1;
          ctx.fillRect(a, b, d, 16);
          ctx.fillStyle = "#eee";
          a += d + 1;
          ctx.fillStyle = color.AUX;
          d = auxStrips.length * (c + 1);
          if (HAVE_MATRIX) for (d = 0; d < auxStrips.length; d++) (ctx.fillStyle = auxStrips[d].getNameValue("matrix") ? color.MATRIX : color.AUX), ctx.fillRect(a + (c + 1) * d, b, c + 1, 16);
          else ctx.fillRect(a, b, d - 1, 16);
          ctx.fillStyle = "#eee";
          ctx.font = "12px open_sans_condensedbold";
          ctx.textAlign = "center";
          ctx.setShadow(color.black, 0, 1, 1);
          for (d = 0; d < allStripsNoVca.length; d++) {
            var a = (0 + (c + 1) * d) | 0,
              f = (0 + c / 2 + (c + 1) * d) | 0,
              e = "" + (allStripsNoVca[d].subId + 1),
              g = c;
            if (24 < inStrips.length && (d < inStrips.length || d >= auxStrips[0].id))
              if (0 == d % 8)
                (f = d + 1),
                d >= auxStrips[0].id && (f -= auxStrips[0].id),
                  (e = "" + f + " - " + (f + 7)),
                  (f = (20 + (c + 1) * (d + 4)) | 0),
                  (g = 9999),
                (d / 8) % 2 && ((ctx.fillStyle = "rgba(255,255,255,0.08)"), ctx.fillRect(a - 1, b, 8 * (c + 1), 16));
              else continue;
            d % 2 && ((ctx.fillStyle = "rgba(255,255,255,0.07)"), ctx.fillRect(a, b, c - 1, 16));
            allStripsNoVca[d].type == E_STRIP_TYPE.LINEIN && (e = 0 == allStripsNoVca[d].subId % 2 ? "L" : "R");
            allStripsNoVca[d].type == E_STRIP_TYPE.MEDIA && (e = 0 == allStripsNoVca[d].subId % 2 ? "L" : "R");
            if (!hideHPAUX || (d != auxStrips[curSetup.aux - 2].id && d != auxStrips[curSetup.aux - 1].id))
              (ctx.fillStyle = "#000"), ctx.fillText(e, f + 1, b + 15 + 1, g), (ctx.fillStyle = "#eee"), ctx.fillText(e, f, b + 15, g);
          }
        },
      }),
      BM_SENDS = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "BM_SENDS";
          this.h = BM_BOT_H;
          this.setAnchors(0, measures.topWidgetHeight + BM_TOP_H, BM_SO_W, null);
          this.mode = 0;
          this.initWidgets();
          this.setMode(0);
        },
        onResize: function () {
          1600 > this.w ? this.fx.fx.hide() : this.fx.fx.show();
          this.needClip = 1300 > this.w;
        },
        onShow: function () {
          this.upd();
          this.aux.onShow();
          this.fx.onShow();
        },
        upd: function () {
          switch (selectedStrip.type) {
            case E_STRIP_TYPE.VCA:
              this.aux.hide();
              this.fx.hide();
              break;
            case E_STRIP_TYPE.AUX:
            case E_STRIP_TYPE.SUB:
              this.aux.hide();
              this.fx.show();
              this.fx.syncSliders();
              break;
            default:
              this.aux.show(), this.fx.show(), this.aux.syncSliders(), this.fx.syncSliders();
          }
        },
        setMode: function (a) {
          this.mode = a;
          regUpdate(this);
        },
        initWidgets: function () {
          this.aux = new AUX_EDIT_PAGE(this, !0);
          this.aux.setAnchors(0, 0, null, 0);
          this.aux.calcGeometry2 = function () {};
          this.aux.w = 911;
          this.fx = new FX_SENDS_EDIT_PAGE(this, !0);
          this.fx.setAnchors(911, 0, 0, 0);
          this.fx.calcGeometry2 = function () {};
        },
        paint: function () {
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(this.offsetX, 0, this.w, this.h);
        },
      }),
      BM_SLIDEOUT = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "BM_SLIDEOUT";
          this.w = BM_SO_W;
          this.h = BM_BOT_H;
          this.view = 0;
          this.needClip = !0;
          this.setAnchors(null, measures.topWidgetHeight + BM_TOP_H, 0, null);
          this.initWidgets();
        },
        calcGeometry: function () {
          mode != E_MODE.BIG && (this.y = measures.topWidgetHeight);
        },
        nextMode: function () {
          setBMode(2 == bmMode ? 0 : bmMode + 1);
        },
        setView: function (a) {
          this.view = a;
          this.BANKS_B.each(function (a) {
            a.hide();
          });
          this.PLAYER_B.each(function (a) {
            a.hide();
          });
          this.FUNCS_B.each(function (a) {
            a.hide();
          });
          switch (a) {
            case 0:
              this.BANKS_B.each(function (a) {
                a.show();
              });
              break;
            case 1:
              this.PLAYER_B.each(function (a) {
                a.show();
              });
              break;
            case 2:
              this.FUNCS_B.each(function (a) {
                a.show();
              });
          }
          regUpdate(this);
        },
        initWidgets: function () {
          var a = this,
            b = 6,
            c = 7;
          this.banks = new CHECKBUTTON(this);
          this.banks.text = lang.BANKS;
          this.banks.setAnchors(c, b);
          this.banks.w = 65;
          this.banks.color = "#1FC8F2";
          this.banks.bgColor = "#2555A4";
          this.banks.strokeColor = "#1AA6C9";
          this.banks.textColor = "#e9e9f9";
          this.banks.idx = 0;
          this.banks.getState = function () {
            this.state = a.view == this.idx;
          };
          this.banks.onToggleUp = function () {
            a.setView(this.idx);
          };
          this.player = new CHECKBUTTON(this);
          this.player.setAnchors(c + this.banks.w + 2, b);
          this.player.w = 65;
          this.player.text = lang.PLAYER;
          this.player.color = "#1FC8F2";
          this.player.bgColor = "#2555A4";
          this.player.strokeColor = "#1AA6C9";
          this.player.textColor = "#e9e9f9";
          this.player.idx = 1;
          this.player.getState = function () {
            this.state = a.view == this.idx;
          };
          this.player.onToggleUp = function () {
            a.setView(this.idx);
          };
          this.funcs = new CHECKBUTTON(this);
          this.funcs.setAnchors(c + this.banks.w + 2 + this.player.w + 2, b);
          this.funcs.w = 76;
          this.funcs.text = lang.FUNCTIONS;
          this.funcs.color = "#1FC8F2";
          this.funcs.bgColor = "#2555A4";
          this.funcs.strokeColor = "#1AA6C9";
          this.funcs.textColor = "#e9e9f9";
          this.funcs.idx = 2;
          this.funcs.getState = function () {
            this.state = a.view == this.idx;
          };
          this.funcs.onToggleUp = function () {
            a.setView(this.idx);
          };
          this.buttons = [this.banks, this.player, this.funcs];
          var b = 50,
            d = 41,
            c = 40;
          this.BANKS_B = [];
          this.PLAYER_B = [];
          this.FUNCS_B = [];
          c = 41;
          this.bank_l = new TButton(this);
          this.bank_l.setAnchors(c, b + d + 1);
          this.bank_l.setImages(res.FFUNC_B_OFF, res.FFUNC_B_YLW);
          this.bank_l.text = "<";
          this.bank_l.onPress = function () {
            bottomWidget.goLeft();
          };
          this.bank_r = new TButton(this);
          this.bank_r.setAnchors(null, b + d + 1, c);
          this.bank_r.setImages(res.FFUNC_B_OFF, res.FFUNC_B_YLW);
          this.bank_r.text = ">";
          this.bank_r.onPress = function () {
            bottomWidget.goRight();
          };
          this.bank_s = new TButton(this);
          this.bank_s.setAnchors(c, b + 1);
          this.bank_s.setImages(res.FFUNC_B_OFF, res.FFUNC_B_YLW);
          this.bank_s.text = lang.START;
          this.bank_s.onPress = function () {
            bottomWidget.gotoStart();
          };
          this.bank_e = new TButton(this);
          this.bank_e.setAnchors(null, b + 1, c);
          this.bank_e.setImages(res.FFUNC_B_OFF, res.FFUNC_B_YLW);
          this.bank_e.text = lang.END;
          this.bank_e.onPress = function () {
            bottomWidget.gotoEnd();
          };
          this.BANKS_B.push(this.bank_l);
          this.BANKS_B.push(this.bank_r);
          this.BANKS_B.push(this.bank_s);
          this.BANKS_B.push(this.bank_e);
          c = 40;
          this.pl = new CheckBox(this);
          this.pl.setAnchors(c, b + d);
          this.pl.setImages(res.PLAYS_OFF, res.PLAYS_STOP);
          this.pl.regKey("var.currentState");
          this.pl.regKey("var.present");
          this.pl.getState = function () {
            this.disabled = 0 == getValue("var.present");
            this.state = 2 == getValue("var.currentState") ? 1 : 0;
          };
          this.pl.onToggle = function () {
            doFfunc(E_FFUNC.PLAY);
          };
          this.rec = new CheckBox(this);
          this.rec.setAnchors(null, b + d, c);
          this.rec.setImages(res.RECS_OFF, res.RECS_STOP);
          this.rec.regKey("var.recBusy");
          this.rec.regKey("var.isRecording");
          this.rec.regKey("var.present");
          this.rec.getState = function () {
            this.state = getValue("var.isRecording");
            this.disabled = 0 == getValue("var.present") || 0.5 < getValue("var.recBusy");
          };
          this.rec.onToggle = function () {
            doFfunc(E_FFUNC.REC);
          };
          this.mtkpl = new CheckBox(this);
          this.mtkpl.setAnchors(c, b);
          this.mtkpl.setImages(res.MTK_PLAY, res.MTK_STOP);
          this.mtkpl.regKey("var.mtk.currentState");
          this.mtkpl.regKey("var.mtk.rec.currentState");
          this.mtkpl.regKey("var.mtk.rec.busy");
          this.mtkpl.regKey("var.mtk.present");
          this.mtkpl.getState = function () {
            this.state = 2 == getValue("var.mtk.currentState") ? 1 : 0;
            this.disabled = 0 == getValue("var.mtk.present") || 0.5 < getValue("var.mtk.rec.busy") || 0.5 < getValue("var.mtk.rec.currentState");
          };
          this.mtkpl.onToggle = function () {
            doFfunc(E_FFUNC.MTK_PLAY);
          };
          this.mtkrec = new CheckBox(this);
          this.mtkrec.setAnchors(null, b, c);
          this.mtkrec.setImages(res.MTK_REC_OFF, res.MTK_REC_ON);
          this.mtkrec.regKey("var.mtk.rec.currentState");
          this.mtkrec.regKey("var.mtk.rec.busy");
          this.mtkrec.regKey("var.mtk.currentState");
          this.mtkrec.regKey("var.mtk.present");
          this.mtkrec.getState = function () {
            this.state = getValue("var.mtk.rec.currentState");
            this.disabled = 0 == getValue("var.mtk.present") || 0.5 < getValue("var.mtk.rec.busy") || 0 != getValue("var.mtk.currentState");
          };
          this.mtkrec.onToggle = function () {
            doFfunc(E_FFUNC.MTK_REC);
          };
          this.PLAYER_B.push(this.pl);
          this.PLAYER_B.push(this.rec);
          this.PLAYER_B.push(this.mtkpl);
          this.PLAYER_B.push(this.mtkrec);
          this.newsnap = new Button(this);
          this.newsnap.setAnchors(null, b, c);
          this.newsnap.setImages(res.SS_OFF, res.SS_ON);
          this.newsnap.onPress = function () {
            doFfunc(E_FFUNC.NEWSNAP);
          };
          this.nextsnap = new Button(this);
          this.nextsnap.setAnchors(null, b + d, c);
          this.nextsnap.setImages(res.NXT_SNP_OFF, res.NXT_SNP_ON);
          this.nextsnap.onPress = function () {
            doFfunc(E_FFUNC.NEXT_SNAP);
          };
          this.updsnap = new Button(this);
          this.updsnap.setAnchors(c, b);
          this.updsnap.setImages(res.SSUPD_OFF, res.SSUPD_ON);
          this.updsnap.onPress = function () {
            doFfunc(E_FFUNC.UPDCURSNAP);
          };
          this.prevsnap = new Button(this);
          this.prevsnap.setAnchors(c, b + d);
          this.prevsnap.setImages(res.PRV_SNP_OFF, res.PRV_SNP_ON);
          this.prevsnap.onPress = function () {
            doFfunc(E_FFUNC.PREV_SNAP);
          };
          this.FUNCS_B.push(this.newsnap);
          this.FUNCS_B.push(this.nextsnap);
          this.FUNCS_B.push(this.updsnap);
          this.FUNCS_B.push(this.prevsnap);
          this.PLAYER_B.each(function (a) {
            a.hide();
          });
          this.FUNCS_B.each(function (a) {
            a.hide();
          });
          c = 16;
          b = 186;
          d = 42;
          this.gain = new CheckBox(this);
          this.gain.setPos(c, b);
          this.gain.setImages(res.SO_L_BTN_OFF, res.SO_L_BTN_TUR);
          this.gain.text = lang.GAIN;
          this.gain.textParam.offsetY = -3;
          this.gain.getState = function () {
            this.state = 0 == bmMode;
          };
          this.gain.onToggleUp = function () {
            setBMode(0);
          };
          this.eqdyn = new CheckBox(this);
          this.eqdyn.setPos(c, (b += d));
          this.eqdyn.setImages(res.SO_L_BTN_OFF, res.SO_L_BTN_TUR);
          this.eqdyn.text = lang.DYN + " / " + lang.EQ;
          this.eqdyn.textParam.offsetY = -3;
          this.eqdyn.getState = function () {
            this.state = 1 == bmMode;
          };
          this.eqdyn.onToggleUp = function () {
            setBMode(1);
          };
          this.sends = new CheckBox(this);
          this.sends.setPos(c, (b += d));
          this.sends.setImages(res.SO_L_BTN_OFF, res.SO_L_BTN_TUR);
          this.sends.text = lang.SENDS;
          this.sends.textParam.offsetY = -3;
          this.sends.getState = function () {
            this.state = 2 == bmMode;
          };
          this.sends.onToggleUp = function () {
            setBMode(2);
          };
          this.clearsolo = new Button(this);
          this.clearsolo.setImages(res.SO_M_BTN_OFF, res.SO_M_BTN_RED);
          this.clearsolo.setAnchors(c, null, null, 12);
          this.clearsolo.text = lang.CLEAR_SOLO;
          this.clearsolo.textColor = "#D6C560";
          this.clearsolo.textParam.offsetY = -3;
          this.clearsolo.textParam.font = "11pt open_sans_condensedbold";
          this.clearsolo.onPress = function () {
            mixerWidget.clearSolos();
            regUpdate(a);
          };
          this.clearmute = new Button(this);
          this.clearmute.setImages(res.SO_M_BTN_OFF, res.SO_M_BTN_RED);
          this.clearmute.setAnchors(null, null, c, 12);
          this.clearmute.text = lang.CLEAR_MUTE;
          this.clearmute.textColor = "#D66D60";
          this.clearmute.textParam.offsetY = -3;
          this.clearmute.textParam.font = "11pt open_sans_condensedbold";
          this.clearmute.onPress = function () {
            mixerWidget.clearMutes();
            regUpdate(a);
          };
        },
        drawHeader: function (a, b, c) {
          c.font = "12pt open_sans_condensedbold";
          var d = c.measureText(a).width,
            d = ((this.w - d - 20 - 34) / 2) | 0;
          c.fillStyle = "#0A1957";
          c.fillRect(17, b - 2, d, 2);
          c.fillRect(this.w - 17, b - 2, -d, 2);
          c.fillStyle = "#3A88E1";
          c.fillRect(17, b, d, 1);
          c.fillRect(this.w - 17, b, -d, 1);
          this.condensed && (b += 10);
          c.drawText(a, this.w / 2, b - 6, { shadow: [color.black, 0, 1, 1], color: "#E0E0E0", align: "center", font: "12pt open_sans_condensedbold" });
        },
        paint: function () {
          ctx.fillStyle = "#2353A2";
          ctx.fillRect(0, 0, this.w, this.h);
          fillVertPattern(res.SO2_TILE, this.h);
          drawImage(res.SO2_BOTTOM, 0, this.h - res.soBottom.h());
          drawImage(res.SO2_TOP, 0, 0);
          ctx.fillStyle = "#1FC8F2";
          ctx.fillRect(7, 37, this.w - 14, 3);
          this.drawHeader(lang.EDIT_VIEW, this.gain.y - 14, ctx);
        },
      });
    function VtoLINRANGE(a, b, c) {
      return a * (c - b) + b;
    }
    function VtoLOGRANGE(a, b, c) {
      return Math.round(b * Math.pow(c, a));
    }
    function VtoRATIO_DE(a) {
      return 1 / a;
    }
    function VtoFREQ(a) {
      return Math.round(20 * Math.pow(1102.5, a));
    }
    function VtoFREQ20(a) {
      return Math.round(20 * Math.pow(1e3, a));
    }
    function VtoQ(a) {
      return 0.05 * Math.pow(300, a);
    }
    function VtoEQGAIN20(a) {
      return 40 * a - 20;
    }
    function VtoEQGAIN15(a) {
      return precision(30 * a - 15, 1);
    }
    function VtoPERCENT(a) {
      return (100 * a) | 0;
    }
    function QtoV(a) {
      return bound(Math.log(a / 0.05) / Math.log(300), 0, 1);
    }
    function VtoHPFfreq(a) {
      return 0 == a ? lang.OFF : VtoFREQ(a);
    }
    function VtoLPFfreq(a) {
      return 1 == a ? lang.OFF : VtoFREQ(a);
    }
    function VtoDS_RATIO(a) {
      1e-5 > a && (a = 1e-5);
      a = VtoRATIO_DE(a);
      return (a = 60 < a ? "∞" : 2 > a ? precision(a, 2) + "" : precision(a, 1) + "");
    }
    function addDotZero1(a) {
      a += "";
      return -1 == a.indexOf(".") ? a + ".0" : a;
    }
    function addDotZero2(a) {
      return parseInt(a) + "." + (parseInt(10 * a) % 10) + "" + (parseInt(100 * a) % 10);
    }
    function formatFreq(a) {
      return 1e3 > a ? a | 0 : 1e4 > a ? addDotZero2(a / 1e3) + "k" : addDotZero1(precision(a / 1e3, 1)) + "k";
    }
    function DeesserVtoFREQ(a) {
      return 2e3 * Math.pow(7.5, a);
    }
    function FREQtoX(a, b) {
      return ((b - 1) * Math.log(a / 20)) / Math.log(1102.5);
    }
    function chopLastDot(a) {
      if (null == a || "" == a) return a;
      a += "";
      return a.endsWith(".") ? a.substr(0, a.length - 1) : a;
    }
    var EQChannel = Class.create(Widget, {
        initialize: function ($super, b, c) {
          $super(b);
          this.widgetName = "EQChannel";
          this.y = 40;
          this.condensed = c || !1;
          this.enabled = !1;
          this.buttons = [];
          this.mode = 1;
          this.bypass = !1;
          this.keyPrefix = null;
          this.initWidgets();
        },
        setMode: function (a) {
          this.mode = a;
          77 == a && 0 == this.SWITCHER.state && this.SWITCHER.setState(1);
          77 != a && 1 == this.SWITCHER.state && this.SWITCHER.setState(0);
          var b = selectedStrip.name + "eq.";
          77 == a ? this.SWITCHER.setState(1) : this.SWITCHER.setState(0);
          switch (this.mode) {
            case 0:
              b += "hpf.";
              break;
            case 1:
              b += "b1.";
              break;
            case 2:
              b += "b2.";
              break;
            case 3:
              b += "b3.";
              break;
            case 4:
              b += "b4.";
              break;
            case 5:
              b += "lpf.";
          }
          this.led_kp = b;
          this.slFREQ.setKeyPrefix(b);
          this.slQ.setKeyPrefix(b);
          this.slGAIN.setKeyPrefix(b);
          this.checkState();
          regUpdate(this);
        },
        onShow: function () {
          this.eq.isClipping = !1;
          this.syncSliders();
          this.calcGeometry();
        },
        connectKeys: function () {
          if (null != selectedStrip) {
            var a = selectedStrip.name + "eq.";
            this.keyPrefix2 = this.keyPrefix = a;
            this.bBYPASS.setKeyPrefix(this.keyPrefix);
            this.bDESSER.setKeyPrefix(selectedStrip.name);
            this.BASS.setKeyPrefix(a);
            this.MID.setKeyPrefix(a);
            this.TREBLE.setKeyPrefix(a);
            this.D1.setKeyPrefix(selectedStrip.name);
            this.D2.setKeyPrefix(selectedStrip.name);
            this.D3.setKeyPrefix(selectedStrip.name);
            switch (this.mode) {
              case 0:
                a += "hpf.";
                break;
              case 1:
                a += "b1.";
                break;
              case 2:
                a += "b2.";
                break;
              case 3:
                a += "b3.";
                break;
              case 4:
                a += "b4.";
                break;
              case 5:
                a += "lpf.";
            }
            this.led_kp = a;
            this.slFREQ.setKeyPrefix(a);
            this.slQ.setKeyPrefix(a);
            this.slGAIN.setKeyPrefix(a);
            this.polarity && this.polarity.setKey(selectedStrip.name + "invert");
            this.eq.rta = null;
            this.eq.rta2 = null;
            this.checkState();
            this.bypass = toBool(getValue(this.keyPrefix + "bypass"));
          }
        },
        checkState: function () {
          (IS_UI_24 && selectedStrip.type == E_STRIP_TYPE.IN) || 5 != this.mode || this.setMode(1);
          var a = getValue(this.keyPrefix + "easy");
          this.dbu1.hide();
          this.dbu2.hide();
          this.dbu3.hide();
          if (a)
            this.led_bass.show(),
              this.led_mid.show(),
              this.led_high.show(),
              this.led_freq.hide(),
              this.led_q.hide(),
              this.led_gain.hide(),
              this.BASS.show(),
              this.MID.show(),
              this.TREBLE.show(),
              this.slFREQ.hide(),
              this.slQ.hide(),
              this.slGAIN.hide();
          else if (
            (this.led_freq.show(),
              this.led_q.show(),
              this.led_gain.show(),
              this.led_bass.hide(),
              this.led_mid.hide(),
              this.led_high.hide(),
              this.BASS.hide(),
              this.MID.hide(),
              this.TREBLE.hide(),
              this.slFREQ.show(),
              this.slQ.show(),
              this.slGAIN.show(),
            0 == this.mode || 5 == this.mode)
          )
            this.slQ.hide(), this.slGAIN.hide();
          if (0 == this.SWITCHER.state) this.D1.hide(), this.D2.hide(), this.D3.hide(), this.led_d1.hide(), this.led_d2.hide(), this.led_d3.hide();
          else {
            this.D1.show();
            this.D2.show();
            this.D3.show();
            this.led_d1.show();
            this.led_d2.show();
            this.led_d3.show();
            for (var b = 0; b < this.LEDS.length; b++) this.LEDS[b].hide();
            for (b = 0; b < this.SLIDERS.length; b++) this.SLIDERS[b].hide();
          }
          selectedStrip.type == E_STRIP_TYPE.IN
            ? (this.bDESSER.show(), this.SWITCHER.show(), this.polarity && this.polarity.show())
            : (1 == this.SWITCHER.state && this.SWITCHER.setState(0), this.SWITCHER.hide(), this.bDESSER.hide(), this.polarity && this.polarity.hide());
          0 == this.SWITCHER.state &&
          0 == a &&
          (0 == this.mode || 5 == this.mode
            ? (this.slQ.hide(), this.slGAIN.hide(), this.led_q.hide(), this.led_gain.hide(), IS_UI_24 && (this.dbu1.show(), this.dbu2.show(), this.dbu3.show()))
            : (this.slQ.show(), this.slGAIN.show(), this.led_q.show(), this.led_gain.show()));
        },
        syncSliders: function () {
          this.enabled && this.connectKeys();
        },
        calcGeometry2: function () {
          this.w = this.parent.w - this.x;
          this.h = this.parent.h - this.y - 5;
        },
        calcGeometry: function () {
          this.calcGeometry2();
          if (isDefined(this.slFREQ)) {
            this.eq.setSize(this.w - this.eq.x - 240, this.h - this.eq.y - 66);
            var a = -208;
            this.led_freq.setPos(this.w + a - 9, 46);
            this.led_q.setPos(this.w + a - 9 + 70, 46);
            this.led_gain.setPos(this.w + a - 9 + 140, 46);
            this.led_bass.setPos(this.w + a - 9, 46);
            this.led_mid.setPos(this.w + a - 9 + 70, 46);
            this.led_high.setPos(this.w + a - 9 + 140, 46);
            this.led_d1.setPos(this.w + a - 9 + 0, 46);
            this.led_d2.setPos(this.w + a - 9 + 70, 46);
            this.led_d3.setPos(this.w + a - 9 + 140, 46);
            this.slFREQ.x = this.w + a + 0;
            this.slQ.x = this.w + a + 70;
            this.slGAIN.x = this.w + a + 140;
            this.BASS.x = this.w + a + 0;
            this.MID.x = this.w + a + 70;
            this.TREBLE.x = this.w + a + 140;
            this.D1.x = (this.w + a + 0) | 0;
            this.D2.x = (this.w + a + 70) | 0;
            this.D3.x = (this.w + a + 140) | 0;
            this.slFREQ.y = this.slQ.y = this.slGAIN.y = this.BASS.y = this.MID.y = this.TREBLE.y = this.D1.y = this.D2.y = this.D3.y = 130;
            this.slGAIN.h = this.slQ.h = this.slFREQ.h = this.BASS.h = this.MID.h = this.TREBLE.h = this.h - this.slGAIN.y - 41 - 30;
            this.D1.h = this.D2.h = this.D3.h = this.h - this.slGAIN.y - 41 - 30;
            for (var b = this.h - 40, a = this.eq.x, c = [], d = 0; d < this.btns.length; d++) this.btns[d].enabled && c.push(this.btns[d]);
            for (var f = this.eq.w + 1, d = 0; d < c.length; d++) f -= c[d].w;
            dx = (f - 58) / (c.length - 1);
            for (d = 0; d < c.length; d++) c[d].setPos(a, b), (a += c[d].w + dx), c[d] == this.bRTA && (a += 58);
            this.bRTAHOLD.setPos(this.bRTA.x + 73, b + 1);
          }
        },
        initWidgets: function () {
          var a = this;
          this.preset = new MENUBUTTON(this);
          this.preset.setSize(130, 29);
          this.preset.setAnchors(null, 10, 10, null);
          this.preset.text = lang.PRESETS;
          this.preset.color = color.red;
          this.preset.onPress = function () {
            a.showPresets();
          };
          var b = 23;
          this.condensed && (b = 20);
          this.eq = new EQParamWidget(this);
          this.eq.setPos(40, b);
          var c = this.eq;
          this.led_freq = new FXLEDPlain(this);
          this.led_freq.label = "FREQ";
          this.led_freq.sign = "hZ";
          this.led_freq.getState = function () {
            return getValue(a.led_kp + "freq");
          };
          this.led_freq.formatValue = function (b) {
            var c = VtoFREQ(b),
              c = formatFreq(c) + "";
            0 == a.mode && 0 == b && (c = lang.OFF);
            return c;
          };
          this.led_q = new FXLEDPlain(this);
          this.led_q.label = "Q";
          this.led_q.sign = "";
          this.led_q.getState = function () {
            return getValue(a.led_kp + "q");
          };
          this.led_q.formatValue = function (a) {
            var b = "...";
            0 != this.parent.mode && ((b = VtoQ(a)), (b = addDotZero2(b + 1e-5) + ""));
            return b;
          };
          this.led_gain = new FXLEDPlain(this);
          this.led_gain.label = "GAIN";
          this.led_gain.sign = "dB";
          this.led_gain.getState = function () {
            return getValue(a.led_kp + "gain");
          };
          this.led_gain.formatValue = function (a) {
            var b = "...";
            0 != this.parent.mode && ((b = VtoEQGAIN20(a)), (b = (0 < b ? "+" : "") + addDotZero1(precision(b, 1)) + ""));
            return b;
          };
          this.led_bass = new FXLEDPlain(this);
          this.led_bass.label = "BASS";
          this.led_bass.sign = "dB";
          this.led_bass.getState = function () {
            return getValue(a.keyPrefix + "b1.gain");
          };
          this.led_bass.formatValue = function (a) {
            a = VtoEQGAIN20(a);
            return (a = (0 < a ? "+" : "") + addDotZero1(precision(a, 1)) + "");
          };
          this.led_mid = new FXLEDPlain(this);
          this.led_mid.label = "MID";
          this.led_mid.sign = "dB";
          this.led_mid.getState = function () {
            return getValue(a.keyPrefix + "b2.gain");
          };
          this.led_mid.formatValue = function (a) {
            a = VtoEQGAIN20(a);
            return (a = (0 < a ? "+" : "") + addDotZero1(precision(a, 1)) + "");
          };
          this.led_high = new FXLEDPlain(this);
          this.led_high.label = "TREBLE";
          this.led_high.sign = "dB";
          this.led_high.getState = function () {
            return getValue(a.keyPrefix + "b3.gain");
          };
          this.led_high.formatValue = function (a) {
            a = VtoEQGAIN20(a);
            return (a = (0 < a ? "+" : "") + addDotZero1(precision(a, 1)) + "");
          };
          this.LEDS = [this.led_freq, this.led_q, this.led_gain, this.led_bass, this.led_mid, this.led_high];
          this.slFREQ = new EQSlider(this);
          this.slFREQ.keyPart = "freq";
          this.slFREQ.setPos(600, 100);
          this.slFREQ.textUp = "22kHz";
          this.slFREQ.textBot = "20Hz";
          this.slFREQ.mV = [1, findV(VtoFREQ, 50), findV(VtoFREQ, 100), findV(VtoFREQ, 200), findV(VtoFREQ, 500), findV(VtoFREQ, 1e3), findV(VtoFREQ, 2e3), findV(VtoFREQ, 5e3), findV(VtoFREQ, 1e4), 0];
          this.slFREQ.onDouble = function () {
            switch (this.parent.mode) {
              case 1:
                this.setValue(FREQtoV(200));
                break;
              case 2:
                this.setValue(FREQtoV(1e3));
                break;
              case 3:
                this.setValue(FREQtoV(4e3));
                break;
              case 4:
                this.setValue(FREQtoV(1e4));
            }
          };
          this.slFREQ.setVal = function (b) {
            0 == a.mode && b > FREQtoV(1e3) && (b = FREQtoV(1e3));
            5 == a.mode && b < FREQtoV(1e3) && (b = FREQtoV(1e3));
            null != this.key ? setValue(this.key, b) : log("setVal: " + this.name + " no PARAM-KEY!");
          };
          this.slFREQ.valueFunc = function () {
            selectedStrip.setNameValue("eq.prmod", 1);
            regUpdate(c);
            regUpdate(a.led_freq);
          };
          this.slQ = new EQSlider(this);
          this.slQ.keyPart = "q";
          this.slQ.setPos(660, 100);
          this.slQ.textUp = "15";
          this.slQ.textBot = "0.05";
          this.slQ.setDefaultValue(findV(VtoQ, 1));
          this.slQ.mV = [1, findV(VtoQ, 10), findV(VtoQ, 5), findV(VtoQ, 2), findV(VtoQ, 0.5), findV(VtoQ, 0.2), findV(VtoQ, 0.1), 0];
          this.slQ.valueFunc = function () {
            selectedStrip.setNameValue("eq.prmod", 1);
            regUpdate(c);
            regUpdate(a.led_q);
          };
          this.slGAIN = new EQSlider(this);
          this.slGAIN.keyPart = "gain";
          this.slGAIN.fader = res.eqVFaderRed;
          this.slGAIN.setPos(720, 100);
          this.slGAIN.textUp = "+20dB";
          this.slGAIN.textBot = "-20dB";
          this.slGAIN.setDefaultValue(0.5);
          this.slGAIN.mV = [1, findV(VtoEQGAIN20, 15), findV(VtoEQGAIN20, 10), findV(VtoEQGAIN20, 5), findV(VtoEQGAIN20, -5), findV(VtoEQGAIN20, -10), findV(VtoEQGAIN20, -15), 0];
          this.slGAIN.valueFunc = function () {
            selectedStrip.setNameValue("eq.prmod", 1);
            regUpdate(c);
            regUpdate(a.led_gain);
          };
          this.BASS = new EQSlider(this);
          this.BASS.keyPart = "b1.gain";
          this.BASS.setPos(600, 100);
          this.BASS.textUp = "+20dB";
          this.BASS.textBot = "-20dB";
          this.BASS.fader = res.eqVFaderGreen;
          this.BASS.setDefaultValue(0.5);
          this.BASS.valueFunc = function (b) {
            var d = a.keyPrefix2 + "b1.";
            setValue(d + "gain", b);
            setValue(d + "q", 0.16);
            setValue(d + "freq", FREQtoV(20));
            selectedStrip.setNameValue("eq.prmod", 1);
            regUpdate(c);
            regUpdate(a.led_bass);
          };
          this.MID = new EQSlider(this);
          this.MID.keyPart = "b2.gain";
          this.MID.setPos(660, 100);
          this.MID.textUp = "+20dB";
          this.MID.textBot = "-20dB";
          this.MID.fader = res.eqVFaderRed;
          this.MID.setDefaultValue(0.5);
          this.MID.valueFunc = function (b) {
            var d = a.keyPrefix2 + "b2.";
            setValue(d + "gain", b);
            setValue(d + "q", 0.222);
            setValue(d + "freq", FREQtoV(1e3));
            selectedStrip.setNameValue("eq.prmod", 1);
            regUpdate(c);
            regUpdate(a.led_mid);
          };
          this.TREBLE = new EQSlider(this);
          this.TREBLE.keyPart = "b3.gain";
          this.TREBLE.setPos(720, 100);
          this.TREBLE.textUp = "+20dB";
          this.TREBLE.textBot = "-20dB";
          this.TREBLE.fader = res.eqVFaderPurple;
          this.TREBLE.setDefaultValue(0.5);
          this.TREBLE.valueFunc = function (b) {
            var d = a.keyPrefix2 + "b3.";
            setValue(d + "gain", b);
            setValue(d + "q", 0.33);
            setValue(d + "freq", FREQtoV(22050));
            selectedStrip.setNameValue("eq.prmod", 1);
            regUpdate(c);
            regUpdate(a.led_high);
          };
          this.SLIDERS = [this.BASS, this.MID, this.TREBLE, this.slFREQ, this.slQ, this.slGAIN];
          this.bRTA = new CheckBox(this);
          this.bRTA.setSize(70, 30);
          this.bRTA.setImages(res.RTA_OFF, res.RTA_ON);
          this.bRTA.getState = function () {
            var a = selectedStrip.name,
              b = getValue("var.rta") + ".";
            this.state = a == b ? 1 : 0;
          };
          this.bRTA.onToggleUp = function () {
            setValue("var.rta", chopLastDot(selectedStrip.name));
          };
          this.bRTA.onToggleDown = function () {
            setValue("var.rta", "");
            a.eq.rta = null;
            a.eq.rta2 = null;
            regUpdate(a.eq);
          };
          this.bRTAHOLD = new TCheckBox(this);
          this.bRTAHOLD.setImages(res.FFUNC_B_OFF, res.FFUNC_B_RED);
          this.bRTAHOLD.text = lang.HOLD_RTA.replace(" ", "\n");
          this.bRTAHOLD.textParam.font = "15px open_sans_condensedbold";
          this.bRTAHOLD.textParam.dy = 13;
          this.bRTAHOLD.textParam.offsetY = -4;
          this.bRTAHOLD.textColor = color.black2;
          this.bRTAHOLD.textColorActive = color.white;
          this.bRTAHOLD.shadowColorActive = "#333";
          this.bRTAHOLD.shadowColor = "#ccc";
          this.bRTAHOLD.getState = function () {
            this.state = a.eq.holdRTAstate();
          };
          this.bRTAHOLD.onToggleUp = function () {
            return a.eq.holdRTA();
          };
          this.bRTAHOLD.onToggleDown = function () {
            return a.eq.unHoldRTA();
          };
          this.bRESET = new Button(this);
          this.bRESET.setSize(70, 30);
          this.bRESET.setImages(res.bRESET_OFF, res.bRESET_ON);
          this.bRESET.valueFunc = function () {
            resetParEQ(selectedChID);
            a.checkState();
            regUpdate(this);
            updateByKey(selectedChID + "eq.bypass");
          };
          this.bEASY = new CheckBox(this);
          this.bEASY.needBG = !0;
          this.bEASY.setSize(70, 30);
          this.bEASY.setImages(res.bEZEQ_OFF, res.bEZEQ_ON);
          this.bEASY.getState = function () {
            this.state = getValue(a.keyPrefix + "easy");
          };
          this.bEASY.onToggleUp = function () {
            var b = !1;
            isNear(getValue(a.keyPrefix2 + "hpf.freq"), 0)
              ? IS_UI_24 && !isNear(getValue(a.keyPrefix2 + "lpf.freq"), 1)
                ? (b = !0)
                : isNear(getValue(a.keyPrefix2 + "b4.gain"), 0.5)
                  ? isNear(getValue(a.keyPrefix2 + "b1.freq"), FREQtoV(20))
                    ? isNear(getValue(a.keyPrefix2 + "b2.freq"), FREQtoV(1e3))
                      ? isNear(getValue(a.keyPrefix2 + "b3.freq"), FREQtoV(22050)) || (b = !0)
                      : (b = !0)
                    : (b = !0)
                  : (b = !0)
              : (b = !0);
            b
              ? ((confOk.valueFunc = function () {
                resetParEQ(selectedChID, !0);
                setValue(a.keyPrefix2 + "b1.freq", FREQtoV(20));
                setValue(a.keyPrefix2 + "b2.freq", FREQtoV(1e3));
                setValue(a.keyPrefix2 + "b3.freq", FREQtoV(22050));
                setValue(a.keyPrefix2 + "b1.gain", 0.5);
                setValue(a.keyPrefix2 + "b2.gain", 0.5);
                setValue(a.keyPrefix2 + "b3.gain", 0.5);
                setValue(a.keyPrefix2 + "b1.q", 0.16);
                setValue(a.keyPrefix2 + "b2.q", 0.222);
                setValue(a.keyPrefix2 + "b3.q", 0.33);
                setValue(a.keyPrefix + "easy", 1);
                a.checkState();
                regUpdate(a);
              }),
                showConfBox(lang.CURRENT_VALUES_WILL_BE_LOST))
              : (setValue(a.keyPrefix + "easy", 1), a.checkState(), regUpdate(this));
          };
          this.bEASY.onToggleDown = function () {
            setValue(a.keyPrefix + "easy", 0);
            a.checkState();
            regUpdate(this);
          };
          this.bDESSER = new CheckBox(this);
          this.bDESSER.setSize(70, 30);
          this.bDESSER.keyPart = "deesser.enabled";
          this.bDESSER.setImages(res.DESS_OFF, res.DESS_ON);
          this.bDESSER.onToggleUp = function () {
            a.SWITCHER.setState(1);
            a.checkState();
            regUpdate(a);
          };
          this.bDESSER.onToggleDown = function () {
            a.SWITCHER.setState(0);
            a.checkState();
            regUpdate(a);
          };
          this.bBYPASS = new CheckBox(this);
          this.bBYPASS.keyPart = "bypass";
          this.bBYPASS.setSize(70, 30);
          this.bBYPASS.setImages(res.bBYPASS_OFF, res.bBYPASS_ON);
          this.bBYPASS.onToggleUp = function () {
            a.bypass = !0;
            regUpdate(a);
            updateByKey(this.key);
          };
          this.bBYPASS.onToggleDown = function () {
            a.bypass = !1;
            regUpdate(a);
            updateByKey(this.key);
          };
          IS_UI_24
            ? ((this.polarity = new CheckBox(this)), this.polarity.setPos(37, 7), this.polarity.setImages(res.bPIOff, res.bPIOn), (this.btns = [this.polarity, this.bEASY, this.bRTA, this.bRESET, this.bDESSER, this.bBYPASS]))
            : (this.btns = [this.bEASY, this.bRTA, this.bRESET, this.bDESSER, this.bBYPASS]);
          this.SWITCHER = new SWITCHBOX(this);
          this.SWITCHER.setItems([lang.EQ, lang.DEESSER]);
          this.SWITCHER.setItemWidth(96);
          this.SWITCHER.setAnchors(null, null, 17, 9);
          this.SWITCHER.valueFunc = function () {
            a.checkState();
            regUpdate(a);
          };
          this.led_d1 = new FXLEDPlain(this);
          this.led_d1.label = "FREQ";
          this.led_d1.sign = "hZ";
          this.led_d1.getState = function () {
            return getValue(selectedStrip.name + "deesser.freq");
          };
          this.led_d1.formatValue = function (a) {
            return formatFreq(DeesserVtoFREQ(a)) + "";
          };
          this.led_d2 = new FXLEDPlain(this);
          this.led_d2.label = "THRESH";
          this.led_d2.sign = "dB";
          this.led_d2.getState = function () {
            return getValue(selectedStrip.name + "deesser.threshold");
          };
          this.led_d2.formatValue = VtoTHRESH;
          this.led_d3 = new FXLEDPlain(this);
          this.led_d3.label = "RATIO";
          this.led_d3.sign = "";
          this.led_d3.getState = function () {
            return getValue(selectedStrip.name + "deesser.ratio");
          };
          this.led_d3.formatValue = VtoDS_RATIO;
          this.D1 = new EQSlider(this);
          this.D1.keyPart = "deesser.freq";
          this.D1.setPos(720, 100);
          this.D1.textUp = "15kHz";
          this.D1.textBot = "2000Hz";
          this.D1.fader = res.eqVFaderGreen;
          this.D1.valueFunc = function () {
            regUpdate(c);
            regUpdate(a.led_d1);
          };
          this.D2 = new EQSlider(this);
          this.D2.keyPart = "deesser.threshold";
          this.D2.setPos(720, 100);
          this.D2.textUp = "6 dB";
          this.D2.textBot = "-90";
          this.D2.fader = res.eqVFaderYellow;
          this.D2.valueFunc = function () {
            regUpdate(c);
            regUpdate(a.led_d2);
          };
          this.D3 = new EQSlider(this);
          this.D3.keyPart = "deesser.ratio";
          this.D3.setPos(720, 100);
          this.D3.fader = res.eqVFaderYellow;
          this.D3.textUp = "1:1";
          this.D3.textBot = "∞:1";
          this.D3.valueFunc = function () {
            regUpdate(c);
            regUpdate(a.led_d3);
          };
          this.dbu1 = new CHECKBUTTON(this);
          this.dbu1.setAnchors(null, 100, 33, null);
          this.dbu1.setSize(90, 30);
          this.dbu1.text = "12 dBu";
          this.dbu1.idx = 0;
          this.dbu1.color = color.orange;
          this.dbu1.getState = function () {
            this.state = getValue(selectedStrip.name + "eq." + (5 == a.mode ? "lpf." : "hpf.") + "slope") == this.idx;
          };
          this.dbu1.onToggleUp = function () {
            setValue(selectedStrip.name + "eq." + (5 == a.mode ? "lpf." : "hpf.") + "slope", this.idx);
            regUpdate(a);
          };
          this.dbu2 = new CHECKBUTTON(this);
          this.dbu2.setAnchors(null, 140, 33, null);
          this.dbu2.setSize(90, 30);
          this.dbu2.text = "24 dBu";
          this.dbu2.idx = 1;
          this.dbu2.color = color.orange;
          this.dbu2.getState = function () {
            this.state = getValue(selectedStrip.name + "eq." + (5 == a.mode ? "lpf." : "hpf.") + "slope") == this.idx;
          };
          this.dbu2.onToggleUp = function () {
            setValue(selectedStrip.name + "eq." + (5 == a.mode ? "lpf." : "hpf.") + "slope", this.idx);
            regUpdate(a);
          };
          this.dbu3 = new CHECKBUTTON(this);
          this.dbu3.setAnchors(null, 180, 33, null);
          this.dbu3.setSize(90, 30);
          this.dbu3.text = "36 dBu";
          this.dbu3.idx = 2;
          this.dbu3.color = color.orange;
          this.dbu3.getState = function () {
            this.state = getValue(selectedStrip.name + "eq." + (5 == a.mode ? "lpf." : "hpf.") + "slope") == this.idx;
          };
          this.dbu3.onToggleUp = function () {
            setValue(selectedStrip.name + "eq." + (5 == a.mode ? "lpf." : "hpf.") + "slope", this.idx);
            regUpdate(a);
          };
          this.dbu1.hide();
          this.dbu2.hide();
          this.dbu3.hide();
          this.condensed &&
          (this.slFREQ.setFader(res.BMSL_SILVER, 18, 0, 6),
            this.slQ.setFader(res.BMSL_SILVER, 18, 0, 6),
            this.slGAIN.setFader(res.BMSL_RED, 18, 0, 6),
            this.D1.setFader(res.BMSL_GREEN, 18, 0, 6),
            this.D2.setFader(res.BMSL_GOLD, 18, 0, 6),
            this.D3.setFader(res.BMSL_GOLD, 18, 0, 6),
            this.BASS.setFader(res.BMSL_GREEN, 18, 0, 6),
            this.MID.setFader(res.BMSL_RED, 18, 0, 6),
            this.TREBLE.setFader(res.BMSL_PURPLE, 18, 0, 6));
        },
        onDown: function (a, b) {
          this.lastPressPoint = this.pressPoint;
          this.pressPoint = [a, b];
        },
        onUp: function (a) {
          var b = Date.now(),
            c = Math.abs(this.lastPressPoint[0] - this.pressPoint[0]),
            d = Math.abs(this.lastPressPoint[1] - this.pressPoint[1]);
          2 < mouseTargets.length ||
          (isDefined(tHash[a]) && 2 < tHash[a].length) ||
          (30 > c && 30 > d && b - this.lastClickTime < DBL_CLK_TIME ? (this.onDouble(), (this.lastClickTime = b - DBL_CLK_TIME)) : (this.lastClickTime = b));
        },
        onDouble: function () {
          setMode(E_MODE.MIX);
        },
        showPresets: function () {
          this.menu = new PRESET_MENU2(null, "eqch", this, this.parent.color);
          regUpdate(this.menu);
        },
        loadPreset: function (a, b) {
          var c = selectedStrip.name.slice(0, -1);
          applyPreset(c, a);
          selectedStrip.setNameValue("eq.prmod", 0);
          isDefined(b) && selectedStrip.setNameValue("eq.prname", b);
          this.checkState();
          return !0;
        },
        savePreset: function (a) {
          var b = ".eq.easy .eq.hpf.freq .eq.b1.freq .eq.b1.q .eq.b1.gain .eq.b2.freq .eq.b2.q .eq.b2.gain .eq.b3.freq .eq.b3.q .eq.b3.gain .eq.b4.freq .eq.b4.q .eq.b4.gain .deesser.enabled .deesser.freq .deesser.threshold .deesser.ratio".split(
            " "
          );
          IS_UI_24 && (b.push(".eq.lpf.freq"), b.push(".eq.lpf.slope"), b.push(".eq.hpf.slope"));
          for (var c = {}, d = this.keyPrefix.split("."), d = d[0] + "." + d[1], f = 0; f < b.length; f++) null != getValue(d + b[f]) && (c[b[f]] = getValue(d + b[f]));
          selectedStrip.setNameValue("eq.prmod", 0);
          isDefined(a) && selectedStrip.setNameValue("eq.prname", a);
          return c;
        },
        paint: function () {
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, 0, this.w, this.h);
          this.paintMarks();
          this.dbu1.enabled && drawText(lang.SLOPE, this.dbu1.x + this.dbu1.w / 2, this.dbu1.y - 20, { font: font.tabText, color: color.white, align: "center", valign: "middle" });
          this.preset && drawImage(res.dbx, this.preset.x - 48, 13);
          this.condensed && ((ctx.lineWidth = 2), (ctx.lineCap = "butt"), (ctx.strokeStyle = "#444"), ctx.drawLine(3, 9, 3, this.h - 8 + 1), (ctx.strokeStyle = "#090909"), ctx.drawLine(2, 8, 2, this.h - 8));
        },
        paintMarks: function () {
          ctx.font = font.eqMarks;
          ctx.textAlign = "center";
          var a = this.eq.h,
            b = this.eq.w,
            c = a / 4,
            d = (a / 2) | 0,
            f = [50, 100, 200, 500, 1e3, 2e3, 5e3, 1e4],
            e = "50 100 200 500 1k 2k 5k 10k".split(" ");
          ctx.fillStyle = "#101115";
          ctx.fillRect(16, this.eq.y - 12, this.w - 16 - 230, this.eq.h + 34);
          ctx.translate(16, this.eq.y - 12);
          ctx.fillStyle = color.grad1;
          ctx.fillRect(0, 0, this.w - 16 - 230, 7);
          ctx.translate(-16, -(this.eq.y - 12));
          ctx.save();
          ctx.translate(this.eq.x, this.eq.y);
          ctx.fillStyle = color.graphMarks;
          ctx.textAlign = "right";
          ctx.fillText("+20", -4, 9);
          ctx.fillText("+10", -4, c + 4);
          ctx.fillText("0", -4, d + 3);
          ctx.fillText("-10", -4, 3 * c + 4);
          ctx.fillText("-20", -4, a - 1);
          ctx.textAlign = "left";
          ctx.fillText("20", 0, a + 15);
          ctx.fillText("22k", b - 18, a + 15);
          ctx.textAlign = "center";
          for (c = 0; c < f.length; c++) ctx.fillText(e[c], FREQtoX(f[c], b), a + 15);
          ctx.restore();
        },
      }),
      EQAux = Class.create(EQChannel, {
        initialize: function ($super, b, c) {
          $super(b, c);
          this.widgetName = "EQAux";
          this.keyPrefixAfs = this.keyPrefix = "";
          this.idx = 0;
          this.condensed = c || !1;
          this.setAnchors(0, 40, 0, 5);
        },
        connectKeys: function () {
          if (null != selectedStrip) {
            var a = selectedStrip.name;
            this.keyPrefix = a + "eq.peak.";
            this.keyPrefixAfs = a;
            this.eq.setKey(a);
            this.eq.haveFilters = IS_UI_24 && 2 > selectedStrip.subId;
            this.connectIdx();
            this.AFS_OFF.setKey(selectedStrip.name + "afs.enabled");
            this.bBYPASS.setKeyPrefix(a + "eq.");
            this.bypass = toBool(getValue(a + "eq.bypass"));
            this.polarity && this.polarity.setKey(selectedStrip.name + "invert");
          }
        },
        connectIdx: function () {
          if (0 <= this.eq.idx) {
            var a = this.keyPrefix + this.eq.idx;
            this.led.setKey(a);
            this.slGAIN.setKeyPrefix(a);
            regUpdate(this.slGAIN);
          }
        },
        syncSliders: function () {
          this.enabled && selectedStrip.type == E_STRIP_TYPE.AUX && ((this.eq.rta = null), (this.eq.rta2 = null), this.connectKeys());
        },
        onShow: function () {
          this.eq.isClipping = !1;
          this.syncSliders();
        },
        calcGeometry: function () {
          this.eq.updateGeometry();
          for (var a = this.h - 40, b = [], c = 0; c < this.btns.length; c++) b.push(this.btns[c]);
          for (var d = this.eq.w - 216, c = 0; c < b.length; c++) d -= b[c].w;
          for (var d = (d - 58) / (b.length - 1), f = 258, c = 0; c < b.length; c++) b[c].setPos(f, a), (f += b[c].w + d), b[c] == this.bRTA && (f += 58);
          this.bRTAHOLD.setPos(this.bRTA.x + 73, a + 1);
        },
        initWidgets: function () {
          var a = this;
          this.preset = new MENUBUTTON(this);
          this.preset.setSize(130, 29);
          this.preset.setAnchors(null, 10, 10, null);
          this.preset.text = lang.PRESETS;
          this.preset.color = color.red;
          this.preset.onPress = function () {
            a.showPresets();
          };
          this.sEQ = new GEQ_SMALL(this);
          this.sEQ.setAnchors(40, 6);
          this.eq = new GEQ_GRAPH(this);
          this.eq.setAnchors(40, 78, 120, 64);
          this.eq.onSelect = function (b) {
            a.connectIdx();
          };
          this.eq.onChange = function () {
            regUpdate(this);
            regUpdate(a.slGAIN);
            regUpdate(a.led);
            regUpdate(a.sEQ);
          };
          this.led = new FXLEDPlain(this);
          this.led.setAnchors(null, 56, 26, null);
          this.led.w = 60;
          this.led.label = lang.GAIN;
          this.led.sign = "dB";
          this.led.formatValue = function (a) {
            a = VtoEQGAIN15(a);
            return (a = (0 < a ? "+" : "") + precision(a, 1) + "");
          };
          this.slGAIN = new EQSlider(this);
          this.slGAIN.keyPart = "";
          this.slGAIN.fader = res.eqVFaderRed;
          this.slGAIN.setAnchors(null, 144, 32, 41);
          this.slGAIN.textUp = "+15dB";
          this.slGAIN.textBot = "-15dB";
          this.slGAIN.setDefaultValue(0.5);
          this.slGAIN.mV = [1, findV(VtoEQGAIN15, 10), findV(VtoEQGAIN15, 5), findV(VtoEQGAIN15, -5), findV(VtoEQGAIN15, -10), 0];
          this.slGAIN.valueFunc = function () {
            regUpdate(a.eq);
            regUpdate(a.led);
            regUpdate(a.sEQ);
            selectedStrip.setNameValue("eq.prmod", 1);
          };
          this.AFS_SETTINGS = new Button(this);
          this.AFS_SETTINGS.setImages(res.SETUP_OFF, res.SETUP_ON);
          this.AFS_SETTINGS.setAnchors(80, null, null, 3);
          this.AFS_SETTINGS.onPress = function () {
            var b = new AFS_POPUP(null, a),
              c = a.eq.globalX() + a.eq.w,
              d = a.eq.globalY();
            a.condensed && (d -= 80);
            var f = a.globalX(),
              e = a.globalY() + a.h;
            b.setSize(c - f, e - d);
            b.setPos(f, d);
            b.updateGeometry();
            regUpdate(b);
          };
          this.AFS_OFF = new CheckBox(this);
          this.AFS_OFF.setImages(res.OFF_OFF, res.ON_ON);
          this.AFS_OFF.setAnchors(162, null, null, 3);
          this.AFS_OFF.getState = function () {
            this.disabled = 0 == getValue("afs.enabled");
          };
          this.bRTA = new CheckBox(this);
          this.bRTA.setSize(70, 30);
          this.bRTA.setImages(res.RTA_OFF, res.RTA_ON);
          this.bRTA.getState = function () {
            var a = selectedStrip.name,
              c = getValue("var.rta") + ".";
            this.state = a == c ? 1 : 0;
          };
          this.bRTA.onToggleUp = function () {
            setValue("var.rta", chopLastDot(selectedStrip.name));
          };
          this.bRTA.onToggleDown = function () {
            setValue("var.rta", "");
            a.eq.rta = null;
            a.eq.rta2 = null;
            regUpdate(a.eq);
          };
          this.bRTAHOLD = new TCheckBox(this);
          this.bRTAHOLD.setImages(res.FFUNC_B_OFF, res.FFUNC_B_RED);
          this.bRTAHOLD.text = lang.HOLD_RTA.replace(" ", "\n");
          this.bRTAHOLD.textParam.font = "15px open_sans_condensedbold";
          this.bRTAHOLD.textParam.dy = 13;
          this.bRTAHOLD.textParam.offsetY = -4;
          this.bRTAHOLD.textColor = color.black2;
          this.bRTAHOLD.textColorActive = color.white;
          this.bRTAHOLD.shadowColorActive = "#333";
          this.bRTAHOLD.shadowColor = "#ccc";
          this.bRTAHOLD.getState = function () {
            this.state = a.eq.holdRTAstate();
          };
          this.bRTAHOLD.onToggleUp = function () {
            return a.eq.holdRTA();
          };
          this.bRTAHOLD.onToggleDown = function () {
            return a.eq.unHoldRTA();
          };
          this.bRESET = new Button(this);
          this.bRESET.setImages(res.bRESET_OFF, res.bRESET_ON);
          this.bRESET.valueFunc = function () {
            resetGraphEQ(selectedChID);
            regUpdate(this);
          };
          this.bBYPASS = new CheckBox(this);
          this.bBYPASS.keyPart = "bypass";
          this.bBYPASS.setImages(res.bBYPASS_OFF, res.bBYPASS_ON);
          this.bBYPASS.onToggleUp = function () {
            a.bypass = !0;
            regUpdate(a);
          };
          this.bBYPASS.onToggleDown = function () {
            a.bypass = !1;
            regUpdate(a);
          };
          this.polarity = new CheckBox(this);
          this.polarity.setImages(res.bPIOff, res.bPIOn);
          IS_UI_24 || this.polarity.hide();
          this.btns = [this.polarity, this.bRTA, this.bRESET, this.bBYPASS];
          this.condensed && this.slGAIN.setFader(res.BMSL_RED, 18, 0, 6);
        },
        paintMarks: function () {
          ctx.font = font.eqMarks;
          ctx.textAlign = "center";
          var a = this.eq.h,
            b = a / 6,
            c = (a / 2) | 0;
          ctx.fillStyle = "#101115";
          ctx.fillRect(16, this.eq.y - 20, this.eq.w + 35, this.eq.h + 20 + 20);
          ctx.translate(16, this.eq.y - 20);
          ctx.fillStyle = color.grad1;
          ctx.fillRect(1, 0, this.w - 16 - 110 - 2 + 2, 7);
          ctx.translate(-16, -(this.eq.y - 20));
          ctx.save();
          ctx.translate(this.eq.x, this.eq.y);
          ctx.textAlign = "right";
          ctx.fillStyle = color.graphMarks;
          ctx.fillText("+15", -3, 9);
          ctx.fillText("+10", -3, c - 2 * b + 3);
          ctx.fillText("+5", -3, c - b + 3);
          ctx.fillText("0", -3, c + 3);
          ctx.fillText("-5", -3, c + b + 3);
          ctx.fillText("-10", -3, c + 2 * b + 3);
          ctx.fillText("-15", -3, a - 3);
          ctx.restore();
        },
        showPresets: function () {
          this.menu = new PRESET_MENU2(null, "eqaux", this, this.parent.color);
          regUpdate(this.menu);
        },
        savePreset: function (a) {
          for (var b = [], c = 0; c < this.eq.bands; c++) b.push(".eq.peak." + c);
          IS_UI_24 && (b.push(".eq.lpf"), b.push(".eq.hpf"));
          for (var d = {}, c = this.keyPrefix.split("."), f = c[0] + "." + c[1], c = 0; c < b.length; c++) null != getValue(f + b[c]) && (d[b[c]] = getValue(f + b[c]));
          selectedStrip.setNameValue("eq.prmod", 0);
          isDefined(a) && selectedStrip.setNameValue("eq.prname", a);
          return d;
        },
        loadPreset: function (a, b) {
          var c = selectedStrip.name.slice(0, -1);
          applyPreset(c, a);
          selectedStrip.setNameValue("eq.prmod", 0);
          isDefined(b) && selectedStrip.setNameValue("eq.prname", b);
          regUpdate(this);
          return !0;
        },
        paint: function () {
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, 0, this.w, this.h);
          this.paintMarks();
          this.preset && drawImage(res.dbx, this.preset.x - 48, 13);
          drawImage(res.AFS2LOGO, 30, this.h - 35);
          ctx.fillStyle = "rgba(255,255,255,0.1)";
          ctx.fillRoundRect(16, this.h - 42, this.AFS_OFF.x + this.AFS_OFF.w + 12 - 16, 40, 4);
          this.condensed && ((ctx.lineWidth = 2), (ctx.lineCap = "butt"), (ctx.strokeStyle = "#444"), ctx.drawLine(3, 9, 3, this.h - 8 + 1), (ctx.strokeStyle = "#090909"), ctx.drawLine(2, 8, 2, this.h - 8));
        },
      }),
      EQMaster = Class.create(EQAux, {
        initialize: function ($super, b, c) {
          $super(b, c);
          this.widgetName = "EQMaster";
          this.left = !0;
        },
        setLeft: function (a) {
          this.left = a;
          this.eq.setRight(!a);
          this.syncSliders();
          regUpdate(this);
          regUpdate(this.parent.stereo);
        },
        setLinked: function (a) {
          var b = this.left ? "l" : "r",
            c = this.left ? "r" : "l";
          if (a) for (var d = 0; 31 > d; d++) setValue("m.eq.peak." + c + "." + d, getValue("m.eq.peak." + b + "." + d));
          setValue("m.eq.hpf." + c, getValue("m.eq.hpf." + b));
          setValue("m.eq.lpf." + c, getValue("m.eq.lpf." + b));
          setValue("m.eq.linked", a ? 1 : 0);
          this.setLeft(!0);
        },
        connectKeys: function () {
          this.keyPrefix = "m.eq.peak.";
          this.kp = "m.eq.";
          this.keyPrefixAfs = "m.";
          this.idx = this.eq.idx;
          this.connectIdx();
        },
        connectIdx: function () {
          if (0 <= this.eq.idx) {
            var a = this.keyPrefix + (this.left ? "l." : "r.") + this.eq.idx;
            this.led.setKey(a);
            this.slGAIN.setKeyPrefix(a);
            regUpdate(this.slGAIN);
          }
        },
        doReset: function () {
          resetGraphEQ("m");
          regUpdate(editWidget);
        },
        syncSliders: function () {
          this.enabled && ((this.eq.rta = null), (this.eq.rta2 = null), this.connectKeys());
        },
        onShow: function () {
          this.eq.isClipping = !1;
          this.syncSliders();
        },
        calcGeometry: function () {
          this.eq.updateGeometry();
          for (var a = this.h - 40, b = [], c = 0; c < this.btns.length; c++) b.push(this.btns[c]);
          for (var d = this.eq.w - 218, c = 0; c < b.length; c++) d -= b[c].w;
          d -= 56;
          IS_UI_24 && (d -= 52);
          for (var d = d / (b.length - 1), f = 258, c = 0; c < b.length; c++) b[c].setPos(f, a), (f += b[c].w + d), b[c] == this.bRTA && (f += 58), IS_UI_24 && b[c] == this.polarity_l && (f += 52);
          this.bRTAHOLD.setPos(this.bRTA.x + 73, a + 1);
          IS_UI_24 && this.polarity_r.setPos(this.polarity_l.x + 50, a);
        },
        initWidgets: function () {
          var a = this;
          this.preset = new MENUBUTTON(this);
          this.preset.setSize(130, 29);
          this.preset.setAnchors(null, 10, 10, null);
          this.preset.text = lang.PRESETS;
          this.preset.color = color.red;
          this.preset.onPress = function () {
            a.showPresets();
          };
          this.sEQ = new GEQ_SMALL(this);
          this.sEQ.setAnchors(40, 6);
          this.sEQ.master = !0;
          this.sEQ.left = !0;
          this.sEQ2 = new GEQ_SMALL(this);
          this.sEQ2.setAnchors(40 + this.sEQ.w + 2, 6);
          this.sEQ2.master = !0;
          this.sEQ2.left = !1;
          this.eq = new GEQ_GRAPH(this);
          this.eq.setAnchors(40, 78, 120, 64);
          this.eq.stereo = !0;
          this.eq.master = !0;
          this.eq.setKey("m.");
          this.eq.haveFilters = IS_UI_24;
          this.eq.onSelect = function (b) {
            a.connectIdx();
          };
          this.eq.onChange = function () {
            regUpdate(this);
            regUpdate(a.slGAIN);
            regUpdate(a.led);
            regUpdate(a.sEQ);
            regUpdate(a.sEQ2);
          };
          this.led = new FXLEDPlain(this);
          this.led.setAnchors(null, 56, 26, null);
          this.led.w = 60;
          this.led.label = lang.GAIN;
          this.led.sign = "dB";
          this.led.formatValue = function (a) {
            a = VtoEQGAIN15(a);
            return (a = (0 < a ? "+" : "") + precision(a, 1) + "");
          };
          this.slGAIN = new EQSlider(this);
          this.slGAIN.keyPart = "";
          this.slGAIN.fader = res.eqVFaderRed;
          this.slGAIN.setAnchors(null, 144, 32, 41);
          this.slGAIN.textUp = "+15dB";
          this.slGAIN.textBot = "-15dB";
          this.slGAIN.setDefaultValue(0.5);
          this.slGAIN.mV = [1, findV(VtoEQGAIN15, 10), findV(VtoEQGAIN15, 5), findV(VtoEQGAIN15, -5), findV(VtoEQGAIN15, -10), 0];
          this.slGAIN.valueFunc = function (b) {
            1 == getValue("m.eq.linked") && setValue(this.key.replace(".l.", ".r."), b);
            selectedStrip.setNameValue("eq.prmod", 1);
            regUpdate(a.eq);
            regUpdate(a.led);
            regUpdate(a.sEQ);
            regUpdate(a.sEQ2);
          };
          this.AFS_SETTINGS = new Button(this);
          this.AFS_SETTINGS.setImages(res.SETUP_OFF, res.SETUP_ON);
          this.AFS_SETTINGS.setAnchors(80, null, null, 3);
          this.AFS_SETTINGS.onPress = function () {
            var b = new AFS_POPUP(null, a),
              c = a.eq.globalX() + a.eq.w,
              d = a.eq.globalY();
            a.condensed && (d -= 80);
            var f = a.globalX(),
              e = a.globalY() + a.h;
            b.setSize(c - f, e - d);
            b.setPos(f, d);
            b.updateGeometry();
            regUpdate(b);
          };
          this.AFS_OFF = new CheckBox(this);
          this.AFS_OFF.setImages(res.OFF_OFF, res.ON_ON);
          this.AFS_OFF.setAnchors(162, null, null, 3);
          this.AFS_OFF.setKey("m.afs.enabled");
          this.AFS_OFF.getState = function () {
            this.disabled = 0 == getValue("afs.enabled");
          };
          this.bRTA = new CheckBox(this);
          this.bRTA.setSize(70, 30);
          this.bRTA.setImages(res.RTA_OFF, res.RTA_ON);
          this.bRTA.getState = function () {
            var a = selectedStrip.name,
              c = getValue("var.rta") + ".";
            this.state = a == c ? 1 : 0;
          };
          this.bRTA.onToggleUp = function () {
            setValue("var.rta", chopLastDot(selectedStrip.name));
          };
          this.bRTA.onToggleDown = function () {
            setValue("var.rta", "");
            a.eq.rta = null;
            a.eq.rta2 = null;
            regUpdate(a.eq);
          };
          this.bRTAHOLD = new TCheckBox(this);
          this.bRTAHOLD.setImages(res.FFUNC_B_OFF, res.FFUNC_B_RED);
          this.bRTAHOLD.text = lang.HOLD_RTA.replace(" ", "\n");
          this.bRTAHOLD.textParam.font = "15px open_sans_condensedbold";
          this.bRTAHOLD.textParam.dy = 13;
          this.bRTAHOLD.textParam.offsetY = -4;
          this.bRTAHOLD.textColor = color.black2;
          this.bRTAHOLD.textColorActive = color.white;
          this.bRTAHOLD.shadowColorActive = "#333";
          this.bRTAHOLD.shadowColor = "#ccc";
          this.bRTAHOLD.getState = function () {
            this.state = a.eq.holdRTAstate();
          };
          this.bRTAHOLD.onToggleUp = function () {
            return a.eq.holdRTA();
          };
          this.bRTAHOLD.onToggleDown = function () {
            return a.eq.unHoldRTA();
          };
          this.bRESET = new Button(this);
          this.bRESET.setSize(70, 30);
          this.bRESET.setImages(res.bRESET_OFF, res.bRESET_ON);
          this.bRESET.valueFunc = function () {
            a.doReset();
          };
          this.bBYPASS = new CheckBox(this);
          this.bBYPASS.keyPart = "bypass";
          this.bBYPASS.setKeyPrefix("m.eq.");
          this.bBYPASS.setSize(70, 30);
          this.bBYPASS.setImages(res.bBYPASS_OFF, res.bBYPASS_ON);
          this.bBYPASS.onToggle = function () {
            regUpdate(a);
          };
          this.polarity_l = new CheckBox(this);
          this.polarity_l.setImages(res.bPIOff, res.bPIOn);
          this.polarity_l.setKey("m.l.invert");
          this.polarity_l.text = lang.L;
          this.polarity_l.textParam.font = "14px open_sans_condensedbold";
          this.polarity_l.textParam.align = "right";
          this.polarity_l.textParam.offsetX = -10;
          this.polarity_l.textParam.offsetY = -2;
          this.polarity_l.textParam.color = "#222";
          this.polarity_l.textParam.shadow[0] = "#ccc";
          this.polarity_r = new CheckBox(this);
          this.polarity_r.setImages(res.bPIOff, res.bPIOn);
          this.polarity_r.setKey("m.r.invert");
          this.polarity_r.text = "R";
          this.polarity_r.textParam.font = "14px open_sans_condensedbold";
          this.polarity_r.textParam.align = "left";
          this.polarity_r.textParam.offsetX = 10;
          this.polarity_r.textParam.offsetY = -2;
          this.polarity_r.textParam.color = "#222";
          this.polarity_r.textParam.shadow[0] = "#ccc";
          this.btns = [this.polarity_l, this.bRTA, this.bRESET, this.bBYPASS];
          IS_UI_24 || (this.polarity_l.hide(), this.polarity_r.hide());
          this.condensed && this.slGAIN.setFader(res.BMSL_RED, 18, 0, 6);
        },
        paintMarks: function () {
          ctx.textAlign = "center";
          var a = this.eq.h,
            b = a / 6,
            c = (a / 2) | 0;
          ctx.fillStyle = "#101115";
          ctx.fillRect(16, this.eq.y - 20, this.eq.w + 35, this.eq.h + 20 + 20);
          ctx.fillStyle = "#999";
          ctx.setShadow(color.black, 4, 1, 1);
          ctx.font = "23px open_sans_condensedbold";
          ctx.fillText(lang.L, this.sEQ.x - 13, this.sEQ.y + 31);
          ctx.fillText(lang.R, this.sEQ2.x + this.sEQ2.w + 13, this.sEQ.y + 31);
          ctx.shadowColor = "transparent";
          ctx.font = font.eqMarks;
          ctx.translate(16, this.eq.y - 20);
          ctx.fillStyle = color.grad1;
          ctx.fillRect(1, 0, this.w - 16 - 110 - 2 + 2, 7);
          ctx.translate(-16, -(this.eq.y - 20));
          ctx.save();
          ctx.translate(this.eq.x, this.eq.y);
          ctx.textAlign = "right";
          ctx.fillStyle = color.graphMarks;
          ctx.fillText("+15", -3, 9);
          ctx.fillText("+10", -3, c - 2 * b + 3);
          ctx.fillText("+5", -3, c - b + 3);
          ctx.fillText("0", -3, c + 3);
          ctx.fillText("-5", -3, c + b + 3);
          ctx.fillText("-10", -3, c + 2 * b + 3);
          ctx.fillText("-15", -3, a - 3);
          ctx.restore();
        },
        showPresets: function () {
          this.menu = new PRESET_MENU2(null, "eqm", this, this.parent.color);
          regUpdate(this.menu);
        },
        savePreset: function (a) {
          var b = [];
          b.push(".eq.linked");
          for (var c = 0; c < this.eq.bands; c++) b.push(".eq.peak.l." + c), b.push(".eq.peak.r." + c);
          IS_UI_24 && (b.push(".eq.lpf.l"), b.push(".eq.lpf.r"), b.push(".eq.hpf.l"), b.push(".eq.hpf.r"));
          for (var d = {}, c = 0; c < b.length; c++) null != getValue("m" + b[c]) && (d[b[c]] = getValue("m" + b[c]));
          selectedStrip.setNameValue("eq.prmod", 0);
          isDefined(a) && selectedStrip.setNameValue("eq.prname", a);
          return d;
        },
        loadPreset: function (a, b) {
          applyPreset("m", a);
          selectedStrip.setNameValue("eq.prmod", 0);
          isDefined(b) && selectedStrip.setNameValue("eq.prname", b);
          regUpdate(editWidget);
          return !0;
        },
      }),
      RTA_HOLD_VALUE = null,
      EQParamWidget = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "EQParamWidget";
          this.needMoveEvt = this.needClip = !0;
          this.RTAonly = !1;
          this.touchRadius = 32;
          this.RATE = 48e3;
          this.pressed = !1;
          this.touchID = -1;
          this.peaks = this.grd = null;
          this.bypass = !1;
          this.bands = 5;
          this.colors = ["#2D5EAA", "#2c8f29", "#b23535", "#752E99", "#C7AB35", color.orange];
          this.isClipping = !1;
          this.timer = null;
          this.point1 = [-1, -1];
          this.point1id = -1;
          this.point2 = [-1, -1];
          this.point2id = -2;
          this.p1 = [-1, -1];
          this.p2 = [-1, -1];
          this.tn = 0;
          this.dist = -1;
          this.moved = this.easy = !1;
          this.stY = -1;
          this.cachedBgBypass = this.cachedBg = null;
          this.cachedBgW = this.cachedBgH = 0;
          this.lastP = !1;
          this.arr = "hpf b1 b2 b3 b4 lpf".split(" ");
          this.rta2 = this.rtaTimer = this.rta = this.egrad = null;
          this.delta = [0, 0];
          this.ds = !1;
          this.lp_slope = this.hp_slope = this.ds_thr = this.ds_ratio = this.ds_freq = 0;
          this.showPreset = !0;
          this.showCurrentCurve = !isLocal;
        },
        calcGeometry: function () {
          var a = this.w;
          this.grd = ctx.createRadialGradient(a / 2, -10, a / 10, a / 2, -10, a / 2 + 10);
          this.grd.addColorStop(0, "rgba(255,255,255,0.2)");
          this.grd.addColorStop(1, "rgba(255,255,255,0)");
        },
        getValues: function () {
          this.peaks = [];
          var a = this.parent.keyPrefix;
          this.bypass = toBool(getValue(a + "bypass"));
          this.easy = toBool(getValue(a + "easy"));
          selectedStrip.type == E_STRIP_TYPE.IN
            ? ((this.ds = 1 == selectedStrip.getNameValue("deesser.enabled")),
              (this.ds_freq = selectedStrip.getNameValue("deesser.freq")),
              (this.ds_ratio = selectedStrip.getNameValue("deesser.ratio")),
              (this.ds_thr = selectedStrip.getNameValue("deesser.threshold")))
            : (this.ds = !1);
          var b = "hpf b1 b2 b3 b4 lpf".split(" ");
          this.bands = IS_UI_24 && selectedStrip.type == E_STRIP_TYPE.IN ? 6 : 5;
          IS_UI_24 && ((this.hp_slope = selectedStrip.getNameValue("eq.hpf.slope")), (this.lp_slope = selectedStrip.getNameValue("eq.lpf.slope")));
          for (var c = 0; c < this.bands; c++) {
            var d = a + b[c],
              f = VtoFREQ(getValue(d + ".freq"));
            if (0 == c || 5 == c) this.peaks.push([f, 1, 0]);
            else {
              var e = VtoQ(getValue(d + ".q")),
                d = VtoEQGAIN20(getValue(d + ".gain"));
              this.peaks.push([f, e, d]);
            }
          }
        },
        onDown: function (a, b, c) {
          if (!this.RTAonly) {
            a -= this.globalX();
            var d = b - this.globalY();
            this.stY = b;
            this.moved = !1;
            switch (this.tn) {
              case 0:
                this.point1id = c;
                this.point1 = [a, d];
                break;
              case 1:
                (this.point2id = c), (this.point2 = [a, d]);
            }
            this.tn++;
            if (!this.pressed) {
              b = (0.5 * this.h) / 20;
              var f = (this.h / 2) | 0;
              this.getValues();
              for (var e = 0; e < this.bands; e++) {
                if (this.easy) {
                  if (0 == e) continue;
                  if (4 == e) continue;
                  if (5 == e) continue;
                }
                var g = this.freqToX(this.peaks[e][0]),
                  h = f - this.peaks[e][2] * b;
                this.easy && (1 == e && (g += this.w / 6), 3 == e && (g -= this.w / 6));
                var k = this.touchRadius;
                if (20 > g || g > this.w - 20 || 20 > h || h > this.h - 20) k += this.touchRadius;
                if (isInCircle(g, h, k, a, d)) {
                  this.parent.setMode(e);
                  this.pressed = !0;
                  this.touchID = c;
                  this.delta = [g - a, h - d];
                  return;
                }
              }
              this.ds &&
              ((g = this.freqToX(DeesserVtoFREQ(this.ds_freq))),
                (h = (3 + (1 - this.ds_thr / 2) * (this.h - 6)) | 0),
              isInCircle(g, h, this.touchRadius, a, d) && (this.parent.setMode(77), (this.pressed = !0), (this.touchID = c), (this.delta = [g - a, h - d]), regUpdate(this)));
            }
          }
        },
        onMove: function (a, b, c) {
          if (!this.RTAonly) {
            var d = this.parent;
            5 < Math.abs(b - this.stY) && (this.moved = !0);
            this.pressed && this.touchID == c && ((a += this.delta[0]), (b += this.delta[1]));
            a = bound(a - this.globalX(), 0, this.w);
            b = bound(b - this.globalY(), 0, this.h);
            switch (c) {
              case this.point1id:
                this.point1 = [a, b];
                break;
              case this.point2id:
                this.point2 = [a, b];
            }
            if (2 == this.tn) {
              c = Math.sqrt(Math.pow(this.point1[0] - this.point2[0], 2) + Math.pow(this.point1[1] - this.point2[1], 2));
              b = (bound(c - this.dist, -20, 20) / this.w) * 0.6;
              if (0 < this.dist)
                switch (d.mode) {
                  case 1:
                  case 2:
                  case 3:
                  case 4:
                    a = this.parent.slQ.getVal();
                    a = bound(a - b, 0, 1);
                    this.parent.slQ.setValue(a);
                    regUpdate(this);
                    regUpdate(d.led_q);
                    regUpdate(d.slQ);
                    selectedStrip.setNameValue("eq.prmod", 1);
                    break;
                  case 77:
                    (a = selectedStrip.getNameValue("deesser.ratio")), (a = bound(a - b, 0, 1)), selectedStrip.setNameValue("deesser.ratio", a), regUpdate(this), regUpdate(d.led_d3), regUpdate(d.D3);
                }
              this.dist = c;
            } else if (this.pressed && this.touchID == c) {
              switch (d.mode) {
                case 0:
                  c = bound(a / this.w, 0, 0.5588);
                  d.slFREQ ? d.slFREQ.setValue(c) : selectedStrip.setNameValue("eq.hpf.freq", c);
                  selectedStrip.setNameValue("eq.prmod", 1);
                  break;
                case 5:
                  c = bound(a / this.w, 0.5588, 1);
                  d.slFREQ ? d.slFREQ.setValue(c) : selectedStrip.setNameValue("eq.lpf.freq", c);
                  selectedStrip.setNameValue("eq.prmod", 1);
                  break;
                case 1:
                case 2:
                case 3:
                case 4:
                  if (this.easy) {
                    a = 1 - b / this.h;
                    switch (d.mode) {
                      case 1:
                        d.BASS.setValue(a);
                        break;
                      case 2:
                        d.MID.setValue(a);
                        break;
                      case 3:
                        d.TREBLE.setValue(a);
                    }
                    regUpdate(this);
                  } else
                    d.slFREQ ? d.slFREQ.setValue(a / this.w) : selectedStrip.setNameValue("eq.b" + d.mode + ".freq", a / this.w),
                      d.slGAIN ? d.slGAIN.setValue(1 - b / this.h) : selectedStrip.setNameValue("eq.b" + d.mode + ".gain", 1 - b / this.h);
                  selectedStrip.setNameValue("eq.prmod", 1);
                  break;
                case 77:
                  c = bound(a, this.freqToX(2e3) | 0, this.freqToX(15e3) | 0) - this.freqToX(2e3);
                  a = this.freqToX(15e3) - this.freqToX(2e3);
                  b = (bound(b, (this.h / 2) | 0, this.h) - this.h / 2) | 0;
                  var f = (this.h / 2) | 0;
                  d.D1.setValue(c / a);
                  d.D2.setValue(1 - b / f);
              }
              regUpdate(this);
              regUpdate(d.led);
            }
          }
        },
        onUp: function (a) {
          if (!this.RTAonly) {
            this.dist = -1;
            switch (this.tn) {
              case 1:
                this.point1 = [-1, -1];
                break;
              case 2:
                (this.point2 = [-1, -1]), (this.lastClickTime = 0);
            }
            this.tn--;
            a = this.parent;
            var b = Date.now();
            if (b - this.lastClickTime < DBL_CLK_TIME && this.lastClickIdx == a.mode && this.lastP == this.pressed) {
              if (this.pressed)
                if (77 == a.mode) a.D1.setValue(0.773310034), a.D2.setValue(0.46875), a.D3.setValue(0.4);
                else if (this.easy)
                  switch (a.mode) {
                    case 1:
                      a.BASS.setValue(0.5);
                      break;
                    case 2:
                      a.MID.setValue(0.5);
                      break;
                    case 3:
                      a.TREBLE.setValue(0.5);
                  }
                else {
                  if (0 != a.mode && 5 != a.mode) a.slGAIN.setValue(0.5);
                  else if (a.dbu1 && a.dbu1.enabled) a.dbu1.onDown();
                  switch (a.mode) {
                    case 0:
                      a.slFREQ.setValue(0);
                      break;
                    case 1:
                      a.slFREQ.setValue(FREQtoV(200));
                      break;
                    case 2:
                      a.slFREQ.setValue(FREQtoV(1e3));
                      break;
                    case 3:
                      a.slFREQ.setValue(FREQtoV(4e3));
                      break;
                    case 4:
                      a.slFREQ.setValue(FREQtoV(1e4));
                      break;
                    case 5:
                      a.slFREQ.setValue(1);
                  }
                }
              else setMode(E_MODE.MIX);
              regUpdate(this);
            }
            this.lastP = this.pressed;
            this.pressed = !1;
            this.moved || 0 != this.tn || (this.lastClickTime = b);
            this.lastClickIdx = a.mode;
            this.touchID = -1;
          }
        },
        onWheel: function (a) {
          if (!this.RTAonly) {
            var b = this.parent;
            switch (b.mode) {
              case 0:
              case 5:
                var c = selectedStrip.name + "eq." + (5 == b.mode ? "lpf." : "hpf.") + "slope",
                  d = getValue(c);
                0 < a ? d-- : d++;
                d = bound(d, 0, 2);
                setValue(c, d);
                regUpdate(b);
                break;
              case 1:
              case 2:
              case 3:
              case 4:
                if (this.easy) break;
                c = "eq." + this.arr[this.parent.mode] + ".q";
                d = selectedStrip.getNameValue(c);
                d = bound(d + a / 120 / 30, 0, 1);
                selectedStrip.setNameValue(c, d);
                regUpdate(this);
                regUpdate(b.led_q);
                regUpdate(b.slQ);
                break;
              case 77:
                (d = selectedStrip.getNameValue("deesser.ratio")), (d = bound(d + a / 120 / 30, 0, 1)), selectedStrip.setNameValue("deesser.ratio", d), regUpdate(this), regUpdate(b.led_d3), regUpdate(b.D3);
            }
          }
        },
        freqToX: function (a) {
          return ((this.w - 1) * Math.log(a / 20)) / Math.log(1102.5);
        },
        designPeak: function (a, b, c, d) {
          if (-0.001 <= d && 0.001 >= d) return [1, 0, 0, 1, 0, 0];
          d = Math.pow(10, d / 40);
          b = (2 * Math.PI * b) / a;
          a = Math.cos(b);
          c = (b * (2 * Math.PI - b)) / (c * (4 * Math.PI - b));
          b = 1 + c / d;
          var f = Math.pow(10, 0) / b;
          return [(1 + c * d) * f, -(2 * a) * f, (1 - c * d) * f, 1, -(2 * a) / b, (1 - c / d) / b];
        },
        designHP: function (a, b, c) {
          if (20.1 > b) return [1, 0, 0, 1, 0, 0];
          b = (2 * Math.PI * b) / a;
          a = Math.cos(b);
          c = Math.sin(b) / (2 * c);
          b = 1 + c;
          var d = Math.pow(10, 0) / b;
          return [0.5 * (1 + a) * d, -(1 + a) * d, 0.5 * (1 + a) * d, 1, -(2 * a) / b, (1 - c) / b];
        },
        designLP: function (a, b, c) {
          if (22049.9 < b) return [1, 0, 0, 1, 0, 0];
          b = (2 * Math.PI * b) / a;
          a = Math.cos(b);
          c = Math.sin(b) / (2 * c);
          b = 1 + c;
          var d = Math.pow(10, 0) / b;
          return [0.5 * (1 - a) * d, (1 - a) * d, 0.5 * (1 - a) * d, 1, -(2 * a) / b, (1 - c) / b];
        },
        showClip: function () {
          this.isClipping = !0;
          regUpdate(this);
          var a = this;
          clearTimeout(this.timer);
          this.timer = setTimeout(function () {
            a.isClipping = !1;
            regUpdate(a);
          }, 3e3);
        },
        setRTA: function (a) {
          this.rta = a;
          var b = this;
          clearTimeout(this.rtaTimer);
          this.rtaTimer = setTimeout(function () {
            b.rta = null;
            regUpdate(b);
          }, 1e3);
          regUpdate(this);
        },
        holdRTAstate: function () {
          return !!RTA_HOLD_VALUE;
        },
        holdRTA: function () {
          RTA_HOLD_VALUE = this.rta;
          regUpdate(this);
        },
        unHoldRTA: function () {
          RTA_HOLD_VALUE = null;
          regUpdate(this);
        },
        paint: function () {
          this.getValues();
          (this.cachedBgW == this.w && this.cachedBgH == this.h) || this.cachePaint();
          ctx.drawImage(this.cachedBg, 0, 0, this.w, this.h);
          this.bypass && ((ctx.fillStyle = "rgba(255,255,255,0.04)"), ctx.fillRect(0, 0, this.w, this.h));
          null != this.rta && this.drawRTA();
          RTA_HOLD_VALUE && this.drawRTAhold();
          if (!this.RTAonly) {
            this.easy && ((ctx.globalAlpha = 0.07), (ctx.fillStyle = this.egrad), ctx.fillRect(0, 0, this.w, this.h), (ctx.globalAlpha = 1));
            var a = this.w,
              b = this.h,
              c = this.peaks,
              d = (0.5 * b) / 20,
              f = (b / 2) | 0;
            if (null == this.freqPlot || this.freqPlot.length != a) {
              this.freqPlot = Array(a);
              this.freqPlot2 = Array(a);
              this.xToFreq = Array(a);
              this.xToAngular = Array(a);
              this.xCos1 = Array(a);
              this.xCos2 = Array(a);
              for (var e = 0; e < a; e++) {
                var b = 20 * Math.pow(1102.5, (1 * e) / a),
                  g = (2 * b * Math.PI) / this.RATE,
                  h = Math.cos(g),
                  k = Math.cos(2 * g);
                this.xToFreq[e] = b;
                this.xToAngular[e] = g;
                this.xCos1[e] = h;
                this.xCos2[e] = k;
              }
            }
            for (b = 0; b < a; b++) (this.freqPlot[b] = 0), (this.freqPlot2[b] = 0);
            for (b = 0; b < this.bands; b++) {
              var m,
                g = 1;
              switch (b) {
                case 0:
                  m = this.designHP(this.RATE, bound(c[b][0], 20, 1e3), Math.sqrt(2) / 2);
                  g = this.hp_slope + 1;
                  break;
                case 5:
                  m = this.designLP(this.RATE, bound(c[b][0], 1e3, 22050), Math.sqrt(2) / 2);
                  g = this.lp_slope + 1;
                  break;
                default:
                  m = this.designPeak(this.RATE, c[b][0], c[b][1], c[b][2]);
              }
              var e = m[3],
                p = m[0],
                q = m[1],
                r = m[2],
                n = m[4],
                h = m[5];
              m = p * p + q * q + r * r;
              for (var q = 2 * q * (p + r), p = 2 * p * r, r = e * e + n * n + h * h, n = 2 * n * (e + h), u = 2 * e * h, e = 0; e < a; e++)
                (h = this.xCos1[e]),
                  (k = this.xCos2[e]),
                  (h = 4.3429448190325175 * Math.log((m + q * h + p * k) / (r + n * h + u * k))),
                  (h *= g | 0),
                  (this.freqPlot[e] += h),
                b == this.parent.mode && (this.freqPlot2[e] += h);
            }
            ctx.lineWidth = 2;
            ctx.lineJoin = "round";
            if (this.showCurrentCurve) {
              ctx.beginPath();
              for (e = 0; e < a; e++)
                if (
                  !(1 == (e & 1) && e < a - 1) ||
                  (this.freqPlot2[e] > this.freqPlot2[e - 1] && this.freqPlot2[e] > this.freqPlot2[e + 1]) ||
                  (this.freqPlot2[e] < this.freqPlot2[e - 1] && this.freqPlot2[e] < this.freqPlot2[e + 1])
                )
                  (g = f - d * this.freqPlot2[e]), 0 == e && ctx.moveTo(e, g), ctx.lineTo(e, g);
              ctx.lineWidth = 1;
              ctx.strokeStyle = this.colors[this.parent.mode];
              ctx.fillStyle = hexToRGBA(this.colors[this.parent.mode], 0.1);
              ctx.stroke();
              ctx.lineTo(a, f);
              ctx.lineTo(0, f);
              ctx.closePath();
              ctx.fill();
            }
            ctx.fillStyle = "#666";
            ctx.fillRect(0, f - 1, a, 2);
            ctx.beginPath();
            ctx.fillStyle = "rgba(255,255,255,0.12)";
            ctx.strokeStyle = "#ffffff";
            ctx.lineWidth = 2;
            for (e = 0; e < a; e++)
              if (
                !(1 == (e & 1) && e < a - 1) ||
                (this.freqPlot[e] > this.freqPlot[e - 1] && this.freqPlot[e] > this.freqPlot[e + 1]) ||
                (this.freqPlot[e] < this.freqPlot[e - 1] && this.freqPlot[e] < this.freqPlot[e + 1])
              )
                (g = f - d * this.freqPlot[e]), 0 == e && ctx.moveTo(e, g), ctx.lineTo(e, g);
            ctx.stroke();
            ctx.lineTo(a, f);
            ctx.lineTo(0, f);
            ctx.closePath();
            ctx.fill();
            ctx.textAlign = "center";
            if (this.easy)
              for (ctx.strokeStyle = "rgba(255,255,255,0.5)", ctx.font = "bold 15px open_sans_condensedbold", q = ["B", "M", "T"], a = [1, 2, 3], m = 0; m < q.length; m++)
                (b = a[m]),
                  (e = this.freqToX(c[b][0])),
                1 == b && (e += this.w / 6),
                3 == b && (e -= this.w / 6),
                  (g = f - c[b][2] * d),
                  (ctx.lineWidth = "3"),
                  this.bypass && 0 != b ? ((ctx.fillStyle = "rgba(255,255,255,0.4)"), (ctx.strokeStyle = "rgba(255,255,255,0.3)")) : ((ctx.fillStyle = this.colors[b]), (ctx.strokeStyle = this.colors[b])),
                  (ctx.globalAlpha = 0.9),
                  ctx.beginPath(),
                  ctx.arc(e, g, 16, 0, 2 * Math.PI),
                  ctx.fill(),
                  (ctx.globalAlpha = 1),
                  ctx.beginPath(),
                  ctx.arc(e, g, this.touchRadius, 0, 2 * Math.PI),
                  (ctx.globalAlpha = 0.38),
                  ctx.fill(),
                  (ctx.globalAlpha = 1),
                this.mode == b && ctx.stroke(),
                  (ctx.fillStyle = "#060606"),
                  ctx.fillText(q[m], e - (0 == b ? 1 : 0) + 1, g + 5 + 1),
                  (ctx.fillStyle = "#F0F0F0"),
                  ctx.fillText(q[m], e - (0 == b ? 1 : 0), g + 5);
            else
              for (ctx.strokeStyle = "rgba(255,255,255,0.5)", ctx.font = "bold 14px open_sans_condensedbold", q = "HPF 1 2 3 4 LPF".split(" "), b = 0; b < this.bands; b++)
                (e = this.freqToX(c[b][0])),
                  (g = f - c[b][2] * d),
                  (ctx.lineWidth = "3"),
                  this.bypass && 0 != b && 5 != b ? ((ctx.fillStyle = "rgba(255,255,255,0.4)"), (ctx.strokeStyle = "rgba(255,255,255,0.3)")) : ((ctx.fillStyle = this.colors[b]), (ctx.strokeStyle = this.colors[b])),
                  (ctx.globalAlpha = 0.9),
                  ctx.beginPath(),
                  ctx.arc(e, g, 13, 0, 2 * Math.PI),
                  ctx.fill(),
                  (ctx.globalAlpha = 1),
                  ctx.beginPath(),
                  ctx.arc(e, g, this.touchRadius, 0, 2 * Math.PI),
                  (ctx.globalAlpha = 0.38),
                  ctx.fill(),
                  (ctx.globalAlpha = 1),
                this.parent.mode == b && ctx.stroke(),
                  (ctx.fillStyle = "#060606"),
                  ctx.fillText(q[b], e + 1, g + 6),
                  (ctx.fillStyle = "#F0F0F0"),
                  ctx.fillText(q[b], e, g + 5);
            this.easy &&
            ((ctx.font = "21px open_sans_condensedbold"),
              (ctx.fillStyle = color.white),
              (ctx.textAlign = "center"),
              ctx.fillText(lang.BASS, this.freqToX(50) | 0, this.h - 20),
              ctx.fillText(lang.MID, this.freqToX(1e3) | 0, this.h - 20),
              ctx.fillText(lang.TREBLE, this.freqToX(8e3) | 0, this.h - 20));
            this.ds &&
            ((ctx.strokeStyle = "rgba(0,250,0,0.2)"),
              (ctx.lineWidth = 2),
              (c = this.freqToX(DeesserVtoFREQ(this.ds_freq)) | 0),
              (d = (3 + (1 - this.ds_thr) * (this.h - 6)) | 0),
              ctx.beginPath(),
              ctx.dashedLine(c, 0, c, this.h, 10),
              ctx.stroke(),
              (f = this.freqToX(5e3) - this.freqToX(2e3)),
              ctx.beginPath(),
              ctx.moveTo(c - f, this.h),
              ctx.quadraticCurveTo(c, d, c + f, this.h),
              ctx.closePath(),
              (d = precision(0.07 * this.ds_ratio, 4)),
              (ctx.fillStyle = "rgba(0,255,0," + d + ")"),
              ctx.fill(),
              ctx.stroke(),
              (e = c),
              (g = (3 + (1 - this.ds_thr / 2) * (this.h - 6)) | 0),
              (ctx.lineWidth = 3),
              (ctx.strokeStyle = "rgba(100,255,100,0.3)"),
              (ctx.fillStyle = "rgba(100,255,100,0.4)"),
              (ctx.globalAlpha = 1),
              ctx.beginPath(),
              ctx.arc(e, g, this.touchRadius, 0, 2 * Math.PI),
              (ctx.globalAlpha = 0.38),
              ctx.fill(),
              (ctx.globalAlpha = 1),
            77 == this.parent.mode && ctx.stroke(),
              (ctx.fillStyle = "rgba(0,0,0,0.4)"),
              (ctx.globalAlpha = 0.9),
              ctx.beginPath(),
              ctx.arc(e, g, 13, 0, 2 * Math.PI),
              ctx.fill(),
              (ctx.fillStyle = "#F0F0F0"),
              (ctx.font = "bold 15px open_sans_condensedbold"),
              ctx.fillText("DS", e - (0 == b ? 1 : 0), g + 5),
              (ctx.shadowColor = "transparent"));
            ctx.lineWidth = 1;
            ctx.strokeStyle = "#222";
            ctx.strokeRect(0.5, 0.5, this.w - 1, this.h - 1);
            this.showPreset &&
            ((ctx.textAlign = "left"),
              (ctx.fillStyle = 1 == selectedStrip.getNameValue("eq.prmod") ? "#444" : color.red),
              ctx.setShadow(color.black, 0, 2, 2),
              (ctx.font = "18px open_sans_condensedbold"),
              ctx.fillText(selectedStrip.getNameValue("eq.prname"), 4, 18));
          }
        },
        drawRTA: function () {
          var a = this.w,
            b = this.h - 2,
            c = this.rta,
            d = FREQtoX(20.6, a),
            f = FREQtoX(22350.6, a) / (c.length - 1);
          ctx.fillStyle = "rgba(255,255,255,0.1)";
          ctx.beginPath();
          var e = c[0];
          ctx.moveTo(0, (b * (1 - e)) | 0);
          for (var g = 0, h = c.length; g < h; g++) {
            e = c[g];
            e = (b * (1 - e)) | 0;
            ctx.lineTo(d, e);
            if (d >= a) break;
            d += f;
          }
          ctx.lineTo(a, b);
          ctx.lineTo(0, b);
          ctx.closePath();
          ctx.fill();
          if (this.rta2) {
            ctx.strokeStyle = "#666";
            ctx.lineWidth = 1;
            ctx.lineCap = "butt";
            c = this.rta2;
            d = FREQtoX(20.6, a);
            f = FREQtoX(22350.6, a) / (c.length - 1);
            ctx.beginPath();
            e = c[0];
            ctx.moveTo(0, (b * (1 - e)) | 0);
            g = 0;
            for (h = c.length; g < h; g++) {
              e = c[g];
              e = (b * (1 - e)) | 0;
              ctx.lineTo(d, e);
              if (d >= a) break;
              d += f;
            }
            ctx.lineTo(a, b);
            ctx.stroke();
          }
        },
        drawRTAhold: function () {
          var a = this.w,
            b = this.h - 2;
          ctx.strokeStyle = "#666";
          ctx.lineWidth = 1;
          ctx.lineCap = "butt";
          var c = RTA_HOLD_VALUE,
            d = FREQtoX(20.6, a),
            f = FREQtoX(22350.6, a) / (c.length - 1);
          ctx.beginPath();
          var e = c[0];
          ctx.moveTo(0, (b * (1 - e)) | 0);
          for (var g = 0, h = c.length; g < h; g++) {
            e = c[g];
            e = (b * (1 - e)) | 0;
            ctx.lineTo(d, e);
            if (d >= a) break;
            d += f;
          }
          ctx.lineTo(a, b);
          ctx.stroke();
        },
        cachePaint: function () {
          null != this.cachedBg && delete this.cachedBg;
          this.cachedBg = document.createElement("canvas");
          var a = this.cachedBg.getContext("2d");
          isRetina ? ((this.cachedBg.width = 2 * this.w), (this.cachedBg.height = 2 * this.h), a.scale(2, 2)) : ((this.cachedBg.width = this.w), (this.cachedBg.height = this.h));
          var b = this.w,
            c = this.h,
            d = (0.5 * c) / 20,
            f = (c / 2) | 0;
          a.fillStyle = "#0A0B0C";
          a.fillRect(0, 0, this.w, this.h);
          isSmall || this.RTAonly || ((a.fillStyle = this.grd), a.fillRect(0, 0, b, c));
          a.font = font.eqMarks;
          a.textAlign = "center";
          a.lineWidth = 1;
          a.fillStyle = "rgba(255,255,255,0.1)";
          a.fillRect(0, (f - 10 * d) | 0, b, 0.5);
          a.fillRect(0, (f + 10 * d) | 0, b, 0.5);
          a.strokeStyle = "rgba(255,255,255,0.15)";
          a.lineWidth = 0.5;
          a.beginPath();
          a.moveTo(0, f - 1);
          a.lineTo(b, f - 1);
          a.fillStyle = color.labelText;
          for (b = 30; 100 >= b; b += 10) (d = (this.freqToX(b) | 0) + 0.5), a.moveTo(d, 0), a.lineTo(d, c - 1);
          for (b = 100; 1e3 >= b; b += 100) (d = (this.freqToX(b) | 0) + 0.5), a.moveTo(d, 0), a.lineTo(d, c - 1);
          for (b = 1e3; 1e4 >= b; b += 1e3) (d = (this.freqToX(b) | 0) + 0.5), a.moveTo(d, 0), a.lineTo(d, c - 1);
          a.stroke();
          this.egrad = ctx.createLinearGradient(0, 0, this.w, 0);
          this.egrad.addColorStop(0, this.colors[1]);
          this.egrad.addColorStop(0.5, this.colors[2]);
          this.egrad.addColorStop(1, this.colors[3]);
          this.cachedBgW = this.w;
          this.cachedBgH = this.h;
        },
      }),
      Scroller2 = Class.create({
        initialize: function (a) {
          this.timeStamp = this.lastPos = this.amplitude = this.velocity = 0;
          this.trackParamName = "vOffset";
          this.setPositionName = "setOffset";
          this.setFunc = function (b) {
            a.dx = b;
            a.update();
          };
          this.maxPosName = "";
          this.maxPosFunc = function () {
            return 9999;
          };
          this.target = a;
          this.ticker = null;
          this.scaleFactor = 0.3;
          this.timeConstant = 1e3 / fps;
          this.step = this.position = 0;
        },
        velStart: function () {
          this.amplitude = this.velocity = 0;
          this.timeStamp = Date.now();
          clearInterval(this.ticker);
          this.target && (this.lastPos = this.target[this.trackParamName]);
          var a = this;
          this.ticker = setInterval(function () {
            a.velTrack();
          }, 1e3 / fps);
        },
        velTrack: function () {
          var a = Date.now(),
            b = a - this.timeStamp;
          this.timeStamp = a;
          a = this.target[this.trackParamName] - this.lastPos;
          this.lastPos = this.target[this.trackParamName];
          b = (1e3 * a) / (1 + b);
          this.velocity = 0 == this.velocity ? b : 0.3 * b + 0.7 * this.velocity;
        },
        velRelease: function () {
          Date.now() - this.timestamp < 1e3 / fps && this.velTrack();
          clearInterval(this.ticker);
          60 < Math.abs(this.velocity) && this.startScroll(this.velocity);
        },
        startScroll: function (a) {
          GLOBAL_STOP_SCROLL = !1;
          this.position = this.target[this.trackParamName];
          this.amplitude = a * this.scaleFactor;
          this.step = 0;
          var b = this;
          clearInterval(this.ticker);
          this.ticker = setInterval(function () {
            b.scrollTick();
          }, 1e3 / fps);
        },
        scrollTick: function () {
          GLOBAL_STOP_SCROLL && (clearInterval(this.ticker), (GLOBAL_STOP_SCROLL = !1));
          var a = (this.amplitude / this.timeConstant) * 2;
          this.position += a;
          this.amplitude -= a;
          this.step += 1;
          0.5 > Math.abs(a) && clearInterval(this.ticker);
          this.step > 3 * fps && clearInterval(this.ticker);
          a = this.maxPosFunc();
          if (0 >= this.position || this.position > this.maxPosFunc()) clearInterval(this.ticker), (this.position = bound(this.position, 0, a));
          this.target[this.trackParamName] != (this.position | 0) && this.setFunc(this.position | 0);
        },
        stop: function () {
          this.scrollStop();
        },
        scrollStop: function () {
          clearInterval(this.ticker);
        },
      }),
      GEQ_GRAPH = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "GEQ_GRAPH";
          this.needClip = !0;
          this.w = 600;
          this.h = 400;
          this.selected = 0;
          this.bands = 31;
          this.vBands = 16;
          this.right = !1;
          this.needMoveEvt = !0;
          this.bypass = !1;
          this.rta2 = this.rtaTimer = this.rta = null;
          this.bgColor = "#111";
          this.bandWidth = 50;
          this.r = this.bandWidth / 2;
          this.rw = this.bands * this.bandWidth;
          this.maxdx = 0;
          this.gain = 15;
          this.barColors = "#b93737 #bb3e39 #bd433a #bf473c #c24d3e #c4533f #c65a41 #c86043 #cb7c44 #cc8a44 #ce9944 #bca533 #bea735 #c1a837 #c3aa39 #c5ac3a #c8af3c #cab13e #ccb340 #cfb342 #d1b544 #51b350 #60b95f #6ec06d #3576b1 #3a79b3 #3f7db5 #4480b7 #4883b9 #4d87bb #528abd".split(
            " "
          );
          this.freqs = "20 25 32 40 50 63 80 100 125 160 200 250 315 400 500 630 800 1000 1.25k 1.6k 2k 2.5k 3.15k 4k 5k 6.3k 8k 10k 12.5k 16k 20k 22k".split(" ");
          this.idx = this.offsetX = 0;
          this.master = this.right = this.stereo = !1;
          this.scroller = new Scroller2(this);
          this.scroller.trackParamName = "offsetX";
          this.scroller.setFunc = this.setScroll.bind(this);
          this.peakGrab = !1;
          this.lastClickIdx = -1;
          this.moved = this.lastP = !1;
          this.lastClickPos = [-1, -1];
          this.clickPos = [-1, -1];
          this.haveFilters = !0;
          this.hpf_freq = 0.16274;
          this.lpf_freq = 0.9;
        },
        setBandWidth: function (a) {
          this.bandWidth = a;
          this.r = this.bandWidth / 2;
          this.rw = this.bands * this.bandWidth;
          this.onResize();
        },
        setKey: function (a) {
          this.unRegAllKeys();
          this.key = a;
          this.regKey(a + "eq.bypass");
          this.regKey(a + "eq.enabled");
          this.haveFilters && (this.stereo ? (this.regKey(a + "eq.hpf"), this.regKey(a + "eq.lpf")) : (this.regKey(a + "eq.hpf.l"), this.regKey(a + "eq.hpf.r"), this.regKey(a + "eq.lpf.l"), this.regKey(a + "eq.lpf.r")));
          for (var b = 0; b < this.bands; b++) this.stereo ? this.regKey(a + "eq.peak." + b) : (this.regKey(a + "eq.peak.l." + b), this.regKey(a + "eq.peak.r." + b));
        },
        setLeft: function (a) {
          this.right = !a;
          regUpdate(this);
        },
        setRight: function (a) {
          this.right = a;
          regUpdate(this);
        },
        getState: function () {
          this.bypass = null != this.key ? getValue(this.key + "eq.bypass") : !1;
        },
        getPeak: function (a) {
          return null == this.key ? 0.03 * a : getValue(this.key + (this.stereo ? (this.right ? "eq.peak.r." : "eq.peak.l.") : "eq.peak.") + a);
        },
        setPeak: function (a) {
          null != this.key && ((a = bound(a, 0, 1)), this.setPeakIdx(this.selected, a));
        },
        setPeakIdx: function (a, b) {
          null != this.key &&
          ((b = bound(b, 0, 1)),
            getValue(this.key + "eq.linked")
              ? (setValue(this.key + "eq.peak.l." + a, b), setValue(this.key + "eq.peak.r." + a, b))
              : setValue(this.key + (this.stereo ? (this.right ? "eq.peak.r." : "eq.peak.l.") : "eq.peak.") + a, b),
            regUpdate(this),
            this.onChange());
        },
        onChange: function () {},
        reset: function () {
          var a = this.key;
          setValue(a + "eq.enabled", 0);
          setValue(a + "eq.linked", 1);
          for (var b = 0; b < this.bands; b++) this.stereo ? (setValue(a + "eq.peak.l." + b, 0.5), setValue(a + "eq.peak.r." + b, 0.5)) : setValue(a + "eq.peak." + b, 0.5);
          regUpdate(this);
        },
        onDown: function (a, b, c) {
          if (!this.pressed) {
            this.pressed = !0;
            this.touchID = c;
            this.stY = b;
            this.peakGrab = this.moved = !1;
            a -= this.globalX();
            b -= this.globalY();
            this.clickPos = [a, b];
            c = ((this.offsetX + a) / this.bandWidth) | 0;
            var d = this.getPeak(c),
              d = (this.h * (1 - d)) | 0,
              f = (this.rw * this.hpf_freq) | 0,
              e = (this.rw * this.lpf_freq) | 0;
            this.haveFilters && isInRect(f - this.offsetX, 0, 2 * this.r, 2 * this.r, a, b)
              ? ((this.peakGrab = !0), (this.idx = -1), (this.ddx = f - a))
              : this.haveFilters && isInRect(e - 2 * this.r - this.offsetX, 0, 2 * this.r, 2 * this.r, a, b)
                ? ((this.peakGrab = !0), (this.idx = -2), (this.ddx = e - a))
                : b >= d - this.r && b <= d + this.r
                  ? ((this.peakGrab = !0), (this.idx = this.selected = c), (this.ddy = d - b), this.onSelect(c), regUpdate(this))
                  : ((this.peakGrab = !1), (this.ddx = this.offsetX + a), this.scroller && this.scroller.velStart());
          }
        },
        onMove: function (a, b, c) {
          this.touchID == c &&
          ((a -= this.globalX()),
            (c = b - this.globalY()),
            this.peakGrab
              ? this.haveFilters && -1 == this.idx
                ? ((b = this.ddx + a),
                  (a = bound(b / this.rw, 0, 0.97)),
                  this.stereo && getValue(this.key + "eq.linked")
                    ? (setValue(this.key + "eq.hpf.r", a), setValue(this.key + "eq.hpf.l", a))
                    : setValue(this.key + "eq.hpf" + (this.stereo ? (this.right ? ".r" : ".l") : ""), a),
                  regUpdate(this))
                : this.haveFilters && -2 == this.idx
                  ? ((b = this.ddx + a),
                    (a = bound(b / this.rw, 0.03, 1)),
                    this.stereo && getValue(this.key + "eq.linked")
                      ? (setValue(this.key + "eq.lpf.r", a), setValue(this.key + "eq.lpf.l", a))
                      : setValue(this.key + "eq.lpf" + (this.stereo ? (this.right ? ".r" : ".l") : ""), a),
                    regUpdate(this))
                  : ((a = bound(1 - (this.ddy + c) / this.h, 0, 1)), this.setPeak(a), 5 < Math.abs(b - this.stY) && (this.moved = !0))
              : this.setScroll(this.ddx - a));
        },
        onUp: function (a) {
          if (this.touchID == a) {
            this.peakGrab || (this.scroller && this.scroller.velRelease());
            this.delta = [0, 0];
            a = Date.now();
            var b = Math.abs(this.lastClickPos[0] - this.clickPos[0]),
              c = Math.abs(this.lastClickPos[1] - this.clickPos[1]);
            a - this.lastClickTime < DBL_CLK_TIME && 30 > b && 30 > c && this.lastClickIdx == this.idx && this.lastP == !this.peakGrab && (this.peakGrab ? (this.setPeak(0.5), this.onChange()) : setMode(E_MODE.MIX));
            this.moved || (this.lastClickTime = a);
            this.lastClickPos = this.clickPos;
            this.lastClickIdx = this.idx;
            this.lastP = !this.peakGrab;
            this.pressed = !1;
            this.touchID = -1;
          }
        },
        onDouble: function () {
          this.peakGrab ? this.setPeak(0.5) : modeBack();
        },
        onWheel: function (a, b, c) {
          b -= this.globalX();
          this.globalY();
          b = ((this.offsetX + b) / this.bandWidth) | 0;
          c = this.getPeak(b);
          c = bound(c + a / 120 / 30, 0, 1);
          this.setPeakIdx(b, c);
        },
        onSelect: function (a) {},
        setScroll: function (a) {
          a = bound(a, 0, this.maxdx);
          this.offsetX != a && ((this.offsetX = a), regUpdate(this));
        },
        setRTA: function (a) {
          this.rta = a;
          regUpdate(this);
          var b = this;
          clearTimeout(this.rtaTimer);
          this.rtaTimer = setTimeout(function () {
            b.rta && ((b.rta = null), regUpdate(b));
          }, 200);
        },
        calcGeometry: function () {
          1500 < this.w ? this.setBandWidth(this.w / this.bands) : this.setBandWidth(50);
        },
        onResize: function () {
          var a = this.rw - this.w;
          0 > a && (a = 0);
          this.maxdx = a;
          this.offsetX > a && this.setScroll(a);
          this.grd = ctx.createLinearGradient(0, 0, 0, this.h);
          this.grd.addColorStop(0, "rgba(255,255,255,0.0)");
          this.grd.addColorStop(0.1, "rgba(255,255,255,0.0)");
          this.grd.addColorStop(0.5, "rgba(255,255,255,0.25)");
          this.grd.addColorStop(0.9, "rgba(255,255,255,0.0)");
          this.grd.addColorStop(1, "rgba(255,255,255,0.0)");
        },
        prePaint: function () {
          if (this.visible) {
            ctx.save();
            ctx.translate(this.x, this.y);
            this.enabled || (ctx.globalAlpha = 0.3);
            ctx.font = "11px open_sans_condensedbold";
            ctx.textAlign = "center";
            ctx.fillStyle = "#aaa";
            var a = { shadow: ["#000", 0, 1, 1] },
              b = this.h,
              c = (b / 2) | 0;
            ctx.textAlign = "right";
            ctx.drawText("+15", -5, 9, a);
            ctx.drawText("0 ", -5, c + 3, a);
            ctx.drawText("-15", -5, b - 1, a);
            ctx.restore();
          }
        },
        paintBg: function () {},
        paint: function () {
          var a = this.w,
            b = this.h,
            c = (this.bypass = getValue(this.key + "eq.bypass"));
          if ((this.afsEnabled = 1 == getValue("afs.enabled"))) this.afsEnabled = 0 != selectedStrip.getNameValue("afs.enabled");
          ctx.fillStyle = "#101115";
          ctx.fillRect(this.offsetX, 0, this.w, b);
          null != this.rta && this.drawRTA();
          RTA_HOLD_VALUE && this.drawRTAhold();
          this.afsEnabled && this.drawAFS();
          ctx.fillStyle = this.grd;
          ctx.fillRect(0, 0, this.rw, b);
          var d = (b / 2) | 0;
          if (this.haveFilters) {
            this.hpf_freq = getValue(this.key + "eq.hpf" + (this.stereo ? (this.right ? ".r" : ".l") : ""));
            this.lpf_freq = getValue(this.key + "eq.lpf" + (this.stereo ? (this.right ? ".r" : ".l") : ""));
            var f = this.hpf_freq * this.rw,
              e = this.lpf_freq * this.rw;
            ctx.fillStyle = "rgba(255,255,255,0.07)";
            var g = this.rw / 12.5,
              h = this.rw / 10,
              k = this.rw / 20;
            0 < this.hpf_freq &&
            (ctx.beginPath(),
              ctx.moveTo(-g, d),
              ctx.lineTo(-g, b),
              ctx.lineTo(f - g, b),
              ctx.quadraticCurveTo(f - k, d, f + h, d),
              (ctx.lineWidth = 1),
              (ctx.strokeStyle = "rgba(255,255,255,0.1)"),
              ctx.stroke(),
              ctx.closePath(),
              ctx.fill());
            1 > this.lpf_freq &&
            (ctx.beginPath(),
              ctx.moveTo(this.rw + g, d),
              ctx.lineTo(this.rw + g, b),
              ctx.lineTo(e + g, b),
              ctx.quadraticCurveTo(e + k, d, e - h, d),
              (ctx.lineWidth = 1),
              (ctx.strokeStyle = "rgba(255,255,255,0.1)"),
              ctx.stroke(),
              ctx.closePath(),
              ctx.fill());
          }
          ctx.strokeStyle = "rgba(0,0,0,0.2)";
          ctx.lineWidth = 1;
          for (f = 0; f < this.bands; f++)
            (e = f * this.bandWidth),
            e > this.offsetX + a ||
            e < this.offsetX - this.bandWidth ||
            ((h = c ? "#aaaaaa" : this.barColors[f]),
            f % 2 && ((ctx.fillStyle = "rgba(255,255,255,0.01)"), ctx.fillRect(e, 0, this.bandWidth, b)),
            this.selected == f && ((ctx.fillStyle = hexToRGBA(h, 0.07)), ctx.fillRect(e, 0, this.bandWidth, b)),
              (g = this.getPeak(f)),
              (k = -d * (g - 0.5) * 2),
              (ctx.fillStyle = hexToRGBA(h, c ? 0.35 : 0.66)),
              ctx.fillRect(e, d, this.bandWidth, k),
              (ctx.fillStyle = hexToRGBA(h, 0.38)),
              ctx.fillRect(e, d + k - this.r, 2 * this.r, 2 * this.r),
              ctx.strokeRect(e + 0.5, d + k - this.r + 0.5, 2 * this.r - 1, 2 * this.r),
              ctx.drawText(this.freqs[f] + "hz", e + this.r, ((1 - g) * b + 13) | 0, {
                color: "#090909",
                shadow: ["rgba(255,255,255,0.2)", 0, 1, 1],
                align: "center",
                valign: "middle",
                font: "14px open_sans_condensedbold",
              }),
              (h = precision(VtoLINRANGE(g, -this.gain, this.gain), 1)),
              (h = (0 < h ? "+" : "") + h + lang.DB),
              ctx.drawText(h, e + this.r, ((1 - g) * b - 12) | 0, { color: "#090909", shadow: ["rgba(255,255,255,0.2)", 0, 1, 1] }));
          this.haveFilters &&
          ((f = this.hpf_freq * this.rw),
            (e = this.lpf_freq * this.rw),
            this.drawRect(f + this.r, this.r, "#405C66", 0 < this.hpf_freq ? formatFreq(VtoFREQ20(this.hpf_freq)) + "hz" : "OFF", "HPF"),
            this.drawRect(e - this.r, this.r, "#7A6346", 1 > this.lpf_freq ? formatFreq(VtoFREQ20(this.lpf_freq)) + "hz" : "OFF", "LPF"));
          ctx.lineWidth = 1;
          ctx.strokeStyle = "#333";
          ctx.drawLine(this.offsetX, d, this.offsetX + a, d);
          1 < this.maxdx &&
          ((ctx.fillStyle = "rgba(0,0,0,0.15)"),
            ctx.fillRect(this.offsetX, b - 12, a, 12),
            (ctx.fillStyle = "rgba(255,255,255,0.15)"),
            (g = (a / this.rw) * a),
            ctx.fillRect(this.offsetX + 2 + (this.offsetX / this.maxdx) * (a - 4 - g), b - 12 + 1, g, 9));
          ctx.strokeStyle = "#333";
          ctx.strokeRect(this.offsetX + 0.5, 0.5, a - 1, b - 1);
        },
        drawRect: function (a, b, c, d, f) {
          ctx.fillStyle = c;
          ctx.strokeStyle = "rgba(0,0,0,0.2)";
          ctx.lineWidth = 1;
          ctx.fillRect(a - this.r, b - this.r, 2 * this.r, 2 * this.r);
          ctx.strokeRect(a + 0.5 - this.r, b - this.r + 0.5, 2 * this.r - 1, 2 * this.r);
          ctx.drawText(d, a, (b - 12) | 0, { color: "#090909", shadow: ["rgba(255,255,255,0.2)", 0, 1, 1], align: "center", valign: "middle", font: "14px open_sans_condensedbold" });
          ctx.drawText(f, a, (b + 13) | 0, { color: "#090909", shadow: ["rgba(255,255,255,0.2)", 0, 1, 1] });
        },
        freqToX: function (a) {
          return FREQtoX(a, this.rw);
        },
        holdRTAstate: function () {
          return !!RTA_HOLD_VALUE;
        },
        holdRTA: function () {
          RTA_HOLD_VALUE = this.rta;
          regUpdate(this);
        },
        unHoldRTA: function () {
          RTA_HOLD_VALUE = null;
          regUpdate(this);
        },
        drawAFS: function () {
          var a = this.bandWidth,
            b = (this.h / 2 + 1) | 0;
          ctx.lineWidth = 2;
          for (var c = this.parent.keyPrefixAfs + "afs.eq.", d = 0; 12 > d; d++) {
            var f = getValue(c + d),
              e = JSON.parse("[" + f + "]"),
              f = e[3];
            if (2 != f) {
              var g = e[0],
                e = bound(e[2], -15, 0);
              0 != e &&
              ((g = FREQtoX(g, this.rw)),
                (e = b - (e / 15) * b),
                (e = bound(e, b, this.h)),
                (ctx.strokeStyle = 2 == f ? color.afsGraphPeakLive : color.afsGraphPeakFixed),
                ctx.beginPath(),
                ctx.moveTo(g - a / 2, b),
                ctx.quadraticCurveTo(g, b, g, e),
                ctx.quadraticCurveTo(g, b, g + a / 2, b),
                ctx.lineTo(g + a / 2, b),
                ctx.stroke());
            }
          }
          for (d = 0; 12 > d; d++)
            (f = getValue(c + d)),
              (e = JSON.parse("[" + f + "]")),
              (f = e[3]),
            2 == f &&
            ((g = e[0]),
              (e = bound(e[2], -15, 0)),
            0 != e &&
            ((g = FREQtoX(g, this.rw)),
              (e = b - (e / 15) * b),
              (e = bound(e, b, this.h)),
              (ctx.strokeStyle = 2 == f ? color.afsGraphPeakLive : color.afsGraphPeakFixed),
              ctx.beginPath(),
              ctx.moveTo(g - a / 2, b),
              ctx.quadraticCurveTo(g, b, g, e),
              ctx.quadraticCurveTo(g, b, g + a / 2, b),
              ctx.lineTo(g + a / 2, b),
              ctx.stroke()));
        },
        drawRTA: function () {
          var a = this.rw,
            b = this.h - 2,
            c = this.rta,
            d = this.freqToX(20.6),
            f = this.freqToX(22350.6) / (c.length - 1),
            e = dataValue["var.rta"];
          settings.masterOtherRTA && e + "." != selectedStrip.name
            ? ((ctx.fillStyle = "rgba(177, 131, 214, 0.6)"),
              (ctx.font = "14px open_sans_condensedbold"),
              ctx.drawText(lang.RTA + ": " + keyToName2(e), this.offsetX + 8, this.h - 18),
              (ctx.fillStyle = "rgba(177, 131, 214, 0.1)"))
            : (ctx.fillStyle = "rgba(255,255,255,0.1)");
          ctx.beginPath();
          var g = c[0];
          ctx.moveTo(0, (b * (1 - g)) | 0);
          for (e = 0; e < c.length; e++) {
            g = c[e];
            g = (b * (1 - g)) | 0;
            ctx.lineTo(d, g);
            if (d >= a) break;
            d += f;
          }
          ctx.lineTo(a, b);
          ctx.lineTo(0, b);
          ctx.closePath();
          ctx.fill();
          if (this.rta2) {
            ctx.strokeStyle = "#666";
            ctx.lineWidth = 1;
            ctx.lineCap = "butt";
            c = this.rta2;
            d = FREQtoX(20.6, a);
            f = FREQtoX(22350.6, a) / (c.length - 1);
            ctx.beginPath();
            g = c[0];
            ctx.moveTo(0, (b * (1 - g)) | 0);
            for (e = 0; e < c.length; e++) {
              g = c[e];
              g = (b * (1 - g)) | 0;
              ctx.lineTo(d, g);
              if (d >= a) break;
              d += f;
            }
            ctx.lineTo(a, b);
            ctx.stroke();
          }
        },
        drawRTAhold: function () {
          var a = this.rw,
            b = this.h - 2;
          ctx.strokeStyle = "#666";
          ctx.lineWidth = 1;
          ctx.lineCap = "butt";
          var c = RTA_HOLD_VALUE,
            d = FREQtoX(20.6, a),
            f = FREQtoX(22350.6, a) / (c.length - 1);
          ctx.beginPath();
          var e = c[0];
          ctx.moveTo(0, (b * (1 - e)) | 0);
          for (var g = 0, h = c.length; g < h; g++) {
            e = c[g];
            e = (b * (1 - e)) | 0;
            ctx.lineTo(d, e);
            if (d >= a) break;
            d += f;
          }
          ctx.lineTo(a, b);
          ctx.stroke();
        },
      }),
      GEQ_SMALL = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "EQ-PARAM-WIDGET";
          this.bands = 31;
          this.master = !1;
          this.left = !0;
          this.barColors = "#b93737 #bb3e39 #bd433a #bf473c #c24d3e #c4533f #c65a41 #c86043 #cb7c44 #cc8a44 #ce9944 #bca533 #bea735 #c1a837 #c3aa39 #c5ac3a #c8af3c #cab13e #ccb340 #cfb342 #d1b544 #51b350 #60b95f #6ec06d #3576b1 #3a79b3 #3f7db5 #4480b7 #4883b9 #4d87bb #528abd".split(
            " "
          );
          this.w = 248;
          this.h = 46;
          this.afsEnabled = !1;
        },
        onDown: function (a, b) {
          var c = this.parent.eq;
          if (c.maxdx) {
            var d = c.w / c.rw,
              f = d / 2,
              d = 1 - d,
              e = (a - this.globalX()) / this.w,
              f = bound(e, f, 1 - f) - f;
            c.setScroll((f / d) * c.maxdx);
          }
        },
        getPeak: function (a) {
          return this.master ? getValue("m.eq.peak" + (this.left ? ".l" : ".r") + "." + a) : getValue(this.parent.keyPrefix + a);
        },
        paint: function () {
          if ((this.afsEnabled = 1 == getValue("afs.enabled"))) this.afsEnabled = 0 != selectedStrip.getNameValue("afs.enabled");
          this.bypass = this.master ? toBool(getValue("m.eq.bypass")) : toBool(selectedStrip.getNameValue("eq.bypass"));
          ctx.fillStyle = "#101115";
          ctx.fillRect(0, 0, this.w, this.h);
          ctx.lineWidth = 0.5;
          ctx.strokeStyle = "rgba(255,255,255,0.1)";
          ctx.beginPath();
          for (var a = (this.w / this.bands) | 0, b = (this.h / 2) | 0, c = 0; c < this.bands; c++) 0 != c && (ctx.moveTo((a * c) | 0, 0), ctx.lineTo((a * c) | 0, this.h));
          ctx.stroke();
          if (this.afsEnabled)
            for (c = 0; 12 > c; c++) {
              var d = getValue(selectedStrip.name + "afs.eq." + c),
                f = JSON.parse("[" + d + "]"),
                e = f[0],
                d = bound(f[2], -15, 0),
                f = f[3];
              0 != d &&
              ((e = FREQtoX(e, this.w)),
                (e = bound(e, 1, this.w - 1)),
                (d = b - (d / 15) * b),
                (d = bound(d, b, this.h - 1)),
              0 > e || e > this.w || ((ctx.fillStyle = 2 == f ? color.afsGraphPeakLive : color.afsGraphPeakFixed), ctx.fillRect(e - 1, d - 1, 2, 2)));
            }
          ctx.globalAlpha = 0.4;
          for (c = 0; c < this.bands; c++)
            (ctx.fillStyle = this.barColors[c + (this.bankB ? 15 : 0)]),
              this.bypass ? ((ctx.fillStyle = "rgba(255,255,255,0.4)"), (ctx.strokeStyle = "rgba(255,255,255,0.3)")) : (ctx.strokeStyle = ctx.fillStyle = this.barColors[c + (this.bankB ? 15 : 0)]),
              (d = (2 * (-1 * this.getPeak(c) + 0.5) * b) | 0),
              ctx.fillRect(a * c, b, a, d);
          ctx.globalAlpha = 1;
          ctx.fillStyle = "#666";
          ctx.fillRect(0, b, this.w, 1);
          ctx.fillStyle = "rgba(255,255,255,0.1)";
          ctx.lineWidth = 1;
          ctx.strokeStyle = "#333";
          ctx.strokeRect(0.5, 0.5, this.w - 1, this.h - 1);
        },
      });
    afsPopup = null;
    var AFS_POPUP = Class.create(Widget, {
        initialize: function ($super, b, c) {
          $super(b);
          this.widgetName = "AFS_POPUP";
          this.title = lang.PRESETS;
          this.color = "#eee";
          this.bg = "#31323A";
          this.borderColor = "#676869";
          this.rh = 150;
          this.rw = 570;
          this.bx = 70;
          this.by = 10;
          this.bw = 420;
          this.bh = 200;
          this.target = c;
          this.initWidgets();
          this.updateGeometry();
          afsPopup = this;
          mWidgets.push(widgets.pop());
        },
        initWidgets: function () {
          var a = this;
          this.AFS_SETTINGS = new Button(this);
          this.AFS_SETTINGS.setImages(res.SETUP_ON, res.SETUP_OFF);
          this.AFS_SETTINGS.onPress = function () {
            a.close();
          };
          this.AFS_SETTINGS.setAnchors(80, null, null, 3);
          this.AFS_OFF = new CheckBox(this);
          this.AFS_OFF.setImages(res.OFF_OFF, res.ON_ON);
          this.AFS_OFF.setKey(selectedStrip.name + "afs.enabled");
          this.AFS_OFF.getState = function () {
            this.disabled = 0 == getValue("afs.enabled");
          };
          this.AFS_OFF.setAnchors(162, null, null, 3);
          this.bAFS = new CheckBox(this);
          this.bAFS.setAnchors(510, null, null, 3);
          this.bAFS.setImages(res.AFSON_OFF, res.AFSON_ON);
          this.bAFS.setKey("afs.enabled");
          this.bAFS.onToggle = function () {
            regUpdate(editWidget);
          };
          this.SL1 = new EQHSlider2(this);
          this.SL1.setAnchors(20, null, null, 50);
          this.SL1.bg = this.bg;
          this.SL1.w = 320;
          this.SL1.setDefaultValue(0.5);
          this.SL1.setKey(selectedStrip.name + "afs.sensitivity");
          this.led1 = new FXLEDPlain(this);
          this.led1.setAnchors(276, null, null, 104);
          this.led1.h = 24;
          this.led1.label = "";
          this.led1.oneLine = !0;
          this.led1.bgColor = this.bg;
          this.led1.sign = "dB";
          this.led1.setKey(selectedStrip.name + "afs.sensitivity");
          this.led1.formatValue = function (a) {
            return precision(VtoLINRANGE(a, -6, 6), 1);
          };
          this.FMODE = new SWITCHBOX(this);
          this.FMODE.setItems([lang.FIXED, lang.LIVE, lang.LOCK]);
          this.FMODE.setItemWidth(65);
          this.FMODE.setAnchors(360, null, null, 69);
          this.FMODE.getState = function () {
            var a = selectedStrip.name;
            this.state = 0 == (getValue(a + "afs.logic") | 0) ? 2 : 0 == (getValue(a + "afs.fmode") | 0) ? 0 : 1;
          };
          this.FMODE.valueFunc = function () {
            var a = selectedStrip.name;
            setValue(a + "afs.logic", 2 == this.state ? 0 : 1);
            2 > this.state && setValue(a + "afs.fmode", this.state);
          };
          this.AFS_CLEAR_FIXED = new SButton(this);
          this.AFS_CLEAR_FIXED.text = lang.CLEAR_FIXED;
          this.AFS_CLEAR_FIXED.onPress = function () {
            setValue(selectedStrip.name + "afs.clearfixed", 1);
            setTimeout(function () {
              setValue(selectedStrip.name + "afs.clearfixed", 0);
            }, 500);
          };
          this.AFS_CLEAR_ALL = new SButton(this);
          this.AFS_CLEAR_ALL.text = lang.CLEAR_ALL;
          this.AFS_CLEAR_ALL.onPress = function () {
            setValue(selectedStrip.name + "afs.clearall", 1);
            setTimeout(function () {
              setValue(selectedStrip.name + "afs.clearall", 0);
            }, 500);
          };
          this.AFS_PRESETS = new SButton(this);
          this.AFS_PRESETS.text = lang.PRESETS;
          this.AFS_PRESETS.onPress = function () {
            if (selectedStrip.type == E_STRIP_TYPE.AUX && isBlocked("auxproc", selectedStrip.subId)) showPopupMsg(lang.LOCKED, 1e3);
            else if (selectedStrip.type == E_STRIP_TYPE.MASTER && isBlocked("mproc")) showPopupMsg(lang.LOCKED, 1e3);
            else {
              clearModals();
              sendMessage("AFSUPDATEVAR");
              var a = new PRESET_MENU2(
                null,
                "afs",
                {
                  savePreset: function () {
                    var a = selectedStrip.subId + 1;
                    selectedStrip.type == E_STRIP_TYPE.AUX && a++;
                    a = { afs: getValue("var.afsdata").split("/")[a] };
                    a.sens = selectedStrip.getNameValue("afs.sensitivity");
                    a.mode = selectedStrip.getNameValue("afs.fmode");
                    a.logic = selectedStrip.getNameValue("afs.logic");
                    return a;
                  },
                  loadPreset: function (a) {
                    var b = selectedStrip.subId + 1;
                    selectedStrip.type == E_STRIP_TYPE.AUX && b++;
                    var c = a.afs;
                    if (!c) return !1;
                    sendMessage("AFSLOADCHAN^" + b + "^" + c);
                    selectedStrip.setNameValue("afs.sensitivity", a.sens);
                    selectedStrip.setNameValue("afs.logic", a.logic);
                    selectedStrip.setNameValue("afs.fmode", a.mode);
                    regUpdate(this);
                    drawAll();
                    return !0;
                  },
                },
                "#888"
              );
              a.center = !0;
              a.updateGeometry();
              regUpdate(a);
            }
          };
          this.AFS_CLEAR_LIVE = new SButton(this);
          this.AFS_CLEAR_LIVE.text = lang.CLEAR_LIVE;
          this.AFS_CLEAR_LIVE.onPress = function () {
            setValue(selectedStrip.name + "afs.clearlive", 1);
            setTimeout(function () {
              setValue(selectedStrip.name + "afs.clearlive", 0);
            }, 500);
          };
        },
        onDown: function (a, b) {
          var c = a - this.globalX(),
            d = b - this.globalY();
          isInRect(0, this.h - this.rh, this.rw, this.rh, c, d) || isInRect(this.bx, this.by, this.bw, this.bh, c, d) || this.close();
        },
        close: function () {
          this.enabled = !1;
          clearModals();
        },
        onDelete: function () {
          afsPopup = null;
        },
        calcGeometry: function () {
          this.AFS_CLEAR_FIXED.setPos(100, 164);
          this.AFS_CLEAR_ALL.setPos(235, 164);
          this.AFS_PRESETS.setPos(235, 116);
          this.AFS_CLEAR_LIVE.setPos(370, 164);
          this.grd = ctx.createLinearGradient(0, this.h - this.rh, 0, this.h);
          this.grd.addColorStop(0, "rgba(255,255,255,0.2)");
          this.grd.addColorStop(0.1, "rgba(255,255,255,0.0)");
          this.grd.addColorStop(1, "rgba(255,255,255,0.0)");
        },
        paint: function () {
          ctx.fillStyle = this.bg;
          ctx.strokeStyle = this.borderColor;
          ctx.lineWidth = 2;
          ctx.roundRect(0, this.h - this.rh, this.rw, this.rh, 14);
          ctx.fill();
          ctx.fillStyle = this.grd;
          ctx.fill();
          drawImage(res.AFS2LOGO, 30, this.h - 35);
          ctx.fillStyle = "rgba(255,255,255,0.1)";
          ctx.fillRoundRect(16, this.h - 42, this.AFS_OFF.x + this.AFS_OFF.w + 12 - 16, 40, 4);
          0 == this.FMODE.state && ((ctx.font = "12px open_sans_condensedbold"), (ctx.fillStyle = color.white), (ctx.textAlign = "left"), drawText(lang.AFS_FIXED_INFO, 260, this.h - 34, { dy: 14 }));
          ctx.font = "15pt open_sans_condensedbold";
          ctx.textAlign = "center";
          ctx.fillStyle = color.white;
          ctx.fillText(lang.SENSITIVITY, 180, this.h - 110);
          ctx.fillText(lang.MODE, 457, this.h - 110);
          ctx.setShadow(null);
          ctx.fillStyle = "#161718";
          ctx.roundRect(70, 10, 420, 200, 14);
          ctx.fill();
          ctx.stroke();
          ctx.fillStyle = "#7F81FF";
          ctx.fillText(lang.FIXED, this.AFS_CLEAR_FIXED.x + 44, 40);
          ctx.fillStyle = color.afsLive;
          ctx.fillText(lang.LIVE, this.AFS_CLEAR_LIVE.x + 45, 40);
          var a = -16;
          drawImage(res.AFS2LOGO, this.AFS_CLEAR_ALL.x + 30, 40 + a);
          ctx.font = "14pt open_sans_condensedbold";
          ctx.fillStyle = "#D8D8D8";
          ctx.fillText(lang.FILTER, this.AFS_CLEAR_ALL.x + 45, 40 + a + 47);
          ctx.fillText(lang.DISPLAY, this.AFS_CLEAR_ALL.x + 45, 40 + a + 47 + 24);
          ctx.font = "12pt open_sans_condensedbold";
          for (var b = selectedStrip.name + "afs.eq.", c = 64, d = c, f = 0; 12 > f; f++) {
            var e = getValue(b + f),
              a = JSON.parse("[" + e + "]"),
              e = a[3],
              g = (a[0] + 0.1) | 0,
              h = a[1],
              k = bound(a[2], -24, 0);
            if (!(0 == e || 0.001 > Math.abs(k))) {
              k = ((10 * k) | 0) / 10 + "";
              0 > k.indexOf(".") && (k += ".0");
              var h = h | 0,
                m = 1 == e ? this.AFS_CLEAR_FIXED.x + 24 : this.AFS_CLEAR_LIVE.x + 24;
              ctx.textAlign = "right";
              ctx.fillStyle = 1 == e ? "#7F81FF" : color.afsLive;
              a = 1 == e ? c : d;
              ctx.fillText(g + "", m, a);
              ctx.fillText(k + "dB", m + 80, a);
              ctx.globalAlpha = 0.6;
              ctx.textAlign = "center";
              ctx.fillText("q" + h, m + 20, a);
              ctx.globalAlpha = 1;
              1 == e ? (c += 17) : (d += 17);
            }
          }
        },
      }),
      EQSlider = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "EQ_SLIDER";
          this.needMoveEvt = !0;
          this.lastClickTime = 0;
          this.background = color.eqBg;
          this.w = 50;
          this.h = 260;
          this.minValue = 0;
          this.maxValue = 1;
          this.oldValue = this.value = 0;
          this.defaultValue = -1;
          this.fader = res.eqVFaderGray;
          this.faderCenterY = 14;
          this.faderH = this.fader.h() - this.faderCenterY;
          this.faderW = this.fader.w();
          this.faderX = 10;
          this.faderS = 0;
          this.fadd = 20;
          this.textBot = this.textUp = "";
          this.bigMark = -1;
          this.keyPart = null;
          this.dbMarks = this.slide = !1;
          this.mV = [1, 0.9, 0.8, 0.7, 0.6, 0.5, 0.4, 0.3, 0.2, 0.1, 0];
          this.smV = [];
          this.moved = !1;
          this.aclr = "#fff";
          this.disabled = this.rightArrow = this.leftArrow = !1;
        },
        contains: function (a, b, c) {
          if (!this.enabled || !this.visible) return !1;
          if (c) return this.x <= a && this.x + this.w > a && this.y <= b && this.y + this.h > b;
          c = this.x;
          var d = this.y + (this.h - this.faderH) * (1 - this.getVal()),
            d = d | 0;
          return c <= a && c + this.w > a && d - 10 <= b && d + this.faderH + 10 > b;
        },
        setFader: function (a, b, c, d) {
          isDefined(c) && (this.fadd = c);
          isDefined(d) && (this.faderS = d);
          this.fader = a;
          this.faderCenterY = b;
          this.faderH = this.fader.h();
          this.faderW = this.fader.w();
        },
        setDefaultValue: function (a, b) {
          isDefined(b) || (b = !0);
          null != a && 0 <= a ? ((this.defaultValue = bound(a, 0, 1)), (this.bigMark = b ? this.defaultValue : -1)) : (this.bigMark = this.defaultValue = -1);
        },
        setValue: function (a) {
          a = bound(a, 0, 1);
          this.setVal(a);
          this.valueFunc(a);
          regUpdate(this);
        },
        onDown: function (a, b) {
          if (!this.disabled) {
            this.pressPoint = [a, b];
            this.moved = !1;
            var c = this.globalX() + 10,
              d = this.globalY() + (this.h - this.faderH) * (1 - this.getVal()),
              d = d | 0;
            if ((this.slide = c - 10 <= a && c + this.faderW + 10 >= a && d - 10 <= b && d + this.faderH + 10 >= b)) (this.oldValue = this.getVal()), this.onFocus();
          }
        },
        onMove: function (a, b) {
          if (this.slide) {
            var c = b - this.pressPoint[1];
            5 < Math.abs(c) && (this.moved = !0);
            c = bound(this.oldValue - c / (this.h - this.faderH), this.minValue, this.maxValue);
            this.innerSet(c);
          }
        },
        innerSet: function (a) {
          this.setVal(a);
          this.onValueChange(a);
          this.valueFunc(a);
          regUpdate(this);
        },
        onUp: function () {
          this.oldValue = 0;
          this.pressPoint = [-1, -1];
          this.slide = !1;
          var a = Date.now();
          if (a - this.lastClickTime < DBL_CLK_TIME) this.onDouble();
          this.moved || (this.lastClickTime = a);
        },
        onWheel: function (a) {
          if (!this.disabled) {
            var b = this.getVal(),
              b = bound(b + a / 120 / 30, 0, 1);
            this.setVal(b);
            this.onValueChange();
            this.valueFunc(b);
            regUpdate(this.parent);
          }
        },
        onDouble: function () {
          0 > this.defaultValue || (this.setVal(this.defaultValue), this.onValueChange(), this.valueFunc(this.defaultValue), regUpdate(this.parent));
        },
        onValueChange: function () {},
        onFocus: function () {},
        valueFunc: function (a) {},
        getState: function () {},
        paint: function () {
          this.getState();
          ctx.fillStyle = this.background;
          ctx.fillRect(0, 0, this.w, this.h + 10);
          this.disabled && (ctx.globalAlpha = 0.15);
          ctx.beginPath();
          ctx.lineWidth = 5;
          ctx.lineCap = "round";
          var a = (this.w / 2) | 0;
          this.disabled || ((ctx.strokeStyle = "rgba(255,255,255,0.5)"), ctx.beginPath(), ctx.moveTo(a + 0.5, 4.6), ctx.lineTo(a + 0.5, this.h - 8 + 0.5 - this.faderS), ctx.stroke());
          ctx.strokeStyle = color.black;
          ctx.beginPath();
          ctx.moveTo(a, 4);
          ctx.lineTo(a, this.h - 8 - this.faderS);
          ctx.stroke();
          this.drawMarks();
          a = (this.h - this.faderH) * (1 - this.getVal());
          drawImage(this.fader, this.faderX, a | 0);
          a = a + this.fadd + this.faderCenterY;
          this.rightArrow && ((ctx.fillStyle = this.aclr), ctx.fillTriangle2(this.w, a - 10, this.w - 8, a, this.w, a + 10));
          this.leftArrow && ((ctx.fillStyle = this.aclr), ctx.fillTriangle2(0, a - 10, 8, a, 0, a + 10));
        },
        drawMarks: function () {
          var a = this.h - this.faderH,
            b = this.fadd + this.faderCenterY,
            c = this.w / 2;
          if (this.dbMarks) {
            for (var c = [1, 0.8945, 0.634, 0.52941, 0.3752, 0.18, 0.0567, 0], d = 0; d < c.length; d++) {
              var f = a * (1 - c[d]) + b,
                f = f | 0;
              ctx.fillStyle = "rgba(0,0,0,0.6)";
              ctx.fillRect(0, f, 18, 1);
              ctx.fillRect(32, f, 18, 1);
              ctx.fillStyle = "rgba(255,255,255,0.2)";
              ctx.fillRect(0, f + 1, 18, 1);
              ctx.fillRect(32, f + 1, 18, 1);
            }
            f = a * (1 - zeroDbPos) + b;
            ctx.fillStyle = "#939394";
            ctx.fillRect(0, f, 18, 3);
            ctx.fillRect(32, f, 18, 3);
          } else {
            for (d = 0; d < this.mV.length; d++)
              (f = a * (1 - this.mV[d]) + b),
                (f |= 0),
                (ctx.fillStyle = "rgba(0,0,0,0.6)"),
                ctx.fillRect(c + 6, f, 18, 1),
                ctx.fillRect(c - 6, f, -18, 1),
                (ctx.fillStyle = "rgba(255,255,255,0.2)"),
                ctx.fillRect(c - 6, f + 1, -18, 1),
                ctx.fillRect(c + 6, f + 1, 18, 1);
            for (d = 0; d < this.smV.length; d++)
              (f = a * (1 - this.smV[d]) + b),
                (f |= 0),
                (ctx.fillStyle = "rgba(0,0,0,0.6)"),
                ctx.fillRect(6, f, 12, 1),
                ctx.fillRect(32, f, 12, 1),
                (ctx.fillStyle = "rgba(255,255,255,0.2)"),
                ctx.fillRect(6, f + 1, 12, 1),
                ctx.fillRect(32, f + 1, 12, 1);
            0 < this.bigMark && ((f = a * (1 - this.bigMark) + b), (f |= 0), (ctx.fillStyle = "rgba(255,255,255,0.2)"), ctx.fillRect(0, f, 18, 3), ctx.fillRect(32, f, 18, 3));
          }
          ctx.font = font.eqSlText;
          ctx.textAlign = "center";
          0 < this.textUp.length &&
          ((ctx.fillStyle = this.background),
            ctx.fillRect(0, -35, this.w, 20),
            (ctx.fillStyle = "#000"),
            ctx.fillText(this.textUp, this.w / 2 + 1, -19),
            (ctx.fillStyle = color.tabText),
            ctx.fillText(this.textUp, this.w / 2, -20));
          if (0 < this.textBot.length)
            for (a = this.textBot.split(" "), d = 0; d < a.length; d++)
              (ctx.fillStyle = this.background),
                ctx.fillRect(-4, this.h + 8 + 16 * d, this.w + 8, 16),
                (ctx.fillStyle = "#000"),
                ctx.fillText(a[d], this.w / 2 + 1, this.h + 23 + 16 * d + 1, this.w + 6),
                (ctx.fillStyle = color.tabText),
                ctx.fillText(a[d], this.w / 2, this.h + 23 + 16 * d, this.w + 6);
        },
      }),
      EQHSlider2 = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "EQHSlider2";
          this.needMoveEvt = !0;
          this.lastClickTime = 0;
          this.w = 300;
          this.h = 56;
          this.laneY = 25;
          this.faderY = 9;
          this.defaultValue = this.oldValue = this.value = 0;
          this.fader = res.eqHFaderGray;
          this.faderW = this.fader.w();
          this.faderH = this.fader.h();
          this.faderCX = 36;
          this.keyPart = null;
          this.bg = color.eqBg;
          this.haveMarks = this.disableWheel = !1;
          this.marksArr = [0, 0.25, 0.5, 0.75, 1];
        },
        setFader: function (a, b, c, d) {
          isDefined(c) && (this.fadd = c);
          isDefined(d) && (this.faderS = d);
          this.fader = a;
          this.faderCX = b;
          this.faderH = this.fader.h();
          this.faderW = this.fader.w();
        },
        setDefaultValue: function (a) {
          this.defaultValue = bound(a, 0, 1);
        },
        setValue: function (a) {
          this.setVal(bound(a, 0, 1));
          regUpdate(this);
        },
        innerSet: function (a) {
          this.setVal(a);
          this.value = a;
          this.onValueChange();
          this.valueFunc(a);
          regUpdate(this);
        },
        onDown: function (a, b) {
          this.pressPoint = [a, b];
          var c = this.globalX() + (this.w - this.faderW) * this.getVal(),
            d = this.globalY() + 9,
            c = c | 0;
          if ((this.slide = c - 10 <= a && c + this.faderW + 10 >= a && d - 10 <= b && d + this.faderH + 10 >= b)) (this.oldValue = this.getVal()), this.onFocus();
        },
        onMove: function (a, b) {
          if (this.slide) {
            var c = bound(this.oldValue + (a - this.pressPoint[0]) / (this.w - this.faderW), 0, 1);
            this.innerSet(c);
          }
        },
        onUp: function () {
          this.oldValue = this.value;
          this.pressPoint = [-1, -1];
          this.slide = !1;
          if (!(0 > this.defaultValue)) {
            var a = Date.now();
            a - this.lastClickTime < DBL_CLK_TIME && (this.setVal(this.defaultValue), this.onValueChange(), this.valueFunc(), regUpdate(this.parent));
            this.lastClickTime = a;
          }
        },
        onWheel: function (a) {
          if (!this.disableWheel) {
            var b = this.getVal(),
              b = bound(b + a / 120 / 30, 0, 1);
            this.setVal(b);
            this.onValueChange();
            this.valueFunc(b);
            regUpdate(this.parent);
          }
        },
        onValueChange: function () {},
        onFocus: function () {},
        valueFunc: function () {},
        getState: function () {
          this.value = this.getVal();
        },
        paint: function () {
          this.getState();
          ctx.fillStyle = this.bg;
          ctx.fillRect(0, 0, this.w, this.h);
          if (this.haveMarks) {
            ctx.lineWidth = 1;
            ctx.strokeStyle = "rgba(0,0,0,0.35)";
            ctx.beginPath();
            for (var a = 0; a < this.marksArr.length; a++) {
              var b = (this.faderCX + (this.w - this.faderW) * this.marksArr[a]) | 0;
              ctx.moveTo(b + 0.5, 3);
              ctx.lineTo(b + 0.5, 12);
              ctx.moveTo(b + 0.5, this.h - 3 - 9);
              ctx.lineTo(b + 0.5, this.h - 3);
            }
            ctx.stroke();
            ctx.beginPath();
            ctx.strokeStyle = "rgba(255,255,255,0.25)";
            for (a = 0; a < this.marksArr.length; a++)
              (b = (this.faderCX + (this.w - this.faderW) * this.marksArr[a]) | 0), ctx.moveTo(b - 0.5, 3), ctx.lineTo(b - 0.5, 12), ctx.moveTo(b - 0.5, this.h - 3 - 9), ctx.lineTo(b - 0.5, this.h - 3);
            ctx.stroke();
          }
          ctx.lineWidth = 5;
          ctx.lineCap = "round";
          a = this.w - 4;
          this.disabled || ((ctx.strokeStyle = "#AAA"), ctx.beginPath(), ctx.moveTo(4.5, this.laneY + 0.5), ctx.lineTo(a + 0.5, this.laneY + 0.5), ctx.stroke());
          ctx.strokeStyle = color.black;
          ctx.beginPath();
          ctx.moveTo(4, this.laneY);
          ctx.lineTo(a, this.laneY);
          ctx.stroke();
          drawImage(this.fader, ((this.w - this.faderW) * this.value) | 0, this.faderY);
        },
      }),
      EQButton = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "TabButton";
          this.w = 70;
          this.h = 30;
          this.mode = this.state = 0;
          this.color = color.purple;
          this.img1 = this.img0 = this.text = null;
          this.needBG = !0;
          this.invertedValue = this.longClickMark = !1;
          this.holdTimer = null;
        },
        setImages: function (a, b) {
          this.img0 = a;
          this.img1 = b;
          this.w = this.img0.w();
          this.h = this.img0.h();
        },
        onDown: function () {
          0 == this.state && ((this.state = 1), "undefined" != typeof this.parent.setMode && this.parent.setMode(this.mode));
          var a = this;
          this.holdTimer = setTimeout(function () {
            a.onHold();
          }, HOLD_TIME);
          this.valueFunc();
          regUpdate(this.parent);
        },
        onUp: function () {
          clearTimeout(this.holdTimer);
        },
        onHold: function () {},
        getState: function () {
          "undefined" != typeof this.parent.mode && (this.state = this.parent.mode == this.mode ? 1 : 0);
        },
        valueFunc: function () {},
        paint: function () {
          this.needBG && ((ctx.fillStyle = color.bg), ctx.fillRect(0, 0, this.w, this.h));
          this.getState();
          0 == this.state
            ? null != this.img0
              ? drawImage(this.img0, 0, 0)
              : ((ctx.strokeStyle = color.tabStroke),
                ctx.strokeRect(0.5, 0.5, this.w - 1, this.h - 2),
                (ctx.font = font.tabText),
                (ctx.fillStyle = color.tabText),
                (ctx.textAlign = "center"),
                ctx.fillText(this.text, (this.w / 2) | 0, 22, this.w))
            : null != this.img1
              ? drawImage(this.img1, 0, 0)
              : ((ctx.fillStyle = this.color),
                ctx.fillRect(0, 0, this.w, this.h),
                (ctx.font = font.tabText),
                (ctx.fillStyle = color.tabTextSel),
                (ctx.textAlign = "center"),
                ctx.setShadow(color.shadow, 3, 1, 1),
                ctx.fillText(this.text, (this.w / 2) | 0, 22, this.w));
          if (this.text) {
            var a = { align: "center", valign: "middle", color: this.state ? "#eee" : "#222", shadow: ["#bbb", 0, 1, 1], font: "15px open_sans_condensedbold" };
            this.state && (a.shadow[0] = "#333");
            ctx.drawText(this.text, (this.w / 2) | 0, (this.h / 2) | 0, a);
          }
          if (this.longClickMark) {
            a = 4;
            if ((this.invertedValue && !this.state) || (!this.invertedValue && this.state)) a += 1;
            ctx.fillStyle = color.longClickMark2;
            ctx.fillCircle(this.w - 6, a + 1, 3);
            ctx.fillStyle = color.longClickMark;
            ctx.fillCircle(this.w - 6, a + 1, 2);
          }
        },
      }),
      STEREOSEL = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "STEREOSEL";
          this.w = 120;
          this.h = 30;
          this.color = color.purple;
          this.stereo = !1;
          this.indicatorMode = this.left = this.link = !0;
        },
        onDown: function (a) {
          if (this.visible && !this.indicatorMode) {
            a -= this.globalX();
            var b = this.parent;
            !this.link && (80 < a || 40 > a) && ((this.left = !this.left), b.pages[b.mode].setLeft && b.pages[b.mode].setLeft(this.left));
            40 < a && 80 > a && ((this.link = !this.link), (this.left = !0), b.pages[b.mode].setLinked && b.pages[b.mode].setLinked(this.link));
            regUpdate(this);
          }
        },
        getState: function () {
          var a = this.parent;
          this.indicatorMode = !0;
          switch (selectedStrip.type) {
            case E_STRIP_TYPE.MASTER:
              switch (a.mode) {
                case a.E_MODE.eqm:
                case a.E_MODE.dyn:
                case a.E_MODE.misc:
                  this.indicatorMode = !1;
              }
              break;
            case E_STRIP_TYPE.SUB:
              switch (a.mode) {
                case a.E_MODE.misc:
                  this.indicatorMode = !1;
              }
          }
          a.mode == a.E_MODE.misc
            ? ((this.link = !1), (this.left = a.pages[a.E_MODE.misc].left))
            : a.mode == a.E_MODE.eqm
              ? ((this.link = getValue("m.eq.linked")), (this.left = a.pages[a.E_MODE.eqm].left))
              : a.mode == a.E_MODE.dyn && ((this.link = getValue("m.dyn.linked")), (this.left = a.pages[a.E_MODE.dyn].left));
        },
        paint: function () {
          this.getState();
          this.color = editWidget.buttons[editWidget.mode].color;
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, 0, this.w, this.h);
          ctx.strokeStyle = "rgba(200,200,200,0.1)";
          ctx.lineWidth = 1;
          var a = !1,
            b = !1;
          this.indicatorMode && (this.link = !0);
          this.link ? ((ctx.strokeStyle = "#fff"), (a = b = !0)) : ((ctx.strokeStyle = "#888"), this.left ? (a = !0) : (b = !0));
          ctx.lineWidth = 2;
          ctx.beginPath();
          ctx.arc(55, 15, 10, 0, 2 * Math.PI);
          ctx.stroke();
          ctx.beginPath();
          ctx.arc(65, 15, 10, 0, 2 * Math.PI);
          ctx.stroke();
          ctx.beginPath();
          this.indicatorMode || ((ctx.fillStyle = a ? this.color : "#444"), ctx.fillRect(0, 0, 40, this.h), (ctx.fillStyle = b ? this.color : "#444"), ctx.fillRect(80, 0, 40, this.h));
          ctx.font = font.settingsLabel;
          ctx.fillStyle = color.tabTextSel;
          ctx.textAlign = "center";
          ctx.setShadow(color.black, 3, 1, 1);
          ctx.fillText(lang.L, 20, 21);
          ctx.fillText(lang.R, this.w - 20, 21);
          ctx.shadowColor = "transparent";
        },
      });
    function VtoRATIO(a) {
      return 1 / a;
    }
    function desqr(a) {
      return 1 - (1 - a) * (1 - a);
    }
    function idesqr(a) {
      return 1 - Math.sqrt(Math.abs(1 - a));
    }
    function VtoATTACK(a) {
      return (1 * Math.pow(400, desqr(a))) | 0;
    }
    function VtoREL(a) {
      return (10 * Math.pow(200, desqr(a))) | 0;
    }
    function VtoDYNGAIN(a) {
      return (96 * a - 72) | 0;
    }
    function VtoDYNOUTGAIN(a) {
      return 72 * a - 24;
    }
    function VtoDYNGATE(a) {
      return precision(-90 + 96 * a, 1);
    }
    function VtoTHRESH(a) {
      return precision(-90 + 96 * a, 1);
    }
    function RATIOtoV(a) {
      return 1e-4 > a ? 1 : bound(1 / a, 0, 1);
    }
    function modVu(a, b) {
      if (0.001 > b || 0.001 > a) return 0;
      var c =
        a +
        0.09047801706317746 * (-8.22581937262139 + Math.log(Math.exp(b * (23.90844819639692 + b * (-26.23877598214595 + (12.195249692570245 - 0.4878099877028098 * b) * b))) * (0.055 > b ? Math.sin(28.559933214452666 * b) : 1)));
      0 > c ? (c = 0) : 2 < c && (c = 2);
      return c;
    }
    function chopLastSpace(a) {
      if (null == a || "" == a) return a;
      a += "";
      return a.endsWith(" ") ? a.substr(0, a.length - 1) : a;
    }
    var AUXSendsPage = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "AUXSendsPage";
          this.mode = -1;
          this.y = measures.topWidgetHeight;
          this.enabled = !1;
          this.auxNum = curSetup.aux;
          this.buttons = [];
          this.color = color.AUX;
          this.bww = 6 < curSetup.aux ? 92 : 111;
          this.initWidgets();
          this.setMode(0);
        },
        setOffset: function (a) {
          this.page.enabled && this.page.setOffset(a);
          this.page2 && this.page2.enabled && this.page2.setOffset(a);
        },
        syncOffset: function () {
          HAVE_MATRIX && this.page2 && this.page2.enabled ? bottomWidget.setOffset2(this.page2.offsetX) : bottomWidget.setOffset2(this.page.offsetX);
        },
        setVU: function (a, b) {
          1 <= b && this.page.strips[a].clip.clip();
          this.page.strips[a].vu.setValue(b);
        },
        onShow: function () {
          for (var a = 0; a < this.buttons.length; a++) this.buttons[a].getState();
          this.upd();
        },
        upd: function () {
          this.setMode(this.mode, !0, !0);
        },
        upd2: function () {
          this.setMode(this.mode, !0, !1);
        },
        setMode: function (a, b, c) {
          c = c || !1;
          if (!((this.mode == a && !b) || 0 > a || a >= curSetup.aux || (hideHPAUX && a > curSetup.aux - 3))) {
            this.mode = a;
            auxoutWidget.setAux(a);
            if (HAVE_MATRIX && auxStrips[this.mode].getNameValue("matrix")) {
              this.page.hide();
              this.page2.show();
              this.page2.auxID = a;
              for (b = 0; b < mtxSendStrips.length; b++) mtxSendStrips[b].setMode(a);
              this.page2.arrangeStrips();
            } else {
              this.page.show();
              HAVE_MATRIX && this.page2.hide();
              this.page.auxID = a;
              for (b = 0; b < this.page.strips.length; b++) this.page.strips[b].setMode(a);
              this.page.arrangeStrips();
              HAVE_MATRIX && this.page2.arrangeStrips();
            }
            c || bottomWidget.upd();
            this.syncOffset();
            bottomWidget.update();
            regUpdate(this);
          }
        },
        nextMode: function () {
          this.mode == this.buttons.length - 1 || (hideHPAUX && this.mode == this.buttons.length - 3) ? this.setMode(0) : this.setMode(this.mode + 1);
        },
        initWidgets: function () {
          this.page = new AUXMixer(this, 0);
          HAVE_MATRIX && (this.page2 = new MTXMixer(this, 0));
          for (var a = 0; a < auxStrips.length; a++) {
            var b = new TabButton(this);
            b.textColor = b.color = this.color;
            b.mode = a;
            b.text = "NULL";
            b.setSize(this.bww, 30);
            b.getState = function () {
              this.mode > curSetup.aux - 3 && (this.dsbld = hideHPAUX);
              var a = auxStrips[this.mode],
                b = a.getNameValue("matrix") || 0;
              HAVE_MATRIX || (b = !1);
              a = a.getName();
              60 > this.w && (a = b ? lang.MTX + " " + (this.mode + 1) : lang.AUX + " " + (this.mode + 1));
              this.text = a.truncate(12);
              this.cosmetic = !1;
              this.state = this.parent.mode == this.mode ? 1 : 0;
              this.textColor = this.color = b ? color.MATRIX : color.AUX;
              b = auxStrips[this.parent.mode].getNameValue("stereoIndex");
              0 == b && this.parent.mode + 1 == this.mode && ((this.cosmetic = !0), (this.state = 1));
              1 == b && this.parent.mode - 1 == this.mode && ((this.cosmetic = !0), (this.state = 1));
            };
            this.buttons.push(b);
          }
        },
        calcGeometry: function () {
          this.w = screenWidth - this.x;
          masterWidget.enabled && (this.w -= masterWidget.w);
          auxoutWidget.enabled && (this.w -= masterWidget.w);
          slideOutWidget.enabled && (this.w -= slideOutWidget.w);
          this.h = screenHeight - this.y - bottomWidget.h;
          var a = 92;
          770 > this.w && 6 < this.buttons.length && (a = 81);
          16 == this.buttons.length && (a = Math.floor(this.w / this.buttons.length) - 1);
          this.buttons.length * a > this.w && (a = (this.w / this.buttons.length - 1) | 0);
          for (var b = 0; b < this.buttons.length; b++) (this.buttons[b].w = a), this.buttons[b].setPos(this.w - (this.buttons[b].w + 1) * (this.buttons.length - b), 5);
        },
        paint: function () {
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, 0, this.w, this.h);
          var a = auxStrips[this.mode].getNameValue("matrix") || 0;
          ctx.fillStyle = a ? color.MATRIX : color.AUX;
          ctx.fillRect(0, 35, this.w, 4);
        },
      }),
      AUXMixer = Class.create(Widget, {
        initialize: function ($super, b, c) {
          $super(b);
          this.widgetName = "AUX_MIXER";
          this.y = 40;
          this.needClip = !0;
          this.color = color.AUX;
          this.auxID = c;
          this.strips = [];
          this.regKey("settings.auxmutelink");
          this.vis = 0;
          this.createStrips();
        },
        arrangeStrips: function () {
          var a = this.stw,
            b = 0 <= activeViewGroup && 10 > activeViewGroup && inView;
          b && checkOrderedVG();
          var c = 0,
            d = 0,
            f = this.strips,
            e = [];
          if (inView)
            for (var g = 0; g < inView.length; g++) {
              var h = inView[g];
              switch (allStrips[h].type) {
                case E_STRIP_TYPE.IN:
                case E_STRIP_TYPE.LINEIN:
                case E_STRIP_TYPE.MEDIA:
                case E_STRIP_TYPE.FX:
                  e.push(h);
              }
            }
          for (g = 0; g < f.length; g++) {
            var h = f[g],
              k = h.st;
            k && ((h.enabled = k.enabled), (h.firstInGroup = !0), (h.lastInGroup = !0), h.enabled && d++);
          }
          k = !1;
          d || (k = !0);
          for (g = d = 0; g < f.length; g++) (h = f[g]), k && (h.enabled = !0), h.enabled && (d++, b && (c = e.indexOf(h.id)), (h.x = c * a), c++);
          c = -1;
          e = null;
          if (!b)
            for (g = 0; g < f.length; g++)
              (h = f[g]),
                h.enabled
                  ? (c != h.color ? ((h.firstInGroup = !0), (h.lastInGroup = !1), null != e && (e.lastInGroup = !0), (c = h.color)) : ((h.firstInGroup = !1), (h.lastInGroup = !1)), (e = h))
                  : ((h.firstInGroup = !1), (h.lastInGroup = !1));
          e && (e.lastInGroup = !0);
          this.realWidth = d * a;
          this.vis = d;
        },
        createStrips: function () {
          for (var a = curSetup.input, b = curSetup.fx, c = curSetup.linein, d = 0, f = "aux." + this.auxID + ".", e = 0; e < a; e++) {
            var g = "i." + e + ".",
              h = inStrips[e],
              g = new AUXStrip(this, h.id, g, f);
            0 == e && (g.firstInGroup = !0);
            e == a - 1 && (g.lastInGroup = !0);
            g.id = inStrips[e].id;
            g.color = this.color;
            g.text = inStrips[e].text;
            g.st = h;
            this.strips.push(g);
            auxSendStrips.push(g);
            inStrips[e].AUXS.push(g);
            d++;
          }
          for (e = 0; e < c; e++)
            (g = "l." + e + "."),
              (h = lineinStrips[e]),
              (g = new AUXStrip(this, h.id, g, f)),
            0 == e && (g.firstInGroup = !0),
            e == c - 1 && (g.lastInGroup = !0),
              (g.id = h.id),
              (g.color = h.color),
              (g.text = h.text),
              (g.st = h),
              this.strips.push(g),
              auxSendStrips.push(g),
              h.AUXS.push(g),
              d++;
          h = mediaStrips[0];
          g = new AUXStrip(this, h.id, "p.0.", f);
          g.firstInGroup = !0;
          g.id = mediaStrips[0].id;
          g.color = color.media;
          g.sl.color = color.media;
          g.sl.fader = res.fader;
          g.text = mediaStrips[0].text;
          g.st = h;
          this.strips.push(g);
          mediaStrips[0].AUXS.push(g);
          auxSendStrips.push(g);
          d++;
          h = mediaStrips[1];
          g = new AUXStrip(this, h.id, "p.1.", f);
          g.lastInGroup = !0;
          g.id = mediaStrips[1].id;
          g.color = color.media;
          g.sl.color = color.media;
          g.sl.fader = res.fader;
          g.text = mediaStrips[1].text;
          g.st = h;
          this.strips.push(g);
          mediaStrips[1].AUXS.push(g);
          auxSendStrips.push(g);
          d++;
          for (e = 0; e < b; e++)
            (g = "f." + e + "."),
              (h = fxStrips[e]),
              (g = new AUXStrip(this, h.id, g, f)),
            0 == e && (g.firstInGroup = !0),
            e == b - 1 && (g.lastInGroup = !0),
              (g.id = fxStrips[e].id),
              (g.color = color.blue),
              (g.sl.color = color.blue),
              (g.sl.fader = res.blueFader),
              (g.text = fxStrips[e].text),
              (g.st = h),
              this.strips.push(g),
              fxStrips[e].AUXS.push(g),
              auxSendStrips.push(g),
              d++;
          this.vis = this.strips.length;
        },
        setOffset: function (a) {
          var b = (this.stw = settings.customStripWidthEnabled ? settings.customStripWidth : measures.mixerStripWidth);
          this.offsetX = a;
          0 > this.offsetX && (this.offsetX = 0);
          a = this.vis * b - this.w;
          0 > a && (a = 0);
          this.offsetX > a && (this.offsetX = a);
          this.offsetXold = this.offsetX;
          regUpdate(this);
        },
        calcGeometry: function () {
          this.w = this.parent.w - this.x;
          this.h = this.parent.h - this.y;
          this.setOffset(this.offsetX);
        },
        paint: function () {
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, 0, this.w, this.h);
          if (this.vis * this.stw < this.w)
            for (var a = this.vis * this.stw; a < this.w; a += this.stw) fillVertPattern(res.blStripTile, this.h, a), drawImage(res.blStripBottom, a, this.h - res.blStripBottom.h()), drawImage(res.blStripTop, a, 0);
        },
      }),
      AUX_EDIT_PAGE = Class.create(Widget, {
        initialize: function ($super, b, c) {
          $super(b);
          this.widgetName = "CH_AUX_PAGE";
          this.y = 40;
          this.color = color.AUX;
          this.needMoveEvt = !0;
          this.condensed = c || !1;
          this.needClip = !0;
          this.mode = 0;
          this.SLIDERS = [];
          this.LEDS = [];
          this.MUTES = [];
          this.POSTS = [];
          this.PROCS = [];
          this.VUS = [];
          this.CLIPS = [];
          this.maxX = 600;
          this.initWidgets();
          this.setMode(0);
          this.onShow();
        },
        setMode: function (a) {
          this.mode = a;
          regUpdate(this);
        },
        onDown: function (a, b) {
          this.lastPressPoint = this.pressPoint;
          this.pressPoint = [a, b];
          this.ppx = this.offsetX + a;
        },
        onMove: function (a, b, c) {
          2 < mouseTargets.length || (isDefined(tHash[c]) && 2 < tHash[c].length) || this.setOffset(this.ppx - a);
        },
        onUp: function (a) {
          var b = Date.now(),
            c = Math.abs(this.lastPressPoint[0] - this.pressPoint[0]),
            d = Math.abs(this.lastPressPoint[1] - this.pressPoint[1]);
          2 < mouseTargets.length ||
          (isDefined(tHash[a]) && 2 < tHash[a].length) ||
          (30 > c && 30 > d && b - this.lastClickTime < DBL_CLK_TIME ? (this.onDouble(), (this.lastClickTime = b - DBL_CLK_TIME)) : (this.lastClickTime = b));
        },
        onDouble: function () {
          setMode(E_MODE.MIX);
        },
        setOffset: function (a) {
          this.offsetX = bound(a | 0, 0, this.maxX);
          regUpdate(this);
        },
        onShow: function () {
          this.syncSliders();
        },
        syncSliders: function () {
          if (null != selectedStrip) {
            switch (selectedStrip.type) {
              case E_STRIP_TYPE.IN:
              case E_STRIP_TYPE.LINEIN:
              case E_STRIP_TYPE.MEDIA:
              case E_STRIP_TYPE.FX:
                this.keyPrefix = selectedStrip.name + "aux.";
                for (var a = 0; a < this.SLIDERS.length; a++) {
                  var b = selectedStrip.name + "aux." + a + ".";
                  this.SLIDERS[a].setKey(b + "value");
                  this.SLIDERS[a].bigMark = -1;
                  this.LEDS[a].setKey(b + "value");
                  this.MUTES[a].setKey(b + "mute");
                  this.MUTES[a].img0 = res.bMuteOff;
                  this.MUTES[a].kp = b;
                  this.MUTES[a].st = selectedStrip;
                  this.MUTES[a].getState = function () {
                    if (1 == auxStrips[this.mode].getNameValue("matrix")) (this.state = 0), (this.disabled = !0);
                    else {
                      this.state = getValue(this.kp + "mute");
                      var a = getValue("settings.auxmutelink"),
                        b = getValue(this.kp + "post");
                      this.disabled = !1;
                      (a || b) && this.st.getMuteState() && ((this.state = 1), (this.disabled = !0));
                    }
                  };
                  this.MUTES[a].onToggle = function () {};
                  this.MUTES[a].onToggleUp = function () {};
                  this.MUTES[a].onToggleDown = function () {};
                  this.POSTS[a].show();
                  this.POSTS[a].setKey(b + "post");
                  this.PROCS[a] && (this.PROCS[a].show(), this.PROCS[a].setKey(b + "postproc"));
                  this.VUS[a].hide();
                  this.CLIPS[a].hide();
                  this.condensed ? this.SLIDERS[a].setFader(res.BMSL_RED, 18, 0, 6) : this.SLIDERS[a].setFader(res.gainFader, 13, 20, 0);
                  this.SLIDERS[a].background = color.eqBg;
                }
                break;
              case E_STRIP_TYPE.MASTER:
                for (a = 0; a < this.SLIDERS.length; a++)
                  (this.keyPrefix = "a." + a),
                    (b = auxStrips[a]),
                    this.SLIDERS[a].setKey(this.keyPrefix + ".mix"),
                    (this.SLIDERS[a].bigMark = zeroDbPos),
                    this.LEDS[a].setKey(this.keyPrefix + ".mix"),
                    this.MUTES[a].setKey(this.keyPrefix + ".mute"),
                    (this.MUTES[a].kkk = this.keyPrefix),
                    (this.MUTES[a].st = b),
                    (this.MUTES[a].getState = function () {
                      selectedStrip.type == E_STRIP_TYPE.MASTER && ((this.state = this.st.getMuteState()), (this.img0 = this.st.getNameValue("forceunmute") ? res.bMuteOff_F : res.bMuteOff), (this.disabled = !1));
                    }),
                    (this.MUTES[a].onToggle = function () {
                      selectedStrip.type == E_STRIP_TYPE.MASTER && checkMutes();
                    }),
                    (this.MUTES[a].onToggleUp = function () {
                      if (selectedStrip.type == E_STRIP_TYPE.MASTER) {
                        var a = getValue("mgmask"),
                          b = getValue(this.kkk + ".mgmask"),
                          b = a & b,
                          a = checkBit(a, MUTEALL_BIT_IDX),
                          f = !1;
                        if (IS_UI_24 && this.type == E_STRIP_TYPE.IN) {
                          var e = this.st.getNameValue("vca");
                          vcaStrips[e] && (f = vcaStrips[e].getMuteState());
                        }
                        b || a || f || this.st.setNameValue("mute", 1);
                        this.st.setNameValue("forceunmute", 0);
                      }
                    }),
                    (this.MUTES[a].onToggleDown = function () {
                      selectedStrip.type == E_STRIP_TYPE.MASTER && (this.st.getMuteState(!0, !0) ? this.st.setNameValue("forceunmute", 1) : this.st.setNameValue("mute", 0));
                    }),
                    this.POSTS[a].hide(),
                    this.VUS[a].show(),
                    this.CLIPS[a].show(),
                  this.PROCS[a] && this.PROCS[a].hide(),
                    this.condensed ? this.SLIDERS[a].setFader(res.BMSL_GOLD, 18, 0, 6) : this.SLIDERS[a].setFader(res.auxFader, 13, 20, 0),
                    (this.SLIDERS[a].background = color.eqBg);
            }
            this.calcGeometry();
          }
        },
        initWidgets: function () {
          this.regKey("settings.auxmutelink");
          for (var a = this, b = 0; b < auxStrips.length; b++) {
            var c = new AUX_LED(this);
            c.mode = b;
            c.getState = function () {
              this.dsbld = 1 == auxStrips[this.mode].getNameValue("matrix");
              selectedStrip.type == E_STRIP_TYPE.MASTER && (this.dsbld = !1);
            };
            this.LEDS.push(c);
            c = new CheckBox(this);
            c.setImages(res.bMuteOff, res.bMuteOn);
            c.mode = b;
            c.getState = function () {
              this.disabled = 1 == auxStrips[this.mode].getNameValue("matrix");
              selectedStrip.type == E_STRIP_TYPE.MASTER && (this.disabled = !1);
            };
            this.MUTES.push(c);
            c = new VUMeter(this);
            c.calcGeometry = function () {};
            this.VUS.push(c);
            c = new ClipBulb(this);
            this.CLIPS.push(c);
            var d = new EQSlider(this);
            d.fader = res.eqVFaderGray;
            this.condensed && d.setFader(res.BMSL_GOLD, 18, 0, 6);
            d.dbMarks = !0;
            d.mode = b;
            d.aclr = color.AUX;
            d.onFocus = function () {
              a.setMode(this.mode);
            };
            d.onValueChange = function () {
              regUpdate(a.LEDS[this.mode]);
            };
            d.getState = function () {
              var b = 1 == auxStrips[this.mode].getNameValue("matrix");
              selectedStrip.type == E_STRIP_TYPE.MASTER
                ? ((this.disabled = !1),
                  a.condensed ? (d.setFader(res.BMSL_GOLD, 18, 0, 6), (d.fadd = 0), (this.fader = b ? res.BMSL_BROWN : res.BMSL_GOLD)) : (this.fader = b ? res.mtxFader : res.auxFader),
                IS_UI_24 && (this.disabled = !!auxStrips[this.mode].getNameValue("link2master")))
                : ((this.disabled = b), (this.fader = a.condensed ? res.BMSL_GOLD : res.auxFader));
              switch (auxStrips[this.mode].getNameValue("stereoIndex")) {
                case 0:
                  this.leftArrow = !1;
                  this.rightArrow = !0;
                  break;
                case 1:
                  this.rightArrow = !1;
                  this.leftArrow = !0;
                  break;
                default:
                  this.rightArrow = this.leftArrow = !1;
              }
            };
            this.SLIDERS.push(d);
            c = new CheckBox(this);
            c.mode = b;
            c.setImages(res.bPre, res.bPost);
            c.getState = function () {
              this.disabled = 1 == auxStrips[this.mode].getNameValue("matrix");
            };
            this.POSTS.push(c);
          }
        },
        sync: function () {
          for (var a = this.SLIDERS.length - 2; a < this.SLIDERS.length; a++)
            (this.LEDS[a].dsbld = hideHPAUX), (this.SLIDERS[a].disabled = hideHPAUX), (this.MUTES[a].disabled = hideHPAUX), (this.POSTS[a].disabled = hideHPAUX);
        },
        calcGeometry2: function () {
          this.w = this.parent.w;
          this.h = this.parent.h - this.y - 5;
        },
        calcGeometry: function () {
          this.calcGeometry2();
          var a = ((this.w - 90 * this.SLIDERS.length + this.SLIDERS[0].w) / 2) | 0;
          0 > a && (a = 30);
          for (var b = selectedStrip.type == E_STRIP_TYPE.MASTER, c = 0, d = 0; d < this.SLIDERS.length; d++)
            (c = a + 90 * d),
              this.LEDS[d].setPos(c - 15, 38),
              this.MUTES[d].setPos(c, 76),
              this.SLIDERS[d].setPos(c + (b ? 10 : 0), 118),
              (this.SLIDERS[d].h = this.h - this.SLIDERS[d].y - (b ? 50 : 100)),
              this.POSTS[d].setPos(c, this.h - 86),
            b && (this.VUS[d].setPos(c - 16 + (b ? 10 : 0), this.SLIDERS[d].y + 18), this.VUS[d].setSize(11, this.SLIDERS[d].h - 20), this.CLIPS[d].setPos(c - 22 + (b ? 10 : 0), this.SLIDERS[d].y - 4));
          this.maxX = c + 70 - this.w;
          0 > this.maxX && (this.maxX = 0);
        },
        paint: function () {
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(this.offsetX, 0, this.w, this.h);
          if (!this.condensed) {
            var a = ctx.createLinearGradient(this.offsetX + 0, 0, this.offsetX + this.w, 0);
            a.addColorStop(0, "transparent");
            a.addColorStop(0.5, color.AUX);
            a.addColorStop(1, "transparent");
            ctx.fillStyle = a;
            selectedStrip.type == E_STRIP_TYPE.MASTER && ctx.fillRect(this.offsetX, 0, this.w, 32);
          }
          ctx.font = "bold 16pt open_sans_condensedbold";
          ctx.textAlign = "center";
          ctx.setShadow(color.black, 4, 2, 2);
          if (selectedStrip.type === E_STRIP_TYPE.MASTER)
            (ctx.fillStyle = color.black),
              ctx.fillText(lang.AUX_MASTER_LEVELS, this.offsetX + Math.floor(this.w / 2 + 1), 25),
              (ctx.fillStyle = color.labelText),
              ctx.fillText(lang.AUX_MASTER_LEVELS, this.offsetX + Math.floor(this.w / 2), 24),
              (a = textWidth(lang.AUX_MASTER_LEVELS));
          else {
            var b = lang.AUX_SENDS_FOR.format(selectedStrip.getName()),
              a = textWidth(b),
              c = this.offsetX + Math.floor((this.w - a) / 2);
            ctx.textAlign = "left";
            ctx.fillStyle = color.labelText;
            b = lang.AUX_SENDS_FOR.format("");
            ctx.fillText(b, c, 24);
            ctx.fillStyle = selectedStrip.color;
            ctx.fillText(selectedStrip.getName(), c + textWidth(b), 24);
          }
          40 < this.maxX && ((ctx.fillStyle = color.labelText), ctx.fillText(">>", this.offsetX + this.w - 40, 24), ctx.fillText("<<", this.offsetX + 30, 24));
          ctx.textAlign = "center";
          ctx.font = "bold 16pt open_sans_condensedbold";
          for (b = 0; b < this.POSTS.length; b++) {
            if (0 == auxStrips[b].getNameValue("stereoIndex")) {
              ctx.fillStyle = color.AUX;
              var c = this.POSTS[b].x - 16,
                d = this.h - 9,
                f = c + 171;
              ctx.fillRect(c, d, 171, 3);
              ctx.fillTriangle2(c, d, c + 16 - 3, d, c, d - 16 + 3);
              ctx.fillTriangle2(f, d, f - 16 + 3, d, f, d - 16 + 3);
              d = 69;
              ctx.fillRect(c, d, 171, 3);
              ctx.fillTriangle2(c, d, c + 16, d, c, d + 16);
              ctx.fillTriangle2(f, d, f - 16, d, f, d + 16);
            }
            ctx.fillStyle = "rgb(183,183,183)";
            hideHPAUX && b >= curSetup.aux - 2 && (ctx.fillStyle = "#555");
            (c = auxStrips[b].getName()) || (c = auxStrips[b].getNameValue("matrix") ? lang.MTX + " " + (b + 1) : lang.AUX + " " + (b + 1));
            8 < c.length && (c = chopLastSpace(c.slice(0, 7)) + "...");
            ctx.drawText(c, this.POSTS[b].x + 26, this.h - 16, { max: 80, shadow: [color.black, 0, 1, 1] });
          }
          ctx.shadowColor = "transparent";
          this.condensed && ((ctx.fillStyle = color.yellow), (a = ((this.w - 20 - 28 - a - 32) / 2) | 0), ctx.fillRect(28, 16, a - 8, 2), ctx.fillRect(this.w - 20, 16, -a, 2));
        },
      }),
      AUX_LED = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "AUX-LED";
          this.bg = res.auxsLED;
          this.w = this.bg.w();
          this.h = this.bg.h();
          this.dsbld = !1;
          this.text = "...";
          this.bgColor = PATTERNED ? color.black : color.eqBg2;
        },
        getState: function () {},
        paint: function () {
          this.getState();
          this.dsbld && (ctx.globalAlpha = 0.4);
          ctx.fillStyle = this.bgColor;
          ctx.fillRect(0, 0, this.w, this.h);
          this.bg && drawImage(this.bg, 0, 0, this.w, this.h);
          null != this.key && (this.text = VtoDB(getValue(this.key)));
          ctx.fillStyle = color.ledText;
          ctx.textAlign = "center";
          ctx.font = "16px umixled";
          ctx.fillText(this.text, (this.w / 2) | 0, 21);
          this.dsbld && (ctx.globalAlpha = 1);
        },
      }),
      MTXMixer = Class.create(Widget, {
        initialize: function ($super, b, c) {
          $super(b);
          this.widgetName = "MTX_MIXER";
          this.y = 40;
          this.needClip = !0;
          this.color = color.MATRIX;
          this.auxID = c;
          this.vis = 0;
          this.strips = [];
          this.createStrips();
        },
        onShow: function () {
          this.maxOffs = this.vis * measures.mixerStripWidth - this.w;
          0 > this.maxOffs && (this.maxOffs = 0);
          this.offsetX > this.maxOffs && this.setOffset(this.offsetX);
        },
        arrangeStrips: function () {
          for (var a = 0, b = (this.vis = 0); b < curSetup.aux; b++) auxStrips[b].getNameValue("matrix") ? (this.strips[b].enabled = !1) : (this.strips[b].enabled = !0);
          for (var c = 0, b = 0; b < mtxSendStrips.length; b++) {
            var d = mtxSendStrips[b];
            d.enabled && (c++, (d.x = a * measures.mixerStripWidth), a++);
          }
          for (var a = -1, f = null, b = 0; b < mtxSendStrips.length; b++)
            (d = mtxSendStrips[b]),
              d.enabled
                ? (a != d.type ? ((d.firstInGroup = !0), (d.lastInGroup = !1), null != f && (f.lastInGroup = !0), (a = d.type)) : ((d.firstInGroup = !1), (d.lastInGroup = !1)), (f = d))
                : ((d.firstInGroup = !1), (d.lastInGroup = !1));
          null != f && (f.lastInGroup = !0);
          this.realWidth = c * measures.mixerStripWidth;
          this.vis = c;
          this.setOffset(this.offsetX);
        },
        createStrips: function () {
          for (var a = curSetup.aux, b = curSetup.sub, c = 0, d = "mtx." + this.auxID + ".", f = 0; f < a; f++) {
            var e = "a." + f + ".",
              g = auxStrips[f],
              e = new MTXStrip(this, c, e, d);
            0 == f && (e.firstInGroup = !0);
            f == a - 1 && (e.lastInGroup = !0);
            e.id = g.id;
            e.type = 0;
            e.color = this.color;
            e.text = g.text;
            e.sl.fader = res.auxFader;
            g.MTX = e;
            this.strips.push(e);
            mtxSendStrips.push(e);
            c++;
          }
          for (f = 0; f < b; f++)
            (e = "s." + f + "."),
              (g = subStrips[f]),
              (e = new MTXStrip(this, c, e, d)),
            0 == f && (e.firstInGroup = !0),
            f == b - 1 && (e.lastInGroup = !0),
              (e.type = 1),
              (e.id = g.id),
              (e.stereo = !0),
              (e.color = this.color),
              (e.sl.fader = res.subFader),
              (e.text = g.text),
              (g.MTX = e),
              this.strips.push(e),
              mtxSendStrips.push(e),
              c++;
          g = masterWidget;
          e = new MTXStrip(this, c, "m.", d);
          e.firstInGroup = !0;
          e.lastInGroup = !0;
          e.type = 2;
          e.id = g.id;
          e.color = this.color;
          e.sl.fader = res.redFader;
          e.text = g.text;
          g.MTX = e;
          this.strips.push(e);
          mtxSendStrips.push(e);
        },
        setOffset: function (a) {
          this.offsetX == a || a > this.maxOffs || ((this.offsetX = a), 0 > this.offsetX && (this.offsetX = 0), this.offsetX > this.maxOffs && (this.offsetX = this.maxOffs), (this.offsetXold = this.offsetX), regUpdate(this));
        },
        calcGeometry: function () {
          this.w = this.parent.w - this.x;
          this.h = this.parent.h - this.y;
          this.maxOffs = this.vis * measures.mixerStripWidth - this.w;
          0 > this.maxOffs && (this.maxOffs = 0);
          this.offsetX > this.maxOffs && this.setOffset(this.offsetX);
        },
        paint: function () {
          ctx.fillStyle = color.bg;
          ctx.fillRect(this.offsetX, 0, this.w, this.h);
          if (this.vis * measures.mixerStripWidth < this.w)
            for (var a = this.vis * measures.mixerStripWidth; a < this.w; a += measures.mixerStripWidth)
              fillVertPattern(res.blStripTile, this.h, a), drawImage(res.blStripBottom, a, this.h - res.blStripBottom.h()), drawImage(res.blStripTop, a, 0);
        },
      }),
      DYNSubPage = Class.create(Widget, {
        initialize: function ($super, b, c) {
          $super(b);
          this.widgetName = "DYN_SUBPAGE";
          this.y = 40;
          this.mode = 0;
          this.master = !1;
          this.condensed = c || !1;
          this.left = !0;
          this.bypass = !1;
          this.keyPrefix = "";
          this.prType = "dynch";
          this.timer = null;
          this.initWidgets();
        },
        setMode: function (a) {
          this.mode = a;
        },
        setLeft: function (a) {
          this.left = a;
          this.dyn.left = a;
          this.syncSliders();
          regUpdate(this);
        },
        setLinked: function (a) {
          if (a)
            for (var b = this.left ? "l" : "r", c = this.left ? "r" : "l", d = "threshold gain outgain ratio softknee attack hold release".split(" "), f = 0; f < d.length; f++)
              setValue("m.dyn." + c + "." + d[f], getValue("m.dyn." + b + "." + d[f]));
          setValue("m.dyn.linked", a ? 1 : 0);
          this.setLeft(!0);
        },
        setVU: function (a, b, c) {
          this.vuIN.setValue(a);
          this.vuOUT.setValue(b);
          this.vuCOMP.setValue(c);
        },
        resetVUs: function () {
          this.vuIN.reset();
          this.vuOUT.reset();
          this.vuCOMP.reset();
        },
        onShow: function () {
          var a = selectedChID,
            b = this;
          switch (selectedStrip.type) {
            case E_STRIP_TYPE.IN:
            case E_STRIP_TYPE.MEDIA:
            case E_STRIP_TYPE.FX:
            case E_STRIP_TYPE.SUB:
              this.prType = "dynch";
              break;
            case E_STRIP_TYPE.AUX:
              this.prType = "dynaux";
              break;
            case E_STRIP_TYPE.MASTER:
              this.prType = "dynm";
          }
          clearInterval(this.timer);
          this.timer = setInterval(function () {
            b.enabled && a == selectedChID && sendMessage("DYN^" + a);
          }, 1e3);
          this.syncSliders();
        },
        onHide: function () {
          clearInterval(this.timer);
        },
        onDown: function (a, b) {
          this.lastPressPoint = this.pressPoint;
          this.pressPoint = [a, b];
        },
        onUp: function (a) {
          var b = Date.now(),
            c = Math.abs(this.lastPressPoint[0] - this.pressPoint[0]),
            d = Math.abs(this.lastPressPoint[1] - this.pressPoint[1]);
          2 < mouseTargets.length ||
          (isDefined(tHash[a]) && 2 < tHash[a].length) ||
          (30 > c && 30 > d && b - this.lastClickTime < DBL_CLK_TIME ? (this.onDouble(), (this.lastClickTime = b - DBL_CLK_TIME)) : (this.lastClickTime = b));
        },
        onDouble: function () {
          setMode(E_MODE.MIX);
        },
        syncSliders: function () {
          if (this.enabled && null != selectedStrip) {
            this.bBYPASS.setKeyPrefix(selectedStrip.name + "dyn.");
            this.keyPrefix = selectedStrip.name + "dyn.";
            selectedStrip.type == E_STRIP_TYPE.MASTER && (this.keyPrefix += this.left ? "l." : "r.");
            this.led_tre.setKeyPrefix(this.keyPrefix);
            this.led_gate.setKey(selectedStrip.name + "gate.thresh");
            this.led_ratio.setKeyPrefix(this.keyPrefix);
            this.led_attack.setKeyPrefix(this.keyPrefix);
            this.led_release.setKeyPrefix(this.keyPrefix);
            this.led_gain.setKeyPrefix(this.keyPrefix);
            this.slTRE.setKeyPrefix(this.keyPrefix);
            this.slGATE.setKey(selectedStrip.name + "gate.thresh");
            this.slRATIO.setKeyPrefix(this.keyPrefix);
            this.slATTACK.setKeyPrefix(this.keyPrefix);
            this.slGAIN.setKeyPrefix(this.keyPrefix);
            this.slRELEASE.setKeyPrefix(this.keyPrefix);
            this.bSOFTKNEE.setKeyPrefix(this.keyPrefix);
            this.mode = getValue(this.keyPrefix + "softknee") | 0;
            this.resetVUs();
            if (IS_UI_24)
              if (selectedStrip.type == E_STRIP_TYPE.SUB && 0 < selectedStrip.subId) {
                this.ducker.show();
                for (var a = [lang.DUCKER + ": " + lang.NONE], b = 0; b < selectedStrip.subId; b++) a.push(lang.DUCKER + ": " + lang.SG + " " + (b + 1));
                this.ducker.setItems(a);
                this.ducker.setKey(selectedStrip.name + "ducker", !0);
              } else this.ducker.hide();
            this.condensed && this.ducker.hide();
          }
        },
        doReset: function () {
          resetDyn(selectedChID, !HAVE_GATE);
          regUpdate(this);
        },
        initWidgets: function () {
          IS_UI_24 && ((this.ducker = new COMBOBOX(this)), this.ducker.setSize(130, 28), this.ducker.setAnchors(null, 10, 195, null), (this.ducker.itemH = 29));
          this.preset = new MENUBUTTON(this);
          this.preset.setSize(130, 29);
          this.preset.setAnchors(null, 10, 10, null);
          this.preset.text = lang.PRESETS;
          this.preset.color = color.green;
          this.preset.onPress = function () {
            c.showPresets();
          };
          this.condensed && this.preset.hide();
          var a = 32,
            b = 30;
          this.condensed && ((a = 12), (b = 10));
          this.dyn = new DYN_GRAPH(this);
          this.dyn.setPos(40, a);
          this.vuIN = new DYNVU(this);
          this.vuIN.setPos(0, b);
          this.vuIN.needGate = !0;
          this.vuOUT = new DYNVU(this);
          this.vuOUT.setPos(0, b);
          this.vuCOMP = new DYNVU(this);
          this.vuCOMP.setPos(0, b);
          this.vuCOMP.invert = !0;
          var c = this,
            d = this.dyn;
          this.slTRE = new EQHSlider2(this);
          this.slTRE.keyPart = "threshold";
          this.slTRE.defaultValue = -1;
          this.slTRE.setPos(16, 600);
          this.slTRE.valueFunc = function (a) {
            selectedStrip.type == E_STRIP_TYPE.MASTER && 1 == getValue("m.dyn.linked") && setValue(this.key.replace(".l.", ".r."), a);
            selectedStrip.setNameValue("dyn.prmod", 1);
            regUpdate(d);
            regUpdate(c.vuIN);
            regUpdate(c.led_tre);
          };
          this.slTRE.onFocus = function () {
            1 != d.idx && (d.idx = 1);
            regUpdate(d);
            regUpdate(c.led);
          };
          this.led_tre = new FXLEDPlain(this);
          this.led_tre.keyPart = "threshold";
          this.led_tre.label = lang.THRESHOLD;
          this.led_tre.sign = "dB";
          this.led_tre.formatValue = function (a) {
            a = VtoTHRESH(a) + "";
            -1 == a.indexOf(".") && (a += ".0");
            return a;
          };
          this.led_gate = new FXLEDPlain(this);
          this.led_gate.w = 60;
          this.led_gate.label = lang.GATE;
          this.led_gate.sign = "dB";
          this.led_gate.formatValue = function (a) {
            a = VtoDYNGATE(a);
            -89 > a && (a = "-inf");
            return a + "";
          };
          this.slGATE = new EQSlider(this);
          this.slGATE.fader = res.eqVFaderGreen;
          this.slGATE.setPos(500, 60);
          this.slGATE.textBot = lang.GATE;
          this.slGATE.mV = [1, 0.7827, 0.5239, 0.2556, 0];
          this.slGATE.valueFunc = function (a) {
            selectedStrip.type == E_STRIP_TYPE.MASTER && 1 == getValue("m.dyn.linked") && setValue(this.key.replace(".l.", ".r."), a);
            c.vuIN.gateValue = a;
            selectedStrip.setNameValue("dyn.prmod", 1);
            regUpdate(c.vuIN);
            regUpdate(c.led_gate);
            regUpdate(c.dyn);
          };
          HAVE_GATE && (this.led_gate.hide(), this.slGATE.hide());
          this.led_ratio = new FXLEDPlain(this);
          this.led_ratio.w = 60;
          this.led_ratio.keyPart = "ratio";
          this.led_ratio.label = lang.RATIO;
          this.led_ratio.sign = "";
          this.led_ratio.formatValue = function (a) {
            a = VtoRATIO(a);
            return (a = 60 < a ? "inf" : 2 > a ? precision(a, 2) + "" : precision(a, 1) + "");
          };
          this.slRATIO = new EQSlider(this);
          this.slRATIO.keyPart = "ratio";
          this.slRATIO.setPos(570, 60);
          this.slRATIO.fader = res.eqVFaderYellow;
          this.slRATIO.mV = [1, 1 / 1.2, 0.625, 0.5, 1 / 3, 0.2, 0.1, 0];
          this.slRATIO.textBot = lang.RATIO;
          this.slRATIO.valueFunc = function (a) {
            selectedStrip.type == E_STRIP_TYPE.MASTER && 1 == getValue("m.dyn.linked") && setValue(this.key.replace(".l.", ".r."), a);
            selectedStrip.setNameValue("dyn.prmod", 1);
            regUpdate(d);
            regUpdate(c.led_ratio);
          };
          this.slRATIO.onFocus = function () {
            2 != d.idx && (d.idx = 2);
            regUpdate(d);
          };
          this.led_attack = new FXLEDPlain(this);
          this.led_attack.w = 60;
          this.led_attack.keyPart = "attack";
          this.led_attack.label = lang.ATTACK;
          this.led_attack.sign = "ms";
          this.led_attack.formatValue = VtoATTACK;
          this.slATTACK = new EQSlider(this);
          this.slATTACK.keyPart = "attack";
          this.slATTACK.setPos(640, 60);
          this.slATTACK.textBot = lang.ATTACK;
          this.slATTACK.mV = [1, findV(VtoATTACK, 300), findV(VtoATTACK, 200), findV(VtoATTACK, 100), findV(VtoATTACK, 20), 0];
          this.slATTACK.valueFunc = function (a) {
            selectedStrip.type == E_STRIP_TYPE.MASTER && 1 == getValue("m.dyn.linked") && setValue(this.key.replace(".l.", ".r."), a);
            regUpdate(c.led_attack);
            selectedStrip.setNameValue("dyn.prmod", 1);
            regUpdate(c.dyn);
          };
          this.led_release = new FXLEDPlain(this);
          this.led_release.w = 60;
          this.led_release.keyPart = "release";
          this.led_release.label = lang.RELEASE;
          this.led_release.sign = "ms";
          this.led_release.formatValue = VtoREL;
          this.slRELEASE = new EQSlider(this);
          this.slRELEASE.keyPart = "release";
          this.slRELEASE.setPos(780, 60);
          this.slRELEASE.textBot = lang.RELEASE;
          this.slRELEASE.mV = [1, 0.7668, 0.6397, 0.4896, 0.25, 0];
          this.slRELEASE.valueFunc = function (a) {
            selectedStrip.type == E_STRIP_TYPE.MASTER && 1 == getValue("m.dyn.linked") && setValue(this.key.replace(".l.", ".r."), a);
            regUpdate(c.led_release);
            selectedStrip.setNameValue("dyn.prmod", 1);
            regUpdate(c.dyn);
          };
          this.led_gain = new FXLEDPlain(this);
          this.led_gain.w = 60;
          this.led_gain.keyPart = "outgain";
          this.led_gain.label = lang.GAIN;
          this.led_gain.sign = "dB";
          this.led_gain.formatValue = function (a) {
            return precision(VtoDYNOUTGAIN(a), 1);
          };
          this.slGAIN = new EQSlider(this);
          this.slGAIN.fader = res.eqVFaderRed;
          this.slGAIN.keyPart = "outgain";
          this.slGAIN.setPos(710, 60);
          this.slGAIN.textBot = lang.GAIN;
          this.slGAIN.setDefaultValue(findV(VtoDYNOUTGAIN, 0));
          this.slGAIN.mV = [1, findV(VtoDYNOUTGAIN, 36), findV(VtoDYNOUTGAIN, 24), findV(VtoDYNOUTGAIN, 12), findV(VtoDYNOUTGAIN, -12), 0];
          this.slGAIN.valueFunc = function (a) {
            selectedStrip.type == E_STRIP_TYPE.MASTER && 1 == getValue("m.dyn.linked") && setValue(this.key.replace(".l.", ".r."), a);
            regUpdate(c.led_gain);
            selectedStrip.setNameValue("dyn.prmod", 1);
            regUpdate(c.dyn);
          };
          this.bBYPASS = new CheckBox(this);
          this.bBYPASS.keyPart = "bypass";
          this.bBYPASS.setPos(40, 350);
          this.bBYPASS.setSize(70, 30);
          this.bBYPASS.setImages(res.bBYPASS_OFF, res.bBYPASS_ON);
          this.bBYPASS.onToggleUp = function () {
            regUpdate(c);
          };
          this.bBYPASS.onToggleDown = function () {
            regUpdate(c);
          };
          this.bRESET = new Button(this);
          this.bRESET.setPos(40, 350);
          this.bRESET.setSize(70, 30);
          this.bRESET.setImages(res.bRESET_OFF, res.bRESET_ON);
          this.bRESET.valueFunc = function () {
            c.doReset();
          };
          this.bSOFTKNEE = new CheckBox(this);
          this.bSOFTKNEE.setPos(40, 350);
          this.bSOFTKNEE.keyPart = "softknee";
          this.bSOFTKNEE.setSize(70, 30);
          this.bSOFTKNEE.setImages(res.bHARDKNEE_OFF, res.bSOFTKNEE_ON);
          this.bSOFTKNEE.valueFunc = function (a) {
            selectedStrip.type == E_STRIP_TYPE.MASTER && 1 == getValue("m.dyn.linked") && setValue(this.key.replace(".l.", ".r."), a);
            selectedStrip.setNameValue("dyn.prmod", 1);
          };
          this.condensed &&
          (this.slGATE.setFader(res.BMSL_GREEN, 18, 0, 6),
            this.slRATIO.setFader(res.BMSL_GOLD, 18, 0, 6),
            this.slATTACK.setFader(res.BMSL_SILVER, 18, 0, 6),
            this.slRELEASE.setFader(res.BMSL_SILVER, 18, 0, 6),
            this.slGAIN.setFader(res.BMSL_RED, 18, 0, 6),
            this.slTRE.setFader(res.BMSL_SILVER_V, 18, 0, 6));
          this.syncSliders();
        },
        calcGeometry2: function () {
          this.w = this.parent.w - this.x;
          this.h = this.parent.h - this.y - 5;
        },
        calcGeometry: function () {
          this.calcGeometry2();
          var a = 90,
            b = 46;
          this.condensed && ((a = 44), (b = 0));
          this.dyn.setSize(this.w - this.dyn.x - 416, this.h - this.dyn.y - 86);
          this.vuCOMP.x = this.w - 356;
          this.vuOUT.x = this.w - 380;
          this.vuIN.x = this.w - 404;
          this.vuIN.h = this.vuOUT.h = this.vuCOMP.h = this.h - this.vuIN.y - 86;
          var c = this.h - 47;
          this.led_tre.setPos(this.w - 406, c - 6);
          this.bSOFTKNEE.setPos(this.w - 316, c);
          this.bRESET.setPos(this.w - 202, c);
          this.bBYPASS.setPos(this.w - 90, c);
          c = HAVE_GATE ? 83 : 66;
          this.led_gate.x = this.w - (68 + 4 * c) - 4;
          this.led_ratio.x = this.w - (68 + 3 * c) - 4;
          this.led_attack.x = this.w - (68 + 2 * c) - 4;
          this.led_release.x = this.w - (68 + 1 * c) - 4;
          this.led_gain.x = this.w - (68 + 0 * c) - 4;
          this.led_gate.y = this.led_ratio.y = this.led_attack.y = this.led_release.y = this.led_gain.y = b;
          this.slGAIN.x = this.w - (68 + 0 * c);
          this.slRELEASE.x = this.w - (68 + 1 * c);
          this.slATTACK.x = this.w - (68 + 2 * c);
          this.slRATIO.x = this.w - (68 + 3 * c);
          this.slGATE.x = this.w - (68 + 4 * c);
          this.slGAIN.y = this.slRELEASE.y = this.slATTACK.y = this.slRATIO.y = this.slGATE.y = a;
          this.slATTACK.h = this.slRELEASE.h = this.slGAIN.h = this.slGATE.h = this.slRATIO.h = this.h - this.slGATE.y - 55 - 32;
          this.slTRE.y = this.h - 55;
          this.slTRE.w = this.w - this.slTRE.x - 416;
        },
        paint: function () {
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, 0, this.w, this.h);
          this.paintMarks();
          this.condensed || drawImage(res.dbx, this.preset.x - 48, 13);
        },
        paintMarks: function () {
          var a = 10;
          this.condensed && (a = 0);
          ctx.fillStyle = "#101115";
          ctx.fillRect(16, a, this.w - 16 - 335, this.h - a - 60);
          ctx.translate(16, a);
          ctx.fillStyle = color.grad1;
          ctx.fillRect(1, 0, this.w - 16 - 335 - 2, 7);
          ctx.translate(-16, -a);
          ctx.textAlign = "center";
          ctx.font = "10px open_sans_condensedbold";
          ctx.fillStyle = "#747577";
          ctx.fillText("IN", this.vuIN.x + 4, this.vuIN.y + this.vuIN.h + 15);
          ctx.fillText("OUT", this.vuOUT.x + 4, this.vuOUT.y + this.vuOUT.h + 15);
          ctx.fillText("COMP", this.vuCOMP.x + 4, this.vuCOMP.y + this.vuCOMP.h + 15);
          ctx.fillStyle = color.tabText;
          ctx.font = font.eqSlText;
          ctx.textAlign = "left";
          var a = this.dyn.h,
            b = this.dyn.w,
            c = b / 96,
            d = a / 96;
          ctx.font = font.eqMarks;
          ctx.fillStyle = color.graphMarks;
          var f = "-90 -80 -70 -60 -50 -40 -30 -20 -10 0 +6".split(" ");
          ctx.save();
          ctx.translate(this.dyn.x, this.dyn.y);
          ctx.fillText("-90", 0, a + 15);
          ctx.fillText("+6", b - 10, a + 15);
          ctx.textAlign = "center";
          for (var b = 1, e = 10; 90 >= e; e += 10) ctx.fillText(f[b++], c * e, a + 15);
          b = 1;
          ctx.textAlign = "right";
          ctx.fillText("-90", -5, a - 2);
          ctx.fillText("+6", -5, this.condensed ? 4 : 9);
          for (e = 10; 90 >= e; e += 10) ctx.fillText(f[b++], -5, a - d * e + 4);
          ctx.restore();
        },
        paintMarks2: function () {
          var a = this.dyn.h,
            b = this.dyn.w,
            c = b / 96;
          ctx.font = font.eqMarks;
          ctx.fillStyle = color.graphMarks;
          getValue(this.keyPrefix + "gain");
          var d = [-90, -80, -70, -60, -50, -40, -30, -20, -10, 0, 6];
          ctx.save();
          ctx.translate(this.dyn.x, this.dyn.y);
          ctx.fillStyle = "#101115";
          ctx.fillRect(-10, a, b + 20, 20);
          ctx.fillStyle = color.graphMarks;
          ctx.textAlign = "center";
          ctx.fillText("6", b, a + 15);
          for (var f = (b = 0); 90 >= f; f += 10) ctx.fillText(d[b++] - 0 + "", c * f, a + 15);
          ctx.restore();
        },
        showPresets: function () {
          this.menu = new PRESET_MENU2(null, this.prType, this, this.parent.color);
          regUpdate(this.menu);
        },
        savePreset: function (a) {
          var b = ".dyn.threshold .dyn.ratio .dyn.softknee .dyn.attack .dyn.outgain .dyn.release".split(" ");
          HAVE_GATE || b.push(".gate.thresh");
          var c = {},
            d;
          "dynm" == this.prType
            ? ((b = ".dyn.linked .dyn.l.threshold .dyn.l.ratio .dyn.l.softknee .dyn.l.attack .dyn.l.release .dyn.l.outgain .dyn.r.threshold .dyn.r.ratio .dyn.r.softknee .dyn.r.attack .dyn.r.release .dyn.r.outgain".split(
              " "
            )),
            HAVE_GATE || b.push(".gate.thresh"),
              (d = "m"))
            : ((d = this.keyPrefix.split(".")), (d = d[0] + "." + d[1]));
          for (var f = 0; f < b.length; f++) {
            var e = getValue(d + b[f]);
            null != e && (c[b[f]] = e);
          }
          selectedStrip.setNameValue("dyn.prmod", 0);
          isDefined(a) && selectedStrip.setNameValue("dyn.prname", a);
          return c;
        },
        loadPreset: function (a, b) {
          var c = selectedStrip.name.slice(0, -1);
          "dynm" == this.prType && (c = "m");
          applyPreset(c, a);
          selectedStrip.setNameValue("dyn.prmod", 0);
          isDefined(b) && selectedStrip.setNameValue("dyn.prname", b);
          regUpdate(this);
          return !0;
        },
      }),
      DYNVU = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "DYNVU";
          this.w = measures.vuWidth - 1;
          this.ignoreEvents = !0;
          this.invert = !1;
          this.fallVelocity = this.curPos = this.valueBg = this.value = 0;
          this.treValue = this.gateValue = -1;
          this.needGate = !1;
          this.timer = null;
          this.isClipping = !1;
          null == vuPattern && (vuPattern = createPattern(res.vuTexture, "repeat-y"));
          this.fillTexture = vuPattern;
          this.isTicking = !1;
          this.vuGrad = null;
          this.vuGradH = -1;
        },
        setValue: function (a) {
          if (this.globalEnabled()) {
            this.valueBg = bound(a, 0, 4);
            var b = !1,
              c = !1;
            this.value < this.valueBg ? ((this.value = this.valueBg), (c = !0)) : ((this.fallVelocity = GLOBAL_VU_FALL_SPEED), (b = !0));
            if (1 <= a && !this.invert) {
              this.isClipping = !0;
              var d = this;
              clearTimeout(this.timer);
              this.timer = setTimeout(function () {
                d.isClipping = !1;
                regUpdate(d);
              }, 1500);
            }
            b && !this.isTicking && ((this.isTicking = !0), regTick(this));
            c && regUpdate(this);
          } else this.value = this.valueBg = bound(a, 0, 4);
        },
        reset: function () {
          this.valueBg = this.value = 0;
          regUpdate(this);
        },
        tick: function () {
          var a = !1,
            b = !1;
          if (this.value <= this.valueBg) this.value = this.valueBg;
          else {
            this.value -= this.fallVelocity;
            this.fallVelocity += GLOBAL_VU_FALL_SPEED / fps;
            this.value < this.valueBg ? (this.value = this.valueBg) : (a = !0);
            var c = (this.h * this.value) | 0;
            c > this.h % 12 && (c = 12 * ((c / 12) | 0) + (this.h % 12));
            this.curPos != c && (b = !0);
          }
          a ? regTick(this) : (this.isTicking = !1);
          b && regUpdate(this);
        },
        calcGeometry: function () {},
        createGradient: function () {
          this.vuGradH == this.h ||
          1 > this.h ||
          ((this.vuGrad = this.invert ? ctx.createLinearGradient(0, 0, 0, this.h) : ctx.createLinearGradient(0, this.h, 0, 0)),
            this.vuGrad.addColorStop(0, "green"),
            this.vuGrad.addColorStop(0.5, "yellow"),
            this.vuGrad.addColorStop(1, "red"),
            (this.vuGradH = this.h));
        },
        paint: function () {
          this.needGate && ((this.gateValue = selectedStrip.getNameValue("gate.thresh")), (this.treValue = getValue(this.parent.keyPrefix + "threshold")));
          this.createGradient();
          ctx.fillStyle = "#101115";
          ctx.fillRect(-6, -4, this.w + 12, this.h + 8);
          ctx.fillStyle = color.vuBg;
          ctx.fillRect(0, 0, this.w, this.h);
          ctx.fillStyle = this.isClipping ? "#E83B45" : this.vuGrad;
          var a = (this.h * this.value) | 0;
          a > this.h % 12 && (a = a - (a % 12) + (this.invert ? 0 : this.h % 12));
          this.curPos = a;
          a > this.h && (a = this.h);
          this.invert ? ctx.fillRect(0, 0, this.w, a) : ctx.fillRect(0, this.h, this.w, -a);
          if (selectedStrip.getNameValue("gate.enabled") && !selectedStrip.getNameValue("gate.bypass") && 0.015 <= this.gateValue) {
            1 < this.gateValue && (this.gateValue = 1);
            ctx.fillStyle = color.green;
            var b = (VtoDYNGATE(this.gateValue) + VU_RANGE) / VU_RANGE,
              a = (this.h * (1 - b)) | 0;
            0 <= b && 1 > b && 1 <= a && a < this.h && (ctx.fillTriangle2(-6, a - 5, -1, a, -6, a + 5), ctx.fillTriangle2(this.w + 6, a - 5, this.w + 1, a, this.w + 6, a + 5));
            a = (this.h * b) | 0;
            a > this.h && (a = this.h);
            0 < a && ((ctx.fillStyle = "rgba(0,0,0,0.6)"), ctx.fillRect(0, this.h, this.w, -a));
          }
          this.needGate &&
          ((ctx.fillStyle = "rgba(150,150,255,0.55)"),
            (b = (VtoTHRESH(this.treValue) + VU_RANGE) / VU_RANGE),
            (a = (this.h * (1 - b)) | 0),
          0 <= b && 1 > b && 1 <= a && a < this.h && (ctx.fillTriangle2(-6, a - 4, -1, a, -6, a + 4), ctx.fillTriangle2(this.w + 6, a - 4, this.w + 1, a, this.w + 6, a + 4)));
          ctx.fillStyle = this.fillTexture;
          ctx.fillRect(0, 0, this.w, this.h);
          ctx.fillStyle = "#090C12";
          ctx.fillRect(0, this.h - 3, this.w, 3);
          ctx.fillRect(0, 0, this.w, 3);
        },
      }),
      DYN_GRAPH = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "DYN_GRAPH";
          this.needMoveEvt = this.needClip = !0;
          this.pressed = this.master = !1;
          this.idx = 1;
          this.touchID = -1;
          this.left = !0;
          this.touchRadius = 32;
          this.grad = null;
          this.gradW = 0;
          this.grad3 = this.grad2 = null;
          this.points = { G: [0, 0], T: [0, 0], R: [0, 0] };
          this.bypass = !1;
          this.colors = ["#b23535", "#c27a2a", "#c7ab35", "#2c8f29"];
          this.cachedBgBypass = this.cachedBg = null;
          this.cachedBgW = this.cachedBgH = 0;
          this.lastP = !1;
          this.delta = [0, 0];
          this.showPreset = !0;
        },
        calcGeometry: function () {
          var a = this.w,
            b = this.h;
          this.grad = ctx.createRadialGradient(a / 2, -10, a / 10, a / 2, -10, a / 2 + 10);
          this.grad.addColorStop(0, "rgba(255,255,255,0.2)");
          this.grad.addColorStop(1, "rgba(255,255,255,0)");
          this.grad2 = ctx.createLinearGradient(0, b, a / 2, 0);
          this.grad2.addColorStop(0, "rgba(0,160,255,0.4)");
          this.grad2.addColorStop(0.5, "rgba(0,160,255,0.33)");
          this.grad2.addColorStop(1, "rgba(0,80,176,0.26)");
          this.grad3 = ctx.createLinearGradient(0, b, a / 2, 0);
          this.grad3.addColorStop(0, "rgba(160,160,160,0.4)");
          this.grad3.addColorStop(0.5, "rgba(160,160,160,0.33)");
          this.grad3.addColorStop(1, "rgba(80,80,80,0.26)");
        },
        onDown: function (a, b, c) {
          this.pressed ||
          ((a -= this.globalX()),
            (b -= this.globalY()),
            (this.idx = 0),
            (this.touchID = c),
            (this.pressed = !0),
            (this.delta = [0, 0]),
            this.calcPoints(),
          isInCircle(this.points.R[0], this.points.R[1], 2 * this.touchRadius, a, b) && ((this.idx = 2), (this.delta = [this.points.R[0] - a, this.points.R[1] - b])),
          isInCircle(this.points.T[0], this.points.T[1], 2 * this.touchRadius, a, b) && ((this.idx = 1), (this.delta = [this.points.T[0] - a, this.points.T[1] - b])),
          0 != this.idx && regUpdate(this));
        },
        onMove: function (a, b, c) {
          if (this.pressed && this.touchID == c && 0 != this.idx) {
            a += this.delta[0];
            b += this.delta[1];
            a = bound(a - this.globalX(), 0, this.w);
            b = bound(b - this.globalY(), 0, this.h);
            switch (this.idx) {
              case 1:
                b = bound(a / this.w, 0, 1);
                this.parent.slTRE ? this.parent.slTRE.innerSet(b) : selectedStrip.setNameValue("dyn.threshold", b);
                regUpdate(this.parent.vuIN);
                regUpdate(this.parent.led_tre);
                selectedStrip.setNameValue("dyn.prmod", 1);
                break;
              case 2:
                if (1 > this.points.T[1]) return;
                b = bound(b, 0, this.points.T[1]);
                b = bound(1 - b / this.points.T[1], 0, 1);
                this.parent.slRATIO ? this.parent.slRATIO.innerSet(b) : selectedStrip.setNameValue("dyn.ratio", b);
                regUpdate(this.parent.led_ratio);
            }
            regUpdate(this);
          }
        },
        onUp: function (a) {
          this.touchID == a &&
          ((this.delta = [0, 0]),
            (a = Date.now()),
          a - this.lastClickTime < DBL_CLK_TIME && this.lastP == this.idx && (0 == this.idx && setMode(E_MODE.MIX), regUpdate(this)),
            (this.lastP = this.idx),
            (this.lastClickTime = a),
            (this.pressed = !1),
            (this.touchID = -1));
        },
        calcPoints: function () {
          var a = this.w,
            b = this.h,
            c = getValue(this.parent.keyPrefix + "threshold"),
            d = getValue(this.parent.keyPrefix + "ratio"),
            f = 0 * b;
          this.points.G[0] = 0;
          this.points.G[1] = bound(b - f, 0, b);
          f = b * (1 - c) - f;
          this.points.T[0] = bound(a * c, 0, a);
          this.points.T[1] = bound(f, 0, b);
          this.points.R[0] = a;
          this.points.R[1] = bound(f - b * (1 - c) * d, 0, b);
        },
        paint: function () {
          ctx.shadowColor = "transparent";
          this.bypass = selectedStrip.type == E_STRIP_TYPE.MASTER ? toBool(getValue("m.dyn.bypass")) : toBool(getValue(this.parent.keyPrefix + "bypass"));
          (this.cachedBgW == this.w && this.cachedBgH == this.h) || this.cachePaint();
          drawImage(this.cachedBg, 0, 0, this.w, this.h);
          var a = this.w,
            b = this.h,
            c = this.h / 96,
            d = getValue(this.parent.keyPrefix + "threshold"),
            f = getValue(this.parent.keyPrefix + "ratio"),
            e = getValue(this.parent.keyPrefix + "softknee"),
            g = a * d;
          1 > g && (g = 1);
          var h = b * (1 - d) - 0;
          h > b - 2 && (h = b - 2);
          var k = b - b * (0 + d + (1 - d) * f);
          k > b - 2 && (k = b - 2);
          ctx.strokeStyle = "rgba(255,255,250,0.15)";
          ctx.lineWidth = 2;
          ctx.beginPath();
          ctx.moveTo(a * d, b);
          ctx.lineTo(a * d, 0);
          ctx.stroke();
          ctx.strokeStyle = "rgba(117,206,210,1.0)";
          this.bypass && (ctx.strokeStyle = "#999");
          ctx.lineWidth = 2;
          if (e) {
            var e = a * d * 1,
              d = b * (1 - 1 * d) - 0,
              m = g + 0.01 * (a - g),
              f = h - (b - h - 0) * f * 0.01;
            ctx.strokeStyle = "rgba(255,255,255,0.3)";
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(0, b);
            ctx.lineTo(g, h);
            ctx.stroke();
            ctx.beginPath();
            ctx.moveTo(g, h);
            ctx.lineTo(a, k);
            ctx.stroke();
            ctx.strokeStyle = "rgba(117,206,210,1.0)";
            ctx.lineWidth = 2;
            this.bypass && (ctx.strokeStyle = "white");
            ctx.beginPath();
            ctx.moveTo(0, b);
            ctx.bezierCurveTo(e, d, m, f, a, k);
          } else ctx.beginPath(), ctx.moveTo(0, b), ctx.lineTo(g, h), ctx.stroke(), ctx.beginPath(), ctx.moveTo(g, h), ctx.lineTo(a, k);
          ctx.stroke();
          ctx.lineTo(a, b);
          ctx.lineTo(0, b);
          ctx.fillStyle = this.bypass ? this.grad3 : this.grad2;
          ctx.fill();
          this.drawCircle(g, bound(h, 0, this.h), 1 == this.idx, 1, !1);
          this.drawCircle(a - 6, bound(k, 0, this.h - 0), 2 == this.idx, 2, !1);
          ctx.textAlign = "center";
          ctx.font = "bold 14px open_sans_condensedbold";
          ctx.fillStyle = "#060606";
          ctx.fillText("T", g + 1, bound(h, 0, this.h) + 5 + 1);
          ctx.fillText("R", a - 8 + 1, bound(k, 0, this.h - 0) + 5 + 1);
          ctx.fillStyle = "#f0f0f0";
          ctx.fillText("T", g, bound(h, 0, this.h) + 5);
          ctx.fillText("R", a - 8, bound(k, 0, this.h - 0) + 5);
          selectedStrip.getNameValue("gate.enabled") &&
          !selectedStrip.getNameValue("gate.bypass") &&
          ((a = selectedStrip.getNameValue("gate.thresh")),
            (b = selectedStrip.getNameValue("gate.depth")),
            (a = VtoGATE_THRESH(a)),
            (b = VtoGATE_DEPTH(b)),
            (g = c * (90 + a)),
            (ctx.fillStyle = "rgba(10,58,36,0.3)"),
            ctx.fillRect(0, this.h, this.w, -g),
            (h = bound(c * -b, 0, g)),
          -59.9999 >= b && (h = g),
            (ctx.fillStyle = "rgba(10,58,36,0.5)"),
            ctx.fillRect(0, this.h, this.w, -h),
            (ctx.fillStyle = "rgba(90,218,114,0.4)"),
            ctx.fillRect(0, this.h - c * (90 + a), this.w, 2));
          ctx.lineWidth = 1;
          ctx.strokeStyle = "#222";
          ctx.strokeRect(0.5, 0.5, this.w - 1, this.h - 1);
          this.showPreset &&
          ((ctx.textAlign = "left"),
            (ctx.fillStyle = 1 == selectedStrip.getNameValue("dyn.prmod") ? "#444" : color.green),
            (ctx.font = "18px open_sans_condensedbold"),
            ctx.fillText(selectedStrip.getNameValue("dyn.prname"), 4, 18, this.w - 10));
        },
        drawCircle: function (a, b, c, d, f) {
          c
            ? ((ctx.fillStyle = "rgba(255,80,80,0.95)"), (ctx.strokeStyle = "rgba(200,0,0,0.6)"), (ctx.lineWidth = 3))
            : ((ctx.fillStyle = "rgba(80,255,80,0.95)"), (ctx.strokeStyle = "rgba(255,255,255,0.5)"), (ctx.lineWidth = 2));
          ctx.fillStyle = this.colors[d];
          ctx.strokeStyle = this.colors[d];
          this.bypass && ((ctx.fillStyle = "rgba(255,255,255,0.4)"), (ctx.strokeStyle = "rgba(255,255,255,0.3)"));
          ctx.beginPath();
          ctx.arc(a, b, 13 + (f ? 10 : 0), 0, 2 * Math.PI);
          ctx.fill();
          ctx.beginPath();
          ctx.arc(a, b, this.touchRadius + (f ? 12 : 0), 0, 2 * Math.PI);
          ctx.globalAlpha = 0.38;
          ctx.fill();
          ctx.globalAlpha = 1;
          c && ctx.stroke();
        },
        cachePaint: function () {
          null != this.cachedBg && delete this.cachedBg;
          this.cachedBg = document.createElement("canvas");
          var a = this.cachedBg.getContext("2d");
          isRetina ? ((this.cachedBg.width = 2 * this.w), (this.cachedBg.height = 2 * this.h), a.scale(2, 2)) : ((this.cachedBg.width = this.w), (this.cachedBg.height = this.h));
          var b = this.w,
            c = this.h,
            d = this.w / 96,
            f = this.h / 96;
          a.fillStyle = "#0A0B0C";
          a.fillRect(0, 0, b, c);
          isSmall || ((a.fillStyle = this.grad), a.fillRect(0, 0, b, c));
          a.strokeStyle = "rgba(255,255,255,0.04)";
          a.lineWidth = 1;
          a.beginPath();
          for (var e = 0; 90 >= e; e += 10) a.moveTo(((d * e) | 0) + 0.5, 0), a.lineTo(((d * e) | 0) + 0.5, c), a.moveTo(0, ((c - f * e) | 0) + 0.5), a.lineTo(b, ((c - f * e) | 0) + 0.5);
          a.stroke();
          this.cachedBgW = this.w;
          this.cachedBgH = this.h;
        },
      });
    percentFormula = function (a) {
      return (100 * a) | 0;
    };
    percent2Formula = function (a) {
      return (200 * a) | 0;
    };
    maxxRangeFormula = function (a) {
      return (60 * a + 20) | 0;
    };
    hertzFormula = function (a) {
      return formatFreq(20 * Math.pow(1102.5, a));
    };
    hertzFormula320 = function (a) {
      return formatFreq(20 * Math.pow(16, a));
    };
    hpfFormula = function (a) {
      return formatFreq(20 * Math.pow(250, a));
    };
    lpfFormula = function (a) {
      return formatFreq(400 * Math.pow(55.125, a));
    };
    lenFormula = function (a) {
      return (300 * Math.pow(8 / 0.3, a)) | 0;
    };
    lenFormulaRoom = function (a) {
      return (100 * Math.pow(10, a)) | 0;
    };
    function VtoDETUNE(a) {
      return (-100 + 200 * a) | 0;
    }
    function strDelayRatio(a) {
      if (0.01 > Math.abs(a - 1)) return "1/1";
      if (0.01 > Math.abs(a - 2)) return "2/1";
      if (0.01 > Math.abs(a - 0.333)) return "1/3";
      if (0.01 > Math.abs(a - 0.666)) return "2/3";
      if (0.01 > Math.abs(a - 1.333)) return "4/3";
      for (var b = [1, 2, 3, 4, 6, 8, 12, 16, 18, 32, 0], c = 1; 3 >= c; c++)
        for (var d = 0; 0 != b[d]; d++) {
          var f = b[d];
          if (0.005 > Math.abs(a - c / f)) return c + "/" + f;
        }
      a = "" + ((1e3 * a) | 0) / 10;
      -1 == a.indexOf(".") && (a += ".0");
      return a + "%";
    }
    var FX_SENDS_EDIT_PAGE = Class.create(Widget, {
        initialize: function ($super, b, c) {
          $super(b);
          this.widgetName = "FX_SENDS_EDIT_PAGE";
          this.y = 40;
          this.color = color.blue;
          this.mode = 0;
          this.condensed = c || !1;
          this.SLIDERS = [];
          this.LEDS = [];
          this.BUTTONS = [];
          this.MUTES = [];
          this.POSTS = [];
          this.VUS = [];
          this.VUS2 = [];
          this.CLIPS = [];
          this.CLIPS2 = [];
          this.initWidgets();
          this.setMode(0);
        },
        calcGeometry2: function () {
          this.w = this.parent.w;
          this.h = this.parent.h - this.y - 5;
        },
        calcGeometry: function () {
          this.calcGeometry2();
          for (var a = selectedStrip.type == E_STRIP_TYPE.MASTER, b = 0; b < this.SLIDERS.length; b++) {
            var c = 30 + 90 * b;
            this.SLIDERS[b].x = c + (a ? 13 : 0);
            this.SLIDERS[b].h = this.h - this.SLIDERS[b].y - 66;
            this.BUTTONS[b].y = this.h - 50;
            this.VUS[b].setPos(c - 14 + (a ? 13 : 0), this.SLIDERS[b].y + 18);
            this.VUS[b].setSize(11, this.SLIDERS[b].h - 20);
            this.VUS2[b].setPos(c - 27 + (a ? 13 : 0), this.SLIDERS[b].y + 18);
            this.VUS2[b].setSize(11, this.SLIDERS[b].h - 20);
            this.CLIPS[b].setPos(c - 19 + (a ? 13 : 0), this.SLIDERS[b].y - 4);
            this.CLIPS2[b].setPos(c - 33 + (a ? 13 : 0), this.SLIDERS[b].y - 4);
          }
        },
        setMode: function (a) {
          this.mode = a;
          fxoutWidget.setFx(a);
          fxSendsWidget.setMode(a, !0);
          this.fx.setMode(a);
          regUpdate(this);
        },
        onShow: function () {
          this.syncSliders();
          this.fx.onShow();
        },
        onHide: function () {
          this.fx.onHide();
        },
        onDown: function (a, b) {
          this.lastPressPoint = this.pressPoint;
          this.pressPoint = [a, b];
        },
        onUp: function (a) {
          var b = Date.now(),
            c = Math.abs(this.lastPressPoint[0] - this.pressPoint[0]),
            d = Math.abs(this.lastPressPoint[1] - this.pressPoint[1]);
          2 < mouseTargets.length ||
          (isDefined(tHash[a]) && 2 < tHash[a].length) ||
          (30 > c && 30 > d && b - this.lastClickTime < DBL_CLK_TIME ? (this.onDouble(), (this.lastClickTime = b - DBL_CLK_TIME)) : (this.lastClickTime = b));
        },
        onDouble: function () {
          setMode(E_MODE.MIX);
        },
        syncSliders: function () {
          if (selectedStrip) {
            this.setMode(this.mode);
            for (var a = 0; a < this.SLIDERS.length; a++) (this.VUS[a].enabled = !1), (this.VUS2[a].enabled = !1), (this.CLIPS[a].enabled = !1), (this.CLIPS2[a].enabled = !1);
            switch (selectedStrip.type) {
              case E_STRIP_TYPE.IN:
              case E_STRIP_TYPE.SUB:
              case E_STRIP_TYPE.MEDIA:
              case E_STRIP_TYPE.LINEIN:
                for (a = 0; a < this.SLIDERS.length; a++) this.SLIDERS[a].enabled = this.LEDS[a].enabled = this.MUTES[a].enabled = this.BUTTONS[a].enabled = !0;
                this.keyPrefix = selectedStrip.name + "fx.";
                for (a = 0; a < this.SLIDERS.length; a++)
                  this.SLIDERS[a].setKey(this.keyPrefix + a + ".value"),
                    this.LEDS[a].setKey(this.keyPrefix + a + ".value"),
                    this.MUTES[a].setKey(this.keyPrefix + a + ".mute"),
                    (this.MUTES[a].img0 = res.bMuteOff),
                    (this.MUTES[a].kkk = this.keyPrefix + a),
                    (this.SLIDERS[a].fader = this.SLIDERS[a].defaultFader),
                    (this.VUS[a].enabled = !1),
                    (this.VUS2[a].enabled = !1),
                    (this.CLIPS[a].enabled = !1),
                    (this.CLIPS2[a].enabled = !1),
                  this.POSTS.length &&
                  ((this.MUTES[a].getState = function () {
                    this.state = this.getVal();
                    this.disabled = !1;
                    getValue(this.kkk + ".post") && selectedStrip.getMuteState() && ((this.state = 1), (this.disabled = !0));
                  }),
                    this.POSTS[a].show(),
                    this.POSTS[a].setKey(this.keyPrefix + a + ".post"));
                break;
              case E_STRIP_TYPE.FX:
                for (a = 0; a < this.SLIDERS.length; a++) this.SLIDERS[a].enabled = this.LEDS[a].enabled = this.MUTES[a].enabled = this.BUTTONS[a].enabled = !1;
                for (a = 0; a < this.POSTS.length; a++) this.POSTS[a].hide();
                isDefined(this.BUTTONS[selectedStrip.subId]) && (this.BUTTONS[selectedStrip.subId].enabled = !0);
                var b = bound(selectedStrip.id - fxStrips[0].id, 0, curSetup.fx - 1);
                this.setMode(b);
                break;
              case E_STRIP_TYPE.AUX:
                for (a = 0; a < this.SLIDERS.length; a++) this.SLIDERS[a].enabled = this.LEDS[a].enabled = this.MUTES[a].enabled = this.BUTTONS[a].enabled = !0;
                b = bound(selectedStrip.id - auxStrips[0].id, 0, curSetup.aux - 1);
                for (a = 0; a < this.SLIDERS.length; a++)
                  (this.keyPrefix = "f." + a + ".aux." + b),
                    this.SLIDERS[a].setKey(this.keyPrefix + ".value"),
                    this.LEDS[a].setKey(this.keyPrefix + ".value"),
                    this.MUTES[a].setKey(this.keyPrefix + ".mute"),
                    (this.MUTES[a].img0 = res.bMuteOff),
                    (this.MUTES[a].getState = function () {
                      this.disabled = 1 == selectedStrip.getNameValue("matrix");
                    }),
                    (this.SLIDERS[a].fader = this.SLIDERS[a].defaultFader),
                  this.POSTS.length && this.POSTS[a].hide();
                break;
              case E_STRIP_TYPE.MASTER:
                for (a = 0; a < this.SLIDERS.length; a++) this.SLIDERS[a].enabled = this.LEDS[a].enabled = this.MUTES[a].enabled = this.BUTTONS[a].enabled = !0;
                for (a = 0; a < this.SLIDERS.length; a++)
                  (this.keyPrefix = "f." + a),
                    this.SLIDERS[a].setKey(this.keyPrefix + ".mix"),
                    this.LEDS[a].setKey(this.keyPrefix + ".mix"),
                    this.MUTES[a].setKey(this.keyPrefix + ".mute"),
                    (this.MUTES[a].kkk = this.keyPrefix),
                    (this.MUTES[a].getState = function () {
                      this.disabled = 1 == selectedStrip.getNameValue("matrix");
                      if (selectedStrip.type == E_STRIP_TYPE.MASTER) {
                        var a = getValue("mgmask"),
                          b = getValue(this.kkk + ".mgmask"),
                          f = checkBit(a, MUTEFX_BIT_IDX),
                          e = checkBit(a, MUTEALL_BIT_IDX);
                        if (a & b || e || f) this.state = 1;
                        1 == getValue(this.kkk + ".forceunmute") ? ((this.state = 0), (this.img0 = res.bMuteOff_F)) : (this.img0 = res.bMuteOff);
                      }
                    }),
                    (this.MUTES[a].onToggleUp = function () {
                      if (selectedStrip.type == E_STRIP_TYPE.MASTER) {
                        var a = getValue("mgmask"),
                          b = getValue(this.kkk + ".mgmask"),
                          b = a & b,
                          f = checkBit(a, MUTEALL_BIT_IDX),
                          a = checkBit(a, MUTEFX_BIT_IDX);
                        b || f || a || setValue(this.kkk + ".mute", 1);
                        setValue(this.kkk + ".forceunmute", 0);
                      }
                    }),
                    (this.MUTES[a].onToggleDown = function () {
                      if (selectedStrip.type == E_STRIP_TYPE.MASTER) {
                        var a = getValue("mgmask"),
                          b = getValue(this.kkk + ".mgmask"),
                          b = a & b,
                          f = checkBit(a, MUTEALL_BIT_IDX),
                          a = checkBit(a, MUTEFX_BIT_IDX);
                        b || f || a ? setValue(this.kkk + ".forceunmute", 1) : setValue(this.kkk + ".mute", 0);
                      }
                    }),
                    (this.MUTES[a].onToggle = function () {
                      selectedStrip.type == E_STRIP_TYPE.MASTER && checkMutes();
                    }),
                    (this.SLIDERS[a].fader = this.condensed ? res.BMSL_BLUE : res.blueFader),
                    (this.VUS[a].enabled = !0),
                    (this.VUS2[a].enabled = !0),
                    (this.CLIPS[a].enabled = !0),
                    (this.CLIPS2[a].enabled = !0),
                  this.POSTS.length && this.POSTS[a].hide();
            }
            this.calcGeometry();
          }
        },
        initWidgets: function () {
          var a = this;
          this.fx = new FX_SETUP(this, this.condensed);
          for (var b = 0; b < fxStrips.length; b++) {
            var c = new AUX_LED(this);
            c.setPos(20 + 90 * b - 5, 38);
            this.LEDS.push(c);
            c = new CheckBox(this);
            c.setPos(90 * b + 30, 76);
            c.setImages(res.bMuteOff, res.bMuteOn);
            c.getState = function () {
              this.disabled = 1 == selectedStrip.getNameValue("matrix");
            };
            this.MUTES.push(c);
            IS_UI_24 && ((c = new CheckBox(this)), c.setPos(90 * b + 30, 116), c.setImages(res.bPre, res.bPost), this.POSTS.push(c));
            c = new VUMeter(this);
            c.setPos(30 + 90 * b, 118);
            c.calcGeometry = function () {};
            this.VUS.push(c);
            c = new VUMeter(this);
            c.calcGeometry = function () {};
            this.VUS2.push(c);
            c = new ClipBulb(this);
            this.CLIPS.push(c);
            c = new ClipBulb(this);
            this.CLIPS2.push(c);
            c = new EQSlider(this);
            this.condensed && c.setFader(res.BMSL_SILVER, 18, 0, 6);
            switch (b) {
              case 0:
                c.fader = this.condensed ? res.BMSL_BLUE : res.eqVFaderBlue;
                break;
              case 1:
                c.fader = this.condensed ? res.BMSL_GOLD : res.eqVFaderOrange;
                break;
              case 2:
                c.fader = this.condensed ? res.BMSL_PURPLE : res.eqVFaderPurple;
                break;
              case 3:
                c.fader = this.condensed ? res.BMSL_GREEN : res.eqVFaderGreen;
            }
            c.defaultFader = c.fader;
            c.dbMarks = !0;
            c.setPos(30 + 90 * b, 118 + (this.POSTS.length ? 40 : 0));
            c.mode = b;
            c.onFocus = function () {
              a.setMode(this.mode);
            };
            c.onValueChange = function () {
              regUpdate(a.LEDS[this.mode]);
            };
            HAVE_MATRIX &&
            (c.getState = function () {
              this.disabled = 1 == selectedStrip.getNameValue("matrix");
            });
            this.SLIDERS.push(c);
            c = new EQButton(this);
            c.mode = b;
            c.setPos(20 + 90 * b, 89);
            c.getState = function () {
              if ("undefined" != typeof this.parent.mode) {
                this.state = this.parent.mode == this.mode;
                switch (this.mode) {
                  case 0:
                    this.setImages(res.FX_BTN_OFF, res.FX_BTN_BLU);
                    break;
                  case 1:
                    this.setImages(res.FX_BTN_OFF, res.FX_BTN_OR);
                    break;
                  case 2:
                    this.setImages(res.FX_BTN_OFF, res.FX_BTN_PUR);
                    break;
                  case 3:
                    this.setImages(res.FX_BTN_OFF, res.FX_BTN_GR);
                }
                switch (fxStrips[this.mode].getNameValue("fxtype")) {
                  case E_FX.REVERB:
                    this.text = lang.REVERB;
                    break;
                  case E_FX.DELAY:
                    this.text = lang.DELAY;
                    break;
                  case E_FX.CHORUS:
                    this.text = lang.CHORUS;
                    break;
                  case E_FX.ROOM:
                    this.text = lang.ROOM;
                }
              }
            };
            c.setSize(70, 30);
            var d = [[E_FX.REVERB], [E_FX.DELAY], [E_FX.CHORUS], [E_FX.ROOM, E_FX.DELAY]];
            IS_UI_24 && (d = [[E_FX.REVERB], [E_FX.REVERB, E_FX.DELAY], [E_FX.DELAY, E_FX.CHORUS], [E_FX.ROOM, E_FX.DELAY]]);
            var f = [lang.REVERB, lang.DELAY, lang.CHORUS, lang.ROOM],
              d = d[b];
            1 < d.length &&
            ((c.longClickMark = !0),
              (c.fxs = d),
              (c.onHold = function () {
                for (var b = [], c = 0; c < this.fxs.length; c++) b.push(f[this.fxs[c]]);
                c = new CONTEXT_MENU(null);
                c.fxs = this.fxs;
                c.setItems(b);
                c.setPos(this.globalX(), this.globalY() - c.h);
                c.valueFunc = function (b) {
                  var c = fxStrips[a.mode].name;
                  b = this.fxs[b];
                  setValue(c + "bypass", 1);
                  setValue(c + "fxtype", b);
                  resetFX(c.slice(0, -1));
                  setValue(c + "bypass", 0);
                  regUpdate(a);
                  a.onShow();
                };
                regUpdate(c);
              }));
            this.BUTTONS.push(c);
          }
        },
        paint: function () {
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, 0, this.w, this.h);
          var a = (this.w / 2) | 0;
          if (!this.condensed) {
            var b = ctx.createLinearGradient(0, 0, this.w, 0);
            b.addColorStop(0, color.blue);
            b.addColorStop(0.4, "transparent");
            b.addColorStop(0.6, "transparent");
            b.addColorStop(1, color.blue);
            ctx.fillStyle = b;
            selectedStrip.type == E_STRIP_TYPE.MASTER && ctx.fillRect(0, 0, a, 32);
          }
          ctx.fillStyle = color.labelText;
          ctx.font = "bold 16pt open_sans_condensedbold";
          ctx.textAlign = "start";
          var b = 15,
            c = selectedStrip.getName(),
            a = 0;
          switch (selectedStrip.type) {
            case E_STRIP_TYPE.IN:
            case E_STRIP_TYPE.MEDIA:
            case E_STRIP_TYPE.SUB:
            case E_STRIP_TYPE.LINEIN:
              var d = lang.FX_SENDS + ": " + selectedStrip.getName(),
                a = textWidth(d);
              this.condensed && (b = this.offsetX + Math.floor((386 - a) / 2));
              ctx.fillStyle = color.labelText;
              d = lang.FX_SENDS + ": ";
              ctx.fillText(d, b, 24);
              ctx.fillStyle = selectedStrip.color;
              ctx.fillText(c, b + textWidth(d), 24, 260);
              break;
            case E_STRIP_TYPE.AUX:
              d = lang.FX_RETURNS_TO_AUX.format(selectedStrip.getName());
              a = textWidth(d);
              this.condensed && (b = this.offsetX + Math.floor((386 - a) / 2));
              ctx.fillStyle = color.labelText;
              d = lang.FX_RETURNS_TO_AUX.format("");
              ctx.fillText(d, b, 24);
              ctx.fillStyle = color.AUX;
              ctx.fillText(c, b + textWidth(d), 24, 220);
              break;
            case E_STRIP_TYPE.MASTER:
              (d = lang.MASTER + " " + lang.FX_RETURNS),
                (a = textWidth(d)),
              this.condensed && (b = this.offsetX + Math.floor((386 - a) / 2)),
                (d = lang.MASTER),
                (ctx.fillStyle = color.black),
                ctx.fillText(d, b + 1, 25),
                (ctx.fillStyle = "#D07979"),
                ctx.fillText(d, b, 24),
                (b = b + textWidth(d) + 6),
                (ctx.fillStyle = color.black),
                ctx.fillText(lang.FX_RETURNS, b + 1, 25),
                (ctx.fillStyle = color.labelText),
                ctx.fillText(lang.FX_RETURNS, b, 24);
          }
          this.condensed &&
          ((ctx.fillStyle = color.blue),
            (a = ((361 - a - 32) / 2) | 0),
            ctx.fillRect(16, 16, a, 2),
            ctx.fillRect(370, 16, -a, 2),
            (ctx.lineWidth = 2),
            (ctx.lineCap = "butt"),
            (ctx.strokeStyle = "#444"),
            ctx.drawLine(5, 9, 5, this.h - 8 + 1),
            (ctx.strokeStyle = "#090909"),
            ctx.drawLine(4, 8, 4, this.h - 8));
        },
      }),
      FX_SETUP = Class.create(Widget, {
        initialize: function ($super, b, c) {
          $super(b);
          this.widgetName = "FX_SETUP";
          this.w = 400;
          this.bgColor2 = "#25262A";
          this.condensed = c || !1;
          this.st = null;
          this.type = this.mode = 0;
          this.setAnchors(null, 0, 0, 0);
          this.initWidgets();
        },
        setMode: function (a) {
          this.mode = a;
          var b = res.eqVFaderBlue;
          switch (a) {
            case 0:
              b = res.fxFader_b;
              this.color = color.blue;
              break;
            case 1:
              b = res.fxFader_o;
              this.color = color.orange;
              break;
            case 2:
              b = res.fxFader_p;
              this.color = color.purple;
              break;
            case 3:
              (b = res.fxFader_g), (this.color = color.green);
          }
          this.condensed && (b = res.BMSL_LEX);
          for (var c = 0; c < this.PARAM_SLIDERS.length; c++) this.PARAM_SLIDERS[c].fader = b;
          this.GLOBAL_BPM.color = this.color;
          this.rack.setMode(a);
          this.st = fxStrips[a];
          a = this.st.getNameValue("fxtype");
          this.viewParams(a);
          regUpdate(this);
        },
        viewParams: function (a) {
          var b = this;
          this.type = a;
          var c = [lang.REVERB_TIME, lang.HF_DAMPING, lang.BASS_GAIN, lang.LOWPASS_FILTER, lang.HIGHPASS_FILTER],
            d = ["ms", "%", "%", "HZ", "HZ"],
            f = ["TIME", "HF", "BASS", "LPF", "HPF"],
            e = [lang.DELAY_LENGTH, lang.LENGTH_SUBDIVISION, lang.FEEDBACK_AMOUNT, lang.LOWPASS_FILTER],
            g = ["", "", "%", "HZ"],
            h = ["TIME", "DIV", "FBACK", "LPF"],
            k = [lang.DETUNE, lang.DENSITY, lang.LOWPASS_FILTER],
            m = ["c", "%", "HZ"],
            p = ["DETUNE", "DENSITY", "LPF"];
          this.bTAP.hide();
          this.TAP_LED.hide();
          this.MS_LED.hide();
          this.GLOBAL_BPM.hide();
          this.PARAM_LEDS[1].clickMark = !1;
          this.PARAM_LEDS[1].onDown = function () {};
          for (var q = 0; q < this.PARAM_SLIDERS.length; q++) this.PARAM_SLIDERS[q].hide(), this.PARAM_LEDS[q].hide();
          switch (a) {
            case E_FX.REVERB:
            case E_FX.ROOM:
              for (q = 0; q < c.length; q++) (this.PARAM_SLIDERS[q].textBot = c[q]), this.PARAM_SLIDERS[q].show(), (this.PARAM_LEDS[q].label = f[q]), (this.PARAM_LEDS[q].sign = d[q]), this.PARAM_LEDS[q].show();
              this.PARAM_LEDS[0].formatValue = a == E_FX.ROOM ? lenFormulaRoom : lenFormula;
              this.PARAM_LEDS[1].formatValue = percentFormula;
              this.PARAM_LEDS[2].formatValue = percentFormula;
              this.PARAM_LEDS[3].formatValue = lpfFormula;
              this.PARAM_LEDS[4].formatValue = hpfFormula;
              break;
            case E_FX.DELAY:
              for (q = 0; q < e.length; q++) (this.PARAM_SLIDERS[q].textBot = e[q]), this.PARAM_SLIDERS[q].show(), (this.PARAM_LEDS[q].label = h[q]), (this.PARAM_LEDS[q].sign = g[q]), this.PARAM_LEDS[q].show();
              this.TAP_LED.show();
              this.MS_LED.show();
              this.GLOBAL_BPM.show();
              this.PARAM_LEDS[0].formatValue = function (a) {
                regUpdate(b.PARAM_LEDS[1]);
                return 0 === a ? "*DIV*" : ((100 * Math.pow(10, desqr(a))) | 0) + "MS";
              };
              this.PARAM_LEDS[1].formatValue = function (a) {
                return 0 == getValue(b.st.name + "par1") ? strDelayRatio(2 * a) : "---";
              };
              this.PARAM_LEDS[1].clickMark = !0;
              this.PARAM_LEDS[1].onDown = function () {
                var a = new CONTEXT_MENU(null);
                a.setItems("2/1 1/1 3/4 2/3 1/2 1/3 1/4 1/6 1/8 1/16 1/32".split(" "));
                a.w = 47;
                a.setPos(this.globalX() + 13, this.globalY() + this.h + 1);
                a.doFunc = function (a) {
                  a = eval(a);
                  a = bound(a / 2, 0, 1);
                  setValue(b.st.name + "par2", a);
                  setValue(b.st.name + "par1", 0);
                  regUpdate(b);
                };
                regUpdate(a);
              };
              this.PARAM_LEDS[2].formatValue = percentFormula;
              this.PARAM_LEDS[3].formatValue = hertzFormula;
              this.TAP_LED.setKey("f." + this.mode + ".bpm");
              this.MS_LED.key2 = "f." + this.mode + ".";
              this.MS_LED.unRegAllKeys();
              this.MS_LED.regKey("f." + this.mode + ".bpm");
              break;
            case E_FX.CHORUS:
              for (q = 0; q < k.length; q++) (this.PARAM_SLIDERS[q].textBot = k[q]), this.PARAM_SLIDERS[q].show(), (this.PARAM_LEDS[q].label = p[q]), (this.PARAM_LEDS[q].sign = m[q]), this.PARAM_LEDS[q].show();
              this.PARAM_LEDS[0].formatValue = VtoDETUNE;
              this.PARAM_LEDS[1].formatValue = percentFormula;
              this.PARAM_LEDS[2].formatValue = lpfFormula;
              break;
            default:
              regUpdate(this);
              return;
          }
          a = fxStrips[this.mode].name;
          for (q = 0; q < this.PARAM_SLIDERS.length; q++) this.PARAM_SLIDERS[q].setKeyPrefix(a), this.PARAM_LEDS[q].setKeyPrefix(a);
          regUpdate(this);
        },
        onShow: function () {
          this.TAP_LED.startBPM();
        },
        onHide: function () {
          this.TAP_LED.stopBPM();
        },
        initWidgets: function () {
          var a = this;
          this.rack = new FXRACK(this);
          this.rack.y = 34;
          this.bTAP = new Button(this);
          this.bTAP.setImages(res.bTAPT_OFF, res.bTAPT_ON);
          this.bTAP.setPos(400, 7);
          this.bTAP.hide();
          this.bTAP.idx = 1;
          this.bTAP.valueFunc = function () {
            bpmTapHandler(a.mode);
          };
          this.bTAP.longClickMark = !0;
          this.bTAP.onHold = function () {
            askBpm(a.mode);
          };
          this.TAP_LED = new FXLED2(this);
          this.TAP_LED.formatValue = function (a) {
            return a | 0;
          };
          this.TAP_LED.label = "BPM";
          this.TAP_LED.sign = "";
          this.TAP_LED.hide();
          this.MS_LED = new FXLED2(this);
          this.MS_LED.formatValue = function (a) {
            return precision(a, 1);
          };
          this.MS_LED.label = "MS";
          this.MS_LED.sign = "";
          this.MS_LED.key2 = "";
          this.MS_LED.getState = function () {
            this.value = 6e4 / getValue(this.key2 + "bpm");
          };
          this.MS_LED.hide();
          this.GLOBAL_BPM = new CHECKBUTTON(this);
          this.GLOBAL_BPM.text = lang.GLOBAL_TAP.replace(" ", "\n");
          this.GLOBAL_BPM.dy = 15;
          this.GLOBAL_BPM.font = "12pt open_sans_condensedbold";
          this.GLOBAL_BPM.bgColor = "#25262A";
          this.GLOBAL_BPM.setSize(68, 36);
          this.GLOBAL_BPM.getState = function () {
            this.state = settings["tapbpmfx" + (a.mode + 1)] ? 1 : 0;
          };
          this.GLOBAL_BPM.onToggleDown = function () {
            settingsStorage.set("tapbpmfx" + (a.mode + 1), !1);
          };
          this.GLOBAL_BPM.onToggleUp = function () {
            settingsStorage.set("tapbpmfx" + (a.mode + 1), !0);
          };
          this.PARAM_LEDS = [];
          this.PARAM_SLIDERS = [];
          for (var b = 0; 5 > b; b++) {
            var c = new EQSlider(this);
            c.keyPart = "par" + (b + 1);
            c.w += 2;
            c.faderX = 0;
            c.fadd = 0;
            PATTERNED || (c.background = this.bgColor2);
            c.setFader(res.fxFader, 11);
            this.condensed && (c.setFader(res.BMSL_LEX, 10, 0, 6), (c.faderX = 6));
            c.setPos(0, 100);
            c.idx = b;
            c.valueFunc = function () {
              regUpdate(a.PARAM_LEDS[this.idx]);
              switch (a.type) {
                case E_FX.DELAY:
                  0 === this.idx && regUpdate(a.PARAM_LEDS[1]);
              }
            };
            this.PARAM_SLIDERS.push(c);
            c = new FXLED2(this);
            c.keyPart = "par" + (b + 1);
            this.PARAM_LEDS.push(c);
          }
        },
        calcGeometry: function () {
          this.rack.setPos(this.w - this.rack.w, 34);
          for (var a = 0; a < this.PARAM_LEDS.length; a++)
            this.PARAM_LEDS[a].setPos(this.w - 80 * (this.PARAM_LEDS.length - a) - 11 + 15, 127),
              this.PARAM_SLIDERS[a].setPos(this.w - 80 * (this.PARAM_SLIDERS.length - a) + 15, 172),
              (this.PARAM_SLIDERS[a].h = this.h - this.PARAM_SLIDERS[a].y - 60);
          this.TAP_LED.setPos(this.w - 80 - 1 + 5, 127);
          this.MS_LED.setPos(this.w - 80 - 1 + 5, 177);
          this.GLOBAL_BPM.setPos(this.w - 80 - 1 + 5, 227);
          this.bTAP.setPos(this.w - 80 - 13, 172);
        },
        showPresets: function () {
          var a = "fxrev";
          switch (this.st.getNameValue("fxtype")) {
            case E_FX.REVERB:
              a = "fxrev";
              break;
            case E_FX.DELAY:
              a = "fxdel";
              break;
            case E_FX.CHORUS:
              a = "fxcho";
              break;
            case E_FX.ROOM:
              a = "fxroom";
          }
          this.menu = new PRESET_MENU2(null, a, this, this.color);
          this.menu.center = !0;
          this.menu.calcGeometry();
          regUpdate(this.menu);
        },
        loadPreset: function (a, b) {
          var c = this.st.name.slice(0, -1);
          applyPreset(c, a);
          this.st.setNameValue("prname", b);
          regUpdate(this);
          return !0;
        },
        savePreset: function (a) {
          for (var b = this.st.name.slice(0, -1), c = ".par1 .par2 .par3 .par4 .par5 .par6".split(" "), d = {}, f = 0; f < c.length; f++) d[c[f]] = getValue(b + c[f]);
          this.st.setNameValue("prname", a);
          return d;
        },
        paint: function () {
          ctx.fillStyle = PATTERNED ? color.eqBg : "#25262A";
          ctx.fillRect(0, 0, this.w, this.h);
          ctx.textAlign = "right";
          ctx.font = "bold 16pt open_sans_condensedbold";
          var a = lang.PARAM_GLOBAL.format("");
          ctx.fillStyle = color.black;
          ctx.fillText(a, this.w - 18 + 1, 25);
          ctx.fillStyle = color.labelText;
          ctx.fillText(a, this.w - 18, 24);
          var b = fxStrips[this.mode].getName(),
            a = this.w - 18 - textWidth(a);
          ctx.fillStyle = color.black;
          ctx.fillText(b, a + 1, 25);
          ctx.fillStyle = "#76A8D6";
          ctx.fillText(b, a, 24);
          ctx.textAlign = "start";
        },
      }),
      CONTEXT_MENU = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "CONTEXT_MENU";
          this.items = [];
          this.w = 100;
          this.h = 90;
          this.needClip = !0;
          this.ih = 36;
          this.font = "16px open_sans_condensedbold";
          this.bg = "#262728";
          this.borderColor = "#676869";
          this.selected = -1;
          mWidgets.push(widgets.pop());
        },
        setItems: function (a) {
          this.items = a;
          this.h = this.items.length * this.ih;
          regUpdate(this);
        },
        doFunc: function (a) {
          log(this.widgetName + " DOFUNC: " + a);
        },
        valueFunc: function (a) {},
        onDown: function (a, b) {
          var c = b - this.globalY();
          this.selected = bound(Math.floor(c / this.ih), 0, this.items.length - 1);
          regUpdate(this);
        },
        onUp: function () {
          this.doFunc(this.items[this.selected]);
          this.valueFunc(this.selected);
          this.close();
        },
        calcGeometry: function () {},
        close: function () {
          this.enabled = !1;
          clearModals();
        },
        paint: function () {
          ctx.fillStyle = this.bg;
          ctx.strokeStyle = this.borderColor;
          ctx.roundRect(0, 0, this.w, this.h, 14);
          ctx.fill();
          ctx.stroke();
          ctx.font = this.font;
          ctx.textAlign = "left";
          ctx.textBaseline = "middle";
          for (var a = (this.ih / 2) | 0, b = 0; b < this.items.length; b++) {
            var c = b * this.ih;
            ctx.fillStyle = this.selected == b ? color.red : color.white;
            ctx.fillText(this.items[b], 8, c + a, this.w - 10);
            b < this.items.length - 1 && ((ctx.fillStyle = "rgba(255,255,255,0.1)"), ctx.fillRect(0, c + this.ih, this.w, -1));
          }
        },
      }),
      FXLED2 = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "FX-LED2";
          this.bg = res.fxLEDb;
          this.w = this.bg.w();
          this.h = this.bg.h();
          this.label = "PAR";
          this.sign = "%";
          this.v1 = "0";
          this.clickMark = !1;
          this.value = "";
          this.beep = !1;
          this.beepTime = -1;
          this.bpmTimer = this.beepTimer = null;
          this.lastbpmValue = -1;
          this.bgColor = PATTERNED ? color.black : color.eqBg2;
        },
        setValue: function (a, b) {
          switch (a) {
            case 1:
              this.v1 = precision(b, 1) + "";
          }
          regUpdate(this);
        },
        formatValue: function (a) {
          return (100 * a) | 0;
        },
        standartFormat: function (a) {
          return (100 * a) | 0;
        },
        getState: function () {
          this.value = getValue(this.key);
        },
        startBPM: function () {
          this.getState();
          this.doBeep();
          this.calcBPM();
        },
        calcBPM: function () {
          var a = this;
          this.lastbpmValue = this.value;
          this.beepTime = 6e4 / this.value;
          80 > this.beepTime && (this.beepTime = 80);
          3e3 < this.beepTime && (this.beepTime = 3e3);
          clearInterval(this.bpmTimer);
          this.bpmTimer = setInterval(function () {
            a.doBeep();
            a.value != a.lastbpmValue && a.calcBPM();
          }, this.beepTime);
        },
        stopBPM: function () {
          clearInterval(this.bpmTimer);
          this.lastbpmValue = -1;
        },
        doBeep: function () {
          var a = this;
          this.beep = !0;
          regUpdate(this);
          clearTimeout(this.beepTimer);
          this.beepTimer = setTimeout(function () {
            a.beep = !1;
            regUpdate(a);
          }, 80);
        },
        paint: function () {
          this.getState();
          ctx.fillStyle = this.bgColor;
          ctx.fillRect(0, 0, this.w, this.h);
          drawImage(this.bg, 0, 0);
          this.clickMark && ((ctx.fillStyle = color.white), ctx.fillTriangle(this.w - 12, 5, 3, 4));
          this.beep && ((ctx.strokeStyle = color.ledText), (ctx.lineWidth = 2), ctx.strokeRect(1, 1, this.w - 2, this.h - 2));
          var a = (this.w / 2) | 0;
          ctx.fillStyle = color.ledText;
          ctx.textAlign = "center";
          ctx.font = "16px umixled";
          ctx.fillText(this.label, a, 18);
          ctx.fillText(this.formatValue(this.value) + this.sign, a, 35, this.w - 10);
        },
      }),
      FXLEDPlain = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "FX-LED2";
          this.bgColor = color.eqBg;
          this.bg = res.fxLEDb;
          this.w = this.bg.w();
          this.h = this.bg.h();
          this.label = "PAR";
          this.sign = "%";
          this.v1 = "0";
          this.oneLine = this.clickMark = !1;
        },
        setValue: function (a, b) {
          switch (a) {
            case 1:
              this.v1 = precision(b, 1) + "";
          }
          regUpdate(this);
        },
        formatValue: function (a) {
          return (100 * a) | 0;
        },
        standartFormat: function (a) {
          return (100 * a) | 0;
        },
        getState: function () {
          return getValue(this.key);
        },
        paint: function () {
          this.paintedMe = !0;
          ctx.fillStyle = this.bgColor;
          ctx.fillRect(0, 0, this.w, this.h);
          this.clickMark && ((ctx.fillStyle = color.white), ctx.fillTriangle(this.w - 12, 5, 3, 4));
          var a = (this.w / 2) | 0;
          ctx.setShadow("#0a0a0a", 0, 2, 2);
          this.oneLine || ((ctx.fillStyle = "#999"), (ctx.textAlign = "center"), (ctx.font = font.eqSlText), ctx.fillText(this.label, a, 17));
          ctx.textAlign = "start";
          var a = this.getState(),
            b = this.formatValue(a) + "";
          ctx.font = "17px open_sansbold";
          var c = ctx.measureText(b).width;
          ctx.font = "14px open_sans_condensedbold";
          var d = ctx.measureText(this.sign).width,
            a = ((this.w - c - d - 1) / 2) | 0;
          ctx.fillStyle = "#EEE";
          ctx.font = "17px open_sansbold";
          ctx.fillText(b, a, this.oneLine ? 17 : 36, this.w - 10);
          this.w - (a + c + 1) > d && ((ctx.fillStyle = "#777"), (ctx.font = "14px open_sans_condensedbold"), (ctx.textAlign = "end"), ctx.fillText(this.sign, a + c + 1 + d, this.oneLine ? 17 : 36, this.w - 10));
        },
      }),
      FXRACK = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "FXRACK";
          this.w = res.lex_reverb.w();
          this.h = res.lex_reverb.h();
          this.mode = 0;
          this.tap = new Button(this);
          this.tap.setImages(res.lex_tap_off, res.lex_tap_on);
          this.tap.setPos(262, 33);
          this.tap.valueFunc = function () {
            bpmTapHandler(b.mode);
            updateByKey("f." + b.mode + ".bpm");
          };
          this.tap.onHold = function () {
            askBpm(b.mode);
          };
          this.tap.hide();
          this.holdTimer = null;
        },
        setMode: function (a) {
          this.mode = a;
          a = fxStrips[this.mode].getNameValue("fxtype");
          this.tap.enabled = a == E_FX.DELAY;
          regUpdate(this);
        },
        onDown: function (a, b, c) {
          a -= this.globalX();
          b -= this.globalY();
          b = isInRect(this.tap.x - 15, this.tap.y - 15, this.tap.w + 30, this.tap.h + 30, a, b);
          var d = this;
          this.tap.enabled && b
            ? (this.holdTimer = setTimeout(function () {
              askBpm(d.mode);
            }, HOLD_TIME))
            : this.parent.showPresets();
        },
        onUp: function () {
          clearTimeout(this.holdTimer);
        },
        paint: function () {
          var a = 170;
          switch (fxStrips[this.mode].getNameValue("fxtype")) {
            case E_FX.REVERB:
              a = 198;
              drawImage(res.lex_reverb, 0, 0);
              break;
            case E_FX.DELAY:
              a = 174;
              drawImage(res.lex_delay_a, 0, 0);
              break;
            case E_FX.CHORUS:
              a = 198;
              drawImage(res.lex_chorus, 0, 0);
              break;
            case E_FX.ROOM:
              (a = 198), drawImage(res.lex_room, 0, 0);
          }
          fxStrips[this.mode].getNameValue("fxmode");
          var b = fxStrips[this.mode].getNameValue("prname"),
            c = fxStrips[this.mode].getNameValue("prmod");
          "" == b && (b = "---");
          ctx.drawText(b, a, 48, { font: font.botChLabel, align: "center", valign: "middle", color: 0 == c ? "#FFFB89" : "#f00", shadow: [color.black, 0, 1, 1] });
        },
      }),
      FXSENDSPage = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "FX_EDIT_PAGE";
          this.mode = -1;
          this.y = measures.topWidgetHeight;
          this.enabled = !1;
          this.buttons = [];
          this.color = color.blue;
          this.pages = [];
          this.initWidgets();
          this.setMode(0);
        },
        onShow: function () {
          this.page.arrangeStrips();
          bottomWidget.setOffset2(this.page.offsetX);
        },
        setOffset: function (a) {
          this.page.setOffset(a);
        },
        setVU: function (a, b) {
          this.page.strips[a].vu.setValue(b);
          var c = this.page.strips[a].clip;
          1 <= b ? c.clip() : c.state && !c.releasing && c.release();
        },
        resetVUs: function () {
          for (var a = this.page.strips, b = 0; b < a.length; b++) a[b].vu.reset();
        },
        syncSliders: function () {},
        setMode: function (a, b) {
          this.mode != a && (b == b || !1, (this.mode = a), fxoutWidget.setFx(a), this.page.setMode(a), this.resetVUs(), regUpdate(this), b || bottomWidget.upd(), regUpdate(bottomWidget));
        },
        nextMode: function () {
          this.mode == curSetup.fx - 1 ? this.setMode(0) : this.setMode(this.mode + 1);
        },
        initWidgets: function () {
          for (var a = [color.blue, color.brown, color.purple, color.green], b = 0; b < fxStrips.length; b++) {
            var c = new TabButton(this);
            c.textColor = LightenDarkenColor(a[b], 10);
            c.color = a[b];
            c.mode = b;
            c.text = "NULL";
            c.setSize(111, 30);
            c.getState = function () {
              this.cosmetic || ((this.state = this.parent.mode == this.mode ? 1 : 0), (this.text = fxStrips[this.mode].getName()));
            };
            this.buttons.push(c);
          }
          this.page = new FXMixer(this, 0, color.blue);
        },
        calcGeometry: function () {
          this.w = screenWidth;
          masterWidget.enabled && (this.w -= masterWidget.w);
          fxoutWidget.enabled && (this.w -= fxoutWidget.w);
          slideOutWidget.enabled && (this.w -= slideOutWidget.w);
          this.h = screenHeight - this.y - bottomWidget.h;
          for (var a = 0; a < this.buttons.length; a++) this.buttons[a].setPos(this.w - (this.buttons[a].w + 1) * (this.buttons.length - a), 5);
        },
        paint: function () {
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, 0, this.w, this.h);
          ctx.fillStyle = [color.blue, color.brown, color.purple, color.green][this.mode];
          ctx.fillRect(0, 35, this.w, 4);
        },
      }),
      FXMixer = Class.create(Widget, {
        initialize: function ($super, b, c, d) {
          $super(b);
          this.widgetName = "FX_MIXER";
          this.y = 40;
          this.mode = 0;
          this.needClip = !0;
          isDefined(d) ? (this.color = d) : (this.color = color.blue);
          this.fxID = c;
          this.strips = [];
          this.createStrips();
        },
        setMode: function (a) {
          for (var b = (this.mode = 0); b < this.strips.length; b++) this.strips[b].setMode(a);
        },
        createStrips: function () {
          for (var a = curSetup.input, b = curSetup.sub, c = curSetup.linein, d = 0, f = "fx." + this.fxID + ".", e = 0; e < a; e++) {
            var g = "i." + e + ".",
              h = inStrips[e],
              g = new FXStrip(this, d, g, f);
            0 == e && (g.firstInGroup = !0);
            e == a - 1 && (g.lastInGroup = !0);
            g.id = h.id;
            g.color = this.color;
            g.sl.color = this.color;
            g.text = h.text;
            g.st = h;
            this.strips.push(g);
            fxSendStrips.push(g);
            h.FXS.push(g);
            d++;
          }
          for (e = 0; e < c; e++)
            (g = "l." + e + "."),
              (h = lineinStrips[e]),
              (g = new FXStrip(this, d, g, f)),
            0 == e && (g.firstInGroup = !0),
            e == c - 1 && (g.lastInGroup = !0),
              (g.id = h.id),
              (g.color = h.color),
              (g.sl.color = this.color),
              (g.text = h.text),
              (g.st = h),
              this.strips.push(g),
              fxSendStrips.push(g),
              h.FXS.push(g),
              d++;
          h = mediaStrips[0];
          g = new FXStrip(this, d, "p.0.", f);
          g.firstInGroup = !0;
          g.id = h.id;
          g.color = color.media;
          g.sl.color = this.color;
          g.sl.fader = res.fader;
          g.text = h.text;
          g.st = h;
          this.strips.push(g);
          fxSendStrips.push(g);
          h.FXS.push(g);
          d++;
          h = mediaStrips[1];
          g = new FXStrip(this, d, "p.1.", f);
          g.lastInGroup = !0;
          g.id = h.id;
          g.color = color.media;
          g.sl.color = this.color;
          g.sl.fader = res.fader;
          g.text = h.text;
          g.st = h;
          this.strips.push(g);
          fxSendStrips.push(g);
          h.FXS.push(g);
          d++;
          for (e = 0; e < b; e++)
            (g = "s." + e + "."),
              (h = subStrips[e]),
              (g = new FXStrip(this, d, g, f)),
            0 == e && (g.firstInGroup = !0),
            e == b - 1 && (g.lastInGroup = !0),
              (g.id = h.id),
              (g.color = color.sub),
              (g.sl.color = this.color),
              (g.sl.fader = res.subFader),
              (g.text = h.text),
              (g.st = h),
              this.strips.push(g),
              fxSendStrips.push(g),
              h.FXS.push(g),
              d++;
        },
        arrangeStrips: function () {
          for (var a = 0; a < this.strips.length; a++);
        },
        setOffset: function (a) {
          this.offsetX = a;
          0 > this.offsetX && (this.offsetX = 0);
          a = this.strips.length * measures.mixerStripWidth - this.w;
          0 > a && (a = 0);
          this.offsetX > a && (this.offsetX = a);
          this.offsetXold = this.offsetX;
          regUpdate(this);
        },
        calcGeometry: function () {
          this.w = this.parent.w - this.x;
          this.h = this.parent.h - this.y;
          var a = this.strips.length * measures.mixerStripWidth - this.w;
          0 > a && (a = 0);
          this.offsetX > a && this.setOffset(this.offsetX);
        },
        paint: function () {
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, 0, this.w, this.h);
        },
      });
    chSafesPage = showsPage = null;
    var SETTINGS = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "SETTINGS";
          this.y = measures.topWidgetHeight;
          this.needClip = !1;
          this.mode = 0;
          this.color = color.red;
          this.tabButtons = [];
          this.initWidgets();
          this.setMode(3);
        },
        showIsoPage: function () {
          if (this.iso_page) {
            for (var a = 0; a < this.pages.length; a++) this.pages[a].hide();
            this.iso_page.show();
            regUpdate(this);
          }
        },
        hideIsoPage: function () {
          this.iso_page && this.setMode(2);
        },
        onShow: function () {
          if (isDefined(this.pages[this.mode])) this.pages[this.mode].onShow();
        },
        onHide: function () {
          for (var a = 0; a < this.pages.length; a++) if (this.pages[a].enabled) this.pages[a].onHide();
        },
        setMode: function (a) {
          this.mode = a;
          this.iso_page && this.iso_page.hide();
          for (a = 0; a < this.pages.length; a++) this.pages[a].hide();
          this.mode < this.pages.length && this.pages[this.mode].show();
          regUpdate(this);
        },
        nextMode: function () {
          this.mode == this.pages.length - 1 ? this.setMode(0) : this.setMode(this.mode + 1);
        },
        initWidgets: function () {
          var a = [lang.NETWORK, lang.ACCESS, lang.SHOWS, lang.SETTINGS];
          HAVE_ROUTING && a.push(lang.PATCHING);
          CASCADE_MODE && a.push(lang.CASCADE);
          a.push(lang.ABOUT);
          for (var b = 0; b < a.length; b++) {
            var c = new TabButton(this);
            c.color = c.textColor = "hsl(" + 32 * (b + 1) + ",50%,45%)";
            c.mode = b;
            c.text = a[b];
            c.setSize(100, 30);
            this.tabButtons.push(c);
          }
          this.pages = [];
          this.pages.push(new NETWORK_PAGE(this));
          this.pages.push(new PERM_PAGE(this));
          this.pages.push(new SHOWS_PAGE(this));
          this.pages.push(new CONFIG_PAGE(this));
          HAVE_ROUTING && this.pages.push(new ROUTING_PAGE(this));
          CASCADE_MODE && this.pages.push(new CASCADE_SUBPAGE(this));
          this.pages.push(new ABOUTPage(this));
          this.iso_page = null;
          this.iso_page = new ISO_PAGE(this);
          this.iso_page.hide();
        },
        calcGeometry: function () {
          this.w = screenWidth;
          masterWidget.enabled && (this.w -= masterWidget.w);
          this.h = screenHeight - this.y;
          for (var a = 0; a < this.tabButtons.length; a++) this.tabButtons[a].setPos(this.w - (this.tabButtons[a].w + 1) * (this.tabButtons.length - a), 5);
        },
        paint: function () {
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, 0, this.w, this.h);
          ctx.fillStyle = this.tabButtons[this.mode].color;
          ctx.fillRect(4, 35, this.w - 4, 4);
        },
      }),
      SETTINGS_SUBPAGE = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "SETTINGS_SUBPAGE";
          this.y = 40;
          this.enabled = !1;
          this.bgColor = color.eqBg;
        },
        onDown: function (a, b) {
          this.lastPressPoint = this.pressPoint;
          this.pressPoint = [a, b];
        },
        onUp: function (a) {
          var b = Date.now(),
            c = Math.abs(this.lastPressPoint[0] - this.pressPoint[0]),
            d = Math.abs(this.lastPressPoint[1] - this.pressPoint[1]);
          2 < mouseTargets.length ||
          (isDefined(tHash[a]) && 2 < tHash[a].length) ||
          (30 > c && 30 > d && b - this.lastClickTime < DBL_CLK_TIME ? (this.onDouble(), (this.lastClickTime = b - DBL_CLK_TIME)) : (this.lastClickTime = b));
        },
        onDouble: function () {
          setMode(E_MODE.MIX);
        },
        initWidgets: function () {},
        calcGeometry: function () {
          this.w = this.parent.w - this.x;
          this.h = this.parent.h - this.y;
        },
        paint: function () {
          ctx.fillStyle = this.bgColor;
          ctx.fillRect(0, 0, this.w, this.h);
        },
      }),
      NETWORK_PAGE = Class.create(SETTINGS_SUBPAGE, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "NETWORK_PAGE";
          this.timer = null;
          this.initWidgets();
        },
        onShow: function () {
          sendMessage("NETCONFIG");
          clearInterval(this.timer);
          this.timer = setInterval(function () {
            sendMessage("NETCONFIG");
          }, 2e3);
        },
        onHide: function () {
          clearInterval(this.timer);
        },
        initWidgets: function () {
          this.bCONFIG = new MENUBUTTON(this);
          this.bCONFIG.setPos(60, 300);
          this.bCONFIG.setSize(100, 36);
          this.bCONFIG.text = lang.CONFIG;
          this.bCONFIG.textColor = "#d66";
          this.bCONFIG.color = "#d66";
          this.bCONFIG.onPress = function () {
            EMULATE
              ? showPopupMsg(lang.DEMO_VERSION)
              : isLocal
                ? ((editOk.valueFunc = function () {
                  var a = editBox2.value;
                  if (a) {
                    var b = netConfig.adminPassword,
                      c = b.slice(0, 32),
                      d = md5(c + a + c);
                    c + d == b ? ((b = document.URL), (b = b.replace(/:\/\//, "://admin:" + a + "@")), (b = b.replace(/\/mixer\.html/, "/config.html")), (document.location = b)) : showPopupMsg(lang.WRONG_PASSWORD);
                  }
                }),
                  showEditBox2(lang.PASSWORD, ""))
                : (document.location = "/config.html");
          };
        },
        paint: function () {
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, 0, this.w, this.h);
          ctx.font = font.editbox;
          ctx.textAlign = "left";
          ctx.fillStyle = color.white;
          ctx.fillText(lang.WIRELESS_NETWORK, 60, 50);
          ctx.fillText(lang.ETHERNET, 660, 50);
          JSON.stringify(netConfig);
          ctx.textAlign = "left";
          var a = color.yellow + lang.HOTSPOT + "<br>{0}<br>{1}<br>#C8C9C9" + lang.CHANNEL + ": {2}<br>SSID: {3}",
            a = a.format(
              netConfig.ap_enabled ? color.green + lang.ENABLED : color.red + lang.DISABLED,
              netConfig.ap_up ? color.green + lang.UP : color.red + lang.DOWN,
              netConfig.wlan_up ? lang.OVERRIDDEN_BY_WIFI : netConfig.ap_channel,
              netConfig.ap_ssid
            );
          netConfig.ap_mac && (a += "<br>MAC: " + netConfig.ap_mac);
          drawText(a, 60, 110, { dy: 30 });
          a = color.yellow + "WI-FI<br>{0}<br>{1}".format(netConfig.wlan_enabled ? color.green + lang.ENABLED : color.red + lang.DISABLED, netConfig.wlan_up ? color.green + lang.UP : color.red + lang.DOWN);
          netConfig.wlan_up &&
          (a += "<br>#C8C9C9IP: {0}<br>NETMASK: {1}".format(
            0 == netConfig.wlan_mode ? netConfig.wlan_dhcp_ip + " (DHCP)" : netConfig.wlan_ip,
            0 == netConfig.wlan_mode ? netConfig.wlan_dhcp_netmask : netConfig.wlan_netmask
          ));
          netConfig.wlan_mac && (a += "<br>#C8C9C9MAC: " + netConfig.wlan_mac);
          drawText(a, 360, 110, { dy: 30 });
          a = color.yellow + "LAN<br>{0}<br>{1}".format(netConfig.eth_enabled ? color.green + lang.ENABLED : color.red + lang.DISABLED, netConfig.eth_up ? color.green + lang.UP : color.red + lang.DOWN);
          netConfig.eth_up &&
          (a += "<br>#C8C9C9IP: {0}<br>NETMASK: {1}".format(0 == netConfig.eth_mode ? netConfig.eth_dhcp_ip + " (DHCP)" : netConfig.eth_ip, 0 == netConfig.eth_mode ? netConfig.eth_dhcp_netmask : netConfig.eth_netmask));
          netConfig.eth_mac && (a += "<br>#C8C9C9MAC: " + netConfig.eth_mac);
          drawText(a, 660, 110, { dy: 30 });
        },
      }),
      ISO_PAGE = Class.create(SETTINGS_SUBPAGE, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "ISO_PAGE";
          this.color = "#22aa22";
          this.offsetY = 0;
          this.hh = this.maxY = 900;
          this.needMoveEvt = this.needClip = !0;
          this.buttons = [];
          this.initWidgets();
          chSafesPage = this;
        },
        setOffset: function (a) {
          this.offsetY = bound(a | 0, 0, this.maxY);
          regUpdate(this);
        },
        onDown: function (a, b, c) {
          this.lastPressPoint = this.pressPoint;
          this.pressPoint = [a, b + this.offsetY];
          this.ppy = this.offsetY + b;
          this.d = this.offsetY;
        },
        onMove: function (a, b, c) {
          2 < mouseTargets.length || (isDefined(tHash[c]) && 2 < tHash[c].length) || this.setOffset(this.ppy - b);
        },
        onUp: function (a) {
          var b = Date.now(),
            c = Math.abs(this.lastPressPoint[0] - this.pressPoint[0]),
            d = Math.abs(this.lastPressPoint[1] - this.pressPoint[1]),
            f = Math.abs(this.d - this.offsetY);
          2 < mouseTargets.length ||
          (isDefined(tHash[a]) && 2 < tHash[a].length) ||
          (10 > f && 30 > c && 30 > d && b - this.lastClickTime < DBL_CLK_TIME ? (this.onDouble(), (this.lastClickTime = b - DBL_CLK_TIME)) : (this.lastClickTime = b));
        },
        onWheel: function (a) {
          clearInterval(ticker);
          this.setOffset(this.offsetY - Math.round(a / 3));
        },
        onShow: function () {},
        initWidgets: function () {
          var a = this,
            b = 40;
          this.back = new MENUBUTTON(this);
          this.back.setAnchors(b + 200, 19, null, null);
          this.back.setSize(90, 40);
          this.back.text = lang.BACK;
          this.back.onPress = function () {
            a.parent.hideIsoPage();
          };
          this.bRESET = new MENUBUTTON(this);
          this.bRESET.setAnchors(b + 700, 19, null, null);
          this.bRESET.setSize(90, 40);
          this.bRESET.text = lang.RESET;
          this.bRESET.onPress = function () {
            for (var b = 0; b < allStrips.length; b++) allStrips[b].setNameValue("safe", 0);
            masterWidget.setNameValue("safe", 0);
            for (b = 0; b < a.buttons.length; b++) a.buttons[b].setState(0);
            setValue("var.unsaved.chsafes", 1);
            regUpdate(a);
          };
          this.bSAVE = new MENUBUTTON(this);
          this.bSAVE.setAnchors(b + 400, 19, null, null);
          this.bSAVE.setSize(190, 40);
          this.bSAVE.text = lang.SAVE_TO_SHOW;
          this.bSAVE.textColor = color.yellow;
          this.bSAVE.regKey("var.unsaved.chsafes");
          this.bSAVE.getState = function () {
            this.disabled = 0 == getValue("var.unsaved.chsafes");
          };
          this.bSAVE.onPress = function () {
            if (isBlocked("shows")) showPopupMsg(lang.LOCKED, 1e3);
            else {
              var b = getValue("var.currentShow");
              b && (sendMessage(E_COMMANDS.SAVESHOW + "^" + b), setValue("var.unsaved.chsafes", 0), regUpdate(a.bSAVE));
            }
          };
          var c = 50,
            d = 0,
            f = 0;
          this.BUTTONS = [];
          this.B1 = [];
          this.B2 = [];
          this.B3 = [];
          this.B4 = [];
          this.B5 = [];
          this.B6 = [];
          this.regKey("iso.ch");
          this.regKey("iso.bus");
          this.regKey("iso.mtx");
          this.regKey("iso.m");
          this.regKey("iso.fx");
          this.regKey("iso.gr");
          for (var e = 0; e < allStrips.length; e++) {
            var g = new CHECKBUTTON(this);
            g.setSize(90, 40);
            0 == e % 8 && 0 != e && d++;
            var h = 80 + c * d,
              f = h;
            g.setPos(b + (g.w + 10) * (e - 8 * d), h);
            g.key = allStrips[e].name + "safe";
            g.id = allStrips[e].id;
            g.text = allStrips[e].text;
            g.textColor = allStrips[e].color;
            g.getState = function () {
              this.state = 1 == this.state;
            };
            g.onToggle = function () {
              isBlocked("shows") || (setValue("var.unsaved.chsafes", 1), regUpdate(a.bSAVE));
            };
            this.BUTTONS.push(g);
          }
          g = new CHECKBUTTON(this);
          g.setSize(90, 40);
          0 == e % 8 && 0 != e && d++;
          f = h = 80 + c * d;
          g.setPos(b + (g.w + 10) * (e - 8 * d), h);
          g.key = "m.safe";
          g.id = masterWidget.id;
          g.text = lang.MASTER;
          g.textColor = masterWidget.color;
          g.getState = function () {
            this.state = 1 == this.state;
          };
          g.onToggle = function () {
            isBlocked("shows") || (setValue("var.unsaved.chsafes", 1), regUpdate(a.bSAVE));
          };
          this.BUTTONS.push(g);
          if (HAVE_ISOLATION) {
            for (
              var k = "iso.ch",
                m = [
                  lang.MIC_GAIN,
                  "+48V",
                  lang.PHASE,
                  lang.DELAY,
                  lang.NAME,
                  lang.HPF,
                  lang.DIGITECH,
                  lang.EQ,
                  lang.DEESSER,
                  lang.COMP,
                  lang.GATE,
                  lang.PANNING,
                  lang.ROUTING,
                  lang.MUTES,
                  lang.FADER_POSITION,
                  lang.FX_SEND_LEVELS,
                  lang.AUX_MTX_SEND_LEVELS,
                ],
                p = "micgain 48v phase delay names hpf digi eq deesser comp gate pan routing mutes mix fxsends auxmtxlvls".split(" "),
                b = 40,
                c = 60,
                f = f + 110,
                e = (d = 0);
              e < m.length;
              e++
            )
              (g = new CHECKBUTTON(this)),
              0 == e % 8 && 0 != e && d++,
                g.setSize(90, 46),
                g.setPos(b + (e % 8) * 100, f + c * d),
                (g.font = "12pt open_sans_condensedbold"),
                (g.idx = e),
                (g.text = formatButtonText(m[e])),
                (g.id = p[e]),
                (g.key2 = k),
                (g.getState = function () {
                  this.state = (getValue(this.key2) || "").split(",").contains(this.id);
                }),
                (g.onToggle = function () {
                  var b = getValue(this.key2) || "",
                    c = b.split(","),
                    d = c.contains(this.id);
                  this.state ? d || setValue(this.key2, b ? b + "," + this.id : this.id) : d && (c.deleteItem(this.id), setValue(this.key2, c.join(",")));
                  setValue("var.unsaved.chsafes", 1);
                  regUpdate(a.bSAVE);
                }),
                this.buttons.push(g),
                this.B1.push(g);
            d++;
            d++;
            k = "iso.bus";
            m = [
              lang.PHASE,
              lang.DELAY,
              lang.NAME,
              lang.GEQ,
              lang.COMP,
              lang.GATE,
              lang.FADER_POSITION,
              lang.CONTRIB_PANNING,
              lang.CONTRIB_BUS_POINTS,
              lang.MUTES,
              lang.AUX_CONTRIB,
              lang.MATRIX_CONTRIB,
              lang.MATRIX_CONTRIB_PANNING,
            ];
            p = "phase delay name geq comp gate mix pan buspoints mutes aux mtxcontrib mtxcontribpan".split(" ");
            for (e = 0; e < m.length; e++)
              (g = new CHECKBUTTON(this)),
              0 == e % 8 && 0 != e && d++,
                g.setSize(90, 46),
                g.setPos(b + (e % 8) * 100, f + c * d),
                (g.idx = e),
                (g.text = formatButtonText(m[e])),
                (g.id = p[e]),
                (g.key2 = k),
                (g.getState = function () {
                  this.state = (getValue(this.key2) || "").split(",").contains(this.id);
                }),
                (g.onToggle = function () {
                  var b = getValue(this.key2) || "",
                    c = b.split(","),
                    d = c.contains(this.id);
                  this.state ? d || setValue(this.key2, b ? b + "," + this.id : this.id) : d && (c.deleteItem(this.id), setValue(this.key2, c.join(",")));
                  setValue("var.unsaved.chsafes", 1);
                  regUpdate(a.bSAVE);
                }),
                this.buttons.push(g),
                this.B2.push(g);
            d++;
            d++;
            k = "iso.m";
            m = [lang.GEQ, lang.COMP, lang.BALANCE, lang.MUTES];
            p = ["geq", "comp", "balpan", "mutes"];
            for (e = 0; e < m.length; e++)
              (g = new CHECKBUTTON(this)),
              0 == e % 8 && 0 != e && d++,
                g.setSize(90, 46),
                g.setPos(b + (e % 8) * 100, f + c * d),
                (g.idx = e),
                (g.text = formatButtonText(m[e])),
                (g.id = p[e]),
                (g.key2 = k),
                (g.getState = function () {
                  this.state = (getValue(this.key2) || "").split(",").contains(this.id);
                }),
                (g.onToggle = function () {
                  var b = getValue(this.key2) || "",
                    c = b.split(","),
                    d = c.contains(this.id);
                  this.state ? d || setValue(this.key2, b ? b + "," + this.id : this.id) : d && (c.deleteItem(this.id), setValue(this.key2, c.join(",")));
                  setValue("var.unsaved.chsafes", 1);
                  regUpdate(a.bSAVE);
                }),
                this.buttons.push(g),
                this.B4.push(g);
            d++;
            d++;
            k = "iso.fx";
            m = [lang.FX + " 1", lang.FX + " 2", lang.FX + " 3", lang.FX + " 4"];
            p = ["fx1", "fx2", "fx3", "fx4"];
            for (e = 0; e < m.length; e++)
              (g = new CHECKBUTTON(this)),
              0 == e % 8 && 0 != e && d++,
                g.setSize(90, 46),
                g.setPos(b + (e % 8) * 100, f + c * d),
                (g.idx = e),
                (g.text = m[e]),
                (g.id = p[e]),
                (g.key2 = k),
                (g.getState = function () {
                  this.state = (getValue(this.key2) || "").split(",").contains(this.id);
                }),
                (g.onToggle = function () {
                  var b = getValue(this.key2) || "",
                    c = b.split(","),
                    d = c.contains(this.id);
                  this.state ? d || setValue(this.key2, b ? b + "," + this.id : this.id) : d && (c.deleteItem(this.id), setValue(this.key2, c.join(",")));
                  setValue("var.unsaved.chsafes", 1);
                  regUpdate(a.bSAVE);
                }),
                this.buttons.push(g),
                this.B5.push(g),
                (h = f + c * d),
                (this.hh = h + 80);
            d++;
            d++;
            k = "iso.gr";
            m = [lang.MUTE_GROUPS];
            p = ["mg"];
            for (e = 0; e < m.length; e++)
              (g = new CHECKBUTTON(this)),
              0 == e % 8 && 0 != e && d++,
                g.setSize(90, 46),
                g.setPos(b + (e % 8) * 100, f + c * d),
                (g.idx = e),
                (g.text = m[e].replace(" ", "\n")),
                (g.id = p[e]),
                (g.key2 = k),
                (g.getState = function () {
                  this.state = (getValue(this.key2) || "").split(",").contains(this.id);
                }),
                (g.onToggle = function () {
                  var b = getValue(this.key2) || "",
                    c = b.split(","),
                    d = c.contains(this.id);
                  this.state ? d || setValue(this.key2, b ? b + "," + this.id : this.id) : d && (c.deleteItem(this.id), setValue(this.key2, c.join(",")));
                  setValue("var.unsaved.chsafes", 1);
                  regUpdate(a.bSAVE);
                }),
                this.buttons.push(g),
                this.B6.push(g),
                (h = f + c * d),
                (this.hh = h + 80);
          }
        },
        calcGeometry: function () {
          this.w = this.parent.w - this.x;
          this.h = this.parent.h - this.y;
          this.maxY = this.hh - this.h;
          0 > this.maxY && (this.maxY = 0);
          this.offsetY = bound(this.offsetY, 0, this.maxY);
        },
        paint: function () {
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, this.offsetY, this.w, this.h);
          ctx.font = font.editbox;
          ctx.textAlign = "left";
          ctx.fillStyle = color.yellow;
          ctx.fillText(lang.CHANNEL_SAFES, 42, this.BUTTONS[0].y + -12);
          HAVE_ISOLATION &&
          (ctx.fillText(lang.CHANNELS, 42, this.B1[0].y + -12),
            ctx.fillText(lang.BUSSES, 42, this.B2[0].y + -12),
            ctx.fillText(lang.MASTER, 42, this.B4[0].y + -12),
            ctx.fillText(lang.FX, 42, this.B5[0].y + -12),
            ctx.fillText(lang.GROUPS, 42, this.B6[0].y + -12));
          if (1 < this.maxY) {
            ctx.fillStyle = "rgba(255,255,255,0.07)";
            ctx.fillRoundRect(this.w - 11, this.offsetY + 2, 10, this.h - 4, 4);
            ctx.fillStyle = "rgba(255,255,255,0.4)";
            var a = (this.h / (this.h + this.maxY)) * (this.h - 4);
            ctx.fillRoundRect(this.w - 11, this.offsetY + ((2 + (this.offsetY / this.maxY) * (this.h - 4 - a)) | 0), 10, a, 4);
          }
        },
      }),
      SHOWS_PAGE = Class.create(SETTINGS_SUBPAGE, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "SHOWS_PAGE";
          this.color = color.red;
          this.initWidgets();
          showsPage = this;
        },
        updLists: function () {
          this.showsListUpdate();
          this.snapsListUpdate();
        },
        onShow: function () {
          if (EMULATE) this.SHOWS.setItems($A($R("SHOW A", "SHOW Z"))), this.SNAPS.setItems($A($R("SNAPSHOT A", "SNAPSHOT Z")));
          else {
            this.showsListUpdate();
            var a = getValue("var.currentShow");
            a && sendMessage(E_COMMANDS.SNAP_LIST + "^" + a);
          }
        },
        showsListUpdate: function () {
          EMULATE || sendMessage(E_COMMANDS.SHOW_LIST);
        },
        snapsListUpdate: function () {
          if (!EMULATE) {
            var a = this.SHOWS.selItem();
            null == a && (a = getValue("var.currentShow"));
            null != a && 0 != a.length && sendMessage(E_COMMANDS.SNAP_LIST + "^" + a);
          }
        },
        refresh: function () {},
        initWidgets: function () {
          var a = this;
          this.bSAFES = new MENUBUTTON(this);
          this.bSAFES.setPos(250, 20);
          this.bSAFES.setSize(130, 40);
          this.bSAFES.color = color.green;
          this.bSAFES.text = IS_UI_24 ? lang.ISOLATE : lang.CHANNEL_SAFES;
          this.bSAFES.onPress = function () {
            a.parent.showIsoPage();
          };
          this.SHOWS = new LIST(this);
          this.SHOWS.setPos(40, 80);
          this.SHOWS.setSize(340, 320);
          this.SHOWS.showList = !0;
          this.SHOWS.getActiveItem = function () {
            var a = getValue("var.currentShow");
            this.activeItemIdx = this.items.indexOf(a);
          };
          this.SHOWS.onDClick = function () {
            a.bSHOWLOAD.click();
          };
          this.SHOWS.onSelect = function () {
            if (!EMULATE)
              if (isBlocked("shows")) showPopupMsg(lang.LOCKED, 800);
              else {
                var b = this.selItem();
                null == b ? 0 <= this.activeItemIdx && this.select(this.activeItemIdx) : (a.SNAPS.clear(), (a.SNAPS.showName = b), sendMessage(E_COMMANDS.SNAP_LIST + "^" + b));
              }
          };
          this.bNEWSHOW = new MENUBUTTON(this);
          this.bNEWSHOW.setPos(390, 130);
          this.bNEWSHOW.text = lang.NEW;
          this.bNEWSHOW.onPress = function () {
            EMULATE
              ? showPopupMsg(lang.DEMO_VERSION)
              : isBlocked("shows")
                ? showPopupMsg(lang.LOCKED, 800)
                : ((editOk.valueFunc = function () {
                  var b = editBox2.value;
                  null != b &&
                  0 != b.length &&
                  ((b = b.replace(/\^/g, "_")),
                    -1 != a.SHOWS.items.indexOf(b)
                      ? showPopupMsg(lang.SHOW_ALREADY_EXISTS, 800)
                      : (sendMessage(E_COMMANDS.SHOW_CREATE + "^" + b), sendMessage(E_COMMANDS.SHOW_LOAD + "^" + b), a.showsListUpdate(), a.SHOWS.clearSelection()));
                }),
                  showEditBox2(lang.SAVE_SHOW_WITH_NAME, ""));
          };
          this.bSHOWLOAD = new MENUBUTTON(this);
          this.bSHOWLOAD.text = lang.LOAD;
          this.bSHOWLOAD.setPos(390, 80);
          this.bSHOWLOAD.onPress = function () {
            if (EMULATE) showPopupMsg(lang.DEMO_VERSION);
            else if (isBlocked("shows")) showPopupMsg(lang.LOCKED, 800);
            else {
              var b = a.SHOWS.selItem();
              null != b && (a.SNAPS.clear(), sendMessage(E_COMMANDS.SHOW_LOAD + "^" + b), sendMessage(E_COMMANDS.SNAP_LIST + "^" + b), regUpdate(topWidget));
            }
          };
          this.bSHOWREN = new MENUBUTTON(this);
          this.bSHOWREN.text = lang.RENAME;
          this.bSHOWREN.setPos(390, 180);
          this.bSHOWREN.onPress = function () {
            if (EMULATE) showPopupMsg(lang.DEMO_VERSION);
            else if (isBlocked("shows")) showPopupMsg(lang.LOCKED, 800);
            else {
              var b = a.SHOWS.selItem();
              null != b &&
              ((editOk.valueFunc = function () {
                var c = editBox2.value;
                null != c &&
                0 != c.length &&
                ((c = c.replace(/\^/g, "_")),
                  sendMessage(E_COMMANDS.SHOW_RENAME + "^" + b + "^" + c),
                b == getValue("var.currentShow") && setValue("var.currentShow", c),
                  a.showsListUpdate(),
                  (a.SHOWS.onSetItems = function () {
                    this.selectByName(c);
                  }));
              }),
                showEditBox2(lang.NEW_SHOW_NAME, b));
            }
          };
          this.bSHOWIMPORT = new MENUBUTTON(this);
          this.bSHOWIMPORT.setPos(390, 250);
          this.bSHOWIMPORT.text = lang.IMPORT;
          this.bSHOWIMPORT.onPress = function () {
            if (EMULATE) showPopupMsg(lang.DEMO_VERSION);
            else if (isBlocked("shows")) showPopupMsg(lang.LOCKED, 800);
            else {
              var a = new MODAL_LIST(null, E_COMMANDS.IMPORT_LIST);
              a.title = lang.IMPORT_SHOW_FROM_USB;
              a.valueFunc = function (a) {
                sendMessage(E_COMMANDS.IMPORT_SHOW + "^" + a);
              };
            }
          };
          this.bSHOWEXPORT = new MENUBUTTON(this);
          this.bSHOWEXPORT.setPos(390, 300);
          this.bSHOWEXPORT.text = lang.EXPORT;
          this.bSHOWEXPORT.onPress = function () {
            if (EMULATE) showPopupMsg(lang.DEMO_VERSION);
            else if (isBlocked("shows")) showPopupMsg(lang.LOCKED, 800);
            else {
              var b = a.SHOWS.selItem();
              if (null == b) showPopupMsg(lang.NO_SHOW_SELECTED);
              else {
                var d = new MODAL_LIST(null, E_COMMANDS.USB_LIST);
                d.title = lang.EXPORT_SHOW_TO_USB.format(b);
                d.valueFunc = function (a) {
                  sendMessage(E_COMMANDS.EXPORT_SHOW + "^" + a + "^" + b);
                };
              }
            }
          };
          this.bSHOWDEL = new MENUBUTTON(this);
          this.bSHOWDEL.text = lang.DELETE;
          this.bSHOWDEL.setPos(390, 370);
          this.bSHOWDEL.onPress = function () {
            if (EMULATE) showPopupMsg(lang.DEMO_VERSION);
            else if (isBlocked("shows")) showPopupMsg(lang.LOCKED, 800);
            else {
              var b = a.SHOWS.selItem();
              null != b &&
              ((confOk.valueFunc = function () {
                sendMessage(E_COMMANDS.SHOW_DEL + "^" + b);
                a.showsListUpdate();
                a.SHOWS.clearSelection();
              }),
                (confCancel.valueFunc = function () {}),
                showConfBox(lang.DELETE_SHOW.format(b)));
            }
          };
          var b = 1020 > screenWidth ? 756 : 810;
          this.SNAPS = new LIST(this);
          this.SNAPS.setPos(1020 > screenWidth ? 470 : 490, 80);
          this.SNAPS.setSize(1020 > screenWidth ? 280 : 310, 320);
          this.SNAPS.snapList = !0;
          this.SNAPS.showName = "";
          this.SNAPS.getActiveItem = function () {
            var a = getValue("var.currentShow");
            this.showName != a ? (this.activeItemIdx = -1) : ((a = getValue("var.currentSnapshot")), (this.activeItemIdx = this.items.indexOf(a)));
          };
          this.SNAPS.onDClick = function () {
            a.bSNAPLOAD.click();
          };
          this.bSNAPLOAD = new MENUBUTTON(this);
          this.bSNAPLOAD.text = lang.LOAD;
          this.bSNAPLOAD.setPos(b, 80);
          this.bSNAPLOAD.onPress = function () {
            if (EMULATE) showPopupMsg(lang.DEMO_VERSION);
            else if (isBlocked("shows")) showPopupMsg(lang.LOCKED, 800);
            else {
              var b = a.SNAPS.selItem();
              if (null != b) {
                var d = a.SHOWS.selItem();
                null == d && (d = getValue("var.currentShow"));
                null != d && (getValue("var.currentShow") != d && sendMessage(E_COMMANDS.SHOW_LOAD + "^" + d), sendMessage(E_COMMANDS.SNAP_LOAD + "^" + d + "^" + b));
              }
            }
          };
          this.bSNAPSAVE = new MENUBUTTON(this);
          this.bSNAPSAVE.text = lang.SAVE;
          this.bSNAPSAVE.setPos(b, 130);
          this.bSNAPSAVE.onPress = function () {
            if (EMULATE) showPopupMsg(lang.DEMO_VERSION);
            else if (isBlocked("shows")) showPopupMsg(lang.LOCKED, 800);
            else {
              var b = a.SNAPS.selItem();
              null == b && (b = "");
              var d = getValue("var.currentShow");
              null == d || 0 == d.length
                ? showPopupMsg(lang.NO_ACTIVE_SHOW)
                : ((editOk.valueFunc = function () {
                  var a = editBox2.value;
                  null != a &&
                  0 != a.length &&
                  ((a = a.replace(/\^/g, "_")),
                    -1 != showsPage.SNAPS.items.indexOf(a)
                      ? ((confOk.valueFunc = function () {
                        sendMessage(E_COMMANDS.SNAP_SAVE + "^" + d + "^" + a);
                        showsPage.snapsListUpdate();
                        showsPage.SNAPS.clearSelection();
                        showPopupMsg(lang.SAVED, 800);
                      }),
                        (confCancel.valueFunc = function () {}),
                        showConfBox(lang.REPLACE_SNAPSHOT.format(a)))
                      : (sendMessage(E_COMMANDS.SNAP_SAVE + "^" + d + "^" + a),
                        setValue("var.currentSnapshot", a),
                        regUpdate(topWidget),
                        showsPage.SHOWS.select(d),
                        showsPage.snapsListUpdate(),
                        showsPage.SNAPS.clearSelection(),
                        showPopupMsg(lang.SAVED, 800)));
                }),
                  showEditBox2(lang.SAVE_SNAPSHOT_WITH_NAME, b));
            }
          };
          this.bSNAPREN = new MENUBUTTON(this);
          this.bSNAPREN.text = lang.RENAME;
          this.bSNAPREN.setPos(b, 180);
          this.bSNAPREN.onPress = function () {
            if (EMULATE) showPopupMsg(lang.DEMO_VERSION);
            else if (isBlocked("shows")) showPopupMsg(lang.LOCKED, 800);
            else {
              var b = a.SNAPS.selItem();
              if (null != b) {
                var d = a.SHOWS.selItem();
                null == d && (d = getValue("var.currentShow"));
                null != d &&
                0 != d.length &&
                ((editOk.valueFunc = function () {
                  var c = editBox2.value;
                  null != c &&
                  0 != c.length &&
                  ((c = c.replace(/\^/g, "_")),
                    sendMessage(E_COMMANDS.SNAP_RENAME + "^" + d + "^" + b + "^" + d + "^" + c),
                  b == getValue("var.currentSnapshot") && d == getValue("var.currentShow") && setValue("var.currentSnapshot", c),
                    a.snapsListUpdate(),
                    regUpdate(topWidget));
                }),
                  showEditBox2(lang.NEW_SNAPSHOT_NAME, b));
              }
            }
          };
          this.bSNAPDEL = new MENUBUTTON(this);
          this.bSNAPDEL.text = lang.DELETE;
          this.bSNAPDEL.setPos(b, 370);
          this.bSNAPDEL.onPress = function () {
            if (EMULATE) showPopupMsg(lang.DEMO_VERSION);
            else if (isBlocked("shows")) showPopupMsg(lang.LOCKED, 800);
            else {
              var b = a.SNAPS.selItem();
              if (b) {
                var d = getValue("var.currentShow");
                confOk.valueFunc = function () {
                  sendMessage(E_COMMANDS.SNAP_DEL + "^" + d + "^" + b);
                  a.snapsListUpdate();
                  a.SNAPS.clearSelection();
                };
                confCancel.valueFunc = function () {};
                showConfBox(lang.DELETE_SNAPSHOT.format(b));
              }
            }
          };
          this.MRESET = new MENUBUTTON(this);
          this.MRESET.setPos(40, this.SHOWS.y + this.SHOWS.h + 10);
          this.MRESET.w = 160;
          this.MRESET.h = 45;
          this.MRESET.text = lang.MIXER_RESET;
          this.MRESET.onPress = function () {
            EMULATE
              ? showPopupMsg(lang.DEMO_VERSION)
              : isBlocked()
                ? showPopupMsg(lang.LOCKED, 800)
                : ((confOk.valueFunc = function () {
                  sendMessage(E_COMMANDS.MIXER_RESET);
                }),
                  showConfBox(lang.LOAD_THE_INITIAL_MIXER_STATE));
          };
          this.FIMPORT = new MENUBUTTON(this);
          this.FIMPORT.setPos(40, this.MRESET.y + 102);
          this.FIMPORT.w = 160;
          this.FIMPORT.h = 50;
          this.FIMPORT.text = lang.IMPORT_OFFLINE_FILE;
          this.FIMPORT.onPress = function () {
            isBlocked() ? showPopupMsg(lang.LOCKED, 800) : ((confOk.valueFunc = importSnapshotFromFile), showConfBox(lang.UNSAVED_LOST_CONTINUE));
          };
          isLocal && this.FIMPORT.hide();
          this.FEXPORT = new MENUBUTTON(this);
          this.FEXPORT.setPos(220, this.MRESET.y + 102);
          this.FEXPORT.w = 160;
          this.FEXPORT.h = 50;
          this.FEXPORT.text = lang.EXPORT_OFFLINE_FILE;
          this.FEXPORT.onPress = function () {
            exportSnapshotToFile();
          };
          isLocal && this.FEXPORT.hide();
        },
        calcGeometry: function ($super) {
          $super();
        },
        paint: function () {
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, 0, this.w, this.h);
          ctx.font = font.editbox;
          ctx.textAlign = "left";
          ctx.fillStyle = color.tabTextSel;
          ctx.fillText(lang.SHOWS, 40, 46);
          ctx.fillText(lang.SNAPSHOTS, 490, 46);
          isLocal || ctx.fillText(lang.OFFLINE_IMPORT_EXPORT, this.FIMPORT.x, this.FIMPORT.y - 16);
        },
      }),
      CONFIG_PAGE = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "CONFIG_PAGE";
          this.setAnchors(0, 40, 0, 0);
          this.needClip = !0;
          this.mode = 0;
          this.color = color.red;
          this.tabButtons = [];
          this.initWidgets();
          this.setMode(0);
        },
        onShow: function () {
          if (isDefined(this.pages[this.mode])) this.pages[this.mode].onShow();
        },
        onHide: function () {
          for (var a = 0; a < this.pages.length; a++) if (this.pages[a].enabled) this.pages[a].onHide();
        },
        setMode: function (a) {
          this.mode = a;
          this.iso_page && this.iso_page.hide();
          for (a = 0; a < this.pages.length; a++) this.pages[a].hide();
          this.mode < this.pages.length && this.pages[this.mode].show();
          regUpdate(this);
        },
        nextMode: function () {
          this.mode == this.pages.length - 1 ? this.setMode(0) : this.setMode(this.mode + 1);
        },
        initWidgets: function () {
          for (var a = [lang.GLOBAL, lang.LOCAL, lang.GUI_PERF, lang.UTILITY], b = 0; b < a.length; b++) {
            var c = new TabButton(this);
            c.color = c.textColor = "hsl(" + (45 * (b + 1) + 200) + ",50%,60%)";
            c.mode = b;
            c.text = a[b];
            c.setSize(100, 30);
            this.tabButtons.push(c);
          }
          this.pages = [];
          this.pages.push(new CONFIG_PAGE_GLOBAL(this));
          this.pages.push(new CONFIG_PAGE_LOCAL(this));
          this.pages.push(new CONFIG_PAGE_PERF(this));
          this.pages.push(new CONFIG_PAGE_UTIL(this));
        },
        calcGeometry: function () {
          this.w = this.parent.w - this.x;
          this.h = this.parent.h - this.y;
          for (var a = 0; a < this.tabButtons.length; a++) this.tabButtons[a].setPos(this.w - (this.tabButtons[a].w + 1) * (this.tabButtons.length - a), 5);
        },
        paint: function () {
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, 0, this.w, this.h);
          ctx.fillStyle = this.tabButtons[this.mode].color;
          ctx.fillRect(4, 35, this.w - 4, 2);
        },
      }),
      CONFIG_PAGE_GLOBAL = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "CONFIG";
          this.y = 40;
          this.enabled = !1;
          this.offsetY = 0;
          this.hh = this.maxY = 900;
          this.needMoveEvt = this.needClip = !0;
          this.color = color.red;
          this.scrollID = -1;
          this.mouseCaptured = !1;
          this.initWidgets();
        },
        setOffset: function (a) {
          this.offsetY = bound(a | 0, 0, this.maxY);
          regUpdate(this);
        },
        onShow: function () {
          this.setOffset(0);
        },
        onDown: function (a, b, c) {
          3 < mouseTargets.length ||
          (isDefined(tHash[c]) && 3 < tHash[c].length) ||
          ((this.mouseCaptured = !0), (this.lastPressPoint = this.pressPoint), (this.pressPoint = [a, b + this.offsetY]), (this.ppy = this.offsetY + b), (this.d = this.offsetY), (this.scrollID = c));
        },
        onMove: function (a, b, c) {
          this.scrollID == c && this.mouseCaptured && this.setOffset(this.ppy - b);
        },
        onUp: function (a) {
          if (this.mouseCaptured) {
            this.mouseCaptured = !1;
            var b = Date.now(),
              c = Math.abs(this.lastPressPoint[0] - this.pressPoint[0]),
              d = Math.abs(this.lastPressPoint[1] - this.pressPoint[1]),
              f = Math.abs(this.d - this.offsetY);
            3 < mouseTargets.length ||
            (isDefined(tHash[a]) && 3 < tHash[a].length) ||
            (10 > f && 30 > c && 30 > d && b - this.lastClickTime < DBL_CLK_TIME ? (this.onDouble(), (this.lastClickTime = b - DBL_CLK_TIME)) : (this.lastClickTime = 10 < f ? 0 : b));
          }
        },
        onDouble: function () {
          setMode(E_MODE.MIX);
        },
        onWheel: function (a, b) {
          clearInterval(ticker);
          this.setOffset(this.offsetY - Math.round(a / 3));
        },
        initWidgets: function () {
          var a = 0;
          isLocal &&
          ((this.SETTIME = new MENUBUTTON(this)),
            this.SETTIME.setPos(900, 60),
            (this.SETTIME.w = 140),
            (this.SETTIME.text = lang.SET_TIME),
            (this.SETTIME.onPress = function () {
              editOk.valueFunc = function () {
                var a = editBox2.value;
                if (a) {
                  var b = a.split(":"),
                    a = parseInt(b[0]);
                  if (isNaN(a) || 24 <= a) showPopupMsg("WRONG TIME");
                  else {
                    var c = parseInt(b[1]);
                    if (isNaN(c) || 60 <= c) showPopupMsg("WRONG TIME");
                    else {
                      b = parseInt(b[2]);
                      if (isNaN(b) || 60 <= b) b = 0;
                      setSrvTime(null, null, null, a, c, b, null);
                    }
                  }
                }
              };
              showEditBox2(lang.SET_TIME_TIP, "HH:MM:SS");
            }),
            (this.SETDATE = new MENUBUTTON(this)),
            this.SETDATE.setPos(900, 100),
            (this.SETDATE.w = 140),
            (this.SETDATE.text = lang.SET_DATE),
            (this.SETDATE.onPress = function () {
              editOk.valueFunc = function () {
                var a = editBox2.value;
                if (a) {
                  var b = a.split("-");
                  if (3 != b.length) showPopupMsg(lang.WRONG_DATE);
                  else if (((a = parseInt(b[0])), isNaN(a))) showPopupMsg(lang.WRONG_DATE);
                  else {
                    1e3 > a && (a += 2e3);
                    var c = parseInt(b[1]);
                    isNaN(c) || 12 < c ? showPopupMsg(lang.WRONG_DATE) : ((b = parseInt(b[2])), isNaN(b) || 31 < b ? showPopupMsg(lang.WRONG_DATE) : setSrvTime(a, c, b, null, null, null, null));
                  }
                }
              };
              showEditBox2(lang.SET_DATE_TIP, "YYYY-MM-DD");
            }));
          HAVE_HP &&
          ((this.HPOUT = new SWITCHBOX(this)),
            (this.HPOUT.label = lang.HEADPHONES_OUT + ":"),
            this.HPOUT.setPos(250, 20 + 50 * a++),
            this.HPOUT.setItemWidth(120),
            this.HPOUT.setItems([lang.MASTER + "/" + lang.SOLO, lang.AUX]),
            (this.HPOUT.getState = function () {
              this.state = getValue("var.hpaux");
            }),
            (this.HPOUT.valueFunc = function () {
              isBlocked("gsettings") ? showPopupMsg(lang.LOCKED, 800) : (setValue("var.hpaux", this.state), syncHPAUX());
            }));
          this.SOLOROUTE = new SWITCHBOX(this);
          this.SOLOROUTE.label = lang.SOLO_ROUTING + ":";
          this.SOLOROUTE.setPos(250, 20 + 50 * a++);
          this.SOLOROUTE.setItemWidth(120);
          this.SOLOROUTE.setItems([lang.HEADPHONES, lang.MASTER + " + " + lang.HP]);
          this.SOLOROUTE.getState = function () {
            this.state = getValue("settings.soloMode");
            1 != getValue("var.hpaux") && IS_UI_24 ? (this.items = [lang.HEADPHONES, lang.MASTER + " + " + lang.HP]) : (this.items = [lang.HEADPHONES, lang.MASTER]);
          };
          this.SOLOROUTE.valueFunc = function () {
            isBlocked("gsettings") ? showPopupMsg(lang.LOCKED, 800) : setValue("settings.soloMode", this.state);
          };
          IS_UI_24 &&
          ((this.HPSIGNAL = new SWITCHBOX(this)),
            (this.HPSIGNAL.label = lang.HEADPHONE_SIGNAL_DIRECTION + ":"),
            this.HPSIGNAL.setPos(250, 20 + 50 * a++),
            this.HPSIGNAL.setItems([lang.L + " / " + lang.R, lang.R + " / " + lang.L]),
            this.HPSIGNAL.setItemWidth(120),
            (this.HPSIGNAL.getState = function () {
              this.state = getValue("settings.hpswap");
            }),
            (this.HPSIGNAL.valueFunc = function () {
              isBlocked("gsettings") ? showPopupMsg(lang.LOCKED, 800) : setValue("settings.hpswap", this.state);
            }));
          this.SOLOMODE = new SWITCHBOX(this);
          this.SOLOMODE.label = lang.SOLO_MODE + ":";
          this.SOLOMODE.setPos(250, 20 + 50 * a++);
          this.SOLOMODE.setItems([lang.SINGLE, lang.MULTIPLE]);
          this.SOLOMODE.setItemWidth(120);
          this.SOLOMODE.getState = function () {
            this.state = getValue("settings.multiplesolo");
          };
          this.SOLOMODE.valueFunc = function () {
            isBlocked("gsettings") ? showPopupMsg(lang.LOCKED, 800) : setValue("settings.multiplesolo", this.state);
          };
          this.SOLOTYPE = new SWITCHBOX(this);
          this.SOLOTYPE.label = lang.SOLO_TYPE + ":";
          this.SOLOTYPE.setPos(250, 20 + 50 * a++);
          this.SOLOTYPE.setItems([lang.AFL, lang.PFL]);
          this.SOLOTYPE.setItemWidth(120);
          this.SOLOTYPE.getState = function () {
            this.state = getValue("settings.solotype");
          };
          this.SOLOTYPE.valueFunc = function () {
            isBlocked("gsettings") ? showPopupMsg(lang.LOCKED, 800) : setValue("settings.solotype", this.state);
          };
          curSetup.rec &&
          ((this.RECMODE = new SWITCHBOX(this)),
            (this.RECMODE.label = lang.RECORD_MODE + ":"),
            this.RECMODE.setPos(250, 20 + 50 * a++),
            this.RECMODE.setItems([lang.BIT_32, lang.BIT_24, lang.BIT_16]),
            this.RECMODE.setItemWidth(80),
            (this.RECMODE.getState = function () {
              this.state = getValue("settings.recordMode");
            }),
            (this.RECMODE.valueFunc = function () {
              isBlocked("gsettings") ? showPopupMsg(lang.LOCKED, 800) : setValue("settings.recordMode", this.state);
            }),
          IS_UI_24 &&
          ((this.MTKMODE = new SWITCHBOX(this)),
            (this.MTKMODE.label = lang.MULTITRACK_MODE + ":"),
            this.MTKMODE.setPos(250, 20 + 50 * a++),
            this.MTKMODE.setItems(["FLAC 24", "FLAC 16", "WAV 24", "WAV 16"]),
            this.MTKMODE.setItemWidth(80),
            (this.MTKMODE.getState = function () {
              this.state = getValue("settings.mtk.format");
            }),
            (this.MTKMODE.valueFunc = function () {
              isBlocked("gsettings") ? showPopupMsg(lang.LOCKED, 800) : setValue("settings.mtk.format", this.state);
            })));
          this.AUXMUTE = new SWITCHBOX(this);
          this.AUXMUTE.label = lang.AUX_SEND_MUTE_INHERITANCE + ":";
          this.AUXMUTE.setPos(250, 20 + 50 * a++);
          this.AUXMUTE.setItems([lang.OFF, lang.ON]);
          this.AUXMUTE.setItemWidth(120);
          this.AUXMUTE.getState = function () {
            this.state = getValue("settings.auxmutelink");
          };
          this.AUXMUTE.valueFunc = function () {
            isBlocked("gsettings") ? showPopupMsg(lang.LOCKED, 800) : setValue("settings.auxmutelink", this.state);
          };
          IS_UI_24
            ? ((this.MTXSENDP = new SWITCHBOX(this)),
              (this.MTXSENDP.label = lang.MASTER_MTX_SEND_POINT + ":"),
              this.MTXSENDP.setPos(250, 20 + 50 * a++),
              this.MTXSENDP.setItems([lang.PRE, lang.POST]),
              this.MTXSENDP.setItemWidth(120),
              (this.MTXSENDP.getState = function () {
                this.state = getValue("settings.mtxsendpoint");
              }),
              (this.MTXSENDP.valueFunc = function () {
                isBlocked("gsettings") ? showPopupMsg(lang.LOCKED, 800) : setValue("settings.mtxsendpoint", this.state);
              }))
            : ((this.PREPROC = new SWITCHBOX(this)),
              (this.PREPROC.label = lang.GLOBAL_PRE_FADE_AUX_SEND_POINT + ":"),
              this.PREPROC.setPos(250, 20 + 50 * a++),
              this.PREPROC.setItems([lang.PRE_PROCESSING, lang.POST_PROCESSING]),
              this.PREPROC.setItemWidth(120),
              (this.PREPROC.getState = function () {
                this.state = getValue("settings.auxsendpoint");
              }),
              (this.PREPROC.valueFunc = function () {
                isBlocked("gsettings") ? showPopupMsg(lang.LOCKED, 800) : setValue("settings.auxsendpoint", this.state);
              }));
          IS_UI_24 &&
          ((this.UNDERSCAN = new SWITCHBOX(this)),
            (this.UNDERSCAN.label = lang.HDMI_UNDERSCAN + ":"),
            this.UNDERSCAN.setPos(250, 20 + 50 * a++),
            this.UNDERSCAN.setItems([lang.OFF, lang.ON]),
            this.UNDERSCAN.setItemWidth(120),
            (this.UNDERSCAN.getState = function () {
              this.state = getValue("settings.underscan");
            }),
            (this.UNDERSCAN.valueFunc = function () {
              isBlocked("gsettings") ? showPopupMsg(lang.LOCKED, 800) : setValue("settings.underscan", this.state);
            }),
            (this.CLOCK = new SWITCHBOX(this)),
            (this.CLOCK.label = lang.CLOCK_SOURCE + ":"),
            this.CLOCK.setPos(250, 20 + 50 * a++),
            this.CLOCK.setItems([lang.INTERNAL, lang.CASCADE]),
            this.CLOCK.setItemWidth(120),
            (this.CLOCK.getState = function () {
              this.state = getValue("settings.clock");
            }),
            (this.CLOCK.valueFunc = function () {
              isBlocked("gsettings") ? showPopupMsg(lang.LOCKED, 800) : setValue("settings.clock", this.state);
            }));
          var b = [0, 1, 2, 3, 4],
            c = [lang.MUTE_FX, lang.MUTE_ALL, lang.PLAY, lang.RECORD, lang.TAP_TEMPO];
          IS_UI_24 && (c.push(lang.MTK_PLAY), c.push(lang.MTK_RECORD), b.push(5), b.push(6));
          this.PEDAL = new RADIO(this);
          this.PEDAL.setPos(760, 50);
          this.PEDAL.setLabels(c);
          this.PEDAL.setKey("settings.footswitchfunc");
          this.PEDAL.regKey("settings.footswitchfunc");
          this.PEDAL.setItems(b);
          IS_UI_24 &&
          ((this.SOLO_VOL = new EQHSlider2(this)),
            (this.SOLO_VOL.disableWheel = !0),
            (this.SOLO_VOL.w = 570),
            (this.SOLO_VOL.defaultValue = -1),
            (this.SOLO_VOL.haveMarks = !0),
            this.SOLO_VOL.setKey("settings.solovol"),
            this.SOLO_VOL.regKey("settings.solovol"),
            this.SOLO_VOL.setAnchors(250, 20 + 50 * a++, null, null),
            (this.HP_L = new EQHSlider2(this)),
            (this.HP_L.disableWheel = !0),
            (this.HP_L.w = 570),
            (this.HP_L.defaultValue = -1),
            (this.HP_L.haveMarks = !0),
            this.HP_L.setKey("settings.hpvol.0"),
            this.HP_L.regKey("settings.hpvol.0"),
            this.HP_L.setAnchors(250, 50 * a++ + 26, null, null),
            (this.HP_R = new EQHSlider2(this)),
            (this.HP_R.disableWheel = !0),
            (this.HP_R.w = 570),
            (this.HP_R.defaultValue = -1),
            (this.HP_R.haveMarks = !0),
            this.HP_R.setKey("settings.hpvol.1"),
            this.HP_R.regKey("settings.hpvol.1"),
            this.HP_R.setAnchors(250, 50 * a++ + 32, null, null));
          for (b = 0; b < this.widgets.length; b++) this.widgets[b].labelColor = "hsl(" + 20 * b + ",30%,78%)";
          this.hh = 20 + 50 * (a + 0.45);
        },
        calcGeometry: function () {
          this.w = this.parent.w - this.x;
          this.h = this.parent.h - this.y;
          this.maxY = this.hh - this.h;
          0 > this.maxY && (this.maxY = 0);
          this.offsetY = bound(this.offsetY, 0, this.maxY);
        },
        paint: function () {
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, this.offsetY, this.w, this.h);
          ctx.textAlign = "right";
          var a = { shadow: Shadow.main };
          IS_UI_24 &&
          ((ctx.font = font.settings),
            (ctx.fillStyle = "hsl(180,30%,78%)"),
          this.SOLO_VOL && ctx.drawText(lang.SOLO_LEVEL + ":", this.SOLO_VOL.x - 25, this.SOLO_VOL.y + 29, a),
            (ctx.fillStyle = "hsl(200,30%,78%)"),
            ctx.drawText(lang.HP_VOLUME.format(1) + ":", this.HP_L.x - 25, this.HP_L.y + 29, a),
            (ctx.fillStyle = "hsl(220,30%,78%)"),
            ctx.drawText(lang.HP_VOLUME.format(2) + ":", this.HP_R.x - 25, this.HP_R.y + 29, a));
          ctx.font = font.editbox;
          ctx.fillStyle = color.yellow;
          this.PEDAL && ctx.drawText(lang.PEDAL_FUNCTION, this.PEDAL.x + 34, this.PEDAL.y - 12, a);
          0 < this.maxY &&
          ((ctx.fillStyle = "rgba(255,255,255,0.07)"),
            ctx.fillRoundRect(this.w - 11, this.offsetY + 2, 10, this.h - 4, 4),
            (ctx.fillStyle = "rgba(255,255,255,0.4)"),
            (a = (this.h / (this.h + this.maxY)) * (this.h - 4)),
            ctx.fillRoundRect(this.w - 11, this.offsetY + ((2 + (this.offsetY / this.maxY) * (this.h - 4 - a)) | 0), 10, a, 4));
        },
      }),
      CONFIG_PAGE_LOCAL = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "CONFIG";
          this.y = 40;
          this.enabled = !1;
          this.offsetY = 0;
          this.hh = this.maxY = 900;
          this.needMoveEvt = this.needClip = !0;
          this.color = color.red;
          this.scrollID = -1;
          this.mouseCaptured = !1;
          this.initWidgets();
        },
        setOffset: function (a) {
          this.offsetY = bound(a | 0, 0, this.maxY);
          regUpdate(this);
        },
        onShow: function () {
          this.setOffset(0);
        },
        onDown: function (a, b, c) {
          3 < mouseTargets.length ||
          (isDefined(tHash[c]) && 3 < tHash[c].length) ||
          ((this.mouseCaptured = !0), (this.lastPressPoint = this.pressPoint), (this.pressPoint = [a, b + this.offsetY]), (this.ppy = this.offsetY + b), (this.d = this.offsetY), (this.scrollID = c));
        },
        onMove: function (a, b, c) {
          this.scrollID == c && this.mouseCaptured && this.setOffset(this.ppy - b);
        },
        onUp: function (a) {
          if (this.mouseCaptured) {
            this.mouseCaptured = !1;
            var b = Date.now(),
              c = Math.abs(this.lastPressPoint[0] - this.pressPoint[0]),
              d = Math.abs(this.lastPressPoint[1] - this.pressPoint[1]),
              f = Math.abs(this.d - this.offsetY);
            3 < mouseTargets.length ||
            (isDefined(tHash[a]) && 3 < tHash[a].length) ||
            (10 > f && 30 > c && 30 > d && b - this.lastClickTime < DBL_CLK_TIME ? (this.onDouble(), (this.lastClickTime = b - DBL_CLK_TIME)) : (this.lastClickTime = 10 < f ? 0 : b));
          }
        },
        onDouble: function () {
          setMode(E_MODE.MIX);
        },
        onWheel: function (a, b) {
          clearInterval(ticker);
          this.setOffset(this.offsetY - Math.round(a / 3));
        },
        initWidgets: function () {
          var a = 0,
            b = this;
          HAVE_SYNC &&
          ((this.SYNC = new SWITCHBOX(this)),
            this.SYNC.setPos(638, 45 + 50 * a),
            this.SYNC.setItems([lang.OFF, lang.ON]),
            this.SYNC.setItemWidth(90),
            (this.SYNC.getState = function () {
              this.state = settings.sync ? 1 : 0;
            }),
            (this.SYNC.valueFunc = function () {
              settingsStorage.set("sync", 1 == this.state);
            }),
            (this.SYNC_ID = new INPUTBOX(this)),
            this.SYNC_ID.setPos(638, 45 + 50 * (a + 1)),
            (this.SYNC_ID.label = lang.SYNC_ID + ":"),
            (this.SYNC_ID.w = this.SYNC.w + 1),
            (this.SYNC_ID.getState = function () {
              this.text = settings.sync_id;
            }),
            (this.SYNC_ID.valueFunc = function (a) {
              settingsStorage.set("sync_id", a);
              regUpdate(this);
            }),
          IS_UI_24 &&
          ((this.SYNC_VCA = new SWITCHBOX(this)),
            this.SYNC_VCA.setPos(638, 45 + 50 * (a + 2)),
            this.SYNC_VCA.setItems([lang.OFF, lang.ON]),
            this.SYNC_VCA.setItemWidth(90),
            (this.SYNC_VCA.label = lang.SYNC_VCA_SPILL + ":"),
            (this.SYNC_VCA.getState = function () {
              this.state = settings.sync_vca ? 1 : 0;
            }),
            (this.SYNC_VCA.valueFunc = function () {
              settingsStorage.set("sync_vca", 1 == this.state);
            })));
          this.MASTERLOCK = new SWITCHBOX(this);
          this.MASTERLOCK.label = lang.MASTER_LOCK + ":";
          this.MASTERLOCK.setPos(250, 20 + 50 * a++);
          this.MASTERLOCK.setItems([lang.OFF, lang.ON]);
          this.MASTERLOCK.setItemWidth(90);
          this.MASTERLOCK.getState = function () {
            this.state = settings.masterLock ? 1 : 0;
          };
          this.MASTERLOCK.valueFunc = function () {
            settingsStorage.set("masterLock", 1 == this.state);
            masterWidget.sl.locked = 1 == this.state;
            regUpdate(masterWidget);
          };
          SHOW_WIP &&
          ((this.CPA = new SWITCHBOX(this)),
            (this.CPA.label = lang.CPA + ":"),
            this.CPA.setPos(250, 20 + 50 * a++),
            this.CPA.setItems([lang.OFF, lang.ON]),
            this.CPA.setItemWidth(120),
            (this.CPA.getState = function () {
              this.state = settings.cpa ? 1 : 0;
            }),
            (this.CPA.valueFunc = function () {
              settingsStorage.set("cpa", 1 == this.state);
            }));
          IS_UI_24 &&
          ((this.BIGD = new SWITCHBOX(this)),
            (this.BIGD.label = lang.BIG_DESKTOP_MODE + ":"),
            this.BIGD.setPos(250, 20 + 50 * a++),
            this.BIGD.setItems([lang.OFF, lang.ON]),
            this.BIGD.setItemWidth(120),
            (this.BIGD.getState = function () {
              this.state = settings.bigD ? 1 : 0;
            }),
            (this.BIGD.valueFunc = function () {
              settingsStorage.put("bigD", 1 == this.state);
              this.state && settingsStorage.put("bigSlideOut", !0);
              confOk.valueFunc = function () {
                location.reload();
              };
              showConfBox(lang.RELOAD_UI + "<br>" + lang.WARNING_BIGD);
            }),
            (this.BIGSO = new SWITCHBOX(this)),
            (this.BIGSO.label = lang.BIGGER_SLIDEOUT + ":"),
            this.BIGSO.setPos(250, 20 + 50 * a++),
            this.BIGSO.setItems([lang.OFF, lang.ON]),
            this.BIGSO.setItemWidth(120),
            (this.BIGSO.getState = function () {
              this.state = settings.bigSlideOut ? 1 : 0;
            }),
            (this.BIGSO.valueFunc = function () {
              settingsStorage.set("bigSlideOut", 1 == this.state);
              settingsStorage.save();
              confOk.valueFunc = function () {
                location.reload();
              };
              showConfBox(lang.RELOAD_UI);
            }),
            (this.STRIPEQ = new SWITCHBOX(this)),
            (this.STRIPEQ.label = lang.EQ_ON_CHANNEL_LED + ":"),
            this.STRIPEQ.setPos(250, 20 + 50 * a++),
            this.STRIPEQ.setItems([lang.OFF, lang.ON, lang.BOTH]),
            this.STRIPEQ.setItemWidth(80),
            (this.STRIPEQ.getState = function () {
              this.state = settings.eqStrip;
            }),
            (this.STRIPEQ.valueFunc = function () {
              settingsStorage.set("eqStrip", this.state);
              regUpdate(masterWidget);
            }));
          this.PINSO = new SWITCHBOX(this);
          this.PINSO.label = lang.PIN_SLIDEOUT_IN_MIX_MODE + ":";
          this.PINSO.setPos(250, 20 + 50 * a++);
          this.PINSO.setItems([lang.OFF, lang.ON]);
          this.PINSO.getState = function () {
            this.state = settings.pinSlideOut ? 1 : 0;
          };
          this.PINSO.valueFunc = function () {
            settingsStorage.set("pinSlideOut", 1 == this.state);
          };
          this.PINSOX = new SWITCHBOX(this);
          this.PINSOX.label = lang.PIN_SO_FOR_AUX_FX_SENDS + ":";
          this.PINSOX.setPos(250, 20 + 50 * a++);
          this.PINSOX.setItems([lang.OFF, lang.ON]);
          this.PINSOX.getState = function () {
            this.state = settings.pinSlideOutX ? 1 : 0;
          };
          this.PINSOX.valueFunc = function () {
            settingsStorage.set("pinSlideOutX", 1 == this.state);
          };
          this.PINM = new SWITCHBOX(this);
          this.PINM.label = lang.PIN_MASTER_TO_SLIDEOUT + ":";
          this.PINM.setPos(250, 20 + 50 * a++);
          this.PINM.setItems([lang.OFF, lang.ON]);
          this.PINM.getState = function () {
            this.state = settings.masterHide ? 1 : 0;
          };
          this.PINM.valueFunc = function () {
            settingsStorage.set("masterHide", 1 == this.state);
          };
          this.NUDGE = new SWITCHBOX(this);
          this.NUDGE.label = lang.HOLD_FADER_FOR_FINE_TUNING + ":";
          this.NUDGE.setPos(250, 20 + 50 * a++);
          this.NUDGE.setItems([lang.OFF, lang.ON]);
          this.NUDGE.getState = function () {
            this.state = settings.nudge ? 1 : 0;
          };
          this.NUDGE.valueFunc = function () {
            settingsStorage.set("nudge", 1 == this.state);
          };
          this.MRTA = new SWITCHBOX(this);
          this.MRTA.label = lang.MASTER_OTHER_RTA + ":";
          this.MRTA.setPos(250, 20 + 50 * a++);
          this.MRTA.setItems([lang.OFF, lang.ON]);
          this.MRTA.getState = function () {
            this.state = settings.masterOtherRTA ? 1 : 0;
          };
          this.MRTA.valueFunc = function () {
            settingsStorage.set("masterOtherRTA", 1 == this.state);
          };
          this.COPYGAIN = new SWITCHBOX(this);
          this.COPYGAIN.label = lang.COPY_INCLUDES_GAIN + ":";
          this.COPYGAIN.setPos(250, 20 + 50 * a++);
          this.COPYGAIN.setItems([lang.OFF, lang.ON]);
          this.COPYGAIN.getState = function () {
            this.state = settings.copyGainToo ? 1 : 0;
          };
          this.COPYGAIN.valueFunc = function () {
            settingsStorage.set("copyGainToo", 1 == this.state);
          };
          a += 0.5;
          this.VUQUANTIZE = new SWITCHBOX(this);
          this.VUQUANTIZE.label = lang.METER_QUANTISATION + ":";
          this.VUQUANTIZE.setPos(250, 20 + 50 * a++);
          this.VUQUANTIZE.setItems([lang.OFF, lang.ON]);
          this.VUQUANTIZE.getState = function () {
            this.state = settings.vuquantise ? 1 : 0;
          };
          this.VUQUANTIZE.valueFunc = function () {
            settingsStorage.set("vuquantise", 1 == this.state);
          };
          this.LANES = new SWITCHBOX(this);
          this.LANES.label = lang.FADER_GLOW + ":";
          this.LANES.setPos(250, 20 + 50 * a++);
          this.LANES.setItems([lang.OFF, lang.THIN, lang.NORM]);
          this.LANES.getState = function () {
            this.state = settings.lanes;
          };
          this.LANES.valueFunc = function () {
            settingsStorage.set("lanes", this.state);
            regUpdate(masterWidget);
            allStrips.forEach(function (a) {
              a.UPDATE_CACHE();
            });
          };
          this.DISABLEVUGHOST = new SWITCHBOX(this);
          this.DISABLEVUGHOST.label = lang.DISABLE_VU_INPUT_LEVEL + ":";
          this.DISABLEVUGHOST.setPos(250, 20 + 50 * a++);
          this.DISABLEVUGHOST.setItems([lang.OFF, lang.ON]);
          this.DISABLEVUGHOST.getState = function () {
            this.state = settings.disableVUghost ? 1 : 0;
          };
          this.DISABLEVUGHOST.valueFunc = function () {
            settingsStorage.set("disableVUghost", 1 == this.state);
          };
          this.DISABLEVUPEAK = new SWITCHBOX(this);
          this.DISABLEVUPEAK.label = lang.DISABLE_VU_PEAK + ":";
          this.DISABLEVUPEAK.setPos(250, 20 + 50 * a++);
          this.DISABLEVUPEAK.setItems([lang.OFF, lang.ON]);
          this.DISABLEVUPEAK.getState = function () {
            this.state = settings.disableVUpeak ? 1 : 0;
          };
          this.DISABLEVUPEAK.valueFunc = function () {
            settingsStorage.set("disableVUpeak", 1 == this.state);
          };
          this.DIMVU = new SWITCHBOX(this);
          this.DIMVU.label = lang.DIM_LED_METERS + ":";
          this.DIMVU.setPos(250, 20 + 50 * a++);
          this.DIMVU.setItems([lang.OFF, lang.ON]);
          this.DIMVU.getState = function () {
            this.state = settings.dimVUs ? 1 : 0;
          };
          this.DIMVU.valueFunc = function () {
            settingsStorage.set("dimVUs", 1 == this.state);
            regUpdate(masterWidget);
          };
          this.DISABLEVU2 = new SWITCHBOX(this);
          this.DISABLEVU2.label = lang.HIDE_COMP_GATE + ":";
          this.DISABLEVU2.setPos(250, 20 + 50 * a++);
          this.DISABLEVU2.setItems([lang.OFF, lang.ON]);
          this.DISABLEVU2.getState = function () {
            this.state = settings.disableVUs2 ? 1 : 0;
          };
          this.DISABLEVU2.valueFunc = function () {
            settingsStorage.put("disableVUs2", 1 == this.state);
            confOk.valueFunc = function () {
              location.reload();
            };
            showConfBox(lang.RELOAD_UI);
          };
          isLocal ||
          ((this.PATTERNED = new SWITCHBOX(this)),
            (this.PATTERNED.label = lang.PATTERNED_BACKGROUND + ":"),
            this.PATTERNED.setPos(250, 20 + 50 * a++),
            this.PATTERNED.setItems([lang.OFF, lang.ON]),
            (this.PATTERNED.getState = function () {
              this.state = settings.patterned ? 1 : 0;
            }),
            (this.PATTERNED.valueFunc = function () {
              settingsStorage.set("patterned", 1 == this.state);
              settingsStorage.save();
              confOk.valueFunc = function () {
                location.reload();
              };
              showConfBox(lang.RELOAD_UI);
            }));
          a += 0.5;
          this.KINETIC = new SWITCHBOX(this);
          this.KINETIC.label = lang.KINETIC_SCROLL + ":";
          this.KINETIC.setPos(250, 20 + 50 * a++);
          this.KINETIC.setItems([lang.OFF, lang.ON]);
          this.KINETIC.getState = function () {
            this.state = settings.kinetic ? 0 : 1;
          };
          this.KINETIC.valueFunc = function () {
            settingsStorage.set("kinetic", 0 == this.state);
          };
          this.SWIPE = new SWITCHBOX(this);
          this.SWIPE.label = lang.MIXER_SCROLLING + ":";
          this.SWIPE.setPos(250, 20 + 50 * a++);
          this.SWIPE.setItems([lang.ONE_FINGER, lang.TWO_FINGERS]);
          this.SWIPE.setItemWidth(90);
          this.SWIPE.getState = function () {
            this.state = settings.oneFingerScroll ? 0 : 1;
          };
          this.SWIPE.valueFunc = function () {
            settingsStorage.set("oneFingerScroll", 0 == this.state);
          };
          this.MOREMEPORTRAIT = new SWITCHBOX(this);
          this.MOREMEPORTRAIT.label = lang.MOREME_PORTRAIT_MODE + ":";
          this.MOREMEPORTRAIT.setPos(250, 20 + 50 * a++);
          this.MOREMEPORTRAIT.setItems([lang.OFF, lang.ON]);
          this.MOREMEPORTRAIT.getState = function () {
            this.state = settings.moremeportrait ? 1 : 0;
          };
          this.MOREMEPORTRAIT.valueFunc = function () {
            settingsStorage.set("moremeportrait", 1 == this.state);
            settingsStorage.save();
          };
          for (
            var c = [
                this.MASTERLOCK,
                this.NUDGE,
                this.MRTA,
                this.COPYGAIN,
                this.VUQUANTIZE,
                this.LANES,
                this.DISABLEVU2,
                this.DISABLEVUGHOST,
                this.DISABLEVUPEAK,
                this.DIMVU,
                this.PINSO,
                this.PINSOX,
                this.PINM,
                this.KINETIC,
                this.SWIPE,
                this.PATTERNED,
                this.MOREMEPORTRAIT,
              ],
              d = 0;
            d < c.length;
            d++
          )
            isDefined(c[d]) && c[d].setItemWidth(120);
          this.LANES.setItemWidth(80);
          for (d = 0; d < this.widgets.length; d++) this.widgets[d].labelColor = "hsl(" + 25 * d + ",30%,78%)";
          var c = [lang.NEW_SNAPSHOT, lang.UPDATE_CURRENT_SNAPSHOT, lang.NEXT_SNAPSHOT, lang.PREVIOUS_SNAPSHOT, lang.PLAY],
            f = [E_FFUNC.NEWSNAP, E_FFUNC.UPDCURSNAP, E_FFUNC.NEXT_SNAP, E_FFUNC.PREV_SNAP, E_FFUNC.PLAY];
          curSetup.rec && (c.push(lang.RECORD), f.push(E_FFUNC.REC));
          HAVE_MTK && (c.push(lang.MTK_PLAY, lang.MTK_RECORD), f.push(E_FFUNC.MTK_PLAY, E_FFUNC.MTK_REC));
          c.push(lang.MUTE_ALL, lang.DIM);
          f.push(E_FFUNC.MUTE_ALL, E_FFUNC.DIM);
          for (var e = [], d = 0; d < c.length; d++) e.push("");
          this.F1FUNC = new RADIO(this);
          this.F1FUNC.setPos(730, this.MASTERLOCK.y + 220);
          this.F1FUNC.setLabels(c);
          this.F1FUNC.getState = function () {
            var a = f.indexOf(settings.f1func);
            -1 == a && (settingsStorage.set("f1func", E_FFUNC.PLAY), (a = f.indexOf(settings.f1func)));
            this.state = a;
          };
          this.F1FUNC.onSelect = function () {
            settingsStorage.set("f1func", f[this.state]);
            prepareF1F2();
          };
          this.F2FUNC = new RADIO(this);
          this.F2FUNC.setPos(790, this.MASTERLOCK.y + 220);
          this.F2FUNC.setLabels(e);
          this.F2FUNC.getState = function () {
            var a = f.indexOf(settings.f2func);
            -1 == a && (settingsStorage.set("f1func", E_FFUNC.PLAY), (a = f.indexOf(settings.f2func)));
            this.state = a;
          };
          this.F2FUNC.onSelect = function () {
            settingsStorage.set("f2func", f[this.state]);
            prepareF1F2();
          };
          this.LANG = new RADIO(this);
          this.LANG.setPos(730, this.F1FUNC.y + 40 * c.length + 70);
          this.LANG.setLabels([langBase.en.lang, langBase.cn.lang]);
          this.LANG.getState = function () {
            switch (settings.lang) {
              case "en":
                this.state = 0;
                break;
              case "cn":
                this.state = 1;
                break;
              case "de":
                this.state = 2;
                break;
              case "fr":
                this.state = 3;
                break;
              case "es":
                this.state = 4;
                break;
              case "ru":
                this.state = 5;
            }
          };
          this.LANG.onSelect = function () {
            var a = "en";
            switch (this.state) {
              case 0:
                a = "en";
                break;
              case 1:
                a = "cn";
                break;
              case 2:
                a = "de";
                break;
              case 3:
                a = "fr";
                break;
              case 4:
                a = "es";
                break;
              case 5:
                a = "ru";
            }
            settingsStorage.set("lang", a);
            settingsStorage.save();
            confOk.valueFunc = function () {
              location.reload();
            };
            showConfBox(lang.RELOAD_UI);
          };
          a += 0.5;
          this.preset = new MENUBUTTON(this);
          this.preset.setSize(240, 29);
          this.preset.setAnchors(250, 20 + 50 * a++);
          this.preset.text = lang.LOCAL_SETTINGS_PRESETS;
          this.preset.color = color.red;
          this.preset.onPress = function () {
            b.showPresets();
          };
          this.reset = new MENUBUTTON(this);
          this.reset.setSize(240, 29);
          this.reset.setAnchors(250, 20 + 50 * a++);
          this.reset.text = lang.RESET_LOCAL_SETTINGS;
          this.reset.color = color.red;
          this.reset.onPress = function () {
            isBlocked("gsettings")
              ? showPopupMsg(lang.LOCKED, 700)
              : ((confOk.valueFunc = function () {
                localStorage.clear();
                location.reload();
              }),
                showConfBox(lang.RESET_LOCAL_SETTINGS));
          };
          this.hh = 20 + 50 * a;
        },
        showPresets: function () {
          this.menu = new PRESET_MENU2(null, "ux", this, this.color);
          regUpdate(this.menu);
        },
        savePreset: function (a) {
          return settings;
        },
        loadPreset: function (a, b) {
          if (isString(a)) return showPopupMsg(lang.ERROR), !1;
          settings = Object.extend(settings, a);
          settingsStorage.save();
          confOk.valueFunc = function () {
            location.reload();
          };
          showConfBox(lang.RELOAD_UI);
          drawAll();
          return !0;
        },
        calcGeometry: function () {
          this.w = this.parent.w - this.x;
          this.h = this.parent.h - this.y;
          this.maxY = this.hh - this.h;
          0 > this.maxY && (this.maxY = 0);
          this.offsetY = bound(this.offsetY, 0, this.maxY);
        },
        paint: function () {
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, this.offsetY, this.w, this.h);
          ctx.textAlign = "right";
          var a = { shadow: Shadow.main };
          ctx.font = font.editbox;
          ctx.fillStyle = color.yellow;
          ctx.drawText(lang.BUTTON_FUNCTION, this.F1FUNC.x - 26, this.F1FUNC.y - 18, a);
          ctx.drawText(lang.LANGUAGE, this.LANG.x - 26, this.LANG.y - 18, a);
          ctx.textAlign = "center";
          ctx.drawText(lang.SYNC_SELECTED_CH, this.SYNC.x + this.SYNC.w / 2, this.SYNC.y - 11, a);
          ctx.textAlign = "left";
          ctx.fillStyle = color.tabText;
          ctx.drawText("F1", this.F1FUNC.x + 7, this.F1FUNC.y - 18, a);
          ctx.drawText("F2", this.F2FUNC.x + 7, this.F2FUNC.y - 18, a);
          0 < this.maxY &&
          ((ctx.fillStyle = "rgba(255,255,255,0.07)"),
            ctx.fillRoundRect(this.w - 11, this.offsetY + 2, 10, this.h - 4, 4),
            (ctx.fillStyle = "rgba(255,255,255,0.4)"),
            (a = (this.h / (this.h + this.maxY)) * (this.h - 4)),
            ctx.fillRoundRect(this.w - 11, this.offsetY + ((2 + (this.offsetY / this.maxY) * (this.h - 4 - a)) | 0), 10, a, 4));
        },
      }),
      CONFIG_PAGE_PERF = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "CONFIG";
          this.y = 40;
          this.enabled = !1;
          this.offsetY = 0;
          this.hh = this.maxY = 900;
          this.needMoveEvt = this.needClip = !0;
          this.color = color.red;
          this.scrollID = -1;
          this.mouseCaptured = !1;
          this.initWidgets();
        },
        setOffset: function (a) {
          this.offsetY = bound(a | 0, 0, this.maxY);
          regUpdate(this);
        },
        onShow: function () {
          this.setOffset(0);
        },
        onDown: function (a, b, c) {
          3 < mouseTargets.length ||
          (isDefined(tHash[c]) && 3 < tHash[c].length) ||
          ((this.mouseCaptured = !0), (this.lastPressPoint = this.pressPoint), (this.pressPoint = [a, b + this.offsetY]), (this.ppy = this.offsetY + b), (this.d = this.offsetY), (this.scrollID = c));
        },
        onMove: function (a, b, c) {
          this.scrollID == c && this.mouseCaptured && this.setOffset(this.ppy - b);
        },
        onUp: function (a) {
          if (this.mouseCaptured) {
            this.mouseCaptured = !1;
            var b = Date.now(),
              c = Math.abs(this.lastPressPoint[0] - this.pressPoint[0]),
              d = Math.abs(this.lastPressPoint[1] - this.pressPoint[1]),
              f = Math.abs(this.d - this.offsetY);
            3 < mouseTargets.length ||
            (isDefined(tHash[a]) && 3 < tHash[a].length) ||
            (10 > f && 30 > c && 30 > d && b - this.lastClickTime < DBL_CLK_TIME ? (this.onDouble(), (this.lastClickTime = b - DBL_CLK_TIME)) : (this.lastClickTime = b));
          }
        },
        onDouble: function () {
          setMode(E_MODE.MIX);
        },
        onWheel: function (a, b) {
          clearInterval(ticker);
          this.setOffset(this.offsetY - Math.round(a / 3));
        },
        initWidgets: function () {
          var a = 0;
          this.DRAWRATE = new SWITCHBOX(this);
          this.DRAWRATE.label = lang.FRAME_RATE + ":";
          this.DRAWRATE.setPos(250, 20 + 50 * a++);
          this.DRAWRATE.setItems([lang.FULL, "1/2", "1/3", "1/4"]);
          this.DRAWRATE.getState = function () {
            this.state = (settings.drawRate - 1) | 0;
          };
          this.DRAWRATE.valueFunc = function () {
            settingsStorage.set("drawRate", this.state + 1);
          };
          1.5 <= window.devicePixelRatio &&
          ((this.DISABLERETINA = new SWITCHBOX(this)),
            (this.DISABLERETINA.label = lang.DISABLE_RETINA + ":"),
            this.DISABLERETINA.setPos(250, 20 + 50 * a++),
            this.DISABLERETINA.setItems([lang.OFF, lang.ON]),
            this.DISABLERETINA.setItemWidth(90),
            (this.DISABLERETINA.getState = function () {
              this.state = settings.disableRetina ? 1 : 0;
            }),
            (this.DISABLERETINA.valueFunc = function () {
              settingsStorage.set("disableRetina", 1 == this.state);
              confOk.valueFunc = function () {
                location.reload();
              };
              showConfBox(lang.RELOAD_UI);
            }));
          this.DISABLESCALE = new SWITCHBOX(this);
          this.DISABLESCALE.label = lang.DISABLE_RESCALING + ":";
          this.DISABLESCALE.setPos(250, 20 + 50 * a++);
          this.DISABLESCALE.setItems([lang.OFF, lang.ON]);
          this.DISABLESCALE.getState = function () {
            this.state = settings.disableScaling ? 1 : 0;
          };
          this.DISABLESCALE.valueFunc = function () {
            settingsStorage.set("disableScaling", 1 == this.state);
            settingsStorage.save();
            confOk.valueFunc = function () {
              location.reload();
            };
            showConfBox(lang.RELOAD_UI);
          };
          this.DISABLEVU = new SWITCHBOX(this);
          this.DISABLEVU.label = lang.DISABLE_LED_METERS + ":";
          this.DISABLEVU.setPos(250, 20 + 50 * a++);
          this.DISABLEVU.setItems([lang.OFF, lang.ON]);
          this.DISABLEVU.getState = function () {
            this.state = settings.disableVUs ? 1 : 0;
          };
          this.DISABLEVU.valueFunc = function () {
            settingsStorage.set("disableVUs", 1 == this.state);
            regUpdate(masterWidget);
          };
          for (var b = [this.DRAWRATE, this.DISABLESCALE, this.DISABLERETINA, this.DISABLEVU], c = 0; c < b.length; c++) isDefined(b[c]) && b[c].setItemWidth(120);
          this.DRAWRATE.setItemWidth(60);
          for (c = 0; c < this.widgets.length; c++) this.widgets[c].labelColor = "hsl(" + 20 * c + ",20%,78%)";
          this.hh = 20 + 50 * (a + 1.5);
        },
        calcGeometry: function () {
          this.w = this.parent.w - this.x;
          this.h = this.parent.h - this.y;
          this.maxY = this.hh - this.h;
          0 > this.maxY && (this.maxY = 0);
          this.offsetY = bound(this.offsetY, 0, this.maxY);
        },
        paint: function () {
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, this.offsetY, this.w, this.h);
          ctx.textAlign = "right";
          ctx.font = font.editbox;
          ctx.fillStyle = color.yellow;
          ctx.textAlign = "left";
          ctx.fillStyle = color.tabText;
          if (0 < this.maxY) {
            ctx.fillStyle = "rgba(255,255,255,0.07)";
            ctx.fillRoundRect(this.w - 11, this.offsetY + 2, 10, this.h - 4, 4);
            ctx.fillStyle = "rgba(255,255,255,0.4)";
            var a = (this.h / (this.h + this.maxY)) * (this.h - 4);
            ctx.fillRoundRect(this.w - 11, this.offsetY + ((2 + (this.offsetY / this.maxY) * (this.h - 4 - a)) | 0), 10, a, 4);
          }
        },
      }),
      CONFIG_PAGE_UTIL = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "CONFIG";
          this.y = 40;
          this.enabled = !1;
          this.offsetY = 0;
          this.hh = this.maxY = 900;
          this.needMoveEvt = this.needClip = !0;
          this.color = color.red;
          this.scrollID = -1;
          this.mouseCaptured = !1;
          this.initWidgets();
        },
        setOffset: function (a) {
          this.offsetY = bound(a | 0, 0, this.maxY);
          regUpdate(this);
        },
        onShow: function () {
          this.setOffset(0);
        },
        onDown: function (a, b, c) {
          3 < mouseTargets.length ||
          (isDefined(tHash[c]) && 3 < tHash[c].length) ||
          ((this.mouseCaptured = !0), (this.lastPressPoint = this.pressPoint), (this.pressPoint = [a, b + this.offsetY]), (this.ppy = this.offsetY + b), (this.d = this.offsetY), (this.scrollID = c));
        },
        onMove: function (a, b, c) {
          this.scrollID == c && this.mouseCaptured && this.setOffset(this.ppy - b);
        },
        onUp: function (a) {
          if (this.mouseCaptured) {
            this.mouseCaptured = !1;
            var b = Date.now(),
              c = Math.abs(this.lastPressPoint[0] - this.pressPoint[0]),
              d = Math.abs(this.lastPressPoint[1] - this.pressPoint[1]),
              f = Math.abs(this.d - this.offsetY);
            3 < mouseTargets.length ||
            (isDefined(tHash[a]) && 3 < tHash[a].length) ||
            (10 > f && 30 > c && 30 > d && b - this.lastClickTime < DBL_CLK_TIME ? (this.onDouble(), (this.lastClickTime = b - DBL_CLK_TIME)) : (this.lastClickTime = b));
          }
        },
        onDouble: function () {
          setMode(E_MODE.MIX);
        },
        onWheel: function (a, b) {
          clearInterval(ticker);
          this.setOffset(this.offsetY - Math.round(a / 3));
        },
        initWidgets: function () {
          var a = 0;
          this.IMPORTPRESETS = new MENUBUTTON(this);
          this.IMPORTPRESETS.setPos(250, 20 + 50 * a++);
          this.IMPORTPRESETS.setSize(240, 38);
          this.IMPORTPRESETS.text = lang.IMPORT_ALL_PRESETS;
          this.IMPORTPRESETS.onPress = function () {
            EMULATE
              ? showPopupMsg(lang.DEMO_VERSION)
              : ((confOk.valueFunc = function () {
                sendMessage(E_COMMANDS.IMPORT_PRESETS);
              }),
                showConfBox(lang.IMPORT_ALL_PRESETS + "?"));
          };
          this.EXPORTPRESETS = new MENUBUTTON(this);
          this.EXPORTPRESETS.setPos(250, 20 + 50 * a++);
          this.EXPORTPRESETS.setSize(240, 38);
          this.EXPORTPRESETS.text = lang.EXPORT_ALL_PRESETS;
          this.EXPORTPRESETS.onPress = function () {
            if (EMULATE) showPopupMsg(lang.DEMO_VERSION);
            else {
              var a = new MODAL_LIST(null, E_COMMANDS.USB_LIST);
              a.title = lang.EXPORT_ALL_PRESETS;
              a.valueFunc = function (a) {
                a ? sendMessage(E_COMMANDS.EXPORT_PRESETS + "^" + a) : showPopupMsg(lang.NO_USB_DEVICE_SELECTED);
              };
            }
          };
          IS_UI_24 &&
          ((a = 0),
            (this.RESET_STATE = new CHECKBUTTON(this)),
            this.RESET_STATE.setSize(32, 32),
            this.RESET_STATE.setPos(800, 23 + 50 * a++),
            (this.RESET_STATE.color = this.RESET_STATE.indStrokeColor = color.yellow),
            this.RESET_STATE.setKey("var.rswgpio", !0),
            (this.RESET_STATE.indicatorMode = !0),
            (this.FOOT_STATE = new CHECKBUTTON(this)),
            this.FOOT_STATE.setSize(32, 32),
            this.FOOT_STATE.setPos(800, 23 + 50 * a++),
            (this.FOOT_STATE.color = this.FOOT_STATE.indStrokeColor = color.green),
            this.FOOT_STATE.setKey("var.fswgpio", !0),
            (this.FOOT_STATE.indicatorMode = !0));
          this.hh = 20 + 50 * (a + 1.5);
        },
        calcGeometry: function () {
          this.w = this.parent.w - this.x;
          this.h = this.parent.h - this.y;
          this.maxY = this.hh - this.h;
          0 > this.maxY && (this.maxY = 0);
          this.offsetY = bound(this.offsetY, 0, this.maxY);
        },
        paint: function () {
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, this.offsetY, this.w, this.h);
          ctx.textAlign = "right";
          var a = { shadow: Shadow.main };
          ctx.font = font.editbox;
          ctx.fillStyle = color.yellow;
          ctx.textAlign = "left";
          ctx.fillStyle = color.tabText;
          IS_UI_24 &&
          ((ctx.textAlign = "right"),
            (ctx.textBaseline = "middle"),
            ctx.drawText(lang.HW_RESET_STATE, this.RESET_STATE.x - 8, (this.RESET_STATE.y + this.RESET_STATE.w / 2 + 0) | 0, a),
            ctx.drawText(lang.FOOTSWITCH_STATE, this.FOOT_STATE.x - 8, (this.FOOT_STATE.y + this.FOOT_STATE.w / 2 + 0) | 0, a));
          0 < this.maxY &&
          ((ctx.fillStyle = "rgba(255,255,255,0.07)"),
            ctx.fillRoundRect(this.w - 11, this.offsetY + 2, 10, this.h - 4, 4),
            (ctx.fillStyle = "rgba(255,255,255,0.4)"),
            (a = (this.h / (this.h + this.maxY)) * (this.h - 4)),
            ctx.fillRoundRect(this.w - 11, this.offsetY + ((2 + (this.offsetY / this.maxY) * (this.h - 4 - a)) | 0), 10, a, 4));
        },
      }),
      PERM_PAGE = Class.create(SETTINGS_SUBPAGE, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "PERM_PAGE";
          this.color = color.red;
          this.buttons = [];
          this.auxs = [];
          this.initWidgets();
        },
        onShow: function () {},
        initWidgets: function () {
          var a = this,
            b = 0;
          this.SETPASS = new CHECKBUTTON(this);
          this.SETPASS.setSize(160, 40);
          this.SETPASS.setPos(60, 70);
          this.SETPASS.getState = function () {
            this.text = (this.state = !!getValue("settings.block.pass")) ? lang.DISABLE : lang.ENABLE;
          };
          this.SETPASS.onToggleUp = function () {
            editOk.valueFunc = function () {
              var b = editBox2.value;
              b && (setValue("settings.block.pass", b), settingsStorage.set("master_pass", b), regUpdate(a));
            };
            showEditBox2(lang.SET_MASTER_PASS, "");
          };
          this.SETPASS.onToggleDown = function () {
            editOk.valueFunc = function () {
              var b = editBox2.value;
              b &&
              (getValue("settings.block.pass") == b
                ? (setValue("settings.block.pass", ""), setValue("settings.block.mode", 0), settingsStorage.set("master_pass", ""), showPopupMsg(lang.UNLOCKED))
                : showPopupMsg(lang.WRONG_PASSWORD),
                regUpdate(a));
            };
            showEditBox2(lang.ENTER_PASS_TO_UNLOCK, "");
          };
          this.LOGIN = new CHECKBUTTON(this);
          this.LOGIN.setSize(160, 40);
          this.LOGIN.setPos(250, 70);
          this.LOGIN.text = lang.LOG_IN;
          this.LOGIN.color = color.green;
          this.LOGIN.getState = function () {
            var a = getValue("settings.block.pass");
            this.disabled = !a;
            this.text = lang.LOG_IN;
            if (a) {
              if ((this.state = a == settings.master_pass)) this.text = lang.LOG_OUT;
            } else this.state = 0;
          };
          this.LOGIN.onToggleUp = function () {
            editOk.valueFunc = function () {
              var b = editBox2.value;
              b && (getValue("settings.block.pass") == b ? (settingsStorage.set("master_pass", b), showPopupMsg(lang.LOGGED_IN)) : showPopupMsg(lang.WRONG_PASSWORD), regUpdate(a));
            };
            showEditBox2(lang.ENTER_PASS, "");
          };
          this.LOGIN.onToggleDown = function () {
            settingsStorage.set("master_pass", "");
            regUpdate(a);
            showPopupMsg(lang.LOGGED_OUT);
          };
          for (
            var c = [lang.AUX_LEVELS, lang.AUX_PROCESSING, lang.MIX_LEVELS, lang.MIX_PROCESSING, lang.MIX_GAIN, lang.PLAYER, lang.MASTER_LEVEL, lang.MASTER_PROCESSING, lang.SHOWS, lang.GLOBAL_SETTINGS],
              d = "auxlvl auxproc mixlvl mixproc mixgain player mlvl mproc shows gsettings".split(" "),
              f = 0;
            f < c.length;
            f++
          ) {
            var e = new SCheckBox(this);
            e.setSize(111, 50);
            e.setPos(60 + (f % 5) * (e.w + 15), 180 + 80 * (b + (5 <= f) ? 1 : 0));
            e.font = "14pt open_sans_condensedbold";
            e.mline = !0;
            e.text = c[f].replace(" ", "<br>");
            e.kkk = "settings.block." + d[f];
            e.color = color.green;
            e.getState = function () {
              this.state = getValue(this.kkk) || 0;
              var a = getValue("settings.block.pass");
              this.disabled = !a || a != settings.master_pass;
            };
            e.onToggle = function () {
              setValue(this.kkk, this.state);
            };
            this.buttons.push(e);
          }
          for (f = b = 0; f < curSetup.aux; f++)
            (e = new SCheckBox(this)),
              e.setSize(90, 50),
              (e.font = "14pt open_sans_condensedbold"),
            8 == f && b++,
              e.setPos(60 + (f % 8) * (e.w + 15), 390 + 80 * b),
              (e.text = lang.AUX + " " + (f + 1)),
              (e.idx = f),
              (e.kkk = "perm_aux" + (f + 1)),
              (e.color = color.green),
              (e.getState = function () {
                this.state = settingsStorage.get("perm_aux" + (this.idx + 1));
                var a = getValue("settings.block.pass"),
                  b = getValue("settings.block.auxlvl"),
                  c = getValue("settings.block.auxproc");
                this.disabled = !(a && (b || c));
              }),
              (e.onToggle = function () {
                settingsStorage.set("perm_aux" + (this.idx + 1), this.state);
                switch (auxStrips[this.idx].getNameValue("stereoIndex")) {
                  case 0:
                    this.idx < auxStrips.length && settingsStorage.set("perm_aux" + (this.idx + 2), this.state);
                    regUpdate(a);
                    break;
                  case 1:
                    0 < this.idx && settingsStorage.set("perm_aux" + this.idx, this.state), regUpdate(a);
                }
              }),
              this.buttons.push(e),
              this.auxs.push(e);
        },
        paint: function () {
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, 0, this.w, this.h);
          ctx.font = font.editbox;
          ctx.textAlign = "left";
          ctx.fillStyle = color.white;
          ctx.fillText(lang.MASTER_PASSWORD_PROTECTION, 60, 50);
          ctx.fillStyle = color.yellow;
          ctx.fillText(lang.ALLOW_CLIENT_ACCESS_FOR + ":", 60, 160);
          ctx.fillText(lang.LOCAL_AUX_CONTROL + ":", 60, 370);
        },
      }),
      CASCADE_SUBPAGE = Class.create(SETTINGS_SUBPAGE, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "CASCADE_SUBPAGE";
          this.initWidgets();
        },
        initWidgets: function () {
          var a = 0;
          this.cascade = new SWITCHBOX(this);
          this.cascade.label = lang.CASCADE + ":";
          this.cascade.setPos(250, 50 + 50 * a++);
          this.cascade.setItemWidth(100);
          this.cascade.setItems([lang.DISABLE, lang.ENABLE]);
          a++;
          this.locate1 = new MENUBUTTON(this);
          this.locate1.setAnchors(590, 50 + 50 * a, null, null);
          this.locate1.w = 200;
          this.locate1.text = "LOCATE UNIT 1";
          this.locate1.onPress = function () {};
          this.master = new SWITCHBOX(this);
          this.master.label = lang.CASCADE_MASTER + ":";
          this.master.setPos(250, 50 + 50 * a++);
          this.master.setItemWidth(100);
          this.master.setItems(["UNIT 1", "UNIT 2"]);
          this.locate2 = new MENUBUTTON(this);
          this.locate2.setAnchors(590, 50 + 50 * a, null, null);
          this.locate2.w = 200;
          this.locate2.text = "LOCATE UNIT 2";
          this.locate2.onPress = function () {};
          this.range = new SWITCHBOX(this);
          this.range.label = lang.MASTER_CHANNEL_RANGE + ":";
          this.range.setPos(250, 50 + 50 * a++);
          this.range.setItemWidth(100);
          this.range.setItems(["1 - 24", "25 - 48"]);
        },
      }),
      ABOUTPage = Class.create(SETTINGS_SUBPAGE, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "ABOUT";
          this.clickNum = 0;
          this.CPY = new SButton(this);
          this.CPY.text = lang.COPY_TO_CLIPBOARD;
          this.CPY.w = 150;
          this.CPY.onPress = function () {
            window.prompt("UNIQUE ID:", netConfig.uid || "unknown");
          };
        },
        onDown: function (a, b) {
          var c = a - this.globalX(),
            d = b - this.globalY(),
            f = res.about.w(),
            e = res.about.h();
          isInRect((this.w - f) / 2 + 3, (this.h - e) / 2 - 100, f, e, c, d) && (this.clickNum++, this.clickNum % 10 || window.open("/img1x/ui_about.png"), (b = a = -1));
          this.lastPressPoint = this.pressPoint;
          this.pressPoint = [a, b];
        },
        onUp: function (a) {
          if (-1 != this.pressPoint[0]) {
            var b = Date.now(),
              c = Math.abs(this.lastPressPoint[0] - this.pressPoint[0]),
              d = Math.abs(this.lastPressPoint[1] - this.pressPoint[1]);
            2 < mouseTargets.length ||
            (isDefined(tHash[a]) && 2 < tHash[a].length) ||
            (30 > c && 30 > d && b - this.lastClickTime < DBL_CLK_TIME ? (this.onDouble(), (this.lastClickTime = b - DBL_CLK_TIME)) : (this.lastClickTime = b));
          }
        },
        calcGeometry: function () {
          this.w = this.parent.w - this.x;
          this.h = this.parent.h - this.y;
          var a = this.w,
            b = res.about.w(),
            c = res.about.h(),
            d = (this.h - c) / 2 - 100 + c + 80;
          2 < a ? ((this.grd = ctx.createRadialGradient(a / 2, d, 10, a / 2, d, a / 2)), this.grd.addColorStop(0, "#0b1735"), this.grd.addColorStop(1, "#020203")) : (this.grd = "#0b1735");
          a = (this.w - b) / 2 + 3;
          d = (this.h - c) / 2 - 100;
          this.CPY.setPos(a + 207, d + (c + 116));
        },
        paint: function () {
          ctx.fillStyle = "#020203";
          ctx.fillRect(0, 0, this.w, this.h);
          ctx.fillStyle = this.grd;
          ctx.fillRect(0, 0, this.w, this.h);
          var a = res.about.w(),
            b = res.about.h(),
            c = (this.h - b) / 2 - 100;
          drawImage(res.about, (this.w - a) / 2 + 3, c);
          ctx.textAlign = "right";
          ctx.fillStyle = color.tabText;
          ctx.font = "12pt open_sans_condensedbold";
          drawText(
            "MODEL: " + (netConfig.model || "unknown") + "<br>SERIAL: " + (netConfig.serial || "unknown") + "<br>FIRMWARE: " + (netConfig.firmware || "unknown") + "<br><br>UNIQUE ID: " + (netConfig.uid || "unknown"),
            (this.w / 2) | 0,
            c + (b + 20),
            { align: "center", color: color.white }
          );
          c = this.h - 120;
          a = lang.COPYRIGHT_MSG;
          b = ctx.measureText("All third party marks are the trademarks of their respective owners. These marks are used to identify").width;
          drawText(a, ((this.w - b) / 2) | 0, c, { align: "left", color: color.white });
        },
      }),
      ROUTE_UNDO_ARR = [];
    function undoRouteChange() {
      if (ROUTE_UNDO_ARR.length) {
        var a = ROUTE_UNDO_ARR.pop();
        setValue(a[0], a[1]);
      }
    }
    var ROUTING_PAGE = Class.create(SETTINGS_SUBPAGE, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "SETTINGS_SUBPAGE";
          this.color = color.red;
          this.offsetY = this.mode = 0;
          this.hh = this.maxY = 900;
          this.needMoveEvt = this.needClip = !0;
          this.mode = this.src = 0;
          this.initWidgets();
          this.chan.onToggleUp();
          this.hwin.onToggleUp();
        },
        setOffset: function (a) {
          this.offsetY = bound(a | 0, 0, this.maxY);
          regUpdate(this);
        },
        onShow: function () {
          this.setOffset(0);
        },
        onDown: function (a, b, c) {
          2 < mouseTargets.length || (isDefined(tHash[c]) && 2 < tHash[c].length) || ((this.lastPressPoint = this.pressPoint), (this.pressPoint = [a, b + this.offsetY]), (this.ppy = this.offsetY + b), (this.d = this.offsetY));
        },
        onMove: function (a, b, c) {
          2 < mouseTargets.length || (isDefined(tHash[c]) && 2 < tHash[c].length) || this.setOffset(this.ppy - b);
        },
        onUp: function (a) {
          if (!(2 < mouseTargets.length || (isDefined(tHash[a]) && 2 < tHash[a].length))) {
            a = Date.now();
            var b = Math.abs(this.lastPressPoint[0] - this.pressPoint[0]),
              c = Math.abs(this.lastPressPoint[1] - this.pressPoint[1]),
              d = Math.abs(this.d - this.offsetY);
            10 > d && 30 > b && 30 > c && a - this.lastClickTime < DBL_CLK_TIME ? (this.onDouble(), (this.lastClickTime = a - DBL_CLK_TIME)) : (this.lastClickTime = 10 < d ? 0 : a);
          }
        },
        onDouble: function () {
          setMode(E_MODE.MIX);
        },
        onWheel: function (a) {
          clearInterval(ticker);
          this.setOffset(this.offsetY - Math.round(a / 3));
        },
        setMode: function (a) {
          this.mode = a;
          this.updateGeometry();
          regUpdate(this);
        },
        setSrc: function (a) {
          this.src = a;
          regUpdate(this);
        },
        initWidgets: function () {
          var a = this;
          this.back = new MENUBUTTON(this);
          this.back.text = "< " + lang.BACK;
          this.back.setAnchors(5, 10, null, null);
          this.back.color = color.purple;
          this.back.w = 100;
          this.back.h = 40;
          this.back.onPress = function () {
            modeHistory.last() != E_MODE.EDIT && modeHistory.last() != E_MODE.PLAYER ? (editWidget.setMode(editWidget.E_MODE.misc), setMode(E_MODE.EDIT)) : modeBack();
          };
          this.clrArr = [color.orange, color.green, color.yellow];
          this.grid = new R_GRID2(this);
          this.grid.setAnchors(86, 60, 40, null);
          var b = 90,
            c = b + 10,
            d = 40,
            f = color.white,
            e = 0;
          this.hwin = new CHECKBUTTON(this);
          this.hwin.setAnchors(150 + c * e, 10, null, null);
          this.hwin.color = this.hwin.textColor = color.LOCAL;
          this.hwin.textColor2 = f;
          this.hwin.mode = e++;
          this.hwin.setSize(b, d);
          this.hwin.text = lang.HW_INS;
          this.hwin.getState = function () {
            this.state = a.src == this.mode;
          };
          this.hwin.onToggleUp = function () {
            for (var b = [], c = [], d = 0; 20 > d; d++) b.push("" + (d + 1)), c.push("hw." + d);
            for (d = 0; 2 > d; d++) b.push("LI " + (d % 2 ? "R" : "L")), c.push("li." + d);
            a.grid.setCols(b, c);
            a.grid.topColor = this.textColor;
            a.grid.blockedY = [];
            a.grid.blockedX = [];
            a.setSrc(this.mode);
          };
          this.mtkp = new CHECKBUTTON(this);
          this.mtkp.setAnchors(150 + c * e, 10, null, null);
          this.mtkp.color = this.mtkp.textColor = color.SD;
          this.mtkp.textColor2 = f;
          this.mtkp.mode = e++;
          this.mtkp.setSize(b, d);
          this.mtkp.w = b;
          this.mtkp.text = lang.USB_A;
          this.mtkp.getState = function () {
            this.disabled = 0 != a.mode && 3 != a.mode;
            this.state = a.src == this.mode;
          };
          this.mtkp.onToggleUp = function () {
            for (var b = [], c = [], d = 0; 22 > d; d++) b.push("" + (d + 1)), c.push("ua." + d);
            a.grid.setCols(b, c);
            a.grid.topColor = this.textColor;
            a.grid.blockedY = 0 == a.mode ? [20, 21, 22, 23] : [];
            a.grid.blockedX = [];
            a.setSrc(this.mode);
          };
          this.dawp = new CHECKBUTTON(this);
          this.dawp.setAnchors(150 + c * e, 10, null, null);
          this.dawp.color = this.dawp.textColor = color.DAW;
          this.dawp.textColor2 = f;
          this.dawp.mode = e++;
          this.dawp.setSize(b, d);
          this.dawp.w = b;
          this.dawp.text = lang.USB_B + "\n1-16";
          this.dawp.getState = function () {
            this.state = a.src == this.mode;
          };
          this.dawp.onToggleUp = function () {
            for (var b = [], c = [], d = 0; 16 > d; d++) b.push("" + (d + 1)), c.push("ub." + d);
            a.grid.setCols(b, c);
            a.grid.topColor = this.textColor;
            a.grid.blockedY = [];
            a.grid.blockedX = [];
            a.setSrc(this.mode);
          };
          this.dawp2 = new CHECKBUTTON(this);
          this.dawp2.setAnchors(150 + c * e, 10, null, null);
          this.dawp2.color = this.dawp2.textColor = color.DAW;
          this.dawp2.textColor2 = f;
          this.dawp2.mode = e++;
          this.dawp2.setSize(b, d);
          this.dawp2.w = b;
          this.dawp2.text = lang.USB_B + "\n17-32";
          this.dawp2.getState = function () {
            this.state = a.src == this.mode;
          };
          this.dawp2.onToggleUp = function () {
            for (var b = [], c = [], d = 16; 32 > d; d++) b.push("" + (d + 1)), c.push("ub." + d);
            a.grid.setCols(b, c);
            a.grid.topColor = this.textColor;
            a.grid.blockedY = [];
            a.grid.blockedX = [];
            a.setSrc(this.mode);
          };
          this.casp = new CHECKBUTTON(this);
          this.casp.setAnchors(150 + c * e, 10, null, null);
          this.casp.color = this.casp.textColor = color.purple2;
          this.casp.textColor2 = f;
          this.casp.mode = e++;
          this.casp.setSize(b, d);
          this.casp.w = b;
          this.casp.dy = 16;
          this.casp.text = lang.CASCADE_INS.replace(" ", "\n") + " 1-16";
          this.casp.getState = function () {
            this.state = a.src == this.mode;
          };
          this.casp.onToggleUp = function () {
            for (var b = [], c = [], d = 0; 16 > d; d++) b.push("" + (d + 1)), c.push("cs." + d);
            a.grid.setCols(b, c);
            a.grid.topColor = this.textColor;
            a.grid.blockedY = [];
            a.grid.blockedX = [];
            a.setSrc(this.mode);
          };
          this.casp2 = new CHECKBUTTON(this);
          this.casp2.setAnchors(150 + c * e, 10, null, null);
          this.casp2.color = this.casp2.textColor = color.purple2;
          this.casp2.textColor2 = f;
          this.casp2.mode = e++;
          this.casp2.setSize(b, d);
          this.casp2.w = b;
          this.casp2.dy = 16;
          this.casp2.text = lang.CASCADE_INS.replace(" ", "\n") + " 17-32";
          this.casp2.getState = function () {
            this.state = a.src == this.mode;
          };
          this.casp2.onToggleUp = function () {
            for (var b = [], c = [], d = 16; 32 > d; d++) b.push("" + (d + 1)), c.push("cs." + d);
            a.grid.setCols(b, c);
            a.grid.topColor = this.textColor;
            a.grid.blockedY = [];
            a.grid.blockedX = [];
            a.setSrc(this.mode);
          };
          SHOW_WIP || this.casp.hide();
          SHOW_WIP || this.casp2.hide();
          this.mast = new CHECKBUTTON(this);
          this.mast.setAnchors(150 + c * e - (SHOW_WIP ? 0 : 2 * c), 10, null, null);
          this.mast.color = this.mast.textColor = color.USB;
          this.mast.textColor2 = f;
          this.mast.mode = e++;
          this.mast.setSize(b, d);
          this.mast.text = lang.MASTERS;
          this.mast.getState = function () {
            this.state = a.src == this.mode;
          };
          this.mast.onToggleUp = function () {
            var b = [],
              c = [];
            b.push("ML");
            c.push("m.0");
            b.push("MR");
            c.push("m.1");
            for (var d = 0; d < auxStrips.length; d++) b.push("A" + (d + 1)), c.push("a." + d);
            for (d = 0; 4 > d; d++) b.push("HD" + ((d / 2 + 1) | 0) + (d % 2 ? "R" : "L")), c.push("hp." + d);
            a.grid.setCols(b, c);
            a.grid.topColor = this.textColor;
            a.grid.blockedY = [];
            a.grid.blockedX = [];
            a.setSrc(this.mode);
          };
          d = 46;
          b = 78;
          c = d + 10;
          e = 0;
          this.chan = new CHECKBUTTON(this);
          this.chan.setAnchors(5, 97 + c * e, null, null);
          this.chan.color = this.chan.textColor = color.LOCAL;
          this.chan.textColor2 = f;
          this.chan.mode = e++;
          this.chan.setSize(b, d);
          this.chan.text = lang.CHANNELS;
          this.chan.getState = function () {
            this.state = a.mode == this.mode;
          };
          this.chan.onToggleUp = function () {
            var b = [];
            inStrips.forEach(function (a) {
              b.push(a.name + "src");
            });
            lineinStrips.forEach(function (a) {
              b.push(a.name + "src");
            });
            a.grid.setRows([], b);
            a.grid.leftColor = this.textColor;
            a.setMode(this.mode);
            a.hwin.onToggleUp();
          };
          this.hwout = new CHECKBUTTON(this);
          this.hwout.setAnchors(5, 97 + c * e, null, null);
          this.hwout.color = this.hwout.textColor = color.USB;
          this.hwout.textColor2 = f;
          this.hwout.mode = e++;
          this.hwout.setSize(b, d);
          this.hwout.w = b;
          this.hwout.text = lang.HW_OUTS;
          this.hwout.getState = function () {
            this.state = a.mode == this.mode;
          };
          this.hwout.onToggleUp = function () {
            for (var b = [], c = [], d = 0; 2 > d; d++) b.push(lang.MASTER + " " + (d % 2 ? "R" : "L")), c.push("hwoutm." + d + ".src");
            for (d = 0; 8 > d; d++) b.push(lang.AUX + " " + (d + 1)), c.push("hwoutaux." + d + ".src");
            for (d = 0; 4 > d; d++) b.push("H" + ((d / 2 + 1) | 0) + (d % 2 ? "R" : "L")), c.push("hwouthp." + d + ".src");
            a.grid.setRows(b, c);
            a.grid.leftColor = this.textColor;
            a.setMode(this.mode);
            a.mast.onToggleUp();
          };
          this.cascout = new CHECKBUTTON(this);
          this.cascout.setAnchors(5, 97 + c * e, null, null);
          this.cascout.color = this.cascout.textColor = color.purple2;
          this.cascout.textColor2 = f;
          this.cascout.mode = e++;
          this.cascout.setSize(b, d);
          this.cascout.w = b;
          this.cascout.dy = 16;
          this.cascout.text = lang.CASCADE_OUTS.replace(" ", "\n");
          this.cascout.getState = function () {
            this.state = a.mode == this.mode;
          };
          this.cascout.onToggleUp = function () {
            for (var b = [], c = [], d = 0; 32 > d; d++) b.push("SLOT " + (d + 1)), c.push("casc." + d + ".src");
            a.grid.setRows(b, c);
            a.grid.leftColor = this.textColor;
            a.setMode(this.mode);
            a.hwin.onToggleUp();
          };
          SHOW_WIP || this.cascout.hide();
          this.chansc = new CHECKBUTTON(this);
          this.chansc.setAnchors(5, 97 + c * e - (SHOW_WIP ? 0 : 1 * c), null, null);
          this.chansc.color = this.chansc.textColor = color.green;
          this.chansc.textColor2 = color.white;
          this.chansc.mode = e++;
          this.chansc.setSize(b, d);
          this.chansc.text = lang.SOUNDCHECK;
          this.chansc.font = "11pt open_sans_condensedbold";
          this.chansc.getState = function () {
            this.state = a.mode == this.mode;
          };
          this.chansc.onToggleUp = function () {
            var b = [];
            inStrips.forEach(function (a) {
              b.push(a.name + "scsrc");
            });
            lineinStrips.forEach(function (a) {
              b.push(a.name + "scsrc");
            });
            a.grid.setRows([], b);
            a.grid.leftColor = this.textColor;
            a.setMode(this.mode);
            a.mtkp.onToggleUp();
          };
          this.undo = new MENUBUTTON(this);
          this.undo.text = lang.UNDO;
          this.undo.setAnchors(5, null, null, 90);
          this.undo.color = color.orange;
          this.undo.w = b;
          this.undo.h = 30;
          this.undo.onPress = function () {
            isMTKbusy() ? showPopupMsg(lang.PATCHING_DURING_MTK, 1e3) : undoRouteChange();
          };
          this.reset = new MENUBUTTON(this);
          this.reset.text = lang.RESET;
          this.reset.setAnchors(5, null, null, 40);
          this.reset.color = color.purple;
          this.reset.w = b;
          this.reset.h = 30;
          this.reset.onPress = function () {
            isMTKbusy()
              ? showPopupMsg(lang.PATCHING_DURING_MTK, 1e3)
              : ((confOk.parSrc = a.src),
                (confOk.parMode = a.mode),
                (confOk.par1 = a),
                (confOk.valueFunc = function () {
                  switch (this.parMode) {
                    case 0:
                      for (var a = inStrips.concat(lineinStrips), b = 0; b < a.length; b++) {
                        var c = a[b];
                        c.type == E_STRIP_TYPE.IN && c.setNameValue("src", 20 > c.subId ? "hw." + c.subId : "none");
                        c.type == E_STRIP_TYPE.LINEIN && c.setNameValue("src", "li." + c.subId);
                      }
                      break;
                    case 1:
                      setValue("hwoutm.0.src", "m.0");
                      setValue("hwoutm.1.src", "m.1");
                      for (b = 0; b < auxStrips.length; b++) setValue("hwoutaux." + b + ".src", "a." + b);
                      for (b = 0; 4 > b; b++) setValue("hwouthp." + b + ".src", "hp." + b);
                      break;
                    case 2:
                      for (b = 0; 32 > b; b++) setValue("casc." + b + ".src", "");
                      break;
                    case 3:
                      for (a = inStrips.concat(lineinStrips), b = 0; b < a.length; b++) a[b].setNameValue("scsrc", 20 > a[b].subId ? "ua." + b : "none");
                  }
                  drawAll();
                }),
                showConfBox(lang.RESET));
          };
          this.reset11 = new MENUBUTTON(this);
          this.reset11.text = lang.PATCH_1_1;
          this.reset11.setAnchors(5, null, null, 5);
          this.reset11.color = color.purple;
          this.reset11.w = b;
          this.reset11.h = 30;
          this.reset11.onPress = function () {
            isMTKbusy()
              ? showPopupMsg(lang.PATCHING_DURING_MTK, 1e3)
              : ((confOk.parSrc = a.src),
                (confOk.parMode = a.mode),
                (confOk.par1 = a),
                (confOk.valueFunc = function () {
                  var a = [];
                  switch (this.parMode) {
                    case 0:
                      for (var b = inStrips.concat(lineinStrips), c = 0; c < b.length; c++) a.push(b[c].name + "src");
                      break;
                    case 1:
                      a.push("hwoutm.0.src");
                      a.push("hwoutm.1.src");
                      for (c = 0; 8 > c; c++) a.push("hwoutaux." + c + ".src");
                      for (c = 0; 4 > c; c++) a.push("hwouthp." + c + ".src");
                      break;
                    case 2:
                      for (c = 0; 32 > c; c++) a.push("casc." + c + ".src");
                      break;
                    case 3:
                      for (b = inStrips.concat(lineinStrips), c = 0; c < b.length; c++) a.push(b[c].name + "scsrc");
                  }
                  b = [];
                  switch (this.parSrc) {
                    case 0:
                      for (c = 0; 20 > c; c++) b.push("hw." + c);
                      for (c = 0; 4 > c; c++) b.push("none");
                      for (c = 0; 2 > c; c++) b.push("li." + c);
                      break;
                    case 1:
                      for (c = 0; 22 > c; c++) b.push("ua." + c);
                      (0 != this.parMode && 3 != this.parMode) || b.splice(20, 0, "none", "none", "none", "none");
                      break;
                    case 2:
                    case 3:
                      for (c = 0; 32 > c; c++) b.push("ub." + c);
                      break;
                    case 4:
                    case 5:
                      for (c = 0; 32 > c; c++) b.push("cs." + c);
                      break;
                    case 6:
                      b.push("m.0");
                      b.push("m.1");
                      var d = 8;
                      if (0 == this.parMode || 3 == this.parMode) d = 10;
                      for (c = 0; c < d; c++) b.push("a." + c);
                      for (c = 0; 4 > c; c++) b.push("hp." + c);
                  }
                  for (c = 0; c < a.length; c++) setValue(a[c], b[c] || "none");
                  drawAll();
                }),
                showConfBox(lang.PATCH_1_1));
          };
          this.scheck = new CHECKBUTTON(this);
          this.scheck.setAnchors(null, 10, 40, null);
          this.scheck.setSize(101, 40);
          this.scheck.text = formatButtonText(lang.ACTIVATE_SOUNDCHECK);
          this.scheck.textColor = this.scheck.color = color.green;
          this.scheck.textColor2 = color.white;
          this.scheck.setKey("var.mtk.soundcheck");
          this.scheck.regKey("var.mtk.soundcheck");
          this.scheck.onToggle = function () {
            updateByKey("var.mtk.soundcheck");
          };
        },
        calcGeometry: function () {
          this.w = this.parent.w - this.x;
          this.h = this.parent.h - this.y;
          this.hh = this.grid.y + this.grid.h + 10;
          this.maxY = this.hh - this.h;
          0 > this.maxY && (this.maxY = 0);
          this.offsetY = bound(this.offsetY, 0, this.maxY);
        },
        paint: function () {
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, this.offsetY, this.w, this.h);
          if (this.hh > this.h) {
            ctx.fillStyle = "rgba(255,255,255,0.04)";
            ctx.fillRoundRect(this.w - 22 - 2, this.offsetY + 2, 22, this.h - 4, 8);
            ctx.fillStyle = "rgba(255,255,255,0.12)";
            var a = (this.h / (this.h + this.maxY)) * (this.h - 4);
            ctx.fillRoundRect(this.w - 22 - 2, this.offsetY + ((2 + (this.offsetY / this.maxY) * (this.h - 4 - a)) | 0), 22, a, 8);
          }
        },
      }),
      R_GRID2 = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "R_GRID2";
          this.needMoveEvt = !0;
          this.holdTimer = null;
          this.w = 500;
          this.h = 580;
          this.xHeight = 21;
          this.yWidth = 70;
          this.rightHeaders = !0;
          this.cols = 20;
          this.rows = 22;
          this.rowH = 32;
          this.mode = 0;
          this.leftColor = this.topColor = "#eeeeee";
          this.clrArr = [color.LOCAL, color.USB, color.SD];
          this.selected = 0;
          this.namesX = [];
          this.itemsX = [];
          this.namesY = [];
          this.itemsY = [];
          this.blockedY = [];
          this.blockedX = [];
          this.fontLeft = this.fontTop = "16px open_sans_condensedbold";
          this.strips = inStrips.concat(lineinStrips);
        },
        setCols: function (a, b) {
          this.namesX = a || [];
          this.itemsX = b || [];
          this.cols = b.length;
          regUpdate(this.parent);
        },
        setRows: function (a, b) {
          this.namesY = a || [];
          this.itemsY = b || [];
          this.rows = b.length;
          this.calcGeometry();
          regUpdate(this.parent);
        },
        onDown: function (a, b) {
          var c = this.yWidth,
            d = this.xHeight,
            f = ((this.w - c) / this.cols) | 0,
            e = ((this.h - d) / this.rows) | 0,
            g = f * this.cols;
          this.rightHeaders && (c = 0);
          var h = b - this.globalY(),
            k = a - this.globalX();
          h < this.xHeight ||
          (this.rightHeaders && k > g
            ? ((d = ((h - d) / e) | 0), 0 > d || d >= this.rows || ((this.selected = d), regUpdate(this)))
            : ((d = ((h - d) / e) | 0),
              (c = (k - c) / f),
            0 > d ||
            d >= this.rows ||
            (0 <= c && (isMTKbusy() ? showPopupMsg(lang.PATCHING_DURING_MTK, 1e3) : this.setValue(d, bound(c | 0, 0, this.cols - 1))),
              (this.selected = d),
              regUpdate(this),
              clearTimeoutC(this.holdTimer),
              (this.holdTimer = setTimeout(this.onHold.bind(this), 1e3)))));
        },
        onMove: function (a, b) {
          var c = this.xHeight,
            d = ((this.h - c) / this.rows) | 0,
            f = (((this.w - this.yWidth) / this.cols) | 0) * this.cols,
            e = b - this.globalY(),
            g = a - this.globalX();
          e < this.xHeight || (this.rightHeaders && g > f) || ((c = ((e - c) / d) | 0), 0 > c || c >= this.rows || regUpdate(this));
        },
        onUp: function () {
          clearTimeoutC(this.holdTimer);
        },
        onHold: function () {
          this.setValue(this.selected, -1);
          regUpdate(this);
        },
        getValue: function (a) {
          return getValue(this.itemsY[a]);
        },
        setValue: function (a, b) {
          if (!this.blockedY.contains(a) && !this.blockedX.contains(b)) {
            var c = this.itemsY[a];
            if (!c) return !1;
            var d = -1 == b ? "none" : this.itemsX[b];
            ROUTE_UNDO_ARR.push([c, getValue(c)]);
            setValue(c, d);
            return !0;
          }
        },
        patch11: function () {
          for (var a = 0; a < this.itemsY.length; a++) setValue(this.itemsY[a], this.itemsX[a] || "");
        },
        getNameX: function (a) {
          return this.namesX[a] || "" + (a + 1);
        },
        getNameY: function (a) {
          return this.namesY[a] || this.strips[a].getName();
        },
        getNameColorY: function (a) {
          return color.LOCAL;
        },
        calcGeometry: function () {
          this.h = this.xHeight + this.rows * this.rowH;
        },
        paint: function () {
          var a = this.parent.offsetY,
            a = a > this.y ? -this.y + a : 0,
            b = this.yWidth,
            c = this.xHeight,
            d = ((this.w - b) / this.cols) | 0,
            f = ((this.h - c) / this.rows) | 0,
            e = d * this.cols;
          this.rightHeaders && (b = 0);
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, 0, this.w, this.h);
          ctx.fillStyle = color.black;
          ctx.fillRect(b, c, d * this.cols, f * this.rows);
          ctx.lineWidth = 1;
          ctx.strokeStyle = "#28292A";
          ctx.beginPath();
          for (var g = 0; g <= this.rows; g++) {
            var h = c + f * g + 0.5;
            ctx.moveTo(0, h);
            ctx.lineTo(this.w, h);
          }
          for (g = 0; g <= this.cols; g++) {
            var k = b + d * g + 0.5;
            ctx.moveTo(k, 0);
            ctx.lineTo(k, this.h);
          }
          ctx.moveTo(0.5, c);
          ctx.lineTo(0.5, this.h);
          ctx.moveTo(this.w - 0.5, c);
          ctx.lineTo(this.w - 0.5, this.h);
          ctx.stroke();
          ctx.textAlign = this.rightHeaders ? "left" : "right";
          ctx.textBaseline = "middle";
          ctx.font = this.fontLeft;
          ctx.fillStyle = this.leftColor;
          for (g = 0; g < this.rows; g++)
            ctx.drawText(this.getNameY(g), this.rightHeaders ? e + 6 : this.yWidth - 4, c + (g + 0.5) * f, { max: this.rightHeaders ? this.w - e - 7 : this.yWidth - 6, shadow: ["#111", 0, 1, 1] });
          var m = -1;
          ctx.lineWidth = 3;
          for (g = 0; g < this.rows; g++) {
            this.blockedY.contains(g) && ((ctx.fillStyle = "rgba(244,255,255,0.04)"), ctx.fillRect(b, c + g * f, this.w - b, f + 1));
            var p = g,
              q = this.getValue(g),
              r = this.itemsX.indexOf(q);
            if (!(0 > r)) {
              ctx.strokeStyle = "hsla(" + 32 * g + ",40%,30%,0.85)";
              q = 0;
              g == this.selected && ((ctx.fillStyle = "rgba(244,255,255,0.1)"), ctx.fillRect(0, c + g * f, b, f + 1));
              g == this.selected &&
              ((ctx.fillStyle = "rgba(244,255,255,0.1)"),
                (m = r),
                this.rightHeaders ? ((h = (r * d) | 0), ctx.fillRect(h, c + g * f, this.w - h, f + 1)) : ctx.fillRect(b, c + g * f, (r * d + d + 1) | 0, f + 1),
              0 <= r && ctx.fillRect(b + r * d, 0, d + 1, (c + g * f) | 0));
              var k = Math.floor(b + r * d + d / 2) + 0.5,
                h = Math.floor(c + p * f + f / 2) + 0.5,
                r = b + r * d,
                n = c + p * f;
              ctx.beginPath();
              this.rightHeaders ? ctx.moveTo(e - 2, h) : ctx.moveTo(b + 1, h);
              ctx.lineTo(r + q + 1, h);
              ctx.moveTo(k, c + 1);
              ctx.lineTo(k, n + q + 1 - 2);
              ctx.stroke();
              ctx.fillStyle = ctx.strokeStyle;
              0 < p && ctx.fillTriangle2(k + 8, n - 8 + 2, k, n + 2, k - 8, n - 8 + 2);
              this.rightHeaders ? ctx.fillTriangle2(e, h, e - 8, h - 8, e - 8, h + 8) : ctx.fillTriangle2(b, h, b + 8, h - 8, b + 8, h + 8);
            }
          }
          for (g = 0; g < this.rows; g++)
            (p = g),
              (q = this.getValue(g)),
              (r = this.itemsX.indexOf(q)),
            0 > r || ((ctx.fillStyle = "hsla(" + 32 * g + ",50%,30%,1.0)"), (r = b + r * d), (n = c + p * f), (q = 0), ctx.fillRoundRect(r + q + 1, n + q + 1, d - 2 * q - 1, f - 2 * q - 1, 8));
          ctx.textAlign = "center";
          ctx.textBaseline = "middle";
          ctx.font = this.fontTop;
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, a, this.w, this.xHeight);
          0 <= m && ((ctx.fillStyle = "rgba(244,255,255,0.1)"), ctx.fillRect(b + m * d, a, d + 1, this.xHeight));
          ctx.fillStyle = this.topColor;
          for (g = 0; g < this.cols; g++) ctx.drawText(this.getNameX(g), b + (g + 0.5) * d, 12 + a, { max: d, shadow: ["#000", 0, 1, 1] });
        },
        drawLines: function (a, b, c) {},
      });
    function createRoutingArrays() {
      var a = [];
      inStrips.forEach(function (b) {
        a.push(b.name + "src");
      });
      lineinStrips.forEach(function (b) {
        a.push(b.name + "src");
      });
      for (var b = [], c = 0; 2 > c; c++) b.push("hwoutm." + c + ".src");
      for (c = 0; 8 > c; c++) b.push("hwoutaux." + c + ".src");
      for (c = 0; 4 > c; c++) b.push("hwouthp." + c + ".src");
      for (c = 0; 4 > c; c++) b.push("hwouthpdsp." + c + ".src");
      for (var d = [], c = 0; 22 > c; c++) d.push("usba." + c + ".src");
      d = [];
      for (c = 0; 32 > c; c++) d.push("casc." + c + ".src");
      var f = [];
      inStrips.forEach(function (a) {
        f.push(a.name + "scsrc");
      });
      lineinStrips.forEach(function (a) {
        f.push(a.name + "scsrc");
      });
      log(a);
      log(b);
      log(d);
      log(f);
      log("===");
      b = [];
      for (c = 0; 20 > c; c++) b.push("hw." + c);
      for (c = 0; 2 > c; c++) b.push("li." + c);
      d = [];
      d.push("m.0");
      d.push("m.1");
      for (c = 0; c < auxStrips.length; c++) d.push("a." + c);
      for (var e = [], c = 0; 22 > c; c++) e.push("ua." + c);
      for (var g = [], c = 0; 32 > c; c++) g.push("ub." + c);
      for (var h = [], c = 0; 32 > c; c++) h.push("cs." + c);
      log(b);
      log(d);
      log(e);
      log(g);
      log(h);
    }
    function parseInputStr(a) {
      switch (a) {
        case "hw":
          return 0;
        case "usb":
          return 1;
        case "sd":
          return 2;
      }
      return -1;
    }
    function clearTimeoutC(a) {
      null != a && clearTimeout(a);
    }
    function saveToCurrentShow() {
      var a = getValue("var.currentShow");
      a && (sendMessage(E_COMMANDS.SAVESHOW + "^" + a), setValue("var.unsaved.chsafes", 0));
    }
    var netConfig = null,
      NET_CFG = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "NET_CFG_PAGE";
          this.y = measures.topWidgetHeight;
          this.needClip = !0;
          this.mode = -1;
          this.color = color.blue;
          this.tabButtons = [];
          this.initWidgets();
          this.setMode(0);
        },
        onShow: function () {
          var a = this.pages[this.mode];
          if (isDefined(a)) a.onShow();
        },
        setMode: function (a) {
          this.mode = a;
          for (a = 0; a < this.pages.length; a++) this.pages[a].hide();
          this.mode < this.pages.length && this.pages[this.mode].show();
          regUpdate(this);
        },
        nextMode: function () {
          this.mode == this.pages.length - 1 ? this.setMode(0) : this.setMode(this.mode + 1);
        },
        initWidgets: function () {
          for (var a = ["HOTSPOT", "WI-FI", "LAN", "ADMIN PASS", "STATE"], b = 0; b < a.length; b++) {
            var c = new TabButton(this);
            c.color = c.textColor = "hsl(" + 32 * (b + 1) + ",50%,45%)";
            c.mode = b;
            c.text = a[b];
            c.setSize(100, 30);
            this.tabButtons.push(c);
          }
          this.pages = [];
          this.pages.push(new HOTSPOT_PAGE(this));
          this.pages.push(new SETTINGS_SUBPAGE(this));
          this.pages.push(new SETTINGS_SUBPAGE(this));
          this.pages.push(new SETTINGS_SUBPAGE(this));
          this.pages.push(new SETTINGS_SUBPAGE(this));
        },
        calcGeometry: function () {
          this.w = screenWidth - measures.mixerRightMargin;
          this.h = screenHeight - this.y;
          for (var a = 0; a < this.tabButtons.length; a++) this.tabButtons[a].setPos(this.w - (this.tabButtons[a].w + 1) * (this.tabButtons.length - a), 5);
        },
        paint: function () {
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, 0, this.w, this.h);
          ctx.fillStyle = this.tabButtons[this.mode].color;
          ctx.fillRect(4, 35, this.w - 4, 4);
        },
      });
    function getNetValue(a) {
      return netConfig[a];
    }
    function setNetValue(a, b) {
      netConfig[a] = b;
      regUpdate(networkWidget);
    }
    var HOTSPOT_PAGE = Class.create(SETTINGS_SUBPAGE, {
      initialize: function ($super, b) {
        $super(b);
        this.widgetName = "HOTSPOT_PAGE";
        this.initWidgets();
      },
      initWidgets: function () {
        var a = 0;
        this.onoff = new SWITCHBOX(this);
        this.onoff.setPos(100, 60 + 80 * a++);
        this.onoff.setItems([lang.OFF, lang.ON]);
        this.onoff.setItemWidth(100);
        this.onoff.h = 40;
        this.onoff.getState = function () {
          this.state = getNetValue("ap_enabled") ? 1 : 0;
        };
        this.onoff.valueFunc = function () {
          isBlocked("gsettings") ? showPopupMsg(lang.LOCKED, 800) : setNetValue("ap_enabled", this.state);
        };
        this.ssid = new INPUTBOX(this);
        this.ssid.setAnchors(100, 60 + 80 * a++);
        this.ssid.getState = function () {
          this.text = getNetValue("ap_ssid");
        };
        this.ssid.valueFunc = function (a) {
          setNetValue("ap_ssid", a);
        };
        this.ssid_br = new SWITCHBOX(this);
        this.ssid_br.setPos(100, 60 + 80 * a++);
        this.ssid_br.setItems([lang.OFF, lang.ON]);
        this.ssid_br.setItemWidth(100);
        this.ssid_br.h = 40;
        this.ssid_br.getState = function () {
          this.state = getNetValue("ap_ssid_mode") ? 1 : 0;
        };
        this.ssid_br.valueFunc = function () {
          isBlocked("gsettings") ? showPopupMsg(lang.LOCKED, 800) : setNetValue("ap_ssid_mode", this.state);
        };
        var b = {
            AL: "Albania",
            DZ: "Algeria",
            AR: "Argentina",
            AM: "Armenia",
            AW: "Aruba",
            AU: "Australia",
            AT: "Austria",
            AZ: "Azerbaijan",
            BH: "Bahrain",
            BD: "Bangladesh",
            BB: "Barbados",
            BY: "Belarus",
            BE: "Belgium",
            BZ: "Belize",
            BO: "Bolivia",
            BA: "Bosnia and Herzegovina",
            BR: "Brazil",
            BN: "Brunei Darussalam",
            BG: "Bulgaria",
            KH: "Cambodia",
            CA: "Canada",
            CL: "Chile",
            CN: "China",
            CO: "Colombia",
            CR: "Costa Rica",
            HR: "Croatia",
            CY: "Cyprus",
            CZ: "Czech Republic",
            DK: "Denmark",
            DO: "Dominican Republic",
            EC: "Ecuador",
            EG: "Egypt",
            SV: "El Salvador",
            EE: "Estonia",
            FI: "Finland",
            FR: "France",
            GE: "Georgia",
            DE: "Germany",
            GR: "Greece",
            GL: "Greenland",
            GD: "Grenada",
            GU: "Guam",
            GT: "Guatemala",
            HT: "Haiti",
            HN: "Honduras",
            HK: "Hong Kong",
            HU: "Hungary",
            IS: "Iceland",
            IN: "India",
            ID: "Indonesia",
            IR: "Iran",
            IE: "Ireland",
            IL: "Israel",
            IT: "Italy",
            JM: "Jamaica",
            JP: "Japan",
            JO: "Jordan",
            KZ: "Kazakhstan",
            KE: "Kenya",
            KR: "Korea",
            KW: "Kuwait",
            LV: "Latvia",
            LB: "Lebanon",
            LR: "Liberia",
            LI: "Liechtenstein",
            LT: "Lithuania",
            LU: "Luxembourg",
            MO: "Macao",
            MK: "Macedonia",
            MY: "Malaysia",
            MT: "Malta",
            MX: "Mexico",
            MC: "Monaco",
            MA: "Morocco",
            NP: "Nepal",
            NL: "Netherlands",
            NZ: "New Zealand",
            NO: "Norway",
            OM: "Oman",
            PK: "Pakistan",
            PA: "Panama",
            PG: "Papua New Guinea",
            PE: "Peru",
            PH: "Philippines",
            PL: "Poland",
            PT: "Portugal",
            PR: "Puerto Rico",
            QA: "Qatar",
            RO: "Romania",
            RU: "Russian Federation",
            RW: "Rwanda",
            BL: "Saint Barthelemy",
            SA: "Saudi Arabia",
            SG: "Singapore",
            SK: "Slovakia",
            SI: "Slovenia",
            SB: "Solomon Islands",
            ZA: "South Africa",
            ES: "Spain",
            LK: "Sri Lanka",
            SE: "Sweden",
            CH: "Switzerland",
            SY: "Syrian Arab Republic",
            TW: "Taiwan",
            TH: "Thailand",
            TT: "Trinidad and Tobago",
            TN: "Tunisia",
            TR: "Turkey",
            UA: "Ukraine",
            AE: "United Arab Emirates",
            GB: "United Kingdom",
            US: "United States",
            UY: "Uruguay",
            UZ: "Uzbekistan",
            VE: "Venezuela",
            VN: "Vietnam",
            YE: "Yemen",
            ZW: "Zimbabwe",
            "00": "Other / Unlisted",
          },
          c = Object.keys(b),
          d = Object.keys(b).map(function (a) {
            return b[a];
          });
        this.apcountry = new LIST(this);
        this.apcountry.setPos(100, 60 + 80 * a);
        this.apcountry.setItems(d);
        this.apcountry.h = 240;
        this.apcountry.values = c;
        this.apcountry.getActiveItem = function () {
          var a = getNetValue("ap_country");
          this.activeItemIdx = this.values.indexOf(a);
        };
        this.apchannel = new LIST(this);
        this.apchannel.setPos(500, 60 + 80 * a);
        this.apchannel.setItems(d);
        this.apchannel.h = 240;
        this.apchannel.getActiveItem = function () {
          var a = getNetValue("ap_channel");
          this.activeItemIdx = this.items.indexOf(a);
        };
        a++;
        a++;
        a++;
        a++;
        this.apmode = new SWITCHBOX(this);
        this.apmode.setPos(100, 60 + 80 * a++);
        this.apmode.setItems(["NONE", "WPA2"]);
        this.apmode.setItemWidth(100);
        this.apmode.h = 40;
        this.apmode.getState = function () {
          this.state = getNetValue("ap_mode") ? 1 : 0;
        };
        this.apmode.valueFunc = function () {
          isBlocked("gsettings") ? showPopupMsg(lang.LOCKED, 800) : setNetValue("ap_mode", this.state);
        };
      },
      drawLabel: function (a, b) {
        ctx.drawText(a, b.x, b.y - 16, { color: color.white, align: "left", valign: "middle", font: font.editbox, shadow: Shadow.main });
      },
      paint: function () {
        ctx.fillStyle = color.eqBg;
        ctx.fillRect(0, 0, this.w, this.h);
        this.drawLabel("Enable the Ui's internal Hotspot (AP)", this.onoff);
        this.drawLabel("SSID", this.ssid);
        this.drawLabel("SSID Broadcast", this.ssid_br);
        this.drawLabel("Wireless Regulatory Domain", this.apcountry);
        this.drawLabel("Channel (ignored when remote WiFi is configured)", this.apchannel);
        this.drawLabel("Security", this.apmode);
      },
    });
    tvWidget = null;
    var MODALS = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "MODALS";
          this.y = measures.topWidgetHeight;
          this.needClip = !0;
          this.mode = 0;
          this.color = color.modal;
          this.initWidgets();
          this.setMode(0);
        },
        setMode: function (a) {
          this.mode = a;
          this.pages.each(function (a) {
            a.hide();
          });
          switch (a) {
            case E_MODAL_MODE.TOTALVIEW:
              this.pages[0].show();
              break;
            case E_MODAL_MODE.MOREME:
              this.pages[1].show();
              break;
            case E_MODAL_MODE.MUTES:
              this.pages[2].show();
              break;
            case E_MODAL_MODE.VIEWS:
              this.pages[3].show();
              break;
            case E_MODAL_MODE.SUBS:
              this.pages[4].show();
              break;
            case E_MODAL_MODE.VCA:
              this.pages[5].show();
              break;
            case E_MODAL_MODE.CPA:
              this.pages[6] && this.pages[6].show();
              break;
            case E_MODAL_MODE.AUTOMIX:
              this.pages[7] && this.pages[7].show();
          }
          this.color = this.clr[a];
          regUpdate(this);
        },
        nextMode: function () {
          this.mode == this.pages.length - 1 ? this.setMode(0) : this.setMode(this.mode + 1);
        },
        onShow: function () {
          IS_UI_24 && SHOW_WIP && ((this.tabButtons[E_MODAL_MODE.CPA].enabled = settings.cpa), this.calcGeometry());
          for (var a = 0; a < this.pages.length; a++) if (this.pages[a].enabled) this.pages[a].onShow();
        },
        onHide: function () {
          for (var a = 0; a < this.pages.length; a++) if (this.pages[a].enabled) this.pages[a].onHide();
        },
        initWidgets: function () {
          this.pages = [];
          this.pages.push(new METERS_PAGE(this));
          var a = new MOREME(this);
          a.setAnchors(0, 40, 0, 0);
          a.calcGeometry = function () {
            var a = this.w - 40;
            this.ME_VU.w = (0.35 * a) | 0;
            this.BAND_VU.w = (0.35 * a) | 0;
            this.WHEEL.x = 10 + this.ME_VU.w + 10;
            this.WHEEL.w = (0.3 * a) | 0;
          };
          this.pages.push(a);
          this.pages.push(new MUTESPAGE(this));
          this.pages.push(new VIEWSPAGE(this));
          this.pages.push(new SUBSPAGE(this));
          IS_UI_24 && (this.pages.push(new VCAPAGE(this)), this.pages.push(new CPAPAGE(this)), this.pages.push(new AUTOMIXPAGE(this)));
          tvWidget = this.pages[0];
          var a = 112,
            b = [lang.METERS, lang.MORE_ME, lang.MUTES, lang.VIEWS, lang.SUBS];
          this.clr = [color.yellow, color.orange, "#bb4242", color.modal, color.sub];
          IS_UI_24 && (b.push(lang.VCA), this.clr.push(color.green), b.push(lang.HIQNET), this.clr.push(color.CPA), b.push(lang.AUTOMIX), this.clr.push(color.AUTOMIX));
          for (var c = 0; c < this.clr.length; c++) this.clr[c] = LightenDarkenColor(this.clr[c], this.clr[c] != color.CPA ? 16 : 24);
          7 < b.length && (a -= 6);
          this.tabButtons = [];
          for (c = 0; c < b.length; c++) {
            var d = new TabButton(this);
            d.mode = c;
            d.text = b[c];
            d.color = d.textColor = this.clr[c];
            d.setSize(a, 30);
            b[c] != lang.HIQNET || SHOW_WIP || d.hide();
            this.tabButtons.push(d);
          }
        },
        calcGeometry: function () {
          this.w = screenWidth - measures.mixerRightMargin;
          this.h = screenHeight - this.y;
          for (var a = 0, b = 0; b < this.tabButtons.length; b++) this.tabButtons[b].enabled && a++;
          for (var c = 0, b = 0; b < this.tabButtons.length; b++) this.tabButtons[b].enabled && (this.tabButtons[b].setPos(this.w - (this.tabButtons[c].w + 1) * (a - c), 5), c++);
        },
        paint: function () {
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, 0, this.w, this.h);
          ctx.fillStyle = this.color;
          ctx.fillRect(4, 35, this.w - 4, 4);
        },
      }),
      EMPTY_PAGE = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "EMPTY";
          this.y = 40;
          this.enabled = !1;
          this.initWidgets();
        },
        initWidgets: function () {},
        calcGeometry: function () {
          this.w = this.parent.w - this.x;
          this.h = this.parent.h - this.y - 5;
        },
        paint: function () {
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, 0, this.w, this.h);
          ctx.font = font.editbox;
          ctx.textAlign = "right";
          ctx.fillStyle = color.tabText;
          ctx.fillText(lang.EMPTY, 214, 50);
        },
      }),
      MUTESPAGE = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "MUTESPAGE";
          this.y = 40;
          this.enabled = !1;
          this.color = color.red;
          this.mode = 0;
          this.initWidgets();
          this.setMode(0);
        },
        sync: function () {
          if (this.rename) {
            var a = "mg." + this.mode + ".";
            this.rename.unRegAllKeys();
            this.rename.regKey(a + "name");
          }
        },
        onShow: function () {
          var a = this.BUTTONS.length;
          hideHPAUX ? (this.BUTTONS[a - 1].hide(), this.BUTTONS[a - 2].hide()) : (this.BUTTONS[a - 1].show(), this.BUTTONS[a - 2].show());
        },
        onHide: function () {},
        onDown: function (a, b) {
          this.lastPressPoint = this.pressPoint;
          this.pressPoint = [a, b];
        },
        onUp: function (a) {
          var b = Date.now(),
            c = Math.abs(this.lastPressPoint[0] - this.pressPoint[0]),
            d = Math.abs(this.lastPressPoint[1] - this.pressPoint[1]);
          2 < mouseTargets.length ||
          (isDefined(tHash[a]) && 2 < tHash[a].length) ||
          (30 > c && 30 > d && b - this.lastClickTime < DBL_CLK_TIME ? (this.onDouble(), (this.lastClickTime = b - DBL_CLK_TIME)) : (this.lastClickTime = b));
        },
        onDouble: function () {
          setMode(E_MODE.MIX);
        },
        setMode: function (a) {
          5 < a || ((this.mode = a), this.sync(), regUpdate(this));
        },
        initWidgets: function () {
          var a = this;
          this.VGB = [];
          for (var b = 0; 6 > b; b++) {
            var c = new TabButton(this);
            c.setPos(240 + 50 * b, 100);
            c.setSize(40, 30);
            c.mode = b;
            c.text = "" + (b + 1);
            this.VGB.push(c);
          }
          this.bRESET = new MENUBUTTON(this);
          this.bRESET.setPos(40, 38);
          this.bRESET.setSize(90, 30);
          this.bRESET.text = lang.RESET;
          this.bRESET.onPress = function () {
            muteGroupReset(a.mode);
          };
          IS_UI_24 &&
          ((this.rename = new INPUTBOX(this)),
            this.rename.setAnchors(340, 38),
            (this.rename.labelDX = 10),
            (this.rename.w = 190),
            (this.rename.label = lang.GROUP_NAME + ":"),
            (this.rename.getState = function () {
              this.text = getValue("mg." + a.mode + ".name") || "";
            }),
            (this.rename.valueFunc = function (b) {
              setValue("mg." + a.mode + ".name", b);
            }));
          this.BUTTONS = [];
          var d = 60,
            f = 0,
            e = 46;
          24 < inStrips.length && 690 > this.h && ((e = 44), (d = 54));
          for (var g = mixerWidget.strips, b = 0; b < g.length; b++)
            (c = new CHECKBUTTON(this)),
            0 == b % 8 && 0 != b && f++,
              c.setSize(90, e),
              c.setPos(40 + 100 * (b - 8 * f), 100 + d * f),
              (c.idx = b),
              (c.st = g[b]),
              (c.text = g[b].text),
              (c.textColor = g[b].color),
              (c.getState = function () {
                this.state = 0 != (this.st.getNameValue("mgmask") & (1 << this.parent.mode)) ? 1 : 0;
                this.text = this.st.getName();
                this.textColor = this.st.getColor();
              }),
              (c.onToggleUp = function () {
                var b = 1 << a.mode,
                  c = mixerWidget.strips[this.idx].getNameValue("mgmask");
                mixerWidget.strips[this.idx].setNameValue("mgmask", c | b);
              }),
              (c.onToggleDown = function () {
                var b = 1 << a.mode,
                  c = mixerWidget.strips[this.idx].getNameValue("mgmask");
                mixerWidget.strips[this.idx].setNameValue("mgmask", c & ~b);
                if (getValue("mgmask") & b) {
                  for (var d = (c = 0); d < mixerWidget.strips.length; d++) g[d].getNameValue("mgmask") & b && c++;
                  0 == c && muteGroupOFF(a.mode);
                }
              }),
              (c.onToggle = function () {
                setValue("var.unsaved.mutegroups", 1);
                regUpdate(a.bSAVE);
              }),
              this.BUTTONS.push(c);
          f++;
          f += 0.5;
          this.bSAVE = new MENUBUTTON(this);
          this.bSAVE.setAnchors(640, 100 + d * f, null, null);
          this.bSAVE.setSize(190, 40);
          this.bSAVE.text = lang.SAVE_TO_SHOW;
          this.bSAVE.textColor = color.yellow;
          this.bSAVE.color = color.green;
          this.bSAVE.getState = function () {
            this.disabled = 0 == getValue("var.unsaved.mutegroups");
          };
          this.bSAVE.onPress = function () {
            if (isBlocked("shows")) showPopupMsg(lang.LOCKED, 1e3);
            else {
              var a = getValue("var.currentShow");
              0 != a.length && (sendMessage(E_COMMANDS.SAVESHOW + "^" + a), setValue("var.unsaved.mutegroups", 0));
            }
          };
        },
        calcGeometry: function () {
          this.w = this.parent.w - this.x;
          this.h = this.parent.h - this.y;
          for (var a = 0; a < this.VGB.length; a++) this.VGB[a].setPos(this.w - 326 + 50 * a, 38);
        },
        paint: function () {
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, 0, this.w, this.h);
          ctx.font = font.editbox;
          ctx.textAlign = "right";
          ctx.fillStyle = color.white;
          ctx.fillText(lang.MUTE_GROUP_BUTTON_ASSIGN, this.w - 80, 26);
          for (var a = getValue("mgmask"), b = 0; 6 > b; b++) a & (1 << b) && ((ctx.fillStyle = this.color), ctx.fillRect(this.VGB[b].x, this.VGB[b].y + this.VGB[b].h + 4, this.VGB[b].w, 2));
        },
      }),
      VIEWSPAGE = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "VIEWSPAGE";
          this.y = 40;
          this.enabled = !1;
          this.color = color.modal;
          this.viewNum = 6;
          this.mode = 0;
          this.initWidgets();
          this.setMode(0);
        },
        onShow: function () {
          var a = this.BUTTONS.length;
          this.BUTTONS.length && (hideHPAUX ? (this.BUTTONS[a - 1].hide(), this.BUTTONS[a - 2].hide()) : (this.BUTTONS[a - 1].show(), this.BUTTONS[a - 2].show()));
        },
        onDown: function (a, b) {
          this.lastPressPoint = this.pressPoint;
          this.pressPoint = [a, b];
        },
        onUp: function (a) {
          var b = Date.now(),
            c = Math.abs(this.lastPressPoint[0] - this.pressPoint[0]),
            d = Math.abs(this.lastPressPoint[1] - this.pressPoint[1]);
          2 < mouseTargets.length ||
          (isDefined(tHash[a]) && 2 < tHash[a].length) ||
          (30 > c && 30 > d && b - this.lastClickTime < DBL_CLK_TIME ? (this.onDouble(), (this.lastClickTime = b - DBL_CLK_TIME)) : (this.lastClickTime = b));
        },
        onDouble: function () {
          setMode(E_MODE.MIX);
        },
        setMode: function (a) {
          a >= this.viewNum || ((this.mode = a), regUpdate(this));
        },
        initWidgets: function () {
          var a = this;
          this.VGB = [];
          for (var b = 0; b < this.viewNum; b++) {
            var c = new TabButton(this);
            c.setPos(240 + 50 * b, 100);
            c.setSize(40, 30);
            c.mode = b;
            c.text = "" + (b + 1);
            this.VGB.push(c);
          }
          this.bRESET = new MENUBUTTON(this);
          this.bRESET.setPos(40, 38);
          this.bRESET.setSize(90, 30);
          this.bRESET.text = lang.RESET;
          this.bRESET.onPress = function () {
            var b = a.mode;
            settings.viewGroups[b] = [];
            settingsStorage.put("viewGroups", settings.viewGroups);
            0 <= b && activeViewGroup == b && mixerWidget.showViewGroup(activeViewGroup);
            settings.viewGroupsNames[b] = "";
            settingsStorage.put("viewGroupsNames", settings.viewGroupsNames);
            regUpdate(a);
          };
          this.bSORT = new MENUBUTTON(this);
          this.bSORT.setPos(140, 38);
          this.bSORT.setSize(90, 30);
          this.bSORT.text = lang.SORT;
          this.bSORT.onPress = function () {
            var b = a.mode,
              c = getVG(b),
              c = c.sort(function (a, b) {
                return a - b;
              });
            saveVG(b, c);
            0 <= b && activeViewGroup == b && mixerWidget.showViewGroup(activeViewGroup);
            regUpdate(a);
          };
          IS_UI_24 &&
          ((this.rename = new INPUTBOX(this)),
            this.rename.setAnchors(340, 38),
            (this.rename.labelDX = 10),
            (this.rename.w = 190),
            (this.rename.label = lang.GROUP_NAME + ":"),
            (this.rename.getState = function () {
              this.text = getVGName(a.mode);
            }),
            (this.rename.valueFunc = function (b) {
              setVGName(a.mode, (b || "").trim());
            }));
          this.BUTTONS = [];
          var d = 60,
            f = 0,
            e = 46;
          24 < inStrips.length && 690 > this.h && ((e = 44), (d = 54));
          for (var g = mixerWidget.strips, b = 0; b < g.length; b++)
            (c = new SLOTBUTTON(this)),
              (c.showIndex = !0),
            0 == b % 8 && 0 != b && f++,
              c.setSize(90, e),
              c.setPos(40 + (c.w + 10) * (b - 8 * f), 100 + d * f),
              (c.idx = b),
              (c.st = g[b]),
              (c.id = g[b].id),
              (c.text = g[b].text),
              (c.textColor = g[b].color),
              (c.getState = function () {
                var b = getVG(a.mode).indexOf(this.id);
                this.state = -1 != b;
                this.text = this.st.getName();
                this.textColorMain = this.textColor = this.st.getColor();
                this.idxText = "" + (-1 == b ? "" : b + 1);
              }),
              (c.onToggleUp = function () {
                var b = getVG(a.mode);
                b.contains(this.id) || b.push(this.id);
                saveVG(a.mode, b);
                activeViewGroup == a.mode && mixerWidget.showViewGroup(a.mode);
                regUpdate(a);
              }),
              (c.onToggleDown = function () {
                var b = getVG(a.mode),
                  c = b.indexOf(this.id);
                -1 != c && b.splice(c, 1);
                saveVG(a.mode, b);
                activeViewGroup == a.mode && mixerWidget.showViewGroup(a.mode);
                regUpdate(a);
              }),
              (c.onToggle = function () {
                checkOrderedVG(a.mode);
              }),
              this.BUTTONS.push(c);
          this.sw = new SWITCHBOX(this);
          this.sw.setItems([lang.LOCAL, lang.GLOBAL]);
          this.sw.setItemWidth(95);
          this.sw.color = color.modal;
          this.sw.setAnchors(40, 588, null, null);
          this.sw.getState = function () {
            this.state = settings.globalVG ? 1 : 0;
          };
          this.sw.valueFunc = function () {
            0 <= activeViewGroup && 100 > activeViewGroup && mixerWidget.showAll();
            settingsStorage.set("globalVG", 1 == this.state);
            regUpdate(a);
          };
          this.save = new MENUBUTTON(this);
          this.save.setAnchors(340, 588, null, null);
          this.save.w = 190;
          this.save.text = lang.SAVE_TO_SHOW;
          this.save.color = color.modal;
          this.save.getState = function () {
            this.disabled = settings.globalVG;
          };
          this.save.onPress = function () {
            isBlocked("shows")
              ? showPopupMsg(lang.LOCKED, 1e3)
              : ((confOk.valueFunc = function () {
                for (var a = 0; 6 > a; a++) {
                  setValue("vg." + a, JSON.stringify(settings.viewGroups[a] || []));
                  IS_UI_24 && setValue("vg." + a + ".name", settings.viewGroupsNames[a] || "");
                  var b = getValue("var.currentShow");
                  if (!b) return;
                  sendMessage(E_COMMANDS.SAVESHOW + "^" + b);
                }
                showPopupMsg(lang.SHOWEXP_SUCCESS);
              }),
                showConfBox(lang.ARE_YOU_SURE));
          };
        },
        calcGeometry: function () {
          this.w = this.parent.w - this.x;
          this.h = this.parent.h - this.y;
          for (var a = 0; a < this.VGB.length; a++) this.VGB[a].setPos(this.w - 326 + 50 * a, 38);
        },
        paint: function () {
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, 0, this.w, this.h);
          ctx.font = font.editbox;
          ctx.textAlign = "right";
          ctx.fillStyle = color.white;
          ctx.fillText(lang.VIEW_GROUP_BUTTON_ASSIGN, this.w - 80, 26);
          if (0 <= activeViewGroup && 10 > activeViewGroup) {
            var a = activeViewGroup;
            ctx.fillStyle = this.color;
            isDefined(this.VGB[a]) && ctx.fillRect(this.VGB[a].x, this.VGB[a].y + this.VGB[a].h + 4, this.VGB[a].w, 2);
          }
        },
      }),
      SUBSPAGE = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "SUBSPAGE";
          this.y = 40;
          this.enabled = !1;
          this.color = color.sub;
          this.mode = -1;
          this.initWidgets();
          this.setMode(0);
        },
        sync: function () {
          if (this.rename) {
            var a = "s." + this.mode + ".";
            this.rename.unRegAllKeys();
            this.rename.regKey(a + "name");
          }
        },
        setMode: function (a) {
          a >= curSetup.sub || ((this.mode = a), this.sync(), regUpdate(this));
        },
        onDown: function (a, b) {
          this.lastPressPoint = this.pressPoint;
          this.pressPoint = [a, b];
        },
        onUp: function (a) {
          var b = Date.now(),
            c = Math.abs(this.lastPressPoint[0] - this.pressPoint[0]),
            d = Math.abs(this.lastPressPoint[1] - this.pressPoint[1]);
          2 < mouseTargets.length ||
          (isDefined(tHash[a]) && 2 < tHash[a].length) ||
          (30 > c && 30 > d && b - this.lastClickTime < DBL_CLK_TIME ? (this.onDouble(), (this.lastClickTime = b - DBL_CLK_TIME)) : (this.lastClickTime = b));
        },
        onDouble: function () {
          setMode(E_MODE.MIX);
        },
        initWidgets: function () {
          var a = this;
          this.VGB = [];
          for (var b = 0; b < curSetup.sub; b++) {
            var c = new TabButton(this);
            c.setPos(240 + 50 * b, 100);
            c.setSize(40, 30);
            c.mode = b;
            c.text = "" + (b + 1);
            this.VGB.push(c);
          }
          this.bRESET = new MENUBUTTON(this);
          this.bRESET.setPos(40, 38);
          this.bRESET.setSize(90, 30);
          this.bRESET.text = lang.RESET;
          this.bRESET.onPress = function () {
            for (var b = 0; b < allStrips.length; b++)
              allStrips[b].type != E_STRIP_TYPE.AUX &&
              allStrips[b].type != E_STRIP_TYPE.FX &&
              allStrips[b].type != E_STRIP_TYPE.SUB &&
              allStrips[b].getNameValue("subgroup") == a.mode &&
              allStrips[b].setNameValue("subgroup", -1);
            activeSubGroup == a.mode && mixerWidget.showSG(a.mode);
          };
          IS_UI_24 &&
          ((this.rename = new INPUTBOX(this)),
            this.rename.setAnchors(340, 38),
            (this.rename.labelDX = 10),
            (this.rename.w = 190),
            (this.rename.label = lang.GROUP_NAME + ":"),
            (this.rename.getState = function () {
              this.text = getValue("s." + a.mode + ".name") || "";
            }),
            (this.rename.valueFunc = function (b) {
              setValue("s." + a.mode + ".name", b);
            }));
          this.BUTTONS = [];
          var d = 60,
            f = 0,
            e = 46;
          24 < inStrips.length && 690 > this.h && ((e = 44), (d = 54));
          for (b = 0; b < allStrips.length; b++) {
            switch (allStrips[b].type) {
              case E_STRIP_TYPE.IN:
              case E_STRIP_TYPE.LINEIN:
              case E_STRIP_TYPE.MEDIA:
                break;
              default:
                continue;
            }
            c = new CHECKBUTTON(this);
            0 == b % 8 && 0 != b && f++;
            c.setSize(90, e);
            c.setPos(40 + (c.w + 10) * (b - 8 * f), 100 + d * f);
            c.idx = b;
            c.id = allStrips[b].id;
            c.text = allStrips[b].text;
            c.textColor = allStrips[b].color;
            c.getState = function () {
              this.state = allStrips[this.idx].getNameValue("subgroup") == a.mode;
              this.text = allStrips[this.idx].getName();
            };
            c.onToggleUp = function () {
              setValue(allStrips[this.id].name + "subgroup", a.mode);
              activeSubGroup == a.mode && mixerWidget.showSG(a.mode);
            };
            c.onToggleDown = function () {
              setValue(allStrips[this.id].name + "subgroup", -1);
              activeSubGroup == a.mode && mixerWidget.showSG(a.mode);
            };
            this.BUTTONS.push(c);
          }
        },
        calcGeometry: function () {
          this.w = this.parent.w - this.x;
          this.h = this.parent.h - this.y;
          for (var a = 0; a < this.VGB.length; a++) this.VGB[a].setPos(this.w - 326 + 50 * a, 38);
        },
        paint: function () {
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, 0, this.w, this.h);
          ctx.font = font.editbox;
          ctx.textAlign = "right";
          ctx.fillStyle = color.white;
          ctx.fillText(lang.SUB_GROUP_FADER_ASSIGN, this.w - 90, 26);
        },
      }),
      VCAPAGE = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "VCAPAGE";
          this.y = 40;
          this.enabled = !1;
          this.color = color.green;
          this.mode = 0;
          this.initWidgets();
          this.setMode(0);
        },
        sync: function () {
          var a = "v." + this.mode + ".";
          this.rename.unRegAllKeys();
          this.rename.regKey(a + "name");
        },
        onShow: function () {},
        onHide: function () {},
        onDown: function (a, b) {
          this.lastPressPoint = this.pressPoint;
          this.pressPoint = [a, b];
        },
        onUp: function (a) {
          var b = Date.now(),
            c = Math.abs(this.lastPressPoint[0] - this.pressPoint[0]),
            d = Math.abs(this.lastPressPoint[1] - this.pressPoint[1]);
          2 < mouseTargets.length ||
          (isDefined(tHash[a]) && 2 < tHash[a].length) ||
          (30 > c && 30 > d && b - this.lastClickTime < DBL_CLK_TIME ? (this.onDouble(), (this.lastClickTime = b - DBL_CLK_TIME)) : (this.lastClickTime = b));
        },
        onDouble: function () {
          setMode(E_MODE.MIX);
        },
        setMode: function (a) {
          5 < a || ((this.mode = a), this.sync(), regUpdate(this));
        },
        initWidgets: function () {
          var a = this;
          this.VGB = [];
          for (var b = 0; 6 > b; b++) {
            var c = new TabButton(this);
            c.setPos(240 + 50 * b, 100);
            c.setSize(40, 30);
            c.mode = b;
            c.text = "" + (b + 1);
            this.VGB.push(c);
          }
          this.BUTTONS = [];
          this.bRESET = new MENUBUTTON(this);
          this.bRESET.setPos(40, 38);
          this.bRESET.setSize(90, 30);
          this.bRESET.text = lang.RESET;
          this.bRESET.onPress = function () {
            for (var b = 0; b < allStrips.length; b++) {
              var c = allStrips[b];
              c.haveVCA && c.getNameValue("vca") == a.mode && c.setNameValue("vca", -1);
            }
            regUpdate(a);
          };
          this.rename = new INPUTBOX(this);
          this.rename.setAnchors(340, 38);
          this.rename.labelDX = 10;
          this.rename.w = 190;
          this.rename.label = lang.GROUP_NAME + ":";
          this.rename.getState = function () {
            this.text = getValue("v." + a.mode + ".name") || "";
          };
          this.rename.valueFunc = function (b) {
            setValue("v." + a.mode + ".name", b);
          };
          var d = 60,
            f = 0,
            e = 46;
          24 < inStrips.length && 690 > this.h && ((e = 44), (d = 54));
          for (var g = 0, b = 0; b < allStrips.length; b++) {
            var h = allStrips[b];
            h.haveVCA &&
            ((c = new CHECKBUTTON(this)),
            0 == g % 8 && 0 != g && f++,
              c.setSize(90, e),
              c.setPos(40 + 100 * (g - 8 * f), 100 + d * f),
              (c.idx = b),
              (c.text = h.text),
              (c.st = h),
              (c.textColor = h.color),
              c.regKey(h.name + "vca"),
              (c.getState = function () {
                var a = this.st;
                this.state = a.getNameValue("vca") == this.parent.mode ? 1 : 0;
                this.text = a.getName();
                this.textColor = a.getColor();
              }),
              (c.onToggleUp = function () {
                this.st.setNameValue("vca", this.parent.mode);
                regUpdate(a);
              }),
              (c.onToggleDown = function () {
                this.st.setNameValue("vca", -1);
                regUpdate(a);
              }),
              this.BUTTONS.push(c),
              g++);
          }
          f++;
        },
        calcGeometry: function () {
          this.w = this.parent.w - this.x;
          this.h = this.parent.h - this.y;
          for (var a = 0; a < this.VGB.length; a++) this.VGB[a].setPos(this.w - 326 + 50 * a, 38);
        },
        paint: function () {
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, 0, this.w, this.h);
          ctx.font = font.editbox;
          ctx.textAlign = "right";
          ctx.fillStyle = color.white;
          ctx.fillText(lang.VCA_GROUP_BUTTON_ASSIGN, this.w - 80, 26);
        },
      }),
      CPAPAGE = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "CPAPAGE";
          this.y = 40;
          this.enabled = !1;
          this.color = color.CPA;
          this.initWidgets();
        },
        initWidgets: function () {
          this.st = new CPAStrip(this);
          this.st.setFx(0);
          var a = 50,
            b = (-this.st.w / 2) | 0;
          this.row1 = [];
          this.row2 = [];
          this.row3 = [];
          this.l1 = new CPA_LINK_BUTTON(this);
          this.l1.setAnchors(b, a);
          for (var c = -4, d = 0; 8 > d; d++) {
            var f = new CPA_ADD_BUTTON(this);
            f.setAnchors(b + 82 * c, a);
            this.row1.push(f);
            c++;
            0 == c && c++;
          }
          this.l2 = new CPA_LINK_BUTTON(this);
          this.l2.setAnchors(b - 1, (a += 82));
          c = -4;
          for (d = 0; 8 > d; d++) (f = new CPA_ADD_BUTTON(this)), f.setAnchors(b + 82 * c, a), this.row2.push(f), c++, 0 == c && c++;
          this.l3 = new CPA_LINK_BUTTON(this);
          this.l3.setAnchors(b - 1, (a += 82));
          c = -4;
          for (d = 0; 8 > d; d++) (f = new CPA_ADD_BUTTON(this)), f.setAnchors(b + 82 * c, a), (f.state = 1), this.row3.push(f), c++, 0 == c && c++;
          a = this.st.w + 38;
          this.eq = new EQParamWidget(this);
          this.eq.RTAonly = !0;
          this.eq.setAnchors(40, 300, this.st.w + 40, 70);
          b = { font: "13px open_sansbold", x: null, y: null, offsetX: -1, offsetY: -3, pressOffsetX: 0, pressOffsetY: 1, align: "center", valign: "middle", shadow: ["#ccc", 0, 1, 1], dy: 13 };
          this.QPINK = new CheckBox(this);
          this.QPINK.setImages(res.EQ_B_OFF, res.EQ_B_PINK2);
          this.QPINK.text = lang.QUICK_PINK.replace(" ", "\n");
          this.QPINK.font = "13px open_sansbold";
          this.QPINK.textColor = color.black2;
          this.QPINK.textColorActive = color.white;
          this.QPINK.shadowColorActive = "#333";
          this.QPINK.shadowColor = "#ccc";
          this.QPINK.textParam = Object.clone(b);
          this.QPINK.setAnchors(40, null, null, 6);
          this.HPINK = new CheckBox(this);
          this.HPINK.setImages(res.EQ_B_OFF, res.EQ_B_PINK);
          this.HPINK.text = lang.HOLD_PINK.replace(" ", "\n");
          this.HPINK.font = "13px open_sansbold";
          this.HPINK.textColor = color.black2;
          this.HPINK.textColorActive = color.white;
          this.HPINK.shadowColorActive = "#333";
          this.HPINK.shadowColor = "#ccc";
          this.HPINK.textParam = b;
          this.HPINK.setAnchors(130, null, null, 6);
          this.bRTA = new CheckBox(this);
          this.bRTA.setSize(70, 30);
          this.bRTA.setImages(res.RTA_OFF, res.RTA_ON);
          this.bRTA.setAnchors(null, null, a + 300, 6);
          this.BEQ = new CheckBox(this);
          this.BEQ.setAnchors(null, null, a + 200, 6);
          this.BEQ.text = lang.EQ;
          this.BEQ.font = "13px open_sansbold";
          this.BEQ.textColor = color.black2;
          this.BEQ.textColorActive = color.white;
          this.BEQ.shadowColorActive = "#333";
          this.BEQ.shadowColor = "#ccc";
          this.BEQ.textParam = b;
          this.BEQ.setImages(res.EQ_B_OFF, res.EQ_B_YELLOW);
          this.BEQ.hide();
          this.LINKEQ = new CheckBox(this);
          this.LINKEQ.setAnchors(null, null, a + 100, 6);
          this.LINKEQ.text = lang.LINK_EQ;
          this.LINKEQ.font = "13px open_sansbold";
          this.LINKEQ.textColor = color.black2;
          this.LINKEQ.textColorActive = color.white;
          this.LINKEQ.shadowColorActive = "#333";
          this.LINKEQ.shadowColor = "#ccc";
          this.LINKEQ.textParam = b;
          this.LINKEQ.setImages(res.EQ_B_OFF, res.EQ_B_ORANGE);
          this.BYPASS = new CheckBox(this);
          this.BYPASS.keyPart = "bypass";
          this.BYPASS.setSize(70, 30);
          this.BYPASS.setAnchors(null, null, a, 6);
          this.BYPASS.setImages(res.bBYPASS_OFF, res.bBYPASS_ON);
        },
        calcGeometry: function () {
          this.w = this.parent.w - this.x;
          this.h = this.parent.h - this.y;
          var a = this.st.w,
            b = ((this.w - a) / 2) | 0;
          this.grd = ctx.createRadialGradient(100, 60, 1, 100, 60, 280);
          this.grd.addColorStop(0, "#24283c");
          this.grd.addColorStop(1, "#18191D");
          this.grd2 = ctx.createRadialGradient(this.w - 100 - a, 60, 1, this.w - 100 - a, 60, 280);
          this.grd2.addColorStop(0, "#24283c");
          this.grd2.addColorStop(1, "#18191D");
          this.grd3 = ctx.createRadialGradient(b, 200, 1, b, 200, (this.w / 4) * 3);
          this.grd3.addColorStop(0, "#31343f");
          this.grd3.addColorStop(1, "#18191D");
        },
        paint: function () {
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, 0, this.w, this.h);
          var a = ((this.w - this.st.w) / 2) | 0;
          ctx.fillStyle = this.grd;
          ctx.fillRect(0, 0, a, this.h);
          ctx.fillStyle = this.grd2;
          ctx.fillRect(a, 0, a, this.h);
          ctx.fillStyle = "#27282D";
          ctx.fillRoundRect(12, this.h - 70, 220, 66, 12);
          ctx.font = "26px open_sans_condensedbold";
          ctx.textAlign = "center";
          ctx.fillStyle = "#99999A";
          ctx.drawText(lang.SYSTEM, a, 24, { valign: "middle", shadow: ["#030303", 0, 1, 1] });
          var b = { shadow: ["#030303", 0, 1, 1] };
          ctx.font = "22px open_sans_condensedbold";
          ctx.drawText(lang.L, a - 82, 24, b);
          ctx.drawText(lang.R, a + 82, 24, b);
          ctx.lineWidth = 2;
          ctx.lineCap = "round";
          ctx.strokeStyle = "#666";
          ctx.strokeStyle = "#111";
          ctx.roundRect(this.eq.x - 28, this.eq.y - 12, this.eq.w + 28 + 20, this.eq.h + 12 + 20, 8);
          ctx.stroke();
          ctx.fillStyle = this.grd3;
          ctx.fill();
          this.paintMarks();
        },
        paintMarks: function () {
          ctx.font = font.eqMarks;
          ctx.textAlign = "center";
          var a = this.eq.h,
            b = this.eq.w,
            c = (a / 2) | 0,
            d = [50, 100, 200, 500, 1e3, 2e3, 5e3, 1e4],
            f = "50 100 200 500 1k 2k 5k 10k".split(" ");
          ctx.save();
          ctx.translate(this.eq.x, this.eq.y);
          ctx.fillStyle = "#60606e";
          ctx.textAlign = "right";
          var e = { shadow: [color.black, 0, 1, 1] };
          ctx.drawText("+10", -4, 6, e);
          ctx.drawText("0", -4, c, e);
          ctx.drawText("-10", -4, a - 6, e);
          ctx.textAlign = "left";
          ctx.drawText("20", 0, a + 10, e);
          ctx.drawText("22k", b - 18, a + 10, e);
          ctx.textAlign = "center";
          for (c = 0; c < d.length; c++) ctx.drawText(f[c], FREQtoX(d[c], b), a + 10, e);
          ctx.restore();
        },
      }),
      CPA_ADD_BUTTON = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "CPA_ADD_BUTTON";
          this.w = 54;
          this.h = 64;
          this.anchors.centerX = !0;
          this.opaque = !1;
          this.color = "#29B370";
          this.press = !1;
          this.state = 0;
          this.label = "SRX 815P";
          this.idx = 0;
          this.selected = !1;
          this.vu = new CPA_VU(this);
          this.vu.setPos(42, 11);
          this.vu.hide();
        },
        onDown: function () {
          this.press = !0;
          regUpdate(this);
        },
        onUp: function () {
          this.press = !1;
          this.state && (this.selected = !this.selected);
          regUpdate(this);
          this.onClick();
        },
        onClick: function () {
          this.state || new CPA_DISCOVER_POPUP(null, this.idx);
        },
        getState: function () {
          this.state && !this.vu.enabled && this.vu.show();
          !this.state && this.vu.enabled && this.vu.hide();
        },
        paint: function () {
          this.getState();
          if (0 === this.state) {
            var a = 6;
            ctx.fillStyle = this.press ? "#7f7f92" : "#43434D";
            ctx.fillRect(14, this.w / 2 - a / 2, this.w - 28, a);
            ctx.fillRect(this.w / 2 - a / 2, 14, a, this.w - 28);
          }
          if (1 == this.state) {
            a = 54;
            ctx.lineWidth = 4;
            var b = this.selected;
            ctx.roundRect(2, 2, a - 4, 44, 4);
            ctx.fillStyle = "#3A3C46";
            ctx.strokeStyle = "#464854";
            ctx.fill();
            ctx.lineWidth = 2;
            ctx.stroke();
            ctx.fillStyle = "#2B2D33";
            ctx.fillRightRoundRect(a - 14, 3, 11, 42, 4);
            b &&
            ((ctx.strokeStyle = this.color),
              ctx.roundRect(2, 2, a - 4, 44, 4),
              ctx.stroke(),
              (b = ctx.createLinearGradient(0, 0, 0, 48)),
              b.addColorStop(0, "rgba(36, 120, 83, 0)"),
              b.addColorStop(0.4, "rgba(36, 120, 83, 0)"),
              b.addColorStop(1, "rgba(36, 120, 83, 0.9)"),
              (ctx.fillStyle = b),
              ctx.fillLeftRoundRect(2, 2, a - 16, 44, 4));
            ctx.fillStyle = "rgba(255,255,255,0.06)";
            ctx.fillRect(a - 15, 2, 1, 44);
            ctx.fillStyle = "rgba(0,0,0,0.06)";
            ctx.fillRect(a - 14, 2, 1, 44);
            a = { max: this.w - 20, shadow: [color.black, 0, 1, 1] };
            ctx.textAlign = "center";
            ctx.textBaseline = "middle";
            ctx.fillStyle = "#F25E3D";
            ctx.font = "12pt open_sans_condensedbold";
            ctx.drawText("+8dB", 21, 18, a);
            ctx.fillStyle = "#e0d3d9";
            ctx.font = "9pt open_sans_condensedbold";
            ctx.drawText(lang.OUT + ":" + (this.idx + 1), 21, 35, a);
            a.max = this.w;
            ctx.textAlign = "center";
            ctx.font = "10pt open_sans_condensedbold";
            ctx.drawText(this.label, this.w / 2, this.h - 8, a);
          }
        },
      }),
      CPA_LINK_BUTTON = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "CPA_LINK_BUTTON";
          this.w = 50;
          this.h = 70;
          this.anchors.centerX = !0;
          this.opaque = !1;
          this.color = "#1D7F50";
          this.press = !1;
          this.state = 0;
        },
        onDown: function () {},
        onUp: function () {
          this.state = this.state ? 0 : 1;
          regUpdate(this);
        },
        paint: function () {
          var a = "#40404A";
          this.state && (a = this.color);
          ctx.lineWidth = 1;
          ctx.strokeStyle = a;
          ctx.fillStyle = a;
          ctx.roundRect(0.5, 0.5, this.w - 1, this.w - 1, 4);
          ctx.stroke();
          this.state && ctx.fill();
          ctx.globalAlpha = this.state ? 1 : 0.19;
          ctx.drawImage(res.CPA_LINK, 16, 16);
          ctx.globalAlpha = 1;
          ctx.drawText(this.state ? lang.UNLINK : lang.LINK, this.w / 2, this.h - 12, { align: "center", valign: "middle", color: this.state ? "#DEDFE1" : "#40404A", font: "11pt open_sans_condensedbold" });
        },
      }),
      CPA_DISCOVER_POPUP = Class.create(Widget, {
        initialize: function ($super, b, c) {
          $super(b);
          this.widgetName = "CPA_DISCOVER_POPUP";
          this.h = this.w = 500;
          this.sy = 58;
          this.title = lang.HIQNET_DISCOVERY;
          this.color = "#2D7D86";
          this.bg = "#262728";
          this.borderColor = "#676869";
          this.center = !0;
          this.initWidgets();
          this.refreshList();
          this.updateGeometry();
          mWidgets.push(widgets.pop());
          currentPresetWindow = this;
          regUpdate(this);
        },
        refreshList: function () {
          if (EMULATE && !WEBSITE_MODE) {
            var a = $A($R("f:FACTORY PRESET A", "f:FACTORY PRESET Z")),
              a = a.concat($A($R("u:USER PRESET A", "u:USER PRESET Z")));
            this.LIST.setItems(a);
          } else sendMessage(E_COMMANDS.HIQNET_DISCOVER);
        },
        initWidgets: function () {
          var a = this;
          this.LIST = new LIST(this);
          this.LIST.setAnchors(10, this.sy, 10, 65);
          this.REFRESH = new MENUBUTTON(this);
          this.REFRESH.text = lang.REFRESH;
          this.REFRESH.bg = this.bg;
          this.REFRESH.setPos(10, 15);
          this.REFRESH.w = 110;
          this.REFRESH.onPress = function () {
            EMULATE && !WEBSITE_MODE ? (showPopupMsg(lang.DEMO_VERSION), a.close()) : sendMessage(E_COMMANDS.HIQNET_DISCOVER);
          };
        },
        close: function () {
          currentPresetWindow = null;
          this.enabled = !1;
          clearModals();
          regUpdate(this.target);
        },
        onDelete: function () {
          currentPresetWindow = null;
        },
        calcPos: function () {},
        calcGeometry: function () {
          if (!this.center && null != this.target && isDefined(this.target.x)) {
            var a = this.target;
            this.setPos(116 + Math.round((a.w - 116 - this.w) / 2), a.globalY() + Math.round((a.h - this.h) / 2));
          }
          this.center && this.setPos(Math.round((screenWidth - this.w) / 2) | 0, ((screenHeight - this.h) / 2) | 0);
          this.grd = ctx.createLinearGradient(0, 0, 0, 40);
          this.grd.addColorStop(0, "rgba(255,255,255,0.2)");
          this.grd.addColorStop(1, "rgba(255,255,255,0.0)");
        },
        paint: function () {
          ctx.fillStyle = this.bg;
          ctx.strokeStyle = this.borderColor;
          ctx.lineWidth = 1;
          ctx.roundRect(0, 0, this.w, this.h, 14);
          ctx.fill();
          ctx.stroke();
          ctx.fillStyle = this.grd;
          ctx.fillTopRoundRect(0, 0, this.w, 40, 14);
          ctx.fillStyle = color.white;
          ctx.font = "16pt open_sans_condensedbold";
          ctx.textAlign = "right";
          ctx.fillText(this.title, this.LIST.x + this.LIST.w, 38);
          ctx.fillStyle = this.color;
          ctx.fillBotRoundRect(10, this.h - 59, this.w - 20, 50, 10);
          drawImage(res.lex_dly, 20, this.h - 53);
        },
      }),
      CPA_VU = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "CPA_ADD_BUTTON";
          this.w = 7;
          this.m = 3;
          this.h = 3 * this.w + 2 * this.m;
          this.color = "#29B370";
          this.value = 0.5;
        },
        paint: function () {
          var a = this.w,
            b = this.m;
          ctx.fillStyle = "#101113";
          ctx.fillRect(0, 0, this.w, this.h);
          ctx.fillStyle = "#2B2D33";
          ctx.fillRect(0, a, a, b);
          ctx.fillRect(0, 2 * a + b, a, b);
        },
      });
    function VtoVMIX_TIME(a) {
      return 0.02 + 3.98 * Math.pow(a, 3.0517);
    }
    function VtoVMIX_TIME_MS(a) {
      return parseInt(1e3 * VtoVMIX_TIME(a) + 0.5);
    }
    function VtoVMIX_WEIGHT(a) {
      return -12 + 24 * a;
    }
    function VMIX_TIMEtoV(a) {
      return 0.6359553000113926 * Math.pow(-0.02 + a, 0.3276862076875184);
    }
    function VMIX_WEIGHTtoV(a) {
      return (1 / 24) * (12 + a);
    }
    var AUTOMIXPAGE = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "AUTOMIXPAGE";
          this.y = 40;
          this.enabled = !1;
          this.color = color.AUTOMIX;
          this.modeAB = this.mode = 0;
          this.arr = [];
          this.initWidgets();
          this.setMode2(0);
          this.sync();
        },
        onShow: function () {
          this.sync();
        },
        setMode2: function (a) {
          this.modeAB = a;
          for (a = 0; a < this.BUTTONS.length; a++) this.BUTTONS[a].setKey(inStrips[a].name + "amixgroup", !0);
          this.ledB.setKey("automix.time", !0);
          this.slB.setKey("automix.time", !0);
          this.sync();
          regUpdate(this);
        },
        sync: function () {
          var a = this,
            b = [];
          inStrips.forEach(function (c) {
            c.getNameValue("amixgroup") == a.modeAB && b.push(c.id);
          });
          for (var c = 0; c < this.SLS.length; c++)
            if (c < b.length) {
              var d = inStrips[b[c]];
              if (!d) return;
              d = d.name + "amix";
              this.LEDS[c].setKey(d, !0);
              this.SLS[c].setKey(d, !0);
              this.LEDS[c].show();
              this.SLS[c].show();
              this.VUS[c].show();
              this.VUS[c].reset();
            } else this.LEDS[c].hide(), this.SLS[c].hide(), this.VUS[c].hide();
          this.arr = b;
        },
        initWidgets: function () {
          var a = this;
          this.A_SEL = new CHECKBUTTON(this);
          this.A_SEL.setPos(20, 34);
          this.A_SEL.setSize(120, 30);
          this.A_SEL.text = "A";
          this.A_SEL.color = color.red;
          this.A_SEL.getState = function () {
            this.state = 0 == a.modeAB;
          };
          this.A_SEL.onToggleUp = function () {
            a.setMode2(0);
          };
          this.B_SEL = new CHECKBUTTON(this);
          this.B_SEL.setPos(20, 71);
          this.B_SEL.setSize(120, 30);
          this.B_SEL.text = "B";
          this.B_SEL.color = color.red;
          this.B_SEL.getState = function () {
            this.state = 1 == a.modeAB;
          };
          this.B_SEL.onToggleUp = function () {
            a.setMode2(1);
          };
          this.bRESET = new MENUBUTTON(this);
          this.bRESET.setPos(216, 34);
          this.bRESET.setSize(120, 30);
          this.bRESET.text = lang.RESET + " A";
          this.bRESET.onPress = function () {
            for (var b = 0; b < inStrips.length; b++) {
              var c = inStrips[b];
              0 == c.getNameValue("amixgroup") && (c.setNameValue("amixgroup", -1), c.setNameValue("amix", 0.5));
            }
            a.sync();
            regUpdate(a);
          };
          this.bRESETB = new MENUBUTTON(this);
          this.bRESETB.setPos(216, 71);
          this.bRESETB.setSize(120, 30);
          this.bRESETB.text = lang.RESET + " B";
          this.bRESETB.onPress = function () {
            for (var b = 0; b < inStrips.length; b++) {
              var c = inStrips[b];
              1 == c.getNameValue("amixgroup") && (c.setNameValue("amixgroup", -1), c.setNameValue("amix", 0.5));
            }
            a.sync();
            regUpdate(a);
          };
          this.A_SWITCH = new CHECKBUTTON(this);
          this.A_SWITCH.setPos(754, 34);
          this.A_SWITCH.setSize(120, 30);
          this.A_SWITCH.text = "A";
          this.A_SWITCH.color = color.green;
          this.A_SWITCH.setKey("automix.a.on", !0);
          this.A_SWITCH.ondown = this.A_SWITCH.onDown;
          this.A_SWITCH.onDown = function () {
            if (this.state) {
              var a = this;
              confOk.valueFunc = function () {
                a.ondown();
              };
              showConfBox(lang.AMIX_SURE_TURN_OFF + " A");
            } else this.ondown();
          };
          this.B_SWITCH = new CHECKBUTTON(this);
          this.B_SWITCH.setPos(754, 71);
          this.B_SWITCH.setSize(120, 30);
          this.B_SWITCH.text = "B";
          this.B_SWITCH.color = color.green;
          this.B_SWITCH.setKey("automix.b.on", !0);
          this.B_SWITCH.ondown = this.B_SWITCH.onDown;
          this.B_SWITCH.onDown = function () {
            if (this.state) {
              var a = this;
              confOk.valueFunc = function () {
                a.ondown();
              };
              showConfBox(lang.AMIX_SURE_TURN_OFF + " B");
            } else this.ondown();
          };
          this.ledB = new FXLEDPlain(this);
          this.ledB.setAnchors(800, 220, null, null);
          this.ledB.label = lang.TIME;
          this.ledB.sign = lang.MS;
          this.ledB.formatValue = function (a) {
            return (1e3 * VtoVMIX_TIME(a)) | 0;
          };
          this.slB = new EQSlider(this);
          this.slB.setAnchors(810, 270, null, 60);
          this.slB.mV = [1, VMIX_TIMEtoV(2), VMIX_TIMEtoV(1), VMIX_TIMEtoV(0.5), VMIX_TIMEtoV(0.2), VMIX_TIMEtoV(0.1), VMIX_TIMEtoV(0.05), 0];
          this.slB.onValueChange = function () {
            regUpdate(a.ledB);
          };
          this.VUS = [];
          this.BUTTONS = [];
          this.BUTTONS2 = [];
          for (var b = 0, c = 0; c < allStrips.length; c++) {
            switch (allStrips[c].type) {
              case E_STRIP_TYPE.IN:
                if (20 <= allStrips[c].subId) continue;
                break;
              default:
                continue;
            }
            var d = new CHECKBUTTON(this);
            0 == c % 10 && 0 != c && b++;
            d.setSize(78, 46);
            d.setPos((d.w + 8) * (c - 10 * b) + 21, 116 + 54 * b);
            d.idx = c;
            d.id = allStrips[c].id;
            d.text = allStrips[c].text;
            d.textColor = allStrips[c].color;
            d.color = color.AUTOMIX;
            d.getState = function () {
              var b = this.getVal();
              null === b && (b = -1);
              this.state = b == a.modeAB;
              this.mark = -1 != b && b != a.modeAB;
              this.text = allStrips[this.idx].getName();
            };
            d.onToggle = function () {
              a.sync();
              regUpdate(a);
            };
            d.onDown = function () {
              var b = 0;
              inStrips.forEach(function (c) {
                c.getNameValue("amixgroup") == a.modeAB && b++;
              });
              var c = this.getVal();
              null === c && (c = -1);
              if (c !== a.modeAB) {
                if (8 == b) {
                  showPopupMsg(lang.AMIX_MAX_EXCEED);
                  return;
                }
                if (-1 != c) {
                  var d = this;
                  confOk.valueFunc = function () {
                    d.setVal(a.modeAB);
                    setValue(d.key.replace("amixgroup", "amix"), 0.5);
                    d.onToggle();
                    d.valueFunc();
                    regUpdate(d);
                  };
                  showConfBox(lang.AMIX_ALREADY_ASSIGNED);
                  return;
                }
                this.setVal(a.modeAB);
                setValue(this.key.replace("amixgroup", "amix"), 0.5);
              } else this.setVal(-1);
              this.onToggle();
              this.valueFunc();
              regUpdate(this);
            };
            this.BUTTONS.push(d);
          }
          this.LEDS = [];
          this.SLS = [];
          for (c = 0; 8 > c; c++)
            (b = new FXLEDPlain(this)),
              b.setAnchors(86 * c + 25, 220, null, null),
              (b.label = lang.WEIGHT),
              (b.sign = lang.DB),
              (b.formatValue = function (a) {
                return precision(VtoVMIX_WEIGHT(a), 1);
              }),
              this.LEDS.push(b),
              (b = new EQSlider(this)),
              b.setAnchors(86 * c + 44, 270, null, 60),
              (b.idx = c),
              (b.bigMark = 0.5),
              b.setDefaultValue(0.5),
              (b.mV = [1, 22 / 24, 20 / 24, 0.75, 16 / 24, 14 / 24, 10 / 24, 8 / 24, 0.25, 4 / 24, 2 / 24, 0]),
              (b.onValueChange = function () {
                regUpdate(a.LEDS[this.idx]);
              }),
              this.SLS.push(b),
              (b = new VUMeter(this)),
              (b.inverted = !0),
              (b.peak = !1),
              b.setAnchors(86 * c + 27, 270, null, 60),
              this.VUS.push(b),
            EMULATE &&
            setInterval(
              function () {
                this.setValueExt(0, 0.6 * Math.random());
              }.bind(b),
              200
            );
        },
        calcGeometry: function () {
          this.w = this.parent.w - this.x;
          this.h = this.parent.h - this.y;
        },
        paint: function () {
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, 0, this.w, this.h);
          ctx.font = font.editbox;
          ctx.textAlign = "right";
          ctx.fillStyle = color.white;
          ctx.textAlign = "left";
          ctx.fillText(lang.AUTOMIX_GROUP_ASSIGN, this.A_SEL.x, 24);
          ctx.textAlign = "right";
          ctx.fillText(lang.AUTOMIX_GROUP_ENABLE, this.A_SWITCH.x + this.A_SWITCH.w, 24);
          for (var a = 0; a < this.arr.length; a++) 8 <= a || ctx.drawText(inStrips[this.arr[a]].getName(), this.SLS[a].x + this.SLS[a].w / 2, this.h - 40, { align: "center", valign: "middle", dy: 20 });
          ctx.drawText(lang.GLOBAL + "\n" + lang.RESPONSE_TIME, this.slB.x + this.slB.w / 2, this.h - 30, { align: "center", valign: "middle", dy: 20 });
        },
      }),
      AMIX_BUTTON = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "MENU_CHECKBUTTON";
          this.w = 70;
          this.h = 30;
          this.state = !1;
          this.value = 0;
          this.color = null;
          this.text = "";
          this.font = font.tabText;
          this.needBG = !0;
          this.bgColor = color.eqBg;
          this.strokeColor = color.tabStroke;
          this.indStrokeColor = "#333437";
          this.textColor = color.tabText;
          this.textColor2 = null;
          this.indicatorMode = this.hidden = this.disabled = !1;
          this.dy = 18;
        },
        onDown: function () {
          if (!this.indicatorMode && !this.disabled && !this.hidden && this.check()) {
            if ((this.state = !this.state)) this.onToggleUp();
            else this.onToggleDown();
            null != this.key && this.setVal(fromBool(this.state));
            this.onToggle();
            this.valueFunc();
            regUpdate(this);
          }
        },
        check: function () {
          return !0;
        },
        setState: function (a, b) {
          if (!this.indicatorMode && (isDefined(b) || (b = !0), null != this.key && (this.state = this.getVal()), this.getState(), this.state != a)) {
            if ((this.state = a)) this.onToggleUp();
            else this.onToggleDown();
            null != this.key && this.setVal(fromBool(this.state));
            this.onToggle();
            this.valueFunc();
            b && regUpdate(this);
          }
        },
        onToggle: function () {},
        onToggleUp: function () {},
        onToggleDown: function () {},
        valueFunc: function () {},
        getState: function () {},
        paint: function () {
          null != this.key && (this.state = this.getVal());
          this.getState();
          this.hidden ||
          ((ctx.fillStyle = this.bgColor),
            ctx.fillRect(-1, -1, this.w + 2, this.h + 2),
          this.disabled && (ctx.globalAlpha = 0.3),
            this.state
              ? ((ctx.fillStyle = hexToRGBA(this.color ? this.color : this.parent.color, 0.5)),
                ctx.fillRect(0, 0, this.w, this.h),
                (ctx.lineWidth = 1),
                (ctx.strokeStyle = this.color ? this.color : this.parent.color),
                ctx.strokeRect(0.5, 0.5, this.w - 1, this.h - 1),
                (ctx.fillStyle = "rgba(255,255,255,0.3)"),
                ctx.fillRect(3, 3, (this.value * (this.w - 6)) | 0, this.h - 6),
                (ctx.font = this.font),
                ctx.drawText(this.text, this.w / 2, this.h / 2, { align: "center", valign: "middle", max: this.w - 4, dy: this.dy, color: this.textColor2 || this.textColor, shadow: [color.black, 0, 1, 1] }))
              : ((ctx.strokeStyle = this.indicatorMode ? this.indStrokeColor : this.strokeColor),
                ctx.strokeRect(0.5, 0.5, this.w - 1, this.h - 1),
                (ctx.fillStyle = "rgba(255,255,255,0.15)"),
                ctx.fillRect(3, 3, (this.value * (this.w - 6)) | 0, this.h - 6),
                (ctx.font = this.font),
                ctx.drawText(this.text, this.w / 2, this.h / 2, { align: "center", valign: "middle", max: this.w - 4, color: this.textColor, dy: this.dy, shadow: [color.black, 0, 1, 1] })));
        },
      }),
      INPUTBOX = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "INPUTBOX";
          this.text = "";
          this.w = 200;
          this.h = 30;
          this.bg = color.eqBg;
          this.border = color.tabText;
          this.color = "#fefefe";
          this.label = null;
          this.info = "";
          this.readOnly = this.passMode = !1;
          this.labelColor = "#ccc";
          this.borderColor = "#535457";
          this.hidden = this.disabled = !1;
          this.labelDX = 28;
          this.maxlen = 100;
        },
        valueFunc: function (a) {
          showPopupMsg(a);
        },
        onUp: function () {
          if (!this.readOnly) {
            var a = this;
            editOk.valueFunc = function () {
              var b = editBox2.value;
              null != b && (a.valueFunc(b), regUpdate(a));
            };
            showEditBox2(this.info, this.passMode ? "" : this.text, this.maxlen);
          }
        },
        getState: function () {},
        paint: function () {
          this.getState();
          if (!this.hidden) {
            ctx.fillStyle = "#111";
            ctx.fillRect(0, 0, this.w, this.h);
            ctx.strokeStyle = this.borderColor;
            ctx.strokeRect(0.5, 0.5, this.w - 1, this.h - 1);
            ctx.strokeRect(0.5, 0.5, this.w - 1, this.h - 1);
            ctx.font = font.settings;
            ctx.textAlign = "center";
            ctx.textBaseline = "middle";
            ctx.fillStyle = this.color;
            var a = this.passMode ? "*****" : this.text;
            a || (a = "");
            20 < a.length && (a = a.substring(0, 30) + "...");
            ctx.fillText(a, this.w / 2, this.h / 2, this.w - 6);
            this.label &&
            this.label.length &&
            ((ctx.fillStyle = this.bg),
              ctx.fillRect(0, 0, -(ctx.measureText(this.label).width + this.labelDX), this.h),
              (ctx.fillStyle = this.labelColor),
              (ctx.textAlign = "right"),
              ctx.drawText(this.label, -this.labelDX, (this.h / 2) | 0, { max: 220, shadow: Shadow.main }));
          }
        },
      }),
      COMBOBOX = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "COMBOBOX";
          this.text = "";
          this.w = 200;
          this.h = 28;
          this.bg = color.eqBg;
          this.color = this.border = color.tabText;
          this.label = null;
          this.info = "";
          this.readOnly = !1;
          this.labelColor = "#ccc";
          this.borderColor = "#535457";
          this.labelDX = 28;
          this.value = 0;
          this.listH = this.listMaxH = 300;
          this.itemH = 30;
          this.bgColor = "#222";
          this.items = $A($R("ITEM A", "ITEM Z"));
          this.list = null;
          this.dataByIdx = !1;
        },
        setItems: function (a) {
          this.items = a;
          a = this.items.length * this.itemH;
          this.listH = a < this.listMaxH ? a : this.listMaxH;
        },
        getText: function () {
          var a = null != this.key ? getValue(this.key) : this.value;
          return this.items[a];
        },
        getValue: function () {
          var a = null != this.key ? getValue(this.key) : this.value;
          return this.items[a];
        },
        setValue: function (a) {
          this.value = a;
          null != this.key && setValue(this.key, a);
          regUpdate(this);
        },
        onSelect: function (a, b) {
          log("onSelect: " + a + " " + b);
        },
        getState: function () {
          this.value = this.getValue();
        },
        onUp: function () {
          var a = this;
          this.list = new LIST(-1);
          this.list.h = this.listH;
          this.list.setPos(this.globalX(), this.globalY());
          this.list.w = this.w;
          this.list.itemH = this.itemH;
          this.list.useGradient = !0;
          this.list.centered = !0;
          this.list.font = "13pt open_sans_condensedbold";
          this.list.setItems(this.items);
          this.list.borderColor = this.borderColor;
          this.list.selItemColor = this.color;
          this.list.bgColor = this.bgColor;
          this.list.activeTextColor = "#fff";
          this.list.getActiveItem = function () {
            this.activeItemIdx = a.value;
          };
          this.list.onSelect = function () {
            log("!");
            a.setValue(this.selectedIdx);
            clearModals();
            drawAll("list destroy");
          };
          this.list.select(this.value, !0);
          regUpdate(this.list);
        },
        paint: function () {
          this.getState();
          ctx.fillStyle = this.bg;
          ctx.fillRect(0, 0, this.w, this.h);
          ctx.fillStyle = "rgba(255,255,255,0.1)";
          ctx.fillRect(0, this.h - 10, this.w, 10);
          ctx.strokeStyle = this.borderColor;
          ctx.strokeRect(0.5, 0.5, this.w - 1, this.h - 1);
          ctx.font = font.settings;
          ctx.textAlign = "center";
          ctx.textBaseline = "middle";
          ctx.fillStyle = this.color;
          ctx.fillText(this.getText() || "", this.w / 2 - 4, this.h / 2);
          var a = this.w - 11 - 2,
            b = (this.h / 2 - 2) | 0;
          ctx.fillStyle = "#fff";
          ctx.fillTriangle2(a, b, a + 6, b, a + 3, b + 4);
        },
      }),
      RADIO = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "RADIO";
          this.state = 0;
          this.w = 32;
          this.h = 26;
          this.bg = color.eqBg;
          this.border = color.tabText;
          this.labels = [];
          this.items = null;
          this.label = "";
          this.rh = 40;
          this.d = 14;
          this.readOnly = !1;
        },
        setItems: function (a) {
          this.items = a;
        },
        setLabels: function (a) {
          this.h = a.length * this.rh;
          this.labels = a;
        },
        onDown: function (a, b) {
          if (!this.readOnly) {
            var c = ((b - this.globalY()) / this.rh) | 0;
            this.state != c && ((this.state = c), this.onSelect(), regUpdate(this.parent));
          }
        },
        onSelect: function () {
          this.key && this.setVal(this.items ? this.items[this.state] : this.state);
        },
        getState: function () {
          this.key && ((this.state = this.getVal()), this.items && (this.state = this.items.indexOf(this.state)));
        },
        paint: function () {
          this.getState();
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, 0, this.w, this.h);
          for (var a = 0; a < this.labels.length; a++) {
            var b = Math.round(this.rh * a);
            ctx.strokeStyle = this.border;
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.arc(15, b + 15, this.d, 0, 2 * Math.PI);
            ctx.stroke();
            ctx.closePath();
            this.state == a && (ctx.beginPath(), ctx.arc(15, b + 15, this.d - 6, 0, 2 * Math.PI), (ctx.fillStyle = color.red), ctx.fill(), (ctx.lineWidth = 2), (ctx.strokeStyle = "#ccc"), ctx.stroke());
            this.labels[a] &&
            ((ctx.fillStyle = color.eqBg),
              ctx.fillRect(0, b, -(ctx.measureText(this.labels[a]).width + 30), this.rh),
              (ctx.font = font.settings),
              (ctx.fillStyle = color.tabText),
              (ctx.textAlign = "right"),
              ctx.drawText(this.labels[a], -26, b + 0.5 * this.rh, { shadow: Shadow.main }));
          }
        },
      }),
      LOCK = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "LOCK";
          this.w = 120;
          this.h = 40;
          this.bg = color.eqBg;
          this.border = color.tabText;
          this.color = color.red;
          this.label = lang.LOCK + ":";
          this.borderColor = "#535457";
          this.state = !1;
        },
        onDown: function () {
          this.state = !this.state;
          this.valueFunc();
          regUpdate(this.parent);
        },
        valueFunc: function () {
          log(this.widgetName + ": " + this.state);
        },
        getState: function () {},
        paint: function () {
          this.getState();
          var a = (this.w / 2) | 0;
          ctx.fillStyle = this.bg;
          ctx.fillRect(0, 0, this.w, this.h);
          ctx.fillStyle = "rgba(255,255,255,0.1)";
          ctx.fillRect(0, this.h, this.w, -10);
          ctx.fillStyle = this.color;
          this.state ? ctx.fillRect(this.w / 2, 0, this.w / 2, this.h) : ctx.fillRect(0, 0, this.w / 2, this.h);
          ctx.font = "18px open_sans_condensedbold";
          ctx.fillStyle = color.tabText;
          ctx.setShadow(color.black, 3, 1, 1);
          ctx.textAlign = "center";
          ctx.fillStyle = 1 == this.state ? color.tabTextSel : color.tabText;
          ctx.fillText(lang.ON, (this.w / 4) * 3, this.h - 12, a - 4);
          ctx.fillStyle = 0 == this.state ? color.tabTextSel : color.tabText;
          ctx.fillText(lang.OFF, this.w / 4, this.h - 12, a - 4);
          ctx.shadowColor = "transparent";
          ctx.strokeStyle = this.borderColor;
          ctx.strokeRect(0.5, 0.5, this.w, this.h);
          this.label.length && ((ctx.fillStyle = color.tabText), (ctx.textAlign = "right"), ctx.fillText(this.label, -26, this.h - 9));
        },
      }),
      SWITCHBOX = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "SWITCHBOX";
          this.w = 100;
          this.h = 30;
          this.bg = color.eqBg;
          this.border = color.tabText;
          this.color = color.red;
          this.colors = null;
          this.borderColor = "#535457";
          this.textColor = "black";
          this.labelColor = color.tabText;
          this.label = "";
          this.font = font.settings;
          this.state = 0;
          this.disabled = !1;
          this.items = [lang.ON, lang.OFF];
          this.itemW = 50;
          this.readOnly = !1;
          this.disableOnNegative = !0;
        },
        setState: function (a) {
          this.state = bound(a, 0, this.items.length - 1);
          this.key && setValue(this.key, this.state);
          this.valueFunc();
          this.onValue();
          regUpdate(this);
        },
        setItems: function (a) {
          this.w = a.length * this.itemW;
          this.items = a;
        },
        setItemWidth: function (a) {
          this.itemW = a;
          this.w = this.items.length * this.itemW;
        },
        checkNewState: function (a) {
          return !0;
        },
        onDown: function (a, b) {
          if (!((this.disableOnNegative && 0 > this.state) || this.readOnly || this.disabled)) {
            var c = ((a - this.globalX()) / this.itemW) | 0,
              c = bound(c, 0, this.items.length - 1);
            if (this.state == c && 2 == this.items.length)
              switch (this.state) {
                case 0:
                  this.setState(1);
                  break;
                case 1:
                  this.setState(0);
              }
            else this.setState(c);
            this.key && setValue(this.key, this.state);
            this.valueFunc();
            this.onValue();
            regUpdate(this);
          }
        },
        valueFunc: function () {},
        onValue: function () {},
        calcGeometry: function () {
          this.grd = ctx.createLinearGradient(0, 0, 0, this.h);
          this.grd.addColorStop(0, "rgba(0,0,0,0)");
          this.grd.addColorStop(0.5, "rgba(0,0,0,0.3)");
          this.grd.addColorStop(1, "rgba(0,0,0,0)");
        },
        getState: function () {},
        paint: function () {
          this.key && (this.state = getValue(this.key));
          this.getState();
          -1 == this.state && (ctx.globalAlpha = 0.3);
          this.disabled && (ctx.globalAlpha = 0.3);
          ctx.fillStyle = this.bg;
          ctx.fillRect(0, 0, this.w, this.h);
          ctx.font = this.font;
          ctx.textAlign = "center";
          ctx.textBaseline = "middle";
          ctx.lineWidth = 1;
          for (var a = 0; a < this.items.length; a++)
            a === this.state
              ? (ctx.beginPath(),
                (ctx.fillStyle = this.color),
              this.colors && (ctx.fillStyle = this.colors[a]),
                ctx.rect(a * this.itemW + 1, 1, this.itemW - 1, this.h - 2),
                ctx.fill(),
                (ctx.fillStyle = this.grd),
                ctx.fill(),
                (ctx.strokeStyle = this.borderColor),
                ctx.strokeRect(0.5 + a * this.itemW, 0.5, this.itemW, this.h - 1))
              : ((ctx.strokeStyle = this.borderColor),
                ctx.strokeRect(0.5 + a * this.itemW, 0.5, this.itemW, this.h - 1),
                (ctx.fillStyle = "rgba(255,255,255,0.1)"),
                ctx.fillRect(1 + a * this.itemW, this.h, this.itemW - 1, -10)),
              (ctx.fillStyle = color.white),
            this.colors && a !== this.state && (ctx.fillStyle = this.colors[a]),
              ctx.drawText(this.items[a], ((a + 0.5) * this.itemW) | 0, (this.h / 2) | 0, { max: this.itemW - 4, shadow: Shadow.main });
          this.label &&
          this.label.length &&
          ((ctx.fillStyle = color.eqBg),
            ctx.fillRect(0, 0, -(ctx.measureText(this.label).width + 28), this.h),
            (ctx.fillStyle = this.labelColor),
            (ctx.textAlign = "right"),
            ctx.drawText(this.label, -26, (this.h / 2) | 0, { max: 220, shadow: Shadow.main }));
        },
      }),
      HSWITCHBOX = Class.create(Widget, {}),
      CHECKBUTTON = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "MENU_CHECKBUTTON";
          this.w = 70;
          this.h = 30;
          this.state = !1;
          this.color = null;
          this.text = "";
          this.font = font.tabText;
          this.needBG = !0;
          this.bgColor = color.eqBg;
          this.strokeColor = color.tabStroke;
          this.indStrokeColor = "#333437";
          this.textColor = color.tabText;
          this.textColor2 = null;
          this.indicatorMode = this.hidden = this.disabled = !1;
          this.dy = 18;
          this.mark = !1;
          this.markColor = color.purple;
        },
        onDown: function () {
          if (!this.indicatorMode && !this.disabled && !this.hidden && this.check()) {
            if ((this.state = !this.state)) this.onToggleUp();
            else this.onToggleDown();
            null != this.key && this.setVal(fromBool(this.state));
            this.onToggle();
            this.valueFunc();
            regUpdate(this);
          }
        },
        check: function () {
          return !0;
        },
        setState: function (a, b) {
          if (!this.indicatorMode && (isDefined(b) || (b = !0), null != this.key && (this.state = this.getVal()), this.getState(), this.state != a)) {
            if ((this.state = a)) this.onToggleUp();
            else this.onToggleDown();
            null != this.key && this.setVal(fromBool(this.state));
            this.onToggle();
            this.valueFunc();
            b && regUpdate(this);
          }
        },
        onToggle: function () {},
        onToggleUp: function () {},
        onToggleDown: function () {},
        valueFunc: function () {},
        getState: function () {},
        paint: function () {
          null != this.key && (this.state = this.getVal());
          this.getState();
          this.hidden ||
          ((ctx.fillStyle = this.bgColor),
            ctx.fillRect(-1, -1, this.w + 2, this.h + 2),
          this.disabled && (ctx.globalAlpha = 0.3),
          this.mark && ((ctx.fillStyle = this.markColor), ctx.fillCircle(this.w - 5, 5, 2)),
            this.state
              ? ((ctx.fillStyle = hexToRGBA(this.color ? this.color : this.parent.color, 0.5)),
                ctx.fillRect(0, 0, this.w, this.h),
                (ctx.lineWidth = 1),
                (ctx.strokeStyle = this.color ? this.color : this.parent.color),
                ctx.strokeRect(0.5, 0.5, this.w - 1, this.h - 1),
              this.indicatorMode || ((ctx.fillStyle = "rgba(255,255,255,0.1)"), ctx.fillRect(1, this.h - 10, this.w - 2, 9)),
                (ctx.font = this.font),
                ctx.drawText(this.text, this.w / 2, this.h / 2, { align: "center", valign: "middle", max: this.w - 4, dy: this.dy, color: this.textColor2 || this.textColor, shadow: [color.black, 0, 1, 1] }))
              : ((ctx.strokeStyle = this.indicatorMode ? this.indStrokeColor : this.strokeColor),
                ctx.strokeRect(0.5, 0.5, this.w - 1, this.h - 1),
              this.indicatorMode || ((ctx.fillStyle = "rgba(255,255,255,0.1)"), ctx.fillRect(1, this.h - 10, this.w - 2, 9)),
                (ctx.font = this.font),
                ctx.drawText(this.text, this.w / 2, this.h / 2, { align: "center", valign: "middle", max: this.w - 4, color: this.textColor, dy: this.dy, shadow: [color.black, 0, 1, 1] })));
        },
      }),
      MENUBUTTON = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "MENU_BUTTON";
          this.w = 70;
          this.h = 30;
          this.state = 0;
          this.color = null;
          this.bg = color.eqBg;
          this.text = "TEXT";
          this.textColor = color.tabText;
          this.needBG = !0;
          this.dimmed = this.disabled = !1;
        },
        onDown: function () {
          this.disabled || this.dimmed || ((this.state = 1), regUpdate(this.parent));
        },
        onUp: function () {
          this.disabled || this.dimmed || ((this.state = 0), regUpdate(this.parent), this.onPress());
        },
        onPress: function () {},
        valueFunc: function () {},
        getState: function () {},
        paint: function () {
          this.getState();
          this.disabled ||
          ((ctx.fillStyle = this.bg),
            ctx.fillRect(0, 0, this.w, this.h),
            0 == this.state
              ? (this.dimmed && (ctx.globalAlpha = 0.4),
                (ctx.fillStyle = "rgba(255,255,255,0.1)"),
                ctx.fillRect(1, this.h - 10, this.w - 2, 9),
                (ctx.lineWidth = 1),
                (ctx.strokeStyle = color.tabStroke),
                ctx.strokeRect(0.5, 0.5, this.w - 1, this.h - 2),
                (ctx.font = font.tabText),
                (ctx.fillStyle = this.textColor),
                (ctx.textAlign = "center"))
              : ((ctx.globalAlpha = 0.5),
                (ctx.fillStyle = this.color ? this.color : this.parent.color),
                ctx.fillRect(0, 0, this.w, this.h),
                (ctx.globalAlpha = 1),
              this.dimmed && (ctx.globalAlpha = 0.4),
                (ctx.lineWidth = 1),
                (ctx.strokeStyle = this.color ? this.color : this.parent.color),
                ctx.strokeRect(0.5, 0.5, this.w - 1, this.h - 2),
                (ctx.fillStyle = "rgba(255,255,255,0.1)"),
                ctx.fillRect(1, this.h, this.w - 2, -10),
                (ctx.font = font.tabText),
                (ctx.textAlign = "center"),
                (ctx.fillStyle = color.black),
                ctx.fillText(this.text, (this.w / 2 + 1) | 0, (this.h / 2 + 7) | 0, this.w - 4),
                (ctx.fillStyle = color.tabTextSel)),
            ctx.fillText(this.text, (this.w / 2) | 0, ((this.h / 2) | 0) + 6, this.w - 4),
          this.dimmed && (ctx.globalAlpha = 1));
        },
      }),
      SLOTBUTTON = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "SLOTBUTTON";
          this.w = 70;
          this.h = 30;
          this.state = !1;
          this.color = null;
          this.text = "TEXT";
          this.idxText = "";
          this.font = font.tabText;
          this.font2 = "10pt open_sans_condensedbold";
          this.needBG = !0;
          this.textColor = color.tabText;
          this.textColor2 = null;
          this.textColorMain = color.white;
          this.indexColor = "#ccd";
          this.hidden = this.disabled = !1;
          this.showIndex = !0;
        },
        onDown: function () {
          if (!this.disabled && !this.hidden) {
            if ((this.state = !this.state)) this.onToggleUp();
            else this.onToggleDown();
            null != this.key && this.setVal(fromBool(this.state));
            this.onToggle();
            this.valueFunc();
            regUpdate(this);
          }
        },
        onToggle: function () {},
        onToggleUp: function () {},
        onToggleDown: function () {},
        valueFunc: function () {},
        getState: function () {},
        paint: function () {
          null != this.key && (this.state = this.getVal());
          this.getState();
          this.hidden ||
          ((ctx.fillStyle = color.eqBg),
            ctx.fillRect(-1, -1, this.w + 2, this.h + 2),
          this.disabled && (ctx.globalAlpha = 0.3),
            this.state
              ? ((ctx.fillStyle = hexToRGBA(this.color ? this.color : this.parent.color, 0.5)),
                ctx.fillRect(0, 0, this.w, this.h),
                (ctx.lineWidth = 1),
                (ctx.strokeStyle = this.color ? this.color : this.parent.color),
                ctx.strokeRect(0.5, 0.5, this.w - 1, this.h - 1),
                (ctx.fillStyle = "rgba(255,255,255,0.1)"),
                ctx.fillRect(1, this.h, this.w - 2, -10),
                ctx.drawText(this.text, this.w / 2, this.h / 2, { align: "center", valign: "middle", max: this.w - 4, font: this.font, color: this.textColor2 || this.textColor, shadow: [color.black, 0, 1, 1] }))
              : ((ctx.lineWidth = 1),
                (ctx.strokeStyle = color.tabStroke),
                ctx.strokeRect(0.5, 0.5, this.w - 1, this.h - 1),
                (ctx.fillStyle = "rgba(255,255,255,0.1)"),
                ctx.fillRect(1, this.h, this.w - 2, -10),
                ctx.drawText(this.text, this.w / 2, this.h / 2, { align: "center", valign: "middle", max: this.w - 4, font: this.font, color: this.textColorMain, shadow: [color.black, 0, 1, 1] })),
          this.showIndex && ctx.drawText("" + this.idxText, this.w - 3, 9, { align: "right", valign: "middle", font: this.font2, color: this.indexColor, shadow: [color.black, 0, 1, 1] }));
        },
      });
    scrollingWidget = null;
    var LIST = Class.create(Widget, {
      initialize: function ($super, b) {
        $super(b);
        this.widgetName = "MENU_LIST";
        this.h = this.w = 300;
        this.needMoveEvt = this.needClip = !0;
        this.lastClickTime = 0;
        this.items = ["  Loading..."];
        this.items2 = [];
        this.selectedIdx = this.selected = -1;
        this.selectedItem = null;
        this.prevSelected = this.hoverIdx = this.activeItemIdx = -1;
        this.filterValue = "f:";
        this.filter = !1;
        this.font = "16pt open_sans_condensedbold";
        this.itemH = 40;
        this.maxVOffset = this.vOffsetOld = this.vOffset = 0;
        this.vScrollEnabled = !0;
        this.vScrollWidth = 8;
        this.borderColor = "#666";
        this.bgColor = color.presetBg;
        this.textColor = color.white;
        this.selTextColor = "#111";
        this.selItemColor = "#eee";
        this.activeTextColor = "#e33";
        this.selectCanceled = this.snapList = this.showList = !1;
        this.listsOffsets = {};
        this.centered = this.scrollByScroller = !1;
      },
      setFilter: function (a) {
        clearInterval(ticker);
        null != this.filterValue && (this.listsOffsets[this.filterValue] = this.vOffset);
        this.filterValue = a;
        this.setItems(this.items2);
        this.filterValue in this.listsOffsets ? this.setOffset(this.listsOffsets[this.filterValue]) : this.setOffset(0);
        regUpdate(this);
      },
      onSetItems: function () {},
      setItems: function (a) {
        if (Array.isArray(a)) {
          if (this.filter) {
            this.items2 = a;
            var b = this.filterValue;
            this.items = a.filter(function (a) {
              return a.startsWith(b);
            });
          } else this.items = a;
          this.maxVOffset = this.items.length * this.itemH - this.h;
          0 > this.maxVOffset && (this.maxVOffset = 0);
          this.vOffset > this.maxVOffset && this.setOffset(this.maxVOffset);
          this.onSetItems();
          this.onSetItems = function () {};
          regUpdate(this);
        }
      },
      addItem: function (a) {
        this.items.push(a);
        regUpdate(this);
      },
      clear: function () {
        this.items.clear();
        this.clearSelection();
      },
      getActiveItem: function () {},
      selItem: function () {
        return 0 > this.selected || this.selected >= this.items.length ? null : this.items[this.selected];
      },
      select: function (a, b) {
        if (!(a >= this.items.length)) {
          0 > a ? ((this.selectedIdx = this.selected = -1), (this.selectedItem = null)) : ((this.selectedIdx = this.selected = a), (this.selectedItem = this.items[a]));
          if (!isDefined(b)) this.onSelect();
          regUpdate(this);
        }
      },
      selectByName: function (a) {
        a = this.items.indexOf(a);
        0 <= a && this.select(a);
        regUpdate(this);
      },
      selectLast: function () {
        0 != this.items.length && this.select(this.items.length - 1);
      },
      clearSelection: function () {
        this.select(-1);
      },
      setOffset: function (a) {
        this.vOffsetOld = this.vOffset = bound(a | 0, 0, this.maxVOffset);
        regUpdate(this);
      },
      onResize: function () {
        this.maxVOffset = this.items.length * this.itemH - this.h;
        0 > this.maxVOffset && (this.maxVOffset = 0);
        this.vOffset > this.maxVOffset && this.setOffset(this.maxVOffset);
      },
      onDown: function (a, b) {
        var c = b - this.globalY(),
          d = a - this.globalX();
        this.pressPoint = [d, c];
        this.selectCanceled = !1;
        this.vScrollEnabled && d > this.w - this.vScrollWidth - 2
          ? (this.selectCanceled = this.scrollByScroller = !0)
          : ((this.scrollByScroller = !1), (this.hoverIdx = Math.floor((this.pressPoint[1] + this.vOffset) / this.itemH)));
        !this.scrollByScroller && 0 < this.maxVOffset && this.velStart();
        regUpdate(this);
        this.onMove(a, b);
      },
      onMove: function (a, b) {
        var c = b - this.globalY();
        this.globalX();
        var d = c - this.pressPoint[1];
        this.vOffset = this.scrollByScroller ? bound((c / this.h) * this.maxVOffset, 0, this.maxVOffset) : bound(this.vOffsetOld - d, 0, this.maxVOffset);
        regUpdate(this);
        !this.selectCanceled && 5 < Math.abs(d) && (this.selectCanceled = !0);
      },
      onUp: function () {
        if (!this.selectCanceled) {
          var a = Math.floor((this.pressPoint[1] + this.vOffset) / this.itemH);
          this.selected != a && this.select(a);
        }
        this.onPress();
        var a = Date.now(),
          b = this.items.length * this.itemH;
        if (!this.selectCanceled && this.pressPoint[1] + this.vOffset <= b && this.prevSelected == this.selectedIdx && a - this.lastClickTime < DBL_CLK_TIME) this.onDClick();
        this.lastClickTime = a;
        this.prevSelected = this.selectedIdx;
        this.hoverIdx = -1;
        this.vOffsetOld = this.vOffset;
        this.pressPoint = [-1, -1];
        !this.scrollByScroller && 0 < this.maxVOffset && this.velRelease();
        regUpdate(this);
      },
      onWheel: function (a) {
        clearInterval(ticker);
        this.setOffset(this.vOffset - Math.round(a / 6));
      },
      velStart: function () {
        velocity = amplitude = 0;
        timestamp = Date.now();
        clearInterval(ticker);
        frame = this.vOffset;
        scrollingWidget = this;
        ticker = setInterval(this.velTrack, 20);
      },
      velTrack: function () {
        var a, b;
        a = Date.now();
        b = a - timestamp;
        timestamp = a;
        a = scrollingWidget.vOffset - frame;
        frame = scrollingWidget.vOffset;
        velocity = ((1e3 * a) / (1 + b)) * 0.8 + 0.2 * velocity;
      },
      velRelease: function () {
        clearInterval(ticker);
        10 < Math.abs(velocity) && this.mScroll(velocity);
      },
      mScroll: function (a) {
        if (!settings.kinetic) {
          position = this.vOffset;
          amplitude = 0.3 * a;
          step = 0;
          var b = this;
          clearInterval(ticker);
          ticker = setInterval(function () {
            var a = amplitude / 20;
            position += a;
            amplitude -= a;
            step += 1;
            80 < step && clearInterval(ticker);
            (0 >= position || position > b.maxVOffset) && clearInterval(ticker);
            scrollingWidget.vOffset != (position | 0) && scrollingWidget.setOffset(position | 0);
          }, 20);
        }
      },
      gotoSelected: function () {
        0 > this.selected || this.selected >= this.items.length || this.setOffset(this.selected * this.itemH - this.h / 2);
      },
      gotoActive: function () {
        0 > this.activeItemIdx || this.activeItemIdx >= this.items.length || this.setOffset(this.activeItemIdx * this.itemH - this.h / 2);
      },
      onDClick: function () {},
      onSelect: function () {},
      onPress: function () {},
      valueFunc: function () {},
      calcGeometry: function () {
        this.maxVOffset = this.items.length * this.itemH - this.h;
        0 > this.maxVOffset && (this.maxVOffset = 0);
        this.vOffset > this.maxVOffset && this.setOffset(this.maxVOffset);
      },
      calcSize: function () {
        this.h = this.items.length * this.itemH;
        this.parent && regUpdate(this.parent);
      },
      paint: function () {
        ctx.fillStyle = this.bgColor;
        ctx.fillRect(0, 0, this.w, this.h);
        this.getActiveItem();
        var a = this.items.length * this.itemH;
        this.vScrollEnabled = a > this.h ? !0 : !1;
        var b = this.w - 1;
        ctx.font = this.font;
        ctx.textAlign = this.centered ? "center" : "left";
        ctx.shadowColor = "transparent";
        ctx.textBaseline = "middle";
        var c = (this.itemH / 2) | 0;
        ctx.setShadow(color.black, 0, 1, 1);
        for (var d = 0; d < this.items.length; d++) {
          var f = d * this.itemH - this.vOffset;
          if (!(f < -this.itemH || f > this.h)) {
            this.selected == d && ((ctx.fillStyle = this.selItemColor), ctx.fillRect(0, f, b, this.itemH));
            this.hoverIdx == d && ((ctx.fillStyle = "rgba(255,255,255,0.05)"), ctx.fillRect(0, f, b, this.itemH));
            ctx.fillStyle = this.selected == d ? this.selTextColor : this.textColor;
            this.activeItemIdx == d && (ctx.fillStyle = this.activeTextColor);
            var e = this.items[d];
            this.filter && (e = e.substr(2));
            ctx.fillText(e, this.centered ? this.w / 2 : 8, f + c, b);
            ctx.shadowColor = "transparent";
            ctx.fillStyle = "#444";
            ctx.fillRect(0, f + this.itemH, b, -1);
          }
        }
        this.vScrollEnabled &&
        (a < this.h && (a = this.h),
          (b = (this.h / a) * this.h),
          (a = 2 + (this.vOffset / (a - this.h)) * (this.h - 4 - b)),
          (ctx.fillStyle = "rgba(0,0,0,0.4)"),
          ctx.fillRoundRect(this.w - this.vScrollWidth - 2 + 1, (a + 1) | 0, this.vScrollWidth - 2, (b - 2) | 0, 5),
          (ctx.fillStyle = "rgba(255,255,255,0.6)"),
          ctx.fillRoundRect(this.w - this.vScrollWidth - 2, a, this.vScrollWidth, b | 0, 7));
        ctx.lineWidth = 1 + (isSmall ? 1 : 0);
        ctx.strokeStyle = this.borderColor;
        ctx.strokeRect(0.5, 0.5, this.w - 1, this.h - 1);
        ctx.textBaseline = "alphabetic";
      },
    });
    currentPresetWindow = null;
    cuurentPresetDir = 0;
    var PRESET_MENU2 = Class.create(Widget, {
        initialize: function ($super, b, c, d, f, e) {
          $super(b);
          this.widgetName = "PRESET_MENU";
          this.h = this.w = 500;
          this.sy = 58;
          this.title = "PRESETS";
          this.color = "#eee";
          this.bg = "#262728";
          this.borderColor = "#676869";
          this.type = c;
          this.t = null;
          this.target = d;
          this.center = !0;
          this.currentPreset = e || "";
          this.user = 0;
          switch (this.type) {
            case "ch":
              this.title = lang.CHANNEL_PRESETS;
              break;
            case "chm":
              this.title = lang.MASTER_PRESETS;
              break;
            case "eqch":
              this.title = lang.CHANNEL_EQ_PRESETS;
              break;
            case "eqaux":
              this.title = lang.AUX_EQ_PRESETS;
              break;
            case "eqm":
              this.title = lang.MASTER_EQ_PRESETS;
              break;
            case "dynch":
              this.title = lang.CHANNEL_DYN_PRESETS;
              break;
            case "dynaux":
              this.title = lang.AUX_DYN_PRESETS;
              break;
            case "dynm":
              this.title = lang.MASTER_DYN_PRESETS;
              break;
            case "fxcho":
              this.title = lang.CHORUS_FX_PRESETS;
              break;
            case "fxdel":
              this.title = lang.DELAY_FX_PRESETS;
              break;
            case "fxrev":
              this.title = lang.REVERB_FX_PRESETS;
              break;
            case "fxroom":
              this.title = lang.ROOM_PRESETS;
              break;
            case "digi":
              this.title = lang.DIGITECH_PRESETS;
              break;
            case "gate":
              this.title = lang.GATE_PRESETS;
              break;
            case "afs":
              this.title = lang.AFS_PRESETS;
              break;
            case "ux":
              (this.title = lang.UX_PRESETS), (cuurentPresetDir = 1);
          }
          isDefined(f)
            ? (this.color = f)
            : this.type.contains("chm")
              ? (this.color = color.red)
              : this.type.contains("afs")
                ? (this.color = "#888")
                : this.type.contains("ch")
                  ? (this.color = color.yellow)
                  : this.type.contains("eq")
                    ? (this.color = color.purple)
                    : this.type.contains("dyn")
                      ? (this.color = color.orange)
                      : this.type.contains("fx")
                        ? (this.color = color.blue)
                        : this.type.contains("gate")
                          ? (this.color = color.GATE)
                          : (this.type.contains("ux"), (this.color = color.red));
          this.initWidgets();
          this.refreshList();
          this.calcGeometry();
          mWidgets.push(widgets.pop());
          currentPresetWindow = this;
        },
        refreshList: function () {
          if (EMULATE && !WEBSITE_MODE) {
            var a = $A($R("f:FACTORY PRESET A", "f:FACTORY PRESET Z")),
              a = a.concat($A($R("u:USER PRESET A", "u:USER PRESET Z")));
            this.LIST.setItems(a);
          } else PRESETS.list(this.type, this.LIST);
        },
        checkDir: function () {
          0 == cuurentPresetDir ? (this.RENAME.hide(), this.DEL.hide()) : (this.RENAME.show(), this.DEL.show());
        },
        initWidgets: function () {
          var a = this;
          this.LIST = new LIST(this);
          this.LIST.filter = !0;
          this.LIST.filterValue = 1 == cuurentPresetDir ? "u:" : "f:";
          this.LIST.setPos(10, this.sy);
          this.LIST.setSize(100, 100);
          this.LOAD = new MENUBUTTON(this);
          this.LOAD.text = lang.LOAD;
          this.LOAD.bg = this.bg;
          this.LOAD.setPos(200, 20);
          this.LOAD.onPress = function () {
            if (EMULATE && !WEBSITE_MODE) showPopupMsg(lang.DEMO_VERSION), a.close();
            else {
              var b = a.LIST.selItem();
              null != b && (PRESETS.read(a.type, b, a.target), a.close());
            }
          };
          var b = this.LOAD;
          this.LIST.onDClick = function () {
            b.click();
          };
          this.SAVE = new MENUBUTTON(this);
          this.SAVE.text = lang.SAVE;
          this.SAVE.bg = this.bg;
          this.SAVE.setPos(200, 50);
          this.SAVE.onPress = function () {
            if (EMULATE && !WEBSITE_MODE) showPopupMsg(lang.DEMO_VERSION), a.close();
            else {
              editOk.valueFunc = function () {
                var b = editBox2.value;
                if (null != b && 0 != b.length) {
                  var b = b.replace(/\^/g, "_"),
                    c = a.target.savePreset(b);
                  -1 != a.LIST.items.indexOf("u:" + b)
                    ? ((confOk.valueFunc = function () {
                      PRESETS.save(a.type, b, c);
                      a.close();
                      showPopupMsg(lang.SAVED, 800);
                    }),
                      (confCancel.valueFunc = function () {}),
                      showConfBox(lang.REPLACE_PRESET.format(b)))
                    : (PRESETS.save(a.type, b, c), a.close(), showPopupMsg(lang.SAVED, 800));
                }
              };
              var b = a.LIST.selItem(),
                b = null != b ? b.substr(2) : "";
              showEditBox2(lang.SAVE_PRESET_WITH_NAME, b);
            }
          };
          this.RENAME = new MENUBUTTON(this);
          this.RENAME.text = lang.RENAME;
          this.RENAME.bg = this.bg;
          this.RENAME.setPos(200, 110);
          this.RENAME.onPress = function () {
            if (EMULATE && !WEBSITE_MODE) showPopupMsg(lang.DEMO_VERSION), a.close();
            else {
              var b = a.LIST.selItem();
              null == b ||
              b.startsWith("f:") ||
              ((editOk.valueFunc = function () {
                var c = editBox2.value;
                null != c && 0 != c.length && ((c = c.replace(/\^/g, "_")), "u:" + c != b && (PRESETS.rename(a.type, b, c), a.refreshList()));
              }),
                showEditBox2(lang.RENAME_PRESET, b.substr(2)));
            }
          };
          this.DEL = new MENUBUTTON(this);
          this.DEL.text = lang.DELETE;
          this.DEL.bg = this.bg;
          this.DEL.setPos(200, 80);
          this.DEL.onPress = function () {
            if (EMULATE && !WEBSITE_MODE) showPopupMsg(lang.DEMO_VERSION), a.close();
            else {
              var b = a.LIST.selItem();
              null == b ||
              b.startsWith("f:") ||
              ((confOk.valueFunc = function () {
                PRESETS.del(a.type, b);
                a.refreshList();
              }),
                (confCancel.valueFunc = function () {}),
                showConfBox(lang.DELETE_PRESET.format(b.substr(2))));
            }
          };
          this.FACUSER = new SWITCHBOX(this);
          this.FACUSER.setItems([lang.FACTORY, lang.USER]);
          this.FACUSER.setItemWidth(80);
          this.FACUSER.state = cuurentPresetDir;
          this.FACUSER.bg = this.bg;
          this.FACUSER.setPos(10, 15);
          this.FACUSER.color = this.color;
          this.FACUSER.borderColor = this.borderColor;
          this.FACUSER.valueFunc = function () {
            cuurentPresetDir = a.user = this.state;
            a.LIST.setFilter(0 == this.state ? "f:" : "u:");
            a.checkDir();
          };
          "ux" == this.type && this.FACUSER.hide();
          this.checkDir();
        },
        close: function () {
          currentPresetWindow = null;
          this.enabled = !1;
          clearModals();
          regUpdate(this.target);
        },
        onDelete: function () {
          currentPresetWindow = null;
        },
        calcPos: function () {},
        calcGeometry: function () {
          this.center && this.setPos(Math.round((screenWidth - this.w) / 2) | 0, ((screenHeight - this.h) / 2) | 0);
          var a = this.sy,
            b = 0;
          this.LIST.setSize(this.w - this.LIST.x - this.DEL.w - 20, this.h - this.LIST.y - 15 - 50);
          var c = this.DEL.w + 10;
          this.DEL.setPos(this.w - c, this.h - this.DEL.h - 15 - 50);
          this.LOAD.setPos(this.w - c, a + 45 * b++);
          this.SAVE.setPos(this.w - c, a + 45 * b++);
          this.RENAME.setPos(this.w - c, a + 45 * b++);
          this.grd = ctx.createLinearGradient(0, 0, 0, 40);
          this.grd.addColorStop(0, "rgba(255,255,255,0.2)");
          this.grd.addColorStop(1, "rgba(255,255,255,0.0)");
        },
        paint: function () {
          ctx.fillStyle = this.bg;
          ctx.strokeStyle = this.borderColor;
          ctx.lineWidth = 1;
          ctx.beginPath();
          ctx.rect(0.5, 0.5, this.w - 1, this.h - 1);
          ctx.fill();
          ctx.stroke();
          ctx.beginPath();
          ctx.fillStyle = this.grd;
          ctx.rect(0.5, 0.5, this.w - 1, 40);
          ctx.fillStyle = color.white;
          ctx.font = "16pt open_sans_condensedbold";
          "ux" != this.type ? ((ctx.textAlign = "right"), ctx.fillText(this.title, this.LIST.x + this.LIST.w, 38)) : ((ctx.textAlign = "center"), ctx.fillText(this.title, this.w / 2, 38));
          ctx.fillStyle = this.color;
          ctx.fillRect(10, this.h - 59, this.w - 20, 50);
          switch (this.type) {
            case "ch":
            case "chm":
            case "eqch":
            case "eqaux":
            case "eqm":
            case "dynch":
            case "dynaux":
            case "dynm":
            case "gate":
            case "afs":
              drawImage(res.dbx_logo, 20, this.h - 53);
              break;
            case "fxrev":
              drawImage(res.lex_rev, 20, this.h - 53);
              break;
            case "fxroom":
              drawImage(res.lex_rmlogo, 20, this.h - 53);
              break;
            case "fxcho":
              drawImage(res.lex_cho, 20, this.h - 53);
              break;
            case "fxdel":
              drawImage(res.lex_dly, 20, this.h - 53);
              break;
            case "digi":
              drawImage(res.DIGI_PRE, 22, this.h - 45);
              break;
            case "ux":
              drawText(lang.CONFIG_WARNING, 20, this.h - 40, { color: color.white, align: "left", font: "14px open_sans_condensedbold" });
          }
        },
      }),
      PRESETS = {
        list: function (a, b) {
          if (a && b)
            if (WEBSITE_MODE) {
              var c = JSON.parse(localStorage.getItem(a)) || {},
                d = E_FACTORY_PRESETS[a] || {},
                c = Object.keys(c),
                d = Object.keys(d),
                c = c.map(function (a) {
                  return "u:" + a;
                }),
                d = d.map(function (a) {
                  return "f:" + a;
                }),
                d = d.concat(c);
              b.setItems && b.setItems(d);
            } else (widgetReqList = b), sendMessage(E_COMMANDS.PRESET_LIST + "^" + a);
        },
        read: function (a, b, c) {
          if (a && b && c)
            if (WEBSITE_MODE) {
              var d = {};
              b.startsWith("u:") && (d = JSON.parse(localStorage.getItem(a)) || {});
              b.startsWith("f:") && (d = E_FACTORY_PRESETS[a] || {});
              b = b.replace("u:", "");
              b = b.replace("f:", "");
              (a = d[b]) && c.loadPreset && c.loadPreset(a, b);
            } else (widgetReqPreset = c), sendMessage(E_COMMANDS.PRESET_READ + "^" + a + "^" + b);
        },
        save: function (a, b, c) {
          if (c && a && b)
            if (WEBSITE_MODE) {
              if (!b.startsWith("f:")) {
                b.startsWith("u:") && (b = b.replace("u:", ""));
                var d = JSON.parse(localStorage.getItem(a)) || {};
                d[b] = c;
                localStorage.setItem(a, JSON.stringify(d));
              }
            } else isString(c) || (c = JSON.stringify(c)), sendMessage(E_COMMANDS.PRESET_WRITE + "^" + a + "^u:" + b + "^" + c);
        },
        del: function (a, b, c) {
          a &&
          b &&
          (WEBSITE_MODE
            ? b.startsWith("f:") || (b.startsWith("u:") && (b = b.replace("u:", "")), (c = JSON.parse(localStorage.getItem(a)) || {}), b in c && delete c[b], localStorage.setItem(a, JSON.stringify(c)))
            : ((widgetReqPreset = c), sendMessage(E_COMMANDS.PRESET_DEL + "^" + a + "^" + b)));
        },
        rename: function (a, b, c) {
          if (c && a && b && b !== "u:" + c)
            if (WEBSITE_MODE) {
              if (!b.startsWith("f:")) {
                b.startsWith("u:") && (b = b.replace("u:", ""));
                var d = JSON.parse(localStorage.getItem(a)) || {};
                b in d && ((d[c] = d[b]), delete d[b]);
                localStorage.setItem(a, JSON.stringify(d));
              }
            } else sendMessage(E_COMMANDS.PRESET_RENAME + "^" + a + "^" + b + "^u:" + c);
        },
      },
      SHOW_MENU = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "SHOW_MENU";
          this.w = 510;
          this.h = 420;
          this.color = "black";
          showsPopup = this;
          this.initWidgets();
          this.refreshList();
          this.calcGeometry();
          mWidgets.push(widgets.pop());
        },
        refreshList: function () {
          if (EMULATE) this.SHOWS.setItems($A($R("SHOW A", "SHOW Z"))), (this.SNAPS.showName = getValue("var.currentShow")), this.SNAPS.setItems($A($R("SNAPSHOT A", "SNAPSHOT Z")));
          else {
            widgetReqList = this.LIST;
            sendMessage(E_COMMANDS.SHOW_LIST);
            var a = getValue("var.currentShow");
            0 != a.length && sendMessage(E_COMMANDS.SNAP_LIST + "^" + a);
          }
        },
        initWidgets: function () {
          var a = this;
          this.SHOWS = new LIST(this);
          this.SHOWS.setPos(10, 34);
          this.SHOWS.setSize(240, this.h - 34 - 10);
          this.SHOWS.getActiveItem = function () {
            var a = getValue("var.currentShow");
            this.activeItemIdx = this.items.indexOf(a);
          };
          this.SHOWS.onDClick = function () {
            if (EMULATE) showPopupMsg(lang.DEMO_VERSION), a.close();
            else if (isBlocked("shows")) showPopupMsg(lang.LOCKED, 800);
            else {
              var b = this.selItem();
              null != b && sendMessage(E_COMMANDS.SHOW_LOAD + "^" + b);
            }
          };
          this.SHOWS.onSelect = function () {
            if (!EMULATE) {
              var b = this.selItem();
              null != b && (a.SNAPS.clear(), (a.SNAPS.showName = b), sendMessage(E_COMMANDS.SNAP_LIST + "^" + b));
            }
          };
          this.SNAPS = new LIST(this);
          this.SNAPS.setPos(260, 34);
          this.SNAPS.setSize(240, this.h - 34 - 10);
          this.SNAPS.showName = "";
          this.SNAPS.getActiveItem = function () {
            var a = getValue("var.currentShow");
            this.showName != a ? (this.activeItemIdx = -1) : ((a = getValue("var.currentSnapshot")), (this.activeItemIdx = this.items.indexOf(a)));
          };
          this.SNAPS.onDClick = function () {
            if (EMULATE) showPopupMsg(lang.DEMO_VERSION), a.close();
            else if (isBlocked("shows")) showPopupMsg(lang.LOCKED, 800);
            else {
              var b = this.selItem();
              if (null != b) {
                var c = a.SHOWS.selItem();
                null == c && (c = getValue("var.currentShow"));
                null != c && (getValue("var.currentShow") != c && sendMessage(E_COMMANDS.SHOW_LOAD + "^" + c), sendMessage(E_COMMANDS.SNAP_LOAD + "^" + c + "^" + b), a.close());
              }
            }
          };
        },
        onDelete: function () {
          clearInterval(ticker);
          this.hide();
          log("SHOW_MENU ONDELETE");
          for (var a = 0; a < this.widgets.length; a++) delete this.widgets[a];
          showsPopup = null;
        },
        close: function () {
          log("SHOW_MENU CLOSE");
          this.enabled = !1;
          clearModals();
        },
        calcGeometry: function () {
          this.setPos(screenWidth - this.w - 10, 60);
          this.grd = ctx.createLinearGradient(0, 0, 0, 40);
          this.grd.addColorStop(0, "rgba(255,255,255,0.2)");
          this.grd.addColorStop(1, "rgba(255,255,255,0.0)");
        },
        paint: function () {
          ctx.fillStyle = "#262728";
          ctx.strokeStyle = "#676869";
          ctx.lineWidth = 1;
          ctx.roundRect(0, 0, this.w, this.h, 14);
          ctx.fill();
          ctx.stroke();
          ctx.fillStyle = this.grd;
          ctx.fillTopRoundRect(0, 0, this.w, 40, 14);
          ctx.font = font.editbox;
          ctx.textAlign = "center";
          ctx.fillStyle = color.tabTextSel;
          ctx.fillText(lang.SHOWS, 130, 24);
          ctx.fillText(lang.SNAPSHOTS, 380, 24);
        },
      }),
      MODAL_LIST = Class.create(Widget, {
        initialize: function ($super, b, c) {
          $super(b);
          this.widgetName = "MODAL_LIST";
          this.h = this.w = 400;
          this.sy = 58;
          this.command = c;
          this.title = "TITLE";
          this.color = "#eee";
          this.bg = "#262728";
          this.borderColor = "#676869";
          this.initWidgets();
          this.updateGeometry();
          mWidgets.push(widgets.pop());
          this.refreshList();
        },
        refreshList: function () {
          widgetReqList = this.LIST;
          sendMessage(this.command);
        },
        valueFunc: function (a) {
          showPopupMsg(a);
        },
        initWidgets: function () {
          var a = this;
          this.LIST = new LIST(this);
          this.LIST.setAnchors(10, this.sy, 10, 50);
          this.LOAD = new MENUBUTTON(this);
          this.LOAD.text = lang.OK;
          this.LOAD.bg = this.bg;
          this.LOAD.w = 90;
          this.LOAD.setAnchors(10, null, null, 10);
          this.LOAD.onPress = function () {
            var b = a.LIST.selItem();
            a.valueFunc(b);
            a.close();
          };
          this.LIST.onDClick = function () {
            a.LOAD.click();
          };
          this.CANCEL = new MENUBUTTON(this);
          this.CANCEL.text = lang.CANCEL;
          this.CANCEL.bg = this.bg;
          this.CANCEL.w = 90;
          this.CANCEL.setAnchors(null, null, 10, 10);
          this.CANCEL.onPress = function () {
            a.close();
          };
        },
        close: function () {
          this.enabled = !1;
          clearModals();
        },
        onDelete: function () {},
        calcGeometry: function () {
          this.x = ((screenWidth - this.w) / 2) | 0;
          this.y = ((screenHeight - this.h) / 2) | 0;
          this.grd = ctx.createLinearGradient(0, 0, 0, 40);
          this.grd.addColorStop(0, "rgba(255,255,255,0.2)");
          this.grd.addColorStop(1, "rgba(255,255,255,0.0)");
        },
        paint: function () {
          ctx.fillStyle = this.bg;
          ctx.strokeStyle = this.borderColor;
          ctx.lineWidth = 1;
          ctx.roundRect(0, 0, this.w, this.h, 14);
          ctx.fill();
          ctx.stroke();
          ctx.fillStyle = this.grd;
          ctx.fillTopRoundRect(0, 0, this.w, 40, 14);
          ctx.fillStyle = color.white;
          ctx.font = "16pt open_sans_condensedbold";
          ctx.textAlign = "center";
          ctx.setShadow(color.black, 3, 1, 1);
          ctx.fillText(this.title, (this.w / 2) | 0, 38);
        },
      }),
      COPY_AUX_MENU = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(-1);
          this.widgetName = "COPY_AUX_MENU";
          this.w = 250;
          this.h = 100;
          8 < auxStrips.length && (this.h += 50);
          this.t = b.name;
          this.target = b;
          this.target_idx = b.idx;
          this.text = lang.COPY_AUX_VALUES_FROM;
          this.color = color.AUX;
          this.initWidgets();
          this.updateGeometry();
          regUpdate(this);
        },
        initWidgets: function () {
          var a = this,
            b = 10,
            c = 80;
          this.mix = new SButton(this);
          this.mix.text = lang.MAIN_MIX;
          this.mix.h = 40;
          this.mix.setAnchors(10, 30, 10, null);
          this.mix.onPress = function () {
            var b = a.target_idx;
            confOk.valueFunc = function () {
              copyMixToAux(b);
            };
            showConfBox(lang.ARE_YOU_SURE);
            a.close();
          };
          this.buttons = [];
          for (var d = 0; d < auxStrips.length; d++) {
            var f = new SButton(this);
            f.idx = d;
            f.textColor = this.color;
            f.setSize(50, 40);
            f.setPos(b, c);
            f.getState = function () {
              var b = auxStrips[this.idx];
              this.text = b.getName(!0);
              this.textColor = b.getColor();
              this.disabled = a.target.getNameValue("matrix") != b.getNameValue("matrix") || this.idx == a.target_idx;
            };
            f.onPress = function () {
              var b = a.target.getNameValue("matrix"),
                c = this.idx,
                d = a.target_idx;
              confOk.valueFunc = b
                ? function () {
                  copyMtxSends(c, d);
                }
                : function () {
                  copyAuxSends(c, d);
                };
              showConfBox(lang.ARE_YOU_SURE);
              a.close();
            };
            b += 60;
            0 == (d + 1) % 4 && d && ((b = 10), (c += 50));
          }
          c += 50;
          this.h < c && (this.h = c);
        },
        calcGeometry: function () {
          this.x = ((screenWidth - this.w) / 2) | 0;
          this.y = ((screenHeight - this.h) / 2) | 0;
        },
        onDelete: function () {},
        paint: function () {
          ctx.fillStyle = "#111";
          ctx.fillRoundRect(0, 0, this.w, this.h, 10);
          var a = ctx.createLinearGradient(0, 0, this.w, this.h);
          a.addColorStop(0, "rgba(255,255,255,0)");
          a.addColorStop(0.2, "rgba(255,255,255,0)");
          a.addColorStop(0.5, "rgba(255,255,255,0.15)");
          a.addColorStop(0.8, "rgba(255,255,255,0)");
          a.addColorStop(1, "rgba(255,255,255,0)");
          ctx.fillStyle = a;
          ctx.fillRoundRect(0, 0, this.w, this.h, 10);
          ctx.roundRect(0, 0, this.w, this.h, 10);
          ctx.strokeStyle = "#333";
          ctx.lineWidth = 2;
          ctx.stroke();
          ctx.drawText(this.text, this.w / 2, 15, { font: font.tabText, color: this.color, shadow: Shadow.main, align: "center", valign: "middle" });
        },
      }),
      METERS_PAGE = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "METERS_PAGE";
          this.y = 40;
          this.compact = this.enabled = !1;
          1024 > screenWidth && (this.compact = !0);
          this.bpmTimer = null;
          this.initWidgets();
        },
        initWidgets: function () {
          this.mi = new METERS_IND(this);
          metersWidget = this.m = new METERS(this);
          var a = this;
          this.MGS = [];
          for (var b = 0; 6 > b; b++) {
            var c = new SCheckBox(this);
            c.text = lang.red;
            c.mline = !0;
            c.color = c.textColor = color.red;
            c.textColor = color.white;
            c.setSize(70, 42);
            c.text = lang.MUTE_GROUP_X.format(b + 1).replace(" ", "<br>");
            c.idx = b;
            c.getState = function () {
              this.state = getMGroupState(this.idx);
            };
            c.onToggleUp = function () {
              muteGroupON(this.idx);
            };
            c.onToggleDown = function () {
              muteGroupOFF(this.idx);
            };
            c.setAnchors(20 + 80 * b, null, null, 8);
            this.MGS.push(c);
          }
          this.tap = new SButton(this);
          this.tap.text = lang.TAP_TEMPO.replace(" ", "<br>");
          this.tap.color = color.orange;
          this.tap.textColor = color.white;
          this.tap.mline = !0;
          this.tap.setSize(100, 42);
          this.tap.longClickMark = !0;
          this.tap.setAnchors(null, null, null, 8);
          this.tap.regKey("f.0.bpm");
          this.tap.regKey("f.1.bpm");
          this.tap.regKey("f.2.bpm");
          this.tap.regKey("f.3.bpm");
          this.tap.getState = function () {
            this.text = lang.TAP_X_BPM.format(getGlobalBpm());
          };
          this.tap.valueFunc = bpmTapHandler;
          this.tap.onHold = askBpm;
          this.tap.doBeep = function () {
            var a = this;
            this.longClickMarkColor = "#2ee";
            this.longClickMarkColor2 = "#066";
            regUpdate(this);
            clearTimeout(this.beepTimer);
            this.beepTimer = setTimeout(function () {
              a.longClickMarkColor = color.longClickMark;
              a.longClickMarkColor2 = color.longClickMark2;
              regUpdate(a);
            }, 80);
          };
          this.mutefx = new SCheckBox(this);
          this.mutefx.text = lang.MUTE_FX.replace(" ", "<br>");
          this.mutefx.mline = !0;
          this.mutefx.color = this.mutefx.textColor = color.tvMuteFX;
          this.mutefx.setSize(70, 42);
          this.mutefx.setAnchors(null, null, 40, 8);
          this.mutefx.getState = function () {
            this.state = checkBit(getValue("mgmask"), MUTEFX_BIT_IDX) ? 1 : 0;
          };
          this.mutefx.onToggleUp = function () {
            mixerWidget.muteFX();
          };
          this.mutefx.onToggleDown = function () {
            mixerWidget.unMuteFX();
          };
          this.muteall = new SCheckBox(this);
          this.muteall.text = lang.MUTE_ALL.replace(" ", "<br>");
          this.muteall.color = this.muteall.textColor = color.tvMuteALL;
          this.muteall.mline = !0;
          this.muteall.setSize(70, 42);
          this.muteall.setAnchors(null, null, 120, 8);
          this.muteall.getState = function () {
            this.state = checkBit(getValue("mgmask"), MUTEALL_BIT_IDX) ? 1 : 0;
          };
          this.muteall.onToggleUp = function () {
            mixerWidget.muteAll();
          };
          this.muteall.onToggleDown = function () {
            mixerWidget.cancelMuteAll();
          };
          this.clearsolo = new SButton(this);
          this.clearsolo.text = lang.CLEAR_SOLO.replace(" ", "<br>");
          this.clearsolo.mline = !0;
          this.clearsolo.color = this.clearsolo.textColor = color.tvClearSolo;
          this.clearsolo.setSize(70, 42);
          this.clearsolo.setAnchors(null, null, 200, 8);
          this.clearsolo.onPress = function () {
            mixerWidget.clearSolos();
            regUpdate(a);
          };
        },
        onShow: function () {
          this.startBPM();
        },
        onHide: function () {
          this.stopBPM();
        },
        startBPM: function () {
          clearInterval(this.bpmTimer);
          this.bpmTimer = null;
          this.calcBPM();
        },
        calcBPM: function () {
          var a = this,
            b = getGlobalBpm(!0);
          this.lastbpmValue = b;
          this.beepTime = 6e4 / b;
          80 > this.beepTime && (this.beepTime = 80);
          3e3 < this.beepTime && (this.beepTime = 3e3);
          1 > b && (this.beepTime = 500);
          clearInterval(this.bpmTimer);
          this.bpmTimer = setInterval(function () {
            var b = getGlobalBpm(!0);
            1 < b && a.tap.doBeep();
            b != a.lastbpmValue && a.calcBPM();
          }, this.beepTime);
        },
        stopBPM: function () {
          clearInterval(this.bpmTimer);
          this.lastbpmValue = -1;
        },
        onDown: function (a, b) {
          this.lastPressPoint = this.pressPoint;
          this.pressPoint = [a, b];
        },
        onUp: function (a) {
          var b = Date.now(),
            c = Math.abs(this.lastPressPoint[0] - this.pressPoint[0]),
            d = Math.abs(this.lastPressPoint[1] - this.pressPoint[1]);
          2 < mouseTargets.length ||
          (isDefined(tHash[a]) && 2 < tHash[a].length) ||
          (30 > c && 30 > d && b - this.lastClickTime < DBL_CLK_TIME ? (this.onDouble(), (this.lastClickTime = b - DBL_CLK_TIME)) : (this.lastClickTime = b));
        },
        onDouble: function () {
          setMode(E_MODE.MIX);
        },
        calcGeometry: function () {
          this.w = this.parent.w - this.x;
          this.h = this.parent.h - this.y;
          this.mi.setAnchors(20, 0, 0, null);
          this.m.setAnchors(20, 120, 0, 101);
          this.tap.x = (490 + (this.w - 490 - 270 - this.tap.w) / 2) | 0;
        },
        paint: function () {
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, 0, this.w, this.h);
          var a = 20,
            b = this.m.y + this.m.h,
            c = ((this.w - a) / allStripsNoVca.length - 1) | 0,
            d;
          ctx.textAlign = "center";
          ctx.font = font.botChLabel;
          ctx.fillStyle = color.INPUT;
          var f = inStrips.length * (c + 1) - 2;
          ctx.fillRect(a, b, f, 20);
          if (!HAVE_ROUTING)
            for (d = 0; 4 > d; d++)
              inStrips[d].getNameValue("hiz") &&
              ((ctx.fillStyle = color.INPUT),
                (ctx.font = "14px open_sans_condensedbold"),
                ctx.fillBotRoundRect(a + (c + 1) * d, b + 20, c, 20, 4),
                (ctx.fillStyle = "#eee"),
                ctx.drawText("Z", (a + (c + 1) * d + c / 2) | 0, (b + 20 + 10 + 5) | 0, { shadow: [color.black, 0, 1, 1] }));
          ctx.font = font.botChLabel;
          ctx.fillStyle = "#eee";
          ctx.drawText(lang.INPUT, (a + f / 2) | 0, b + 38, { shadow: [color.black, 0, 1, 1] });
          a += f + 1;
          ctx.fillStyle = color.LINEIN;
          f = lineinStrips.length * (c + 1) - 1;
          ctx.fillRect(a, b, f, 20);
          ctx.fillStyle = "#eee";
          ctx.drawText(lang.LINE, (a + f / 2) | 0, b + 38, { shadow: [color.black, 0, 1, 1] });
          a += f + 1;
          ctx.fillStyle = color.media;
          f = mediaStrips.length * (c + 1) - 1;
          ctx.fillRect(a, b, f, 20);
          ctx.fillStyle = "#eee";
          d = (a + f / 2) | 0;
          ctx.fillTriangle2(d - 6, b + 38 - 15, d + 6, b + 38 + 8 - 15, d - 6, b + 38 + 16 - 15);
          a += f + 1;
          ctx.fillStyle = color.FX;
          f = fxStrips.length * (c + 1) - 1;
          ctx.fillRect(a, b, f, 20);
          ctx.fillStyle = "#eee";
          ctx.drawText(lang.FX, (a + f / 2) | 0, b + 38, f, { shadow: [color.black, 0, 1, 1] });
          a += f + 1;
          ctx.fillStyle = color.sub;
          f = subStrips.length * (c + 1) - 1;
          ctx.fillRect(a, b, f, 20);
          ctx.fillStyle = "#eee";
          ctx.drawText(lang.SUB, (a + f / 2) | 0, b + 38, f, { shadow: [color.black, 0, 1, 1] });
          a += f + 1;
          ctx.fillStyle = color.AUX;
          f = auxStrips.length * (c + 1);
          if (HAVE_MATRIX) for (d = 0; d < auxStrips.length; d++) (ctx.fillStyle = auxStrips[d].getNameValue("matrix") ? color.MATRIX : color.AUX), ctx.fillRect(a + (c + 1) * d, b, c + 1, 20);
          else ctx.fillRect(a, b, f - 1, 20);
          ctx.fillStyle = "#eee";
          d = lang.AUX;
          HAVE_MATRIX && (d += " / " + lang.MTX);
          ctx.drawText(d, (a + f / 2) | 0, b + 38, { shadow: [color.black, 0, 1, 1] });
          ctx.font = "14px open_sans_condensedbold";
          CASCADE_MODE && 1e3 > this.w && (ctx.font = "13px open_sans_condensedbold");
          ctx.textAlign = "center";
          ctx.setShadow(color.black, 0, 1, 1);
          for (d = 0; d < allStripsNoVca.length; d++) {
            var a = (20 + (c + 1) * d) | 0,
              f = (20 + c / 2 + (c + 1) * d) | 0,
              e = "" + (allStripsNoVca[d].subId + 1),
              g = c;
            if (24 < inStrips.length && (d < inStrips.length || d >= auxStrips[0].id))
              if (0 == d % 8)
                (f = d + 1),
                d >= auxStrips[0].id && (f -= auxStrips[0].id),
                  (e = "" + f + " - " + (f + 7)),
                  (f = (20 + (c + 1) * (d + 4)) | 0),
                  (g = 9999),
                (d / 8) % 2 && ((ctx.fillStyle = "rgba(255,255,255,0.08)"), ctx.fillRect(a - 1, b, 8 * (c + 1), 20));
              else continue;
            d % 2 && ((ctx.fillStyle = "rgba(255,255,255,0.07)"), ctx.fillRect(a, b, c - 1, 20));
            allStripsNoVca[d].type == E_STRIP_TYPE.LINEIN && (e = 0 == allStripsNoVca[d].subId % 2 ? "L" : "R");
            allStripsNoVca[d].type == E_STRIP_TYPE.MEDIA && (e = 0 == allStripsNoVca[d].subId % 2 ? "L" : "R");
            if (!hideHPAUX || (d != auxStrips[curSetup.aux - 2].id && d != auxStrips[curSetup.aux - 1].id))
              (ctx.fillStyle = "#000"), ctx.fillText(e, f + 1, b + 15 + 1, g), (ctx.fillStyle = "#eee"), ctx.fillText(e, f, b + 15, g);
          }
          a = 12;
          d = (this.mi.hh / 2) | 0;
          b = this.mi.hh;
          ctx.font = "13px open_sans_condensedbold";
          ctx.textBaseline = "middle";
          ctx.fillStyle = color.tvPhantom;
          ctx.fillText("48V", a - 2, d, 17);
          ctx.fillStyle = color.tvInvert;
          d += b;
          drawImage(res.inv_pic, a - 8, d - 7);
          ctx.fillStyle = color.tvMute;
          ctx.fillText("M", a, (d += b), 16);
          ctx.fillStyle = color.tvSolo;
          ctx.fillText("S", a, d + b, 16);
          ctx.fillStyle = "#999";
          ctx.fillText("№", a - 1, this.h - 92, 16);
          ctx.fillText("G", a, this.h - 200 - c / 2, 16);
          ctx.fillText("C", a, this.h - 200 + 20, 16);
          ctx.fillText("O", a, this.h - 200 + 40, 16);
          ctx.fillText("M", a, this.h - 200 + 60, 16);
          ctx.fillText("P", a, this.h - 200 + 80, 16);
          ctx.textAlign = "right";
          ctx.font = "10px open_sans_condensedbold";
          b = [-96, -90, -80, -70, -60, -50, -40, -24, -12, -6, 0];
          f = this.mi.h;
          c = this.h - f - c - 200 - 11;
          for (d = 0; d < b.length; d++) b[d] < -VU_RANGE || ((e = f + 5 + vuPosMark(b[d], c)), ctx.fillText("" + b[d], a + 4, e));
        },
      }),
      METERS_IND = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "METERS_IND";
          this.hh = 30;
          this.rows = 4;
          this.h = this.hh * this.rows;
        },
        calcGeometry: function () {
          this.grd = ctx.createLinearGradient(0, 0, 0, this.h);
          this.grd.addColorStop(0, "rgba(0,0,0,0.00)");
          this.grd.addColorStop(0.12, "rgba(0,0,0,0.4)");
          this.grd.addColorStop(0.25, "rgba(0,0,0,0.00)");
          this.grd.addColorStop(0.251, "rgba(0,0,0,0.00)");
          this.grd.addColorStop(0.37, "rgba(0,0,0,0.4)");
          this.grd.addColorStop(0.5, "rgba(0,0,0,0.00)");
          this.grd.addColorStop(0.501, "rgba(0,0,0,0.00)");
          this.grd.addColorStop(0.62, "rgba(0,0,0,0.4)");
          this.grd.addColorStop(0.75, "rgba(0,0,0,0.00)");
          this.grd.addColorStop(0.751, "rgba(0,0,0,0.00)");
          this.grd.addColorStop(0.87, "rgba(0,0,0,0.4)");
          this.grd.addColorStop(1, "rgba(0,0,0,0.00)");
        },
        paint: function () {
          var a = this.w,
            b = this.h,
            c = (a / allStripsNoVca.length - 1) | 0;
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, 0, a, b);
          ctx.fillStyle = "rgba(255,255,255,0.02)";
          ctx.fillRect(0, 1 * this.hh, (c + 1) * inStrips.length - 1, this.hh);
          var d = getValue("mgmask"),
            a = checkBit(d, MUTEALL_BIT_IDX),
            d = checkBit(d, MUTEFX_BIT_IDX);
          ctx.font = "12px open_sans_condensedbold";
          24 < inStrips.length && (ctx.font = "9px open_sans_condensedbold");
          ctx.textAlign = "center";
          ctx.textBaseline = "middle";
          for (var f = 0, e = allStripsNoVca.length; f < e; f++) {
            var g = (c + 1) * f,
              h = allStripsNoVca[f],
              k = hideHPAUX && (f == auxStrips[curSetup.aux - 2].id || f == auxStrips[curSetup.aux - 1].id);
            ctx.globalAlpha = f % 2 ? 0.09 : 0.07;
            k && (ctx.globalAlpha = 0.04);
            ctx.fillStyle = allStripsNoVca[f].color;
            h.type == E_STRIP_TYPE.IN ? ctx.fillRect(g, 0, c, b) : ctx.fillRect(g, b / 2, c, b / 2);
            ctx.globalAlpha = 1;
            var m = h.getNameValue("solo"),
              p = h.getNameValue("mute"),
              q = h.getNameValue("forceunmute"),
              r = h.getMuteState(!0, !0);
            ctx.strokeStyle = "rgba(0,0,0,0.3)";
            if (p || r)
              (ctx.fillStyle = q ? color.tvMuteUn : r && !p ? color.tvMuteMG : color.tvMute),
              k && (ctx.fillStyle = color.tvGray),
                ctx.roundRect(g, 2 * this.hh, c - 1, this.hh - 1, 4),
                ctx.fill(),
                (ctx.fillStyle = this.grd),
                ctx.fill(),
                (ctx.fillStyle = "#eee"),
                ctx.fillText(q ? "-M" : p ? "M" : a ? "MA" : h.type == E_STRIP_TYPE.FX && d ? "MF" : r ? "MG" : "M", (g + c / 2) | 0, (2 * this.hh + this.hh / 2) | 0, c);
            m && ((ctx.fillStyle = color.tvSolo), k && (ctx.fillStyle = color.tvGray), ctx.roundRect(g, 3 * this.hh, c - 1, this.hh - 1, 4), ctx.fill(), (ctx.fillStyle = this.grd), ctx.fill());
            h.type == E_STRIP_TYPE.IN &&
            ((m = h.getNameValue("invert")),
              (p = !1),
              HAVE_ROUTING ? ((q = h.getNameValue("src")), q.startsWith("hw.") && (p = getValue(q + ".phantom"))) : (p = h.getNameValue("phantom")),
            p && ((ctx.fillStyle = color.tvPhantom), k && (ctx.fillStyle = color.tvGray), ctx.roundRect(g, 0 * this.hh, c - 1, this.hh - 1, 4), ctx.fill(), (ctx.fillStyle = this.grd), ctx.fill()),
            m && ((ctx.fillStyle = color.tvInvert), k && (ctx.fillStyle = color.tvGray), ctx.roundRect(g, 1 * this.hh, c - 1, this.hh - 1, 4), ctx.fill(), (ctx.fillStyle = this.grd), ctx.fill()));
            ctx.fillStyle = "#111";
            h.type == E_STRIP_TYPE.IN ? ctx.fillRect(g + c - 1, 0, 1, b) : ctx.fillRect(g + c - 1, b / 2, 1, b / 2);
          }
          ctx.fillStyle = "#111";
          ctx.fillRect(0, 1 * this.hh - 1, (c + 1) * inStrips.length, 1);
          ctx.fillRect(0, 2 * this.hh - 1, (c + 1) * allStripsNoVca.length, 1);
          ctx.fillRect(0, 3 * this.hh - 1, (c + 1) * allStripsNoVca.length, 1);
          ctx.fillRect(0, 4 * this.hh - 1, (c + 1) * allStripsNoVca.length, 1);
        },
      }),
      METERS = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "METERS";
          this.w = 500;
          this.grh = this.h = 100;
          this.v = [];
          this.v2 = [];
          this.vfall = [];
          this.vg = [];
          this.vg2 = [];
          this.vgfall = [];
          this.comp = [];
          this.clip = [];
          this.clipReleasing = [];
          this.gate = [];
          this.timers = [];
          this.ptimers = [];
          this.peak = [];
          this.peakfall = [];
          this.ltt = 0;
          for (var c = allStripsNoVca, d = 0; d < c.length; d++)
            this.v.push(0),
              this.v2.push(0),
              this.vfall.push(0),
              this.vg.push(0),
              this.vg2.push(0),
              this.vgfall.push(0),
              this.peak.push(0),
              this.peakfall.push(0),
              this.comp.push(0),
              this.gate.push(!0),
              this.clip.push(!1),
              this.clipReleasing.push(!1),
              this.timers.push(null),
            c[d].stereo &&
            (this.v.push(0),
              this.v2.push(0),
              this.vfall.push(0),
              this.vg.push(0),
              this.vg2.push(0),
              this.vgfall.push(0),
              this.peak.push(0),
              this.peakfall.push(0),
              this.comp.push(0),
              this.gate.push(!0),
              this.clip.push(!1),
              this.clipReleasing.push(!1),
              this.timers.push(null));
          regTick(this);
        },
        setValue: function (a, b, c, d, f, e, g) {
          bmMeters && bmMeters.m.setValue(a, b, c, d, f, e, g);
          var h = this;
          this.comp[d] = bound(b / COMP_SCALE, 0, 1);
          this.gate[d] = c;
          this.v2[d] = bound(a, 0, 4);
          1 <= a
            ? ((this.clip[d] = !0), (this.clipReleasing[d] = !1))
            : this.clip[d] &&
            !this.clipReleasing[d] &&
            ((this.clipReleasing[d] = !0),
              clearTimeoutC(this.timers[d]),
              (this.timers[d] = setTimeout(function () {
                h.clip[d] = !1;
              }, CLIP_HOLD_TIME)));
          this.v[d] < this.v2[d] ? (this.v[d] = this.v2[d]) : (this.vfall[d] = GLOBAL_VU_FALL_SPEED);
          this.peak[d] <= this.v2[d]
            ? ((this.peak[d] = this.v2[d]), (this.peakfall[d] = 0), this.ptimers[d] && (clearTimeout(this.ptimers[d]), (this.ptimers[d] = null)))
            : null == this.ptimers[d] &&
            (this.ptimers[d] = setTimeout(function () {
              h.peakfall[d] = GLOBAL_PEAK_FALL_SPEED;
              h.ptimers[d] = null;
            }, PEAK_HOLD_TIME));
          if (isDefined(f) && d >= fxStrips[0].id && d < auxStrips[0].id) {
            var k = d - fxStrips[0].id + allStripsNoVca.length;
            this.comp[k] = bound(e / COMP_SCALE, 0, 1);
            this.gate[k] = g;
            this.v2[k] = bound(f, 0, 4);
            1 <= a
              ? ((this.clip[k] = !0), (this.clipReleasing[k] = !1))
              : this.clip[k] &&
              !this.clipReleasing[k] &&
              ((this.clipReleasing[k] = !0),
                clearTimeoutC(this.timers[k]),
                (this.timers[k] = setTimeout(function () {
                  h.clip[k] = !1;
                }, CLIP_HOLD_TIME)));
            this.v[k] < this.v2[k] ? (this.v[k] = this.v2[k]) : (this.vfall[k] = GLOBAL_VU_FALL_SPEED);
            this.peak[k] <= this.v2[k]
              ? ((this.peak[k] = this.v2[k]), (this.peakfall[k] = 0), this.ptimers[k] && (clearTimeoutC(this.ptimers[k]), (this.ptimers[k] = null)))
              : null == this.ptimers[k] &&
              (this.ptimers[k] = setTimeout(function () {
                h.peakfall[k] = GLOBAL_PEAK_FALL_SPEED;
                h.ptimers[k] = null;
              }, PEAK_HOLD_TIME));
          }
        },
        tick: function (a) {
          for (var b = 0; b < this.v.length; b++)
            this.v[b] <= this.v2[b] ? (this.v[b] = this.v2[b]) : ((this.v[b] -= this.vfall[b] * a), (this.vfall[b] += 0.04 * GLOBAL_VU_FALL_SPEED * a), this.v[b] < this.v2[b] && (this.v[b] = this.v2[b])),
              this.peak[b] <= this.v2[b]
                ? (this.peak[b] = this.v2[b])
                : 0 < this.peak[b] && 0 < this.peakfall[b] && ((this.peak[b] -= this.peakfall[b] * a), (this.peakfall[b] += GLOBAL_PEAK_FALL_ACC * a), this.peak[b] < this.v2[b] && (this.peak[b] = this.v2[b]));
          regTick(this);
          this.globalEnabled() && regUpdate(this);
        },
        onDown: function (a, b) {
          var c = a - this.globalX(),
            c = bound((c / ((this.w / allStripsNoVca.length) | 0)) | 0, 0, allStripsNoVca.length - 1);
          setSelected(c);
          null != inView && (mixerWidget.showAll(), slideOutWidget.clearGotoButtons());
          setMode(E_MODE.MIX);
          bottomWidget.gotoIDmid(c);
        },
        calcGeometry: function () {
          this.grd = ctx.createLinearGradient(0, this.h - ((this.w / allStripsNoVca.length - 1) | 0) - 100, 0, 0);
          this.grd.addColorStop(0, "#0C630A");
          this.grd.addColorStop(0.7, "#BDBC0A");
          this.grd.addColorStop(1, "#d0130A");
          this.grd2 = ctx.createLinearGradient(0, this.h - 100, 0, this.h);
          this.grd2.addColorStop(0, "#711");
          this.grd2.addColorStop(1, "#e11");
          this.grd3 = ctx.createLinearGradient(0, 0, 0, this.h);
          this.grd3.addColorStop(0, "rgba(255,255,255,0.0)");
          this.grd3.addColorStop(1, "rgba(255,255,255,1)");
          this.clipColor = "#d22222";
        },
        paint: function () {
          var a = this.w,
            b = this.h,
            c = allStripsNoVca.length,
            d = (a / c - 1) | 0;
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, 0, a, b);
          ctx.strokeStyle = "rgba(0,0,0,0.1)";
          ctx.lineWidth = 1;
          a = b - d - this.grh;
          ctx.strokeStyle = "rgba(0,0,0,0.9)";
          ctx.lineWidth = 2;
          for (var f = 0; f < c; f++) {
            var e = (d + 1) * f,
              g = hideHPAUX && (f == auxStrips[curSetup.aux - 2].id || f == auxStrips[curSetup.aux - 1].id);
            ctx.globalAlpha = f % 2 ? 0.11 : 0.09;
            g && (ctx.globalAlpha = 0.05);
            ctx.fillStyle = allStripsNoVca[f].color;
            ctx.fillRect(e, 0, d, b);
            ctx.globalAlpha = 1;
            if (allStripsNoVca[f].stereo) {
              0.001 < this.peak[f] && ((ctx.fillStyle = this.grd), ctx.fillRect(e, (b - this.grh - d - bound((this.peak[f] * a) | 0, 1, a)) | 0, d / 2, 1));
              if (0.001 < this.v[f]) {
                ctx.fillStyle = this.clip[f] ? this.clipColor : this.grd;
                var h = bound(this.v[f], 0, 1),
                  k = b - this.grh - d,
                  h = -(h * a) | 0;
                ctx.fillRect(e, k, d / 2, h);
                ctx.fillStyle = "rgba(255,255,255,0.07)";
                ctx.fillRect(e, k, 1, h);
                ctx.fillStyle = "rgba(0,0,0,0.07)";
                ctx.fillRect(e + d / 2, k, -1, h);
              }
              this.clip[f] && ((ctx.fillStyle = "#a11"), ctx.fillRect(e, 0, d / 2, 4), (ctx.fillStyle = "#f11"), ctx.fillRect(e + 1, 1, d / 2 - 2, 2));
              0.001 < this.comp[f] &&
              ((ctx.fillStyle = this.grd2),
                (k = this.h - this.grh),
                (h = (this.comp[f] * (this.grh - 1)) | 0),
                ctx.fillRect(e, k, d / 2, h),
                (ctx.fillStyle = "rgba(255,255,255,0.04)"),
                ctx.fillRect(e, k, 1, h),
                (ctx.fillStyle = "rgba(0,0,0,0.08)"),
                ctx.fillRect(e + d / 2, k, -1, h));
              this.gate[f] ||
              ((ctx.fillStyle = "#b11"),
              g && (ctx.fillStyle = color.tvGray),
                ctx.fillRect(e, this.h - this.grh - d, d / 2, d),
                (k = 2),
                ctx.beginPath(),
                ctx.moveTo(e + k - 1, (this.h - this.grh - d / 2) | 0),
                ctx.lineTo(e + d / 2 - k, (this.h - this.grh - d / 2) | 0),
                ctx.stroke());
              var m = f - fxStrips[0].id + c;
              0.001 < this.peak[m] && ((ctx.fillStyle = this.grd), ctx.fillRect(e + d / 2, (b - this.grh - d - bound((this.peak[m] * a) | 0, 1, a)) | 0, d / 2, 1));
              0.001 < this.v[m] &&
              ((ctx.fillStyle = this.clip[m] ? this.clipColor : this.grd),
                (h = bound(this.v[m], 0, 1)),
                (k = b - this.grh - d),
                (h = -(h * a) | 0),
                ctx.fillRect(e + d / 2, k, d / 2, h),
                (ctx.fillStyle = "rgba(255,255,255,0.07)"),
                ctx.fillRect(e + d / 2, k, 1, h),
                (ctx.fillStyle = "rgba(0,0,0,0.07)"),
                ctx.fillRect(e + d - 1, k, -1, h));
              this.clip[m] && ((ctx.fillStyle = "#a11"), ctx.fillRect(e + d / 2, 0, d / 2, 4), (ctx.fillStyle = "#f11"), ctx.fillRect(e + d / 2 + 1, 1, d / 2 - 3, 2));
              0.001 < this.comp[m] &&
              ((ctx.fillStyle = this.grd2),
                (k = this.h - this.grh),
                (h = (this.comp[m] * (this.grh - 1)) | 0),
                ctx.fillRect(e + d / 2, k, d / 2, h),
                (ctx.fillStyle = "rgba(255,255,255,0.04)"),
                ctx.fillRect(e + d / 2, k, 1, h),
                (ctx.fillStyle = "rgba(0,0,0,0.08)"),
                ctx.fillRect(e + d - 1, k, -1, h));
              this.gate[m] ||
              ((ctx.fillStyle = "#b11"),
              g && (ctx.fillStyle = color.tvGray),
                ctx.fillRect(e + d / 2, this.h - this.grh - d, d / 2, d),
                (k = 2),
                ctx.beginPath(),
                ctx.moveTo(e + d / 2 + k - 1, (this.h - this.grh - d / 2) | 0),
                ctx.lineTo(e + d - k, (this.h - this.grh - d / 2) | 0),
                ctx.stroke());
            } else
              0.001 < this.peak[f] && ((ctx.fillStyle = this.grd), g && (ctx.fillStyle = color.tvGray), ctx.fillRect(e, (b - this.grh - d - bound((this.peak[f] * a) | 0, 1, a)) | 0, d, 1)),
              0.001 < this.v[f] &&
              ((ctx.fillStyle = this.clip[f] ? this.clipColor : this.grd),
              g && (ctx.fillStyle = color.tvGray),
                (h = bound(this.v[f], 0, 1)),
                (k = b - this.grh - d),
                (h = -(h * a) | 0),
                ctx.fillRect(e, k, d, h),
                (ctx.fillStyle = "rgba(255,255,255,0.08)"),
                ctx.fillRect(e, k, 1, h),
                (ctx.fillStyle = "rgba(0,0,0,0.08)"),
                ctx.fillRect(e + d - 1, k, -1, h)),
              this.clip[f] && ((ctx.fillStyle = "#a11"), g && (ctx.fillStyle = color.tvGray), ctx.fillRect(e, 0, d, 4), (ctx.fillStyle = "#f11"), g && (ctx.fillStyle = color.tvGray), ctx.fillRect(e + 1, 1, d - 3, 2)),
              0.001 < this.comp[f] &&
              ((ctx.fillStyle = this.grd2),
              g && (ctx.fillStyle = color.tvGray),
                (k = this.h - this.grh),
                (h = (this.comp[f] * (this.grh - 1)) | 0),
                ctx.fillRect(e, k, d, h),
                (ctx.fillStyle = "rgba(255,255,255,0.04)"),
                ctx.fillRect(e, k, 1, h),
                (ctx.fillStyle = "rgba(0,0,0,0.08)"),
                ctx.fillRect(e + d, k, -1, h)),
              this.gate[f] ||
              ((ctx.fillStyle = "#b11"),
              g && (ctx.fillStyle = color.tvGray),
                ctx.fillRect(e, this.h - this.grh - d, d, d),
                (k = 2),
                ctx.beginPath(),
                ctx.moveTo(e + k - 1, (this.h - this.grh - d / 2) | 0),
                ctx.lineTo(e + d - k, (this.h - this.grh - d / 2) | 0),
                ctx.stroke());
            ctx.fillStyle = "#111";
            ctx.fillRect(e + d - 1, 0, 1, b);
          }
          ctx.fillRect(0, this.h - this.grh - d, (d + 1) * c, 1);
          ctx.fillRect(0, this.h - this.grh, (d + 1) * c, 1);
          ctx.globalAlpha = 1;
        },
      }),
      METERS2 = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "METERS";
          this.w = 500;
          this.grh = this.h = 100;
          this.v = [];
          this.v2 = [];
          this.vfall = [];
          this.vg = [];
          this.vg2 = [];
          this.vgfall = [];
          this.comp = [];
          this.clip = [];
          this.clipReleasing = [];
          this.gate = [];
          this.timers = [];
          this.ptimers = [];
          this.peak = [];
          this.peakfall = [];
          this.ltt = 0;
          for (var c = allStripsNoVca, d = 0; d < c.length; d++)
            this.v.push(0),
              this.v2.push(0),
              this.vfall.push(0),
              this.vg.push(0),
              this.vg2.push(0),
              this.vgfall.push(0),
              this.peak.push(0),
              this.peakfall.push(0),
              this.comp.push(0),
              this.gate.push(!0),
              this.clip.push(!1),
              this.clipReleasing.push(!1),
              this.timers.push(null),
            c[d].stereo &&
            (this.v.push(0),
              this.v2.push(0),
              this.vfall.push(0),
              this.vg.push(0),
              this.vg2.push(0),
              this.vgfall.push(0),
              this.peak.push(0),
              this.peakfall.push(0),
              this.comp.push(0),
              this.gate.push(!0),
              this.clip.push(!1),
              this.clipReleasing.push(!1),
              this.timers.push(null));
          regTick(this);
        },
        setValue: function (a, b, c, d, f, e, g) {
          var h = this;
          this.comp[d] = bound(b / COMP_SCALE, 0, 1);
          this.gate[d] = c;
          this.v2[d] = bound(a, 0, 4);
          1 <= a
            ? ((this.clip[d] = !0), (this.clipReleasing[d] = !1))
            : this.clip[d] &&
            !this.clipReleasing[d] &&
            ((this.clipReleasing[d] = !0),
              clearTimeoutC(this.timers[d]),
              (this.timers[d] = setTimeout(function () {
                h.clip[d] = !1;
              }, CLIP_HOLD_TIME)));
          this.v[d] < this.v2[d] ? (this.v[d] = this.v2[d]) : (this.vfall[d] = GLOBAL_VU_FALL_SPEED);
          this.peak[d] <= this.v2[d]
            ? ((this.peak[d] = this.v2[d]), (this.peakfall[d] = 0), this.ptimers[d] && (clearTimeout(this.ptimers[d]), (this.ptimers[d] = null)))
            : null == this.ptimers[d] &&
            (this.ptimers[d] = setTimeout(function () {
              h.peakfall[d] = GLOBAL_PEAK_FALL_SPEED;
              h.ptimers[d] = null;
            }, PEAK_HOLD_TIME));
          if (isDefined(f) && d >= fxStrips[0].id && d < auxStrips[0].id) {
            var k = d - fxStrips[0].id + allStripsNoVca.length;
            this.comp[k] = bound(e / COMP_SCALE, 0, 1);
            this.gate[k] = g;
            this.v2[k] = bound(f, 0, 4);
            1 <= a
              ? ((this.clip[k] = !0), (this.clipReleasing[k] = !1))
              : this.clip[k] &&
              !this.clipReleasing[k] &&
              ((this.clipReleasing[k] = !0),
                clearTimeoutC(this.timers[k]),
                (this.timers[k] = setTimeout(function () {
                  h.clip[k] = !1;
                }, CLIP_HOLD_TIME)));
            this.v[k] < this.v2[k] ? (this.v[k] = this.v2[k]) : (this.vfall[k] = GLOBAL_VU_FALL_SPEED);
            this.peak[k] <= this.v2[k]
              ? ((this.peak[k] = this.v2[k]), (this.peakfall[k] = 0), this.ptimers[k] && (clearTimeoutC(this.ptimers[k]), (this.ptimers[k] = null)))
              : null == this.ptimers[k] &&
              (this.ptimers[k] = setTimeout(function () {
                h.peakfall[k] = GLOBAL_PEAK_FALL_SPEED;
                h.ptimers[k] = null;
              }, PEAK_HOLD_TIME));
          }
        },
        tick: function (a) {
          for (var b = 0; b < this.v.length; b++)
            this.v[b] <= this.v2[b] ? (this.v[b] = this.v2[b]) : ((this.v[b] -= this.vfall[b] * a), (this.vfall[b] += 0.04 * GLOBAL_VU_FALL_SPEED * a), this.v[b] < this.v2[b] && (this.v[b] = this.v2[b])),
              this.peak[b] <= this.v2[b]
                ? (this.peak[b] = this.v2[b])
                : 0 < this.peak[b] && 0 < this.peakfall[b] && ((this.peak[b] -= this.peakfall[b] * a), (this.peakfall[b] += GLOBAL_PEAK_FALL_ACC * a), this.peak[b] < this.v2[b] && (this.peak[b] = this.v2[b]));
          regTick(this);
          this.globalEnabled() && regUpdate(this);
        },
        onDown: function (a, b) {
          var c = a - this.globalX(),
            c = bound((c / ((this.w / allStripsNoVca.length) | 0)) | 0, 0, allStripsNoVca.length - 1);
          setSelected(c);
          null != inView && (mixerWidget.showAll(), slideOutWidget.clearGotoButtons());
          setMode(E_MODE.MIX);
          bottomWidget.gotoIDmid(c);
        },
        calcGeometry: function () {
          this.grd = ctx.createLinearGradient(0, this.h, 0, 0);
          this.grd.addColorStop(0, "#0C630A");
          this.grd.addColorStop(0.7, "#BDBC0A");
          this.grd.addColorStop(1, "#d0130A");
          this.grd3 = ctx.createLinearGradient(0, 0, 0, this.h);
          this.grd3.addColorStop(0, "rgba(255,255,255,0.0)");
          this.grd3.addColorStop(1, "rgba(255,255,255,1)");
          this.clipColor = "#d22222";
        },
        paint: function () {
          var a = this.w,
            b = this.h,
            c = allStripsNoVca.length,
            d = (a / c - 1) | 0;
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, 0, a, b);
          ctx.strokeStyle = "rgba(0,0,0,0.1)";
          ctx.lineWidth = 1;
          ctx.strokeStyle = "rgba(0,0,0,0.9)";
          ctx.lineWidth = 2;
          for (a = 0; a < c; a++) {
            var f = (d + 1) * a,
              e = hideHPAUX && (a == auxStrips[curSetup.aux - 2].id || a == auxStrips[curSetup.aux - 1].id);
            ctx.globalAlpha = a % 2 ? 0.11 : 0.09;
            e && (ctx.globalAlpha = 0.05);
            ctx.fillStyle = allStripsNoVca[a].color;
            ctx.fillRect(f, 0, d, b);
            ctx.globalAlpha = 1;
            if (allStripsNoVca[a].stereo) {
              0.001 < this.peak[a] && ((ctx.fillStyle = this.grd), ctx.fillRect(f, (b - bound((this.peak[a] * b) | 0, 1, b)) | 0, d / 2, 1));
              if (0.001 < this.v[a]) {
                ctx.fillStyle = this.clip[a] ? this.clipColor : this.grd;
                var g = bound(this.v[a], 0, 1),
                  h = b,
                  g = -(g * b) | 0;
                ctx.fillRect(f, h, d / 2, g);
                ctx.fillStyle = "rgba(255,255,255,0.07)";
                ctx.fillRect(f, h, 1, g);
                ctx.fillStyle = "rgba(0,0,0,0.07)";
                ctx.fillRect(f + d / 2, h, -1, g);
              }
              this.clip[a] && ((ctx.fillStyle = "#a11"), ctx.fillRect(f, 0, d / 2, 4), (ctx.fillStyle = "#f11"), ctx.fillRect(f + 1, 1, d / 2 - 2, 2));
              e = a - fxStrips[0].id + c;
              0.001 < this.peak[e] && ((ctx.fillStyle = this.grd), ctx.fillRect(f + d / 2, (b - bound((this.peak[e] * b) | 0, 1, b)) | 0, d / 2, 1));
              0.001 < this.v[e] &&
              ((ctx.fillStyle = this.clip[e] ? this.clipColor : this.grd),
                (g = bound(this.v[e], 0, 1)),
                (h = b),
                (g = -(g * b) | 0),
                ctx.fillRect(f + d / 2, h, d / 2, g),
                (ctx.fillStyle = "rgba(255,255,255,0.07)"),
                ctx.fillRect(f + d / 2, h, 1, g),
                (ctx.fillStyle = "rgba(0,0,0,0.07)"),
                ctx.fillRect(f + d - 1, h, -1, g));
              this.clip[e] && ((ctx.fillStyle = "#a11"), ctx.fillRect(f + d / 2, 0, d / 2, 4), (ctx.fillStyle = "#f11"), ctx.fillRect(f + d / 2 + 1, 1, d / 2 - 3, 2));
            } else
              0.001 < this.peak[a] && ((ctx.fillStyle = this.grd), e && (ctx.fillStyle = color.tvGray), ctx.fillRect(f, (b - bound((this.peak[a] * b) | 0, 1, b)) | 0, d, 1)),
              0.001 < this.v[a] &&
              ((ctx.fillStyle = this.clip[a] ? this.clipColor : this.grd),
              e && (ctx.fillStyle = color.tvGray),
                (g = bound(this.v[a], 0, 1)),
                (h = b),
                (g = -(g * b) | 0),
                ctx.fillRect(f, h, d, g),
                (ctx.fillStyle = "rgba(255,255,255,0.08)"),
                ctx.fillRect(f, h, 1, g),
                (ctx.fillStyle = "rgba(0,0,0,0.08)"),
                ctx.fillRect(f + d - 1, h, -1, g)),
              this.clip[a] && ((ctx.fillStyle = "#a11"), e && (ctx.fillStyle = color.tvGray), ctx.fillRect(f, 0, d, 4), (ctx.fillStyle = "#f11"), e && (ctx.fillStyle = color.tvGray), ctx.fillRect(f + 1, 1, d - 3, 2));
            ctx.fillStyle = "#111";
            ctx.fillRect(f + d - 1, 0, 1, b);
          }
          ctx.globalAlpha = 1;
        },
      }),
      SButton = Class.create(Button, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "SButton";
          this.w = 90;
          this.h = 30;
          this.text = "TEXT";
          this.color = color.white;
          this.longClickMark = !1;
          this.font = "12pt open_sans_condensedbold";
          this.textColor = color.tabText;
          this.borderColor = color.tabStroke;
          this.grd = null;
          this.mline = !1;
          this.mdy = 18;
          this.bgColor = color.eqBg;
          this.longClickMarkColor = color.longClickMark;
          this.longClickMarkColor2 = color.longClickMark2;
        },
        calcGeometry: function () {
          this.grd = ctx.createLinearGradient(0, 0, 0, this.h);
          this.grd.addColorStop(0, "rgba(255,255,255,0)");
          this.grd.addColorStop(0.5, "rgba(255,255,255,0.1)");
          this.grd.addColorStop(1, "rgba(255,255,255,0)");
        },
        paint: function () {
          this.getState();
          ctx.fillStyle = this.bgColor;
          ctx.fillRect(0, 0, this.w, this.h);
          this.disabled && (ctx.globalAlpha = 0.3);
          if (this.pressed)
            (ctx.globalAlpha = 0.5),
              (ctx.fillStyle = this.color),
              ctx.fillRect(0, 0, this.w, this.h),
              (ctx.globalAlpha = 1),
              (ctx.font = this.font),
              (ctx.fillStyle = color.tabTextSel),
              (ctx.textAlign = "center"),
              (ctx.textBaseline = "middle"),
              ctx.setShadow(color.shadow, 3, 1, 1),
              (a = this.h / 2),
            this.mline && (a -= (this.mdy * (this.text.split("<br>").length - 1)) / 2),
              drawText(this.text, (this.w / 2) | 0, a | 0, { max: this.w - 2, dy: this.mdy }),
              ctx.setShadow(null),
              (ctx.lineWidth = 1),
              (ctx.strokeStyle = this.color);
          else {
            ctx.fillStyle = "rgba(255,255,255,0.1)";
            ctx.fillRect(1, this.h, this.w - 2, -10);
            ctx.font = this.font;
            ctx.fillStyle = this.textColor;
            ctx.textAlign = "center";
            ctx.textBaseline = "middle";
            ctx.setShadow(color.black, 3, 2, 2);
            var a = this.h / 2;
            this.mline && (a -= (this.mdy * (this.text.split("<br>").length - 1)) / 2);
            drawText(this.text, (this.w / 2) | 0, a | 0, { max: this.w - 2, dy: this.mdy });
            ctx.setShadow(null);
            ctx.lineWidth = 1;
            ctx.strokeStyle = this.borderColor;
          }
          ctx.strokeRect(0.5, 0.5, this.w - 1, this.h - 1);
          this.longClickMark &&
          ((a = 4), this.pressed && (a += 1), (ctx.fillStyle = this.longClickMarkColor2), ctx.fillCircle(this.w - 6, a + 1, 3), (ctx.fillStyle = this.longClickMarkColor), ctx.fillCircle(this.w - 6, a + 1, 2));
          this.disabled && (ctx.globalAlpha = 1);
        },
      }),
      SCheckBox = Class.create(CheckBox, {
        initialize: function ($super, b) {
          $super(b);
          this.name = "SCheckBox";
          this.w = 70;
          this.h = 30;
          this.textColor = color.tabText;
          this.textColor2 = color.tabTextSel;
          this.color = color.white;
          this.text = "TEXT";
          this.font = font.tabText;
          this.longClickMark = !1;
          this.grd = null;
          this.mline = !1;
          this.mdy = 20;
          this.bgColor = color.eqBg;
        },
        calcGeometry: function () {
          this.grd = ctx.createLinearGradient(0, 0, 0, this.h);
          this.grd.addColorStop(0, "rgba(255,255,255,0)");
          this.grd.addColorStop(0.5, "rgba(255,255,255,0.1)");
          this.grd.addColorStop(1, "rgba(255,255,255,0)");
        },
        paint: function () {
          null != this.key && (this.state = this.getVal());
          this.getState();
          this.disabled && (ctx.globalAlpha = 0.3);
          ctx.fillStyle = this.bgColor;
          ctx.fillRect(0, 0, this.w, this.h);
          switch (this.state) {
            case 0:
            case !1:
              ctx.fillStyle = "rgba(255,255,255,0.1)";
              ctx.fillRect(1, this.h, this.w - 2, -10);
              ctx.lineWidth = 1;
              ctx.strokeStyle = color.tabStroke;
              ctx.strokeRect(0.5, 0.5, this.w - 1, this.h - 1);
              ctx.font = this.font;
              ctx.fillStyle = this.textColor;
              var a = this.h / 2;
              ctx.drawText(this.text, (this.w / 2) | 0, a | 0, { max: this.w - 2, shadow: ["#000", 0, 1, 1], align: "center", valign: "middle", dy: this.mdy }, "<br>");
              ctx.shadowColor = "transparent";
              break;
            case 1:
            case !0:
              ctx.globalAlpha = this.disabled ? 0.15 : 0.5;
              ctx.fillStyle = this.color;
              ctx.fillRect(0, 0, this.w, this.h);
              ctx.globalAlpha = this.disabled ? 0.3 : 1;
              ctx.lineWidth = 1;
              ctx.strokeStyle = this.color;
              ctx.strokeRect(0.5, 0.5, this.w - 1, this.h - 1);
              ctx.font = this.font;
              ctx.fillStyle = this.textColor2;
              a = this.h / 2;
              ctx.drawText(this.text, (this.w / 2) | 0, a | 0, { max: this.w - 2, shadow: ["#000", 0, 1, 1], align: "center", valign: "middle", dy: this.mdy }, "<br>");
              ctx.shadowColor = "transparent";
              break;
            default:
              (ctx.fillStyle = "#0ff"), ctx.fillRect(0, 0, this.w, this.h);
          }
          this.longClickMark &&
          ((ctx.strokeStyle = "rgba(255,255,255,0.2)"), (ctx.lineWidth = 1), ctx.beginPath(), ctx.moveTo(this.w - 11, 2), ctx.lineTo(this.w - 2, 11), ctx.moveTo(this.w - 8, 2), ctx.lineTo(this.w - 2, 8), ctx.stroke());
          this.disabled && (ctx.globalAlpha = 1);
        },
      }),
      PONG = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "SETTINGS";
          this.y = measures.topWidgetHeight;
          this.needMoveEvt = this.needClip = !0;
          this.pw = 10;
          this.ph = 0.15;
          this.by = this.bx = this.p2 = this.p1 = 0.5;
          this.ba = this.bsy = this.bsx = 0;
          this.br = 7;
          this.s2 = this.s1 = 0;
          this.started = this.play = !1;
          this.speed = 0.01;
          this.yourTime = this.timeStart = 0;
          this.newRecord = !1;
          this.zza = this.zzz = this.ltt = 0;
        },
        onShow: function () {
          this.play = !0;
        },
        onHide: function () {
          this.play = !1;
        },
        onDown: function (a, b, c) {
          this.started || this.randomBallStart();
          this.onMove(a, b, c);
        },
        onMove: function (a, b, c) {
          this.globalX();
          a = b - this.globalY();
          this.p2 = this.p1 = a = bound(a / this.h, 0, 1);
        },
        ballStop: function () {
          this.by = this.bx = 0.5;
          this.bsy = this.bsx = 0;
          this.started = !1;
        },
        randomBallStart: function () {
          this.by = this.bx = 0.5;
          this.speed = 0.01;
          this.timeStart = Date.now();
          this.ph = 0.15;
          this.bsx = 0.5 > Math.random() ? -this.speed : this.speed;
          this.bsy = (2 * Math.random() - 1) * this.speed;
          this.started = !0;
          this.newRecord = !1;
        },
        gameEnd: function () {
          this.play = !1;
          var a = Date.now() - this.timeStart;
          this.yourTime = a = precision(a / 1e3, 3);
          var b = getValue("var.pongtime") || 0;
          a > b && (setValue("var.pongtime", a), (this.newRecord = !0));
        },
        tick: function (a) {
          this.bx += this.bsx * a;
          this.by += this.bsy * a;
          this.bx = bound(this.bx, -1, this.w + 1);
          this.by = bound(this.by, -1, this.h + 1);
          this.speed += 1e-4 * a;
          this.ph -= 1e-5;
          0 > this.bx &&
          (this.by <= this.ph + this.p1 * (1 - this.ph) && this.by >= this.p1 * (1 - this.ph)
            ? 0 > this.bsx && ((this.bsx *= -1), (this.bsy = 0.01 * (2 * Math.random() - 1)))
            : (this.s2++, this.ballStop(), this.gameEnd()));
          1 < this.bx &&
          (this.by <= this.ph + this.p2 * (1 - this.ph) && this.by >= this.p2 * (1 - this.ph)
            ? 0 < this.bsx && ((this.bsx *= -1), (this.bsy = 0.01 * (2 * Math.random() - 1)))
            : (this.s1++, this.ballStop(), this.gameEnd()));
          if ((0 > this.by && 0 > this.bsy) || (1 < this.by && 0 < this.bsy)) this.bsy *= -1;
          regUpdate(this);
        },
        calcGeometry: function () {
          this.w = screenWidth - measures.mixerRightMargin;
          this.h = screenHeight - this.y;
        },
        paint: function () {
          var a = this.w,
            b = this.h,
            c = b * this.ph;
          this.play ? ((ctx.fillStyle = "hsl(" + (this.zzz % 360) + "," + this.zza + "%," + this.zza + "%)"), (this.zza += 0.02)) : (ctx.fillStyle = "#000");
          ctx.fillRect(0, 0, a, b);
          var d = b - c,
            f = a - 2 * this.pw - 2 * this.br;
          ctx.fillStyle = "#fff";
          ctx.fillRect(0, this.p1 * d, this.pw, c, 10);
          ctx.fillRect(a - this.pw, this.p2 * d, this.pw, c, 10);
          a = this.pw + this.br + this.bx * f;
          b = this.br + this.by * (b - this.br);
          ctx.fillStyle = "hsl(" + (this.zzz + 100) + ",60%,60%)";
          ctx.fillCircle(a, b, this.br);
          ctx.font = "26pt open_sans_condensedbold";
          ctx.textAlign = "center";
          ctx.fillStyle = "rgba(255,255,255,0.7)";
          this.started
            ? ((b = Date.now() - this.timeStart), (b = precision(b / 1e3, 1)), (ctx.fillStyle = "rgba(255,255,255,1)"), (ctx.textAlign = "left"), drawText(b + "s", this.w - 100, this.h - 20))
            : (drawText("TOUCH TO START THE CHALLENGE", this.w / 2, 50),
              (ctx.fillStyle = "rgba(255,255,255,1)"),
            0 < this.yourTime && drawText("YOUR TIME: " + this.yourTime + "s", this.w / 2, 92),
              (b = getValue("var.pongtime") || 0),
              drawText("BEST TIME: " + b + "s", this.w / 2, this.h - 90),
              (ctx.fillStyle = "rgba(255,0,0,0.6)"),
            this.newRecord && drawText("NEW RECORD!", this.w / 2, 134));
          this.zzz++;
          regTick(this);
        },
      }),
      SUBPAGE = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "SETTINGS";
          this.x = 0;
          this.y = measures.topWidgetHeight;
          this.bgColor = color.eqBg;
          this.initWidgets();
        },
        initWidgets: function () {},
        calcGeometry: function () {
          this.y = topWidget.enabled ? topWidget.h : 0;
          this.w = screenWidth - this.x;
          masterWidget.enabled && (this.w -= masterWidget.w);
          auxoutWidget.enabled && (this.w -= auxoutWidget.w);
          fxoutWidget.enabled && (this.w -= fxoutWidget.w);
          slideOutWidget.enabled && (this.w -= slideOutWidget.w);
          this.h = screenHeight - this.y;
          bottomWidget.enabled && (this.h -= bottomWidget.h);
        },
        paint: function () {
          ctx.fillStyle = this.bgColor;
          ctx.fillRect(0, 0, this.w, this.h);
        },
      });
    MOREME_CUTOFF = -120;
    var MOREME = Class.create(SUBPAGE, {
        onShow: function () {
          checkMoreMe();
          -1 != settings.meout && auxoutWidget.setAux(settings.meout);
          auxoutWidget.MIXTOAUX.hide();
        },
        onHide: function () {
          auxoutWidget.MIXTOAUX.show();
        },
        initWidgets: function () {
          this.widgetName = "MOREME";
          var a = this;
          this.ME_VU = new MM_SLIDER(this);
          this.ME_VU.setAnchors(10, 10, null, 43);
          this.ME_VU.text = lang.ME;
          this.ME_VU.color = color.me;
          this.ME_VU.ondown = function () {
            var a = settings.meout,
              c = settings.me;
            if (0 > a || a > curSetup.aux) this.value = 0;
            else if (0 == c.length) this.value = 0;
            else {
              a = "aux." + a + ".value";
              this.pressMix_dB = [];
              for (var d = 0; d < c.length; d++) {
                var f = c[d];
                if (!(f >= allStrips.length)) {
                  switch (allStrips[f].type) {
                    case E_STRIP_TYPE.AUX:
                    case E_STRIP_TYPE.FX:
                    case E_STRIP_TYPE.SUB:
                      continue;
                  }
                  this.pressMix_dB[d] = VtoDBf(allStrips[f].getNameValue(a));
                }
              }
            }
          };
          this.ME_VU.getState = function () {
            var a = settings.meout,
              c = settings.me,
              d = "aux." + a + ".value";
            if (0 > a || a > curSetup.aux) this.value = 0;
            else if (0 == c.length) this.value = 0;
            else {
              for (var a = [], f = 0; f < c.length; f++) {
                var e = c[f];
                if (!(e >= allStrips.length)) {
                  switch (allStrips[e].type) {
                    case E_STRIP_TYPE.AUX:
                    case E_STRIP_TYPE.FX:
                    case E_STRIP_TYPE.SUB:
                      continue;
                  }
                  a.push(allStrips[e].getNameValue(d));
                }
              }
              this.value = a.max();
            }
          };
          this.ME_VU.onValue = function (a) {
            if (!(0.003787517547607422 > a)) {
              var b = settings.meout,
                d = settings.me;
              if (0 > b || b > curSetup.aux) this.value = 0;
              else if (0 == d.length) this.value = 0;
              else {
                a = VtoDBf(a);
                var f = VtoDBf(this.start);
                a -= f;
                b = "aux." + b + ".value";
                for (f = 0; f < d.length; f++) {
                  var e = d[f];
                  if (!(e >= allStrips.length)) {
                    e = allStrips[e];
                    switch (e.type) {
                      case E_STRIP_TYPE.AUX:
                      case E_STRIP_TYPE.FX:
                      case E_STRIP_TYPE.SUB:
                        continue;
                    }
                    var g = this.pressMix_dB[f];
                    g < MOREME_CUTOFF || ((g = DBtoVf(g + a)), e.setNameValue(b, bound(g, 0, 1)));
                  }
                }
              }
            }
          };
          this.BAND_VU = new MM_SLIDER(this);
          this.BAND_VU.color = color.blue;
          this.BAND_VU.text = lang.BAND;
          this.BAND_VU.setAnchors(null, 10, 10, 43);
          this.BAND_VU.ondown = function () {
            var a = settings.meout,
              c = settings.me;
            if (0 > a || a > curSetup.aux) this.value = 0;
            else if (0 == c.length) this.value = 0;
            else {
              a = "aux." + a + ".value";
              this.pressMix_dB = [];
              for (var d = 0; d < allStrips.length; d++)
                if (!c.contains(d)) {
                  switch (allStrips[d].type) {
                    case E_STRIP_TYPE.AUX:
                    case E_STRIP_TYPE.FX:
                    case E_STRIP_TYPE.SUB:
                      continue;
                  }
                  this.pressMix_dB[d] = VtoDBf(allStrips[d].getNameValue(a));
                }
            }
          };
          this.BAND_VU.getState = function () {
            var a = settings.meout,
              c = settings.me;
            if (-1 == a) this.value = 0;
            else if (0 == c.length) this.value = 0;
            else {
              for (var a = "aux." + a + ".value", d = [], f = 0; f < allStrips.length; f++)
                if (!c.contains(f)) {
                  switch (allStrips[f].type) {
                    case E_STRIP_TYPE.AUX:
                    case E_STRIP_TYPE.FX:
                    case E_STRIP_TYPE.SUB:
                      continue;
                  }
                  d.push(allStrips[f].getNameValue(a));
                }
              this.value = d.max();
            }
          };
          this.BAND_VU.onValue = function (a) {
            if (!(0.003787517547607422 > a)) {
              var b = settings.meout,
                d = settings.me;
              if (0 > b || b > curSetup.aux) this.value = 0;
              else if (0 == d.length) this.value = 0;
              else {
                a = VtoDBf(a);
                var f = VtoDBf(this.start);
                a -= f;
                b = "aux." + b + ".value";
                for (f = 0; f < allStrips.length; f++)
                  if (!d.contains(f)) {
                    switch (allStrips[f].type) {
                      case E_STRIP_TYPE.AUX:
                      case E_STRIP_TYPE.FX:
                      case E_STRIP_TYPE.SUB:
                        continue;
                    }
                    var e = allStrips[f],
                      g = this.pressMix_dB[f];
                    g < MOREME_CUTOFF || ((g = DBtoVf(g + a)), e.setNameValue(b, bound(g, 0, 1)));
                  }
              }
            }
          };
          this.WHEEL = new MM_WHEEL(this);
          this.WHEEL.setAnchors(null, 10, null, 43);
          this.WHEEL.ondown = function () {
            var a = settings.meout,
              c = settings.me;
            if (0 > a || a > curSetup.aux) this.value = 0;
            else if (0 == c.length) this.value = 0;
            else {
              a = "aux." + a + ".value";
              this.db_me = [];
              this.db_band = [];
              for (var d = 0; d < allStrips.length; d++) {
                switch (allStrips[d].type) {
                  case E_STRIP_TYPE.AUX:
                  case E_STRIP_TYPE.FX:
                  case E_STRIP_TYPE.SUB:
                    continue;
                }
                c.contains(d) ? (this.db_me[c.indexOf(d)] = VtoDBf(allStrips[d].getNameValue(a))) : (this.db_band[d] = VtoDBf(allStrips[d].getNameValue(a)));
              }
              this.max1 = 10 - this.db_me.max();
              this.max2 = 10 - this.db_band.max();
            }
          };
          this.WHEEL.onValue = function (b) {
            b = -20 * (b - 0.5);
            b > this.max1 || -b > this.max2 || (applyMEdelta(this.db_me, b), applyBANDdelta(this.db_band, -b), regUpdate(a));
          };
        },
        calcGeometry: function ($super) {
          $super();
          var b = this.w - 40;
          this.ME_VU.w = (0.35 * b) | 0;
          this.BAND_VU.w = (0.35 * b) | 0;
          this.WHEEL.x = 10 + this.ME_VU.w + 10;
          this.WHEEL.w = (0.3 * b) | 0;
        },
        paint: function () {
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, 0, this.w, this.h);
          ctx.fillStyle = "rgba(255,255,255,0.1)";
          ctx.fillRect(0, this.h, this.w, -measures.bottomWidgetHeight);
          ctx.fillStyle = color.me;
          ctx.fillRect(0, this.h - measures.bottomWidgetHeight, this.w, -3);
          var a = -1 == settings.meout,
            b = "";
          0 == settings.me.length && (b += "(" + lang.NO_ME_CHANNELS + ") ");
          a && (b += "(" + lang.NO_AUX_OUT + ")");
          drawText(b, this.w / 2, this.h - 18, { color: color.white, font: "15pt open_sans_condensedbold", align: "center", baseLine: "middle", sColor: "#000", sBlur: 4, sX: 2, sY: 2 });
        },
      }),
      MM_SLIDER = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "MM_SLIDER";
          this.color = color.green;
          this.needMoveEvt = !0;
          this.value = 0.5;
          this.w = 40;
          this.h = 100;
          this.d = 0;
          this.text = "";
          this.grd = null;
        },
        ondown: function () {},
        onDown: function (a, b) {
          this.start = this.value;
          0 == this.start ? showPopupMsg(lang.NO_SEND_LEVELS) : ((this.sy = b - this.globalY()), this.ondown(), this.onMove(a, b));
        },
        onMove: function (a, b) {
          if (0 != this.start) {
            var c = (b - this.globalY() - this.sy) / this.h,
              c = bound(this.start - c, 0, 1);
            this.onValue(c);
            regUpdate(this);
          }
        },
        onValue: function (a) {},
        onwheel: function (a) {
          this.start = this.value;
          this.onDown();
          var b = this.value,
            b = bound(b + a / 120 / 30, 0, 1);
          this.onValue(b);
          regUpdate(this);
        },
        calcGeometry: function () {
          this.grd = ctx.createLinearGradient(0, 0, 0, this.h);
          this.grd.addColorStop(0, "rgba(255,255,255,0.1)");
          this.grd.addColorStop(1, "rgba(0,0,0,0.4)");
        },
        getState: function () {},
        paint: function () {
          this.getState();
          ctx.fillStyle = color.black;
          ctx.fillRoundRect(0, 0, this.w, this.h, 6);
          var a = ((1 - zeroDbPos) * this.h) | 0;
          ctx.strokeStyle = "rgba(255,255,255,0.1)";
          ctx.lineWidth = 2;
          ctx.beginPath();
          ctx.dashedLine(1, a + 1, this.w - 1, a + 1, 10);
          ctx.stroke();
          var a = this.value,
            b = this.h - 2;
          ctx.fillStyle = this.color;
          ctx.fillRoundRect(1, this.h - 1, this.w - 2, -b * a, 6);
          ctx.fillStyle = this.grd;
          ctx.fillRoundRect(1, 1, this.w - 2, this.h - 2, 6);
          ctx.drawText(this.text, (this.w / 2) | 0, 22, { maxW: this.w - 2, color: 1.3e-4 > a ? "#555" : "#eee", font: "13pt open_sans_condensedbold", align: "center", shadow: Shadow.main });
          ctx.drawText(VtoDB(a).replace("@", "∞"), (this.w / 2) | 0, 41, { color: 1.3e-4 > a ? "#f11" : "#ddd", maxW: this.w - 2, shadow: Shadow.main });
          ctx.lineWidth = 1;
          ctx.strokeStyle = "#46474A";
          ctx.roundRect(0.5, 0.5, this.w - 1, this.h - 1, 6);
          ctx.stroke();
        },
      }),
      MM_WHEEL = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "MM_WHEEL";
          this.needClip = this.needMoveEvt = !0;
          this.w = 50;
          this.h = 200;
          this.v = 0.5;
        },
        onDown: function (a, b) {
          var c = a - this.globalX(),
            d = b - this.globalY();
          this.pressPoint = [c, d];
          this.ondown();
        },
        onMove: function (a, b) {
          this.globalX();
          var c = b - this.globalY();
          this.v = c = bound(0.5 - (this.pressPoint[1] - c) / this.h, 0, 1);
          this.onValue(c);
          regUpdate(this);
        },
        onUp: function () {
          this.v = 0.5;
          regUpdate(this);
        },
        ondown: function () {},
        calcGeometry: function () {
          this.grd = ctx.createLinearGradient(0, 0, 0, this.h);
          this.grd.addColorStop(0, "rgba(255,255,255,0.1)");
          this.grd.addColorStop(0.5, "rgba(255,255,255,0.2)");
          this.grd.addColorStop(1, "rgba(255,255,255,0.1)");
        },
        paint: function () {
          ctx.fillStyle = "#000";
          ctx.fillRoundRect(0, 0, this.w, this.h, 6);
          ctx.fillStyle = this.grd;
          ctx.fillRoundRect(0, 0, this.w, this.h, 6);
          ctx.fillStyle = "#444";
          ctx.fillRect(1, (this.h / 2 - 1) | 0, this.w - 2, 2);
          var a = this.h - 12,
            b = 6 + ((this.v * a) | 0);
          ctx.fillStyle = "rgba(200,136,40,0.06)";
          ctx.fillRect(8, (this.h / 2) | 0, this.w - 16, ((this.v - 0.5) * a) | 0);
          ctx.fillStyle = "#CB8F4F";
          ctx.fillRoundRect(8, b - 5, this.w - 16, 10, 4);
          ctx.fillStyle = "#CB8F4F";
          ctx.fillCircle(this.w / 2, b, 26);
          ctx.fillStyle = "rgba(0,0,0,0.15)";
          ctx.fillTriangle(this.w / 2 - 14, b + 12, 14, 8);
          ctx.fillTriangle(this.w / 2 - 14, b - 12, 14, -8);
          0.5 != this.v && ((a = formatValue(20 * this.v - 10, 2, lang.DB, !0)), ctx.drawText(a, this.w / 2, b, { font: "14px open_sans_condensedbold", align: "center", valign: "middle", color: "rgba(0,0,0,0.5)" }));
          ctx.lineWidth = 1;
          ctx.strokeStyle = "#46474A";
          ctx.roundRect(0.5, 0.5, this.w - 1, this.h - 1, 6);
          ctx.stroke();
        },
      });
    function checkMoreMe() {
      var a = settings.me.clone();
      log(JSON.stringify(a));
      for (var a = a.uniq(), b = [], c = 0; c < a.length; c++) {
        var d = a[c];
        if (!(0 > d || d >= fxStrips[0].id))
          switch ((b.push(d), allStrips[d].getNameValue("stereoIndex"))) {
            case 0:
              a.contains(d + 1) || b.push(d + 1);
              break;
            case 1:
              a.contains(d - 1) || b.push(d - 1);
          }
      }
      b.sort(function (a, b) {
        return a - b;
      });
      log(JSON.stringify(b));
      settingsStorage.set("me", b);
      a = settings.meout;
      (isDefined(a) && null != a) || (a = -1);
      settingsStorage.set("meout", bound(a, -1, curSetup.aux - 1));
    }
    function applyMEdelta(a, b) {
      var c = settings.meout,
        d = settings.me;
      if (0 > c || c > curSetup.aux) this.value = 0;
      else if (0 == d.length) this.value = 0;
      else
        for (var c = "aux." + c + ".value", f = 0; f < d.length; f++) {
          var e = d[f];
          if (!(e >= allStrips.length)) {
            switch (allStrips[e].type) {
              case E_STRIP_TYPE.AUX:
              case E_STRIP_TYPE.FX:
              case E_STRIP_TYPE.SUB:
                continue;
            }
            var e = allStrips[e],
              g = a[f];
            g < MOREME_CUTOFF || ((g = DBtoVf(g + b)), e.setNameValue(c, bound(g, 0, 1)));
          }
        }
    }
    function applyBANDdelta(a, b) {
      var c = settings.meout,
        d = settings.me;
      if (0 > c || c > curSetup.aux) this.value = 0;
      else if (0 == d.length) this.value = 0;
      else
        for (var c = "aux." + c + ".value", f = 0; f < allStrips.length; f++)
          if (!d.contains(f)) {
            var e = allStrips[f];
            switch (e.type) {
              case E_STRIP_TYPE.AUX:
              case E_STRIP_TYPE.FX:
              case E_STRIP_TYPE.SUB:
                continue;
            }
            var g = a[f];
            g < MOREME_CUTOFF || ((g = DBtoVf(g + b)), e.setNameValue(c, bound(g, 0, 1)));
          }
    }
    var UDP_CUSTOM_PAGE = Class.create(Widget, {
      initialize: function ($super, b) {
        $super(b);
        this.widgetName = "UDP_CUSTOM_PAGE";
        this.y = measures.topWidgetHeight;
        this.needClip = !1;
        this.color = color.green;
        this.mode = 0;
        this.buttons = [];
        this.initWidgets();
      },
      onShow: function () {},
      initWidgets: function () {
        var a = this,
          b = 0,
          c = 0;
        this.regKey("settings.udpcoms");
        this.preset = new MENUBUTTON(this);
        this.preset.setSize(120, 40);
        this.preset.setAnchors(850, 600, null, null);
        this.preset.text = lang.PRESETS;
        this.preset.color = color.green;
        this.preset.onPress = function () {
          a.showPresets();
        };
        this.edit = new CHECKBUTTON(this);
        this.edit.text = "EDIT MODE";
        this.edit.setSize(120, 40);
        this.edit.color = color.green;
        this.edit.setAnchors(30, 600, null, null);
        this.edit.getState = function () {
          this.state = a.mode;
        };
        this.edit.onToggle = function () {
          a.mode = this.state;
          regUpdate(a);
        };
        for (var d = 0; 12 > d; d++) {
          var f = new MENUBUTTON(this);
          f.setSize(220, 120);
          f.setAnchors(30 + 240 * c, 80 + 170 * b);
          f.idx = d;
          f.text = "" + d;
          f.color = color.green;
          f.getState = function () {
            this.text = ((JSON.parse(getValue("settings.udpcoms")) || [])[this.idx] || "").split(":")[0];
          };
          f.onPress = function () {
            var a = (JSON.parse(getValue("settings.udpcoms")) || [])[this.idx] || "";
            if (a)
              if (((a = a.split(":")), 4 > a.length)) showPopupMsg("Wrong syntax!");
              else {
                var b = a[1],
                  c = a[2],
                  d = a[3];
                if (4 < a.length) for (var f = 4; f < a.length; f++) d = d + ":" + a[f];
                log(b);
                log(c);
                log(d);
                b && c && d && sendMessage("UDP^" + b + ":" + c + "^" + d);
              }
          };
          this.buttons.push(f);
          f = new INPUTBOX(this);
          f.setAnchors(30 + 240 * c, 170 * b + 200);
          f.w = 220;
          f.idx = d;
          f.info = "BUTTON_NAME:IP:PORT:COMMAND";
          f.getState = function () {
            this.hidden = !a.mode;
            this.text = (JSON.parse(getValue("settings.udpcoms")) || [])[this.idx] || "";
          };
          f.valueFunc = function (b) {
            var c = JSON.parse(getValue("settings.udpcoms")) || [];
            c[this.idx] = b;
            setValue("settings.udpcoms", JSON.stringify(c));
            regUpdate(a);
          };
          c++;
          4 == c && b++;
          c %= 4;
        }
      },
      showPresets: function () {
        cuurentPresetDir = 1;
        this.menu = new PRESET_MENU2(null, "udp", this, this.color);
        regUpdate(this.menu);
      },
      loadPreset: function (a, b) {
        setValue("settings.udpcoms", a.data);
        regUpdate(this);
        return !0;
      },
      savePreset: function (a) {
        a = {};
        a.data = getValue("settings.udpcoms");
        return a;
      },
      calcGeometry: function () {
        this.w = screenWidth;
        this.h = screenHeight - this.y;
      },
      paint: function () {
        ctx.fillStyle = color.eqBg;
        ctx.fillRect(0, 0, this.w, this.h);
        ctx.drawText("CUSTOM UDP COMMANDS", 500, 30, { align: "center", valign: "middle", font: font.settingsLabel, color: "#ddd", shadow: [color.black, 0, 1, 1] });
      },
    });
    function secToTime(a) {
      var b = parseInt(a / 3600) % 24,
        c = parseInt(a / 60) % 60;
      a %= 60;
      return (0 < b ? b + ":" : "") + (10 > c ? "0" + c : c) + ":" + (10 > a ? "0" + a : a);
    }
    function isMTKbusy() {
      return getValue("var.mtk.currentState") || getValue("var.mtk.rec.currentState");
    }
    mtkPlay = mtkRec = player2track = null;
    var EMPTY_SUBPAGE = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "EMPTY";
          this.y = 40;
          this.setAnchors(0, 40, 0, 0);
          this.enabled = !1;
        },
        initWidgets: function () {},
        paint: function () {
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, 0, this.w, this.h);
          ctx.font = font.editbox;
          ctx.textAlign = "right";
          ctx.fillStyle = color.tabText;
          ctx.fillText(lang.EMPTY, 214, 50);
        },
      }),
      PLAYER_PAGE = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "PLAYER_PAGE";
          this.buttons = [];
          this.pages = [];
          this.y = measures.topWidgetHeight;
          this.mode = 0;
          this.color = color.yellow;
          this.arr = [];
          this.initWidgets();
          this.setMode(0);
        },
        updateLists: function () {},
        setItems: function () {},
        nextMode: function () {
          for (var a = this.mode + 1; a < this.buttons.length; a++)
            if (this.buttons[a].enabled) {
              this.buttons[a].click();
              return;
            }
          for (a = 0; a < this.mode; a++) this.buttons[a].enabled && this.buttons[a].click();
        },
        setMode: function (a) {
          this.mode = a;
          0 == a ? (playerStrips.show(), playerLabels.show()) : (playerStrips.hide(), playerLabels.hide());
          for (var b = 0; b < this.pages.length; b++) this.pages[b].hide();
          this.updateGeometry();
          this.pages[a].show();
          drawAll(this);
        },
        initWidgets: function () {
          if (IS_UI_24) {
            this.pages.push(new PLAYER(this));
            this.pages.push(new MTK_PLAY(this));
            this.pages.push(new MTK_REC(this));
            for (var a = [lang.TWO_TRACK_USB, lang.MULTITRACK, lang.MULTITRACK_CONFIG], b = [color.yellow, color.yellow, color.yellow], c = [color.yellow, color.yellow, color.yellow], d = 0; d < a.length; d++) {
              var f = new TabButton(this);
              f.color = b[d];
              f.textColor = c[d];
              f.mode = mode++;
              f.font = "13pt open_sans_condensedbold";
              f.text = a[d];
              f.setSize(150, 30);
              f.setAnchors(null, 5, 1 + 151 * (a.length - d - 1), null);
              this.buttons.push(f);
            }
          } else this.page = new PLAYER();
        },
        calcGeometry: function () {
          this.x = playerStrips.enabled ? 2 * measures.mixerStripWidth : 0;
          this.w = screenWidth - measures.mixerRightMargin - this.x;
          this.h = screenHeight - this.y;
        },
        paint: function () {
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, 0, this.w, this.h);
          ctx.fillStyle = this.color;
          ctx.fillRect(4, 35, this.w - 4, 4);
        },
      }),
      PLAYER = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.name = "PLAYER";
          this.y = measures.topWidgetHeight;
          this.color = color.media;
          this.mode = 0;
          this.initWidgets();
          player2track = this;
        },
        setMode: function (a) {
          this.mode = a;
          regUpdate(this);
        },
        initWidgets: function () {
          this.regKey("settings.playMode");
          this.regKey("settings.cue");
          this.regKey("var.present");
          var a = this;
          this.SWITCH = new SWITCHBOX(this);
          this.SWITCH.setItems([lang.PLAYER, lang.PADS]);
          this.SWITCH.setItemWidth(70);
          this.SWITCH.color = color.media;
          this.SWITCH.hide();
          this.RENAME = new MENUBUTTON(this);
          this.RENAME.text = lang.RENAME;
          this.RENAME.setAnchors(null, null, 300, 5);
          this.RENAME.w = 90;
          this.RENAME.getState = function () {
            this.disabled = "Recordings" != a.PLISTS.selItem();
          };
          this.RENAME.onPress = function () {
            if ("Recordings" == a.PLISTS.selItem()) {
              var b = a.FLIST.selItem() || "";
              b &&
              ((editOk.valueFunc = function () {
                var a = editBox2.value;
                a && b != a && sendMessage("RENAME^" + b + "^" + a);
              }),
                showEditBox2(lang.RENAME + " (" + b + ")", b));
            }
          };
          this.ORDER = new SWITCHBOX(this);
          this.ORDER.setAnchors(10, null, null, 5);
          this.ORDER.color = color.media;
          this.ORDER.setItems([lang.MANUAL, lang.AUTO]);
          this.ORDER.setItemWidth(80);
          this.ORDER.getState = function () {
            switch (getValue("settings.playMode")) {
              case 0:
                this.state = 0;
                break;
              case 1:
                this.state = 0;
                break;
              case 2:
                this.state = 1;
                break;
              case 3:
                this.state = 1;
            }
            this.text = this.state ? lang.AUTO : lang.MANUAL;
          };
          this.ORDER.valueFunc = function () {
            isBlocked("player") ? showPopupMsg(lang.LOCKED, 800) : (setValue("settings.playMode", 0 == this.state ? 0 : 3), regUpdate(a));
          };
          this.TIME = new TIME_LABEL(this);
          this.TIME.regKey("var.currentTrackPos");
          this.SEEKBAR = new SEEKBAR(this);
          this.SEEKBAR.setPos(10, 66);
          this.SEEKBAR.regKey("var.currentTrackPos");
          this.SEEKBAR.ondown = function () {
            a.TIME.setMode(1);
          };
          this.SEEKBAR.onup = function () {
            a.TIME.setMode(0);
          };
          this.SEEKBAR.onmove = function (b) {
            a.TIME.setValue2(b);
            regUpdate(a.TIME);
          };
          this.SEEKBAR.onChange = function (a) {
            isBlocked("player") ? showPopupMsg(lang.LOCKED, 800) : sendMessage(E_COMMANDS.MEDIA_JUMP_TO + "^" + a);
          };
          this.PREV = new Button(this);
          this.PREV.setImages(res.player_prev_off, res.player_prev_on);
          this.PREV.opaque = !1;
          this.PREV.disabledHide = !1;
          this.PREV.getState = function () {
            this.disabled = 0 == getValue("var.present");
          };
          this.PREV.valueFunc = function () {
            EMULATE ? showPopupMsg(lang.DEMO_VERSION) : isBlocked("player") ? showPopupMsg(lang.LOCKED, 800) : sendMessage(E_COMMANDS.MEDIA_PREV);
          };
          this.PLAY = new CheckBox(this);
          this.PLAY.setImages(res.player_play, res.player_pause);
          this.PLAY.opaque = !1;
          this.PLAY.disabledHide = !1;
          this.PLAY.getState = function () {
            this.state = 2 == getValue("var.currentState") ? 1 : 0;
            this.disabled = 0 == getValue("var.present");
          };
          this.PLAY.onToggleUp = function () {
            if (EMULATE) showPopupMsg(lang.DEMO_VERSION);
            else if (isBlocked("player")) showPopupMsg(lang.LOCKED, 800);
            else {
              var b = a.FLIST.selItem(),
                d = a.PLISTS.selItem(),
                f = getValue("var.currentTrack"),
                e = getValue("var.currentPlaylist");
              if (null != b && b != f) {
                if (null == d || 0 == d.length) d = e;
                null != d && 0 != d.length && null != b && 0 != b.length && sendMessage(E_COMMANDS.MEDIA_SWITCH_TRACK + "^" + d + "^" + b);
              } else getValue("settings.cue") && sendMessage(E_COMMANDS.MEDIA_NEXT);
              sendMessage(E_COMMANDS.MEDIA_PLAY);
            }
          };
          this.PLAY.onToggleDown = function () {
            isBlocked("player") ? showPopupMsg(lang.LOCKED, 800) : sendMessage(E_COMMANDS.MEDIA_PAUSE);
          };
          this.NEXT = new Button(this);
          this.NEXT.setImages(res.player_next_off, res.player_next_on);
          this.NEXT.opaque = !1;
          this.NEXT.disabledHide = !1;
          this.NEXT.getState = function () {
            this.disabled = 0 == getValue("var.present");
          };
          this.NEXT.onPress = function () {
            EMULATE ? showPopupMsg(lang.DEMO_VERSION) : isBlocked("player") ? showPopupMsg(lang.LOCKED, 800) : sendMessage(E_COMMANDS.MEDIA_NEXT);
          };
          this.STOP = new Button(this);
          this.STOP.setImages(res.player_stop_off, res.player_stop_on);
          this.STOP.opaque = !1;
          this.STOP.disabledHide = !1;
          this.STOP.getState = function () {
            this.disabled = 0 == getValue("var.present");
          };
          this.STOP.onPress = function () {
            EMULATE ? showPopupMsg(lang.DEMO_VERSION) : isBlocked("player") ? showPopupMsg(lang.LOCKED, 800) : sendMessage(E_COMMANDS.MEDIA_STOP);
          };
          HAVE_REC &&
          ((this.REC = new CheckBox(this)),
            this.REC.setImages(res.player_rec_off, res.player_rec_on),
            (this.REC.opaque = !1),
            (this.REC.disabledHide = !1),
            (this.REC.getState = function () {
              this.state = getValue("var.isRecording");
              this.disabled = 0 == getValue("var.present") || 0.5 < getValue("var.recBusy");
            }),
            (this.REC.onToggle = function () {
              toggleRec();
            }));
          this.PLISTS = new PLISTS(this);
          this.PLISTS.setPos(10, 100);
          this.PLISTS.setSize(200, 400);
          this.PLISTS.onSelect = function () {
            if (!EMULATE) {
              var b = this.selItem();
              sendMessage(E_COMMANDS.MEDIA_GET_PLIST_TRACKS + "^" + b);
              a.FLIST.clearSelection();
              regUpdate(a);
            }
          };
          this.PLISTS.onDClick = function () {
            if (isBlocked("player")) showPopupMsg(lang.LOCKED, 800);
            else {
              var a = this.selItem();
              null != a && 0 != a.length && sendMessage(E_COMMANDS.MEDIA_SWITCH_PLIST + "^" + a);
            }
          };
          this.PLISTS.getActiveItem = function () {
            var a = getValue("var.currentPlaylist"),
              a = this.items.indexOf(a);
            this.activeItemIdx = 0 <= a ? a : -1;
          };
          this.FLIST = new PLISTS(this);
          this.FLIST.label = lang.FILES;
          this.FLIST.setPos(410, 100);
          this.FLIST.setSize(400, 400);
          this.FLIST.plistName = "";
          this.FLIST.onDClick = function () {
            if (isBlocked("player")) showPopupMsg(lang.LOCKED, 800);
            else {
              var b = this.selItem();
              if (null != b && 0 != b.length) {
                var d = a.PLISTS.selItem();
                if (null == d || 0 == d.length) d = getValue("var.currentPlaylist");
                null != d && 0 != d.length && sendMessage(E_COMMANDS.MEDIA_SWITCH_TRACK + "^" + d + "^" + b);
              }
            }
          };
          this.FLIST.getActiveItem = function () {
            var a = getValue("var.currentPlaylist");
            this.plistName != a ? (this.activeItemIdx = -1) : ((a = getValue("var.currentTrack")), (this.activeItemIdx = this.items.indexOf(a)));
          };
          if (EMULATE) {
            var b = $A($R("TRACK A", "TRACK Z"));
            this.PLISTS.setItems($A($R("PLIST A", "PLIST Z")));
            this.FLIST.setItems(b);
          }
          this.mutefx = new CHECKBUTTON(this);
          this.mutefx.text = lang.MUTE_FX;
          this.mutefx.color = this.mutefx.textColor = color.tvMuteFX;
          this.mutefx.textColor2 = color.white;
          this.mutefx.w = 85;
          this.mutefx.setAnchors(null, null, 205, 5);
          this.mutefx.getState = function () {
            this.state = checkBit(getValue("mgmask"), MUTEFX_BIT_IDX) ? 1 : 0;
          };
          this.mutefx.onToggleUp = function () {
            mixerWidget.muteFX();
          };
          this.mutefx.onToggleDown = function () {
            mixerWidget.unMuteFX();
          };
          this.muteall = new CHECKBUTTON(this);
          this.muteall.text = lang.MUTE_ALL;
          this.muteall.color = this.muteall.textColor = color.tvMuteALL;
          this.muteall.textColor2 = color.white;
          this.muteall.w = 85;
          this.muteall.setAnchors(null, null, 110, 5);
          this.muteall.getState = function () {
            this.state = checkBit(getValue("mgmask"), MUTEALL_BIT_IDX) ? 1 : 0;
          };
          this.muteall.onToggleUp = function () {
            mixerWidget.muteAll();
          };
          this.muteall.onToggleDown = function () {
            mixerWidget.cancelMuteAll();
          };
          this.CUE = new CHECKBUTTON(this);
          this.CUE.setAnchors(null, null, 10, 5);
          this.CUE.text = lang.CUE;
          this.CUE.w = 90;
          this.CUE.getState = function () {
            this.state = getValue("settings.cue") ? 1 : 0;
          };
          this.CUE.onToggle = function () {
            isBlocked("player") ? showPopupMsg(lang.LOCKED, 800) : setValue("settings.cue", this.state ? 1 : 0);
          };
          this.SHUFFLE = new CHECKBUTTON(this);
          this.SHUFFLE.setAnchors(180, null, null, 5);
          this.SHUFFLE.text = lang.SHUFFLE;
          this.SHUFFLE.w = 90;
          this.SHUFFLE.regKey("settings.shuffle");
          this.SHUFFLE.regKey("settings.playMode");
          this.SHUFFLE.getState = function () {
            this.disabled = 2 > getValue("settings.playMode");
            this.state = getValue("settings.shuffle") ? 1 : 0;
          };
          this.SHUFFLE.onToggle = function () {
            isBlocked("player") ? showPopupMsg(lang.LOCKED, 800) : setValue("settings.shuffle", this.state ? 1 : 0);
          };
        },
        onShow: function () {
          this.updateLists();
        },
        updateLists: function () {
          if (!EMULATE) {
            sendMessage(E_COMMANDS.MEDIA_GET_PLISTS);
            var a = this.PLISTS.selItem();
            null == a && (a = getValue("var.currentPlaylist"));
            a && sendMessage(E_COMMANDS.MEDIA_GET_PLIST_TRACKS + "^" + a);
          }
        },
        onHide: function () {},
        setStrip: function () {
          null != this.strip && this.unStrip();
          this.strip = mediaStrips[0];
          this.saveX = this.strip.x;
          this.saveEnabled = this.strip.enabled;
          this.strip.parent = this;
          this.strip.updateGeometry();
          this.strip.enabled = !0;
          this.strip.x = 0;
          this.strip.needClip = !0;
          this.widgets.push(this.strip);
        },
        unStrip: function () {
          null != this.strip &&
          (this.widgets.pop(),
            (this.strip.parent = mixerWidget),
            (this.strip.enabled = this.saveEnabled),
            (this.strip.needClip = !1),
            (this.strip.calcGeometry = function () {
              this.h = this.parent.h;
            }),
            this.strip.updateGeometry(),
            (this.strip.x = this.saveX),
            (this.strip = null));
        },
        calcGeometry: function () {
          this.x = 2 * measures.mixerStripWidth;
          this.w = screenWidth - measures.mixerRightMargin - this.x;
          this.h = screenHeight - this.y;
          IS_UI_24 && ((this.x = 0), (this.y = 40), (this.h = this.parent.h - this.y), (this.w = this.parent.w));
          this.needClip = 670 > this.w;
          this.SWITCH.setPos(10, 21);
          this.SEEKBAR.w = this.w - this.SEEKBAR.x - 10;
          var a = ((this.w - this.PREV.w - this.PLAY.w - this.NEXT.w - this.STOP.w - this.REC.w - 6) / 2) | 0;
          this.TIME.setPos(this.w - this.TIME.w - 10, 10);
          this.PREV.setPos(a, 15);
          this.PLAY.setPos(this.PREV.x + this.PREV.w + 2, 15);
          this.STOP.setPos(this.PLAY.x + this.PLAY.w + 2, 15);
          this.NEXT.setPos(this.STOP.x + this.STOP.w + 2, 15);
          HAVE_REC && this.REC.setPos(this.NEXT.x + this.NEXT.w + 2 + 6, 15);
          a = this.h - this.PLISTS.y - 10 - 32;
          this.PLISTS.setSize(700 < this.w ? 300 : 270, a);
          this.FLIST.x = this.PLISTS.x + this.PLISTS.w + 2;
          this.FLIST.setSize(this.w - this.FLIST.x - 10, a);
        },
        paint: function () {
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, 0, this.w, this.h);
        },
      }),
      MTK_REC = Class.create(EMPTY_SUBPAGE, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "MTK_REC";
          this.color = color.yellow;
          this.initWidgets();
          mtkRec = this;
        },
        initWidgets: function () {
          var a = this;
          this.BUTTONS = [];
          var b = 60,
            c = 0,
            d = 46;
          24 < inStrips.length && 690 > this.h && ((d = 44), (b = 54));
          for (var f = 0, e = 0; e < allStrips.length; e++) {
            var g = allStrips[e];
            switch (g.type) {
              case E_STRIP_TYPE.IN:
              case E_STRIP_TYPE.LINEIN:
                if (20 <= g.subId) continue;
                break;
              default:
                continue;
            }
            var h = new CHECKBUTTON(this);
            0 == f % 8 && 0 != f && c++;
            h.setSize(90, d);
            h.setPos(40 + 100 * (f - 8 * c), 100 + b * c);
            h.st = g;
            h.text = g.text;
            h.textColor = g.color;
            h.setKey(g.name + "mtkrec", !0);
            h.regKey(g.name + "mtkrec");
            h.k = "mtkrec";
            h.getState = function () {
              this.state = this.st.getNameValue("mtkrec");
              this.text = this.st.getName();
              this.textColor = this.st.getColor();
            };
            h.onToggle = function () {
              regUpdate(a);
            };
            this.BUTTONS.push(h);
            f++;
          }
          this.MTKMODE = new SWITCHBOX(this);
          this.MTKMODE.setAnchors(240, 22);
          this.MTKMODE.setItems(["FLAC 24", "FLAC 16", "WAV 24", "WAV 16"]);
          this.MTKMODE.setItemWidth(80);
          this.MTKMODE.h = 40;
          this.MTKMODE.regKey("settings.mtk.format");
          this.MTKMODE.getState = function () {
            this.state = getValue("settings.mtk.format");
          };
          this.MTKMODE.valueFunc = function () {
            isBlocked("gsettings") ? showPopupMsg(lang.LOCKED, 800) : setValue("settings.mtk.format", this.state);
          };
          this.selectall = new MENUBUTTON(this);
          this.selectall.setAnchors(640, 22);
          this.selectall.setSize(90, 40);
          this.selectall.text = lang.SELECT_ALL;
          this.selectall.onPress = function () {
            a.BUTTONS.each(function (a) {
              a.setState(0, !1);
            });
            a.BUTTONS.each(function (a) {
              (a.st.type != E_STRIP_TYPE.IN && a.st.type != E_STRIP_TYPE.LINEIN) || a.setState(1, !1);
            });
            regUpdate(a);
          };
          this.clearall = new MENUBUTTON(this);
          this.clearall.setAnchors(740, 22);
          this.clearall.setSize(90, 40);
          this.clearall.text = lang.CLEAR_ALL;
          this.clearall.onPress = function () {
            a.BUTTONS.each(function (a) {
              a.setState(0, !1);
            });
            regUpdate(a);
          };
        },
        paint: function () {
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, 0, this.w, this.h);
          ctx.font = font.editbox;
          ctx.textAlign = "left";
          ctx.fillStyle = color.white;
          ctx.drawText(lang.RECORD_CHANNELS, 40, 50, { shadow: Shadow.main });
        },
      });
    function keyToName(a) {
      a.endsWith(".") || (a += ".");
      for (var b = 0, c = allStrips.length; b < c; b++) if (allStrips[b].name == a) return allStrips[b].getLabel();
      return a;
    }
    var MTK_PLAY = Class.create(EMPTY_SUBPAGE, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "MTK_REC";
          this.color = color.yellow;
          this.regKey("var.mtk.present");
          this.initWidgets();
          mtkPlay = this;
        },
        onShow: function () {
          this.updateLists();
        },
        updateLists: function () {
          EMULATE || (sendMessage(E_COMMANDS.MTK_GET_SESSIONS), sendMessage(E_COMMANDS.MTK_GET_FILES));
        },
        initWidgets: function () {
          var a = this;
          this.regKey("var.mtk.rec.busy");
          this.overview = new MENUBUTTON(this);
          this.overview.text = lang.OVERVIEW;
          this.overview.color = this.overview.textColor = "#e44";
          this.overview.setPos(10, 15);
          this.overview.setSize(100, 40);
          this.overview.onPress = function () {
            settingsWidget.setMode(4);
            setMode(E_MODE.SETTINGS);
            settingsWidget.pages[4].setSrc(2);
            settingsWidget.pages[4].setMode(0);
          };
          this.scheck = new CHECKBUTTON(this);
          this.scheck.setAnchors(120, 15);
          this.scheck.setSize(101, 40);
          this.scheck.text = formatButtonText(lang.ACTIVATE_SOUNDCHECK);
          this.scheck.textColor = this.scheck.color = color.green;
          this.scheck.textColor2 = color.white;
          this.scheck.setKey("var.mtk.soundcheck");
          this.scheck.regKey("var.mtk.soundcheck");
          this.scheck.onToggle = function () {
            updateByKey("var.mtk.soundcheck");
            regUpdate(a);
          };
          this.PLAY = new CheckBox(this);
          this.PLAY.setImages(res.player_play, res.player_pause);
          this.PLAY.setAnchors(null, 15, 266, null);
          this.PLAY.regKey("var.mtk.currentState");
          this.PLAY.regKey("var.mtk.rec.currentState");
          this.PLAY.regKey("var.mtk.present");
          this.PLAY.opaque = !1;
          this.PLAY.disabledHide = !1;
          this.PLAY.getState = function () {
            this.state = 2 == getValue("var.mtk.currentState") ? 1 : 0;
            this.disabled = 0 == getValue("var.mtk.present") || 0.5 < getValue("var.mtk.rec.busy") || 0.5 < getValue("var.mtk.rec.currentState");
          };
          this.PLAY.onToggleUp = function () {
            if (isBlocked("player")) showPopupMsg(lang.LOCKED, 800);
            else {
              var a = getValue("var.mtk.rec.busy");
              0.5 < a && 2 > a ? showPopupMsg(lang.ERR_BUSYBUFFER) : sendMessage(E_COMMANDS.MTK_PLAY);
            }
          };
          this.PLAY.onToggleDown = function () {
            isBlocked("player") ? showPopupMsg(lang.LOCKED, 800) : sendMessage(E_COMMANDS.MTK_PAUSE);
          };
          this.STOP = new Button(this);
          this.STOP.setImages(res.player_stop_off, res.player_stop_on);
          this.STOP.setAnchors(null, 15, 194, null);
          this.STOP.regKey("var.mtk.rec.currentState");
          this.STOP.regKey("var.mtk.present");
          this.STOP.opaque = !1;
          this.STOP.disabledHide = !1;
          this.STOP.getState = function () {
            this.disabled = 0 == getValue("var.mtk.present") || 0.5 < getValue("var.mtk.rec.busy") || 0.5 < getValue("var.mtk.rec.currentState");
          };
          this.STOP.onPress = function () {
            if (isBlocked("player")) showPopupMsg(lang.LOCKED, 800);
            else {
              var a = getValue("var.mtk.rec.busy");
              0.5 < a && 2 > a ? showPopupMsg(lang.ERR_BUSYBUFFER) : (sendMessage(E_COMMANDS.MTK_STOP), 0.5 < getValue("var.mtk.rec.currentState") && showPopupMsg(lang.MTK_USB_REMOVE_WARNING));
            }
          };
          this.REC = new CheckBox(this);
          this.REC.setImages(res.player_rec_off, res.player_rec_on);
          this.REC.setAnchors(null, 15, 116, null);
          this.REC.regKey("var.mtk.rec.currentState");
          this.REC.regKey("var.mtk.currentState");
          this.REC.regKey("var.mtk.present");
          this.REC.opaque = !1;
          this.REC.disabledHide = !1;
          this.REC.getState = function () {
            this.state = getValue("var.mtk.rec.currentState");
            this.disabled = 0 == getValue("var.mtk.present") || 0.5 < getValue("var.mtk.rec.busy") || 0 != getValue("var.mtk.currentState");
          };
          this.REC.onToggle = toggleMTKRec;
          this.TIME = new MTK_TIME(this);
          this.TIME.setAnchors(null, 10, 10, null);
          this.SEEKBAR = new SEEKBAR(this);
          this.SEEKBAR.setAnchors(10, 66, 10, null);
          this.SEEKBAR.setKey("var.mtk.currentTrackPos", !0);
          this.SEEKBAR.onChange = function (a) {
            isBlocked("player") ? showPopupMsg(lang.LOCKED, 800) : sendMessage(E_COMMANDS.MTK_JUMP_TO + "^" + a);
          };
          this.cap_a = new Label(this);
          this.cap_a.font = "15px open_sans_condensedbold";
          this.cap_a.color = "#88b";
          this.cap_a.setAnchors(390, 19, null, null);
          this.cap_a.w = 110;
          this.cap_a.align = "center";
          this.cap_a.regKey("var.mtk.freespace");
          this.cap_a.getState = function () {
            var a = getValue("var.mtk.freespace");
            this.text = 0 > a ? lang.NOT_AVAILABLE : "" + formatValue(a, 2, " " + lang.GB, !1);
          };
          this.buffer = new BufferLine(this);
          this.buffer.setAnchors(390, 46, null, null);
          this.buffer.setKey("var.mtk.bufferfill", !0);
          this.sessions = new PLISTS(this);
          this.sessions.setAnchors(10, 100, null, 52);
          this.sessions.setSize(160, 400);
          this.sessions.label = lang.SESSIONS;
          this.sessions.regKey("var.mtk.playsession");
          this.sessions.regKey("var.mtk.session");
          this.sessions.activeTextColor = "#2a2";
          EMULATE && (this.sessions.setItems($A($R("SESSION A", "SESSION C"))), this.sessions.select(0));
          this.sessions.onSelect = function () {
            if (!isBlocked("player")) {
              var a = this.selItem();
              a && sendMessage(E_COMMANDS.MTK_SET_SESSION + "^" + a);
            }
          };
          this.sessions.getState = function () {
            var a = getValue("var.mtk.session");
            this.selectedIdx = this.selected = a = this.items.indexOf(a);
            this.selectedItem = this.items[a];
          };
          this.sessions.getActiveItem = function () {
            var a = getValue("var.mtk.playsession");
            this.activeItemIdx = this.items.indexOf(a);
          };
          this.delet = new MENUBUTTON(this);
          this.delet.text = lang.DELETE_SESSION;
          this.delet.setAnchors(10, null, null, 10);
          this.delet.setSize(160, 40);
          this.delet.regKey("var.mtk.currentState");
          this.delet.regKey("var.mtk.rec.currentState");
          this.delet.opaque = !1;
          this.delet.getState = function () {
            this.dimmed = !!getValue("var.mtk.rec.currentState") || !!getValue("var.mtk.currentState");
          };
          this.delet.onPress = function () {
            var b = a.sessions.selItem();
            b &&
            ((confOk.valueFunc = function () {
              sendMessage(E_COMMANDS.MTK_DEL_SESSION + "^" + b);
            }),
              showConfBox(lang.DELETE + " '" + b + "'?"));
          };
          this.patch = new PLISTS(this);
          this.patch.setAnchors(172, 100, null, 10);
          this.patch.setSize(160, 400);
          this.patch.regKey("var.mtk.soundcheck");
          this.patch.label = lang.MIXER_PATCH;
          this.patch.maxTextLengthAuto = !1;
          this.patch.font = "12pt open_sans_condensedbold";
          this.patch.setItems(Array(22));
          this.patch.getState = function () {
            for (var a = getValue("var.mtk.soundcheck"), b = [], c = 0; 22 > c; c++) {
              for (var g = "", h = "ua." + c, k = 0, m = allStrips.length; k < m; k++) {
                var p = allStrips[k];
                p.getNameValue(a ? "scsrc" : "src") == h && (g += p.getLabel() + " ");
              }
              g || (g = "---");
              g = "" + (c + 1) + (9 > c ? " " : "") + " : " + g;
              18 > g.length && (g = lang.SLOT + (9 > c ? "  " : " ") + g);
              b.push(g);
            }
            this.items = b;
          };
          this.patch.onDClick = function () {
            var a = inStrips.concat(lineinStrips).filter(function (a) {
                return 20 > a.subId;
              }),
              a = new CH_SEL_POPUP(a);
            a.slot = this.selectedIdx;
            a.valueFunc = function (a) {
              var b = getValue("var.mtk.soundcheck"),
                c = "src";
              b && (c = "scsrc");
              for (var d = 0; d < this.arr.length; d++) {
                var f = this.arr[d],
                  m = f.getNameValue(c),
                  p = "ua." + this.slot;
                ((!b && m == p) || (b && m == p && -1 == a)) && f.setNameValue(c, "none");
              }
              -1 != a && this.arr[a].setNameValue(c, "ua." + this.slot);
            };
          };
          this.files = new PLISTS(this);
          this.files.setAnchors(334, 100, 10, 10);
          this.files.label = lang.FILES;
          this.files.noSelection = !0;
          if (EMULATE) {
            for (var b = [], c = 0; 22 > c; c++) b.push("Track_" + (c + 1) + ".wav");
            this.files.setItems(b, !1);
          }
        },
        paint: function () {
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, 0, this.w, this.h);
          var a = this.cap_a.x - 10;
          ctx.drawText(lang.SPACE_REMAINING + ":", a, 29, { font: "15px open_sans_condensedbold", color: color.white, align: "right", valign: "middle" });
          ctx.drawText(lang.BUFFER + ":", a, 50, { font: "15px open_sans_condensedbold", color: color.white, align: "right", valign: "middle" });
          CASCADE_MODE && ctx.drawText(lang.SLAVE + ":", a, 50, { font: "15px open_sans_condensedbold", color: color.white, align: "right", valign: "middle" });
        },
      }),
      BufferLine = Class.create(Widget, {
        initialize: function ($super, b, c, d, f) {
          $super(b);
          this.widgetName = "BufferLine";
          this.ignoreEvents = !0;
          this.blockEvent = !1;
          this.w = 110;
          this.h = 10;
          this.value = 0;
        },
        paint: function () {
          this.value = this.getVal();
          var a = 0.9 <= this.value ? "#e11" : 0.6 <= this.value ? "#e81" : 0.2 <= this.value ? "#ee1" : 0 > this.value ? "#777" : "#4a4";
          this.value = bound(this.value, 0, 1);
          ctx.fillStyle = a;
          ctx.fillRect(0, 0, this.w, this.h);
          ctx.fillStyle = color.eqBg2;
          ctx.fillRect(1, 1, this.w - 2, this.h - 2);
          ctx.fillStyle = a;
          ctx.fillRect(0, 0, (this.w * this.value) | 0, this.h);
        },
      }),
      MTK_TIME = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.w = 100;
          this.h = 50;
          this.name = "MTK_TIME";
          this.color = "#67C266";
          this.len = this.pos = this.v2 = this.mode = 0;
          this.timer = null;
          this.regKey("var.mtk.rec.time");
          this.regKey("var.mtk.rec.currentState");
          this.regKey("var.mtk.currentTrackPos");
          this.regKey("var.mtk.currentLength");
        },
        setMode: function (a) {
          this.mode = a;
          regUpdate(this);
        },
        setValue2: function (a) {
          this.v2 = bound(a, 0, 1);
        },
        calcGeometry: function () {},
        getState: function () {
          (this.vmode = getValue("var.mtk.rec.currentState") ? 1 : 0) ? (this.len = getValue("var.mtk.rec.time")) : ((this.pos = getValue("var.mtk.currentTrackPos")), (this.len = getValue("var.mtk.currentLength")));
        },
        paint: function () {
          this.getState();
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, 0, this.w, this.h);
          if (!(0 > this.len))
            if (this.vmode) {
              ctx.font = "17pt open_sans_condensedbold, monospace";
              ctx.fillStyle = "#c44";
              var a = secToTime(this.len | 0);
              ctx.drawText(a, this.w - 2, 21, { align: "right", valign: "middle", shadow: Shadow.main });
            } else {
              var b = this.pos;
              1 == this.mode && (b = this.v2);
              a = this.len * b;
              b = secToTime(this.len | 0);
              a = secToTime(a | 0);
              ctx.font = "17pt open_sans_condensedbold, monospace";
              ctx.textAlign = "right";
              ctx.fillStyle = 1 == this.mode ? "#ccc" : this.color;
              ctx.drawText(a, this.w - 2, 20, { shadow: Shadow.main });
              ctx.fillStyle = "#FFC777";
              ctx.drawText(b, this.w - 2, 44, { shadow: Shadow.main });
            }
        },
      }),
      Label = Class.create(Widget, {
        initialize: function ($super, b, c, d, f) {
          $super(b);
          this.widgetName = "Label";
          this.ignoreEvents = !0;
          this.bg = this.blockEvent = !1;
          this.bgColor = "rgba(255,255,255,0.1)";
          this.w = 55;
          this.h = 20;
          this.opaque = !1;
          this.font = isDefined(c) ? c : "bold 16px Arial";
          this.color = isDefined(f) ? f : "#fff";
          this.textParam = { shadow: Shadow.main };
          this.text = isDefined(d) ? d : "Label";
          isDefined(d) && this.recalc();
          this.align = "center";
        },
        setFont: function (a) {
          this.font = a;
          this.recalc();
          regUpdate(this);
        },
        recalc: function () {
          ctx.font = this.font;
          var a = ctx.measureText(this.text).width;
          a > this.w && (this.w = a + 2);
        },
        setText: function (a) {
          this.text = a;
          this.recalc();
          regUpdate(this);
        },
        getState: function () {},
        paint: function () {
          this.getState();
          this.bg && ((ctx.fillStyle = this.bgColor), ctx.fillRoundRect(0, 0, this.w, this.h, 6));
          ctx.fillStyle = this.color;
          ctx.font = this.font;
          var a = (this.w / 2) | 0,
            b = (this.h / 2) | 0;
          ctx.textBaseline = "middle";
          ctx.textAlign = this.align;
          this.textParam.max = this.w;
          switch (this.align) {
            case "center":
              ctx.drawText(this.text, a, b, this.textParam);
              break;
            case "left":
              ctx.drawText(this.text, 0, b, this.textParam);
              break;
            case "right":
              ctx.drawText(this.text, this.w, b, this.textParam);
          }
        },
      }),
      TIME_LABEL = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.w = 100;
          this.h = 52;
          this.name = "TIME_LABEL";
          this.color2 = this.color = color.white;
          this.max = this.text = "";
          this.vmode = this.mode = 0;
          this.text2 = "";
          this.timer = null;
          this.len = this.pos = this.v2 = 0;
        },
        setMax: function (a) {
          this.max = secToTime(a | 0);
          regUpdate(this);
        },
        setTime: function (a) {
          this.text = secToTime(a | 0);
          regUpdate(this);
        },
        setMode: function (a) {
          this.mode = a;
          regUpdate(this);
        },
        setValue2: function (a) {
          this.v2 = bound(a, 0, 1);
        },
        calcGeometry: function () {},
        getState: function () {
          this.vmode = 0;
          this.len = getValue("var.currentLength");
          this.pos = getValue("var.currentTrackPos");
        },
        paint: function () {
          this.getState();
          ctx.fillStyle = color.eqBg;
          ctx.fillRect(0, 0, this.w, this.h);
          ctx.font = "17pt open_sans_condensedbold, monospace";
          ctx.textAlign = "right";
          if (!(0 > this.len)) {
            var a = this.pos;
            1 == this.mode && (a = this.v2);
            a *= this.len;
            this.max = secToTime(this.len | 0);
            this.text = secToTime(a | 0);
            ctx.fillStyle = this.color;
            1 == this.mode && (ctx.fillStyle = "#ccc");
            ctx.drawText(this.text, this.w - 2, 20, { shadow: Shadow.main });
            ctx.fillStyle = "#FFC777";
            ctx.drawText(this.max, this.w - 2, 44, { shadow: Shadow.main });
          }
        },
      }),
      SEEKBAR = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.name = "SEEKBAR";
          this.color = "white";
          this.w = 100;
          this.h = 26;
          this.position = 0.4;
          this.hw = 0;
          this.needMoveEvt = !0;
          this.pos = EMULATE ? 0.3 : 0;
          this.step = 1e3;
          this.timer = null;
          this.curTime = 0;
          this.trackLength = 30;
          this.key = "var.currentTrackPos";
          this.move = !1;
        },
        setTrackTime: function (a) {
          this.curTime = 0;
          this.trackLength = a;
        },
        onDown: function (a, b) {
          isBlocked("player") ? showPopupMsg(lang.LOCKED, 800) : ((this.move = !0), this.ondown(), this.onMove(a, b));
        },
        onMove: function (a, b) {
          var c = bound(a - this.globalX(), 0, this.w);
          this.pos = c = bound(c / this.w, 0, 1);
          this.onmove(c);
          regUpdate(this);
        },
        onUp: function () {
          this.move = !1;
          this.onChange(this.pos);
          this.onup();
          regUpdate(this);
        },
        ondown: function () {},
        onmove: function (a) {},
        onup: function () {},
        onChange: function (a) {
          sendMessage(E_COMMANDS.MEDIA_JUMP_TO + "^" + a);
        },
        paint: function () {
          this.position = this.move || EMULATE ? this.pos : bound(getValue(this.key), 0, 1);
          var a = ((this.w - this.hw - 6) * this.position) | 0;
          ctx.fillStyle = "#131415";
          ctx.fillRect(0, 0, this.w, this.h);
          ctx.fillStyle = color.media;
          ctx.fillRect(3, 3, a, this.h - 6);
          ctx.fillStyle = this.grd;
          ctx.fillRect(3, 3, a, this.h - 6);
          ctx.fillStyle = "#eee";
          ctx.fillRect(3 + a - 1, 3, 2, this.h - 6);
          ctx.strokeStyle = "#3D3E41";
          ctx.strokeRect(0.5, 0.5, this.w - 1, this.h - 1);
        },
      }),
      PLISTS = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "PLAYER_LIST";
          this.label = lang.PLAYLISTS;
          this.bg = "#212226";
          this.needMoveEvt = !0;
          this.lastClickTime = 0;
          this.items = [];
          this.noSelection = !1;
          this.selectedIdx = this.selected = -1;
          this.selectedItem = null;
          this.hoverIdx = this.activeItemIdx = -1;
          this.font = "12pt open_sans_condensedbold";
          this.itemH = 30;
          this.vOffsetOld = this.vOffset = 0;
          this.vScrollEnabled = !0;
          this.vScrollWidth = 8;
          this.textColor = color.white;
          this.selTextColor = color.black;
          this.selItemColor = "#eee";
          this.activeTextColor = "#e33";
          this.selectCanceled = !1;
          this.OY = 29;
          this.linkSelectedWith = this.linkOffsetsWith = null;
          this.maxTextLength = 999;
          this.maxTextLengthAuto = !0;
        },
        setItems: function (a, b) {
          Array.isArray(a) &&
          (isDefined(b),
            (this.items = a),
            (this.maxVOffset = this.items.length * this.itemH - this.h + this.OY),
          0 > this.maxVOffset && (this.maxVOffset = 0),
          this.vOffset > this.maxVOffset && this.setOffset(this.maxVOffset),
            regUpdate(this));
        },
        clear: function () {
          this.items.clear();
          this.clearSelection();
        },
        getActiveItem: function () {},
        selItem: function () {
          return 0 <= this.selectedIdx && this.selectedIdx < this.items.length ? this.items[this.selectedIdx] : null;
        },
        selected: function () {
          return 0 <= this.selectedIdx && this.selectedIdx < this.items.length ? this.items[this.selectedIdx] : null;
        },
        select: function (a, b) {
          a >= this.items.length ||
          (isDefined(b) || (b = !1),
            0 > a ? ((this.selectedIdx = this.selected = -1), (this.selectedItem = null)) : ((this.selectedIdx = this.selected = a), (this.selectedItem = this.items[a])),
          !b && this.linkSelectedWith && this.linkSelectedWith.select(a, !0),
            this.onSelect(),
            regUpdate(this));
        },
        selectByName: function (a) {
          a = this.items.indexOf(a);
          0 <= a && this.select(a);
          regUpdate(this);
        },
        selectLast: function () {
          0 != this.items.length && this.select(this.items.length - 1);
        },
        clearSelection: function () {
          this.select(-1);
        },
        setOffset: function (a) {
          this.vOffsetOld = this.vOffset = bound(a, 0, this.maxVOffset);
          regUpdate(this);
          this.linkOffsetsWith && ((this.linkOffsetsWith.vOffsetOld = this.linkOffsetsWith.vOffset = bound(a, 0, this.linkOffsetsWith.maxVOffset)), regUpdate(this.linkOffsetsWith));
        },
        onDown: function (a, b) {
          var c = b - this.globalY(),
            d = a - this.globalX();
          c < this.OY ||
          ((this.pressPoint = [d, c]),
            (this.selectCanceled = !1),
          this.noSelection && (this.selectCanceled = !0),
            this.vScrollEnabled && d > this.w - this.vScrollWidth ? (this.selectCanceled = !0) : (this.hoverIdx = Math.floor((this.pressPoint[1] + this.vOffset - this.OY) / this.itemH)),
          0 < this.maxVOffset && this.velStart(),
            regUpdate(this));
        },
        onMove: function (a, b) {
          var c = b - this.globalY();
          this.globalX();
          c -= this.pressPoint[1];
          this.vOffset = this.vOffsetOld - c;
          this.vOffset = bound(this.vOffset, 0, this.maxVOffset);
          this.linkOffsetsWith && ((this.linkOffsetsWith.vOffsetOld = this.linkOffsetsWith.vOffset = bound(this.vOffset, 0, this.linkOffsetsWith.maxVOffset)), regUpdate(this.linkOffsetsWith));
          regUpdate(this);
          5 < Math.abs(c) && (this.selectCanceled = !0);
        },
        onUp: function () {
          if (!this.selectCanceled) {
            var a = Math.floor((this.pressPoint[1] + this.vOffset - this.OY) / this.itemH);
            this.selected != a && this.select(a);
          }
          this.onPress();
          a = Date.now();
          if (250 > a - this.lastClickTime) this.onDClick();
          this.lastClickTime = a;
          this.hoverIdx = -1;
          this.vOffsetOld = this.vOffset;
          this.pressPoint = [-1, -1];
          0 < this.maxVOffset && this.velRelease();
          regUpdate(this);
        },
        onWheel: function (a) {
          clearInterval(ticker);
          this.setOffset(this.vOffset - Math.round(a / 6));
        },
        velStart: function () {
          velocity = amplitude = 0;
          timestamp = Date.now();
          clearInterval(ticker);
          frame = this.vOffset;
          scrollingWidget = this;
          ticker = setInterval(this.velTrack, 20);
        },
        velTrack: function () {
          var a, b;
          a = Date.now();
          b = a - timestamp;
          timestamp = a;
          a = scrollingWidget.vOffset - frame;
          frame = scrollingWidget.vOffset;
          velocity = ((1e3 * a) / (1 + b)) * 0.8 + 0.2 * velocity;
        },
        velRelease: function () {
          clearInterval(ticker);
          10 < Math.abs(velocity) && this.mScroll(velocity);
        },
        mScroll: function (a) {
          settings.kinetic ||
          ((position = this.vOffset),
            (amplitude = 0.3 * a),
            (step = 0),
            clearInterval(ticker),
            (ticker = setInterval(function () {
              var a = amplitude / 20;
              position += a;
              amplitude -= a;
              step += 1;
              80 < step && clearInterval(ticker);
              scrollingWidget.vOffset != (position | 0) && scrollingWidget.setOffset(position | 0);
            }, 20)));
        },
        calcGeometry: function () {
          this.maxVOffset = this.items.length * this.itemH - this.h + this.OY;
          this.maxTextLengthAuto && (this.maxTextLength = this.w / 8);
          0 > this.maxVOffset && (this.maxVOffset = 0);
          this.vOffset > this.maxVOffset && this.setOffset(this.maxVOffset);
        },
        onDClick: function () {},
        onSelect: function () {},
        onPress: function () {},
        valueFunc: function () {},
        getState: function () {},
        paint: function () {
          this.getState();
          ctx.fillStyle = this.bg;
          ctx.fillRect(0, 0, this.w, this.h);
          ctx.fillStyle = "#16171B";
          ctx.fillRect(0, 0, this.w, this.OY - 1);
          ctx.fillStyle = color.white;
          ctx.font = "14pt open_sans_condensedbold";
          ctx.textAlign = "left";
          ctx.fillText(this.label, 8, 21);
          ctx.lineWidth = 1;
          ctx.strokeStyle = "#3D3E41";
          ctx.strokeRect(0.5, 0.5, this.w - 1, this.h - 1);
          ctx.strokeRect(0.5, 0.5, this.w - 1, 28);
          this.getActiveItem();
          var a = this.items.length * this.itemH;
          this.vScrollEnabled = a > this.h - this.OY;
          ctx.beginPath();
          ctx.rect(0, this.OY, this.w, this.h - this.OY);
          ctx.clip();
          ctx.font = this.font;
          ctx.textAlign = "left";
          ctx.shadowColor = "transparent";
          ctx.textBaseline = "middle";
          for (var b = this.w - 2, c = 0; c < this.items.length; c++) {
            var d = c * this.itemH - this.vOffset + this.OY;
            if (!(d < -this.itemH || d > this.h)) {
              var f = this.selected == c,
                e = this.activeItemIdx == c;
              f && ((ctx.fillStyle = this.selItemColor), ctx.fillRect(0, d, b, this.itemH));
              this.hoverIdx == c && ((ctx.fillStyle = "rgba(255,255,255,0.03)"), ctx.fillRect(0, d, b, this.itemH));
              ctx.fillStyle = f ? this.selTextColor : this.textColor;
              e && (ctx.fillStyle = this.activeTextColor);
              (f = this.items[c] || "") && this.maxTextLength && (f = f.truncate(this.maxTextLength));
              ctx.fillText(f, 8, (d + this.itemH / 2) | 0, b - 9);
              ctx.fillStyle = "rgba(255,255,255,0.1)";
              ctx.fillRect(0, d + this.itemH, b, -1);
            }
          }
          this.vScrollEnabled &&
          ((c = this.h - this.OY),
          a < c && (a = c),
            (b = (c / a) * c),
            (a = this.OY + 2 + (this.vOffset / (a - c)) * (c - 4 - b)),
            (ctx.fillStyle = "rgba(0,0,0,0.3)"),
            ctx.fillRoundRect(this.w - this.vScrollWidth - 2 + 1, (a + 1) | 0, this.vScrollWidth - 2, (b - 2) | 0, 5),
            (ctx.fillStyle = "rgba(255,255,255,0.5)"),
            ctx.fillRoundRect(this.w - this.vScrollWidth - 2, a, this.vScrollWidth, b | 0, 7));
        },
      }),
      FLIST = Class.create(PLISTS, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "PLAYER_LIST";
          this.items2 = [10, 1e3, 2e4, 300];
          this.col2 = 65;
          this.activeItemIdx = -1;
          this.label = lang.FILES;
        },
      }),
      MEDIA_STRIPS = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "MEDIA_STRIP";
          this.holdTimer = this.strip2 = this.strip = this.buff2 = this.buff = null;
        },
        onShow: function () {
          this.setStrip();
        },
        onHide: function () {
          this.unStrip();
        },
        onDown: function () {
          regUpdate(playerLabels);
        },
        setStrip: function () {
          null != this.strip && this.unStrip();
          this.strip = mediaStrips[0];
          this.strip2 = mediaStrips[1];
          this.strip.parent = this;
          this.strip2.parent = this;
          this.buff = [this.strip.x, this.strip.enabled];
          this.buff2 = [this.strip2.x, this.strip2.enabled];
          this.strip.x = 0;
          this.strip2.x = measures.mixerStripWidth;
          this.strip.enabled = this.strip2.enabled = !0;
          this.strip.updateGeometry();
          this.strip2.updateGeometry();
          this.widgets.push(this.strip);
          this.widgets.push(this.strip2);
        },
        unStrip: function () {
          null != this.strip &&
          (this.widgets.pop(),
            this.widgets.pop(),
            (this.strip.parent = mixerWidget),
            (this.strip2.parent = mixerWidget),
          this.buff && ((this.strip.x = this.buff[0]), (this.strip.enabled = this.buff[1])),
          this.buff2 && ((this.strip2.x = this.buff2[0]), (this.strip2.enabled = this.buff2[1])),
            (this.buff2 = this.buff = this.strip2 = this.strip = null));
        },
        calcGeometry: function () {
          this.x = 0;
          this.y = measures.topWidgetHeight;
          this.w = 2 * measures.mixerStripWidth;
          this.h = screenHeight - this.y - bottomWidget.h;
        },
        paint: function () {
          null != this.strip
            ? ((ctx.fillStyle = color.botBG), ctx.fillRect(0, 0, this.w, this.h))
            : (fillVertPattern(res.blStripTile, this.h), drawImage(res.blStripBottom, 0, this.h - res.blStripBottom.h()), drawImage(res.blStripLabel, 0, this.h - res.blStripLabel.h()), drawImage(res.blStripTop, 0, 0));
        },
      }),
      MEDIA_LABELS = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(b);
          this.widgetName = "MEDIA_LABELS";
          this.w = 2 * measures.mixerStripWidth;
          this.h = measures.bottomWidgetHeight;
          this.lastClickTime = 0;
          this.prevSelected = -2;
        },
        onDown: function (a, b) {
          this.globalY();
          a - this.globalX() < measures.mixerStripWidth ? setSelected(mediaStrips[0].id) : setSelected(mediaStrips[1].id);
          var c = this;
          this.holdTimer = setTimeout(function () {
            c.onHold();
          }, HOLD_TIME);
          regUpdate(this);
        },
        onUp: function () {
          clearTimeout(this.holdTimer);
          var a = Date.now();
          a - this.lastClickTime < DBL_CLK_TIME
            ? this.prevSelected == selectedChannel && (mode != E_MODE.EDIT ? (editWidget.setMode(3), setMode(E_MODE.EDIT)) : setMode(lastMode), bottomWidget.gotoIDmid(selectedChannel))
            : ((this.lastClickTime = a), (this.prevSelected = selectedChannel));
        },
        onHold: function () {
          bottomWidget.move = !1;
          if (-1 != selectedChannel) {
            var a = new STRIPMENU(null, selectedStrip);
            a.x = selectedStrip.id == mediaStrips[0].id ? 0 : measures.mixerStripWidth - 20;
            a.x = bound(a.x, 0, screenWidth - a.w);
            a.y = screenHeight - a.h - measures.bottomWidgetHeight;
            mWidgets.push(widgets.pop());
            regUpdate(a);
          }
        },
        calcGeometry: function () {
          this.x = 0;
          this.y = screenHeight - this.h;
        },
        paint: function () {
          ctx.fillStyle = color.bg;
          ctx.fillRect(0, 0, this.w, this.h);
          var a = measures.mixerStripWidth;
          drawImage(res.stripLabel, 0, 0);
          drawImage(res.stripLabel, a, 0);
          selectedStrip.id == mediaStrips[0].id && ((ctx.fillStyle = mediaStrips[0].color), ctx.fillRect(2, 0, a - 4, bottomWidget.h - 2));
          selectedStrip.id == mediaStrips[1].id && ((ctx.fillStyle = mediaStrips[1].color), ctx.fillRect(a + 2, 0, a - 4, bottomWidget.h - 2));
          ctx.font = font.botChLabel;
          ctx.textAlign = "center";
          var b = mediaStrips[0].getName();
          ctx.fillStyle = color.black;
          ctx.fillText(b, (a / 2 + 2) | 0, 25, a - 6);
          ctx.fillStyle = color.labelText;
          ctx.fillText(b, (a / 2) | 0, 24, a - 6);
          b = mediaStrips[1].getName();
          ctx.fillStyle = color.black;
          ctx.fillText(b, a + ((a / 2 + 2) | 0), 25, a - 6);
          ctx.fillStyle = color.labelText;
          ctx.fillText(b, a + ((a / 2) | 0), 24, a - 6);
        },
      }),
      CH_SEL_POPUP = Class.create(Widget, {
        initialize: function ($super, b) {
          $super(-1);
          this.widgetName = "CH_SEL_POPUP";
          this.w = 650;
          this.h = 400;
          this.slot = -1;
          this.arr = b;
          this.initWidgets();
          this.calcGeometry();
          regUpdate(this);
        },
        initWidgets: function () {
          var a = 0,
            b = 0,
            c = this;
          this.buttons = [];
          for (var d = 0; d < this.arr.length; d++) {
            var f = this.arr[d],
              e = new SButton(this);
            e.idx = d;
            e.text = f.getLabel() + (f.stereo ? " " + lang.L : "");
            e.textColor = f.getColor();
            e.setPos(10 + 80 * b, 10 + 60 * a);
            e.setSize(70, 50);
            e.onPress = function () {
              c.valueFunc(this.idx);
              c.close();
            };
            this.buttons.push(e);
            b++;
            7 < b && ((b = 0), a++);
            f.stereo &&
            ((e = new SButton(this)),
              (e.idx = d),
              (e.text = f.getLabel() + " " + lang.R),
              (e.textColor = f.getColor()),
              e.setPos(10 + 80 * b, 10 + 60 * a),
              e.setSize(70, 50),
              (e.onPress = function () {
                c.valueFunc(this.idx, !0);
                c.close();
              }),
              this.buttons.push(e),
              b++,
            7 < b && ((b = 0), a++));
          }
          e = new SButton(this);
          e.idx = -1;
          e.text = lang.NO_PATCH;
          e.textColor = color.white;
          e.setPos(10 + 80 * b, 10 + 60 * a);
          e.setSize(70, 50);
          e.onPress = function () {
            c.valueFunc(this.idx);
            c.close();
          };
          this.buttons.push(e);
          b++;
          7 < b && ((b = 0), a++);
          0 < b && a++;
          this.h = 10 + 60 * a;
        },
        valueFunc: function () {},
        calcGeometry: function () {
          this.x = ((screenWidth - this.w) / 2) | 0;
          this.y = ((screenHeight - this.h) / 2) | 0;
        },
        onDelete: function () {},
        paint: function () {
          ctx.fillStyle = "#28292D";
          ctx.fillRoundRect(0, 0, this.w, this.h, 10);
          var a = ctx.createLinearGradient(0, 0, this.w, this.h);
          a.addColorStop(0, "rgba(255,255,255,0)");
          a.addColorStop(0.2, "rgba(255,255,255,0)");
          a.addColorStop(0.5, "rgba(255,255,255,0.15)");
          a.addColorStop(0.8, "rgba(255,255,255,0)");
          a.addColorStop(1, "rgba(255,255,255,0)");
          ctx.fillStyle = a;
          ctx.fillRoundRect(0, 0, this.w, this.h, 10);
          ctx.roundRect(0, 0, this.w, this.h, 10);
          ctx.strokeStyle = "#333";
          ctx.lineWidth = 2;
          ctx.stroke();
        },
      });
  </script>
  <script>
    DEPLOY = true;
  </script>
  <title>Soundcraft Ui</title>
</head>
<body>
<canvas id="mixer">Your browser does not support HTML5 Canvas.</canvas>
<div id="noConnectMessage">
  <div>
    <div id="CON_MSG">Connecting...</div>
  </div>
</div>
<div id="MSG_CONTAINER">
  <div>
                <span id="MSG_BODY">
                    POPUP<br />
                    MESSAGE
                </span>
  </div>
</div>
<div id="EDIT_CONTAINER">
  <div>
                <span id="EDIT_BODY">
                    <span id="DELAY_TIME" style="font-size: 16pt; display: none;">
                        <input type="radio" name="unit" value="ms" checked /><span id="span_ms">ms2</span> <input type="radio" name="unit" value="meters" /><span id="span_mt">meters2</span> <input type="radio" name="unit" value="ft" />
                        <span id="span_ft">ft2</span> <input type="radio" name="unit" value="smpl" /><span id="span_smp">samples2</span> <input type="radio" name="unit" value="fps" /><span id="span_fps">fps2</span>
                        <br />
                    </span>
                    <span id="REN_NAV" style="display: none;">
                        <input type="button" value="<" class="BTN_SM" onclick="renamePrev()" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <input type="button" value=">" class="BTN_SM" onclick="renameNext()" />
                        <br />
                    </span>
                    <input type="text" id="eb2" name="editbox" maxlength="20" /><br />
                    <span id="EDIT_LABEL">Input value:</span><br />
                    <input type="submit" value="OK" id="EDIT_OK" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <input type="submit" value="CANCEL" id="EDIT_CANCEL" />
                </span>
  </div>
</div>
<div id="CONF_CONTAINER">
  <div>
                <span id="CONF_BODY">
                    <span id="CONF_LABEL">Confirmation text can be long really really 123</span><br />
                    <br />
                    <input type="submit" value="OK" id="CONF_OK" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <input type="submit" value="CANCEL" id="CONF_CANCEL" />
                </span>
  </div>
</div>
<div id="DIM_CAPTURE"></div>
<div id="PORTRAIT_PAGE">
  <br />
  PORTRAIT ORIENTATION IS NOT SUPPORTED<br />
</div>
<input type="text" id="eb" maxlength="21" />
</body>
</html>
